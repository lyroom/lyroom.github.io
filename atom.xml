<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Henry&#39;Blog</title>
  
  <subtitle>å®‡å®™å¾ˆå¤§ï¼Œç”Ÿæ´»æ›´å¤§</subtitle>
  <link href="https://lyroom.github.io/atom.xml" rel="self"/>
  
  <link href="https://lyroom.github.io/"/>
  <updated>2025-10-19T01:16:49.000Z</updated>
  <id>https://lyroom.github.io/</id>
  
  <author>
    <name>è¿ªä¸½æƒ¹Bug</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>æ˜é“ï¼Œæ˜èº«</title>
    <link href="https://lyroom.github.io/2025/10/19/%E6%98%8E%E9%81%93%EF%BC%8C%E6%98%8E%E8%BA%AB/"/>
    <id>https://lyroom.github.io/2025/10/19/%E6%98%8E%E9%81%93%EF%BC%8C%E6%98%8E%E8%BA%AB/</id>
    <published>2025-10-19T01:16:49.000Z</published>
    <updated>2025-10-19T01:16:49.000Z</updated>
    
    <content type="html"><![CDATA[<!-- ç©ºä¸¤æ ¼ --><p style="text-indent:2em;">â€‹   ä½ æ˜¯è°->æ˜èº«->æ˜é“->å¤§æ— ç•ç²¾ç¥->ç›´é¢è‡ªå·±ï¼Œåæ±‚è¯¸å·±ï¼Œç ´è€Œåç«‹</p><!-- å³å¯¹é½ --><p style="text-align: right;">â€‹    â€”â€” 2025/10/19</p><span id="more"></span><center><img src="/2025/10/19/æ˜é“ï¼Œæ˜èº«/æ£®æ—.jpg"  title="æ·±æ—" alt="å›¾ç‰‡å¥½åƒèµ°ä¸¢äº†" style="zoom:45%"><!--alt:è¡¨ç¤ºå›¾ç‰‡æœªåŠ è½½æ—¶æ˜¾ç¤ºçš„æ–‡å­—--><div class="img-alt is-center" align="center">ã€Šé¸¿æ²Ÿå¤§çŸ³å¤´ã€‹</div> <!--è¿™é‡Œå†™çš„æ˜¯å›¾æ³¨--></center>]]></content>
    
    
    <summary type="html">&lt;!-- ç©ºä¸¤æ ¼ --&gt;
&lt;p style=&quot;text-indent:2em;&quot;&gt;â€‹	
   ä½ æ˜¯è°-&gt;æ˜èº«-&gt;æ˜é“-&gt;å¤§æ— ç•ç²¾ç¥-&gt;ç›´é¢è‡ªå·±ï¼Œåæ±‚è¯¸å·±ï¼Œç ´è€Œåç«‹
&lt;/p&gt;

&lt;!-- å³å¯¹é½ --&gt;
&lt;p style=&quot;text-align: right;&quot;&gt;â€‹	
    â€”â€” 2025/10/19
&lt;/p&gt;</summary>
    
    
    
    
    <category term="æµ®ç”Ÿå…­è®°" scheme="https://lyroom.github.io/tags/%E6%B5%AE%E7%94%9F%E5%85%AD%E8%AE%B0/"/>
    
  </entry>
  
  <entry>
    <title>å¸¸é‡æŒ‡é’ˆè¿˜æ˜¯æŒ‡é’ˆå¸¸é‡â€”â€”conståˆ°åº•ä¿®é¥°äº†è°ï¼Ÿ</title>
    <link href="https://lyroom.github.io/2025/10/04/%E5%B8%B8%E9%87%8F%E6%8C%87%E9%92%88%E8%BF%98%E6%98%AF%E6%8C%87%E9%92%88%E5%B8%B8%E9%87%8F%E2%80%94%E2%80%94const%E5%88%B0%E5%BA%95%E4%BF%AE%E9%A5%B0%E4%BA%86%E8%B0%81%EF%BC%9F/"/>
    <id>https://lyroom.github.io/2025/10/04/%E5%B8%B8%E9%87%8F%E6%8C%87%E9%92%88%E8%BF%98%E6%98%AF%E6%8C%87%E9%92%88%E5%B8%B8%E9%87%8F%E2%80%94%E2%80%94const%E5%88%B0%E5%BA%95%E4%BF%AE%E9%A5%B0%E4%BA%86%E8%B0%81%EF%BC%9F/</id>
    <published>2025-10-04T08:19:27.000Z</published>
    <updated>2025-10-04T08:19:27.000Z</updated>
    
    <content type="html"><![CDATA[<p>å½“<code>const</code>é‡åˆ°æŒ‡é’ˆï¼Œå¼•ç”¨æ—¶ï¼Œæˆ‘ä»¬å¾€å¾€ä¼šå¾ˆå›°æƒ‘ï¼Œå®ƒä¿®é¥°çš„æ˜¯æŒ‡é’ˆæœ¬èº«è¿˜æ˜¯æŒ‡é’ˆæ‰€æŒ‡å‘çš„å˜é‡å‘¢ï¼Ÿæœ¬æ–‡ä¼šåŠ©ä½ è§£å†³è¿™ç±»é—®é¢˜ã€‚</p><span id="more"></span><h2 id="ğŸ”¹-C-const-ä¿®é¥°é¡ºåºå›¾"><a href="#ğŸ”¹-C-const-ä¿®é¥°é¡ºåºå›¾" class="headerlink" title="ğŸ”¹ C++ const ä¿®é¥°é¡ºåºå›¾"></a>ğŸ”¹ C++ const ä¿®é¥°é¡ºåºå›¾</h2><h3 id="1-åŸºç¡€è§„åˆ™ï¼ˆå³å·¦æ³•åˆ™ï¼‰"><a href="#1-åŸºç¡€è§„åˆ™ï¼ˆå³å·¦æ³•åˆ™ï¼‰" class="headerlink" title="1. åŸºç¡€è§„åˆ™ï¼ˆå³å·¦æ³•åˆ™ï¼‰"></a>1. åŸºç¡€è§„åˆ™ï¼ˆå³å·¦æ³•åˆ™ï¼‰</h3><p>è¯»ä¸€ä¸ªå£°æ˜æ—¶ï¼š</p><ul><li>ä»å˜é‡åå¼€å§‹</li><li>å…ˆçœ‹å³è¾¹ï¼Œå†çœ‹å·¦è¾¹</li><li><code>*</code>ã€<code>&amp;</code> ä¼˜å…ˆçº§ç›¸åŒï¼ŒæŒ‰ç»“åˆå¾‹</li><li><code>const</code> ä¿®é¥°å®ƒ<strong>å·¦è¾¹æœ€è¿‘çš„ä¸œè¥¿</strong>ï¼ˆå¦‚æœå·¦è¾¹æ²¡æœ‰ï¼Œå°±ä¿®é¥°å³è¾¹ï¼‰</li></ul><hr><h3 id="2-å¸¸è§ä¾‹å­å›¾"><a href="#2-å¸¸è§ä¾‹å­å›¾" class="headerlink" title="2. å¸¸è§ä¾‹å­å›¾"></a>2. å¸¸è§ä¾‹å­å›¾</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span>* p;</span><br><span class="line">p â†’ * â†’ <span class="type">int</span></span><br><span class="line">p æ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘ <span class="type">int</span></span><br></pre></td></tr></table></figure><hr><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">const</span> <span class="type">int</span>* p; <span class="comment">//constå·¦è¾¹æ²¡ä¸œè¥¿ï¼Œé™å®šå³è¾¹çš„int </span></span><br><span class="line">p â†’ * â†’ <span class="type">const</span> <span class="type">int</span></span><br><span class="line">p æ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘ <span class="type">const</span> <span class="type">int</span></span><br></pre></td></tr></table></figure><hr><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span>* <span class="type">const</span> p; <span class="comment">//å·¦è¾¹æœ‰int *ï¼Œconsté™å®šint *</span></span><br><span class="line">     <span class="type">const</span></span><br><span class="line">       â”‚</span><br><span class="line">p â†’ * â”€â”˜ â†’ <span class="type">int</span></span><br><span class="line">p æ˜¯ä¸€ä¸ª <span class="type">const</span> æŒ‡é’ˆï¼ŒæŒ‡å‘ <span class="type">int</span></span><br></pre></td></tr></table></figure><hr><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">const</span> <span class="type">int</span>* <span class="type">const</span> p;</span><br><span class="line">     <span class="type">const</span></span><br><span class="line">       â”‚</span><br><span class="line">p â†’ * â”€â”˜ â†’ <span class="type">const</span> <span class="type">int</span></span><br><span class="line">p æ˜¯ä¸€ä¸ª <span class="type">const</span> æŒ‡é’ˆï¼ŒæŒ‡å‘ <span class="type">const</span> <span class="type">int</span></span><br></pre></td></tr></table></figure><hr><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span>&amp; r;</span><br><span class="line">r â†’ &amp; â†’ <span class="type">int</span></span><br><span class="line">r æ˜¯ <span class="type">int</span> çš„å¼•ç”¨</span><br></pre></td></tr></table></figure><hr><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">const</span> <span class="type">int</span>&amp; r;</span><br><span class="line">r â†’ &amp; â†’ <span class="type">const</span> <span class="type">int</span></span><br><span class="line">r æ˜¯ <span class="type">const</span> <span class="type">int</span> çš„å¼•ç”¨</span><br></pre></td></tr></table></figure><hr><h3 id="3-æ¥ä¸ªæµ‹è¯•"><a href="#3-æ¥ä¸ªæµ‹è¯•" class="headerlink" title="3. æ¥ä¸ªæµ‹è¯•"></a>3. æ¥ä¸ªæµ‹è¯•</h3><p><strong>é—®é¢˜å¼•å…¥ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printValue</span><span class="params">(<span class="type">const</span> T&amp; t)</span> </span>&#123;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;General printValue: &quot;</span> &lt;&lt; t &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;&gt;</span><br><span class="line"><span class="type">void</span> <span class="built_in">printValue</span>&lt;std::string &gt;(<span class="type">const</span> std::string&amp; t) &#123;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Specialized printValue: &quot;</span> &lt;&lt; t &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;&gt;</span><br><span class="line"><span class="type">void</span> <span class="built_in">printValue</span>&lt;<span class="type">int</span>*&gt;(<span class="type">const</span> <span class="type">int</span>*&amp; t) &#123;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Specialized printValue: &quot;</span> &lt;&lt; *t &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªæ¨¡æ¿æŠ¥äº†ç¬¬12è¡Œä»£ç çš„æ¨¡æ¿å’ŒåŸæ¨¡ç‰ˆä¸åŒ¹é…ï¼Œè¿™ä¸ªåŸå› æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ</p><p><strong>è§£å†³æ€è·¯ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">const</span> std::string&amp; t; <span class="comment">// const å·¦è¾¹æ²¡ä¸œè¥¿ï¼Œé™å®šstd::string</span></span><br><span class="line">r â†’ &amp; â†’ <span class="type">const</span> std::string</span><br><span class="line">r æ˜¯ä¸€ä¸ªå¼•ç”¨ï¼Œç»‘å®šåˆ° <span class="string">&quot;std::stringçš„ä¸€ä¸ªå¸¸é‡&quot;</span></span><br></pre></td></tr></table></figure><hr><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">const</span> <span class="type">int</span>*&amp; r; <span class="comment">//const é™å®šint</span></span><br><span class="line">r â†’ &amp; â†’ * â†’ <span class="type">const</span> <span class="type">int</span></span><br><span class="line">r æ˜¯ä¸€ä¸ªå¼•ç”¨ï¼Œç»‘å®šåˆ° <span class="string">&quot;æŒ‡å‘ const int çš„æŒ‡é’ˆ&quot;</span></span><br></pre></td></tr></table></figure><hr><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span>* <span class="type">const</span>&amp; r; <span class="comment">//å·¦è¾¹æœ‰int * ï¼Œconsté™å®šint*</span></span><br><span class="line">r â†’ &amp; â†’ <span class="type">const</span> * â†’ <span class="type">int</span></span><br><span class="line">r æ˜¯ä¸€ä¸ªå¼•ç”¨ï¼Œç»‘å®šåˆ° <span class="string">&quot;const æŒ‡é’ˆï¼ŒæŒ‡å‘ int&quot;</span></span><br></pre></td></tr></table></figure><p>å†çœ‹çœ‹è¿™ä¸ªåŸæ¨¡æ¿ï¼Œæˆ‘ä»¬å¸Œæœ›<code>const</code>é™å®šçš„æ˜¯<code>Tç±»å‹æ•°æ®t</code>çš„å¼•ç”¨å†…å®¹ï¼Œè€Œæˆ‘ä»¬çš„ä¸»è§’æ˜¯<code>int *</code>,æ˜¯ä¸€ä¸ªæŒ‡å‘<code>int</code>çš„æŒ‡é’ˆï¼Œæˆ‘ä»¬éœ€è¦è¿™ä¸ªæŒ‡é’ˆä¸è¢«ä¿®æ”¹ï¼Œè€Œä¸æ˜¯è¿™ä¸ªæŒ‡é’ˆæŒ‡å‘çš„ä¸€ä¸ª<code>intæ•°æ®</code>ä¸è¢«ä¿®æ”¹ï¼Œæ‰€ä»¥è¦æ”¹æˆä¸‹é¢è¿™ç§æƒ…å†µæ‰èƒ½åŒ¹é…åŸæ¨¡æ¿ã€‚</p><hr><h2 id="ğŸ“Œ-C-const-ä¿®é¥°é€ŸæŸ¥è¡¨"><a href="#ğŸ“Œ-C-const-ä¿®é¥°é€ŸæŸ¥è¡¨" class="headerlink" title="ğŸ“Œ C++ const ä¿®é¥°é€ŸæŸ¥è¡¨"></a>ğŸ“Œ C++ const ä¿®é¥°é€ŸæŸ¥è¡¨</h2><table><thead><tr><th>å£°æ˜</th><th>å«ä¹‰</th><th>å“ªä¸ªæ˜¯ const</th><th>èƒ½å¦æ”¹å¯¹è±¡</th><th>èƒ½å¦æ”¹æŒ‡é’ˆ</th></tr></thead><tbody><tr><td><code>int* p;</code></td><td>p æ˜¯æŒ‡é’ˆï¼ŒæŒ‡å‘ int</td><td>æ—  const</td><td>âœ… å¯ä»¥</td><td>âœ… å¯ä»¥</td></tr><tr><td><code>const int* p;</code> æˆ– <code>int const* p;</code></td><td>p æ˜¯æŒ‡é’ˆï¼ŒæŒ‡å‘ <strong>const int</strong></td><td>int æ˜¯ const</td><td>âŒ ä¸è¡Œ</td><td>âœ… å¯ä»¥</td></tr><tr><td><code>int* const p;</code></td><td>p æ˜¯ <strong>const æŒ‡é’ˆ</strong>ï¼ŒæŒ‡å‘ int</td><td>æŒ‡é’ˆæ˜¯ const</td><td>âœ… å¯ä»¥</td><td>âŒ ä¸è¡Œ</td></tr><tr><td><code>const int* const p;</code></td><td>p æ˜¯ <strong>const æŒ‡é’ˆ</strong>ï¼ŒæŒ‡å‘ <strong>const int</strong></td><td>ä¸¤è€…éƒ½ const</td><td>âŒ ä¸è¡Œ</td><td>âŒ ä¸è¡Œ</td></tr><tr><td><code>int&amp; r;</code></td><td>r æ˜¯ int çš„å¼•ç”¨</td><td>æ—  const</td><td>âœ… å¯ä»¥</td><td>â€”â€”</td></tr><tr><td><code>const int&amp; r;</code></td><td>r æ˜¯ const int çš„å¼•ç”¨</td><td>int æ˜¯ const</td><td>âŒ ä¸è¡Œ</td><td>â€”â€”</td></tr><tr><td><code>const int*&amp; r;</code></td><td>r æ˜¯å¼•ç”¨ï¼Œç»‘å®šåˆ°ã€ŒæŒ‡å‘ const int çš„æŒ‡é’ˆã€</td><td>int æ˜¯ const</td><td>âŒ ä¸è¡Œ</td><td>âœ… å¯ä»¥</td></tr><tr><td><code>int* const&amp; r;</code></td><td>r æ˜¯å¼•ç”¨ï¼Œç»‘å®šåˆ°ã€Œconst æŒ‡é’ˆï¼ŒæŒ‡å‘ intã€</td><td>æŒ‡é’ˆæ˜¯ const</td><td>âœ… å¯ä»¥</td><td>âŒ ä¸è¡Œ</td></tr><tr><td><code>const int* const&amp; r;</code></td><td>r æ˜¯å¼•ç”¨ï¼Œç»‘å®šåˆ°ã€Œconst æŒ‡é’ˆï¼ŒæŒ‡å‘ const intã€</td><td>ä¸¤è€…éƒ½ const</td><td>âŒ ä¸è¡Œ</td><td>âŒ ä¸è¡Œ</td></tr></tbody></table><hr><h2 id="ğŸ“Œ-å£è¯€æ€»ç»“"><a href="#ğŸ“Œ-å£è¯€æ€»ç»“" class="headerlink" title="ğŸ“Œ å£è¯€æ€»ç»“"></a>ğŸ“Œ å£è¯€æ€»ç»“</h2><ol><li><code>const</code> åœ¨ <code>*</code> <strong>å·¦è¾¹</strong> â†’ ä¿®é¥°æ‰€æŒ‡å¯¹è±¡<ul><li><code>const int* p</code> â†’ æŒ‡å‘ const intï¼ˆä¸èƒ½æ”¹å¯¹è±¡ï¼‰</li></ul></li><li><code>const</code> åœ¨ <code>*</code> <strong>å³è¾¹</strong> â†’ ä¿®é¥°æŒ‡é’ˆæœ¬èº«<ul><li><code>int* const p</code> â†’ const æŒ‡é’ˆï¼ˆä¸èƒ½æ”¹æŒ‡é’ˆï¼‰</li></ul></li><li><code>&amp;</code> å‡ºç°æ—¶ï¼Œå°±æ˜¯â€œå¼•ç”¨åˆ°å‰é¢é‚£ä¸€æ•´ä¸ªç±»å‹â€ã€‚</li></ol>]]></content>
    
    
    <summary type="html">&lt;p&gt;å½“&lt;code&gt;const&lt;/code&gt;é‡åˆ°æŒ‡é’ˆï¼Œå¼•ç”¨æ—¶ï¼Œæˆ‘ä»¬å¾€å¾€ä¼šå¾ˆå›°æƒ‘ï¼Œå®ƒä¿®é¥°çš„æ˜¯æŒ‡é’ˆæœ¬èº«è¿˜æ˜¯æŒ‡é’ˆæ‰€æŒ‡å‘çš„å˜é‡å‘¢ï¼Ÿæœ¬æ–‡ä¼šåŠ©ä½ è§£å†³è¿™ç±»é—®é¢˜ã€‚&lt;/p&gt;</summary>
    
    
    
    
    <category term="C++" scheme="https://lyroom.github.io/tags/C/"/>
    
    <category term="const" scheme="https://lyroom.github.io/tags/const/"/>
    
  </entry>
  
  <entry>
    <title>C++æœèŠ±å¤•æ‹¾-æ¨¡æ¿è¯¦è§£</title>
    <link href="https://lyroom.github.io/2025/09/26/C-%E6%9C%9D%E8%8A%B1%E5%A4%95%E6%8B%BE-%E6%A8%A1%E6%9D%BF%E8%AF%A6%E8%A7%A3/"/>
    <id>https://lyroom.github.io/2025/09/26/C-%E6%9C%9D%E8%8A%B1%E5%A4%95%E6%8B%BE-%E6%A8%A1%E6%9D%BF%E8%AF%A6%E8%A7%A3/</id>
    <published>2025-09-26T08:19:24.000Z</published>
    <updated>2025-09-26T08:19:24.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="æ¨¡æ¿è¯¦è§£"><a href="#æ¨¡æ¿è¯¦è§£" class="headerlink" title="æ¨¡æ¿è¯¦è§£"></a>æ¨¡æ¿è¯¦è§£</h1><h2 id="æ¨¡æ¿åŸºç¡€"><a href="#æ¨¡æ¿åŸºç¡€" class="headerlink" title="æ¨¡æ¿åŸºç¡€"></a>æ¨¡æ¿åŸºç¡€</h2><p>C++ æ¨¡æ¿ï¼ˆTemplatesï¼‰æ˜¯ç°ä»£ C++ ä¸­å¼ºå¤§è€Œçµæ´»çš„ç‰¹æ€§ï¼Œæ”¯æŒæ³›å‹ç¼–ç¨‹ï¼Œä½¿å¾—ä»£ç æ›´å…·å¤ç”¨æ€§å’Œç±»å‹å®‰å…¨æ€§ã€‚æ¨¡æ¿ä¸ä»…åŒ…æ‹¬åŸºæœ¬çš„å‡½æ•°æ¨¡æ¿å’Œç±»æ¨¡æ¿ï¼Œè¿˜æ¶µç›–äº†æ¨¡æ¿ç‰¹åŒ–ï¼ˆå…¨ç‰¹åŒ–ä¸åç‰¹åŒ–ï¼‰ã€æ¨¡æ¿å‚æ•°ç§ç±»ã€å˜å‚æ¨¡æ¿ï¼ˆVariadic Templatesï¼‰ã€æ¨¡æ¿å…ƒç¼–ç¨‹ï¼ˆTemplate Metaprogrammingï¼‰ã€SFINAEï¼ˆSubstitution Failure Is Not An Errorï¼‰ç­‰é«˜çº§å†…å®¹ã€‚</p><span id="more"></span><h3 id="å‡½æ•°æ¨¡æ¿"><a href="#å‡½æ•°æ¨¡æ¿" class="headerlink" title="å‡½æ•°æ¨¡æ¿"></a>å‡½æ•°æ¨¡æ¿</h3><p>å‡½æ•°æ¨¡æ¿å…è®¸ç¼–å†™é€šç”¨çš„å‡½æ•°ï¼Œé€šè¿‡ç±»å‹å‚æ•°åŒ–ï¼Œä½¿å…¶èƒ½å¤Ÿå¤„ç†ä¸åŒçš„æ•°æ®ç±»å‹ã€‚å®ƒé€šè¿‡æ¨¡æ¿å‚æ•°å®šä¹‰ä¸ç±»å‹æ— å…³çš„å‡½æ•°ã€‚</p><h4 id="è¯­æ³•ï¼š"><a href="#è¯­æ³•ï¼š" class="headerlink" title="è¯­æ³•ï¼š"></a>è¯­æ³•ï¼š</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="function">T <span class="title">functionName</span><span class="params">(T param)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// å‡½æ•°ä½“</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ç¤ºä¾‹ï¼šæœ€å¤§å€¼å‡½æ•°"><a href="#ç¤ºä¾‹ï¼šæœ€å¤§å€¼å‡½æ•°" class="headerlink" title="ç¤ºä¾‹ï¼šæœ€å¤§å€¼å‡½æ•°"></a>ç¤ºä¾‹ï¼šæœ€å¤§å€¼å‡½æ•°</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="function">T <span class="title">maxValue</span><span class="params">(T a, T b)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (a &gt; b) ? a : b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    std::cout &lt;&lt; <span class="built_in">maxValue</span>(<span class="number">3</span>, <span class="number">7</span>) &lt;&lt; std::endl;         <span class="comment">// int ç±»å‹</span></span><br><span class="line">    std::cout &lt;&lt; <span class="built_in">maxValue</span>(<span class="number">3.14</span>, <span class="number">2.72</span>) &lt;&lt; std::endl;  <span class="comment">// double ç±»å‹</span></span><br><span class="line">    std::cout &lt;&lt; <span class="built_in">maxValue</span>(<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;z&#x27;</span>) &lt;&lt; std::endl;    <span class="comment">// char ç±»å‹</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>è¾“å‡ºï¼š</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">7</span><br><span class="line">3.14</span><br><span class="line">z</span><br></pre></td></tr></table></figure><h4 id="è¦ç‚¹ï¼š"><a href="#è¦ç‚¹ï¼š" class="headerlink" title="è¦ç‚¹ï¼š"></a>è¦ç‚¹ï¼š</h4><ul><li>æ¨¡æ¿å‚æ•°åˆ—è¡¨ä»¥ <code>template &lt;typename T&gt;</code> æˆ– <code>template &lt;class T&gt;</code> å¼€å¤´ï¼Œä¸¤è€…ç­‰ä»·ã€‚</li><li>ç±»å‹æ¨å¯¼ï¼šç¼–è¯‘å™¨æ ¹æ®å‡½æ•°å‚æ•°è‡ªåŠ¨æ¨å¯¼æ¨¡æ¿å‚æ•°ç±»å‹ã€‚</li></ul><h3 id="ç±»æ¨¡æ¿"><a href="#ç±»æ¨¡æ¿" class="headerlink" title="ç±»æ¨¡æ¿"></a>ç±»æ¨¡æ¿</h3><p>ç±»æ¨¡æ¿å…è®¸å®šä¹‰é€šç”¨çš„ç±»ï¼Œé€šè¿‡ç±»å‹å‚æ•°åŒ–ï¼Œå®ç°ä¸åŒç±»å‹çš„å¯¹è±¡ã€‚</p><h4 id="è¯­æ³•ï¼š-1"><a href="#è¯­æ³•ï¼š-1" class="headerlink" title="è¯­æ³•ï¼š"></a>è¯­æ³•ï¼š</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ClassName</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    T memberVariable;</span><br><span class="line">    <span class="comment">// æ„é€ å‡½æ•°ã€æˆå‘˜å‡½æ•°ç­‰</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h4 id="ç¤ºä¾‹ï¼šç®€å•çš„-Pair-ç±»"><a href="#ç¤ºä¾‹ï¼šç®€å•çš„-Pair-ç±»" class="headerlink" title="ç¤ºä¾‹ï¼šç®€å•çš„ Pair ç±»"></a>ç¤ºä¾‹ï¼šç®€å•çš„ Pair ç±»</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T, <span class="keyword">typename</span> U&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Pair</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    T first;</span><br><span class="line">    U second;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">Pair</span>(T a, U b) : <span class="built_in">first</span>(a), <span class="built_in">second</span>(b) &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">print</span><span class="params">()</span> <span class="type">const</span> </span>&#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;Pair: &quot;</span> &lt;&lt; first &lt;&lt; <span class="string">&quot;, &quot;</span> &lt;&lt; second &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="function">Pair&lt;<span class="type">int</span>, <span class="type">double</span>&gt; <span class="title">p1</span><span class="params">(<span class="number">1</span>, <span class="number">2.5</span>)</span></span>;</span><br><span class="line">    p1.<span class="built_in">print</span>(); <span class="comment">// è¾“å‡ºï¼šPair: 1, 2.5</span></span><br><span class="line"></span><br><span class="line">    <span class="function">Pair&lt;std::string, std::string&gt; <span class="title">p2</span><span class="params">(<span class="string">&quot;Hello&quot;</span>, <span class="string">&quot;World&quot;</span>)</span></span>;</span><br><span class="line">    p2.<span class="built_in">print</span>(); <span class="comment">// è¾“å‡ºï¼šPair: Hello, World</span></span><br><span class="line"></span><br><span class="line">    <span class="function">Pair&lt;std::string, <span class="type">int</span>&gt; <span class="title">p3</span><span class="params">(<span class="string">&quot;Age&quot;</span>, <span class="number">30</span>)</span></span>;</span><br><span class="line">    p3.<span class="built_in">print</span>(); <span class="comment">// è¾“å‡ºï¼šPair: Age, 30</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="è¾“å‡ºï¼š"><a href="#è¾“å‡ºï¼š" class="headerlink" title="è¾“å‡ºï¼š"></a><strong>è¾“å‡ºï¼š</strong></h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Pair: 1, 2.5</span><br><span class="line">Pair: Hello, World</span><br><span class="line">Pair: Age, 30</span><br></pre></td></tr></table></figure><h4 id="è¦ç‚¹ï¼š-1"><a href="#è¦ç‚¹ï¼š-1" class="headerlink" title="è¦ç‚¹ï¼š"></a>è¦ç‚¹ï¼š</h4><ul><li>ç±»æ¨¡æ¿å¯ä»¥æœ‰å¤šä¸ªç±»å‹å‚æ•°ã€‚</li><li>æ¨¡æ¿å‚æ•°å¯ä»¥è¢«ç”¨äºæˆå‘˜å˜é‡å’Œæˆå‘˜å‡½æ•°ä¸­ã€‚</li><li>ç±»æ¨¡æ¿å®ä¾‹åŒ–æ—¶æŒ‡å®šå…·ä½“ç±»å‹ï¼Œå¦‚ <code>Pair&lt;int, double&gt;</code>ã€‚</li></ul><h2 id="æ¨¡æ¿å‚æ•°"><a href="#æ¨¡æ¿å‚æ•°" class="headerlink" title="æ¨¡æ¿å‚æ•°"></a>æ¨¡æ¿å‚æ•°</h2><p>æ¨¡æ¿å‚æ•°å†³å®šäº†æ¨¡æ¿çš„æ³›ç”¨æ€§ä¸çµæ´»æ€§ã€‚C++ æ¨¡æ¿å‚æ•°ç§ç±»ä¸»è¦åŒ…æ‹¬ç±»å‹å‚æ•°ã€éç±»å‹å‚æ•°å’Œæ¨¡æ¿æ¨¡æ¿å‚æ•°ã€‚</p><h3 id="ç±»å‹å‚æ•°ï¼ˆType-Parametersï¼‰"><a href="#ç±»å‹å‚æ•°ï¼ˆType-Parametersï¼‰" class="headerlink" title="ç±»å‹å‚æ•°ï¼ˆType Parametersï¼‰"></a>ç±»å‹å‚æ•°ï¼ˆType Parametersï¼‰</h3><p>ç±»å‹å‚æ•°ç”¨äºè¡¨ç¤ºä»»æ„ç±»å‹ï¼Œåœ¨æ¨¡æ¿å®ä¾‹åŒ–æ—¶è¢«å…·ä½“çš„ç±»å‹æ›¿ä»£ã€‚</p><h3 id="éç±»å‹å‚æ•°ï¼ˆNon-Type-Parametersï¼‰"><a href="#éç±»å‹å‚æ•°ï¼ˆNon-Type-Parametersï¼‰" class="headerlink" title="éç±»å‹å‚æ•°ï¼ˆNon-Type Parametersï¼‰"></a>éç±»å‹å‚æ•°ï¼ˆNon-Type Parametersï¼‰</h3><p>éç±»å‹å‚æ•°å…è®¸æ¨¡æ¿æ¥å—éç±»å‹çš„å€¼ï¼Œå¦‚æ•´æ•°ã€æŒ‡é’ˆæˆ–å¼•ç”¨ã€‚C++17 æ”¯æŒæ›´å¤šéç±»å‹å‚æ•°ç±»å‹ï¼Œå¦‚ autoã€‚</p><h4 id="è¯­æ³•ï¼š-2"><a href="#è¯­æ³•ï¼š-2" class="headerlink" title="è¯­æ³•ï¼š"></a>è¯­æ³•ï¼š</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T, <span class="type">int</span> Size&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Array</span> &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h4 id="ç¤ºä¾‹ï¼šå›ºå®šå¤§å°çš„æ•°ç»„ç±»"><a href="#ç¤ºä¾‹ï¼šå›ºå®šå¤§å°çš„æ•°ç»„ç±»" class="headerlink" title="ç¤ºä¾‹ï¼šå›ºå®šå¤§å°çš„æ•°ç»„ç±»"></a>ç¤ºä¾‹ï¼šå›ºå®šå¤§å°çš„æ•°ç»„ç±»</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T, <span class="type">int</span> N&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Array</span> &#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    T data[N];</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    T&amp; <span class="keyword">operator</span>[](<span class="type">int</span> index) &#123; <span class="keyword">return</span> data[index]; &#125;</span><br><span class="line">    <span class="type">const</span> T&amp; <span class="keyword">operator</span>[](<span class="type">int</span> index) <span class="type">const</span> &#123; <span class="keyword">return</span> data[index]; &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">fill</span><span class="params">(<span class="type">const</span> T&amp; value)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; N; ++i) &#123;</span><br><span class="line">            data[i] = value;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Array&lt;<span class="type">int</span>, <span class="number">5</span>&gt; arr;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; ++i) &#123;</span><br><span class="line">        arr[i] = i * <span class="number">10</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; ++i) &#123;</span><br><span class="line">        std::cout &lt;&lt; arr[i] &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>è¾“å‡ºï¼š</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">0 10 20 30 40 </span><br></pre></td></tr></table></figure><h4 id="æ³¨æ„äº‹é¡¹ï¼š"><a href="#æ³¨æ„äº‹é¡¹ï¼š" class="headerlink" title="æ³¨æ„äº‹é¡¹ï¼š"></a>æ³¨æ„äº‹é¡¹ï¼š</h4><ul><li>éç±»å‹å‚æ•°å¿…é¡»æ˜¯ç¼–è¯‘æœŸå¸¸é‡ã€‚</li><li>å…è®¸çš„ç±»å‹åŒ…æ‹¬æ•´å‹ã€æšä¸¾ã€æŒ‡é’ˆã€å¼•ç”¨ç­‰ï¼Œä½†ä¸åŒ…æ‹¬æµ®ç‚¹æ•°å’Œç±»ç±»å‹ã€‚</li></ul><h3 id="æ¨¡æ¿æ¨¡æ¿å‚æ•°ï¼ˆTemplate-Template-Parametersï¼‰"><a href="#æ¨¡æ¿æ¨¡æ¿å‚æ•°ï¼ˆTemplate-Template-Parametersï¼‰" class="headerlink" title="æ¨¡æ¿æ¨¡æ¿å‚æ•°ï¼ˆTemplate Template Parametersï¼‰"></a>æ¨¡æ¿æ¨¡æ¿å‚æ•°ï¼ˆTemplate Template Parametersï¼‰</h3><p>æ¨¡æ¿æ¨¡æ¿å‚æ•°å…è®¸æ¨¡æ¿æ¥å—å¦ä¸€ä¸ªæ¨¡æ¿ä½œä¸ºå‚æ•°ã€‚è¿™å¯¹äºæŠ½è±¡å®¹å™¨å’Œç­–ç•¥æ¨¡å¼ç­‰åœºæ™¯éå¸¸æœ‰ç”¨ã€‚</p><h4 id="è¯­æ³•ï¼š-3"><a href="#è¯­æ³•ï¼š-3" class="headerlink" title="è¯­æ³•ï¼š"></a>è¯­æ³•ï¼š</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">template</span> &lt;<span class="keyword">typename</span>&gt; <span class="keyword">class</span> <span class="title class_">Container</span>&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Adapter</span> &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h4 id="ç¤ºä¾‹ï¼šå®¹å™¨é€‚é…å™¨"><a href="#ç¤ºä¾‹ï¼šå®¹å™¨é€‚é…å™¨" class="headerlink" title="ç¤ºä¾‹ï¼šå®¹å™¨é€‚é…å™¨"></a>ç¤ºä¾‹ï¼šå®¹å™¨é€‚é…å™¨</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;deque&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">template</span> &lt;<span class="keyword">typename</span>&gt; <span class="keyword">class</span> <span class="title class_">Container</span>&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Stack</span> &#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    Container&lt;<span class="type">int</span>&gt; elements;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">push</span><span class="params">(<span class="type">int</span> value)</span> </span>&#123; elements.<span class="built_in">push_back</span>(value); &#125;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">pop</span><span class="params">()</span> </span>&#123; elements.<span class="built_in">pop_back</span>(); &#125;</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">top</span><span class="params">()</span> <span class="type">const</span> </span>&#123; <span class="keyword">return</span> elements.<span class="built_in">back</span>(); &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Stack&lt;std::vector&gt; stack1;</span><br><span class="line">    Stack&lt;std::deque&gt; stack2;</span><br><span class="line">    </span><br><span class="line">    stack1.<span class="built_in">push</span>(<span class="number">1</span>); stack1.<span class="built_in">push</span>(<span class="number">2</span>);</span><br><span class="line">    stack2.<span class="built_in">push</span>(<span class="number">3</span>); stack2.<span class="built_in">push</span>(<span class="number">4</span>);</span><br><span class="line">    </span><br><span class="line">    std::cout &lt;&lt; stack1.<span class="built_in">top</span>() &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; stack2.<span class="built_in">top</span>() &lt;&lt; std::endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>è¾“å‡ºï¼š</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2 4</span><br></pre></td></tr></table></figure><h4 id="è¦ç‚¹ï¼š-2"><a href="#è¦ç‚¹ï¼š-2" class="headerlink" title="è¦ç‚¹ï¼š"></a>è¦ç‚¹ï¼š</h4><ul><li>æ¨¡æ¿æ¨¡æ¿å‚æ•°éœ€è¦å®Œå…¨åŒ¹é…è¢«æ¥å—æ¨¡æ¿çš„å‚æ•°åˆ—è¡¨ã€‚</li><li>å¯é€šè¿‡é»˜è®¤æ¨¡æ¿å‚æ•°å¢å¼ºçµæ´»æ€§ã€‚</li></ul><h2 id="æ¨¡æ¿ç‰¹åŒ–ï¼ˆTemplate-Specializationï¼‰"><a href="#æ¨¡æ¿ç‰¹åŒ–ï¼ˆTemplate-Specializationï¼‰" class="headerlink" title="æ¨¡æ¿ç‰¹åŒ–ï¼ˆTemplate Specializationï¼‰"></a>æ¨¡æ¿ç‰¹åŒ–ï¼ˆTemplate Specializationï¼‰</h2><p>æ¨¡æ¿ç‰¹åŒ–å…è®¸å¼€å‘è€…ä¸ºç‰¹å®šç±»å‹æˆ–ç±»å‹ç»„åˆæä¾›ä¸“é—¨çš„å®ç°ã€‚å½“é€šç”¨æ¨¡æ¿æ— æ³•æ»¡è¶³ç‰¹å®šéœ€æ±‚æ—¶ï¼Œç‰¹åŒ–æ¨¡æ¿å¯ä»¥è°ƒæ•´è¡Œä¸ºä»¥å¤„ç†ç‰¹å®šçš„æƒ…å†µã€‚C++ æ”¯æŒå…¨ç‰¹åŒ–ï¼ˆFull Specializationï¼‰<em>å’Œ</em>åç‰¹åŒ–ï¼ˆPartial Specializationï¼‰ï¼Œä½†éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå‡½æ•°æ¨¡æ¿ä¸æ”¯æŒåç‰¹åŒ–ï¼Œåªèƒ½è¿›è¡Œå…¨ç‰¹åŒ–ã€‚</p><h3 id="å…¨ç‰¹åŒ–ï¼ˆFull-Specializationï¼‰"><a href="#å…¨ç‰¹åŒ–ï¼ˆFull-Specializationï¼‰" class="headerlink" title="å…¨ç‰¹åŒ–ï¼ˆFull Specializationï¼‰"></a>å…¨ç‰¹åŒ–ï¼ˆFull Specializationï¼‰</h3><p>å…¨ç‰¹åŒ–æ˜¯é’ˆå¯¹æ¨¡æ¿å‚æ•°çš„å®Œå…¨ç‰¹å®šç±»å‹ç»„åˆã€‚å®ƒæä¾›äº†æ¨¡æ¿çš„ä¸€ä¸ªç‰¹å®šç‰ˆæœ¬ï¼Œå½“æ¨¡æ¿å‚æ•°å®Œå…¨åŒ¹é…ç‰¹åŒ–ç±»å‹æ—¶ï¼Œç¼–è¯‘å™¨å°†ä¼˜å…ˆä½¿ç”¨è¯¥ç‰¹åŒ–ç‰ˆæœ¬ã€‚</p><h4 id="è¯­æ³•"><a href="#è¯­æ³•" class="headerlink" title="è¯­æ³•"></a>è¯­æ³•</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ClassName</span>&lt;SpecificType&gt; &#123;</span><br><span class="line">    <span class="comment">// ç‰¹åŒ–å®ç°</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h4 id="ç¤ºä¾‹ï¼šç±»æ¨¡æ¿å…¨ç‰¹åŒ–"><a href="#ç¤ºä¾‹ï¼šç±»æ¨¡æ¿å…¨ç‰¹åŒ–" class="headerlink" title="ç¤ºä¾‹ï¼šç±»æ¨¡æ¿å…¨ç‰¹åŒ–"></a>ç¤ºä¾‹ï¼šç±»æ¨¡æ¿å…¨ç‰¹åŒ–</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Printer</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">print</span><span class="params">(<span class="type">const</span> T&amp; value)</span> </span>&#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;General Printer: &quot;</span> &lt;&lt; value &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å…¨ç‰¹åŒ–ç‰ˆæœ¬</span></span><br><span class="line"><span class="keyword">template</span> &lt;&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Printer</span>&lt;std::string&gt; &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">print</span><span class="params">(<span class="type">const</span> std::string&amp; value)</span> </span>&#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;String Printer: \&quot;&quot;</span> &lt;&lt; value &lt;&lt; <span class="string">&quot;\&quot;&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Printer&lt;<span class="type">int</span>&gt; intPrinter;</span><br><span class="line">    Printer&lt;std::string&gt; stringPrinter;</span><br><span class="line">    </span><br><span class="line">    intPrinter.<span class="built_in">print</span>(<span class="number">42</span>);</span><br><span class="line">    stringPrinter.<span class="built_in">print</span>(<span class="string">&quot;Hello World&quot;</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>è¾“å‡ºï¼š</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">General Printer: 42</span><br><span class="line">String Printer: &quot;Hello World&quot;</span><br></pre></td></tr></table></figure><h4 id="è§£æ"><a href="#è§£æ" class="headerlink" title="è§£æ"></a>è§£æ</h4><ul><li>é€šç”¨æ¨¡æ¿é€‚ç”¨äºæ‰€æœ‰ç±»å‹ï¼Œåœ¨printå‡½æ•°ä¸­ä»¥é€šç”¨æ–¹å¼è¾“å‡ºå€¼ã€‚</li><li>å…¨ç‰¹åŒ–æ¨¡æ¿é’ˆå¯¹std::stringç±»å‹è¿›è¡Œäº†ä¸“é—¨åŒ–ï¼Œå®ç°äº†ä¸åŒçš„printå‡½æ•°ã€‚</li><li>å½“å®ä¾‹åŒ–<code>Printer&lt;std::string&gt;</code>æ—¶ï¼Œç¼–è¯‘å™¨é€‰æ‹©å…¨ç‰¹åŒ–ç‰ˆæœ¬è€Œéé€šç”¨æ¨¡æ¿ã€‚</li></ul><h3 id="åç‰¹åŒ–ï¼ˆPartial-Specializationï¼‰"><a href="#åç‰¹åŒ–ï¼ˆPartial-Specializationï¼‰" class="headerlink" title="åç‰¹åŒ–ï¼ˆPartial Specializationï¼‰"></a>åç‰¹åŒ–ï¼ˆPartial Specializationï¼‰</h3><p>åç‰¹åŒ–å…è®¸æ¨¡æ¿å¯¹éƒ¨åˆ†å‚æ•°è¿›è¡Œç‰¹å®šç±»å‹çš„å¤„ç†ï¼ŒåŒæ—¶ä¿æŒå…¶ä»–å‚æ•°çš„é€šç”¨æ€§ã€‚å¯¹äºç±»æ¨¡æ¿è€Œè¨€ï¼Œå¯ä»¥é’ˆå¯¹æ¨¡æ¿å‚æ•°çš„æŸäº›ç‰¹æ€§è¿›è¡Œåç‰¹åŒ–ï¼›å¯¹äºå‡½æ•°æ¨¡æ¿ï¼Œåˆ™ä»…æ”¯æŒå…¨ç‰¹åŒ–ï¼Œä¸æ”¯æŒåç‰¹åŒ–ã€‚</p><h4 id="è¯­æ³•-1"><a href="#è¯­æ³•-1" class="headerlink" title="è¯­æ³•"></a>è¯­æ³•</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T, <span class="keyword">typename</span> U&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ClassName</span>&lt;T, U*&gt; &#123;  <span class="comment">// åç‰¹åŒ–ï¼šå½“Uæ˜¯æŒ‡é’ˆç±»å‹æ—¶</span></span><br><span class="line">    <span class="comment">// ç‰¹åŒ–å®ç°</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h4 id="ç¤ºä¾‹ï¼šç±»æ¨¡æ¿åç‰¹åŒ–"><a href="#ç¤ºä¾‹ï¼šç±»æ¨¡æ¿åç‰¹åŒ–" class="headerlink" title="ç¤ºä¾‹ï¼šç±»æ¨¡æ¿åç‰¹åŒ–"></a>ç¤ºä¾‹ï¼šç±»æ¨¡æ¿åç‰¹åŒ–</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T, <span class="keyword">typename</span> U&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Pair</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    T first;</span><br><span class="line">    U second;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">print</span><span class="params">()</span> <span class="type">const</span> </span>&#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;General Pair: &quot;</span> &lt;&lt; first &lt;&lt; <span class="string">&quot;, &quot;</span> &lt;&lt; second &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åç‰¹åŒ–ç‰ˆæœ¬ï¼šå½“ç¬¬äºŒä¸ªç±»å‹æ˜¯æŒ‡é’ˆæ—¶</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T, <span class="keyword">typename</span> U&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Pair</span>&lt;T, U*&gt; &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    T first;</span><br><span class="line">    U* second;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">print</span><span class="params">()</span> <span class="type">const</span> </span>&#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;Pointer Pair: &quot;</span> &lt;&lt; first &lt;&lt; <span class="string">&quot;, &quot;</span>;</span><br><span class="line">        <span class="keyword">if</span> (second) &#123;</span><br><span class="line">            std::cout &lt;&lt; *second;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            std::cout &lt;&lt; <span class="string">&quot;nullptr&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        std::cout &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> value = <span class="number">100</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="function">Pair&lt;<span class="type">int</span>, <span class="type">double</span>&gt; <span class="title">p1</span><span class="params">(<span class="number">10</span>, <span class="number">3.14</span>)</span></span>;</span><br><span class="line">    <span class="function">Pair&lt;<span class="type">int</span>, <span class="type">int</span>*&gt; <span class="title">p2</span><span class="params">(<span class="number">20</span>, &amp;value)</span></span>;</span><br><span class="line">    </span><br><span class="line">    p1.<span class="built_in">print</span>();</span><br><span class="line">    p2.<span class="built_in">print</span>();</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>è¾“å‡ºï¼š</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">General Pair: 10, 3.14</span><br><span class="line">Pointer Pair: 20, 100</span><br></pre></td></tr></table></figure><h4 id="è§£æ-1"><a href="#è§£æ-1" class="headerlink" title="è§£æ"></a>è§£æ</h4><ul><li>é€šç”¨æ¨¡æ¿å¤„ç†éæŒ‡é’ˆç±»å‹å¯¹ã€‚</li><li>åç‰¹åŒ–æ¨¡æ¿å¤„ç†ç¬¬äºŒä¸ªç±»å‹ä¸ºæŒ‡é’ˆçš„æƒ…å†µï¼Œæ‰“å°æŒ‡é’ˆæŒ‡å‘çš„å€¼ã€‚</li><li>ä½¿ç”¨åç‰¹åŒ–æå‡äº†æ¨¡æ¿çš„çµæ´»æ€§ï¼Œä½¿å…¶èƒ½å¤Ÿæ ¹æ®éƒ¨åˆ†å‚æ•°ç±»å‹è¿›è¡Œä¸åŒå¤„ç†ã€‚</li></ul><h3 id="å‡½æ•°æ¨¡æ¿çš„ç‰¹åŒ–"><a href="#å‡½æ•°æ¨¡æ¿çš„ç‰¹åŒ–" class="headerlink" title="å‡½æ•°æ¨¡æ¿çš„ç‰¹åŒ–"></a>å‡½æ•°æ¨¡æ¿çš„ç‰¹åŒ–</h3><p>ä¸ç±»æ¨¡æ¿ä¸åŒï¼Œå‡½æ•°æ¨¡æ¿ä¸æ”¯æŒåç‰¹åŒ–ï¼Œåªèƒ½è¿›è¡Œå…¨ç‰¹åŒ–ã€‚å½“å¯¹å‡½æ•°æ¨¡æ¿è¿›è¡Œå…¨ç‰¹åŒ–æ—¶ï¼Œéœ€è¦æ˜¾å¼æŒ‡å®šç±»å‹ã€‚</p><h4 id="ç¤ºä¾‹ï¼šå‡½æ•°æ¨¡æ¿å…¨ç‰¹åŒ–"><a href="#ç¤ºä¾‹ï¼šå‡½æ•°æ¨¡æ¿å…¨ç‰¹åŒ–" class="headerlink" title="ç¤ºä¾‹ï¼šå‡½æ•°æ¨¡æ¿å…¨ç‰¹åŒ–"></a>ç¤ºä¾‹ï¼šå‡½æ•°æ¨¡æ¿å…¨ç‰¹åŒ–</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printValue</span><span class="params">(<span class="type">const</span> T&amp; value)</span> </span>&#123;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;General value: &quot;</span> &lt;&lt; value &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å…¨ç‰¹åŒ–ç‰ˆæœ¬</span></span><br><span class="line"><span class="keyword">template</span> &lt;&gt;</span><br><span class="line"><span class="type">void</span> <span class="built_in">printValue</span>&lt;std::string&gt;(<span class="type">const</span> std::string&amp; value) &#123;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;String value: \&quot;&quot;</span> &lt;&lt; value &lt;&lt; <span class="string">&quot;\&quot;&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">printValue</span>(<span class="number">42</span>);</span><br><span class="line">    <span class="built_in">printValue</span>(<span class="number">3.14</span>);</span><br><span class="line">    <span class="built_in">printValue</span>(std::<span class="built_in">string</span>(<span class="string">&quot;Hello&quot;</span>));</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>è¾“å‡ºï¼š</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">General value: 42</span><br><span class="line">General value: 3.14</span><br><span class="line">String value: &quot;Hello&quot;</span><br></pre></td></tr></table></figure><h4 id="è§£æ-2"><a href="#è§£æ-2" class="headerlink" title="è§£æ"></a>è§£æ</h4><ul><li>é€šç”¨å‡½æ•°æ¨¡æ¿é€‚ç”¨äºæ‰€æœ‰ç±»å‹ï¼Œæä¾›é€šç”¨çš„printValueå®ç°ã€‚</li><li>å…¨ç‰¹åŒ–å‡½æ•°æ¨¡æ¿ä¸“é—¨å¤„ç†std::stringç±»å‹ï¼Œæä¾›ä¸åŒçš„è¾“å‡ºæ ¼å¼ã€‚</li><li>è°ƒç”¨printValueæ—¶ï¼Œç¼–è¯‘å™¨æ ¹æ®å®å‚ç±»å‹é€‰æ‹©é€‚å½“çš„æ¨¡æ¿ç‰ˆæœ¬ã€‚</li></ul><h3 id="æ³¨æ„äº‹é¡¹"><a href="#æ³¨æ„äº‹é¡¹" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h3><ul><li><strong>ä¼˜å…ˆçº§</strong>ï¼šå…¨ç‰¹åŒ–ç‰ˆæœ¬çš„ä¼˜å…ˆçº§é«˜äºé€šç”¨æ¨¡æ¿ï¼Œå› æ­¤å½“ç‰¹åŒ–æ¡ä»¶æ»¡è¶³æ—¶ï¼Œæ€»æ˜¯é€‰æ‹©ç‰¹åŒ–ç‰ˆæœ¬ã€‚</li><li><strong>æ˜¾å¼æŒ‡å®šç±»å‹</strong>ï¼šå‡½æ•°æ¨¡æ¿ç‰¹åŒ–éœ€è¦åœ¨è°ƒç”¨æ—¶æ˜¾å¼æŒ‡å®šç±»å‹ï¼Œæˆ–è€…ç¡®ä¿ç±»å‹æ¨å¯¼å¯ä»¥æ­£ç¡®åŒ¹é…ç‰¹åŒ–ç‰ˆæœ¬ã€‚</li><li><strong>ä¸æ”¯æŒåç‰¹åŒ–</strong>ï¼šæ— æ³•é€šè¿‡åç‰¹åŒ–å¯¹å‡½æ•°æ¨¡æ¿è¿›è¡Œéƒ¨åˆ†ç‰¹åŒ–ï¼Œéœ€è¦é€šè¿‡å…¶ä»–æ–¹æ³•ï¼ˆå¦‚é‡è½½ï¼‰å®ç°ç±»ä¼¼åŠŸèƒ½ã€‚</li></ul><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><ul><li>å…¨ç‰¹åŒ–é€‚ç”¨äºä¸ºå…·ä½“ç±»å‹æˆ–ç±»å‹ç»„åˆæä¾›ä¸“é—¨å®ç°ï¼Œé€‚ç”¨äºç±»æ¨¡æ¿å’Œå‡½æ•°æ¨¡æ¿ã€‚</li><li>åç‰¹åŒ–ä»…é€‚ç”¨äºç±»æ¨¡æ¿ï¼Œå…è®¸é’ˆå¯¹éƒ¨åˆ†å‚æ•°è¿›è¡Œç‰¹å®šå¤„ç†ï¼ŒåŒæ—¶ä¿æŒå…¶ä»–å‚æ•°çš„é€šç”¨æ€§ã€‚</li><li>å‡½æ•°æ¨¡æ¿ä»…æ”¯æŒå…¨ç‰¹åŒ–ï¼Œä¸æ”¯æŒåç‰¹åŒ–ï¼›ç±»æ¨¡æ¿æ”¯æŒå…¨ç‰¹åŒ–å’Œåç‰¹åŒ–ã€‚</li><li>ç‰¹åŒ–æ¨¡æ¿æå‡äº†æ¨¡æ¿çš„çµæ´»æ€§å’Œé€‚åº”æ€§ï¼Œä½¿å…¶èƒ½å¤Ÿæ ¹æ®ä¸åŒç±»å‹éœ€æ±‚è°ƒæ•´è¡Œä¸ºã€‚</li></ul><h2 id="å˜å‚æ¨¡æ¿ï¼ˆVariadic-Templatesï¼‰"><a href="#å˜å‚æ¨¡æ¿ï¼ˆVariadic-Templatesï¼‰" class="headerlink" title="å˜å‚æ¨¡æ¿ï¼ˆVariadic Templatesï¼‰"></a>å˜å‚æ¨¡æ¿ï¼ˆVariadic Templatesï¼‰</h2><p>å˜å‚æ¨¡æ¿å…è®¸æ¨¡æ¿æ¥å—å¯å˜æ•°é‡çš„å‚æ•°ï¼Œæä¾›æé«˜çš„çµæ´»æ€§ï¼Œæ˜¯å®ç°è¯¸å¦‚ std::tupleã€std::variant ç­‰æ¨¡æ¿åº“ç»„ä»¶çš„åŸºç¡€ã€‚</p><h3 id="å®šä¹‰ä¸è¯­æ³•"><a href="#å®šä¹‰ä¸è¯­æ³•" class="headerlink" title="å®šä¹‰ä¸è¯­æ³•"></a>å®šä¹‰ä¸è¯­æ³•</h3><p>å˜å‚æ¨¡æ¿ä½¿ç”¨ å‚æ•°åŒ…ï¼ˆParameter Packï¼‰ï¼Œé€šè¿‡ <code>...</code> è¯­æ³•æ¥è¡¨ç¤ºã€‚</p><h4 id="è¯­æ³•ï¼š-4"><a href="#è¯­æ³•ï¼š-4" class="headerlink" title="è¯­æ³•ï¼š"></a>è¯­æ³•ï¼š</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span>... Args&gt;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">functionName</span><span class="params">(Args... args)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// å‡½æ•°ä½“</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="é€’å½’ä¸å±•å¼€ï¼ˆRecursion-and-Expansionï¼‰"><a href="#é€’å½’ä¸å±•å¼€ï¼ˆRecursion-and-Expansionï¼‰" class="headerlink" title="é€’å½’ä¸å±•å¼€ï¼ˆRecursion and Expansionï¼‰"></a>é€’å½’ä¸å±•å¼€ï¼ˆRecursion and Expansionï¼‰</h3><p>å˜å‚æ¨¡æ¿é€šå¸¸ä¸é€’å½’ç›¸ç»“åˆï¼Œé€šè¿‡é€’å½’åœ°å¤„ç†å‚æ•°åŒ…ï¼Œæˆ–è€…ä½¿ç”¨ æŠ˜å è¡¨è¾¾å¼ï¼ˆFold Expressionsï¼‰ æ¥å±•å¼€å‘å‚æ•°åŒ…ã€‚</p><h4 id="é€’å½’ç¤ºä¾‹ï¼šæ‰“å°æ‰€æœ‰å‚æ•°"><a href="#é€’å½’ç¤ºä¾‹ï¼šæ‰“å°æ‰€æœ‰å‚æ•°" class="headerlink" title="é€’å½’ç¤ºä¾‹ï¼šæ‰“å°æ‰€æœ‰å‚æ•°"></a>é€’å½’ç¤ºä¾‹ï¼šæ‰“å°æ‰€æœ‰å‚æ•°</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»ˆæ­¢å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">print</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    std::cout &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// é€’å½’å‡½æ•°æ¨¡æ¿</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T, <span class="keyword">typename</span>... Args&gt;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">print</span><span class="params">(T first, Args... args)</span> </span>&#123;</span><br><span class="line">    std::cout &lt;&lt; first &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">    <span class="built_in">print</span>(args...);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="number">1</span>, <span class="number">2.5</span>, <span class="string">&quot;Hello&quot;</span>, <span class="string">&#x27;A&#x27;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>è¾“å‡ºï¼š</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1 2.5 Hello A </span><br></pre></td></tr></table></figure><h4 id="æŠ˜å è¡¨è¾¾å¼ç‰ˆæœ¬"><a href="#æŠ˜å è¡¨è¾¾å¼ç‰ˆæœ¬" class="headerlink" title="æŠ˜å è¡¨è¾¾å¼ç‰ˆæœ¬"></a>æŠ˜å è¡¨è¾¾å¼ç‰ˆæœ¬</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span>... Args&gt;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">print</span><span class="params">(Args... args)</span> </span>&#123;</span><br><span class="line">    (std::cout &lt;&lt; ... &lt;&lt; args) &lt;&lt; std::endl;  <span class="comment">// C++17 æŠ˜å è¡¨è¾¾å¼</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="number">1</span>, <span class="number">2.5</span>, <span class="string">&quot;Hello&quot;</span>, <span class="string">&#x27;A&#x27;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æŠ˜å è¡¨è¾¾å¼ç¤ºä¾‹ï¼šè®¡ç®—æ€»å’Œ"><a href="#æŠ˜å è¡¨è¾¾å¼ç¤ºä¾‹ï¼šè®¡ç®—æ€»å’Œ" class="headerlink" title="æŠ˜å è¡¨è¾¾å¼ç¤ºä¾‹ï¼šè®¡ç®—æ€»å’Œ"></a>æŠ˜å è¡¨è¾¾å¼ç¤ºä¾‹ï¼šè®¡ç®—æ€»å’Œ</h3><p>C++17 å¼•å…¥äº†æŠ˜å è¡¨è¾¾å¼ï¼Œç®€åŒ–äº†å‚æ•°åŒ…çš„å¤„ç†ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span>... Args&gt;</span><br><span class="line"><span class="function"><span class="keyword">auto</span> <span class="title">sum</span><span class="params">(Args... args)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (args + ...);  <span class="comment">// äºŒå…ƒå³æŠ˜å </span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    std::cout &lt;&lt; <span class="built_in">sum</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>) &lt;&lt; std::endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>è¾“å‡ºï¼š</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">15</span><br></pre></td></tr></table></figure><h3 id="åº”ç”¨ç¤ºä¾‹"><a href="#åº”ç”¨ç¤ºä¾‹" class="headerlink" title="åº”ç”¨ç¤ºä¾‹"></a>åº”ç”¨ç¤ºä¾‹</h3><h4 id="ç¤ºä¾‹ï¼šæ—¥å¿—è®°å½•å™¨"><a href="#ç¤ºä¾‹ï¼šæ—¥å¿—è®°å½•å™¨" class="headerlink" title="ç¤ºä¾‹ï¼šæ—¥å¿—è®°å½•å™¨"></a>ç¤ºä¾‹ï¼šæ—¥å¿—è®°å½•å™¨</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span>... Args&gt;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">log</span><span class="params">(<span class="type">const</span> Args&amp;... args)</span> </span>&#123;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;[LOG] &quot;</span>;</span><br><span class="line">    (std::cout &lt;&lt; ... &lt;&lt; args) &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">log</span>(<span class="string">&quot;User&quot;</span>, <span class="string">&quot; logged in at &quot;</span>, <span class="number">14</span>, <span class="string">&quot;:30&quot;</span>);</span><br><span class="line">    <span class="built_in">log</span>(<span class="string">&quot;Error code: &quot;</span>, <span class="number">404</span>, <span class="string">&quot;, Message: &quot;</span>, <span class="string">&quot;Not Found&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>è¾“å‡ºï¼š</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[LOG] User logged in at 14:30</span><br><span class="line">[LOG] Error code: 404, Message: Not Found</span><br></pre></td></tr></table></figure><h3 id="è¦ç‚¹ï¼š-3"><a href="#è¦ç‚¹ï¼š-3" class="headerlink" title="è¦ç‚¹ï¼š"></a>è¦ç‚¹ï¼š</h3><ul><li>å˜å‚æ¨¡æ¿æå¤§åœ°æå‡äº†æ¨¡æ¿çš„çµæ´»æ€§ã€‚</li><li>ä½¿ç”¨é€’å½’æˆ–æŠ˜å è¡¨è¾¾å¼å¤„ç†å‚æ•°åŒ…ã€‚</li><li>å¸¸ç”¨äºå®ç°é€šç”¨å‡½æ•°ã€å®¹å™¨ç±»å’Œå…ƒç¼–ç¨‹å·¥å…·ã€‚</li></ul><h2 id="æ¨¡æ¿æŠ˜å ï¼ˆFold-Expressionsï¼‰"><a href="#æ¨¡æ¿æŠ˜å ï¼ˆFold-Expressionsï¼‰" class="headerlink" title="æ¨¡æ¿æŠ˜å ï¼ˆFold Expressionsï¼‰"></a>æ¨¡æ¿æŠ˜å ï¼ˆFold Expressionsï¼‰</h2><h3 id="1-æŠ˜å è¡¨è¾¾å¼çš„æ¦‚å¿µä¸èƒŒæ™¯"><a href="#1-æŠ˜å è¡¨è¾¾å¼çš„æ¦‚å¿µä¸èƒŒæ™¯" class="headerlink" title="1. æŠ˜å è¡¨è¾¾å¼çš„æ¦‚å¿µä¸èƒŒæ™¯"></a>1. æŠ˜å è¡¨è¾¾å¼çš„æ¦‚å¿µä¸èƒŒæ™¯</h3><p>åœ¨C++ä¸­ï¼Œå¯å˜å‚æ•°æ¨¡æ¿å…è®¸å‡½æ•°æˆ–ç±»æ¨¡æ¿æ¥å—ä»»æ„æ•°é‡çš„æ¨¡æ¿å‚æ•°ã€‚è¿™åœ¨ç¼–å†™çµæ´»ä¸”é€šç”¨çš„ä»£ç æ—¶éå¸¸æœ‰ç”¨ã€‚ç„¶è€Œï¼Œå¤„ç†å‚æ•°åŒ…ä¸­çš„æ¯ä¸ªå‚æ•°å¾€å¾€éœ€è¦é€’å½’æ¨¡æ¿æŠ€å·§ï¼Œè¿™æ ·çš„ä»£ç é€šå¸¸å¤æ‚ä¸”éš¾ä»¥ç»´æŠ¤ã€‚</p><p>æŠ˜å è¡¨è¾¾å¼çš„å¼•å…¥æ˜¾è‘—ç®€åŒ–äº†è¿™ä¸€è¿‡ç¨‹ã€‚å®ƒä»¬å…è®¸å¼€å‘è€…ç›´æ¥å¯¹å‚æ•°åŒ…åº”ç”¨æ“ä½œç¬¦ï¼Œè€Œæ— éœ€æ‰‹åŠ¨å±•å¼€æˆ–é€’å½’å¤„ç†å‚æ•°ã€‚è¿™ä¸ä»…ä½¿ä»£ç æ›´åŠ ç®€æ´ï¼Œè¿˜æé«˜äº†å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚</p><p>æŠ˜å è¡¨è¾¾å¼å¯åˆ†ä¸ºï¼š</p><ul><li><strong>ä¸€å…ƒæŠ˜å è¡¨è¾¾å¼ï¼ˆUnary Foldï¼‰</strong>ï¼šå¯¹å‚æ•°åŒ…ä¸­çš„æ¯ä¸ªå‚æ•°åº”ç”¨ä¸€ä¸ªä¸€å…ƒæ“ä½œç¬¦ã€‚</li><li><strong>äºŒå…ƒæŠ˜å è¡¨è¾¾å¼ï¼ˆBinary Foldï¼‰</strong>ï¼šå¯¹å‚æ•°åŒ…ä¸­çš„æ¯ä¸ªå‚æ•°åº”ç”¨ä¸€ä¸ªäºŒå…ƒæ“ä½œç¬¦ã€‚</li></ul><p>æ­¤å¤–ï¼ŒäºŒå…ƒæŠ˜å è¡¨è¾¾å¼å¯è¿›ä¸€æ­¥ç»†åˆ†ä¸º<strong>å·¦æŠ˜å ï¼ˆLeft Foldï¼‰</strong>å’Œ<strong>å³æŠ˜å ï¼ˆRight Foldï¼‰</strong>ï¼Œå–å†³äºæ“ä½œç¬¦çš„ç»“åˆæ–¹å‘ã€‚</p><h3 id="2-ä¸€å…ƒæŠ˜å è¡¨è¾¾å¼ï¼ˆUnary-Foldï¼‰"><a href="#2-ä¸€å…ƒæŠ˜å è¡¨è¾¾å¼ï¼ˆUnary-Foldï¼‰" class="headerlink" title="2. ä¸€å…ƒæŠ˜å è¡¨è¾¾å¼ï¼ˆUnary Foldï¼‰"></a>2. ä¸€å…ƒæŠ˜å è¡¨è¾¾å¼ï¼ˆUnary Foldï¼‰</h3><p>ä¸€å…ƒæŠ˜å è¡¨è¾¾å¼ç”¨äºåœ¨å‚æ•°åŒ…çš„æ¯ä¸ªå‚æ•°å‰æˆ–ååº”ç”¨ä¸€å…ƒæ“ä½œç¬¦ã€‚è¯­æ³•å½¢å¼å¦‚ä¸‹ï¼š</p><h4 id="å‰ç½®ä¸€å…ƒæŠ˜å ï¼ˆUnary-Prefix-Foldï¼‰"><a href="#å‰ç½®ä¸€å…ƒæŠ˜å ï¼ˆUnary-Prefix-Foldï¼‰" class="headerlink" title="å‰ç½®ä¸€å…ƒæŠ˜å ï¼ˆUnary Prefix Foldï¼‰"></a>å‰ç½®ä¸€å…ƒæŠ˜å ï¼ˆUnary Prefix Foldï¼‰</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(op ... pack)</span><br></pre></td></tr></table></figure><h4 id="åç½®ä¸€å…ƒæŠ˜å ï¼ˆUnary-Postfix-Foldï¼‰"><a href="#åç½®ä¸€å…ƒæŠ˜å ï¼ˆUnary-Postfix-Foldï¼‰" class="headerlink" title="åç½®ä¸€å…ƒæŠ˜å ï¼ˆUnary Postfix Foldï¼‰"></a>åç½®ä¸€å…ƒæŠ˜å ï¼ˆUnary Postfix Foldï¼‰</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(pack ... op)</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ï¼Œ<code>op</code> æ˜¯ä¸€å…ƒæ“ä½œç¬¦ï¼Œå¦‚<code>!</code>ï¼ˆé€»è¾‘éï¼‰ã€<code>~</code>ï¼ˆæŒ‰ä½å–åï¼‰ç­‰ã€‚</p><h4 id="ç¤ºä¾‹1ï¼šé€»è¾‘éæ“ä½œ"><a href="#ç¤ºä¾‹1ï¼šé€»è¾‘éæ“ä½œ" class="headerlink" title="ç¤ºä¾‹1ï¼šé€»è¾‘éæ“ä½œ"></a>ç¤ºä¾‹1ï¼šé€»è¾‘éæ“ä½œ</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span>... Args&gt;</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">allFalse</span><span class="params">(Args... args)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (!args &amp;&amp; ...);  <span class="comment">// ä¸€å…ƒå·¦æŠ˜å </span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    std::cout &lt;&lt; std::boolalpha;</span><br><span class="line">    std::cout &lt;&lt; <span class="built_in">allFalse</span>(<span class="literal">false</span>, <span class="literal">false</span>, <span class="literal">false</span>) &lt;&lt; std::endl;  <span class="comment">// true</span></span><br><span class="line">    std::cout &lt;&lt; <span class="built_in">allFalse</span>(<span class="literal">false</span>, <span class="literal">true</span>, <span class="literal">false</span>) &lt;&lt; std::endl;   <span class="comment">// false</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-äºŒå…ƒæŠ˜å è¡¨è¾¾å¼ï¼ˆBinary-Foldï¼‰"><a href="#3-äºŒå…ƒæŠ˜å è¡¨è¾¾å¼ï¼ˆBinary-Foldï¼‰" class="headerlink" title="3. äºŒå…ƒæŠ˜å è¡¨è¾¾å¼ï¼ˆBinary Foldï¼‰"></a>3. äºŒå…ƒæŠ˜å è¡¨è¾¾å¼ï¼ˆBinary Foldï¼‰</h3><p>äºŒå…ƒæŠ˜å è¡¨è¾¾å¼ç”¨äºåœ¨å‚æ•°åŒ…çš„æ¯ä¸ªå‚æ•°ä¹‹é—´åº”ç”¨ä¸€ä¸ªäºŒå…ƒæ“ä½œç¬¦ã€‚å®ƒä»¬å¯ä»¥åˆ†ä¸ºäºŒå…ƒå·¦æŠ˜å ï¼ˆBinary Left Foldï¼‰å’ŒäºŒå…ƒå³æŠ˜å ï¼ˆBinary Right Foldï¼‰ï¼Œå–å†³äºæ“ä½œç¬¦çš„ç»“åˆæ–¹å‘ã€‚</p><h4 id="äºŒå…ƒæŠ˜å è¡¨è¾¾å¼è¯­æ³•"><a href="#äºŒå…ƒæŠ˜å è¡¨è¾¾å¼è¯­æ³•" class="headerlink" title="äºŒå…ƒæŠ˜å è¡¨è¾¾å¼è¯­æ³•"></a>äºŒå…ƒæŠ˜å è¡¨è¾¾å¼è¯­æ³•</h4><p><strong>äºŒå…ƒå·¦æŠ˜å ï¼ˆLeft Foldï¼‰</strong>ï¼š</p><ul><li><code>(init op ... op pack)</code></li><li>æˆ–è€…ç®€åŒ–ä¸ºï¼š<code>(pack1 op ... op packN)</code></li></ul><p><strong>äºŒå…ƒå³æŠ˜å ï¼ˆRight Foldï¼‰</strong>ï¼š</p><ul><li><code>(pack1 op ... op init op ...)</code></li><li>æˆ–è€…ç®€åŒ–ä¸ºï¼š<code>(pack1 op ... op packN)</code></li></ul><p>å…¶ä¸­ï¼Œ<code>op</code> æ˜¯äºŒå…ƒæ“ä½œç¬¦ï¼Œå¦‚<code>+</code>ã€<code>*</code>ã€<code>&amp;&amp;</code>ã€<code>||</code>ã€<code>&lt;&lt;</code> ç­‰ã€‚</p><h4 id="å·¦æŠ˜å ä¸å³æŠ˜å çš„åŒºåˆ«"><a href="#å·¦æŠ˜å ä¸å³æŠ˜å çš„åŒºåˆ«" class="headerlink" title="å·¦æŠ˜å ä¸å³æŠ˜å çš„åŒºåˆ«"></a>å·¦æŠ˜å ä¸å³æŠ˜å çš„åŒºåˆ«</h4><ul><li><strong>äºŒå…ƒå·¦æŠ˜å ï¼ˆBinary Left Foldï¼‰</strong>ï¼šæ“ä½œç¬¦ä»å·¦è‡³å³ç»“åˆï¼Œç­‰ä»·äº <code>(((a op b) op c) op d)</code>ã€‚</li><li><strong>äºŒå…ƒå³æŠ˜å ï¼ˆBinary Right Foldï¼‰</strong>ï¼šæ“ä½œç¬¦ä»å³è‡³å·¦ç»“åˆï¼Œç­‰ä»·äº <code>(a op (b op (c op d)))</code>ã€‚</li></ul><h4 id="ç¤ºä¾‹1ï¼šæ±‚å’Œï¼ˆBinary-Left-Foldï¼‰"><a href="#ç¤ºä¾‹1ï¼šæ±‚å’Œï¼ˆBinary-Left-Foldï¼‰" class="headerlink" title="ç¤ºä¾‹1ï¼šæ±‚å’Œï¼ˆBinary Left Foldï¼‰"></a>ç¤ºä¾‹1ï¼šæ±‚å’Œï¼ˆBinary Left Foldï¼‰</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span>... Args&gt;</span><br><span class="line"><span class="function"><span class="keyword">auto</span> <span class="title">sum</span><span class="params">(Args... args)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (args + ...);  <span class="comment">// äºŒå…ƒå·¦æŠ˜å </span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    std::cout &lt;&lt; <span class="built_in">sum</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>) &lt;&lt; std::endl;  <span class="comment">// è¾“å‡ºï¼š10</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>è§£é‡Šï¼š</strong></p><ul><li><code>(args + ...)</code> æ˜¯ä¸€ä¸ªäºŒå…ƒå·¦æŠ˜å è¡¨è¾¾å¼ã€‚</li><li>å®ƒå°†<code>+</code>æ“ä½œç¬¦é€ä¸ªåº”ç”¨äºå‚æ•°ï¼ŒæŒ‰ç…§å·¦æŠ˜å é¡ºåºã€‚</li><li>å³ï¼Œ<code>((1 + 2) + 3) + 4 = 10</code>ã€‚</li></ul><h4 id="ç¤ºä¾‹2ï¼šä¹˜ç§¯ï¼ˆBinary-Right-Foldï¼‰"><a href="#ç¤ºä¾‹2ï¼šä¹˜ç§¯ï¼ˆBinary-Right-Foldï¼‰" class="headerlink" title="ç¤ºä¾‹2ï¼šä¹˜ç§¯ï¼ˆBinary Right Foldï¼‰"></a>ç¤ºä¾‹2ï¼šä¹˜ç§¯ï¼ˆBinary Right Foldï¼‰</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span>... Args&gt;</span><br><span class="line"><span class="function"><span class="keyword">auto</span> <span class="title">product</span><span class="params">(Args... args)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (... * args);  <span class="comment">// äºŒå…ƒå³æŠ˜å </span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    std::cout &lt;&lt; <span class="built_in">product</span>(<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>) &lt;&lt; std::endl;  <span class="comment">// è¾“å‡ºï¼š24</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>è§£é‡Šï¼š</strong></p><ul><li><code>(... * args)</code> æ˜¯ä¸€ä¸ªäºŒå…ƒå³æŠ˜å è¡¨è¾¾å¼ã€‚</li><li>å®ƒå°†<code>*</code>æ“ä½œç¬¦é€ä¸ªåº”ç”¨äºå‚æ•°ï¼ŒæŒ‰ç…§å³æŠ˜å é¡ºåºã€‚</li><li>å³ï¼Œ<code>2 * (3 * 4) = 2 * 12 = 24</code>ã€‚</li></ul><h4 id="ç¤ºä¾‹3ï¼šé€»è¾‘ä¸ï¼ˆBinary-Left-Foldï¼‰"><a href="#ç¤ºä¾‹3ï¼šé€»è¾‘ä¸ï¼ˆBinary-Left-Foldï¼‰" class="headerlink" title="ç¤ºä¾‹3ï¼šé€»è¾‘ä¸ï¼ˆBinary Left Foldï¼‰"></a>ç¤ºä¾‹3ï¼šé€»è¾‘ä¸ï¼ˆBinary Left Foldï¼‰</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span>... Args&gt;</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">allTrue</span><span class="params">(Args... args)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (args &amp;&amp; ...);  <span class="comment">// äºŒå…ƒå·¦æŠ˜å </span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    std::cout &lt;&lt; std::boolalpha;</span><br><span class="line">    std::cout &lt;&lt; <span class="built_in">allTrue</span>(<span class="literal">true</span>, <span class="literal">true</span>, <span class="literal">true</span>) &lt;&lt; std::endl;   <span class="comment">// true</span></span><br><span class="line">    std::cout &lt;&lt; <span class="built_in">allTrue</span>(<span class="literal">true</span>, <span class="literal">false</span>, <span class="literal">true</span>) &lt;&lt; std::endl;  <span class="comment">// false</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>è§£é‡Šï¼š</strong></p><ul><li><code>(args &amp;&amp; ...)</code> æ˜¯ä¸€ä¸ªäºŒå…ƒå·¦æŠ˜å è¡¨è¾¾å¼ã€‚</li><li>ç”¨äºæ£€æŸ¥æ‰€æœ‰å‚æ•°æ˜¯å¦ä¸ºtrueã€‚</li><li>ç±»ä¼¼äºé“¾å¼çš„é€»è¾‘ä¸è¿ç®—ã€‚</li></ul><h3 id="4-å·¦æŠ˜å ä¸å³æŠ˜å ï¼ˆLeft-and-Right-Foldsï¼‰"><a href="#4-å·¦æŠ˜å ä¸å³æŠ˜å ï¼ˆLeft-and-Right-Foldsï¼‰" class="headerlink" title="4. å·¦æŠ˜å ä¸å³æŠ˜å ï¼ˆLeft and Right Foldsï¼‰"></a>4. å·¦æŠ˜å ä¸å³æŠ˜å ï¼ˆLeft and Right Foldsï¼‰</h3><p>äº†è§£å·¦æŠ˜å å’Œå³æŠ˜å çš„åŒºåˆ«ï¼Œå¯¹äºæ­£ç¡®é€‰æ‹©æŠ˜å è¡¨è¾¾å¼çš„å½¢å¼è‡³å…³é‡è¦ã€‚</p><h4 id="äºŒå…ƒå·¦æŠ˜å ï¼ˆBinary-Left-Foldï¼‰"><a href="#äºŒå…ƒå·¦æŠ˜å ï¼ˆBinary-Left-Foldï¼‰" class="headerlink" title="äºŒå…ƒå·¦æŠ˜å ï¼ˆBinary Left Foldï¼‰"></a>äºŒå…ƒå·¦æŠ˜å ï¼ˆBinary Left Foldï¼‰</h4><p><strong>è¯­æ³•ï¼š</strong></p><ul><li><code>(args op ...)</code></li></ul><p><strong>å±•å¼€æ–¹å¼ï¼š</strong></p><ul><li><code>((arg1 op arg2) op arg3) op ... op argN</code></li></ul><p><strong>é€‚ç”¨åœºæ™¯ï¼š</strong></p><ul><li>å½“æ“ä½œç¬¦æ˜¯ç»“åˆæ€§çš„ä¸”ä»å·¦ä¾§å¼€å§‹ç´¯ç§¯æ“ä½œæ—¶ï¼ˆå¦‚<code>+</code>ã€<code>*</code>ï¼‰ã€‚</li><li>éœ€è¦ä¸¥æ ¼çš„é¡ºåºæ‰§è¡Œæ—¶ï¼Œç¡®ä¿ä»å·¦åˆ°å³ä¾æ¬¡å¤„ç†å‚æ•°ã€‚</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><ul><li><code>(args + ...)</code> &#x2F;&#x2F; å·¦æŠ˜å æ±‚å’Œ</li></ul><h4 id="äºŒå…ƒå³æŠ˜å ï¼ˆBinary-Right-Foldï¼‰"><a href="#äºŒå…ƒå³æŠ˜å ï¼ˆBinary-Right-Foldï¼‰" class="headerlink" title="äºŒå…ƒå³æŠ˜å ï¼ˆBinary Right Foldï¼‰"></a>äºŒå…ƒå³æŠ˜å ï¼ˆBinary Right Foldï¼‰</h4><p><strong>è¯­æ³•ï¼š</strong></p><ul><li><code>(... op args)</code></li></ul><p><strong>å±•å¼€æ–¹å¼ï¼š</strong></p><ul><li><code>arg1 op (arg2 op (arg3 op ... op argN))</code></li></ul><p><strong>é€‚ç”¨åœºæ™¯ï¼š</strong></p><ul><li>å½“æ“ä½œç¬¦æ˜¯å³ç»“åˆçš„ï¼Œæˆ–å½“éœ€è¦ä»å³ä¾§å¼€å§‹ç´¯ç§¯æ“ä½œæ—¶ã€‚</li><li>æŸäº›ç‰¹å®šçš„é€»è¾‘å’Œæ•°æ®ç»“æ„å¯èƒ½éœ€è¦å³ä¾§å…ˆå¤„ç†ã€‚</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><ul><li><code>(... + args)</code> &#x2F;&#x2F; å³æŠ˜å æ±‚å’Œ</li></ul><h3 id="5-op-åœ¨æŠ˜å è¡¨è¾¾å¼ä¸­çš„ä½œç”¨"><a href="#5-op-åœ¨æŠ˜å è¡¨è¾¾å¼ä¸­çš„ä½œç”¨" class="headerlink" title="5. op åœ¨æŠ˜å è¡¨è¾¾å¼ä¸­çš„ä½œç”¨"></a>5. op åœ¨æŠ˜å è¡¨è¾¾å¼ä¸­çš„ä½œç”¨</h3><p>åœ¨æŠ˜å è¡¨è¾¾å¼ä¸­ï¼Œ<code>op</code> ä»£è¡¨äºŒå…ƒæ“ä½œç¬¦ï¼Œç”¨äºå®šä¹‰å¦‚ä½•å°†å‚æ•°åŒ…ä¸­çš„å„ä¸ªå‚æ•°ç›¸äº’ç»“åˆã€‚<code>op</code> å¯ä»¥æ˜¯ä»»ä½•åˆæ³•çš„äºŒå…ƒæ“ä½œç¬¦ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºï¼š</p><ul><li><strong>ç®—æœ¯æ“ä½œç¬¦</strong>ï¼š<code>+</code>ã€<code>-</code>ã€<code>*</code>ã€<code>/</code>ã€<code>%</code> ç­‰ã€‚</li><li><strong>é€»è¾‘æ“ä½œç¬¦</strong>ï¼š<code>&amp;&amp;</code>ã€<code>||</code> ç­‰ã€‚</li><li><strong>æŒ‰ä½æ“ä½œç¬¦</strong>ï¼š<code>&amp;</code>ã€<code>|</code>ã€<code>^</code>ã€<code>&lt;&lt;</code>ã€<code>&gt;&gt;</code> ç­‰ã€‚</li><li><strong>æ¯”è¾ƒæ“ä½œç¬¦</strong>ï¼š<code>==</code>ã€<code>!=</code>ã€<code>&lt;</code>ã€<code>&gt;</code>ã€<code>&lt;=</code>ã€<code>&gt;=</code> ç­‰ã€‚</li><li><strong>è‡ªå®šä¹‰æ“ä½œç¬¦</strong>ï¼šå¦‚æœå®šä¹‰äº†è‡ªå®šä¹‰ç±»å‹å¹¶é‡è½½äº†ç‰¹å®šçš„æ“ä½œç¬¦ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨è¿™äº›æ“ä½œç¬¦ã€‚</li></ul><p><code>op</code> çš„é€‰æ‹©ç›´æ¥å½±å“æŠ˜å è¡¨è¾¾å¼çš„è¡Œä¸ºå’Œç»“æœã€‚é€‰æ‹©é€‚å½“çš„æ“ä½œç¬¦æ˜¯å®ç°ç‰¹å®šåŠŸèƒ½çš„å…³é”®ã€‚</p><h4 id="ç¤ºä¾‹1ï¼šä½¿ç”¨åŠ æ³•æ“ä½œç¬¦"><a href="#ç¤ºä¾‹1ï¼šä½¿ç”¨åŠ æ³•æ“ä½œç¬¦" class="headerlink" title="ç¤ºä¾‹1ï¼šä½¿ç”¨åŠ æ³•æ“ä½œç¬¦"></a>ç¤ºä¾‹1ï¼šä½¿ç”¨åŠ æ³•æ“ä½œç¬¦</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span>... Args&gt;</span><br><span class="line"><span class="function"><span class="keyword">auto</span> <span class="title">sum</span><span class="params">(Args... args)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (args + ...);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ç¤ºä¾‹2ï¼šä½¿ç”¨é€»è¾‘ä¸æ“ä½œç¬¦"><a href="#ç¤ºä¾‹2ï¼šä½¿ç”¨é€»è¾‘ä¸æ“ä½œç¬¦" class="headerlink" title="ç¤ºä¾‹2ï¼šä½¿ç”¨é€»è¾‘ä¸æ“ä½œç¬¦"></a>ç¤ºä¾‹2ï¼šä½¿ç”¨é€»è¾‘ä¸æ“ä½œç¬¦</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span>... Args&gt;</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">all</span><span class="params">(Args... args)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (args &amp;&amp; ...);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ç¤ºä¾‹3ï¼šä½¿ç”¨å·¦ç§»æ“ä½œç¬¦ï¼ˆæµæ’å…¥ï¼‰"><a href="#ç¤ºä¾‹3ï¼šä½¿ç”¨å·¦ç§»æ“ä½œç¬¦ï¼ˆæµæ’å…¥ï¼‰" class="headerlink" title="ç¤ºä¾‹3ï¼šä½¿ç”¨å·¦ç§»æ“ä½œç¬¦ï¼ˆæµæ’å…¥ï¼‰"></a>ç¤ºä¾‹3ï¼šä½¿ç”¨å·¦ç§»æ“ä½œç¬¦ï¼ˆæµæ’å…¥ï¼‰</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span>... Args&gt;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">print</span><span class="params">(Args... args)</span> </span>&#123;</span><br><span class="line">    (std::cout &lt;&lt; ... &lt;&lt; args) &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>è§£é‡Šï¼š</strong></p><ul><li>åœ¨ä¸Šè¿°ç¤ºä¾‹ä¸­ï¼Œ<code>op</code> åˆ†åˆ«ä¸º <code>+</code>ã€<code>&amp;&amp;</code>ã€<code>&lt;&lt;</code>ã€‚</li><li>æ¯ä¸ªæ“ä½œç¬¦å®šä¹‰äº†å¦‚ä½•å°†å‚æ•°åŒ…ä¸­çš„å…ƒç´ ç›¸äº’ç»“åˆã€‚</li></ul><h4 id="ç¤ºä¾‹4ï¼šä½¿ç”¨è‡ªå®šä¹‰æ“ä½œç¬¦"><a href="#ç¤ºä¾‹4ï¼šä½¿ç”¨è‡ªå®šä¹‰æ“ä½œç¬¦" class="headerlink" title="ç¤ºä¾‹4ï¼šä½¿ç”¨è‡ªå®šä¹‰æ“ä½œç¬¦"></a>ç¤ºä¾‹4ï¼šä½¿ç”¨è‡ªå®šä¹‰æ“ä½œç¬¦</h4><p>å‡è®¾æœ‰ä¸€ä¸ªè‡ªå®šä¹‰ç±»å‹<code>Point</code>ï¼Œå¹¶é‡è½½äº†<code>+</code>æ“ä½œç¬¦ä»¥æ”¯æŒç‚¹çš„ç›¸åŠ ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Point</span> &#123;</span><br><span class="line">    <span class="type">int</span> x, y;</span><br><span class="line">    <span class="built_in">Point</span>(<span class="type">int</span> x, <span class="type">int</span> y) : <span class="built_in">x</span>(x), <span class="built_in">y</span>(y) &#123;&#125;</span><br><span class="line">    </span><br><span class="line">    Point <span class="keyword">operator</span>+(<span class="type">const</span> Point&amp; other) <span class="type">const</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">Point</span>(x + other.x, y + other.y);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">std::ostream&amp; <span class="keyword">operator</span>&lt;&lt;(std::ostream&amp; os, <span class="type">const</span> Point&amp; p) &#123;</span><br><span class="line">    <span class="keyword">return</span> os &lt;&lt; <span class="string">&quot;(&quot;</span> &lt;&lt; p.x &lt;&lt; <span class="string">&quot;, &quot;</span> &lt;&lt; p.y &lt;&lt; <span class="string">&quot;)&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span>... Args&gt;</span><br><span class="line"><span class="function"><span class="keyword">auto</span> <span class="title">sumPoints</span><span class="params">(Args... args)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (args + ...);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="function">Point <span class="title">p1</span><span class="params">(<span class="number">1</span>, <span class="number">2</span>)</span>, <span class="title">p2</span><span class="params">(<span class="number">3</span>, <span class="number">4</span>)</span>, <span class="title">p3</span><span class="params">(<span class="number">5</span>, <span class="number">6</span>)</span></span>;</span><br><span class="line">    Point result = <span class="built_in">sumPoints</span>(p1, p2, p3);</span><br><span class="line">    std::cout &lt;&lt; result &lt;&lt; std::endl;  <span class="comment">// è¾“å‡ºï¼š(9, 12)</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>è§£é‡Šï¼š</strong></p><ul><li>é€šè¿‡é‡è½½<code>+</code>æ“ä½œç¬¦ï¼Œ<code>sumPoints</code>å‡½æ•°èƒ½å¤Ÿå°†å¤šä¸ª<code>Point</code>å¯¹è±¡ç›¸åŠ ï¼Œå¾—åˆ°ç´¯ç§¯çš„ç»“æœã€‚</li></ul><h3 id="6-ç¤ºä¾‹ä»£ç ä¸åº”ç”¨"><a href="#6-ç¤ºä¾‹ä»£ç ä¸åº”ç”¨" class="headerlink" title="6. ç¤ºä¾‹ä»£ç ä¸åº”ç”¨"></a>6. ç¤ºä¾‹ä»£ç ä¸åº”ç”¨</h3><p>ä¸ºäº†å…¨é¢ç†è§£æŠ˜å è¡¨è¾¾å¼çš„åº”ç”¨ï¼Œä»¥ä¸‹æä¾›å¤šä¸ªå…·ä½“ç¤ºä¾‹ï¼Œæ¶µç›–ä¸åŒç±»å‹çš„æŠ˜å è¡¨è¾¾å¼ã€‚</p><h4 id="ç¤ºä¾‹1ï¼šå­—ç¬¦ä¸²æ‹¼æ¥"><a href="#ç¤ºä¾‹1ï¼šå­—ç¬¦ä¸²æ‹¼æ¥" class="headerlink" title="ç¤ºä¾‹1ï¼šå­—ç¬¦ä¸²æ‹¼æ¥"></a>ç¤ºä¾‹1ï¼šå­—ç¬¦ä¸²æ‹¼æ¥</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span>... Args&gt;</span><br><span class="line"><span class="function">std::string <span class="title">concatenate</span><span class="params">(Args... args)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (std::string&#123;&#125; + ... + args);  <span class="comment">// äºŒå…ƒå·¦æŠ˜å </span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    std::string result = <span class="built_in">concatenate</span>(<span class="string">&quot;Hello&quot;</span>, <span class="string">&quot; &quot;</span>, <span class="string">&quot;World&quot;</span>, <span class="string">&quot;!&quot;</span>);</span><br><span class="line">    std::cout &lt;&lt; result &lt;&lt; std::endl;  <span class="comment">// è¾“å‡ºï¼šHello World!</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ç¤ºä¾‹2ï¼šè®¡ç®—é€»è¾‘ä¸"><a href="#ç¤ºä¾‹2ï¼šè®¡ç®—é€»è¾‘ä¸" class="headerlink" title="ç¤ºä¾‹2ï¼šè®¡ç®—é€»è¾‘ä¸"></a>ç¤ºä¾‹2ï¼šè®¡ç®—é€»è¾‘ä¸</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span>... Args&gt;</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">all</span><span class="params">(Args... args)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (args &amp;&amp; ...);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    std::cout &lt;&lt; std::boolalpha;</span><br><span class="line">    std::cout &lt;&lt; <span class="built_in">all</span>(<span class="literal">true</span>, <span class="literal">true</span>, <span class="literal">true</span>) &lt;&lt; std::endl;    <span class="comment">// true</span></span><br><span class="line">    std::cout &lt;&lt; <span class="built_in">all</span>(<span class="literal">true</span>, <span class="literal">false</span>, <span class="literal">true</span>) &lt;&lt; std::endl;   <span class="comment">// false</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ç¤ºä¾‹3ï¼šè®¡ç®—æœ€å¤§å€¼"><a href="#ç¤ºä¾‹3ï¼šè®¡ç®—æœ€å¤§å€¼" class="headerlink" title="ç¤ºä¾‹3ï¼šè®¡ç®—æœ€å¤§å€¼"></a>ç¤ºä¾‹3ï¼šè®¡ç®—æœ€å¤§å€¼</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T, <span class="keyword">typename</span>... Args&gt;</span><br><span class="line"><span class="function">T <span class="title">maxValue</span><span class="params">(T first, Args... args)</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">if</span> <span class="title">constexpr</span> <span class="params">(<span class="keyword">sizeof</span>...(args) == <span class="number">0</span>)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> first;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        T restMax = <span class="built_in">maxValue</span>(args...);</span><br><span class="line">        <span class="keyword">return</span> (first &gt; restMax) ? first : restMax;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    std::cout &lt;&lt; <span class="built_in">maxValue</span>(<span class="number">1</span>, <span class="number">5</span>, <span class="number">3</span>, <span class="number">9</span>, <span class="number">2</span>) &lt;&lt; std::endl;  <span class="comment">// è¾“å‡ºï¼š9</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„ï¼š</strong> ä¸Šè¿°ç¤ºä¾‹ä¸­çš„<code>(std::max)(first, ... , args)</code>æ˜¯ä¸€ä¸ªéæ ‡å‡†ç”¨æ³•ï¼Œéœ€è¦æ ¹æ®å…·ä½“æƒ…å†µè°ƒæ•´ã€‚é€šå¸¸ï¼Œ<code>std::max</code>ä¸æ”¯æŒç›´æ¥çš„æŠ˜å è¡¨è¾¾å¼ï¼Œå› æ­¤æ­¤ä¾‹æ›´é€‚åˆä½œä¸ºæ¦‚å¿µæ€§è¯´æ˜ã€‚åœ¨å®é™…åº”ç”¨ä¸­ï¼Œå¯ä»¥ä½¿ç”¨<code>std::initializer_list</code>æˆ–å…¶ä»–æ–¹æ³•å®ç°å¤šå‚æ•°çš„æœ€å¤§å€¼è®¡ç®—ã€‚</p><h4 id="ç¤ºä¾‹4ï¼šç­›é€‰é€»è¾‘"><a href="#ç¤ºä¾‹4ï¼šç­›é€‰é€»è¾‘" class="headerlink" title="ç¤ºä¾‹4ï¼šç­›é€‰é€»è¾‘"></a>ç¤ºä¾‹4ï¼šç­›é€‰é€»è¾‘</h4><p>å‡è®¾éœ€è¦æ£€æŸ¥å¤šä¸ªæ¡ä»¶æ˜¯å¦æ»¡è¶³ï¼Œä¸”æ¯ä¸ªæ¡ä»¶ä¹‹é—´ä½¿ç”¨é€»è¾‘æˆ–æ“ä½œï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span>... Conditions&gt;</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">anyCondition</span><span class="params">(Conditions... conds)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (conds || ...);  <span class="comment">// äºŒå…ƒå·¦æŠ˜å </span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">bool</span> a = <span class="literal">false</span>, b = <span class="literal">true</span>, c = <span class="literal">false</span>;</span><br><span class="line">    std::cout &lt;&lt; std::boolalpha;</span><br><span class="line">    std::cout &lt;&lt; <span class="built_in">anyCondition</span>(a, b, c) &lt;&lt; std::endl;  <span class="comment">// true</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="7-æ³¨æ„äº‹é¡¹ä¸æœ€ä½³å®è·µ"><a href="#7-æ³¨æ„äº‹é¡¹ä¸æœ€ä½³å®è·µ" class="headerlink" title="7. æ³¨æ„äº‹é¡¹ä¸æœ€ä½³å®è·µ"></a>7. æ³¨æ„äº‹é¡¹ä¸æœ€ä½³å®è·µ</h3><ol><li><p><strong>æ“ä½œç¬¦çš„é€‰æ‹©</strong><br>é€‰æ‹©åˆé€‚çš„æ“ä½œç¬¦ï¼ˆ<code>op</code>ï¼‰å¯¹äºå®ç°æ­£ç¡®çš„æŠ˜å è¡Œä¸ºè‡³å…³é‡è¦ã€‚ç¡®ä¿æ‰€é€‰çš„æ“ä½œç¬¦ç¬¦åˆæ‰€éœ€çš„é€»è¾‘å’Œè®¡ç®—éœ€æ±‚ã€‚</p></li><li><p><strong>æ“ä½œç¬¦çš„ç»“åˆæ€§</strong><br>ä¸åŒçš„æ“ä½œç¬¦å…·æœ‰ä¸åŒçš„ç»“åˆæ€§ï¼ˆå·¦ç»“åˆã€å³ç»“åˆï¼‰ã€‚äº†è§£æ“ä½œç¬¦çš„ç»“åˆæ€§æœ‰åŠ©äºé€‰æ‹©æ­£ç¡®çš„æŠ˜å æ–¹å‘ï¼ˆå·¦æŠ˜å æˆ–å³æŠ˜å ï¼‰ã€‚</p></li><li><p><strong>å‚æ•°åŒ…çš„åˆå§‹åŒ–</strong><br>åœ¨äºŒå…ƒæŠ˜å è¡¨è¾¾å¼ä¸­ï¼Œæœ‰æ—¶éœ€è¦ä¸€ä¸ªåˆå§‹å€¼ï¼ˆ<code>init</code>ï¼‰ã€‚è¿™ä¸»è¦ç”¨äºç¡®ä¿æŠ˜å çš„æ­£ç¡®æ€§ï¼Œå°¤å…¶åœ¨å‚æ•°åŒ…å¯èƒ½ä¸ºç©ºçš„æƒ…å†µä¸‹ã€‚</p></li></ol><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span>... Args&gt;</span><br><span class="line"><span class="function"><span class="keyword">auto</span> <span class="title">sumWithInit</span><span class="params">(<span class="type">int</span> init, Args... args)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (init + ... + args);  <span class="comment">// å¸¦åˆå§‹å€¼çš„å·¦æŠ˜å </span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="4"><li><strong>å‚æ•°åŒ…ä¸ºç©ºçš„æƒ…å†µ</strong><br>å¦‚æœå‚æ•°åŒ…ä¸ºç©ºï¼ŒæŠ˜å è¡¨è¾¾å¼çš„ç»“æœå–å†³äºæŠ˜å çš„ç±»å‹å’Œåˆå§‹å€¼ã€‚åˆç†è®¾ç½®åˆå§‹å€¼å¯ä»¥é¿å…æ½œåœ¨çš„é”™è¯¯ã€‚</li></ol><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span>... Args&gt;</span><br><span class="line"><span class="function"><span class="keyword">auto</span> <span class="title">safeSum</span><span class="params">(Args... args)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (<span class="number">0</span> + ... + args);  <span class="comment">// ç©ºåŒ…æ—¶è¿”å›0</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="5"><li><p><strong>ä¸é€’å½’æ¨¡æ¿çš„æ¯”è¾ƒ</strong><br>æŠ˜å è¡¨è¾¾å¼åœ¨å¤„ç†å¯å˜å‚æ•°æ¨¡æ¿æ—¶ï¼Œæ¯”ä¼ ç»Ÿçš„é€’å½’æ¨¡æ¿æ–¹æ³•æ›´ç®€æ´ã€æ˜“è¯»ä¸”æ˜“äºç»´æŠ¤ã€‚ç„¶è€Œï¼Œç†è§£æŠ˜å è¡¨è¾¾å¼çš„åŸºæœ¬åŸç†å’Œè¯­æ³•å¯¹äºå……åˆ†åˆ©ç”¨å…¶ä¼˜åŠ¿è‡³å…³é‡è¦ã€‚</p></li><li><p><strong>ç¼–è¯‘å™¨æ”¯æŒ</strong><br>ç¡®ä¿æ‰€ä½¿ç”¨çš„ç¼–è¯‘å™¨æ”¯æŒC++17æˆ–æ›´é«˜æ ‡å‡†ï¼Œå› ä¸ºæŠ˜å è¡¨è¾¾å¼æ˜¯åœ¨C++17ä¸­å¼•å…¥çš„ã€‚å¸¸è§çš„æ”¯æŒC++17çš„ç¼–è¯‘å™¨åŒ…æ‹¬ï¼š</p><ul><li><strong>GCC</strong>ï¼šä»ç‰ˆæœ¬7å¼€å§‹æ”¯æŒC++17ï¼Œå…¶ä¸­å®Œæ•´æ”¯æŒåœ¨åç»­ç‰ˆæœ¬ä¸­å¾—åˆ°å¢å¼ºã€‚</li><li><strong>Clang</strong>ï¼šä»ç‰ˆæœ¬5å¼€å§‹æ”¯æŒC++17ã€‚</li><li><strong>MSVCï¼ˆVisual Studioï¼‰</strong>ï¼šä»Visual Studio 2017ç‰ˆæœ¬15.7å¼€å§‹æä¾›è¾ƒå…¨é¢çš„C++17æ”¯æŒã€‚</li></ul></li><li><p><strong>æ€§èƒ½è€ƒè™‘</strong><br>æŠ˜å è¡¨è¾¾å¼æœ¬èº«å¹¶ä¸å¼•å…¥é¢å¤–çš„æ€§èƒ½å¼€é”€ã€‚å®ƒä»¬æ˜¯åœ¨ç¼–è¯‘æ—¶å±•å¼€çš„ï¼Œç”Ÿæˆçš„ä»£ç ä¸æ‰‹åŠ¨å±•å¼€å‚æ•°åŒ…æ—¶çš„ä»£ç å‡ ä¹ç›¸åŒã€‚ç„¶è€Œï¼Œç¼–å†™é«˜æ•ˆçš„æŠ˜å è¡¨è¾¾å¼ä»ç„¶éœ€è¦ç†è§£æ‰€åº”ç”¨æ“ä½œç¬¦çš„æ€§èƒ½ç‰¹æ€§ã€‚</p></li></ol><h2 id="SFINAEï¼ˆSubstitution-Failure-Is-Not-An-Errorï¼‰"><a href="#SFINAEï¼ˆSubstitution-Failure-Is-Not-An-Errorï¼‰" class="headerlink" title="SFINAEï¼ˆSubstitution Failure Is Not An Errorï¼‰"></a>SFINAEï¼ˆSubstitution Failure Is Not An Errorï¼‰</h2><h3 id="ä¸€ã€ä»€ä¹ˆæ˜¯SFINAEï¼Ÿ"><a href="#ä¸€ã€ä»€ä¹ˆæ˜¯SFINAEï¼Ÿ" class="headerlink" title="ä¸€ã€ä»€ä¹ˆæ˜¯SFINAEï¼Ÿ"></a>ä¸€ã€ä»€ä¹ˆæ˜¯SFINAEï¼Ÿ</h3><p>SFINAE æ˜¯ â€œSubstitution Failure Is Not An Errorâ€ï¼ˆæ›¿æ¢å¤±è´¥ä¸æ˜¯é”™è¯¯ï¼‰çš„ç¼©å†™ï¼Œæ˜¯C++æ¨¡æ¿ç¼–ç¨‹ä¸­çš„ä¸€ä¸ªé‡è¦æ¦‚å¿µã€‚å®ƒå…è®¸ç¼–è¯‘å™¨åœ¨æ¨¡æ¿å®ä¾‹åŒ–è¿‡ç¨‹ä¸­ï¼Œå¦‚æœåœ¨æ›¿æ¢æ¨¡æ¿å‚æ•°æ—¶å¤±è´¥ï¼ˆå³ä¸æ»¡è¶³æŸäº›æ¡ä»¶ï¼‰ï¼Œä¸ä¼šå°†å…¶è§†ä¸ºç¼–è¯‘é”™è¯¯ï¼Œè€Œæ˜¯ç»§ç»­å¯»æ‰¾å…¶ä»–å¯èƒ½çš„æ¨¡æ¿æˆ–é‡è½½ã€‚è¿™ä¸€æœºåˆ¶ä¸ºæ¡ä»¶ç¼–è¯‘ã€ç±»å‹ç‰¹æ€§æ£€æµ‹ã€å‡½æ•°é‡è½½ç­‰æä¾›äº†å¼ºå¤§çš„æ”¯æŒã€‚</p><h3 id="äºŒã€SFINAEçš„å·¥ä½œåŸç†"><a href="#äºŒã€SFINAEçš„å·¥ä½œåŸç†" class="headerlink" title="äºŒã€SFINAEçš„å·¥ä½œåŸç†"></a>äºŒã€SFINAEçš„å·¥ä½œåŸç†</h3><p>åœ¨æ¨¡æ¿å®ä¾‹åŒ–è¿‡ç¨‹ä¸­ï¼Œç¼–è¯‘å™¨ä¼šå°è¯•å°†æ¨¡æ¿å‚æ•°æ›¿æ¢ä¸ºå…·ä½“ç±»å‹ã€‚å¦‚æœåœ¨æ›¿æ¢è¿‡ç¨‹ä¸­å‡ºç°ä¸åˆæ³•çš„è¡¨è¾¾å¼æˆ–ç±»å‹ï¼Œç¼–è¯‘å™¨ä¸ä¼šæŠ¥é”™ï¼Œè€Œæ˜¯å°†è¯¥æ¨¡æ¿è§†ä¸ºä¸å¯è¡Œçš„ï¼Œç»§ç»­å°è¯•å…¶ä»–æ¨¡æ¿æˆ–é‡è½½ã€‚è¿™ä¸€ç‰¹æ€§å…è®¸å¼€å‘è€…æ ¹æ®ç±»å‹ç‰¹æ€§é€‰æ‹©ä¸åŒçš„æ¨¡æ¿å®ç°ã€‚</p><h3 id="ä¸‰ã€SFINAEçš„åº”ç”¨åœºæ™¯"><a href="#ä¸‰ã€SFINAEçš„åº”ç”¨åœºæ™¯" class="headerlink" title="ä¸‰ã€SFINAEçš„åº”ç”¨åœºæ™¯"></a>ä¸‰ã€SFINAEçš„åº”ç”¨åœºæ™¯</h3><ol><li><strong>å‡½æ•°é‡è½½é€‰æ‹©</strong>ï¼šæ ¹æ®å‚æ•°ç±»å‹çš„ä¸åŒé€‰æ‹©ä¸åŒçš„å‡½æ•°å®ç°ã€‚</li><li><strong>ç±»å‹ç‰¹æ€§æ£€æµ‹</strong>ï¼šæ£€æµ‹ç±»å‹æ˜¯å¦å…·æœ‰æŸäº›æˆå‘˜æˆ–ç‰¹æ€§ï¼Œä»è€Œå†³å®šæ˜¯å¦å¯ç”¨æŸäº›åŠŸèƒ½ã€‚</li><li><strong>æ¡ä»¶ç¼–è¯‘</strong>ï¼šæ ¹æ®æ¨¡æ¿å‚æ•°çš„ç‰¹æ€§å†³å®šæ˜¯å¦ç¼–è¯‘æŸäº›ä»£ç æ®µã€‚</li></ol><h3 id="å››ã€SFINAEçš„åŸºæœ¬ç”¨æ³•"><a href="#å››ã€SFINAEçš„åŸºæœ¬ç”¨æ³•" class="headerlink" title="å››ã€SFINAEçš„åŸºæœ¬ç”¨æ³•"></a>å››ã€SFINAEçš„åŸºæœ¬ç”¨æ³•</h3><p>SFINAEé€šå¸¸ä¸<code>std::enable_if</code>ã€æ¨¡æ¿ç‰¹åŒ–ã€ä»¥åŠç±»å‹èƒå–ç­‰æŠ€æœ¯ç»“åˆä½¿ç”¨ã€‚ä»¥ä¸‹é€šè¿‡å‡ ä¸ªä¾‹å­æ¥è¯´æ˜SFINAEçš„åº”ç”¨ã€‚</p><h4 id="ç¤ºä¾‹ä¸€ï¼šé€šè¿‡std-enable-ifå®ç°å‡½æ•°é‡è½½"><a href="#ç¤ºä¾‹ä¸€ï¼šé€šè¿‡std-enable-ifå®ç°å‡½æ•°é‡è½½" class="headerlink" title="ç¤ºä¾‹ä¸€ï¼šé€šè¿‡std::enable_ifå®ç°å‡½æ•°é‡è½½"></a>ç¤ºä¾‹ä¸€ï¼šé€šè¿‡<code>std::enable_if</code>å®ç°å‡½æ•°é‡è½½</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;type_traits&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">typename</span> std::enable_if&lt;std::is_integral&lt;T&gt;::value, T&gt;::<span class="function">type</span></span><br><span class="line"><span class="function"><span class="title">process</span><span class="params">(T value)</span> </span>&#123;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Processing integral: &quot;</span> &lt;&lt; value &lt;&lt; std::endl;</span><br><span class="line">    <span class="keyword">return</span> value;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">typename</span> std::enable_if&lt;std::is_floating_point&lt;T&gt;::value, T&gt;::<span class="function">type</span></span><br><span class="line"><span class="function"><span class="title">process</span><span class="params">(T value)</span> </span>&#123;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Processing floating point: &quot;</span> &lt;&lt; value &lt;&lt; std::endl;</span><br><span class="line">    <span class="keyword">return</span> value;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">process</span>(<span class="number">42</span>);      <span class="comment">// è°ƒç”¨æ•´æ•°ç‰ˆæœ¬</span></span><br><span class="line">    <span class="built_in">process</span>(<span class="number">3.14</span>);    <span class="comment">// è°ƒç”¨æµ®ç‚¹æ•°ç‰ˆæœ¬</span></span><br><span class="line">    <span class="comment">// process(&quot;hello&quot;); // ç¼–è¯‘é”™è¯¯ï¼šæ²¡æœ‰åŒ¹é…çš„å‡½æ•°</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>è§£é‡Šï¼š</strong></p><ul><li><code>std::enable_if</code> æ ¹æ®æ¡ä»¶ <code>std::is_integral&lt;T&gt;::value</code> æˆ– <code>std::is_floating_point&lt;T&gt;::value</code> å†³å®šæ˜¯å¦å¯ç”¨å¯¹åº”çš„å‡½æ•°æ¨¡æ¿ã€‚</li><li>å½“æ¡ä»¶ä¸æ»¡è¶³æ—¶ï¼Œè¯¥æ¨¡æ¿å®ä¾‹åŒ–å¤±è´¥ï¼Œä½†ç”±äºSFINAEè§„åˆ™ï¼Œç¼–è¯‘å™¨ä¸ä¼šæŠ¥é”™ï¼Œè€Œæ˜¯å¿½ç•¥è¯¥æ¨¡æ¿ï¼Œä»è€Œå®ç°å‡½æ•°é‡è½½é€‰æ‹©ã€‚</li></ul><h4 id="ç¤ºä¾‹äºŒï¼šæ£€æµ‹ç±»å‹æ˜¯å¦å…·æœ‰ç‰¹å®šæˆå‘˜"><a href="#ç¤ºä¾‹äºŒï¼šæ£€æµ‹ç±»å‹æ˜¯å¦å…·æœ‰ç‰¹å®šæˆå‘˜" class="headerlink" title="ç¤ºä¾‹äºŒï¼šæ£€æµ‹ç±»å‹æ˜¯å¦å…·æœ‰ç‰¹å®šæˆå‘˜"></a>ç¤ºä¾‹äºŒï¼šæ£€æµ‹ç±»å‹æ˜¯å¦å…·æœ‰ç‰¹å®šæˆå‘˜</h4><p>å‡è®¾æˆ‘ä»¬éœ€è¦å®ç°ä¸€ä¸ªå‡½æ•°ï¼Œä»…å½“ç±»å‹ T å…·æœ‰æˆå‘˜å‡½æ•° <code>foo</code> æ—¶æ‰å¯ç”¨è¯¥å‡½æ•°ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;type_traits&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ£€æµ‹ç±»å‹Tæ˜¯å¦æœ‰fooæˆå‘˜å‡½æ•°</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">has_foo</span> &#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="keyword">template</span> &lt;<span class="keyword">typename</span> U&gt;</span><br><span class="line">    <span class="function"><span class="type">static</span> <span class="keyword">auto</span> <span class="title">test</span><span class="params">(<span class="type">int</span>)</span> -&gt; <span class="title">decltype</span><span class="params">(std::declval&lt;U&gt;().foo(), std::true_type&#123;&#125;)</span></span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">template</span> &lt;<span class="keyword">typename</span> U&gt;</span><br><span class="line">    <span class="function"><span class="type">static</span> std::false_type <span class="title">test</span><span class="params">(...)</span></span>;</span><br><span class="line">    </span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="type">static</span> <span class="keyword">constexpr</span> <span class="type">bool</span> value = <span class="keyword">decltype</span>(<span class="built_in">test</span>&lt;T&gt;(<span class="number">0</span>))::value;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä»…å½“Tæœ‰fooæˆå‘˜æ—¶æ‰å¯ç”¨çš„å‡½æ•°</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">typename</span> std::enable_if&lt;has_foo&lt;T&gt;::value&gt;::<span class="function">type</span></span><br><span class="line"><span class="function"><span class="title">call_foo</span><span class="params">(T&amp; obj)</span> </span>&#123;</span><br><span class="line">    obj.<span class="built_in">foo</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æµ‹è¯•ç±»</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">WithFoo</span> &#123;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">foo</span><span class="params">()</span> </span>&#123; std::cout &lt;&lt; <span class="string">&quot;WithFoo::foo() called&quot;</span> &lt;&lt; std::endl; &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">WithoutFoo</span> &#123;</span><br><span class="line">    <span class="comment">// æ²¡æœ‰fooæˆå‘˜å‡½æ•°</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    WithFoo wf;</span><br><span class="line">    WithoutFoo wof;</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">call_foo</span>(wf);   <span class="comment">// æ­£å¸¸è°ƒç”¨</span></span><br><span class="line">    <span class="comment">// call_foo(wof); // ç¼–è¯‘é”™è¯¯ï¼šæ²¡æœ‰åŒ¹é…çš„å‡½æ•°</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>è§£é‡Šï¼š</strong></p><ul><li><code>has_foo</code> æ˜¯ä¸€ä¸ªç±»å‹èƒå–ç±»ï¼Œç”¨äºæ£€æµ‹ç±»å‹ T æ˜¯å¦å…·æœ‰æˆå‘˜å‡½æ•° <code>foo</code>ã€‚</li><li><code>call_foo</code> å‡½æ•°æ¨¡æ¿ä»…åœ¨ T å…·æœ‰ <code>foo</code> æˆå‘˜æ—¶å¯ç”¨ã€‚</li><li>å¯¹äºä¸å…·æœ‰ <code>foo</code> æˆå‘˜çš„ç±»å‹ï¼Œç¼–è¯‘å™¨ä¼šå¿½ç•¥ <code>call_foo</code>ï¼Œä»è€Œé¿å…ç¼–è¯‘é”™è¯¯ã€‚</li></ul><h4 id="ç¤ºä¾‹ä¸‰ï¼šé€šè¿‡æ¨¡æ¿ç‰¹åŒ–å®ç°ä¸åŒçš„è¡Œä¸º"><a href="#ç¤ºä¾‹ä¸‰ï¼šé€šè¿‡æ¨¡æ¿ç‰¹åŒ–å®ç°ä¸åŒçš„è¡Œä¸º" class="headerlink" title="ç¤ºä¾‹ä¸‰ï¼šé€šè¿‡æ¨¡æ¿ç‰¹åŒ–å®ç°ä¸åŒçš„è¡Œä¸º"></a>ç¤ºä¾‹ä¸‰ï¼šé€šè¿‡æ¨¡æ¿ç‰¹åŒ–å®ç°ä¸åŒçš„è¡Œä¸º</h4><p>ä»¥ä¸‹æ˜¯å®Œæ•´çš„ã€æ­£ç¡®å®ç° <code>TypePrinter</code> çš„ä»£ç ç¤ºä¾‹ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;type_traits&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ£€æµ‹ç±»å‹Tæ˜¯å¦æœ‰évoidçš„value_type</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T, <span class="keyword">typename</span> = <span class="type">void</span>&gt;</span><br><span class="line"><span class="keyword">struct</span> has_non_void_value_type : std::false_type &#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">has_non_void_value_type</span>&lt;T, </span><br><span class="line">    std::<span class="type">void_t</span>&lt;<span class="keyword">typename</span> T::value_type&gt;&gt; : </span><br><span class="line">    std::negation&lt;std::is_void&lt;<span class="keyword">typename</span> T::value_type&gt;&gt; &#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸»æ¨¡æ¿</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T, <span class="type">bool</span> HasValueType = has_non_void_value_type&lt;T&gt;::value&gt;</span><br><span class="line"><span class="keyword">struct</span> TypePrinter &#123;</span><br><span class="line">    <span class="type">static</span> <span class="type">void</span> <span class="built_in">print</span>() &#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;Type without value_type or value_type is void&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç‰¹åŒ–ç‰ˆæœ¬ï¼šå½“Tæœ‰évoidçš„value_typeæ—¶</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">TypePrinter</span>&lt;T, <span class="literal">true</span>&gt; &#123;</span><br><span class="line">    <span class="function"><span class="type">static</span> <span class="type">void</span> <span class="title">print</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;Type with value_type: &quot;</span> </span><br><span class="line">                  &lt;&lt; <span class="built_in">typeid</span>(<span class="keyword">typename</span> T::value_type).<span class="built_in">name</span>() &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æµ‹è¯•ç»“æ„ä½“</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">WithValueType</span> &#123;</span><br><span class="line">    <span class="keyword">using</span> value_type = <span class="type">int</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">WithoutValueType</span> &#123;</span><br><span class="line">    <span class="comment">// æ²¡æœ‰value_type</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">WithVoidValueType</span> &#123;</span><br><span class="line">    <span class="keyword">using</span> value_type = <span class="type">void</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    TypePrinter&lt;WithValueType&gt;::<span class="built_in">print</span>();      <span class="comment">// æœ‰value_type</span></span><br><span class="line">    TypePrinter&lt;WithoutValueType&gt;::<span class="built_in">print</span>();   <span class="comment">// æ²¡æœ‰value_type</span></span><br><span class="line">    TypePrinter&lt;WithVoidValueType&gt;::<span class="built_in">print</span>();  <span class="comment">// value_typeæ˜¯void</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>ä»£ç è§£é‡Š</strong></p><ol><li><p><strong>Trait <code>has_non_void_value_type</code></strong>:</p><ul><li>ä¸»æ¨¡æ¿ï¼šé»˜è®¤æƒ…å†µä¸‹ï¼Œ<code>has_non_void_value_type&lt;T&gt;</code> ç»§æ‰¿è‡ª <code>std::false_type</code>ï¼Œè¡¨ç¤º T æ²¡æœ‰ <code>value_type</code> æˆ– <code>value_type</code> æ˜¯ <code>void</code>ã€‚</li><li>ç‰¹åŒ–æ¨¡æ¿ï¼šä»…å½“ T æœ‰ <code>value_type</code> ä¸” <code>value_type</code> ä¸æ˜¯ <code>void</code> æ—¶ï¼Œ<code>has_non_void_value_type&lt;T&gt;</code> ç»§æ‰¿è‡ª <code>std::true_type</code>ã€‚</li></ul></li><li><p><strong><code>TypePrinter</code> æ¨¡æ¿</strong>:</p><ul><li>ä¸»æ¨¡æ¿ï¼šæ¥å—ä¸€ä¸ªç±»å‹ T å’Œä¸€ä¸ªå¸ƒå°”æ¨¡æ¿å‚æ•° <code>HasValueType</code>ï¼Œé»˜è®¤ä¸º <code>has_non_void_value_type&lt;T&gt;::value</code>ã€‚</li><li>ç‰¹åŒ–ç‰ˆæœ¬ <code>TypePrinter&lt;T, true&gt;</code>ï¼šå½“ <code>HasValueType</code> ä¸º true æ—¶ï¼Œè¡¨ç¤º T æœ‰é void çš„ <code>value_type</code>ï¼Œæä¾›ç›¸åº”çš„ <code>print</code> å®ç°ã€‚</li><li>ç‰¹åŒ–ç‰ˆæœ¬ <code>TypePrinter&lt;T, false&gt;</code>ï¼šå½“ <code>HasValueType</code> ä¸º false æ—¶ï¼Œè¡¨ç¤º T æ²¡æœ‰ <code>value_type</code> æˆ– <code>value_type</code> æ˜¯ <code>void</code>ï¼Œæä¾›é»˜è®¤çš„ <code>print</code> å®ç°ã€‚</li></ul></li><li><p><strong>æµ‹è¯•ç»“æ„ä½“</strong>ï¼š</p><ul><li><code>WithValueType</code>ï¼šæœ‰ä¸€ä¸ªé void çš„ <code>value_type</code>ã€‚</li><li><code>WithoutValueType</code>ï¼šæ²¡æœ‰ <code>value_type</code>ã€‚</li><li><code>WithVoidValueType</code>ï¼šæœ‰ä¸€ä¸ª <code>value_type</code>ï¼Œä½†å®ƒæ˜¯ <code>void</code>ã€‚</li></ul></li><li><p><strong>main å‡½æ•°</strong>ï¼š</p><ul><li>åˆ†åˆ«æµ‹è¯•äº†ä¸‰ç§æƒ…å†µï¼ŒéªŒè¯ <code>TypePrinter</code> çš„è¡Œä¸ºæ˜¯å¦ç¬¦åˆé¢„æœŸã€‚</li></ul></li></ol><h3 id="äº”ã€SFINAEçš„ä¼˜ç¼ºç‚¹"><a href="#äº”ã€SFINAEçš„ä¼˜ç¼ºç‚¹" class="headerlink" title="äº”ã€SFINAEçš„ä¼˜ç¼ºç‚¹"></a>äº”ã€SFINAEçš„ä¼˜ç¼ºç‚¹</h3><p><strong>ä¼˜ç‚¹ï¼š</strong></p><ol><li><strong>çµæ´»æ€§é«˜</strong>ï¼šèƒ½å¤Ÿæ ¹æ®ç±»å‹ç‰¹æ€§é€‰æ‹©ä¸åŒçš„å®ç°ï¼Œæå‡ä»£ç çš„æ³›åŒ–èƒ½åŠ›ã€‚</li><li><strong>ç±»å‹å®‰å…¨</strong>ï¼šé€šè¿‡ç¼–è¯‘æœŸæ£€æµ‹ï¼Œé¿å…äº†è¿è¡Œæ—¶é”™è¯¯ã€‚</li><li><strong>æ— éœ€é¢å¤–çš„è¿è¡Œæ—¶å¼€é”€</strong>ï¼šæ‰€æœ‰çš„ç±»å‹ç­›é€‰éƒ½åœ¨ç¼–è¯‘æœŸå®Œæˆã€‚</li></ol><p><strong>ç¼ºç‚¹ï¼š</strong></p><ol><li><strong>å¤æ‚æ€§é«˜</strong>ï¼šSFINAEç›¸å…³çš„ä»£ç å¾€å¾€è¾ƒä¸ºå¤æ‚ï¼Œé˜…è¯»å’Œç»´æŠ¤éš¾åº¦è¾ƒå¤§ã€‚</li><li><strong>ç¼–è¯‘å™¨é”™è¯¯ä¿¡æ¯éš¾ä»¥ç†è§£</strong>ï¼šSFINAEå¤±è´¥æ—¶ï¼Œç¼–è¯‘å™¨å¯èƒ½ç»™å‡ºæ™¦æ¶©çš„é”™è¯¯ä¿¡æ¯ï¼Œè°ƒè¯•å›°éš¾ã€‚</li><li><strong>æ¨¡æ¿å®ä¾‹åŒ–æ·±åº¦é™åˆ¶</strong>ï¼šè¿‡åº¦ä½¿ç”¨SFINAEå¯èƒ½å¯¼è‡´ç¼–è¯‘æ—¶é—´å¢åŠ å’Œæ¨¡æ¿å®ä¾‹åŒ–æ·±åº¦é™åˆ¶é—®é¢˜ã€‚</li></ol><h3 id="å…­ã€ç°ä»£C-ä¸­çš„æ›¿ä»£æ–¹æ¡ˆ"><a href="#å…­ã€ç°ä»£C-ä¸­çš„æ›¿ä»£æ–¹æ¡ˆ" class="headerlink" title="å…­ã€ç°ä»£C++ä¸­çš„æ›¿ä»£æ–¹æ¡ˆ"></a>å…­ã€ç°ä»£C++ä¸­çš„æ›¿ä»£æ–¹æ¡ˆ</h3><p>éšç€C++11åŠåç»­æ ‡å‡†çš„å‘å±•ï¼Œå¼•å…¥äº†è¯¸å¦‚<code>decltype</code>ã€<code>constexpr</code>ã€<code>if constexpr</code>ã€æ¦‚å¿µï¼ˆC++20ï¼‰ç­‰æ–°çš„ç‰¹æ€§ï¼Œéƒ¨åˆ†æƒ…å†µä¸‹å¯ä»¥æ›¿ä»£ä¼ ç»Ÿçš„SFINAEï¼Œæé«˜ä»£ç çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚ä¾‹å¦‚ï¼ŒC++20å¼•å…¥çš„æ¦‚å¿µï¼ˆConceptsï¼‰æä¾›äº†æ›´ä¸ºç®€æ´å’Œç›´è§‚çš„æ–¹å¼æ¥çº¦æŸæ¨¡æ¿å‚æ•°ï¼Œå‡å°‘äº†SFINAEçš„å¤æ‚æ€§ã€‚</p><h4 id="ç¤ºä¾‹ï¼šä½¿ç”¨æ¦‚å¿µæ›¿ä»£SFINAE"><a href="#ç¤ºä¾‹ï¼šä½¿ç”¨æ¦‚å¿µæ›¿ä»£SFINAE" class="headerlink" title="ç¤ºä¾‹ï¼šä½¿ç”¨æ¦‚å¿µæ›¿ä»£SFINAE"></a>ç¤ºä¾‹ï¼šä½¿ç”¨æ¦‚å¿µæ›¿ä»£SFINAE</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;concepts&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">concept</span> Integral = std::is_integral_v&lt;T&gt;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;Integral T&gt;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">process</span><span class="params">(T value)</span> </span>&#123;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Processing integral: &quot;</span> &lt;&lt; value &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="function"><span class="keyword">requires</span> std::floating_point&lt;T&gt;</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">process</span><span class="params">(T value)</span> </span>&#123;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Processing floating point: &quot;</span> &lt;&lt; value &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">process</span>(<span class="number">42</span>);      <span class="comment">// è°ƒç”¨æ•´æ•°ç‰ˆæœ¬</span></span><br><span class="line">    <span class="built_in">process</span>(<span class="number">3.14</span>);    <span class="comment">// è°ƒç”¨æµ®ç‚¹æ•°ç‰ˆæœ¬</span></span><br><span class="line">    <span class="comment">// process(&quot;hello&quot;); // ç¼–è¯‘é”™è¯¯ï¼šæ²¡æœ‰åŒ¹é…çš„å‡½æ•°</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>è§£é‡Šï¼š</strong></p><ul><li>ä½¿ç”¨æ¦‚å¿µ<code>Integral</code>ä»£æ›¿<code>std::enable_if</code>ï¼Œè¯­æ³•æ›´ç®€æ´ï¼Œä»£ç æ›´æ˜“è¯»ã€‚</li><li>å½“ç±»å‹ä¸æ»¡è¶³æ¦‚å¿µæ—¶ï¼Œç¼–è¯‘å™¨ä¼šç»™å‡ºæ˜ç¡®çš„é”™è¯¯ä¿¡æ¯ï¼Œä¾¿äºè°ƒè¯•ã€‚</li></ul><p>è™½ç„¶ä¸Šè¿°æ–¹æ³•ç»å…¸ä¸”æœ‰æ•ˆï¼Œä½†åœ¨C++11åŠä»¥åç‰ˆæœ¬ï¼Œå­˜åœ¨æ›´ç®€æ´å’Œæ˜“è¯»çš„æ–¹å¼æ¥å®ç°ç›¸åŒçš„åŠŸèƒ½ã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨<code>std::void_t</code>å’Œæ›´ç°ä»£çš„æ£€æµ‹æŠ€å·§ï¼Œæˆ–è€…ç›´æ¥ä½¿ç”¨C++20çš„æ¦‚å¿µï¼ˆConceptsï¼‰ï¼Œä½¿ä»£ç æ›´åŠ æ¸…æ™°ã€‚</p><h4 id="ç¤ºä¾‹ï¼šä½¿ç”¨std-void-tç®€åŒ–has-foo"><a href="#ç¤ºä¾‹ï¼šä½¿ç”¨std-void-tç®€åŒ–has-foo" class="headerlink" title="ç¤ºä¾‹ï¼šä½¿ç”¨std::void_tç®€åŒ–has_foo"></a>ç¤ºä¾‹ï¼šä½¿ç”¨<code>std::void_t</code>ç®€åŒ–<code>has_foo</code></h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;type_traits&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T, <span class="keyword">typename</span> = <span class="type">void</span>&gt;</span><br><span class="line"><span class="keyword">struct</span> has_foo : std::false_type &#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">has_foo</span>&lt;T, std::<span class="type">void_t</span>&lt;<span class="keyword">decltype</span>(std::<span class="built_in">declval</span>&lt;T&gt;().<span class="built_in">foo</span>())&gt;&gt; : std::true_type &#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line">std::<span class="type">enable_if_t</span>&lt;has_foo&lt;T&gt;::value&gt; <span class="built_in">call_foo</span>(T&amp; obj) &#123;</span><br><span class="line">    obj.<span class="built_in">foo</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">WithFoo</span> &#123;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">foo</span><span class="params">()</span> </span>&#123; std::cout &lt;&lt; <span class="string">&quot;WithFoo::foo() called&quot;</span> &lt;&lt; std::endl; &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    WithFoo wf;</span><br><span class="line">    <span class="built_in">call_foo</span>(wf);  <span class="comment">// æ­£å¸¸è°ƒç”¨</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>è§£é‡Šï¼š</strong></p><ul><li>åˆ©ç”¨<code>std::void_t</code>ï¼Œ<code>has_foo</code>ç»“æ„æ›´ä¸ºç®€æ´ã€‚</li><li><code>decltype(std::declval&lt;T&gt;().foo())</code>å°è¯•åœ¨ä¸å®ä¾‹åŒ–Tå¯¹è±¡çš„æƒ…å†µä¸‹æ£€æµ‹<code>foo()</code>æˆå‘˜å‡½æ•°ã€‚</li><li>å¦‚æœ<code>foo()</code>å­˜åœ¨ï¼Œ<code>has_foo&lt;T&gt;</code>ç»§æ‰¿è‡ª<code>std::true_type</code>ï¼Œå¦åˆ™ç»§æ‰¿è‡ª<code>std::false_type</code>ã€‚</li></ul><h4 id="ä½¿ç”¨C-20æ¦‚å¿µ"><a href="#ä½¿ç”¨C-20æ¦‚å¿µ" class="headerlink" title="ä½¿ç”¨C++20æ¦‚å¿µ"></a>ä½¿ç”¨C++20æ¦‚å¿µ</h4><p>å¦‚æœä½ ä½¿ç”¨çš„æ˜¯æ”¯æŒC++20çš„ç¼–è¯‘å™¨ï¼Œå¯ä»¥åˆ©ç”¨æ¦‚å¿µï¼ˆConceptsï¼‰è¿›ä¸€æ­¥ç®€åŒ–å’Œå¢å¼ºå¯è¯»æ€§ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;concepts&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">concept</span> HasFoo = <span class="built_in">requires</span>(T t) &#123;</span><br><span class="line">    t.<span class="built_in">foo</span>();</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;HasFoo T&gt;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">call_foo</span><span class="params">(T&amp; obj)</span> </span>&#123;</span><br><span class="line">    obj.<span class="built_in">foo</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">WithFoo</span> &#123;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">foo</span><span class="params">()</span> </span>&#123; std::cout &lt;&lt; <span class="string">&quot;WithFoo::foo() called&quot;</span> &lt;&lt; std::endl; &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    WithFoo wf;</span><br><span class="line">    <span class="built_in">call_foo</span>(wf);  <span class="comment">// æ­£å¸¸è°ƒç”¨</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>è§£é‡Šï¼š</strong></p><ul><li><code>HasFoo</code>æ¦‚å¿µï¼šä½¿ç”¨<code>requires</code>è¡¨è¾¾å¼æ£€æµ‹ç±»å‹Tæ˜¯å¦å…·æœ‰<code>void foo()</code>æˆå‘˜å‡½æ•°ã€‚</li><li><code>call_foo</code>å‡½æ•°æ¨¡æ¿ï¼šä»…å½“Tæ»¡è¶³<code>HasFoo</code>æ¦‚å¿µæ—¶ï¼Œæ¨¡æ¿è¢«å¯ç”¨ã€‚</li><li>è¿™ç§æ–¹å¼æ›´ç›´è§‚ï¼Œæ˜“äºç†è§£å’Œç»´æŠ¤ã€‚</li></ul><h3 id="ä¸ƒã€æ€»ç»“"><a href="#ä¸ƒã€æ€»ç»“" class="headerlink" title="ä¸ƒã€æ€»ç»“"></a>ä¸ƒã€æ€»ç»“</h3><p>SFINAEä½œä¸ºC++æ¨¡æ¿ç¼–ç¨‹ä¸­çš„ä¸€é¡¹å¼ºå¤§åŠŸèƒ½ï¼Œé€šè¿‡åœ¨æ¨¡æ¿å®ä¾‹åŒ–è¿‡ç¨‹ä¸­å…è®¸æ›¿æ¢å¤±è´¥è€Œä¸æŠ¥é”™ï¼Œå®ç°äº†åŸºäºç±»å‹ç‰¹æ€§çš„ç¼–ç¨‹ã€‚ç„¶è€Œï¼ŒSFINAEçš„è¯­æ³•å¤æ‚ä¸”éš¾ä»¥ç»´æŠ¤ï¼Œç°ä»£C++å¼•å…¥çš„æ–°ç‰¹æ€§å¦‚æ¦‚å¿µç­‰åœ¨æŸäº›æƒ…å†µä¸‹å·²ç»èƒ½å¤Ÿæ›´ç®€æ´åœ°å®ç°ç±»ä¼¼çš„åŠŸèƒ½ã€‚å°½ç®¡å¦‚æ­¤ï¼Œç†è§£SFINAEçš„å·¥ä½œæœºåˆ¶ä¾ç„¶å¯¹äºæŒæ¡é«˜çº§æ¨¡æ¿æŠ€æœ¯å’Œé˜…è¯»è€æ—§ä»£ç å…·æœ‰é‡è¦æ„ä¹‰ã€‚</p><h2 id="ç»¼åˆæ¡ˆä¾‹ï¼šç»“åˆæ¨¡æ¿ç‰¹åŒ–ä¸æŠ˜å è¡¨è¾¾å¼"><a href="#ç»¼åˆæ¡ˆä¾‹ï¼šç»“åˆæ¨¡æ¿ç‰¹åŒ–ä¸æŠ˜å è¡¨è¾¾å¼" class="headerlink" title="ç»¼åˆæ¡ˆä¾‹ï¼šç»“åˆæ¨¡æ¿ç‰¹åŒ–ä¸æŠ˜å è¡¨è¾¾å¼"></a>ç»¼åˆæ¡ˆä¾‹ï¼šç»“åˆæ¨¡æ¿ç‰¹åŒ–ä¸æŠ˜å è¡¨è¾¾å¼</h2><p>ä¸ºäº†è¿›ä¸€æ­¥å·©å›ºå¯¹æ¨¡æ¿ç‰¹åŒ–å’ŒæŠ˜å è¡¨è¾¾å¼çš„ç†è§£ï¼Œæœ¬èŠ‚å°†é€šè¿‡ä¸€ä¸ªç»¼åˆæ¡ˆä¾‹å±•ç¤ºå¦‚ä½•å°†ä¸¤è€…ç»“åˆä½¿ç”¨ã€‚</p><h3 id="æ¡ˆä¾‹æè¿°"><a href="#æ¡ˆä¾‹æè¿°" class="headerlink" title="æ¡ˆä¾‹æè¿°"></a>æ¡ˆä¾‹æè¿°</h3><p>å®ç°ä¸€ä¸ªé€šç”¨çš„æ—¥å¿—è®°å½•å™¨<code>Logger</code>ï¼Œèƒ½å¤Ÿå¤„ç†ä»»æ„æ•°é‡å’Œç±»å‹çš„å‚æ•°ï¼Œå¹¶æ ¹æ®ä¸åŒçš„ç±»å‹ç»„åˆè°ƒæ•´è¾“å‡ºæ ¼å¼ã€‚å…·ä½“éœ€æ±‚åŒ…æ‹¬ï¼š</p><ol><li>å¯¹äºæ™®é€šç±»å‹ï¼Œä½¿ç”¨é€šç”¨çš„æ‰“å°æ ¼å¼ã€‚</li><li>å¯¹äºæŒ‡é’ˆç±»å‹ï¼Œæ‰“å°æŒ‡é’ˆåœ°å€æˆ–æŒ‡å‘çš„å€¼ã€‚</li><li>å¯¹äº<code>std::string</code>ç±»å‹ï¼Œä½¿ç”¨ä¸“é—¨çš„æ ¼å¼ã€‚</li><li>æ”¯æŒå¯å˜æ•°é‡çš„å‚æ•°ï¼Œé€šè¿‡æŠ˜å è¡¨è¾¾å¼å®ç°å‚æ•°çš„é€ä¸€æ‰“å°ã€‚</li></ol><h3 id="å®ç°æ­¥éª¤"><a href="#å®ç°æ­¥éª¤" class="headerlink" title="å®ç°æ­¥éª¤"></a>å®ç°æ­¥éª¤</h3><ol><li>å®šä¹‰é€šç”¨ç±»æ¨¡æ¿<code>Logger</code>ï¼Œä½¿ç”¨æ¨¡æ¿ç‰¹åŒ–å’Œåç‰¹åŒ–å¤„ç†ä¸åŒç±»å‹ã€‚</li><li>å®ç°<code>log</code>å‡½æ•°ï¼Œä½¿ç”¨æ¨¡æ¿æŠ˜å è¡¨è¾¾å¼é€ä¸€æ‰“å°å‚æ•°ã€‚</li></ol><h3 id="ä»£ç å®ç°"><a href="#ä»£ç å®ç°" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;type_traits&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// é€šç”¨æ¨¡æ¿</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T, <span class="keyword">typename</span> Enable = <span class="type">void</span>&gt;</span><br><span class="line"><span class="keyword">class</span> Logger &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="type">static</span> <span class="type">void</span> <span class="built_in">log</span>(<span class="type">const</span> T&amp; value) &#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;General Logger: &quot;</span> &lt;&lt; value &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æŒ‡é’ˆç±»å‹çš„åç‰¹åŒ–</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Logger</span>&lt;T*, <span class="type">void</span>&gt; &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">static</span> <span class="type">void</span> <span class="title">log</span><span class="params">(T* value)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (value) &#123;</span><br><span class="line">            std::cout &lt;&lt; <span class="string">&quot;Pointer Logger: &quot;</span> &lt;&lt; *value &lt;&lt; <span class="string">&quot; (address: &quot;</span> &lt;&lt; value &lt;&lt; <span class="string">&quot;)&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            std::cout &lt;&lt; <span class="string">&quot;Pointer Logger: nullptr&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// std::stringç±»å‹çš„å…¨ç‰¹åŒ–</span></span><br><span class="line"><span class="keyword">template</span> &lt;&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Logger</span>&lt;std::string, <span class="type">void</span>&gt; &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">static</span> <span class="type">void</span> <span class="title">log</span><span class="params">(<span class="type">const</span> std::string&amp; value)</span> </span>&#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;String Logger: \&quot;&quot;</span> &lt;&lt; value &lt;&lt; <span class="string">&quot;\&quot;&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¾…åŠ©å‡½æ•°ï¼šè®°å½•å•ä¸ªå€¼</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">logOne</span><span class="params">(<span class="type">const</span> T&amp; value)</span> </span>&#123;</span><br><span class="line">    Logger&lt;T&gt;::<span class="built_in">log</span>(value);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨æŠ˜å è¡¨è¾¾å¼è®°å½•æ‰€æœ‰å‚æ•°</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span>... Args&gt;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">logAll</span><span class="params">(<span class="type">const</span> Args&amp;... args)</span> </span>&#123;</span><br><span class="line">    (<span class="built_in">logOne</span>(args), ...);  <span class="comment">// C++17 æŠ˜å è¡¨è¾¾å¼</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> x = <span class="number">42</span>;</span><br><span class="line">    <span class="type">double</span> y = <span class="number">3.14</span>;</span><br><span class="line">    std::string str = <span class="string">&quot;Hello World&quot;</span>;</span><br><span class="line">    <span class="type">int</span>* ptr = &amp;x;</span><br><span class="line">    <span class="type">int</span>* nullPtr = <span class="literal">nullptr</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">logAll</span>(x, y, str, ptr, nullPtr);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>è¾“å‡ºï¼š</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">General Logger: 42</span><br><span class="line">General Logger: 3.14</span><br><span class="line">String Logger: &quot;Hello World&quot;</span><br><span class="line">Pointer Logger: 42 (address: 0x7ffd...)</span><br><span class="line">Pointer Logger: nullptr</span><br></pre></td></tr></table></figure><h3 id="è§£æ-3"><a href="#è§£æ-3" class="headerlink" title="è§£æ"></a>è§£æ</h3><ol><li><p>**é€šç”¨æ¨¡æ¿<code>Logger&lt;T, Enable&gt;</code>**ï¼š</p><ul><li>ä½¿ç”¨ç¬¬äºŒä¸ªæ¨¡æ¿å‚æ•°<code>Enable</code>ä¸SFINAEï¼ˆSubstitution Failure Is Not An Errorï¼‰ç»“åˆï¼Œæ§åˆ¶æ¨¡æ¿ç‰¹åŒ–ã€‚</li><li>å¯¹äºéæŒ‡é’ˆç±»å‹å’Œé<code>std::string</code>ç±»å‹ï¼Œä½¿ç”¨é€šç”¨å®ç°ï¼Œæ‰“å°â€General Logger: valueâ€ã€‚</li></ul></li><li><p>**ç±»æ¨¡æ¿åç‰¹åŒ–<code>Logger&lt;T, Enable&gt;</code>**ï¼š</p><ul><li>ä½¿ç”¨<code>std::enable_if</code>å’Œ<code>std::is_pointer</code>ï¼Œå½“Tæ˜¯æŒ‡é’ˆç±»å‹æ—¶ï¼Œç‰¹åŒ–æ¨¡æ¿ã€‚</li><li>å®ç°æŒ‡é’ˆç±»å‹çš„ç‰¹æ®Šæ—¥å¿—å¤„ç†ï¼Œæ‰“å°æŒ‡é’ˆæŒ‡å‘çš„å€¼æˆ–<code>nullptr</code>ã€‚</li></ul></li><li><p>**ç±»æ¨¡æ¿å…¨ç‰¹åŒ–<code>Logger&lt;std::string&gt;</code>**ï¼š</p><ul><li>ä¸º<code>std::string</code>ç±»å‹æä¾›å…¨ç‰¹åŒ–ç‰ˆæœ¬ï¼Œä½¿ç”¨ä¸åŒçš„è¾“å‡ºæ ¼å¼ã€‚</li></ul></li><li><p><strong><code>logOne</code>å‡½æ•°æ¨¡æ¿</strong>ï¼š</p><ul><li>ç®€åŒ–è°ƒç”¨è¿‡ç¨‹ï¼Œè°ƒç”¨ç›¸åº”çš„<code>Logger&lt;T&gt;::log</code>æ–¹æ³•ã€‚</li></ul></li><li><p><strong><code>logAll</code>å‡½æ•°æ¨¡æ¿</strong>ï¼š</p><ul><li>ä½¿ç”¨æ¨¡æ¿æŠ˜å è¡¨è¾¾å¼<code>(logOne(args), ...)</code>ï¼Œå®ç°å¯¹æ‰€æœ‰å‚æ•°çš„é€ä¸€æ—¥å¿—è®°å½•ã€‚</li><li>é€šè¿‡å·¦æŠ˜å çš„é€—å·è¡¨è¾¾å¼ï¼Œç¡®ä¿æ¯ä¸ª<code>logOne</code>è°ƒç”¨ä¾æ¬¡æ‰§è¡Œã€‚</li></ul></li><li><p><strong>mainå‡½æ•°</strong>ï¼š</p><ul><li>æµ‹è¯•ä¸åŒç±»å‹çš„æ—¥å¿—è®°å½•ï¼ŒåŒ…æ‹¬æ™®é€šç±»å‹ã€æŒ‡é’ˆç±»å‹å’Œ<code>std::string</code>ç±»å‹ã€‚</li><li>è°ƒç”¨<code>logAll</code>å‡½æ•°ï¼Œå®ç°å¤šå‚æ•°çš„ç»¼åˆæ—¥å¿—è®°å½•ã€‚</li></ul></li></ol><h2 id="æ¨¡æ¿å…ƒç¼–ç¨‹ï¼ˆTemplate-Metaprogrammingï¼‰"><a href="#æ¨¡æ¿å…ƒç¼–ç¨‹ï¼ˆTemplate-Metaprogrammingï¼‰" class="headerlink" title="æ¨¡æ¿å…ƒç¼–ç¨‹ï¼ˆTemplate Metaprogrammingï¼‰"></a>æ¨¡æ¿å…ƒç¼–ç¨‹ï¼ˆTemplate Metaprogrammingï¼‰</h2><h3 id="ä»€ä¹ˆæ˜¯æ¨¡æ¿å…ƒç¼–ç¨‹"><a href="#ä»€ä¹ˆæ˜¯æ¨¡æ¿å…ƒç¼–ç¨‹" class="headerlink" title="ä»€ä¹ˆæ˜¯æ¨¡æ¿å…ƒç¼–ç¨‹"></a>ä»€ä¹ˆæ˜¯æ¨¡æ¿å…ƒç¼–ç¨‹</h3><p>æ¨¡æ¿å…ƒç¼–ç¨‹ï¼ˆTemplate Metaprogrammingï¼‰æ˜¯ä¸€ç§åœ¨ç¼–è¯‘æœŸé€šè¿‡æ¨¡æ¿æœºåˆ¶è¿›è¡Œä»£ç ç”Ÿæˆå’Œè®¡ç®—çš„ç¼–ç¨‹æŠ€æœ¯ã€‚å®ƒåˆ©ç”¨ç¼–è¯‘å™¨çš„æ¨¡æ¿å®ä¾‹åŒ–æœºåˆ¶ï¼Œåœ¨ç¼–è¯‘æœŸé—´æ‰§è¡Œä»£ç é€»è¾‘ï¼Œä»¥æé«˜ç¨‹åºçš„æ€§èƒ½å’Œçµæ´»æ€§ã€‚</p><h3 id="æ¨¡æ¿å…ƒç¼–ç¨‹çš„ä¼˜åŠ¿"><a href="#æ¨¡æ¿å…ƒç¼–ç¨‹çš„ä¼˜åŠ¿" class="headerlink" title="æ¨¡æ¿å…ƒç¼–ç¨‹çš„ä¼˜åŠ¿"></a>æ¨¡æ¿å…ƒç¼–ç¨‹çš„ä¼˜åŠ¿</h3><ul><li>æé«˜ä»£ç çš„å¯é‡ç”¨æ€§å’Œæ³›åŒ–èƒ½åŠ›ã€‚</li><li>åœ¨ç¼–è¯‘æœŸè¿›è¡Œå¤æ‚è®¡ç®—ï¼Œå‡å°‘è¿è¡Œæ—¶å¼€é”€ã€‚</li><li>å®ç°ç±»å‹å®‰å…¨çš„é«˜çº§æŠ½è±¡ã€‚</li></ul><h3 id="æ¨¡æ¿å…ƒç¼–ç¨‹åŸºç¡€"><a href="#æ¨¡æ¿å…ƒç¼–ç¨‹åŸºç¡€" class="headerlink" title="æ¨¡æ¿å…ƒç¼–ç¨‹åŸºç¡€"></a>æ¨¡æ¿å…ƒç¼–ç¨‹åŸºç¡€</h3><ul><li><strong>æ¨¡æ¿ç‰¹åŒ–ï¼ˆTemplate Specializationï¼‰</strong>ï¼š<ul><li>å…¨ç‰¹åŒ–ï¼ˆFull Specializationï¼‰ï¼šä¸ºç‰¹å®šç±»å‹æä¾›ç‰¹å®šå®ç°ã€‚</li><li>åç‰¹åŒ–ï¼ˆPartial Specializationï¼‰ï¼šä¸ºéƒ¨åˆ†æ¨¡æ¿å‚æ•°ç‰¹å®šçš„æƒ…å†µæä¾›å®ç°ã€‚</li></ul></li><li><strong>é€’å½’æ¨¡æ¿ï¼ˆRecursive Templatesï¼‰</strong>ï¼šåˆ©ç”¨æ¨¡æ¿çš„é€’å½’å®ä¾‹åŒ–æœºåˆ¶ï¼Œå®ç°ç¼–è¯‘æœŸè®¡ç®—ã€‚</li></ul><h3 id="ç¼–è¯‘æœŸè®¡ç®—"><a href="#ç¼–è¯‘æœŸè®¡ç®—" class="headerlink" title="ç¼–è¯‘æœŸè®¡ç®—"></a>ç¼–è¯‘æœŸè®¡ç®—</h3><p>æ¨¡æ¿å…ƒç¼–ç¨‹å…è®¸åœ¨ç¼–è¯‘æ—¶æ‰§è¡Œè®¡ç®—ï¼Œå¦‚è®¡ç®—é˜¶ä¹˜ã€æ–æ³¢é‚£å¥‘æ•°åˆ—ç­‰ã€‚</p><h4 id="ç¤ºä¾‹ï¼šç¼–è¯‘æœŸé˜¶ä¹˜"><a href="#ç¤ºä¾‹ï¼šç¼–è¯‘æœŸé˜¶ä¹˜" class="headerlink" title="ç¤ºä¾‹ï¼šç¼–è¯‘æœŸé˜¶ä¹˜"></a>ç¤ºä¾‹ï¼šç¼–è¯‘æœŸé˜¶ä¹˜</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// åŸºæœ¬æ¨¡æ¿</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="type">int</span> N&gt;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Factorial</span> &#123;</span><br><span class="line">    <span class="type">static</span> <span class="type">const</span> <span class="type">int</span> value = N * Factorial&lt;N - <span class="number">1</span>&gt;::value;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç‰¹åŒ–æ¨¡æ¿ï¼šé€’å½’ç»ˆæ­¢æ¡ä»¶</span></span><br><span class="line"><span class="keyword">template</span> &lt;&gt;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Factorial</span>&lt;<span class="number">0</span>&gt; &#123;</span><br><span class="line">    <span class="type">static</span> <span class="type">const</span> <span class="type">int</span> value = <span class="number">1</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Factorial of 5: &quot;</span> &lt;&lt; Factorial&lt;<span class="number">5</span>&gt;::value &lt;&lt; std::endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>è¾“å‡ºï¼š</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Factorial of 5: 120</span><br></pre></td></tr></table></figure><p><strong>è®²è§£ï¼š</strong></p><ol><li>åŸºæœ¬æ¨¡æ¿<code>Factorial</code>å®šä¹‰äº†ä¸€ä¸ªé™æ€å¸¸é‡<code>value</code>ï¼Œå…¶å€¼ä¸º<code>N * Factorial&lt;N - 1&gt;::value</code>ï¼Œå®ç°é€’å½’è®¡ç®—ã€‚</li><li>ç‰¹åŒ–æ¨¡æ¿<code>Factorial&lt;0&gt;</code>å®šä¹‰é€’å½’ç»ˆæ­¢æ¡ä»¶ï¼Œå½“N&#x3D;0æ—¶ï¼Œ<code>value</code>ä¸º1ã€‚</li><li>åœ¨mainå‡½æ•°ä¸­ï¼Œé€šè¿‡<code>Factorial&lt;5&gt;::value</code>è·å–5çš„é˜¶ä¹˜ç»“æœï¼Œç¼–è¯‘æœŸå³ç”Ÿæˆå…¶å€¼ã€‚</li></ol><h3 id="é™æ€æˆå‘˜å˜é‡çš„åŸºæœ¬è§„åˆ™"><a href="#é™æ€æˆå‘˜å˜é‡çš„åŸºæœ¬è§„åˆ™" class="headerlink" title="é™æ€æˆå‘˜å˜é‡çš„åŸºæœ¬è§„åˆ™"></a>é™æ€æˆå‘˜å˜é‡çš„åŸºæœ¬è§„åˆ™</h3><p>åœ¨ C++ ä¸­ï¼Œé™æ€æˆå‘˜å˜é‡çš„å£°æ˜ä¸å®šä¹‰æœ‰ä»¥ä¸‹åŸºæœ¬è§„åˆ™ï¼š</p><ol><li><strong>å£°æ˜ï¼ˆDeclarationï¼‰</strong>ï¼šåœ¨ç±»å†…éƒ¨å£°æ˜é™æ€æˆå‘˜å˜é‡ï¼Œå‘Šè¯‰ç¼–è¯‘å™¨è¯¥ç±»åŒ…å«è¿™ä¸ªé™æ€æˆå‘˜ã€‚</li><li><strong>å®šä¹‰ï¼ˆDefinitionï¼‰</strong>ï¼šåœ¨ç±»å¤–éƒ¨å¯¹é™æ€æˆå‘˜å˜é‡è¿›è¡Œå®šä¹‰ï¼Œåˆ†é…å­˜å‚¨ç©ºé—´ã€‚</li></ol><p>é€šå¸¸ï¼Œå¯¹äºé <code>constexpr</code> æˆ–é <code>inline</code> çš„é™æ€æˆå‘˜å˜é‡ï¼Œå¿…é¡» åœ¨ç±»å¤–è¿›è¡Œå®šä¹‰ï¼Œå¦åˆ™ä¼šå¯¼è‡´é“¾æ¥å™¨é”™è¯¯ï¼ˆundefined referenceï¼‰ã€‚</p><h3 id="ç‰¹æ®Šæƒ…å†µï¼šstatic-const-æ•´æ•°æˆå‘˜"><a href="#ç‰¹æ®Šæƒ…å†µï¼šstatic-const-æ•´æ•°æˆå‘˜" class="headerlink" title="ç‰¹æ®Šæƒ…å†µï¼šstatic const æ•´æ•°æˆå‘˜"></a>ç‰¹æ®Šæƒ…å†µï¼šstatic const æ•´æ•°æˆå‘˜</h3><p>å¯¹äº <code>static const</code>æ•´æ•°ç±»å‹ çš„é™æ€æˆå‘˜å˜é‡ï¼ŒC++ æ ‡å‡†åšäº†ä¸€äº›ç‰¹æ®Šçš„å¤„ç†ï¼š</p><ul><li><strong>ç±»å†…åˆå§‹åŒ–</strong>ï¼šä½ å¯ä»¥åœ¨ç±»å†…éƒ¨åˆå§‹åŒ– <code>static const</code> æ•´æ•°æˆå‘˜å˜é‡ï¼Œä¾‹å¦‚ <code>static const int value = 42;</code>ã€‚</li><li><strong>ä½¿ç”¨åœºæ™¯</strong>ï¼š<ul><li>ä¸éœ€è¦ç±»å¤–å®šä¹‰ï¼šåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œç¼–è¯‘å™¨åœ¨ç¼–è¯‘é˜¶æ®µå¯ä»¥ç›´æ¥ä½¿ç”¨ç±»å†…çš„åˆå§‹åŒ–å€¼ï¼Œæ— éœ€ç±»å¤–å®šä¹‰ã€‚</li><li>éœ€è¦ç±»å¤–å®šä¹‰ï¼šå¦‚æœä½ åœ¨ç¨‹åºä¸­å¯¹è¯¥é™æ€æˆå‘˜å˜é‡è¿›è¡Œå–å€ï¼ˆä¾‹å¦‚ï¼Œ<code>&amp;Factorial&lt;5&gt;::value</code>ï¼‰ï¼Œæˆ–è€…åœ¨å…¶ä»–éœ€è¦è¯¥å˜é‡çš„å­˜å‚¨ä½ç½®æ—¶ï¼Œå°±éœ€è¦åœ¨ç±»å¤–è¿›è¡Œå®šä¹‰ã€‚</li></ul></li></ul><h4 id="C-11-åŠä¹‹å‰çš„æ ‡å‡†"><a href="#C-11-åŠä¹‹å‰çš„æ ‡å‡†" class="headerlink" title="C++11 åŠä¹‹å‰çš„æ ‡å‡†"></a>C++11 åŠä¹‹å‰çš„æ ‡å‡†</h4><p>åœ¨ C++11 åŠæ›´æ—©çš„æ ‡å‡†ä¸­ï¼Œå¯¹äº <code>static const</code> æ•´æ•°æˆå‘˜å˜é‡ï¼š</p><ul><li><strong>ä¸éœ€è¦ç±»å¤–å®šä¹‰çš„æƒ…å†µ</strong>ï¼š<ul><li>ä»…åœ¨ä½œä¸ºç¼–è¯‘æœŸå¸¸é‡ä½¿ç”¨æ—¶ï¼Œä¸éœ€è¦ç±»å¤–å®šä¹‰ã€‚ä¾‹å¦‚ï¼Œç”¨äºæ•°ç»„å¤§å°ã€æ¨¡æ¿å‚æ•°ç­‰ã€‚</li></ul></li><li><strong>éœ€è¦ç±»å¤–å®šä¹‰çš„æƒ…å†µ</strong>ï¼š<ul><li>å½“ä½ éœ€è¦å¯¹å˜é‡è¿›è¡Œå–å€ï¼Œæˆ–è€…åœ¨éœ€è¦å…¶å­˜å‚¨ä½ç½®æ—¶ï¼Œå¿…é¡»åœ¨ç±»å¤–å®šä¹‰ã€‚ä¾‹å¦‚ï¼š</li></ul></li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç±»å†…å£°æ˜</span></span><br><span class="line"><span class="type">static</span> <span class="type">const</span> <span class="type">int</span> value = <span class="number">42</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç±»å¤–å®šä¹‰ï¼ˆå¦‚æœéœ€è¦è¿›è¡Œå–å€æ“ä½œï¼‰</span></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> ClassName::value;</span><br></pre></td></tr></table></figure><h4 id="C-17-åŠæ›´æ–°æ ‡å‡†"><a href="#C-17-åŠæ›´æ–°æ ‡å‡†" class="headerlink" title="C++17 åŠæ›´æ–°æ ‡å‡†"></a>C++17 åŠæ›´æ–°æ ‡å‡†</h4><p>ä» C++17 å¼€å§‹ï¼Œå¼•å…¥äº† <strong>å†…è”å˜é‡ï¼ˆinline variablesï¼‰</strong>ï¼Œä½¿å¾—åœ¨ç±»å†…å®šä¹‰é™æ€æˆå‘˜å˜é‡å˜å¾—æ›´åŠ çµæ´»ï¼š</p><ul><li><strong>å†…è”é™æ€æˆå‘˜å˜é‡</strong>ï¼š<ul><li>ä½¿ç”¨ <code>inline</code> å…³é”®å­—ï¼Œå¯ä»¥åœ¨ç±»å†…å¯¹é™æ€æˆå‘˜å˜é‡è¿›è¡Œå®šä¹‰ï¼Œæ— éœ€åœ¨ç±»å¤–è¿›è¡Œå•ç‹¬å®šä¹‰ã€‚</li><li>è¿™é€‚ç”¨äº C++17 åŠæ›´é«˜ç‰ˆæœ¬ã€‚</li></ul></li></ul><p>ä¾‹å¦‚ï¼Œä½ å¯ä»¥è¿™æ ·ç¼–å†™ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="type">int</span> N&gt;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Factorial</span> &#123;</span><br><span class="line">    <span class="type">static</span> <span class="keyword">inline</span> <span class="type">const</span> <span class="type">int</span> value = N * Factorial&lt;N - <span class="number">1</span>&gt;::value;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;&gt;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Factorial</span>&lt;<span class="number">0</span>&gt; &#123;</span><br><span class="line">    <span class="type">static</span> <span class="keyword">inline</span> <span class="type">const</span> <span class="type">int</span> value = <span class="number">1</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ— éœ€åœ¨ç±»å¤–è¿›è¡Œå®šä¹‰ï¼Œå› ä¸º <code>inline</code> ç¡®ä¿äº†è¯¥å˜é‡åœ¨æ¯ä¸ªç¿»è¯‘å•å…ƒä¸­éƒ½åªæœ‰ä¸€ä¸ªå®ä¾‹ã€‚</p><h3 id="åœ¨-C-11-åŠä¹‹å‰çš„æ ‡å‡†"><a href="#åœ¨-C-11-åŠä¹‹å‰çš„æ ‡å‡†" class="headerlink" title="åœ¨ C++11 åŠä¹‹å‰çš„æ ‡å‡†"></a>åœ¨ C++11 åŠä¹‹å‰çš„æ ‡å‡†</h3><p><strong>ä»£ç ï¼š</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="type">int</span> N&gt;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Factorial</span> &#123;</span><br><span class="line">    <span class="type">static</span> <span class="type">const</span> <span class="type">int</span> value = N * Factorial&lt;N - <span class="number">1</span>&gt;::value;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;&gt;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Factorial</span>&lt;<span class="number">0</span>&gt; &#123;</span><br><span class="line">    <span class="type">static</span> <span class="type">const</span> <span class="type">int</span> value = <span class="number">1</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¦‚æœéœ€è¦å–å€ï¼Œéœ€è¦åœ¨ç±»å¤–å®šä¹‰</span></span><br><span class="line"><span class="comment">// const int Factorial&lt;5&gt;::value;</span></span><br></pre></td></tr></table></figure><ul><li><strong>ä½œä¸ºç¼–è¯‘æœŸå¸¸é‡ä½¿ç”¨</strong>ï¼š<ul><li>ä¾‹å¦‚ï¼Œç”¨äºå…¶ä»–æ¨¡æ¿å‚æ•°æˆ–ç¼–è¯‘æœŸå¸¸é‡è®¡ç®—æ—¶ï¼Œä¸éœ€è¦ç±»å¤–å®šä¹‰ã€‚</li></ul></li><li><strong>å–å€æˆ–éœ€è¦å­˜å‚¨ä½ç½®æ—¶</strong>ï¼š<ul><li>éœ€è¦åœ¨ç±»å¤–è¿›è¡Œå®šä¹‰ã€‚ä¾‹å¦‚ï¼š</li></ul></li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    std::cout &lt;&lt; Factorial&lt;<span class="number">5</span>&gt;::value &lt;&lt; std::endl;  <span class="comment">// ä¸éœ€è¦å®šä¹‰</span></span><br><span class="line">    <span class="type">const</span> <span class="type">int</span>* ptr = &amp;Factorial&lt;<span class="number">5</span>&gt;::value;          <span class="comment">// éœ€è¦å®šä¹‰</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="åœ¨-C-17-åŠæ›´é«˜æ ‡å‡†"><a href="#åœ¨-C-17-åŠæ›´é«˜æ ‡å‡†" class="headerlink" title="åœ¨ C++17 åŠæ›´é«˜æ ‡å‡†"></a>åœ¨ C++17 åŠæ›´é«˜æ ‡å‡†</h3><p>å¦‚æœä½ ä½¿ç”¨ C++17 åŠæ›´é«˜ç‰ˆæœ¬ï¼Œå¯ä»¥ä½¿ç”¨ <code>inline</code> å…³é”®å­—ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="type">int</span> N&gt;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Factorial</span> &#123;</span><br><span class="line">    <span class="type">static</span> <span class="keyword">inline</span> <span class="type">const</span> <span class="type">int</span> value = N * Factorial&lt;N - <span class="number">1</span>&gt;::value;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;&gt;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Factorial</span>&lt;<span class="number">0</span>&gt; &#123;</span><br><span class="line">    <span class="type">static</span> <span class="keyword">inline</span> <span class="type">const</span> <span class="type">int</span> value = <span class="number">1</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><ul><li><strong>æ— éœ€ç±»å¤–å®šä¹‰</strong>ï¼š<ul><li><code>inline</code> ä½¿å¾—åœ¨ç±»å†…çš„å®šä¹‰æˆä¸ºå”¯ä¸€çš„å®šä¹‰ï¼Œå³ä½¿åœ¨å¤šä¸ªç¿»è¯‘å•å…ƒä¸­ä½¿ç”¨ï¼Œä¹Ÿä¸ä¼šå¯¼è‡´é‡å¤å®šä¹‰é”™è¯¯ã€‚</li></ul></li></ul><h3 id="å®é™…ç¤ºä¾‹ä¸æµ‹è¯•"><a href="#å®é™…ç¤ºä¾‹ä¸æµ‹è¯•" class="headerlink" title="å®é™…ç¤ºä¾‹ä¸æµ‹è¯•"></a>å®é™…ç¤ºä¾‹ä¸æµ‹è¯•</h3><h4 id="ç¤ºä¾‹-1ï¼šä»…ä½œä¸ºç¼–è¯‘æœŸå¸¸é‡ä½¿ç”¨"><a href="#ç¤ºä¾‹-1ï¼šä»…ä½œä¸ºç¼–è¯‘æœŸå¸¸é‡ä½¿ç”¨" class="headerlink" title="ç¤ºä¾‹ 1ï¼šä»…ä½œä¸ºç¼–è¯‘æœŸå¸¸é‡ä½¿ç”¨"></a>ç¤ºä¾‹ 1ï¼šä»…ä½œä¸ºç¼–è¯‘æœŸå¸¸é‡ä½¿ç”¨</h4><ul><li>C++11 åŠä¹‹å‰ï¼šæ— éœ€ç±»å¤–å®šä¹‰ã€‚</li><li>C++17 åŠæ›´æ–°ï¼šåŒæ ·æ— éœ€ç±»å¤–å®šä¹‰ï¼Œä¸”å¯ä»¥ä½¿ç”¨ <code>inline</code> è¿›ä¸€æ­¥ä¼˜åŒ–ã€‚</li></ul><h4 id="ç¤ºä¾‹-2ï¼šå–å€"><a href="#ç¤ºä¾‹-2ï¼šå–å€" class="headerlink" title="ç¤ºä¾‹ 2ï¼šå–å€"></a>ç¤ºä¾‹ 2ï¼šå–å€</h4><ul><li>C++11 åŠä¹‹å‰ï¼šå¿…é¡»æä¾›ç±»å¤–å®šä¹‰ï¼Œå¦åˆ™ä¼šåœ¨é“¾æ¥æ—¶å‡ºç°é”™è¯¯ã€‚</li><li>C++17 åŠæ›´æ–°ï¼šè‹¥æœªä½¿ç”¨ <code>inline</code>ï¼Œä»éœ€æä¾›ç±»å¤–å®šä¹‰ï¼›ä½¿ç”¨ <code>inline</code> åˆ™æ— éœ€ã€‚</li></ul><h4 id="ç¤ºä¾‹-3ï¼šä½¿ç”¨-inlineï¼ˆC-17-åŠæ›´é«˜ï¼‰"><a href="#ç¤ºä¾‹-3ï¼šä½¿ç”¨-inlineï¼ˆC-17-åŠæ›´é«˜ï¼‰" class="headerlink" title="ç¤ºä¾‹ 3ï¼šä½¿ç”¨ inlineï¼ˆC++17 åŠæ›´é«˜ï¼‰"></a>ç¤ºä¾‹ 3ï¼šä½¿ç”¨ inlineï¼ˆC++17 åŠæ›´é«˜ï¼‰</h4><ul><li>C++17 åŠä»¥ä¸Šï¼š<ul><li>æ— éœ€ç±»å¤–å®šä¹‰ã€‚</li><li><code>inline</code> ä¿è¯äº†å¤šé‡å®šä¹‰çš„åˆæ³•æ€§ã€‚</li></ul></li></ul><h3 id="è¯¦ç»†è§£æ"><a href="#è¯¦ç»†è§£æ" class="headerlink" title="è¯¦ç»†è§£æ"></a>è¯¦ç»†è§£æ</h3><h4 id="ä¸ºä»€ä¹ˆæœ‰è¿™æ ·çš„ç‰¹æ®Šå¤„ç†ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆæœ‰è¿™æ ·çš„ç‰¹æ®Šå¤„ç†ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆæœ‰è¿™æ ·çš„ç‰¹æ®Šå¤„ç†ï¼Ÿ"></a>ä¸ºä»€ä¹ˆæœ‰è¿™æ ·çš„ç‰¹æ®Šå¤„ç†ï¼Ÿ</h4><ul><li><strong>ä¼˜åŒ–ä¸æ€§èƒ½</strong>ï¼š<ul><li>åœ¨ç¼–è¯‘æœŸå¸¸é‡çš„æƒ…å†µä¸‹ï¼Œä¸éœ€è¦åœ¨è¿è¡Œæ—¶åˆ†é…å­˜å‚¨ç©ºé—´ï¼Œç¼–è¯‘å™¨å¯ä»¥ä¼˜åŒ–æ‰ç›¸å…³ä»£ç ã€‚</li></ul></li><li><strong>å…¼å®¹æ€§</strong>ï¼š<ul><li>æ—©æœŸ C++ æ ‡å‡†éµå¾ªè¿™ç§è§„åˆ™ï¼Œå…è®¸åœ¨ç±»å†…åˆå§‹åŒ–é™æ€å¸¸é‡æˆå‘˜å˜é‡ï¼Œä¾¿äºæ¨¡æ¿å…ƒç¼–ç¨‹å’Œå¸¸é‡è¡¨è¾¾å¼çš„ä½¿ç”¨ã€‚</li></ul></li><li><strong>inline å˜é‡</strong>ï¼š<ul><li>C++17 å¼•å…¥ <code>inline</code> å…³é”®å­—ç”¨äºå˜é‡ï¼Œè§£å†³äº†é™æ€æˆå‘˜å˜é‡åœ¨å¤šä¸ªç¿»è¯‘å•å…ƒä¸­çš„å®šä¹‰é—®é¢˜ï¼Œä½¿å¾—ä»£ç æ›´ç®€æ´ã€‚</li></ul></li></ul><h4 id="æ˜¯å¦æ€»æ˜¯éœ€è¦å®šä¹‰ï¼Ÿ"><a href="#æ˜¯å¦æ€»æ˜¯éœ€è¦å®šä¹‰ï¼Ÿ" class="headerlink" title="æ˜¯å¦æ€»æ˜¯éœ€è¦å®šä¹‰ï¼Ÿ"></a>æ˜¯å¦æ€»æ˜¯éœ€è¦å®šä¹‰ï¼Ÿ</h4><p>å¹¶éæ€»æ˜¯éœ€è¦ã€‚å…³é”®åœ¨äº <strong>å¦‚ä½•ä½¿ç”¨</strong> è¿™ä¸ªé™æ€æˆå‘˜å˜é‡ï¼š</p><ul><li><strong>ä»…ä½œä¸ºç¼–è¯‘æœŸå¸¸é‡ä½¿ç”¨</strong>ï¼šæ— éœ€ç±»å¤–å®šä¹‰ã€‚</li><li><strong>éœ€è¦å­˜å‚¨ä½ç½®æˆ–å–å€</strong>ï¼šéœ€è¦ç±»å¤–å®šä¹‰ï¼Œé™¤éä½¿ç”¨ <code>inline</code>ï¼ˆC++17 åŠä»¥ä¸Šï¼‰ã€‚</li></ul><h4 id="ç¼–è¯‘å™¨ä¸é“¾æ¥å™¨çš„è¡Œä¸º"><a href="#ç¼–è¯‘å™¨ä¸é“¾æ¥å™¨çš„è¡Œä¸º" class="headerlink" title="ç¼–è¯‘å™¨ä¸é“¾æ¥å™¨çš„è¡Œä¸º"></a>ç¼–è¯‘å™¨ä¸é“¾æ¥å™¨çš„è¡Œä¸º</h4><ul><li><strong>ç¼–è¯‘é˜¶æ®µ</strong>ï¼š<ul><li>ç±»å†…çš„åˆå§‹åŒ–ç”¨äºç¼–è¯‘æœŸå¸¸é‡è®¡ç®—ï¼Œä¸æ¶‰åŠå­˜å‚¨åˆ†é…ã€‚</li></ul></li><li><strong>é“¾æ¥é˜¶æ®µ</strong>ï¼š<ul><li>å¦‚æœæ²¡æœ‰ç±»å¤–å®šä¹‰ï¼Œä¸”é™æ€æˆå‘˜è¢« odr-usedï¼ˆå¯èƒ½éœ€è¦å­˜å‚¨ä½ç½®ï¼‰ï¼Œé“¾æ¥å™¨ä¼šæŠ¥é”™ï¼Œæç¤ºæ‰¾ä¸åˆ°ç¬¦å·å®šä¹‰ã€‚</li><li>ä½¿ç”¨ <code>inline</code> å…³é”®å­—åï¼Œç¼–è¯‘å™¨å¤„ç†ä¸ºå†…è”å˜é‡ï¼Œé¿å…äº†å¤šé‡å®šä¹‰é—®é¢˜ã€‚</li></ul></li></ul><h4 id="ç¤ºä¾‹ï¼šç¼–è¯‘æœŸæ–æ³¢é‚£å¥‘æ•°åˆ—"><a href="#ç¤ºä¾‹ï¼šç¼–è¯‘æœŸæ–æ³¢é‚£å¥‘æ•°åˆ—" class="headerlink" title="ç¤ºä¾‹ï¼šç¼–è¯‘æœŸæ–æ³¢é‚£å¥‘æ•°åˆ—"></a>ç¤ºä¾‹ï¼šç¼–è¯‘æœŸæ–æ³¢é‚£å¥‘æ•°åˆ—</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="type">int</span> N&gt;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Fibonacci</span> &#123;</span><br><span class="line">    <span class="type">static</span> <span class="type">const</span> <span class="type">int</span> value = Fibonacci&lt;N - <span class="number">1</span>&gt;::value + Fibonacci&lt;N - <span class="number">2</span>&gt;::value;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;&gt;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Fibonacci</span>&lt;<span class="number">0</span>&gt; &#123;</span><br><span class="line">    <span class="type">static</span> <span class="type">const</span> <span class="type">int</span> value = <span class="number">0</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;&gt;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Fibonacci</span>&lt;<span class="number">1</span>&gt; &#123;</span><br><span class="line">    <span class="type">static</span> <span class="type">const</span> <span class="type">int</span> value = <span class="number">1</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Fibonacci(10): &quot;</span> &lt;&lt; Fibonacci&lt;<span class="number">10</span>&gt;::value &lt;&lt; std::endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>è¾“å‡ºï¼š</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Fibonacci(10): 55</span><br></pre></td></tr></table></figure><h3 id="è¦ç‚¹ï¼š-4"><a href="#è¦ç‚¹ï¼š-4" class="headerlink" title="è¦ç‚¹ï¼š"></a>è¦ç‚¹ï¼š</h3><ul><li>æ¨¡æ¿å…ƒç¼–ç¨‹åˆ©ç”¨ç¼–è¯‘æœŸè®¡ç®—æå‡ç¨‹åºæ€§èƒ½ã€‚</li><li>éœ€è¦ç†è§£æ¨¡æ¿é€’å½’ä¸ç»ˆæ­¢æ¡ä»¶ã€‚</li><li>å¸¸ä¸ç±»å‹ç‰¹æ€§å’Œæ¨¡æ¿ç‰¹åŒ–ç»“åˆä½¿ç”¨ã€‚</li></ul><h2 id="ç±»å‹è®¡ç®—ä¸SFINAE"><a href="#ç±»å‹è®¡ç®—ä¸SFINAE" class="headerlink" title="ç±»å‹è®¡ç®—ä¸SFINAE"></a>ç±»å‹è®¡ç®—ä¸SFINAE</h2><ul><li><strong>ç±»å‹è®¡ç®—</strong>ï¼šåœ¨ç¼–è¯‘æœŸè¿›è¡Œç±»å‹çš„æ¨å¯¼å’Œè½¬æ¢ã€‚</li><li><strong>SFINAEï¼ˆSubstitution Failure Is Not An Errorï¼‰</strong>ï¼šæ¨¡æ¿å®ä¾‹åŒ–è¿‡ç¨‹ä¸­ï¼Œå¦‚æœæŸä¸ªæ›¿æ¢å¤±è´¥ï¼Œç¼–è¯‘å™¨ä¸ä¼šæŠ¥é”™ï¼Œè€Œæ˜¯å¿½ç•¥è¯¥æ¨¡æ¿ï¼Œå¹¶å°è¯•å…¶ä»–åŒ¹é…ã€‚</li></ul><h3 id="ç¤ºä¾‹ï¼šæ£€æµ‹ç±»å‹æ˜¯å¦å¯åŠ "><a href="#ç¤ºä¾‹ï¼šæ£€æµ‹ç±»å‹æ˜¯å¦å¯åŠ " class="headerlink" title="ç¤ºä¾‹ï¼šæ£€æµ‹ç±»å‹æ˜¯å¦å¯åŠ "></a>ç¤ºä¾‹ï¼šæ£€æµ‹ç±»å‹æ˜¯å¦å¯åŠ </h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;type_traits&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T, <span class="keyword">typename</span> = <span class="type">void</span>&gt;</span><br><span class="line"><span class="keyword">struct</span> is_addable : std::false_type &#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">is_addable</span>&lt;T, <span class="keyword">decltype</span>(<span class="built_in">void</span>(std::<span class="built_in">declval</span>&lt;T&gt;() + std::<span class="built_in">declval</span>&lt;T&gt;()))&gt; : std::true_type &#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">typename</span> std::enable_if&lt;is_addable&lt;T&gt;::value, T&gt;::<span class="function">type</span></span><br><span class="line"><span class="function"><span class="title">add</span><span class="params">(<span class="type">const</span> T&amp; a, <span class="type">const</span> T&amp; b)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    std::cout &lt;&lt; std::boolalpha;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;int is addable: &quot;</span> &lt;&lt; is_addable&lt;<span class="type">int</span>&gt;::value &lt;&lt; std::endl;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;std::string is addable: &quot;</span> &lt;&lt; is_addable&lt;std::string&gt;::value &lt;&lt; std::endl;</span><br><span class="line">    </span><br><span class="line">    std::cout &lt;&lt; <span class="built_in">add</span>(<span class="number">3</span>, <span class="number">4</span>) &lt;&lt; std::endl;</span><br><span class="line">    std::cout &lt;&lt; <span class="built_in">add</span>(std::<span class="built_in">string</span>(<span class="string">&quot;Hello&quot;</span>), std::<span class="built_in">string</span>(<span class="string">&quot; World&quot;</span>)) &lt;&lt; std::endl;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>è®²è§£ï¼š</strong></p><ol><li><p><code>struct is_addable&lt;...&gt; : std::true_type &#123;&#125;</code></p><ul><li>ç›®çš„ï¼šå®šä¹‰ä¸€ä¸ªåä¸º <code>is_addable</code> çš„ç»“æ„ä½“æ¨¡æ¿ï¼Œå®ƒç»§æ‰¿è‡ª <code>std::true_type</code>ã€‚</li><li>ä½œç”¨ï¼šå½“ç‰¹å®šçš„æ¨¡æ¿å‚æ•°æ»¡è¶³æ¡ä»¶æ—¶ï¼Œè¿™ä¸ªç‰¹åŒ–ç‰ˆæœ¬å°†è¢«é€‰ä¸­ï¼Œè¡¨ç¤º T ç±»å‹æ˜¯å¯åŠ çš„ï¼Œå³æ”¯æŒ <code>+</code> æ“ä½œç¬¦ã€‚</li></ul></li><li><p>æ¨¡æ¿å‚æ•°è§£é‡Šï¼š<code>&lt;T, decltype(void(std::declval&lt;T&gt;() + std::declval&lt;T&gt;()))&gt;</code></p><ul><li><code>T</code>ï¼šè¿™æ˜¯è¦æ£€æŸ¥çš„ç±»å‹ã€‚</li><li><code>std::declval&lt;T&gt;()</code>ï¼š<ul><li>ç”¨é€”ï¼š<code>std::declval&lt;T&gt;()</code> æ˜¯ä¸€ä¸ªç”¨äºåœ¨ä¸å®é™…åˆ›å»º T ç±»å‹å¯¹è±¡çš„æƒ…å†µä¸‹ï¼Œç”Ÿæˆä¸€ä¸ª T ç±»å‹çš„å³å€¼å¼•ç”¨ã€‚</li><li>ä½œç”¨ï¼šå®ƒå…è®¸æˆ‘ä»¬åœ¨ç¼–è¯‘æ—¶æ¨¡æ‹Ÿ T ç±»å‹çš„å¯¹è±¡ï¼Œä»¥ä¾¿ç”¨äºè¡¨è¾¾å¼çš„æ£€æµ‹ã€‚</li></ul></li><li><code>std::declval&lt;T&gt;() + std::declval&lt;T&gt;()</code>ï¼š<ul><li>è¡¨è¾¾å¼ï¼šå°è¯•å¯¹ä¸¤ä¸ª T ç±»å‹çš„å³å€¼å¼•ç”¨è¿›è¡ŒåŠ æ³•è¿ç®—ã€‚</li><li>ç›®çš„ï¼šæ£€æŸ¥ T ç±»å‹æ˜¯å¦æ”¯æŒ <code>+</code> æ“ä½œç¬¦ã€‚</li></ul></li><li><code>void(...)</code>ï¼š<ul><li>å°†åŠ æ³•è¡¨è¾¾å¼çš„ç»“æœè½¬æ¢ä¸º <code>void</code> ç±»å‹ã€‚è¿™æ˜¯ä¸ºäº†åœ¨ <code>decltype</code> ä¸­ä»…å…³å¿ƒè¡¨è¾¾å¼æ˜¯å¦æœ‰æ•ˆï¼Œè€Œä¸å…³å¿ƒå…¶å…·ä½“ç±»å‹ã€‚</li></ul></li><li><code>decltype(void(std::declval&lt;T&gt;() + std::declval&lt;T&gt;()))</code>ï¼š<ul><li>ä½œç”¨ï¼šå¦‚æœ T ç±»å‹æ”¯æŒåŠ æ³•è¿ç®—ï¼Œåˆ™è¯¥ <code>decltype</code> è¡¨è¾¾å¼çš„ç±»å‹ä¸º <code>void</code>ï¼Œå¦åˆ™ä¼šå¯¼è‡´æ›¿æ¢å¤±è´¥ã€‚</li></ul></li></ul></li></ol><h2 id="é«˜çº§æ¨¡æ¿å…ƒç¼–ç¨‹æŠ€å·§"><a href="#é«˜çº§æ¨¡æ¿å…ƒç¼–ç¨‹æŠ€å·§" class="headerlink" title="é«˜çº§æ¨¡æ¿å…ƒç¼–ç¨‹æŠ€å·§"></a>é«˜çº§æ¨¡æ¿å…ƒç¼–ç¨‹æŠ€å·§</h2><ul><li><strong>å˜å‚æ¨¡æ¿ï¼ˆVariadic Templatesï¼‰</strong>ï¼šæ”¯æŒæ¨¡æ¿å‚æ•°åŒ…ï¼Œå®ç°æ›´åŠ çµæ´»çš„æ¨¡æ¿å®šä¹‰ã€‚</li></ul><h3 id="ç¤ºä¾‹ï¼šæ±‚å’Œæ¨¡æ¿"><a href="#ç¤ºä¾‹ï¼šæ±‚å’Œæ¨¡æ¿" class="headerlink" title="ç¤ºä¾‹ï¼šæ±‚å’Œæ¨¡æ¿"></a>ç¤ºä¾‹ï¼šæ±‚å’Œæ¨¡æ¿</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="type">int</span>... Ns&gt;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Sum</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;&gt;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Sum</span>&lt;&gt; &#123;</span><br><span class="line">    <span class="type">static</span> <span class="type">const</span> <span class="type">int</span> value = <span class="number">0</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="type">int</span> N, <span class="type">int</span>... Ns&gt;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Sum</span>&lt;N, Ns...&gt; &#123;</span><br><span class="line">    <span class="type">static</span> <span class="type">const</span> <span class="type">int</span> value = N + Sum&lt;Ns...&gt;::value;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Sum: &quot;</span> &lt;&lt; Sum&lt;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&gt;::value &lt;&lt; std::endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>è®²è§£ï¼š</strong></p><ol><li>åŸºæœ¬æ¨¡æ¿<code>Sum</code>æ¥å—ä¸€ä¸ªæ•´æ•°å‚æ•°åŒ…<code>Ns...</code>ã€‚</li><li>ç‰¹åŒ–æ¨¡æ¿<code>Sum&lt;&gt;</code>å®šä¹‰é€’å½’ç»ˆæ­¢æ¡ä»¶ï¼Œ<code>value</code>ä¸º0ã€‚</li><li>é€’å½’å®šä¹‰<code>Sum&lt;N, Ns...&gt;</code>å°†ç¬¬ä¸€ä¸ªå‚æ•°<code>N</code>ä¸å‰©ä½™å‚æ•°çš„å’Œç›¸åŠ ã€‚</li><li>åœ¨mainå‡½æ•°ä¸­ï¼Œé€šè¿‡<code>Sum&lt;1, 2, 3, 4, 5&gt;::value</code>è®¡ç®—1+2+3+4+5&#x3D;15ã€‚</li></ol><ul><li><strong>ç±»å‹åˆ—è¡¨ï¼ˆType Listsï¼‰</strong>ï¼šé€šè¿‡æ¨¡æ¿å‚æ•°åŒ…ç®¡ç†ç±»å‹çš„é›†åˆã€‚</li></ul><h3 id="ç¤ºä¾‹ï¼šç±»å‹åˆ—è¡¨å’Œå…ƒç´ è®¿é—®"><a href="#ç¤ºä¾‹ï¼šç±»å‹åˆ—è¡¨å’Œå…ƒç´ è®¿é—®" class="headerlink" title="ç¤ºä¾‹ï¼šç±»å‹åˆ—è¡¨å’Œå…ƒç´ è®¿é—®"></a>ç¤ºä¾‹ï¼šç±»å‹åˆ—è¡¨å’Œå…ƒç´ è®¿é—®</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;typeinfo&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span>... Types&gt;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">TypeList</span> &#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> List, <span class="type">unsigned</span> N&gt;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">TypeAt</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> Head, <span class="keyword">typename</span>... Tail&gt;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">TypeAt</span>&lt;TypeList&lt;Head, Tail...&gt;, <span class="number">0</span>&gt; &#123;</span><br><span class="line">    <span class="keyword">using</span> type = Head;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> Head, <span class="keyword">typename</span>... Tail, <span class="type">unsigned</span> N&gt;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">TypeAt</span>&lt;TypeList&lt;Head, Tail...&gt;, N&gt; &#123;</span><br><span class="line">    <span class="keyword">using</span> type = <span class="keyword">typename</span> TypeAt&lt;TypeList&lt;Tail...&gt;, N - <span class="number">1</span>&gt;::type;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">using</span> list = TypeList&lt;<span class="type">int</span>, <span class="type">double</span>, <span class="type">char</span>&gt;;</span><br><span class="line">    <span class="keyword">using</span> third_type = TypeAt&lt;list, <span class="number">2</span>&gt;::type;</span><br><span class="line">    </span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Third type: &quot;</span> &lt;&lt; <span class="built_in">typeid</span>(third_type).<span class="built_in">name</span>() &lt;&lt; std::endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>è®²è§£ï¼š</strong></p><ol><li><code>TypeList</code>ï¼šå®šä¹‰ä¸€ä¸ªåŒ…å«å¤šä¸ªç±»å‹çš„ç±»å‹åˆ—è¡¨ã€‚</li><li><code>TypeAt</code>ï¼šé€šè¿‡é€’å½’æ¨¡æ¿ï¼Œä»<code>TypeList</code>ä¸­è·å–ç¬¬Nä¸ªç±»å‹ã€‚<ul><li>å½“Nä¸º0æ—¶ï¼Œç±»å‹ä¸º<code>Head</code>ã€‚</li><li>å¦åˆ™ï¼Œé€’å½’è·å–<code>Tail...</code>ä¸­ç¬¬N-1ä¸ªç±»å‹ã€‚</li></ul></li><li>ä½¿ç”¨ï¼šå®šä¹‰<code>list</code>ä¸º<code>TypeList&lt;int, double, char&gt;</code>ï¼Œ<code>third_type</code>ä¸ºç¬¬2ä¸ªç±»å‹ï¼Œå³<code>char</code>ã€‚</li></ol><h2 id="å®é™…åº”ç”¨æ¡ˆä¾‹"><a href="#å®é™…åº”ç”¨æ¡ˆä¾‹" class="headerlink" title="å®é™…åº”ç”¨æ¡ˆä¾‹"></a>å®é™…åº”ç”¨æ¡ˆä¾‹</h2><h3 id="æ¡ˆä¾‹1ï¼šé™æ€æ–­è¨€ä¸ç±»å‹æ£€æŸ¥"><a href="#æ¡ˆä¾‹1ï¼šé™æ€æ–­è¨€ä¸ç±»å‹æ£€æŸ¥" class="headerlink" title="æ¡ˆä¾‹1ï¼šé™æ€æ–­è¨€ä¸ç±»å‹æ£€æŸ¥"></a>æ¡ˆä¾‹1ï¼šé™æ€æ–­è¨€ä¸ç±»å‹æ£€æŸ¥</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;type_traits&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">process</span><span class="params">(T value)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">static_assert</span>(std::is_arithmetic&lt;T&gt;::value, <span class="string">&quot;T must be arithmetic type&quot;</span>);</span><br><span class="line">    <span class="comment">// å¤„ç†é€»è¾‘</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">process</span>(<span class="number">42</span>);      <span class="comment">// OK</span></span><br><span class="line">    <span class="built_in">process</span>(<span class="number">3.14</span>);    <span class="comment">// OK</span></span><br><span class="line">    <span class="comment">// process(&quot;hello&quot;); // ç¼–è¯‘é”™è¯¯ï¼šé™æ€æ–­è¨€å¤±è´¥</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ¡ˆä¾‹2ï¼šç¼–è¯‘æœŸå­—ç¬¦ä¸²"><a href="#æ¡ˆä¾‹2ï¼šç¼–è¯‘æœŸå­—ç¬¦ä¸²" class="headerlink" title="æ¡ˆä¾‹2ï¼šç¼–è¯‘æœŸå­—ç¬¦ä¸²"></a>æ¡ˆä¾‹2ï¼šç¼–è¯‘æœŸå­—ç¬¦ä¸²</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="type">char</span>... Cs&gt;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">String</span> &#123;</span><br><span class="line">    <span class="type">static</span> <span class="type">const</span> <span class="type">char</span> value[<span class="keyword">sizeof</span>...(Cs) + <span class="number">1</span>];</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="type">char</span>... Cs&gt;</span><br><span class="line"><span class="type">const</span> <span class="type">char</span> String&lt;Cs...&gt;::value[<span class="keyword">sizeof</span>...(Cs) + <span class="number">1</span>] = &#123;Cs..., <span class="string">&#x27;\0&#x27;</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">using</span> Hello = String&lt;<span class="string">&#x27;H&#x27;</span>, <span class="string">&#x27;e&#x27;</span>, <span class="string">&#x27;l&#x27;</span>, <span class="string">&#x27;l&#x27;</span>, <span class="string">&#x27;o&#x27;</span>&gt;;</span><br><span class="line">    std::cout &lt;&lt; Hello::value &lt;&lt; std::endl;  <span class="comment">// è¾“å‡ºï¼šHello</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ä¸ºä»€ä¹ˆéœ€è¦å¤–éƒ¨å®šä¹‰-value"><a href="#ä¸ºä»€ä¹ˆéœ€è¦å¤–éƒ¨å®šä¹‰-value" class="headerlink" title="ä¸ºä»€ä¹ˆéœ€è¦å¤–éƒ¨å®šä¹‰ value"></a>ä¸ºä»€ä¹ˆéœ€è¦å¤–éƒ¨å®šä¹‰ value</h3><p>åœ¨ C++ ä¸­ï¼Œé™æ€æˆå‘˜å˜é‡ä¸ç±»çš„å®ä¾‹æ— å…³ï¼Œå®ƒä»¬å­˜åœ¨äºå…¨å±€å‘½åç©ºé—´ä¸­ã€‚ç„¶è€Œï¼Œé™æ€æˆå‘˜å˜é‡çš„å£°æ˜å’Œå®šä¹‰æ˜¯ä¸åŒçš„ï¼š</p><ol><li><strong>å£°æ˜</strong>ï¼šå‘Šè¯‰ç¼–è¯‘å™¨ç±»ä¸­å­˜åœ¨è¿™ä¸ªå˜é‡ã€‚</li><li><strong>å®šä¹‰</strong>ï¼šä¸ºè¿™ä¸ªå˜é‡åˆ†é…å­˜å‚¨ç©ºé—´ã€‚</li></ol><p>å¯¹äºé <code>inline</code> çš„é™æ€æˆå‘˜å˜é‡ï¼Œå³ä½¿æ˜¯ <code>constexpr</code>ï¼Œéƒ½éœ€è¦åœ¨ç±»å¤–éƒ¨è¿›è¡Œå®šä¹‰ã€‚å¦åˆ™ï¼Œé“¾æ¥å™¨åœ¨å¤„ç†å¤šä¸ªç¿»è¯‘å•å…ƒæ—¶ä¼šå› ä¸ºæ‰¾ä¸åˆ°å˜é‡çš„å®šä¹‰è€ŒæŠ¥é”™ã€‚</p><h4 id="å…·ä½“åŸå› "><a href="#å…·ä½“åŸå› " class="headerlink" title="å…·ä½“åŸå› "></a>å…·ä½“åŸå› </h4><ol><li><p><strong>æ¨¡æ¿ç±»çš„é™æ€æˆå‘˜å˜é‡</strong>ï¼š</p><ul><li>æ¯å½“æ¨¡æ¿å®ä¾‹åŒ–æ—¶ï¼Œéƒ½ä¼šäº§ç”Ÿä¸€ä¸ªæ–°çš„ç±»ç±»å‹ï¼Œæ¯ä¸ªç±»ç±»å‹éƒ½æœ‰è‡ªå·±çš„ä¸€ç»„é™æ€æˆå‘˜å˜é‡ã€‚</li><li>å› æ­¤ï¼Œç¼–è¯‘å™¨éœ€è¦çŸ¥é“è¿™äº›é™æ€æˆå‘˜å˜é‡åœ¨æ‰€æœ‰ç¿»è¯‘å•å…ƒä¸­éƒ½å”¯ä¸€å¯¹åº”ä¸€ä¸ªå®šä¹‰ã€‚</li></ul></li><li><p><strong>constexpr é™æ€æˆå‘˜å˜é‡</strong>ï¼š</p><ul><li>ä» C++17 å¼€å§‹ï¼Œ<code>inline</code> å…³é”®å­—å¼•å…¥ï¼Œä½¿å¾— <code>constexpr</code> é™æ€æˆå‘˜å˜é‡å¯ä»¥åœ¨ç±»å†…å®šä¹‰ï¼Œå¹¶ä¸”éšå¼åœ°å…·æœ‰ <code>inline</code> å±æ€§ã€‚è¿™æ„å‘³ç€ä¸éœ€è¦åœ¨ç±»å¤–å®šä¹‰å®ƒä»¬ï¼Œå› ä¸º <code>inline</code> ç¡®ä¿äº†åœ¨å¤šä¸ªç¿»è¯‘å•å…ƒä¸­æœ‰åŒä¸€ä»½å®šä¹‰ã€‚</li><li>ä½†åœ¨ C++17 ä¹‹å‰æˆ–ä¸ä½¿ç”¨ <code>inline</code> çš„æƒ…å†µä¸‹ï¼Œå³ä½¿æ˜¯ <code>constexpr</code>ï¼Œä»éœ€åœ¨ç±»å¤–å®šä¹‰ã€‚</li></ul></li></ol><ul><li><strong>ç±»å†…å£°æ˜</strong>ï¼š<code>static constexpr char value[...]</code> å£°æ˜äº† <code>value</code> å¹¶ç»™äºˆäº†åˆå§‹å€¼ã€‚</li><li><strong>ç±»å¤–å®šä¹‰</strong>ï¼š<code>constexpr char String&lt;Cs...&gt;::value[...]</code> ä¸º <code>value</code> åˆ†é…äº†å­˜å‚¨ç©ºé—´ã€‚</li></ul><p>å¦‚æœçœç•¥ç±»å¤–å®šä¹‰ï¼Œç¼–è¯‘å™¨ä¼šåœ¨é“¾æ¥é˜¶æ®µæ‰¾ä¸åˆ° <code>value</code> çš„å®šä¹‰ï¼Œå¯¼è‡´é“¾æ¥é”™è¯¯ã€‚è¿™å°¤å…¶é€‚ç”¨äº C++14 åŠæ›´æ—©ç‰ˆæœ¬ï¼Œä»¥åŠ C++17 ä¸­æœªä½¿ç”¨ <code>inline</code> çš„æƒ…å½¢ã€‚</p><h3 id="å¦‚ä½•é¿å…å¤–éƒ¨å®šä¹‰"><a href="#å¦‚ä½•é¿å…å¤–éƒ¨å®šä¹‰" class="headerlink" title="å¦‚ä½•é¿å…å¤–éƒ¨å®šä¹‰"></a>å¦‚ä½•é¿å…å¤–éƒ¨å®šä¹‰</h3><p>å¦‚æœä½ ä½¿ç”¨çš„æ˜¯ C++17 æˆ–æ›´é«˜ç‰ˆæœ¬ï¼Œå¯ä»¥é€šè¿‡ <code>inline</code> å…³é”®å­—å°†é™æ€æˆå‘˜å˜é‡å£°æ˜ä¸º <code>inline</code>ï¼Œä»è€Œåœ¨ç±»å†…å®Œæˆå®šä¹‰ï¼Œæ— éœ€å†åœ¨å¤–éƒ¨å®šä¹‰ã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="type">char</span>... Cs&gt;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">String</span> &#123;</span><br><span class="line">    <span class="type">static</span> <span class="keyword">inline</span> <span class="type">const</span> <span class="type">char</span> value[<span class="keyword">sizeof</span>...(Cs) + <span class="number">1</span>] = &#123;Cs..., <span class="string">&#x27;\0&#x27;</span>&#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªç‰ˆæœ¬ä¸­ï¼Œ<code>inline</code> å…³é”®å­—å‘Šè¯‰ç¼–è¯‘å™¨è¿™æ˜¯ä¸€ä¸ªå†…è”å˜é‡ï¼Œå…è®¸åœ¨å¤šä¸ªç¿»è¯‘å•å…ƒä¸­å­˜åœ¨åŒä¸€ä»½å®šä¹‰ï¼Œè€Œä¸ä¼šå¯¼è‡´é‡å¤å®šä¹‰é”™è¯¯ã€‚å› æ­¤ï¼Œæ— éœ€åœ¨ç±»å¤–å†æ¬¡å®šä¹‰ <code>value</code>ã€‚</p><h3 id="å®Œæ•´ç¤ºä¾‹å¯¹æ¯”"><a href="#å®Œæ•´ç¤ºä¾‹å¯¹æ¯”" class="headerlink" title="å®Œæ•´ç¤ºä¾‹å¯¹æ¯”"></a>å®Œæ•´ç¤ºä¾‹å¯¹æ¯”</h3><h4 id="ä¸ä½¿ç”¨-inlineï¼ˆéœ€è¦ç±»å¤–å®šä¹‰ï¼‰"><a href="#ä¸ä½¿ç”¨-inlineï¼ˆéœ€è¦ç±»å¤–å®šä¹‰ï¼‰" class="headerlink" title="ä¸ä½¿ç”¨ inlineï¼ˆéœ€è¦ç±»å¤–å®šä¹‰ï¼‰"></a>ä¸ä½¿ç”¨ inlineï¼ˆéœ€è¦ç±»å¤–å®šä¹‰ï¼‰</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// C++14 åŠæ›´æ—©ç‰ˆæœ¬</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="type">char</span>... Cs&gt;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">String</span> &#123;</span><br><span class="line">    <span class="type">static</span> <span class="type">const</span> <span class="type">char</span> value[<span class="keyword">sizeof</span>...(Cs) + <span class="number">1</span>];</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="type">char</span>... Cs&gt;</span><br><span class="line"><span class="type">const</span> <span class="type">char</span> String&lt;Cs...&gt;::value[<span class="keyword">sizeof</span>...(Cs) + <span class="number">1</span>] = &#123;Cs..., <span class="string">&#x27;\0&#x27;</span>&#125;;</span><br></pre></td></tr></table></figure><h4 id="ä½¿ç”¨-inlineï¼ˆæ— éœ€ç±»å¤–å®šä¹‰ï¼ŒC-17-èµ·ï¼‰"><a href="#ä½¿ç”¨-inlineï¼ˆæ— éœ€ç±»å¤–å®šä¹‰ï¼ŒC-17-èµ·ï¼‰" class="headerlink" title="ä½¿ç”¨ inlineï¼ˆæ— éœ€ç±»å¤–å®šä¹‰ï¼ŒC++17 èµ·ï¼‰"></a>ä½¿ç”¨ inlineï¼ˆæ— éœ€ç±»å¤–å®šä¹‰ï¼ŒC++17 èµ·ï¼‰</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// C++17 åŠæ›´é«˜ç‰ˆæœ¬</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="type">char</span>... Cs&gt;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">String</span> &#123;</span><br><span class="line">    <span class="type">static</span> <span class="keyword">inline</span> <span class="type">const</span> <span class="type">char</span> value[<span class="keyword">sizeof</span>...(Cs) + <span class="number">1</span>] = &#123;Cs..., <span class="string">&#x27;\0&#x27;</span>&#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="C-20-Concepts"><a href="#C-20-Concepts" class="headerlink" title="C++20 Concepts"></a>C++20 Concepts</h2><p>C++20 å¼•å…¥äº† Conceptsï¼Œå®ƒä»¬ä¸ºæ¨¡æ¿å‚æ•°æä¾›äº†æ›´å¼ºçš„çº¦æŸå’Œè¡¨è¾¾èƒ½åŠ›ï¼Œä½¿æ¨¡æ¿çš„ä½¿ç”¨æ›´ç®€æ´ã€é”™è¯¯ä¿¡æ¯æ›´å‹å¥½ã€‚</p><h3 id="å®šä¹‰ä¸ä½¿ç”¨"><a href="#å®šä¹‰ä¸ä½¿ç”¨" class="headerlink" title="å®šä¹‰ä¸ä½¿ç”¨"></a>å®šä¹‰ä¸ä½¿ç”¨</h3><h4 id="å®šä¹‰ä¸€ä¸ª-Concept"><a href="#å®šä¹‰ä¸€ä¸ª-Concept" class="headerlink" title="å®šä¹‰ä¸€ä¸ª Concept"></a>å®šä¹‰ä¸€ä¸ª Concept</h4><p>Concepts ä½¿ç”¨ <code>concept</code> å…³é”®å­—å®šä¹‰ï¼Œå¹¶ä½œä¸ºå‡½æ•°æˆ–ç±»æ¨¡æ¿çš„çº¦æŸã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;concepts&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">concept</span> Arithmetic = std::integral&lt;T&gt; || std::floating_point&lt;T&gt;;</span><br></pre></td></tr></table></figure><h4 id="ä½¿ç”¨-Concept-çº¦æŸæ¨¡æ¿"><a href="#ä½¿ç”¨-Concept-çº¦æŸæ¨¡æ¿" class="headerlink" title="ä½¿ç”¨ Concept çº¦æŸæ¨¡æ¿"></a>ä½¿ç”¨ Concept çº¦æŸæ¨¡æ¿</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;Arithmetic T&gt;</span><br><span class="line"><span class="function">T <span class="title">add</span><span class="params">(T a, T b)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æˆ–è€…ä½¿ç”¨ requires å­å¥</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="function"><span class="keyword">requires</span> Arithmetic&lt;T&gt;</span></span><br><span class="line"><span class="function">T <span class="title">multiply</span><span class="params">(T a, T b)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> a * b;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="é™åˆ¶ä¸çº¦æŸ"><a href="#é™åˆ¶ä¸çº¦æŸ" class="headerlink" title="é™åˆ¶ä¸çº¦æŸ"></a>é™åˆ¶ä¸çº¦æŸ</h3><p>Concepts å…è®¸ä¸ºæ¨¡æ¿å‚æ•°å®šä¹‰å¤æ‚çš„çº¦æŸï¼Œä½¿å¾—æ¨¡æ¿æ›´å…·è¡¨è¾¾æ€§ï¼ŒåŒæ—¶æå‡ç¼–è¯‘å™¨é”™è¯¯ä¿¡æ¯çš„å¯ç†è§£æ€§ã€‚</p><h4 id="ç¤ºä¾‹ï¼šæ’åºå‡½æ•°ä¸­çš„-Concepts"><a href="#ç¤ºä¾‹ï¼šæ’åºå‡½æ•°ä¸­çš„-Concepts" class="headerlink" title="ç¤ºä¾‹ï¼šæ’åºå‡½æ•°ä¸­çš„ Concepts"></a>ç¤ºä¾‹ï¼šæ’åºå‡½æ•°ä¸­çš„ Concepts</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;concepts&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">concept</span> Sortable = <span class="built_in">requires</span>(T a, T b) &#123;</span><br><span class="line">    &#123; a &lt; b &#125; -&gt; std::convertible_to&lt;<span class="type">bool</span>&gt;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;Sortable T&gt;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">sortAndPrint</span><span class="params">(std::vector&lt;T&gt;&amp; vec)</span> </span>&#123;</span><br><span class="line">    std::<span class="built_in">sort</span>(vec.<span class="built_in">begin</span>(), vec.<span class="built_in">end</span>());</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">const</span> <span class="keyword">auto</span>&amp; item : vec) &#123;</span><br><span class="line">        std::cout &lt;&lt; item &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    std::cout &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    std::vector&lt;<span class="type">int</span>&gt; numbers = &#123;<span class="number">3</span>, <span class="number">1</span>, <span class="number">4</span>, <span class="number">1</span>, <span class="number">5</span>&#125;;</span><br><span class="line">    <span class="built_in">sortAndPrint</span>(numbers);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// std::vector&lt;std::vector&lt;int&gt;&gt; nested; // ä¸ä¼šæ»¡è¶³ Sortable æ¦‚å¿µ</span></span><br><span class="line">    <span class="comment">// sortAndPrint(nested); // ç¼–è¯‘é”™è¯¯</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>è¾“å‡ºï¼š</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1 1 3 4 5 </span><br></pre></td></tr></table></figure><h3 id="è¦ç‚¹ï¼š-5"><a href="#è¦ç‚¹ï¼š-5" class="headerlink" title="è¦ç‚¹ï¼š"></a>è¦ç‚¹ï¼š</h3><ul><li>Concepts æä¾›äº†æ¨¡æ¿å‚æ•°çš„è¯­ä¹‰çº¦æŸã€‚</li><li>ä½¿ç”¨ Concepts æé«˜æ¨¡æ¿çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚</li><li>ç”Ÿæˆæ›´å‹å¥½çš„ç¼–è¯‘é”™è¯¯ä¿¡æ¯ï¼Œæ˜“äºè°ƒè¯•ã€‚</li></ul><h2 id="æ¨¡æ¿å®ä¾‹åŒ–ä¸ç¼–è¯‘å™¨è¡Œä¸º"><a href="#æ¨¡æ¿å®ä¾‹åŒ–ä¸ç¼–è¯‘å™¨è¡Œä¸º" class="headerlink" title="æ¨¡æ¿å®ä¾‹åŒ–ä¸ç¼–è¯‘å™¨è¡Œä¸º"></a>æ¨¡æ¿å®ä¾‹åŒ–ä¸ç¼–è¯‘å™¨è¡Œä¸º</h2><p>ç†è§£æ¨¡æ¿å®ä¾‹åŒ–çš„è¿‡ç¨‹æœ‰åŠ©äºè¿›è¡Œæœ‰æ•ˆçš„æ¨¡æ¿è®¾è®¡ä¸ä¼˜åŒ–ï¼Œå°¤å…¶æ˜¯åœ¨æ¶‰åŠé“¾æ¥å’Œç¼–è¯‘æ—¶é—´æ—¶ã€‚</p><h3 id="æ˜¾å¼å®ä¾‹åŒ–ï¼ˆExplicit-Instantiationï¼‰"><a href="#æ˜¾å¼å®ä¾‹åŒ–ï¼ˆExplicit-Instantiationï¼‰" class="headerlink" title="æ˜¾å¼å®ä¾‹åŒ–ï¼ˆExplicit Instantiationï¼‰"></a>æ˜¾å¼å®ä¾‹åŒ–ï¼ˆExplicit Instantiationï¼‰</h3><p>æ˜¾å¼å®ä¾‹åŒ–å‘Šè¯‰ç¼–è¯‘å™¨ç”Ÿæˆç‰¹å®šç±»å‹ä¸‹çš„æ¨¡æ¿ä»£ç ï¼Œä¸»è¦ç”¨äºåˆ†ç¦»æ¨¡æ¿çš„å£°æ˜ä¸å®šä¹‰ï¼Œå‡å°‘ç¼–è¯‘æ—¶é—´ã€‚</p><h4 id="è¯­æ³•ï¼š-5"><a href="#è¯­æ³•ï¼š-5" class="headerlink" title="è¯­æ³•ï¼š"></a>è¯­æ³•ï¼š</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> <span class="keyword">class</span> <span class="title class_">ClassName</span>&lt;Type&gt;;      <span class="comment">// ç±»æ¨¡æ¿æ˜¾å¼å®ä¾‹åŒ–</span></span><br><span class="line"><span class="keyword">template</span> returnType <span class="built_in">functionName</span>&lt;Type&gt;(parameters); <span class="comment">// å‡½æ•°æ¨¡æ¿æ˜¾å¼å®ä¾‹åŒ–</span></span><br></pre></td></tr></table></figure><h4 id="ç¤ºä¾‹ï¼šåˆ†ç¦»ç±»æ¨¡æ¿çš„å£°æ˜ä¸å®šä¹‰"><a href="#ç¤ºä¾‹ï¼šåˆ†ç¦»ç±»æ¨¡æ¿çš„å£°æ˜ä¸å®šä¹‰" class="headerlink" title="ç¤ºä¾‹ï¼šåˆ†ç¦»ç±»æ¨¡æ¿çš„å£°æ˜ä¸å®šä¹‰"></a>ç¤ºä¾‹ï¼šåˆ†ç¦»ç±»æ¨¡æ¿çš„å£°æ˜ä¸å®šä¹‰</h4><p><strong>MyClass.h</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyClass</span> &#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    T value;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">MyClass</span>(T v);</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">print</span><span class="params">()</span></span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><strong>MyClass.cpp</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;MyClass.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line">MyClass&lt;T&gt;::<span class="built_in">MyClass</span>(T v) : <span class="built_in">value</span>(v) &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="type">void</span> MyClass&lt;T&gt;::<span class="built_in">print</span>() &#123;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Value: &quot;</span> &lt;&lt; value &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ˜¾å¼å®ä¾‹åŒ–</span></span><br><span class="line"><span class="keyword">template</span> <span class="keyword">class</span> <span class="title class_">MyClass</span>&lt;<span class="type">int</span>&gt;;</span><br><span class="line"><span class="keyword">template</span> <span class="keyword">class</span> <span class="title class_">MyClass</span>&lt;<span class="type">double</span>&gt;;</span><br></pre></td></tr></table></figure><p><strong>main.cpp</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;MyClass.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="function">MyClass&lt;<span class="type">int</span>&gt; <span class="title">obj1</span><span class="params">(<span class="number">42</span>)</span></span>;</span><br><span class="line">    <span class="function">MyClass&lt;<span class="type">double</span>&gt; <span class="title">obj2</span><span class="params">(<span class="number">3.14</span>)</span></span>;</span><br><span class="line">    </span><br><span class="line">    obj1.<span class="built_in">print</span>();</span><br><span class="line">    obj2.<span class="built_in">print</span>();</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>è¾“å‡ºï¼š</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Value: 42</span><br><span class="line">Value: 3.14</span><br></pre></td></tr></table></figure><h4 id="æ³¨æ„äº‹é¡¹ï¼š-1"><a href="#æ³¨æ„äº‹é¡¹ï¼š-1" class="headerlink" title="æ³¨æ„äº‹é¡¹ï¼š"></a>æ³¨æ„äº‹é¡¹ï¼š</h4><ul><li>æ˜¾å¼å®ä¾‹åŒ–éœ€è¦åœ¨æ¨¡æ¿å®šä¹‰åè¿›è¡Œã€‚</li><li>åªæœ‰æ˜¾å¼å®ä¾‹åŒ–çš„ç±»å‹åœ¨æœªå®ä¾‹åŒ–æ—¶å¯ç”¨äºæ¨¡æ¿åˆ†ç¦»ã€‚</li><li>æœªæ˜¾å¼å®ä¾‹åŒ–çš„ç±»å‹å¯èƒ½å¯¼è‡´é“¾æ¥é”™è¯¯ã€‚</li></ul><h3 id="éšå¼å®ä¾‹åŒ–ï¼ˆImplicit-Instantiationï¼‰"><a href="#éšå¼å®ä¾‹åŒ–ï¼ˆImplicit-Instantiationï¼‰" class="headerlink" title="éšå¼å®ä¾‹åŒ–ï¼ˆImplicit Instantiationï¼‰"></a>éšå¼å®ä¾‹åŒ–ï¼ˆImplicit Instantiationï¼‰</h3><p>éšå¼å®ä¾‹åŒ–æ˜¯ç¼–è¯‘å™¨åœ¨æ¨¡æ¿è¢«å®é™…ä½¿ç”¨æ—¶è‡ªåŠ¨ç”Ÿæˆå¯¹åº”å®ä¾‹ä»£ç çš„è¿‡ç¨‹ã€‚é€šå¸¸ï¼Œæ¨¡æ¿å®šä¹‰ä¸ä½¿ç”¨éƒ½åœ¨å¤´æ–‡ä»¶ä¸­å®Œæˆã€‚</p><h4 id="ç¤ºä¾‹ï¼š"><a href="#ç¤ºä¾‹ï¼š" class="headerlink" title="ç¤ºä¾‹ï¼š"></a>ç¤ºä¾‹ï¼š</h4><p><strong>MyClass.h</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyClass</span> &#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    T value;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">MyClass</span>(T v) : <span class="built_in">value</span>(v) &#123;&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">print</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;Value: &quot;</span> &lt;&lt; value &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><strong>main.cpp</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;MyClass.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="function">MyClass&lt;<span class="type">int</span>&gt; <span class="title">obj1</span><span class="params">(<span class="number">42</span>)</span></span>;</span><br><span class="line">    <span class="function">MyClass&lt;<span class="type">double</span>&gt; <span class="title">obj2</span><span class="params">(<span class="number">3.14</span>)</span></span>;</span><br><span class="line">    </span><br><span class="line">    obj1.<span class="built_in">print</span>();</span><br><span class="line">    obj2.<span class="built_in">print</span>();</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>è¾“å‡ºï¼š</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Value: 42</span><br><span class="line">Value: 3.14</span><br></pre></td></tr></table></figure><h4 id="è¦ç‚¹ï¼š-6"><a href="#è¦ç‚¹ï¼š-6" class="headerlink" title="è¦ç‚¹ï¼š"></a>è¦ç‚¹ï¼š</h4><ul><li>éšå¼å®ä¾‹åŒ–ä¸éœ€è¦æ˜¾å¼å£°æ˜æˆ–å®šä¹‰ã€‚</li><li>æ¨¡æ¿å®šä¹‰å¿…é¡»åœ¨ä½¿ç”¨å‰å¯è§ï¼Œé€šå¸¸é€šè¿‡å¤´æ–‡ä»¶å®ç°ã€‚</li><li>å®¹æ˜“å¯¼è‡´ç¼–è¯‘æ—¶é—´å¢åŠ ï¼Œå°¤å…¶æ˜¯å¤§å‹æ¨¡æ¿åº“ã€‚</li></ul><h3 id="é“¾æ¥æ—¶é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ"><a href="#é“¾æ¥æ—¶é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ" class="headerlink" title="é“¾æ¥æ—¶é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ"></a>é“¾æ¥æ—¶é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ</h3><p>ç”±äºæ¨¡æ¿æ˜¯åœ¨ä½¿ç”¨æ—¶è¢«å®ä¾‹åŒ–ï¼Œè·¨æºæ–‡ä»¶ä½¿ç”¨æ¨¡æ¿å¯èƒ½å¯¼è‡´é“¾æ¥æ—¶é—®é¢˜ï¼Œå¦‚é‡å¤å®šä¹‰æˆ–æœªå®šä¹‰å¼•ç”¨ã€‚</p><h4 id="è§£å†³æ–¹æ¡ˆï¼š"><a href="#è§£å†³æ–¹æ¡ˆï¼š" class="headerlink" title="è§£å†³æ–¹æ¡ˆï¼š"></a>è§£å†³æ–¹æ¡ˆï¼š</h4><ol><li><strong>å†…è”å®ç°</strong>ï¼šå°†æ¨¡æ¿çš„å®šä¹‰ä¸å£°æ˜ä¸€èµ·æ”¾åœ¨å¤´æ–‡ä»¶ä¸­ï¼Œé¿å…é“¾æ¥æ—¶é‡å¤å®šä¹‰ã€‚</li><li><strong>æ˜¾å¼å®ä¾‹åŒ–</strong>ï¼šå°†å¸¸ç”¨çš„æ¨¡æ¿å®ä¾‹åŒ–æ”¾åœ¨æºæ–‡ä»¶ä¸­ï¼Œå…¶ä»–æºæ–‡ä»¶é€šè¿‡ <code>extern</code> æˆ–å¤´æ–‡ä»¶å¼•ç”¨å·²æœ‰å®ä¾‹ã€‚</li><li><strong>ä½¿ç”¨ extern template</strong>ï¼šå‘ŠçŸ¥ç¼–è¯‘å™¨æŸäº›æ¨¡æ¿å®ä¾‹å·²åœ¨å…¶ä»–æºæ–‡ä»¶ä¸­æ˜¾å¼å®ä¾‹åŒ–ã€‚</li></ol><h4 id="ç¤ºä¾‹ï¼šä½¿ç”¨-extern-template"><a href="#ç¤ºä¾‹ï¼šä½¿ç”¨-extern-template" class="headerlink" title="ç¤ºä¾‹ï¼šä½¿ç”¨ extern template"></a>ç¤ºä¾‹ï¼šä½¿ç”¨ extern template</h4><p><strong>MyClass.h</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyClass</span> &#123;</span><br><span class="line">    <span class="comment">// ... å£°æ˜</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å£°æ˜å¤–éƒ¨å®ä¾‹åŒ–</span></span><br><span class="line"><span class="keyword">extern</span> <span class="keyword">template</span> <span class="keyword">class</span> <span class="title class_">MyClass</span>&lt;<span class="type">int</span>&gt;;</span><br><span class="line"><span class="keyword">extern</span> <span class="keyword">template</span> <span class="keyword">class</span> <span class="title class_">MyClass</span>&lt;<span class="type">double</span>&gt;;</span><br></pre></td></tr></table></figure><p><strong>MyClass.cpp</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;MyClass.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å®šä¹‰ï¼ˆå®ä¾‹åŒ–ï¼‰</span></span><br><span class="line"><span class="keyword">template</span> <span class="keyword">class</span> <span class="title class_">MyClass</span>&lt;<span class="type">int</span>&gt;;</span><br><span class="line"><span class="keyword">template</span> <span class="keyword">class</span> <span class="title class_">MyClass</span>&lt;<span class="type">double</span>&gt;;</span><br></pre></td></tr></table></figure><p><strong>main.cpp</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;MyClass.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="function">MyClass&lt;<span class="type">int</span>&gt; <span class="title">obj1</span><span class="params">(<span class="number">42</span>)</span></span>;    <span class="comment">// ä½¿ç”¨å¤–éƒ¨å®ä¾‹åŒ–</span></span><br><span class="line">    <span class="function">MyClass&lt;<span class="type">double</span>&gt; <span class="title">obj2</span><span class="params">(<span class="number">3.14</span>)</span></span>; <span class="comment">// ä½¿ç”¨å¤–éƒ¨å®ä¾‹åŒ–</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="è¦ç‚¹ï¼š-7"><a href="#è¦ç‚¹ï¼š-7" class="headerlink" title="è¦ç‚¹ï¼š"></a>è¦ç‚¹ï¼š</h4><ul><li>ä½¿ç”¨ <code>extern template</code> å£°æ˜å·²åœ¨å…¶ä»–æºæ–‡ä»¶ä¸­å®ä¾‹åŒ–çš„æ¨¡æ¿ã€‚</li><li>å‡å°‘ç¼–è¯‘æ—¶é—´å’Œé“¾æ¥å¤§å°ï¼Œé˜²æ­¢é‡å¤å®šä¹‰ã€‚</li></ul><h2 id="æœ€ä½³å®è·µä¸æ³¨æ„äº‹é¡¹"><a href="#æœ€ä½³å®è·µä¸æ³¨æ„äº‹é¡¹" class="headerlink" title="æœ€ä½³å®è·µä¸æ³¨æ„äº‹é¡¹"></a>æœ€ä½³å®è·µä¸æ³¨æ„äº‹é¡¹</h2><p>æŒæ¡æ¨¡æ¿çš„æœ€ä½³å®è·µæœ‰åŠ©äºç¼–å†™é«˜æ•ˆã€å¯ç»´æŠ¤çš„ä»£ç ï¼ŒåŒæ—¶é¿å…å¸¸è§çš„é™·é˜±å’Œé—®é¢˜ã€‚</p><h3 id="æ¨¡æ¿å®šä¹‰ä¸å®ç°åˆ†ç¦»"><a href="#æ¨¡æ¿å®šä¹‰ä¸å®ç°åˆ†ç¦»" class="headerlink" title="æ¨¡æ¿å®šä¹‰ä¸å®ç°åˆ†ç¦»"></a>æ¨¡æ¿å®šä¹‰ä¸å®ç°åˆ†ç¦»</h3><p>å¯¹äºç±»æ¨¡æ¿ï¼Œé€šå¸¸å°†æ¨¡æ¿çš„å£°æ˜å’Œå®šä¹‰æ”¾åœ¨åŒä¸€å¤´æ–‡ä»¶ä¸­ï¼Œä»¥ç¡®ä¿ç¼–è¯‘å™¨åœ¨å®ä¾‹åŒ–æ¨¡æ¿æ—¶èƒ½å¤Ÿçœ‹åˆ°å®Œæ•´çš„å®šä¹‰ã€‚å°½ç®¡å¯ä»¥å°è¯•å°†æ¨¡æ¿å®šä¹‰åˆ†ç¦»åˆ°æºæ–‡ä»¶ï¼Œä½†éœ€è¦ç»“åˆæ˜¾å¼å®ä¾‹åŒ–ï¼Œè¿™ä¼šå¢åŠ å¤æ‚æ€§ï¼Œä¸”ä¸é€‚ç”¨äºå¹¿æ³›ä½¿ç”¨çš„æ¨¡æ¿ã€‚</p><h4 id="æ¨èåšæ³•ï¼š"><a href="#æ¨èåšæ³•ï¼š" class="headerlink" title="æ¨èåšæ³•ï¼š"></a>æ¨èåšæ³•ï¼š</h4><ul><li><strong>ç±»æ¨¡æ¿</strong>ï¼šå°†å£°æ˜å’Œå®ç°ç»Ÿä¸€åœ¨å¤´æ–‡ä»¶ä¸­ã€‚</li><li><strong>å‡½æ•°æ¨¡æ¿</strong>ï¼šåŒæ ·å°†å£°æ˜å’Œå®ç°ç»Ÿä¸€åœ¨å¤´æ–‡ä»¶ä¸­ï¼Œæˆ–ä½¿ç”¨æ˜¾å¼å®ä¾‹åŒ–ã€‚</li></ul><h3 id="é¿å…è¿‡åº¦æ¨¡æ¿åŒ–"><a href="#é¿å…è¿‡åº¦æ¨¡æ¿åŒ–" class="headerlink" title="é¿å…è¿‡åº¦æ¨¡æ¿åŒ–"></a>é¿å…è¿‡åº¦æ¨¡æ¿åŒ–</h3><p>è™½ç„¶æ¨¡æ¿æä¾›äº†æå¤§çš„çµæ´»æ€§ï¼Œä½†è¿‡åº¦å¤æ‚çš„æ¨¡æ¿ä¼šå¯¼è‡´ä»£ç éš¾ä»¥ç†è§£ã€ç»´æŠ¤å’Œç¼–è¯‘æ—¶é—´å¢åŠ ã€‚</p><h4 id="å»ºè®®ï¼š"><a href="#å»ºè®®ï¼š" class="headerlink" title="å»ºè®®ï¼š"></a>å»ºè®®ï¼š</h4><ul><li>åªåœ¨å¿…è¦æ—¶ä½¿ç”¨æ¨¡æ¿ã€‚</li><li>ä¿æŒæ¨¡æ¿çš„ç®€å•æ€§å’Œå¯è¯»æ€§ï¼Œé¿å…è¿‡åº¦åµŒå¥—å’Œå¤æ‚çš„ç‰¹åŒ–ã€‚</li><li>åˆç†ä½¿ç”¨ç±»å‹ç‰¹æ€§å’Œ Concepts è¿›è¡Œçº¦æŸã€‚</li></ul><h3 id="æé«˜ç¼–è¯‘é€Ÿåº¦çš„æ–¹æ³•"><a href="#æé«˜ç¼–è¯‘é€Ÿåº¦çš„æ–¹æ³•" class="headerlink" title="æé«˜ç¼–è¯‘é€Ÿåº¦çš„æ–¹æ³•"></a>æé«˜ç¼–è¯‘é€Ÿåº¦çš„æ–¹æ³•</h3><p>æ¨¡æ¿çš„å¹¿æ³›ä½¿ç”¨å¯èƒ½å¯¼è‡´ç¼–è¯‘æ—¶é—´æ˜¾è‘—å¢åŠ ã€‚ä»¥ä¸‹æ–¹æ³•æœ‰åŠ©äºä¼˜åŒ–ç¼–è¯‘é€Ÿåº¦ï¼š</p><ol><li><strong>é¢„ç¼–è¯‘å¤´æ–‡ä»¶ï¼ˆPrecompiled Headersï¼‰</strong>ï¼šå°†é¢‘ç¹ä½¿ç”¨çš„æ¨¡æ¿åº“æ”¾å…¥é¢„ç¼–è¯‘å¤´ä¸­ï¼ŒåŠ é€Ÿç¼–è¯‘ã€‚</li><li><strong>æ˜¾å¼å®ä¾‹åŒ–</strong>ï¼šé€šè¿‡æ˜¾å¼å®ä¾‹åŒ–å‡å°‘æ¨¡æ¿çš„é‡å¤ç¼–è¯‘ã€‚</li><li><strong>æ¨¡å—åŒ–ç¼–ç¨‹ï¼ˆC++20 Modulesï¼‰</strong>ï¼šåˆ©ç”¨æ¨¡å—åŒ–å°†æ¨¡æ¿åº“è¿›è¡Œç¼–è¯‘å’Œé“¾æ¥ï¼Œå‡å°‘ç¼–è¯‘æ—¶é—´ã€‚</li><li><strong>åˆç†åˆ†å‰²å¤´æ–‡ä»¶</strong>ï¼šé¿å…å¤´æ–‡ä»¶ä¸­çš„æ¨¡æ¿å®šä¹‰è¿‡å¤§ï¼Œåˆ†å‰²æˆè¾ƒå°çš„æ¨¡å—ã€‚</li></ol><h3 id="ä»£ç å¤ç”¨ä¸åº“è®¾è®¡"><a href="#ä»£ç å¤ç”¨ä¸åº“è®¾è®¡" class="headerlink" title="ä»£ç å¤ç”¨ä¸åº“è®¾è®¡"></a>ä»£ç å¤ç”¨ä¸åº“è®¾è®¡</h3><p>æ¨¡æ¿æ˜¯å®ç°é«˜åº¦å¤ç”¨åº“ç»„ä»¶çš„æœ‰æ•ˆæ‰‹æ®µï¼Œå¦‚æ ‡å‡†åº“ï¼ˆ<code>std::vector</code>ã€<code>std::map</code> ç­‰ï¼‰å¹¿æ³›ä½¿ç”¨æ¨¡æ¿ã€‚è®¾è®¡æ¨¡æ¿åº“æ—¶ï¼Œéœ€è€ƒè™‘ä»¥ä¸‹å› ç´ ï¼š</p><ul><li><strong>æ¥å£çš„ä¸€è‡´æ€§</strong>ï¼šä¿æŒæ¨¡æ¿åº“çš„æ¥å£ç®€æ´ã€ä¸€è‡´ï¼Œä¾¿äºä½¿ç”¨è€…ç†è§£å’Œä½¿ç”¨ã€‚</li><li><strong>æ–‡æ¡£ä¸ç¤ºä¾‹</strong>ï¼šæä¾›è¯¦ç»†çš„æ–‡æ¡£å’Œç¤ºä¾‹ä»£ç ï¼Œå¸®åŠ©ä½¿ç”¨è€…ç†è§£æ¨¡æ¿åº“çš„ç”¨æ³•ã€‚</li><li><strong>é”™è¯¯ä¿¡æ¯å‹å¥½</strong>ï¼šé€šè¿‡ Conceptsã€SFINAE ç­‰æœºåˆ¶æä¾›æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯ï¼Œé™ä½ä½¿ç”¨é—¨æ§›ã€‚</li><li><strong>æ€§èƒ½ä¼˜åŒ–</strong>ï¼šåˆ©ç”¨æ¨¡æ¿çš„ç¼–è¯‘æœŸè®¡ç®—å’Œå†…è”ç­‰ç‰¹æ€§ï¼Œæé«˜åº“ç»„ä»¶çš„æ€§èƒ½ã€‚</li></ul><h3 id="é¿å…æ¨¡æ¿é”™è¯¯çš„å›°æƒ‘"><a href="#é¿å…æ¨¡æ¿é”™è¯¯çš„å›°æƒ‘" class="headerlink" title="é¿å…æ¨¡æ¿é”™è¯¯çš„å›°æƒ‘"></a>é¿å…æ¨¡æ¿é”™è¯¯çš„å›°æƒ‘</h3><p>æ¨¡æ¿é”™è¯¯é€šå¸¸å¤æ‚ä¸”éš¾ä»¥ç†è§£ï¼Œä»¥ä¸‹æ–¹æ³•æœ‰åŠ©äºå‡å°‘æ¨¡æ¿é”™è¯¯çš„å›°æƒ‘ï¼š</p><ul><li><strong>é€æ­¥è°ƒè¯•</strong>ï¼šä»ç®€å•çš„æ¨¡æ¿å¼€å§‹ï¼Œé€æ­¥å¢åŠ å¤æ‚æ€§ï¼Œä¾¿äºå®šä½é”™è¯¯ã€‚</li><li><strong>ä½¿ç”¨ç¼–è¯‘å™¨è­¦å‘Šä¸å·¥å…·</strong>ï¼šå¼€å¯ç¼–è¯‘å™¨çš„è­¦å‘Šé€‰é¡¹ï¼Œä½¿ç”¨é™æ€åˆ†æå·¥å…·æ£€æµ‹æ¨¡æ¿ä»£ç ä¸­çš„é—®é¢˜ã€‚</li><li><strong>ä»£ç æ³¨é‡Šä¸æ–‡æ¡£</strong>ï¼šè¯¦ç»†æ³¨é‡Šå¤æ‚çš„æ¨¡æ¿ä»£ç ï¼Œæä¾›æ–‡æ¡£è¯´æ˜å…¶è®¾è®¡å’Œç”¨é€”ã€‚</li></ul><h2 id="æ€»ç»“-1"><a href="#æ€»ç»“-1" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>C++ æ¨¡æ¿æœºåˆ¶æ˜¯å®ç°æ³›å‹ç¼–ç¨‹çš„æ ¸å¿ƒå·¥å…·ï¼Œé€šè¿‡ç±»å‹å‚æ•°åŒ–å’Œç¼–è¯‘æœŸè®¡ç®—ï¼Œæå¤§åœ°æå‡äº†ä»£ç çš„å¤ç”¨æ€§ã€çµæ´»æ€§å’Œæ€§èƒ½ã€‚ä»åŸºç¡€çš„å‡½æ•°æ¨¡æ¿å’Œç±»æ¨¡æ¿ï¼Œåˆ°é«˜çº§çš„æ¨¡æ¿ç‰¹åŒ–ã€å˜å‚æ¨¡æ¿ã€æ¨¡æ¿å…ƒç¼–ç¨‹ã€SFINAE å’Œ Conceptsï¼ŒæŒæ¡æ¨¡æ¿çš„å„ä¸ªæ–¹é¢èƒ½å¤Ÿå¸®åŠ©å¼€å‘è€…ç¼–å†™æ›´é«˜æ•ˆã€æ›´åŠ é€šç”¨çš„ C++ ä»£ç ã€‚</p><p>åœ¨å®é™…åº”ç”¨ä¸­ï¼Œåˆç†è¿ç”¨æ¨¡æ¿ä¸ä»…å¯ä»¥ç®€åŒ–ä»£ç ç»“æ„ï¼Œè¿˜å¯ä»¥æé«˜ä»£ç çš„å¯ç»´æŠ¤æ€§å’Œå¯æ‰©å±•æ€§ã€‚ç„¶è€Œï¼Œæ¨¡æ¿çš„å¤æ‚æ€§ä¹Ÿè¦æ±‚å¼€å‘è€…å…·å¤‡æ‰å®çš„ C++ åŸºç¡€å’Œè‰¯å¥½çš„ç¼–ç¨‹ä¹ æƒ¯ï¼Œä»¥é¿å…è¿‡åº¦å¤æ‚åŒ–å’Œéš¾ä»¥è°ƒè¯•çš„é—®é¢˜ã€‚</p><p>é€šè¿‡æœ¬æ•™æ¡ˆçš„ç³»ç»Ÿå­¦ä¹ ï¼Œç›¸ä¿¡æ‚¨å·²ç»å…·å¤‡äº†å…¨é¢ç†è§£å’Œè¿ç”¨ C++ æ¨¡æ¿çš„èƒ½åŠ›ï¼Œèƒ½å¤Ÿåœ¨å®é™…é¡¹ç›®ä¸­é«˜æ•ˆåœ°åˆ©ç”¨æ¨¡æ¿ç‰¹æ€§ï¼Œç¼–å†™å‡ºæ›´ä¸ºä¼˜ç§€çš„ä»£ç ã€‚</p><h2 id="ç»ƒä¹ ä¸ä¹ é¢˜"><a href="#ç»ƒä¹ ä¸ä¹ é¢˜" class="headerlink" title="ç»ƒä¹ ä¸ä¹ é¢˜"></a>ç»ƒä¹ ä¸ä¹ é¢˜</h2><h3 id="ç»ƒä¹ -1ï¼šå®ç°ä¸€ä¸ªé€šç”¨çš„-Swap-å‡½æ•°æ¨¡æ¿"><a href="#ç»ƒä¹ -1ï¼šå®ç°ä¸€ä¸ªé€šç”¨çš„-Swap-å‡½æ•°æ¨¡æ¿" class="headerlink" title="ç»ƒä¹  1ï¼šå®ç°ä¸€ä¸ªé€šç”¨çš„ Swap å‡½æ•°æ¨¡æ¿"></a>ç»ƒä¹  1ï¼šå®ç°ä¸€ä¸ªé€šç”¨çš„ Swap å‡½æ•°æ¨¡æ¿</h3><p><strong>è¦æ±‚ï¼š</strong></p><ul><li>ç¼–å†™ä¸€ä¸ªå‡½æ•°æ¨¡æ¿ <code>swapValues</code>ï¼Œå¯ä»¥äº¤æ¢ä»»æ„ç±»å‹çš„ä¸¤ä¸ªå˜é‡ã€‚</li><li>åœ¨ main å‡½æ•°ä¸­æµ‹è¯• intã€doubleã€std::string ç±»å‹çš„äº¤æ¢ã€‚</li></ul><p><strong>æç¤ºï¼š</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">swapValues</span><span class="params">(T&amp; a, T&amp; b)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// å®ç°äº¤æ¢é€»è¾‘</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç»ƒä¹ -2ï¼šå®ç°ä¸€ä¸ªæ¨¡æ¿ç±»-Tripleï¼Œå­˜å‚¨ä¸‰ä¸ªç›¸åŒç±»å‹çš„å€¼ï¼Œå¹¶æä¾›è·å–å„ä¸ªæˆå‘˜çš„å‡½æ•°ã€‚"><a href="#ç»ƒä¹ -2ï¼šå®ç°ä¸€ä¸ªæ¨¡æ¿ç±»-Tripleï¼Œå­˜å‚¨ä¸‰ä¸ªç›¸åŒç±»å‹çš„å€¼ï¼Œå¹¶æä¾›è·å–å„ä¸ªæˆå‘˜çš„å‡½æ•°ã€‚" class="headerlink" title="ç»ƒä¹  2ï¼šå®ç°ä¸€ä¸ªæ¨¡æ¿ç±» Tripleï¼Œå­˜å‚¨ä¸‰ä¸ªç›¸åŒç±»å‹çš„å€¼ï¼Œå¹¶æä¾›è·å–å„ä¸ªæˆå‘˜çš„å‡½æ•°ã€‚"></a>ç»ƒä¹  2ï¼šå®ç°ä¸€ä¸ªæ¨¡æ¿ç±» Tripleï¼Œå­˜å‚¨ä¸‰ä¸ªç›¸åŒç±»å‹çš„å€¼ï¼Œå¹¶æä¾›è·å–å„ä¸ªæˆå‘˜çš„å‡½æ•°ã€‚</h3><p><strong>è¦æ±‚ï¼š</strong></p><ul><li>æ¨¡æ¿å‚æ•°ä¸ºç±»å‹ Tã€‚</li><li>æä¾›æ„é€ å‡½æ•°ã€æˆå‘˜å˜é‡åŠè®¿é—®å‡½æ•°ã€‚</li><li>åœ¨ main ä¸­å®ä¾‹åŒ– <code>Triple&lt;int&gt;</code> å’Œ <code>Triple&lt;std::string&gt;</code>ï¼Œè¿›è¡Œæµ‹è¯•ã€‚</li></ul><h3 id="ç»ƒä¹ -3ï¼šä½¿ç”¨æ¨¡æ¿ç‰¹åŒ–ï¼Œä¸ºç±»æ¨¡æ¿-Printer-æä¾›é’ˆå¯¹-bool-ç±»å‹çš„å…¨ç‰¹åŒ–ï¼Œå®ç°ä¸“é—¨çš„è¾“å‡ºæ ¼å¼ã€‚"><a href="#ç»ƒä¹ -3ï¼šä½¿ç”¨æ¨¡æ¿ç‰¹åŒ–ï¼Œä¸ºç±»æ¨¡æ¿-Printer-æä¾›é’ˆå¯¹-bool-ç±»å‹çš„å…¨ç‰¹åŒ–ï¼Œå®ç°ä¸“é—¨çš„è¾“å‡ºæ ¼å¼ã€‚" class="headerlink" title="ç»ƒä¹  3ï¼šä½¿ç”¨æ¨¡æ¿ç‰¹åŒ–ï¼Œä¸ºç±»æ¨¡æ¿ Printer æä¾›é’ˆå¯¹ bool ç±»å‹çš„å…¨ç‰¹åŒ–ï¼Œå®ç°ä¸“é—¨çš„è¾“å‡ºæ ¼å¼ã€‚"></a>ç»ƒä¹  3ï¼šä½¿ç”¨æ¨¡æ¿ç‰¹åŒ–ï¼Œä¸ºç±»æ¨¡æ¿ Printer æä¾›é’ˆå¯¹ bool ç±»å‹çš„å…¨ç‰¹åŒ–ï¼Œå®ç°ä¸“é—¨çš„è¾“å‡ºæ ¼å¼ã€‚</h3><p><strong>è¦æ±‚ï¼š</strong></p><ul><li>é€šç”¨æ¨¡æ¿ç±» Printerï¼Œå…·æœ‰ print å‡½æ•°ï¼Œè¾“å‡º â€œGeneral Printer: valueâ€ã€‚</li><li>å…¨ç‰¹åŒ– <code>Printer&lt;bool&gt;</code>ï¼Œè¾“å‡º â€œBoolean Printer: trueâ€ æˆ– â€œBoolean Printer: falseâ€ã€‚</li></ul><h3 id="ç»ƒä¹ -4ï¼šå®ç°ä¸€ä¸ªå˜å‚æ¨¡æ¿å‡½æ•°-logMessagesï¼Œå¯ä»¥æ¥å—ä»»æ„æ•°é‡å’Œç±»å‹çš„å‚æ•°ï¼Œå¹¶ä¾æ¬¡æ‰“å°å®ƒä»¬ã€‚"><a href="#ç»ƒä¹ -4ï¼šå®ç°ä¸€ä¸ªå˜å‚æ¨¡æ¿å‡½æ•°-logMessagesï¼Œå¯ä»¥æ¥å—ä»»æ„æ•°é‡å’Œç±»å‹çš„å‚æ•°ï¼Œå¹¶ä¾æ¬¡æ‰“å°å®ƒä»¬ã€‚" class="headerlink" title="ç»ƒä¹  4ï¼šå®ç°ä¸€ä¸ªå˜å‚æ¨¡æ¿å‡½æ•° logMessagesï¼Œå¯ä»¥æ¥å—ä»»æ„æ•°é‡å’Œç±»å‹çš„å‚æ•°ï¼Œå¹¶ä¾æ¬¡æ‰“å°å®ƒä»¬ã€‚"></a>ç»ƒä¹  4ï¼šå®ç°ä¸€ä¸ªå˜å‚æ¨¡æ¿å‡½æ•° logMessagesï¼Œå¯ä»¥æ¥å—ä»»æ„æ•°é‡å’Œç±»å‹çš„å‚æ•°ï¼Œå¹¶ä¾æ¬¡æ‰“å°å®ƒä»¬ã€‚</h3><p><strong>è¦æ±‚ï¼š</strong></p><ul><li>ä½¿ç”¨é€’å½’æ–¹æ³•å®ç°ã€‚</li><li>åœ¨ main ä¸­æµ‹è¯•ä¸åŒå‚æ•°ç»„åˆçš„è°ƒç”¨ã€‚</li></ul><h3 id="ç»ƒä¹ -5ï¼šç¼–å†™æ¨¡æ¿å…ƒç¼–ç¨‹ç»“æ„-IsPointer-ç”¨äºåœ¨ç¼–è¯‘æœŸåˆ¤æ–­ä¸€ä¸ªç±»å‹æ˜¯å¦ä¸ºæŒ‡é’ˆç±»å‹ã€‚"><a href="#ç»ƒä¹ -5ï¼šç¼–å†™æ¨¡æ¿å…ƒç¼–ç¨‹ç»“æ„-IsPointer-ç”¨äºåœ¨ç¼–è¯‘æœŸåˆ¤æ–­ä¸€ä¸ªç±»å‹æ˜¯å¦ä¸ºæŒ‡é’ˆç±»å‹ã€‚" class="headerlink" title="ç»ƒä¹  5ï¼šç¼–å†™æ¨¡æ¿å…ƒç¼–ç¨‹ç»“æ„ IsPointer, ç”¨äºåœ¨ç¼–è¯‘æœŸåˆ¤æ–­ä¸€ä¸ªç±»å‹æ˜¯å¦ä¸ºæŒ‡é’ˆç±»å‹ã€‚"></a>ç»ƒä¹  5ï¼šç¼–å†™æ¨¡æ¿å…ƒç¼–ç¨‹ç»“æ„ IsPointer, ç”¨äºåœ¨ç¼–è¯‘æœŸåˆ¤æ–­ä¸€ä¸ªç±»å‹æ˜¯å¦ä¸ºæŒ‡é’ˆç±»å‹ã€‚</h3><p><strong>è¦æ±‚ï¼š</strong></p><ul><li>å®šä¹‰ <code>IsPointer&lt;T&gt;</code>ï¼ŒåŒ…å« value é™æ€å¸¸é‡æˆå‘˜ï¼Œå€¼ä¸º true æˆ– falseã€‚</li><li>ä½¿ç”¨ç‰¹åŒ–è¿›è¡Œå®ç°ã€‚</li><li>åœ¨ main ä¸­ä½¿ç”¨ static_assert è¿›è¡Œæµ‹è¯•ã€‚</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">static_assert</span>(IsPointer&lt;<span class="type">int</span>*&gt;::value, <span class="string">&quot;int* should be a pointer&quot;</span>);</span><br><span class="line"><span class="built_in">static_assert</span>(!IsPointer&lt;<span class="type">int</span>&gt;::value, <span class="string">&quot;int should not be a pointer&quot;</span>);</span><br></pre></td></tr></table></figure><h3 id="ç»ƒä¹ -6ï¼šä½¿ç”¨-SFINAEï¼Œç¼–å†™ä¸€ä¸ªå‡½æ•°æ¨¡æ¿-enableIfExampleï¼Œåªæœ‰å½“ç±»å‹-T-å…·æœ‰-size-æˆå‘˜å‡½æ•°æ—¶æ‰å¯ç”¨ã€‚"><a href="#ç»ƒä¹ -6ï¼šä½¿ç”¨-SFINAEï¼Œç¼–å†™ä¸€ä¸ªå‡½æ•°æ¨¡æ¿-enableIfExampleï¼Œåªæœ‰å½“ç±»å‹-T-å…·æœ‰-size-æˆå‘˜å‡½æ•°æ—¶æ‰å¯ç”¨ã€‚" class="headerlink" title="ç»ƒä¹  6ï¼šä½¿ç”¨ SFINAEï¼Œç¼–å†™ä¸€ä¸ªå‡½æ•°æ¨¡æ¿ enableIfExampleï¼Œåªæœ‰å½“ç±»å‹ T å…·æœ‰ size() æˆå‘˜å‡½æ•°æ—¶æ‰å¯ç”¨ã€‚"></a>ç»ƒä¹  6ï¼šä½¿ç”¨ SFINAEï¼Œç¼–å†™ä¸€ä¸ªå‡½æ•°æ¨¡æ¿ enableIfExampleï¼Œåªæœ‰å½“ç±»å‹ T å…·æœ‰ size() æˆå‘˜å‡½æ•°æ—¶æ‰å¯ç”¨ã€‚</h3><p><strong>è¦æ±‚ï¼š</strong></p><ul><li>ä½¿ç”¨ std::enable_if å’Œç±»å‹ç‰¹æ€§æ£€æµ‹ size() æˆå‘˜ã€‚</li><li>åœ¨ main ä¸­æµ‹è¯• std::vector<int>ï¼ˆåº”å¯ç”¨ï¼‰å’Œ intï¼ˆä¸åº”å¯ç”¨ï¼‰ã€‚</li></ul><p><strong>æç¤ºï¼š</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">typename</span> std::enable_if&lt;has_size&lt;T&gt;::value&gt;::<span class="function">type</span></span><br><span class="line"><span class="function"><span class="title">enableIfExample</span><span class="params">(<span class="type">const</span> T&amp; container)</span> </span>&#123;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Size: &quot;</span> &lt;&lt; container.<span class="built_in">size</span>() &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç»ƒä¹ -7ï¼šä½¿ç”¨-C-20-Conceptsï¼Œå®šä¹‰ä¸€ä¸ª-Concept-Integralï¼Œè¦æ±‚ç±»å‹å¿…é¡»æ˜¯æ•´å‹ï¼Œå¹¶ä½¿ç”¨è¯¥-Concept-çº¦æŸä¸€ä¸ªå‡½æ•°æ¨¡æ¿-isEvenï¼Œåˆ¤æ–­ä¼ å…¥çš„æ•´æ•°æ˜¯å¦ä¸ºå¶æ•°ã€‚"><a href="#ç»ƒä¹ -7ï¼šä½¿ç”¨-C-20-Conceptsï¼Œå®šä¹‰ä¸€ä¸ª-Concept-Integralï¼Œè¦æ±‚ç±»å‹å¿…é¡»æ˜¯æ•´å‹ï¼Œå¹¶ä½¿ç”¨è¯¥-Concept-çº¦æŸä¸€ä¸ªå‡½æ•°æ¨¡æ¿-isEvenï¼Œåˆ¤æ–­ä¼ å…¥çš„æ•´æ•°æ˜¯å¦ä¸ºå¶æ•°ã€‚" class="headerlink" title="ç»ƒä¹  7ï¼šä½¿ç”¨ C++20 Conceptsï¼Œå®šä¹‰ä¸€ä¸ª Concept Integralï¼Œè¦æ±‚ç±»å‹å¿…é¡»æ˜¯æ•´å‹ï¼Œå¹¶ä½¿ç”¨è¯¥ Concept çº¦æŸä¸€ä¸ªå‡½æ•°æ¨¡æ¿ isEvenï¼Œåˆ¤æ–­ä¼ å…¥çš„æ•´æ•°æ˜¯å¦ä¸ºå¶æ•°ã€‚"></a>ç»ƒä¹  7ï¼šä½¿ç”¨ C++20 Conceptsï¼Œå®šä¹‰ä¸€ä¸ª Concept Integralï¼Œè¦æ±‚ç±»å‹å¿…é¡»æ˜¯æ•´å‹ï¼Œå¹¶ä½¿ç”¨è¯¥ Concept çº¦æŸä¸€ä¸ªå‡½æ•°æ¨¡æ¿ isEvenï¼Œåˆ¤æ–­ä¼ å…¥çš„æ•´æ•°æ˜¯å¦ä¸ºå¶æ•°ã€‚</h3><p><strong>è¦æ±‚ï¼š</strong></p><ul><li>å®šä¹‰ Integral Conceptã€‚</li><li>ç¼–å†™å‡½æ•°æ¨¡æ¿ isEven(u)ï¼Œä»…æ¥å—æ»¡è¶³ Integral çš„ç±»å‹ã€‚</li><li>åœ¨ main ä¸­æµ‹è¯•ä¸åŒç±»å‹çš„è°ƒç”¨ã€‚</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;Integral T&gt;</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">isEven</span><span class="params">(T value)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> value % <span class="number">2</span> == <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç»ƒä¹ -8ï¼šå®ç°ä¸€ä¸ªå›ºå®šå¤§å°çš„æ ˆï¼ˆFixedStackï¼‰ç±»æ¨¡æ¿ï¼Œæ”¯æŒå¤šç§æ•°æ®ç±»å‹å’ŒæŒ‡å®šå¤§å°ã€‚ä½¿ç”¨éç±»å‹æ¨¡æ¿å‚æ•°æŒ‡å®šæ ˆçš„å¤§å°ã€‚"><a href="#ç»ƒä¹ -8ï¼šå®ç°ä¸€ä¸ªå›ºå®šå¤§å°çš„æ ˆï¼ˆFixedStackï¼‰ç±»æ¨¡æ¿ï¼Œæ”¯æŒå¤šç§æ•°æ®ç±»å‹å’ŒæŒ‡å®šå¤§å°ã€‚ä½¿ç”¨éç±»å‹æ¨¡æ¿å‚æ•°æŒ‡å®šæ ˆçš„å¤§å°ã€‚" class="headerlink" title="ç»ƒä¹  8ï¼šå®ç°ä¸€ä¸ªå›ºå®šå¤§å°çš„æ ˆï¼ˆFixedStackï¼‰ç±»æ¨¡æ¿ï¼Œæ”¯æŒå¤šç§æ•°æ®ç±»å‹å’ŒæŒ‡å®šå¤§å°ã€‚ä½¿ç”¨éç±»å‹æ¨¡æ¿å‚æ•°æŒ‡å®šæ ˆçš„å¤§å°ã€‚"></a>ç»ƒä¹  8ï¼šå®ç°ä¸€ä¸ªå›ºå®šå¤§å°çš„æ ˆï¼ˆFixedStackï¼‰ç±»æ¨¡æ¿ï¼Œæ”¯æŒå¤šç§æ•°æ®ç±»å‹å’ŒæŒ‡å®šå¤§å°ã€‚ä½¿ç”¨éç±»å‹æ¨¡æ¿å‚æ•°æŒ‡å®šæ ˆçš„å¤§å°ã€‚</h3><p><strong>è¦æ±‚ï¼š</strong></p><ul><li>æ¨¡æ¿å‚æ•°ä¸ºç±»å‹ T å’Œ std::size_t Nã€‚</li><li>æä¾› push, pop, top ç­‰æˆå‘˜å‡½æ•°ã€‚</li><li>åœ¨ main ä¸­æµ‹è¯• <code>FixedStack&lt;int, 5&gt;</code> å’Œ <code>FixedStack&lt;std::string, 3&gt;</code>ã€‚</li></ul><h3 id="ç»ƒä¹ -9ï¼šå®ç°ä¸€ä¸ªæ¨¡æ¿ç±»-TypeIdentityï¼Œå…¶æˆå‘˜ç±»å‹-type-ç­‰åŒäºæ¨¡æ¿å‚æ•°-Tã€‚å¹¶ä½¿ç”¨-static-assert-æ£€æŸ¥ç±»å‹å…³ç³»ã€‚"><a href="#ç»ƒä¹ -9ï¼šå®ç°ä¸€ä¸ªæ¨¡æ¿ç±»-TypeIdentityï¼Œå…¶æˆå‘˜ç±»å‹-type-ç­‰åŒäºæ¨¡æ¿å‚æ•°-Tã€‚å¹¶ä½¿ç”¨-static-assert-æ£€æŸ¥ç±»å‹å…³ç³»ã€‚" class="headerlink" title="ç»ƒä¹  9ï¼šå®ç°ä¸€ä¸ªæ¨¡æ¿ç±» TypeIdentityï¼Œå…¶æˆå‘˜ç±»å‹ type ç­‰åŒäºæ¨¡æ¿å‚æ•° Tã€‚å¹¶ä½¿ç”¨ static_assert æ£€æŸ¥ç±»å‹å…³ç³»ã€‚"></a>ç»ƒä¹  9ï¼šå®ç°ä¸€ä¸ªæ¨¡æ¿ç±» TypeIdentityï¼Œå…¶æˆå‘˜ç±»å‹ type ç­‰åŒäºæ¨¡æ¿å‚æ•° Tã€‚å¹¶ä½¿ç”¨ static_assert æ£€æŸ¥ç±»å‹å…³ç³»ã€‚</h3><p><strong>è¦æ±‚ï¼š</strong></p><ul><li>å®šä¹‰ <code>TypeIdentity&lt;T&gt;</code>ï¼ŒåŒ…å«ç±»å‹æˆå‘˜ typeã€‚</li><li>ä½¿ç”¨ std::is_same ä¸ static_assert éªŒè¯ã€‚</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">static_assert</span>(std::is_same&lt;TypeIdentity&lt;<span class="type">int</span>&gt;::type, <span class="type">int</span>&gt;::value, <span class="string">&quot;TypeIdentity&lt;int&gt; should be int&quot;</span>);</span><br></pre></td></tr></table></figure><h3 id="ç»ƒä¹ -10ï¼šç¼–å†™ä¸€ä¸ªæ¨¡æ¿å…ƒç¼–ç¨‹ç»“æ„-LengthOf-ç”¨äºåœ¨ç¼–è¯‘æœŸè®¡ç®—ç±»å‹åˆ—è¡¨çš„é•¿åº¦ã€‚"><a href="#ç»ƒä¹ -10ï¼šç¼–å†™ä¸€ä¸ªæ¨¡æ¿å…ƒç¼–ç¨‹ç»“æ„-LengthOf-ç”¨äºåœ¨ç¼–è¯‘æœŸè®¡ç®—ç±»å‹åˆ—è¡¨çš„é•¿åº¦ã€‚" class="headerlink" title="ç»ƒä¹  10ï¼šç¼–å†™ä¸€ä¸ªæ¨¡æ¿å…ƒç¼–ç¨‹ç»“æ„ LengthOf, ç”¨äºåœ¨ç¼–è¯‘æœŸè®¡ç®—ç±»å‹åˆ—è¡¨çš„é•¿åº¦ã€‚"></a>ç»ƒä¹  10ï¼šç¼–å†™ä¸€ä¸ªæ¨¡æ¿å…ƒç¼–ç¨‹ç»“æ„ LengthOf, ç”¨äºåœ¨ç¼–è¯‘æœŸè®¡ç®—ç±»å‹åˆ—è¡¨çš„é•¿åº¦ã€‚</h3><p><strong>è¦æ±‚ï¼š</strong></p><ul><li>ä½¿ç”¨ TypeList æ¨¡æ¿å®šä¹‰ç±»å‹åˆ—è¡¨ã€‚</li><li>å®šä¹‰ <code>LengthOf&lt;TypeList&lt;...&gt;&gt;::value</code> è¡¨ç¤ºç±»å‹åˆ—è¡¨çš„é•¿åº¦ã€‚</li><li>åœ¨ main ä¸­ä½¿ç”¨ static_assert è¿›è¡Œæµ‹è¯•ã€‚</li></ul><p><strong>æç¤ºï¼š</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span>... Types&gt;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">TypeList</span> &#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> List&gt;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">LengthOf</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span>... Types&gt;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">LengthOf</span>&lt;TypeList&lt;Types...&gt;&gt; &#123;</span><br><span class="line">    <span class="type">static</span> <span class="keyword">constexpr</span> std::<span class="type">size_t</span> value = <span class="keyword">sizeof</span>...(Types);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>é€šè¿‡ä¸Šè¿°å†…å®¹åŠç»ƒä¹ ï¼Œç›¸ä¿¡æ‚¨å·²å…¨é¢æŒæ¡äº† C++ æ¨¡æ¿çš„å„ä¸ªæ–¹é¢ã€‚ä»åŸºç¡€æ¦‚å¿µåˆ°é«˜çº§æŠ€æœ¯ï¼Œæ¨¡æ¿ä¸º C++ ç¼–ç¨‹æä¾›äº†å¼ºå¤§çš„å·¥å…·ã€‚æŒç»­ç»ƒä¹ ä¸åº”ç”¨ï¼Œå°†è¿›ä¸€æ­¥å·©å›ºæ‚¨çš„æ¨¡æ¿ç¼–ç¨‹èƒ½åŠ›ã€‚</p>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;æ¨¡æ¿è¯¦è§£&quot;&gt;&lt;a href=&quot;#æ¨¡æ¿è¯¦è§£&quot; class=&quot;headerlink&quot; title=&quot;æ¨¡æ¿è¯¦è§£&quot;&gt;&lt;/a&gt;æ¨¡æ¿è¯¦è§£&lt;/h1&gt;&lt;h2 id=&quot;æ¨¡æ¿åŸºç¡€&quot;&gt;&lt;a href=&quot;#æ¨¡æ¿åŸºç¡€&quot; class=&quot;headerlink&quot; title=&quot;æ¨¡æ¿åŸºç¡€&quot;&gt;&lt;/a&gt;æ¨¡æ¿åŸºç¡€&lt;/h2&gt;&lt;p&gt;C++ æ¨¡æ¿ï¼ˆTemplatesï¼‰æ˜¯ç°ä»£ C++ ä¸­å¼ºå¤§è€Œçµæ´»çš„ç‰¹æ€§ï¼Œæ”¯æŒæ³›å‹ç¼–ç¨‹ï¼Œä½¿å¾—ä»£ç æ›´å…·å¤ç”¨æ€§å’Œç±»å‹å®‰å…¨æ€§ã€‚æ¨¡æ¿ä¸ä»…åŒ…æ‹¬åŸºæœ¬çš„å‡½æ•°æ¨¡æ¿å’Œç±»æ¨¡æ¿ï¼Œè¿˜æ¶µç›–äº†æ¨¡æ¿ç‰¹åŒ–ï¼ˆå…¨ç‰¹åŒ–ä¸åç‰¹åŒ–ï¼‰ã€æ¨¡æ¿å‚æ•°ç§ç±»ã€å˜å‚æ¨¡æ¿ï¼ˆVariadic Templatesï¼‰ã€æ¨¡æ¿å…ƒç¼–ç¨‹ï¼ˆTemplate Metaprogrammingï¼‰ã€SFINAEï¼ˆSubstitution Failure Is Not An Errorï¼‰ç­‰é«˜çº§å†…å®¹ã€‚&lt;/p&gt;</summary>
    
    
    
    
  </entry>
  
  <entry>
    <title>C++ æ™ºèƒ½æŒ‡é’ˆè¯¦è§£ï¼šshared_ptr, auto_ptr å’Œ weak_ptr</title>
    <link href="https://lyroom.github.io/2025/09/23/C-%E6%99%BA%E8%83%BD%E6%8C%87%E9%92%88%E8%AF%A6%E8%A7%A3%EF%BC%9Ashared-ptr-auto-ptr-%E5%92%8C-weak-ptr/"/>
    <id>https://lyroom.github.io/2025/09/23/C-%E6%99%BA%E8%83%BD%E6%8C%87%E9%92%88%E8%AF%A6%E8%A7%A3%EF%BC%9Ashared-ptr-auto-ptr-%E5%92%8C-weak-ptr/</id>
    <published>2025-09-23T02:44:23.000Z</published>
    <updated>2025-09-23T02:44:23.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="C-æ™ºèƒ½æŒ‡é’ˆè¯¦è§£ï¼šshared-ptr-auto-ptr-å’Œ-weak-ptr"><a href="#C-æ™ºèƒ½æŒ‡é’ˆè¯¦è§£ï¼šshared-ptr-auto-ptr-å’Œ-weak-ptr" class="headerlink" title="C++ æ™ºèƒ½æŒ‡é’ˆè¯¦è§£ï¼šshared_ptr, auto_ptr å’Œ weak_ptr"></a>C++ æ™ºèƒ½æŒ‡é’ˆè¯¦è§£ï¼šshared_ptr, auto_ptr å’Œ weak_ptr</h1><h2 id="1-shared-ptrï¼šå…±äº«æ‰€æœ‰æƒæ™ºèƒ½æŒ‡é’ˆ"><a href="#1-shared-ptrï¼šå…±äº«æ‰€æœ‰æƒæ™ºèƒ½æŒ‡é’ˆ" class="headerlink" title="1. shared_ptrï¼šå…±äº«æ‰€æœ‰æƒæ™ºèƒ½æŒ‡é’ˆ"></a>1. shared_ptrï¼šå…±äº«æ‰€æœ‰æƒæ™ºèƒ½æŒ‡é’ˆ</h2><h3 id="1-1-æ ¸å¿ƒæ¦‚å¿µä¸å®šä¹‰"><a href="#1-1-æ ¸å¿ƒæ¦‚å¿µä¸å®šä¹‰" class="headerlink" title="1.1 æ ¸å¿ƒæ¦‚å¿µä¸å®šä¹‰"></a>1.1 æ ¸å¿ƒæ¦‚å¿µä¸å®šä¹‰</h3><h4 id="1-1-1-ä»€ä¹ˆæ˜¯-shared-ptr"><a href="#1-1-1-ä»€ä¹ˆæ˜¯-shared-ptr" class="headerlink" title="1.1.1 ä»€ä¹ˆæ˜¯ shared_ptr"></a>1.1.1 ä»€ä¹ˆæ˜¯ shared_ptr</h4><p><code>std::shared_ptr</code> æ˜¯ C++11 å¼•å…¥çš„å…±äº«æ‰€æœ‰æƒæ™ºèƒ½æŒ‡é’ˆï¼Œå®ƒé€šè¿‡<strong>å¼•ç”¨è®¡æ•°ï¼ˆReference Countingï¼‰</strong> æœºåˆ¶å®ç°å¤šä¸ªæ™ºèƒ½æŒ‡é’ˆå…±äº«åŒä¸€ä¸ªå¯¹è±¡çš„æ‰€æœ‰æƒã€‚ä¸ <code>unique_ptr</code> çš„ç‹¬å æ‰€æœ‰æƒä¸åŒï¼Œ<code>shared_ptr</code> å…è®¸å¤šä¸ªæŒ‡é’ˆå®ä¾‹å…±åŒç®¡ç†åŒä¸€ä¸ªåŠ¨æ€åˆ†é…çš„å¯¹è±¡ã€‚</p><span id="more"></span>                           <p>&#x3D;ã€ã€ã€ã€ã€ã€ã€ã€ã€ã€ã€ã€ã€ã€ã€ã€ã€ã€ã€ã€ã€ã€ã€ã€ã€ã€ã€ã€ã€ã€ã€ã€ã€ã€ã€ã€ã€<br>å½“æœ€åä¸€ä¸ªæŒ‡å‘å¯¹è±¡çš„ <code>shared_ptr</code> è¢«é”€æ¯æˆ–é‡ç½®æ—¶ï¼Œå¯¹è±¡æ‰ä¼šè¢«è‡ªåŠ¨åˆ é™¤ã€‚è¿™ç§æœºåˆ¶ä½¿å¾— <code>shared_ptr</code> åœ¨éœ€è¦å…±äº«èµ„æºçš„åœºæ™¯ä¸‹éå¸¸æœ‰ç”¨ã€‚</p><h4 id="1-1-2-å…±äº«æ‰€æœ‰æƒè¯­ä¹‰"><a href="#1-1-2-å…±äº«æ‰€æœ‰æƒè¯­ä¹‰" class="headerlink" title="1.1.2 å…±äº«æ‰€æœ‰æƒè¯­ä¹‰"></a>1.1.2 å…±äº«æ‰€æœ‰æƒè¯­ä¹‰</h4><p><code>shared_ptr</code> çš„æ ¸å¿ƒæ˜¯å…±äº«æ‰€æœ‰æƒæ¨¡å‹ã€‚å¤šä¸ª <code>shared_ptr</code> å®ä¾‹å¯ä»¥æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡ï¼Œå®ƒä»¬é€šè¿‡å†…éƒ¨çš„å¼•ç”¨è®¡æ•°å™¨æ¥è·Ÿè¸ªæœ‰å¤šå°‘ä¸ª <code>shared_ptr</code> æ­£åœ¨å…±äº«è¯¥å¯¹è±¡ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">std::shared_ptr&lt;<span class="type">int</span>&gt; <span class="title">ptr1</span><span class="params">(<span class="keyword">new</span> <span class="type">int</span>(<span class="number">42</span>))</span></span>;</span><br><span class="line">std::shared_ptr&lt;<span class="type">int</span>&gt; ptr2 = ptr1; <span class="comment">// å¼•ç”¨è®¡æ•°å˜ä¸º 2</span></span><br><span class="line">std::shared_ptr&lt;<span class="type">int</span>&gt; ptr3 = ptr2; <span class="comment">// å¼•ç”¨è®¡æ•°å˜ä¸º 3</span></span><br><span class="line"><span class="comment">// å½“ ptr1, ptr2, ptr3 éƒ½è¢«é”€æ¯æ—¶ï¼Œå¯¹è±¡æ‰ä¼šè¢«åˆ é™¤</span></span><br></pre></td></tr></table></figure><h4 id="1-1-3-å¼•ç”¨è®¡æ•°æœºåˆ¶"><a href="#1-1-3-å¼•ç”¨è®¡æ•°æœºåˆ¶" class="headerlink" title="1.1.3 å¼•ç”¨è®¡æ•°æœºåˆ¶"></a>1.1.3 å¼•ç”¨è®¡æ•°æœºåˆ¶</h4><p>å¼•ç”¨è®¡æ•°æ˜¯ <code>shared_ptr</code> çš„æ ¸å¿ƒå®ç°æœºåˆ¶ï¼š</p><ul><li>å½“æ–°çš„ <code>shared_ptr</code> æŒ‡å‘ç°æœ‰å¯¹è±¡æ—¶ï¼Œå¼•ç”¨è®¡æ•°å¢åŠ </li><li>å½“ <code>shared_ptr</code> è¢«é”€æ¯æˆ–æŒ‡å‘æ–°å¯¹è±¡æ—¶ï¼Œå¼•ç”¨è®¡æ•°å‡å°‘</li><li>å½“å¼•ç”¨è®¡æ•°é™ä¸º 0 æ—¶ï¼Œå¯¹è±¡è¢«è‡ªåŠ¨åˆ é™¤</li></ul><h3 id="1-2-å†…éƒ¨å®ç°ä¸æ§åˆ¶å—"><a href="#1-2-å†…éƒ¨å®ç°ä¸æ§åˆ¶å—" class="headerlink" title="1.2 å†…éƒ¨å®ç°ä¸æ§åˆ¶å—"></a>1.2 å†…éƒ¨å®ç°ä¸æ§åˆ¶å—</h3><h4 id="1-2-1-æ§åˆ¶å—ï¼ˆControl-Blockï¼‰ç»“æ„"><a href="#1-2-1-æ§åˆ¶å—ï¼ˆControl-Blockï¼‰ç»“æ„" class="headerlink" title="1.2.1 æ§åˆ¶å—ï¼ˆControl Blockï¼‰ç»“æ„"></a>1.2.1 æ§åˆ¶å—ï¼ˆControl Blockï¼‰ç»“æ„</h4><p><code>shared_ptr</code> çš„å†…éƒ¨å®ç°æ¯” <code>unique_ptr</code> å¤æ‚ï¼Œå®ƒåŒ…å«ä¸¤ä¸ªæŒ‡é’ˆï¼š</p><ol><li><strong>æŒ‡å‘ç®¡ç†å¯¹è±¡çš„æŒ‡é’ˆ</strong></li><li><strong>æŒ‡å‘æ§åˆ¶å—çš„æŒ‡é’ˆ</strong></li></ol><p>æ§åˆ¶å—åŒ…å«ï¼š</p><ul><li>å¼•ç”¨è®¡æ•°å™¨ï¼ˆuse countï¼‰</li><li>å¼±å¼•ç”¨è®¡æ•°å™¨ï¼ˆweak countï¼‰</li><li>åˆ é™¤å™¨ï¼ˆdeleterï¼‰</li><li>åˆ†é…å™¨ï¼ˆallocatorï¼‰</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">control_block</span> &#123;</span><br><span class="line">    std::atomic&lt;<span class="type">long</span>&gt; use_count;</span><br><span class="line">    std::atomic&lt;<span class="type">long</span>&gt; weak_count;</span><br><span class="line">    <span class="built_in">void</span>(*deleter)(T*);</span><br><span class="line">    T* managed_object;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h4 id="1-2-2-å¼•ç”¨è®¡æ•°çš„åŸå­æ“ä½œ"><a href="#1-2-2-å¼•ç”¨è®¡æ•°çš„åŸå­æ“ä½œ" class="headerlink" title="1.2.2 å¼•ç”¨è®¡æ•°çš„åŸå­æ“ä½œ"></a>1.2.2 å¼•ç”¨è®¡æ•°çš„åŸå­æ“ä½œ</h4><p>ä¸ºäº†ä¿è¯çº¿ç¨‹å®‰å…¨ï¼Œ<code>shared_ptr</code> çš„å¼•ç”¨è®¡æ•°æ“ä½œå¿…é¡»æ˜¯åŸå­çš„ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¿‘ä¼¼å®ç°</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">increment_ref_count</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    use_count.<span class="built_in">fetch_add</span>(<span class="number">1</span>, std::memory_order_relaxed);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">decrement_ref_count</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (use_count.<span class="built_in">fetch_sub</span>(<span class="number">1</span>, std::memory_order_acq_rel) == <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="comment">// æœ€åä¸€ä¸ª shared_ptrï¼Œåˆ é™¤å¯¹è±¡</span></span><br><span class="line">        <span class="built_in">deleter</span>(managed_object);</span><br><span class="line">        <span class="comment">// å¦‚æœ weak_count ä¹Ÿä¸º 0ï¼Œåˆ é™¤æ§åˆ¶å—</span></span><br><span class="line">        <span class="keyword">if</span> (weak_count.<span class="built_in">load</span>() == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">delete</span> <span class="keyword">this</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="1-3-å¸¸ç”¨æ¥å£ä¸ç”¨æ³•"><a href="#1-3-å¸¸ç”¨æ¥å£ä¸ç”¨æ³•" class="headerlink" title="1.3 å¸¸ç”¨æ¥å£ä¸ç”¨æ³•"></a>1.3 å¸¸ç”¨æ¥å£ä¸ç”¨æ³•</h3><h4 id="1-3-1-æ„é€ ä¸ææ„"><a href="#1-3-1-æ„é€ ä¸ææ„" class="headerlink" title="1.3.1 æ„é€ ä¸ææ„"></a>1.3.1 æ„é€ ä¸ææ„</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¤šç§æ„é€ æ–¹å¼</span></span><br><span class="line"><span class="function">std::shared_ptr&lt;<span class="type">int</span>&gt; <span class="title">p1</span><span class="params">(<span class="keyword">new</span> <span class="type">int</span>(<span class="number">42</span>))</span></span>;</span><br><span class="line">std::shared_ptr&lt;<span class="type">int</span>&gt; p2 = std::<span class="built_in">make_shared</span>&lt;<span class="type">int</span>&gt;(<span class="number">42</span>); <span class="comment">// æ¨èæ–¹å¼</span></span><br><span class="line">std::shared_ptr&lt;<span class="type">int</span>&gt; p3 = p1; <span class="comment">// æ‹·è´æ„é€ ï¼Œå¼•ç”¨è®¡æ•°+1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è‡ªå®šä¹‰åˆ é™¤å™¨</span></span><br><span class="line"><span class="keyword">auto</span> deleter = [](<span class="type">int</span>* p) &#123; </span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Deleting int\n&quot;</span>; </span><br><span class="line">    <span class="keyword">delete</span> p; </span><br><span class="line">&#125;;</span><br><span class="line"><span class="function">std::shared_ptr&lt;<span class="type">int</span>&gt; <span class="title">p4</span><span class="params">(<span class="keyword">new</span> <span class="type">int</span>(<span class="number">42</span>), deleter)</span></span>;</span><br></pre></td></tr></table></figure><h4 id="1-3-2-æ‰€æœ‰æƒç®¡ç†æ¥å£"><a href="#1-3-2-æ‰€æœ‰æƒç®¡ç†æ¥å£" class="headerlink" title="1.3.2 æ‰€æœ‰æƒç®¡ç†æ¥å£"></a>1.3.2 æ‰€æœ‰æƒç®¡ç†æ¥å£</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">std::shared_ptr&lt;MyClass&gt; ptr = std::<span class="built_in">make_shared</span>&lt;MyClass&gt;();</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–åŸå§‹æŒ‡é’ˆï¼ˆä¸å¢åŠ å¼•ç”¨è®¡æ•°ï¼‰</span></span><br><span class="line">MyClass* raw_ptr = ptr.<span class="built_in">get</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// é‡ç½®æŒ‡é’ˆ</span></span><br><span class="line">ptr.<span class="built_in">reset</span>(<span class="keyword">new</span> <span class="built_in">MyClass</span>()); <span class="comment">// åŸå¯¹è±¡å¼•ç”¨è®¡æ•°-1ï¼Œç®¡ç†æ–°å¯¹è±¡</span></span><br><span class="line">ptr.<span class="built_in">reset</span>(); <span class="comment">// å˜ä¸ºç©ºæŒ‡é’ˆ</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// äº¤æ¢ä¸¤ä¸ª shared_ptr</span></span><br><span class="line">std::shared_ptr&lt;MyClass&gt; ptr2 = std::<span class="built_in">make_shared</span>&lt;MyClass&gt;();</span><br><span class="line">ptr.<span class="built_in">swap</span>(ptr2);</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–å¼•ç”¨è®¡æ•°</span></span><br><span class="line"><span class="type">long</span> count = ptr.<span class="built_in">use_count</span>(); <span class="comment">// æ³¨æ„ï¼šå¤šçº¿ç¨‹ç¯å¢ƒä¸‹ä»…ä¾›å‚è€ƒ</span></span><br></pre></td></tr></table></figure><h4 id="1-3-3-æ“ä½œç¬¦é‡è½½"><a href="#1-3-3-æ“ä½œç¬¦é‡è½½" class="headerlink" title="1.3.3 æ“ä½œç¬¦é‡è½½"></a>1.3.3 æ“ä½œç¬¦é‡è½½</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">std::shared_ptr&lt;MyClass&gt; ptr = std::<span class="built_in">make_shared</span>&lt;MyClass&gt;();</span><br><span class="line"></span><br><span class="line"><span class="comment">// è§£å¼•ç”¨æ“ä½œ</span></span><br><span class="line">(*ptr).<span class="built_in">member_function</span>();</span><br><span class="line">ptr-&gt;<span class="built_in">member_function</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¸ƒå°”è½¬æ¢</span></span><br><span class="line"><span class="keyword">if</span> (ptr) &#123;</span><br><span class="line">    <span class="comment">// ptr ä¸ä¸ºç©º</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¯”è¾ƒæ“ä½œ</span></span><br><span class="line"><span class="keyword">if</span> (ptr == ptr2) &#123;</span><br><span class="line">    <span class="comment">// æŒ‡å‘åŒä¸€å¯¹è±¡</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="1-4-æ€§èƒ½ç‰¹ç‚¹ä¸å¼€é”€"><a href="#1-4-æ€§èƒ½ç‰¹ç‚¹ä¸å¼€é”€" class="headerlink" title="1.4 æ€§èƒ½ç‰¹ç‚¹ä¸å¼€é”€"></a>1.4 æ€§èƒ½ç‰¹ç‚¹ä¸å¼€é”€</h3><h4 id="1-4-1-å†…å­˜å¼€é”€"><a href="#1-4-1-å†…å­˜å¼€é”€" class="headerlink" title="1.4.1 å†…å­˜å¼€é”€"></a>1.4.1 å†…å­˜å¼€é”€</h4><ul><li><strong>æ§åˆ¶å—å¼€é”€</strong>ï¼šæ¯ä¸ªè¢«ç®¡ç†çš„å¯¹è±¡éƒ½æœ‰ä¸€ä¸ªæ§åˆ¶å—</li><li><strong>æŒ‡é’ˆå¼€é”€</strong>ï¼š<code>shared_ptr</code> æœ¬èº«åŒ…å«ä¸¤ä¸ªæŒ‡é’ˆï¼ˆå¯¹è±¡æŒ‡é’ˆå’Œæ§åˆ¶å—æŒ‡é’ˆï¼‰</li><li><strong>æ€»å¤§å°</strong>ï¼šé€šå¸¸æ˜¯åŸå§‹æŒ‡é’ˆçš„ä¸¤å€å¤§å°</li></ul><h4 id="1-4-2-è¿è¡Œæ—¶å¼€é”€"><a href="#1-4-2-è¿è¡Œæ—¶å¼€é”€" class="headerlink" title="1.4.2 è¿è¡Œæ—¶å¼€é”€"></a>1.4.2 è¿è¡Œæ—¶å¼€é”€</h4><ul><li><strong>åŸå­æ“ä½œ</strong>ï¼šå¼•ç”¨è®¡æ•°çš„å¢å‡éœ€è¦åŸå­æ“ä½œï¼Œæœ‰æ€§èƒ½å¼€é”€</li><li><strong>æ§åˆ¶å—åˆ†é…</strong>ï¼šéœ€è¦é¢å¤–çš„å†…å­˜åˆ†é…ï¼ˆé™¤éä½¿ç”¨ <code>make_shared</code>ï¼‰</li></ul><h4 id="1-4-3-make-shared-çš„ä¼˜åŠ¿"><a href="#1-4-3-make-shared-çš„ä¼˜åŠ¿" class="headerlink" title="1.4.3 make_shared çš„ä¼˜åŠ¿"></a>1.4.3 make_shared çš„ä¼˜åŠ¿</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¼ ç»Ÿæ–¹å¼ï¼šä¸¤æ¬¡å†…å­˜åˆ†é…ï¼ˆå¯¹è±¡ + æ§åˆ¶å—ï¼‰</span></span><br><span class="line"><span class="function">std::shared_ptr&lt;MyClass&gt; <span class="title">p1</span><span class="params">(<span class="keyword">new</span> MyClass())</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// make_sharedï¼šä¸€æ¬¡å†…å­˜åˆ†é…ï¼ˆå¯¹è±¡å’Œæ§åˆ¶å—åœ¨ä¸€èµ·ï¼‰</span></span><br><span class="line">std::shared_ptr&lt;MyClass&gt; p2 = std::<span class="built_in">make_shared</span>&lt;MyClass&gt;();</span><br></pre></td></tr></table></figure><p><code>make_shared</code> å°†å¯¹è±¡å’Œæ§åˆ¶å—åˆ†é…åœ¨è¿ç»­å†…å­˜ä¸­ï¼Œæé«˜äº†ç¼“å­˜å±€éƒ¨æ€§å¹¶å‡å°‘äº†ä¸€æ¬¡å†…å­˜åˆ†é…ã€‚</p><h3 id="1-5-å®é™…åº”ç”¨åœºæ™¯"><a href="#1-5-å®é™…åº”ç”¨åœºæ™¯" class="headerlink" title="1.5 å®é™…åº”ç”¨åœºæ™¯"></a>1.5 å®é™…åº”ç”¨åœºæ™¯</h3><h4 id="1-5-1-å…±äº«èµ„æºç®¡ç†"><a href="#1-5-1-å…±äº«èµ„æºç®¡ç†" class="headerlink" title="1.5.1 å…±äº«èµ„æºç®¡ç†"></a>1.5.1 å…±äº«èµ„æºç®¡ç†</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Resource</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">use</span><span class="params">()</span> </span>&#123; std::cout &lt;&lt; <span class="string">&quot;Using resource\n&quot;</span>; &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    std::shared_ptr&lt;Resource&gt; resource_;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">User</span>(std::shared_ptr&lt;Resource&gt; res) : <span class="built_in">resource_</span>(res) &#123;&#125;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">doWork</span><span class="params">()</span> </span>&#123; resource_-&gt;<span class="built_in">use</span>(); &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¤šä¸ªç”¨æˆ·å…±äº«åŒä¸€èµ„æº</span></span><br><span class="line"><span class="keyword">auto</span> resource = std::<span class="built_in">make_shared</span>&lt;Resource&gt;();</span><br><span class="line"><span class="function">User <span class="title">user1</span><span class="params">(resource)</span></span>;</span><br><span class="line"><span class="function">User <span class="title">user2</span><span class="params">(resource)</span></span>; <span class="comment">// å…±äº«åŒä¸€èµ„æº</span></span><br></pre></td></tr></table></figure><h4 id="1-5-2-ç¼“å­˜ç³»ç»Ÿ"><a href="#1-5-2-ç¼“å­˜ç³»ç»Ÿ" class="headerlink" title="1.5.2 ç¼“å­˜ç³»ç»Ÿ"></a>1.5.2 ç¼“å­˜ç³»ç»Ÿ</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Cache</span> &#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    std::unordered_map&lt;std::string, std::shared_ptr&lt;Data&gt;&gt; cache_;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">std::shared_ptr&lt;Data&gt; <span class="title">get</span><span class="params">(<span class="type">const</span> std::string&amp; key)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">auto</span> it = cache_.<span class="built_in">find</span>(key);</span><br><span class="line">        <span class="keyword">if</span> (it != cache_.<span class="built_in">end</span>()) &#123;</span><br><span class="line">            <span class="keyword">return</span> it-&gt;second; <span class="comment">// è¿”å›å…±äº«æŒ‡é’ˆï¼Œå»¶é•¿ç”Ÿå‘½å‘¨æœŸ</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">nullptr</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">put</span><span class="params">(<span class="type">const</span> std::string&amp; key, std::shared_ptr&lt;Data&gt; data)</span> </span>&#123;</span><br><span class="line">        cache_[key] = data;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="2-weak-ptrï¼šå¼±å¼•ç”¨æ™ºèƒ½æŒ‡é’ˆ"><a href="#2-weak-ptrï¼šå¼±å¼•ç”¨æ™ºèƒ½æŒ‡é’ˆ" class="headerlink" title="2. weak_ptrï¼šå¼±å¼•ç”¨æ™ºèƒ½æŒ‡é’ˆ"></a>2. weak_ptrï¼šå¼±å¼•ç”¨æ™ºèƒ½æŒ‡é’ˆ</h2><h3 id="2-1-æ ¸å¿ƒæ¦‚å¿µä¸å®šä¹‰"><a href="#2-1-æ ¸å¿ƒæ¦‚å¿µä¸å®šä¹‰" class="headerlink" title="2.1 æ ¸å¿ƒæ¦‚å¿µä¸å®šä¹‰"></a>2.1 æ ¸å¿ƒæ¦‚å¿µä¸å®šä¹‰</h3><h4 id="2-1-1-ä»€ä¹ˆæ˜¯-weak-ptr"><a href="#2-1-1-ä»€ä¹ˆæ˜¯-weak-ptr" class="headerlink" title="2.1.1 ä»€ä¹ˆæ˜¯ weak_ptr"></a>2.1.1 ä»€ä¹ˆæ˜¯ weak_ptr</h4><p><code>std::weak_ptr</code> æ˜¯ä¸€ç§ä¸æ§åˆ¶å¯¹è±¡ç”Ÿå‘½å‘¨æœŸçš„æ™ºèƒ½æŒ‡é’ˆï¼Œå®ƒæ˜¯å¯¹ç”± <code>shared_ptr</code> ç®¡ç†çš„å¯¹è±¡çš„<strong>å¼±å¼•ç”¨</strong>ã€‚<code>weak_ptr</code> ä¸ä¼šå¢åŠ å¯¹è±¡çš„å¼•ç”¨è®¡æ•°ï¼Œå› æ­¤ä¸ä¼šé˜»æ­¢å¯¹è±¡çš„é”€æ¯ã€‚</p><h4 id="2-1-2-å¼±å¼•ç”¨è¯­ä¹‰"><a href="#2-1-2-å¼±å¼•ç”¨è¯­ä¹‰" class="headerlink" title="2.1.2 å¼±å¼•ç”¨è¯­ä¹‰"></a>2.1.2 å¼±å¼•ç”¨è¯­ä¹‰</h4><p><code>weak_ptr</code> çš„ä¸»è¦ç”¨é€”æ˜¯æ‰“ç ´ <code>shared_ptr</code> çš„å¾ªç¯å¼•ç”¨é—®é¢˜ã€‚å®ƒå…è®¸è§‚å¯Ÿä¸€ä¸ªå¯¹è±¡è€Œä¸å½±å“å…¶ç”Ÿå‘½å‘¨æœŸã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">std::shared_ptr&lt;MyClass&gt; shared = std::<span class="built_in">make_shared</span>&lt;MyClass&gt;();</span><br><span class="line">std::weak_ptr&lt;MyClass&gt; weak = shared; <span class="comment">// ä¸å¢åŠ å¼•ç”¨è®¡æ•°</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯¹è±¡å¯èƒ½å·²è¢«é”€æ¯ï¼Œéœ€è¦æ£€æŸ¥</span></span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">auto</span> locked = weak.<span class="built_in">lock</span>()) &#123;</span><br><span class="line">    <span class="comment">// å¯¹è±¡è¿˜å­˜åœ¨ï¼Œå¯ä»¥å®‰å…¨ä½¿ç”¨</span></span><br><span class="line">    locked-&gt;<span class="built_in">doSomething</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-2-å†…éƒ¨å®ç°æœºåˆ¶"><a href="#2-2-å†…éƒ¨å®ç°æœºåˆ¶" class="headerlink" title="2.2 å†…éƒ¨å®ç°æœºåˆ¶"></a>2.2 å†…éƒ¨å®ç°æœºåˆ¶</h3><h4 id="2-2-1-ä¸æ§åˆ¶å—çš„äº¤äº’"><a href="#2-2-1-ä¸æ§åˆ¶å—çš„äº¤äº’" class="headerlink" title="2.2.1 ä¸æ§åˆ¶å—çš„äº¤äº’"></a>2.2.1 ä¸æ§åˆ¶å—çš„äº¤äº’</h4><p><code>weak_ptr</code> å†…éƒ¨ä¹ŸåŒ…å«æŒ‡å‘æ§åˆ¶å—çš„æŒ‡é’ˆï¼Œä½†å®ƒåªæ“ä½œå¼±å¼•ç”¨è®¡æ•°ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">weak_ptr</span> &#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    T* ptr_;</span><br><span class="line">    control_block* cb_;</span><br><span class="line">    </span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">// æ„é€ æ—¶å¢åŠ å¼±å¼•ç”¨è®¡æ•°</span></span><br><span class="line">    <span class="built_in">weak_ptr</span>(<span class="type">const</span> shared_ptr&lt;T&gt;&amp; other) : <span class="built_in">ptr_</span>(other.ptr_), <span class="built_in">cb_</span>(other.cb_) &#123;</span><br><span class="line">        <span class="keyword">if</span> (cb_) cb_-&gt;weak_count.<span class="built_in">fetch_add</span>(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// ææ„æ—¶å‡å°‘å¼±å¼•ç”¨è®¡æ•°</span></span><br><span class="line">    ~<span class="built_in">weak_ptr</span>() &#123;</span><br><span class="line">        <span class="keyword">if</span> (cb_) &#123;</span><br><span class="line">            <span class="keyword">if</span> (cb_-&gt;weak_count.<span class="built_in">fetch_sub</span>(<span class="number">1</span>) == <span class="number">1</span>) &#123;</span><br><span class="line">                <span class="comment">// å¼±å¼•ç”¨è®¡æ•°ä¸º0ï¼Œä½†å¼ºå¼•ç”¨è®¡æ•°å¯èƒ½ä¸ä¸º0</span></span><br><span class="line">                <span class="keyword">if</span> (cb_-&gt;use_count.<span class="built_in">load</span>() == <span class="number">0</span>) &#123;</span><br><span class="line">                    <span class="keyword">delete</span> cb_; <span class="comment">// å¼ºå¼•ç”¨å’Œå¼±å¼•ç”¨éƒ½ä¸º0ï¼Œåˆ é™¤æ§åˆ¶å—</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="2-3-å¸¸ç”¨æ¥å£ä¸ç”¨æ³•"><a href="#2-3-å¸¸ç”¨æ¥å£ä¸ç”¨æ³•" class="headerlink" title="2.3 å¸¸ç”¨æ¥å£ä¸ç”¨æ³•"></a>2.3 å¸¸ç”¨æ¥å£ä¸ç”¨æ³•</h3><h4 id="2-3-1-åŸºæœ¬æ“ä½œ"><a href="#2-3-1-åŸºæœ¬æ“ä½œ" class="headerlink" title="2.3.1 åŸºæœ¬æ“ä½œ"></a>2.3.1 åŸºæœ¬æ“ä½œ</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">std::shared_ptr&lt;MyClass&gt; shared = std::<span class="built_in">make_shared</span>&lt;MyClass&gt;();</span><br><span class="line">std::weak_ptr&lt;MyClass&gt; weak = shared;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ£€æŸ¥å¯¹è±¡æ˜¯å¦è¿˜å­˜åœ¨</span></span><br><span class="line"><span class="keyword">if</span> (!weak.<span class="built_in">expired</span>()) &#123;</span><br><span class="line">    <span class="comment">// å°è¯•è·å– shared_ptr</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">auto</span> locked = weak.<span class="built_in">lock</span>()) &#123;</span><br><span class="line">        locked-&gt;<span class="built_in">doSomething</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç›´æ¥è·å– shared_ptrï¼ˆå¦‚æœå¯¹è±¡å·²é”€æ¯åˆ™è¿”å›ç©ºï¼‰</span></span><br><span class="line">std::shared_ptr&lt;MyClass&gt; locked = weak.<span class="built_in">lock</span>();</span><br><span class="line"><span class="keyword">if</span> (locked) &#123;</span><br><span class="line">    <span class="comment">// å®‰å…¨ä½¿ç”¨</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="2-3-2-è§£å†³å¾ªç¯å¼•ç”¨é—®é¢˜"><a href="#2-3-2-è§£å†³å¾ªç¯å¼•ç”¨é—®é¢˜" class="headerlink" title="2.3.2 è§£å†³å¾ªç¯å¼•ç”¨é—®é¢˜"></a>2.3.2 è§£å†³å¾ªç¯å¼•ç”¨é—®é¢˜</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Node</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    std::string name;</span><br><span class="line">    <span class="comment">// ä½¿ç”¨ weak_ptr é¿å…å¾ªç¯å¼•ç”¨</span></span><br><span class="line">    std::weak_ptr&lt;Node&gt; parent;</span><br><span class="line">    std::vector&lt;std::shared_ptr&lt;Node&gt;&gt; children;</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">Node</span>(<span class="type">const</span> std::string&amp; n) : <span class="built_in">name</span>(n) &#123;&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">addChild</span><span class="params">(std::shared_ptr&lt;Node&gt; child)</span> </span>&#123;</span><br><span class="line">        children.<span class="built_in">push_back</span>(child);</span><br><span class="line">        child-&gt;parent = <span class="built_in">weak_from_this</span>(); <span class="comment">// C++17 æ–°å¢</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">auto</span> node1 = std::<span class="built_in">make_shared</span>&lt;Node&gt;(<span class="string">&quot;parent&quot;</span>);</span><br><span class="line"><span class="keyword">auto</span> node2 = std::<span class="built_in">make_shared</span>&lt;Node&gt;(<span class="string">&quot;child&quot;</span>);</span><br><span class="line">node1-&gt;<span class="built_in">addChild</span>(node2); <span class="comment">// ä¸ä¼šé€ æˆå¾ªç¯å¼•ç”¨</span></span><br></pre></td></tr></table></figure><h3 id="2-4-å®é™…åº”ç”¨åœºæ™¯"><a href="#2-4-å®é™…åº”ç”¨åœºæ™¯" class="headerlink" title="2.4 å®é™…åº”ç”¨åœºæ™¯"></a>2.4 å®é™…åº”ç”¨åœºæ™¯</h3><h4 id="2-4-1-è§‚å¯Ÿè€…æ¨¡å¼"><a href="#2-4-1-è§‚å¯Ÿè€…æ¨¡å¼" class="headerlink" title="2.4.1 è§‚å¯Ÿè€…æ¨¡å¼"></a>2.4.1 è§‚å¯Ÿè€…æ¨¡å¼</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Subject</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Observer</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">update</span><span class="params">(std::weak_ptr&lt;Subject&gt; subject)</span> </span>= <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">virtual</span> ~<span class="built_in">Observer</span>() = <span class="keyword">default</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Subject</span> &#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    std::vector&lt;std::weak_ptr&lt;Observer&gt;&gt; observers_;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">attach</span><span class="params">(std::weak_ptr&lt;Observer&gt; observer)</span> </span>&#123;</span><br><span class="line">        observers_.<span class="built_in">push_back</span>(observer);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">notify</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> it = observers_.<span class="built_in">begin</span>(); it != observers_.<span class="built_in">end</span>();) &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">auto</span> observer = it-&gt;<span class="built_in">lock</span>()) &#123;</span><br><span class="line">                observer-&gt;<span class="built_in">update</span>(<span class="built_in">weak_from_this</span>());</span><br><span class="line">                ++it;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">// è§‚å¯Ÿè€…å·²è¢«é”€æ¯ï¼Œç§»é™¤</span></span><br><span class="line">                it = observers_.<span class="built_in">erase</span>(it);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h4 id="2-4-2-ç¼“å­˜ç³»ç»Ÿä¼˜åŒ–"><a href="#2-4-2-ç¼“å­˜ç³»ç»Ÿä¼˜åŒ–" class="headerlink" title="2.4.2 ç¼“å­˜ç³»ç»Ÿä¼˜åŒ–"></a>2.4.2 ç¼“å­˜ç³»ç»Ÿä¼˜åŒ–</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">CacheWithWeakPtr</span> &#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    std::unordered_map&lt;std::string, std::weak_ptr&lt;Data&gt;&gt; cache_;</span><br><span class="line">    <span class="keyword">mutable</span> std::mutex mutex_;</span><br><span class="line">    </span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">std::shared_ptr&lt;Data&gt; <span class="title">get</span><span class="params">(<span class="type">const</span> std::string&amp; key)</span> </span>&#123;</span><br><span class="line">        <span class="function">std::lock_guard&lt;std::mutex&gt; <span class="title">lock</span><span class="params">(mutex_)</span></span>;</span><br><span class="line">        <span class="keyword">auto</span> it = cache_.<span class="built_in">find</span>(key);</span><br><span class="line">        <span class="keyword">if</span> (it != cache_.<span class="built_in">end</span>()) &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">auto</span> data = it-&gt;second.<span class="built_in">lock</span>()) &#123;</span><br><span class="line">                <span class="keyword">return</span> data; <span class="comment">// å¯¹è±¡è¿˜å­˜åœ¨</span></span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                cache_.<span class="built_in">erase</span>(it); <span class="comment">// å¯¹è±¡å·²è¢«é”€æ¯ï¼Œæ¸…ç†ç¼“å­˜</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">nullptr</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="3-auto-ptrï¼šå·²åºŸå¼ƒçš„æ™ºèƒ½æŒ‡é’ˆ"><a href="#3-auto-ptrï¼šå·²åºŸå¼ƒçš„æ™ºèƒ½æŒ‡é’ˆ" class="headerlink" title="3. auto_ptrï¼šå·²åºŸå¼ƒçš„æ™ºèƒ½æŒ‡é’ˆ"></a>3. auto_ptrï¼šå·²åºŸå¼ƒçš„æ™ºèƒ½æŒ‡é’ˆ</h2><h3 id="3-1-å†å²èƒŒæ™¯ä¸è®¾è®¡ç¼ºé™·"><a href="#3-1-å†å²èƒŒæ™¯ä¸è®¾è®¡ç¼ºé™·" class="headerlink" title="3.1 å†å²èƒŒæ™¯ä¸è®¾è®¡ç¼ºé™·"></a>3.1 å†å²èƒŒæ™¯ä¸è®¾è®¡ç¼ºé™·</h3><h4 id="3-1-1-auto-ptr-çš„èµ·æº"><a href="#3-1-1-auto-ptr-çš„èµ·æº" class="headerlink" title="3.1.1 auto_ptr çš„èµ·æº"></a>3.1.1 auto_ptr çš„èµ·æº</h4><p><code>std::auto_ptr</code> æ˜¯ C++98 æ ‡å‡†ä¸­å¼•å…¥çš„ç¬¬ä¸€ä¸ªæ™ºèƒ½æŒ‡é’ˆï¼Œæ—¨åœ¨æä¾›åŸºæœ¬çš„è‡ªåŠ¨å†…å­˜ç®¡ç†åŠŸèƒ½ã€‚å®ƒåœ¨å½“æ—¶æ˜¯ä¸€ä¸ªé‡è¦çš„åˆ›æ–°ï¼Œä½†åæ¥è¢«å‘ç°å­˜åœ¨ä¸¥é‡çš„è®¾è®¡ç¼ºé™·ã€‚</p><h4 id="3-1-2-ä¸»è¦è®¾è®¡ç¼ºé™·"><a href="#3-1-2-ä¸»è¦è®¾è®¡ç¼ºé™·" class="headerlink" title="3.1.2 ä¸»è¦è®¾è®¡ç¼ºé™·"></a>3.1.2 ä¸»è¦è®¾è®¡ç¼ºé™·</h4><ol><li><strong>æœ‰é—®é¢˜çš„æ‹·è´è¯­ä¹‰</strong>ï¼š<code>auto_ptr</code> çš„æ‹·è´æ“ä½œä¼šè½¬ç§»æ‰€æœ‰æƒ</li><li><strong>ä¸é€‚ç”¨äºæ ‡å‡†åº“å®¹å™¨</strong>ï¼šç”±äºéå¸¸è§„çš„æ‹·è´è¯­ä¹‰ï¼Œä¸èƒ½å®‰å…¨åœ°åœ¨ STL å®¹å™¨ä¸­ä½¿ç”¨</li><li><strong>ç¼ºä¹ç§»åŠ¨è¯­ä¹‰æ”¯æŒ</strong>ï¼šåœ¨ C++11 ä¹‹å‰ï¼Œæ²¡æœ‰ç§»åŠ¨è¯­ä¹‰ï¼Œå¯¼è‡´ awkward çš„æ‰€æœ‰æƒè½¬ç§»</li></ol><h3 id="3-2-é—®é¢˜ç¤ºä¾‹ä¸ç¼ºé™·åˆ†æ"><a href="#3-2-é—®é¢˜ç¤ºä¾‹ä¸ç¼ºé™·åˆ†æ" class="headerlink" title="3.2 é—®é¢˜ç¤ºä¾‹ä¸ç¼ºé™·åˆ†æ"></a>3.2 é—®é¢˜ç¤ºä¾‹ä¸ç¼ºé™·åˆ†æ</h3><h4 id="3-2-1-å±é™©çš„æ‰€æœ‰æƒè½¬ç§»"><a href="#3-2-1-å±é™©çš„æ‰€æœ‰æƒè½¬ç§»" class="headerlink" title="3.2.1 å±é™©çš„æ‰€æœ‰æƒè½¬ç§»"></a>3.2.1 å±é™©çš„æ‰€æœ‰æƒè½¬ç§»</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// C++98/03 ä¸­çš„ auto_ptrï¼ˆå·²åºŸå¼ƒï¼‰</span></span><br><span class="line"><span class="function">std::auto_ptr&lt;<span class="type">int</span>&gt; <span class="title">p1</span><span class="params">(<span class="keyword">new</span> <span class="type">int</span>(<span class="number">42</span>))</span></span>;</span><br><span class="line">std::auto_ptr&lt;<span class="type">int</span>&gt; p2 = p1; <span class="comment">// p1 å˜ä¸ºç©ºï¼Œæ‰€æœ‰æƒè½¬ç§»åˆ° p2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ„å¤–è¡Œä¸ºï¼šp1 ç°åœ¨ä¸ºç©ºï¼Œä½†ä»£ç å¯èƒ½ç»§ç»­ä½¿ç”¨å®ƒ</span></span><br><span class="line"><span class="keyword">if</span> (p1.<span class="built_in">get</span>()) &#123; <span class="comment">// è¿™ä¸ªæ¡ä»¶ä¸º false</span></span><br><span class="line">    *p1 = <span class="number">100</span>; <span class="comment">// æœªå®šä¹‰è¡Œä¸ºï¼</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="3-2-2-ä¸-STL-å®¹å™¨çš„ä¸å…¼å®¹"><a href="#3-2-2-ä¸-STL-å®¹å™¨çš„ä¸å…¼å®¹" class="headerlink" title="3.2.2 ä¸ STL å®¹å™¨çš„ä¸å…¼å®¹"></a>3.2.2 ä¸ STL å®¹å™¨çš„ä¸å…¼å®¹</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">std::vector&lt;std::auto_ptr&lt;<span class="type">int</span>&gt;&gt; vec; <span class="comment">// å±é™©çš„ç”¨æ³•ï¼</span></span><br><span class="line"></span><br><span class="line"><span class="function">std::auto_ptr&lt;<span class="type">int</span>&gt; <span class="title">p</span><span class="params">(<span class="keyword">new</span> <span class="type">int</span>(<span class="number">42</span>))</span></span>;</span><br><span class="line">vec.<span class="built_in">push_back</span>(p); <span class="comment">// p çš„æ‰€æœ‰æƒè½¬ç§»åˆ° vector ä¸­</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ç°åœ¨ p ä¸ºç©ºï¼Œä½†ä»£ç å¯èƒ½ä¸çŸ¥é“</span></span><br><span class="line"><span class="keyword">if</span> (p.<span class="built_in">get</span>()) &#123; <span class="comment">// false</span></span><br><span class="line">    <span class="comment">// æ°¸è¿œä¸ä¼šæ‰§è¡Œ</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-3-ä»-auto-ptr-åˆ°-unique-ptr-çš„æ¼”è¿›"><a href="#3-3-ä»-auto-ptr-åˆ°-unique-ptr-çš„æ¼”è¿›" class="headerlink" title="3.3 ä» auto_ptr åˆ° unique_ptr çš„æ¼”è¿›"></a>3.3 ä» auto_ptr åˆ° unique_ptr çš„æ¼”è¿›</h3><h4 id="3-3-1-ä¸ºä»€ä¹ˆ-unique-ptr-æ›´å¥½"><a href="#3-3-1-ä¸ºä»€ä¹ˆ-unique-ptr-æ›´å¥½" class="headerlink" title="3.3.1 ä¸ºä»€ä¹ˆ unique_ptr æ›´å¥½"></a>3.3.1 ä¸ºä»€ä¹ˆ unique_ptr æ›´å¥½</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// unique_ptr çš„æ˜ç¡®è¯­ä¹‰</span></span><br><span class="line"><span class="function">std::unique_ptr&lt;<span class="type">int</span>&gt; <span class="title">p1</span><span class="params">(<span class="keyword">new</span> <span class="type">int</span>(<span class="number">42</span>))</span></span>;</span><br><span class="line"><span class="comment">// std::unique_ptr&lt;int&gt; p2 = p1; // ç¼–è¯‘é”™è¯¯ï¼é˜²æ­¢æ„å¤–æ‹·è´</span></span><br><span class="line">std::unique_ptr&lt;<span class="type">int</span>&gt; p2 = std::<span class="built_in">move</span>(p1); <span class="comment">// æ˜ç¡®çš„ç§»åŠ¨è¯­ä¹‰</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯ä»¥å®‰å…¨åœ°åœ¨å®¹å™¨ä¸­ä½¿ç”¨</span></span><br><span class="line">std::vector&lt;std::unique_ptr&lt;<span class="type">int</span>&gt;&gt; vec;</span><br><span class="line">vec.<span class="built_in">push_back</span>(std::<span class="built_in">make_unique</span>&lt;<span class="type">int</span>&gt;(<span class="number">42</span>)); <span class="comment">// å¿…é¡»æ˜¾å¼ç§»åŠ¨</span></span><br></pre></td></tr></table></figure><h4 id="3-3-2-è¿ç§»æŒ‡å—"><a href="#3-3-2-è¿ç§»æŒ‡å—" class="headerlink" title="3.3.2 è¿ç§»æŒ‡å—"></a>3.3.2 è¿ç§»æŒ‡å—</h4><p>å¦‚æœé‡åˆ°æ—§çš„ <code>auto_ptr</code> ä»£ç ï¼Œåº”è¯¥è¿ç§»åˆ° <code>unique_ptr</code>ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ—§çš„ auto_ptr ä»£ç </span></span><br><span class="line"><span class="function">std::auto_ptr&lt;MyClass&gt; <span class="title">old_ptr</span><span class="params">(<span class="keyword">new</span> MyClass())</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿ç§»åˆ° unique_ptr</span></span><br><span class="line"><span class="function">std::unique_ptr&lt;MyClass&gt; <span class="title">new_ptr</span><span class="params">(<span class="keyword">new</span> MyClass())</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯¹äºå‡½æ•°å‚æ•°å’Œè¿”å›å€¼</span></span><br><span class="line"><span class="function">std::auto_ptr&lt;MyClass&gt; <span class="title">create_old</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> std::<span class="built_in">auto_ptr</span>&lt;MyClass&gt;(<span class="keyword">new</span> <span class="built_in">MyClass</span>());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">std::unique_ptr&lt;MyClass&gt; <span class="title">create_new</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> std::<span class="built_in">make_unique</span>&lt;MyClass&gt;();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-4-ç°ä»£æ›¿ä»£æ–¹æ¡ˆæ€»ç»“"><a href="#3-4-ç°ä»£æ›¿ä»£æ–¹æ¡ˆæ€»ç»“" class="headerlink" title="3.4 ç°ä»£æ›¿ä»£æ–¹æ¡ˆæ€»ç»“"></a>3.4 ç°ä»£æ›¿ä»£æ–¹æ¡ˆæ€»ç»“</h3><table><thead><tr><th>ç‰¹æ€§</th><th>auto_ptr (å·²åºŸå¼ƒ)</th><th>unique_ptr</th><th>shared_ptr</th><th>weak_ptr</th></tr></thead><tbody><tr><td>æ‰€æœ‰æƒæ¨¡å‹</td><td>è½¬ç§»æ‰€æœ‰æƒ</td><td>ç‹¬å æ‰€æœ‰æƒ</td><td>å…±äº«æ‰€æœ‰æƒ</td><td>å¼±å¼•ç”¨</td></tr><tr><td>æ‹·è´è¯­ä¹‰</td><td>è½¬ç§»æ‰€æœ‰æƒï¼ˆå±é™©ï¼‰</td><td>ç¦æ­¢æ‹·è´</td><td>å…±äº«æ‰€æœ‰æƒ</td><td>ä¸å¢åŠ å¼•ç”¨è®¡æ•°</td></tr><tr><td>ç§»åŠ¨è¯­ä¹‰</td><td>æ— ï¼ˆC++98ï¼‰</td><td>æ”¯æŒç§»åŠ¨</td><td>æ”¯æŒç§»åŠ¨</td><td>æ”¯æŒç§»åŠ¨</td></tr><tr><td>å®¹å™¨å…¼å®¹æ€§</td><td>ä¸å…¼å®¹</td><td>å…¼å®¹ï¼ˆéœ€ç§»åŠ¨ï¼‰</td><td>å…¼å®¹</td><td>å…¼å®¹</td></tr><tr><td>çº¿ç¨‹å®‰å…¨</td><td>æ— </td><td>æ— ï¼ˆä½†å¯å•ç‹¬ä¿æŠ¤ï¼‰</td><td>å¼•ç”¨è®¡æ•°åŸå­æ“ä½œ</td><td>åŸå­æ“ä½œ</td></tr><tr><td>æ¨èä½¿ç”¨</td><td>ä¸åº”ä½¿ç”¨</td><td>ç‹¬å èµ„æº</td><td>å…±äº«èµ„æº</td><td>æ‰“ç ´å¾ªç¯å¼•ç”¨</td></tr></tbody></table><h2 id="4-æ™ºèƒ½æŒ‡é’ˆçš„æœ€ä½³å®è·µä¸é™·é˜±"><a href="#4-æ™ºèƒ½æŒ‡é’ˆçš„æœ€ä½³å®è·µä¸é™·é˜±" class="headerlink" title="4. æ™ºèƒ½æŒ‡é’ˆçš„æœ€ä½³å®è·µä¸é™·é˜±"></a>4. æ™ºèƒ½æŒ‡é’ˆçš„æœ€ä½³å®è·µä¸é™·é˜±</h2><h3 id="4-1-é€‰æ‹©æ­£ç¡®çš„æ™ºèƒ½æŒ‡é’ˆ"><a href="#4-1-é€‰æ‹©æ­£ç¡®çš„æ™ºèƒ½æŒ‡é’ˆ" class="headerlink" title="4.1 é€‰æ‹©æ­£ç¡®çš„æ™ºèƒ½æŒ‡é’ˆ"></a>4.1 é€‰æ‹©æ­£ç¡®çš„æ™ºèƒ½æŒ‡é’ˆ</h3><h4 id="4-1-1-å†³ç­–æµç¨‹"><a href="#4-1-1-å†³ç­–æµç¨‹" class="headerlink" title="4.1.1 å†³ç­–æµç¨‹"></a>4.1.1 å†³ç­–æµç¨‹</h4><ol><li><p><strong>æ˜¯å¦éœ€è¦å…±äº«æ‰€æœ‰æƒï¼Ÿ</strong></p><ul><li>å¦ â†’ ä½¿ç”¨ <code>unique_ptr</code></li><li>æ˜¯ â†’ ä½¿ç”¨ <code>shared_ptr</code></li></ul></li><li><p><strong>æ˜¯å¦éœ€è¦è§‚å¯Ÿè€Œä¸æ‹¥æœ‰ï¼Ÿ</strong></p><ul><li>æ˜¯ â†’ é…åˆä½¿ç”¨ <code>weak_ptr</code></li></ul></li><li><p><strong>æ˜¯å¦æœ‰å¾ªç¯å¼•ç”¨é£é™©ï¼Ÿ</strong></p><ul><li>æ˜¯ â†’ ä½¿ç”¨ <code>weak_ptr</code> æ‰“ç ´å¾ªç¯</li></ul></li></ol><h4 id="4-1-2-ä½¿ç”¨åœºæ™¯æ€»ç»“"><a href="#4-1-2-ä½¿ç”¨åœºæ™¯æ€»ç»“" class="headerlink" title="4.1.2 ä½¿ç”¨åœºæ™¯æ€»ç»“"></a>4.1.2 ä½¿ç”¨åœºæ™¯æ€»ç»“</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. ç‹¬å èµ„æº - unique_ptr</span></span><br><span class="line">std::unique_ptr&lt;File&gt; file = <span class="built_in">openFile</span>(<span class="string">&quot;data.txt&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. å…±äº«èµ„æº - shared_ptr</span></span><br><span class="line">std::shared_ptr&lt;Database&gt; db = std::<span class="built_in">make_shared</span>&lt;Database&gt;();</span><br><span class="line"><span class="keyword">auto</span> user1 = <span class="built_in">User</span>(db);</span><br><span class="line"><span class="keyword">auto</span> user2 = <span class="built_in">User</span>(db); <span class="comment">// å…±äº«æ•°æ®åº“è¿æ¥</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 3. è§‚å¯Ÿèµ„æº - weak_ptr</span></span><br><span class="line">std::shared_ptr&lt;Subject&gt; subject = std::<span class="built_in">make_shared</span>&lt;Subject&gt;();</span><br><span class="line">std::weak_ptr&lt;Subject&gt; observer = subject;</span><br></pre></td></tr></table></figure><h3 id="4-2-å¸¸è§é™·é˜±ä¸è§£å†³æ–¹æ¡ˆ"><a href="#4-2-å¸¸è§é™·é˜±ä¸è§£å†³æ–¹æ¡ˆ" class="headerlink" title="4.2 å¸¸è§é™·é˜±ä¸è§£å†³æ–¹æ¡ˆ"></a>4.2 å¸¸è§é™·é˜±ä¸è§£å†³æ–¹æ¡ˆ</h3><h4 id="4-2-1-å¾ªç¯å¼•ç”¨é—®é¢˜"><a href="#4-2-1-å¾ªç¯å¼•ç”¨é—®é¢˜" class="headerlink" title="4.2.1 å¾ªç¯å¼•ç”¨é—®é¢˜"></a>4.2.1 å¾ªç¯å¼•ç”¨é—®é¢˜</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é”™è¯¯ç¤ºä¾‹ï¼šå¾ªç¯å¼•ç”¨å¯¼è‡´å†…å­˜æ³„æ¼</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">BadNode</span> &#123;</span><br><span class="line">    std::shared_ptr&lt;BadNode&gt; parent; <span class="comment">// åº”è¯¥ä½¿ç”¨ weak_ptr</span></span><br><span class="line">    std::shared_ptr&lt;BadNode&gt; child;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ­£ç¡®è§£å†³æ–¹æ¡ˆ</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">GoodNode</span> &#123;</span><br><span class="line">    std::weak_ptr&lt;GoodNode&gt; parent; <span class="comment">// ä½¿ç”¨ weak_ptr æ‰“ç ´å¾ªç¯</span></span><br><span class="line">    std::shared_ptr&lt;GoodNode&gt; child;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h4 id="4-2-2-é¿å…åŸå§‹æŒ‡é’ˆä¸æ™ºèƒ½æŒ‡é’ˆæ··ç”¨"><a href="#4-2-2-é¿å…åŸå§‹æŒ‡é’ˆä¸æ™ºèƒ½æŒ‡é’ˆæ··ç”¨" class="headerlink" title="4.2.2 é¿å…åŸå§‹æŒ‡é’ˆä¸æ™ºèƒ½æŒ‡é’ˆæ··ç”¨"></a>4.2.2 é¿å…åŸå§‹æŒ‡é’ˆä¸æ™ºèƒ½æŒ‡é’ˆæ··ç”¨</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å±é™©çš„åšæ³•</span></span><br><span class="line">MyClass* raw_ptr = <span class="keyword">new</span> <span class="built_in">MyClass</span>();</span><br><span class="line"><span class="function">std::shared_ptr&lt;MyClass&gt; <span class="title">ptr1</span><span class="params">(raw_ptr)</span></span>;</span><br><span class="line"><span class="comment">// std::shared_ptr&lt;MyClass&gt; ptr2(raw_ptr); // ç¾éš¾ï¼åŒé‡åˆ é™¤</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å®‰å…¨çš„åšæ³•</span></span><br><span class="line">std::shared_ptr&lt;MyClass&gt; ptr1 = std::<span class="built_in">make_shared</span>&lt;MyClass&gt;();</span><br><span class="line">std::shared_ptr&lt;MyClass&gt; ptr2 = ptr1; <span class="comment">// å…±äº«æ‰€æœ‰æƒ</span></span><br></pre></td></tr></table></figure><h4 id="4-2-3-this-æŒ‡é’ˆé—®é¢˜"><a href="#4-2-3-this-æŒ‡é’ˆé—®é¢˜" class="headerlink" title="4.2.3 this æŒ‡é’ˆé—®é¢˜"></a>4.2.3 this æŒ‡é’ˆé—®é¢˜</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyClass</span> : <span class="keyword">public</span> std::enable_shared_from_this&lt;MyClass&gt; &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">std::shared_ptr&lt;MyClass&gt; <span class="title">get_shared</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">shared_from_this</span>(); <span class="comment">// å®‰å…¨åœ°è·å– shared_ptr</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// é”™è¯¯ï¼šç›´æ¥ä» this åˆ›å»º shared_ptr</span></span><br><span class="line"><span class="comment">// std::shared_ptr&lt;MyClass&gt; bad_ptr(this);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ­£ç¡®ï¼šä½¿ç”¨ enable_shared_from_this</span></span><br><span class="line"><span class="keyword">auto</span> obj = std::<span class="built_in">make_shared</span>&lt;MyClass&gt;();</span><br><span class="line"><span class="keyword">auto</span> good_ptr = obj-&gt;<span class="built_in">get_shared</span>();</span><br></pre></td></tr></table></figure><h3 id="4-3-æ€§èƒ½ä¼˜åŒ–å»ºè®®"><a href="#4-3-æ€§èƒ½ä¼˜åŒ–å»ºè®®" class="headerlink" title="4.3 æ€§èƒ½ä¼˜åŒ–å»ºè®®"></a>4.3 æ€§èƒ½ä¼˜åŒ–å»ºè®®</h3><h4 id="4-3-1-ä¼˜å…ˆä½¿ç”¨-make-shared-å’Œ-make-unique"><a href="#4-3-1-ä¼˜å…ˆä½¿ç”¨-make-shared-å’Œ-make-unique" class="headerlink" title="4.3.1 ä¼˜å…ˆä½¿ç”¨ make_shared å’Œ make_unique"></a>4.3.1 ä¼˜å…ˆä½¿ç”¨ make_shared å’Œ make_unique</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¸æ¨èï¼šä¸¤æ¬¡å†…å­˜åˆ†é…</span></span><br><span class="line"><span class="function">std::shared_ptr&lt;MyClass&gt; <span class="title">p1</span><span class="params">(<span class="keyword">new</span> MyClass())</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¨èï¼šä¸€æ¬¡å†…å­˜åˆ†é…ï¼Œæ›´å¥½çš„æ€§èƒ½</span></span><br><span class="line">std::shared_ptr&lt;MyClass&gt; p2 = std::<span class="built_in">make_shared</span>&lt;MyClass&gt;();</span><br><span class="line">std::unique_ptr&lt;MyClass&gt; p3 = std::<span class="built_in">make_unique</span>&lt;MyClass&gt;();</span><br></pre></td></tr></table></figure><h4 id="4-3-2-é¿å…ä¸å¿…è¦çš„-shared-ptr-æ‹·è´"><a href="#4-3-2-é¿å…ä¸å¿…è¦çš„-shared-ptr-æ‹·è´" class="headerlink" title="4.3.2 é¿å…ä¸å¿…è¦çš„ shared_ptr æ‹·è´"></a>4.3.2 é¿å…ä¸å¿…è¦çš„ shared_ptr æ‹·è´</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¸å¥½çš„åšæ³•ï¼šä¸å¿…è¦çš„æ‹·è´</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">process</span><span class="params">(<span class="type">const</span> std::shared_ptr&lt;Data&gt;&amp; data)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// å¦‚æœä¸éœ€è¦å…±äº«æ‰€æœ‰æƒï¼Œåº”è¯¥ä¼ å¼•ç”¨</span></span><br><span class="line">    data-&gt;<span class="built_in">process</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ›´å¥½çš„åšæ³•ï¼šæ ¹æ®éœ€æ±‚é€‰æ‹©å‚æ•°ç±»å‹</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">process_by_ref</span><span class="params">(Data&amp; data)</span> </span>&#123; <span class="comment">// ä¸éœ€è¦æ‰€æœ‰æƒ</span></span><br><span class="line">    data.<span class="built_in">process</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">process_by_shared</span><span class="params">(std::shared_ptr&lt;Data&gt; data)</span> </span>&#123; <span class="comment">// éœ€è¦å…±äº«æ‰€æœ‰æƒ</span></span><br><span class="line">    data-&gt;<span class="built_in">process</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é€šè¿‡ç†è§£å’Œæ­£ç¡®åº”ç”¨è¿™äº›æ™ºèƒ½æŒ‡é’ˆï¼Œå¯ä»¥ç¼–å†™å‡ºæ›´å®‰å…¨ã€æ›´é«˜æ•ˆçš„ C++ ä»£ç ï¼Œé¿å…å¸¸è§çš„å†…å­˜ç®¡ç†é”™è¯¯ã€‚</p>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;C-æ™ºèƒ½æŒ‡é’ˆè¯¦è§£ï¼šshared-ptr-auto-ptr-å’Œ-weak-ptr&quot;&gt;&lt;a href=&quot;#C-æ™ºèƒ½æŒ‡é’ˆè¯¦è§£ï¼šshared-ptr-auto-ptr-å’Œ-weak-ptr&quot; class=&quot;headerlink&quot; title=&quot;C++ æ™ºèƒ½æŒ‡é’ˆè¯¦è§£ï¼šshared_ptr, auto_ptr å’Œ weak_ptr&quot;&gt;&lt;/a&gt;C++ æ™ºèƒ½æŒ‡é’ˆè¯¦è§£ï¼šshared_ptr, auto_ptr å’Œ weak_ptr&lt;/h1&gt;&lt;h2 id=&quot;1-shared-ptrï¼šå…±äº«æ‰€æœ‰æƒæ™ºèƒ½æŒ‡é’ˆ&quot;&gt;&lt;a href=&quot;#1-shared-ptrï¼šå…±äº«æ‰€æœ‰æƒæ™ºèƒ½æŒ‡é’ˆ&quot; class=&quot;headerlink&quot; title=&quot;1. shared_ptrï¼šå…±äº«æ‰€æœ‰æƒæ™ºèƒ½æŒ‡é’ˆ&quot;&gt;&lt;/a&gt;1. shared_ptrï¼šå…±äº«æ‰€æœ‰æƒæ™ºèƒ½æŒ‡é’ˆ&lt;/h2&gt;&lt;h3 id=&quot;1-1-æ ¸å¿ƒæ¦‚å¿µä¸å®šä¹‰&quot;&gt;&lt;a href=&quot;#1-1-æ ¸å¿ƒæ¦‚å¿µä¸å®šä¹‰&quot; class=&quot;headerlink&quot; title=&quot;1.1 æ ¸å¿ƒæ¦‚å¿µä¸å®šä¹‰&quot;&gt;&lt;/a&gt;1.1 æ ¸å¿ƒæ¦‚å¿µä¸å®šä¹‰&lt;/h3&gt;&lt;h4 id=&quot;1-1-1-ä»€ä¹ˆæ˜¯-shared-ptr&quot;&gt;&lt;a href=&quot;#1-1-1-ä»€ä¹ˆæ˜¯-shared-ptr&quot; class=&quot;headerlink&quot; title=&quot;1.1.1 ä»€ä¹ˆæ˜¯ shared_ptr&quot;&gt;&lt;/a&gt;1.1.1 ä»€ä¹ˆæ˜¯ shared_ptr&lt;/h4&gt;&lt;p&gt;&lt;code&gt;std::shared_ptr&lt;/code&gt; æ˜¯ C++11 å¼•å…¥çš„å…±äº«æ‰€æœ‰æƒæ™ºèƒ½æŒ‡é’ˆï¼Œå®ƒé€šè¿‡&lt;strong&gt;å¼•ç”¨è®¡æ•°ï¼ˆReference Countingï¼‰&lt;/strong&gt; æœºåˆ¶å®ç°å¤šä¸ªæ™ºèƒ½æŒ‡é’ˆå…±äº«åŒä¸€ä¸ªå¯¹è±¡çš„æ‰€æœ‰æƒã€‚ä¸ &lt;code&gt;unique_ptr&lt;/code&gt; çš„ç‹¬å æ‰€æœ‰æƒä¸åŒï¼Œ&lt;code&gt;shared_ptr&lt;/code&gt; å…è®¸å¤šä¸ªæŒ‡é’ˆå®ä¾‹å…±åŒç®¡ç†åŒä¸€ä¸ªåŠ¨æ€åˆ†é…çš„å¯¹è±¡ã€‚&lt;/p&gt;</summary>
    
    
    
    
    <category term="C++" scheme="https://lyroom.github.io/tags/C/"/>
    
    <category term="æ™ºèƒ½æŒ‡é’ˆ" scheme="https://lyroom.github.io/tags/%E6%99%BA%E8%83%BD%E6%8C%87%E9%92%88/"/>
    
    <category term="shared_ptr" scheme="https://lyroom.github.io/tags/shared-ptr/"/>
    
    <category term="auto_ptr" scheme="https://lyroom.github.io/tags/auto-ptr/"/>
    
    <category term="weak_ptr" scheme="https://lyroom.github.io/tags/weak-ptr/"/>
    
  </entry>
  
  <entry>
    <title>è¯¦è§£ C++ unique_ptrï¼šç‹¬å å¼æ™ºèƒ½æŒ‡é’ˆ</title>
    <link href="https://lyroom.github.io/2025/09/23/%E8%AF%A6%E8%A7%A3-C-unique-ptr%EF%BC%9A%E7%8B%AC%E5%8D%A0%E5%BC%8F%E6%99%BA%E8%83%BD%E6%8C%87%E9%92%88/"/>
    <id>https://lyroom.github.io/2025/09/23/%E8%AF%A6%E8%A7%A3-C-unique-ptr%EF%BC%9A%E7%8B%AC%E5%8D%A0%E5%BC%8F%E6%99%BA%E8%83%BD%E6%8C%87%E9%92%88/</id>
    <published>2025-09-23T00:18:46.000Z</published>
    <updated>2025-09-23T00:18:46.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="è¯¦è§£-C-unique-ptrï¼šç‹¬å å¼æ™ºèƒ½æŒ‡é’ˆ"><a href="#è¯¦è§£-C-unique-ptrï¼šç‹¬å å¼æ™ºèƒ½æŒ‡é’ˆ" class="headerlink" title="è¯¦è§£ C++ unique_ptrï¼šç‹¬å å¼æ™ºèƒ½æŒ‡é’ˆ"></a>è¯¦è§£ C++ unique_ptrï¼šç‹¬å å¼æ™ºèƒ½æŒ‡é’ˆ</h1><h2 id="1-unique-ptr-çš„æ ¸å¿ƒæ¦‚å¿µä¸å®šä¹‰"><a href="#1-unique-ptr-çš„æ ¸å¿ƒæ¦‚å¿µä¸å®šä¹‰" class="headerlink" title="1. unique_ptr çš„æ ¸å¿ƒæ¦‚å¿µä¸å®šä¹‰"></a>1. unique_ptr çš„æ ¸å¿ƒæ¦‚å¿µä¸å®šä¹‰</h2><h3 id="1-1-ä»€ä¹ˆæ˜¯-unique-ptr"><a href="#1-1-ä»€ä¹ˆæ˜¯-unique-ptr" class="headerlink" title="1.1 ä»€ä¹ˆæ˜¯ unique_ptr"></a>1.1 ä»€ä¹ˆæ˜¯ unique_ptr</h3><p><code>std::unique_ptr</code> æ˜¯ C++11 æ ‡å‡†åº“ä¸­å¼•å…¥çš„ä¸€ç§æ™ºèƒ½æŒ‡é’ˆï¼Œå…¶æ ¸å¿ƒè®¾è®¡ç›®æ ‡æ˜¯æä¾›ä¸€ç§å¯¹åŠ¨æ€åˆ†é…å¯¹è±¡çš„<strong>ç‹¬å æ‰€æœ‰æƒï¼ˆExclusive Ownershipï¼‰</strong> ç®¡ç†æœºåˆ¶ã€‚</p><span id="more"></span><p>ä¸åŸå§‹æŒ‡é’ˆï¼ˆraw pointerï¼‰ä¸åŒï¼Œ<code>unique_ptr</code> éµå¾ª <strong>RAIIï¼ˆResource Acquisition Is Initializationï¼Œèµ„æºè·å–å³åˆå§‹åŒ–ï¼‰</strong> åŸåˆ™ï¼Œç¡®ä¿å…¶ç®¡ç†çš„å†…å­˜åœ¨å…¶ç”Ÿå‘½å‘¨æœŸç»“æŸæ—¶èƒ½å¤Ÿè¢«è‡ªåŠ¨ã€å¯é åœ°é‡Šæ”¾ï¼Œä»è€Œæœ‰æ•ˆé˜²æ­¢äº†å†…å­˜æ³„æ¼ã€æ‚¬ç©ºæŒ‡é’ˆç­‰å¸¸è§çš„å†…å­˜ç®¡ç†é”™è¯¯ã€‚</p><p><code>unique_ptr</code> å¯¹è±¡æœ¬èº«æ˜¯ä¸€ä¸ªè½»é‡çº§çš„å°è£…ï¼Œå®ƒåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ä¸åŸå§‹æŒ‡é’ˆå…·æœ‰ç›¸åŒçš„æ€§èƒ½å¼€é”€ï¼Œä½†æä¾›äº†æ›´å¼ºçš„å®‰å…¨ä¿éšœå’Œæ›´æ¸…æ™°çš„è¯­ä¹‰ã€‚å®ƒé€šè¿‡ç¦æ­¢æ‹·è´æ“ä½œï¼Œåªå…è®¸ç§»åŠ¨æ“ä½œï¼Œæ¥å¼ºåˆ¶å®ç°æ‰€æœ‰æƒçš„å”¯ä¸€æ€§ï¼Œå³åœ¨ä»»ä½•æ—¶åˆ»ï¼Œåªæœ‰ä¸€ä¸ª <code>unique_ptr</code> å¯ä»¥æ‹¥æœ‰å¹¶è´Ÿè´£é‡Šæ”¾ä¸€ä¸ªç‰¹å®šçš„å¯¹è±¡ã€‚</p><h4 id="1-1-1-ç‹¬å æ‰€æœ‰æƒè¯­ä¹‰"><a href="#1-1-1-ç‹¬å æ‰€æœ‰æƒè¯­ä¹‰" class="headerlink" title="1.1.1 ç‹¬å æ‰€æœ‰æƒè¯­ä¹‰"></a>1.1.1 ç‹¬å æ‰€æœ‰æƒè¯­ä¹‰</h4><p><code>unique_ptr</code> çš„â€ç‹¬å æ‰€æœ‰æƒâ€æ˜¯å…¶æœ€æ ¸å¿ƒçš„ç‰¹æ€§ã€‚è¿™æ„å‘³ç€ä¸€ä¸ª <code>unique_ptr</code> å¯¹è±¡å¯¹å…¶æ‰€æŒ‡å‘çš„èµ„æºæ‹¥æœ‰å”¯ä¸€çš„æ§åˆ¶æƒã€‚å½“ <code>unique_ptr</code> è¢«é”€æ¯æ—¶ï¼ˆä¾‹å¦‚ï¼Œç¦»å¼€å…¶ä½œç”¨åŸŸï¼‰ï¼Œå®ƒæ‰€ç®¡ç†çš„å¯¹è±¡ä¹Ÿä¼šè¢«è‡ªåŠ¨é”€æ¯ã€‚</p><p>è¿™ç§æœºåˆ¶ç¡®ä¿äº†èµ„æºçš„é‡Šæ”¾æ˜¯ç¡®å®šæ€§çš„ï¼Œå¹¶ä¸”ä¸ <code>unique_ptr</code> çš„ç”Ÿå‘½å‘¨æœŸç´§å¯†ç»‘å®šã€‚ä¸ºäº†å®ç°è¿™ç§ç‹¬å æ€§ï¼Œ<code>unique_ptr</code> æ˜ç¡®ç¦æ­¢äº†æ‹·è´æ„é€ å‡½æ•°å’Œæ‹·è´èµ‹å€¼è¿ç®—ç¬¦ã€‚ä»»ä½•è¯•å›¾å¤åˆ¶ä¸€ä¸ª <code>unique_ptr</code> çš„æ“ä½œéƒ½ä¼šå¯¼è‡´ç¼–è¯‘é”™è¯¯ã€‚</p><p>ç„¶è€Œï¼Œæ‰€æœ‰æƒæ˜¯å¯ä»¥è¢«<strong>è½¬ç§»ï¼ˆTransferï¼‰</strong> çš„ã€‚C++11 å¼•å…¥çš„<strong>ç§»åŠ¨è¯­ä¹‰ï¼ˆMove Semanticsï¼‰</strong> ä¸º <code>unique_ptr</code> æä¾›äº†å®Œç¾çš„æ”¯æŒã€‚é€šè¿‡ <code>std::move()</code>ï¼Œå¯ä»¥å°†ä¸€ä¸ª <code>unique_ptr</code> çš„æ‰€æœ‰æƒè½¬ç§»ç»™å¦ä¸€ä¸ª <code>unique_ptr</code>ï¼Œè€ŒåŸæŒ‡é’ˆåˆ™ä¼šè¢«ç½®ä¸ºç©ºï¼ˆ<code>nullptr</code>ï¼‰ï¼Œä¸å†æ‹¥æœ‰ä»»ä½•èµ„æºã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">std::unique_ptr&lt;<span class="type">int</span>&gt; <span class="title">ptr1</span><span class="params">(<span class="keyword">new</span> <span class="type">int</span>(<span class="number">42</span>))</span></span>;</span><br><span class="line"><span class="comment">// std::unique_ptr&lt;int&gt; ptr2 = ptr1; // é”™è¯¯ï¼šæ‹·è´æ„é€ å‡½æ•°è¢«åˆ é™¤</span></span><br><span class="line">std::unique_ptr&lt;<span class="type">int</span>&gt; ptr2 = std::<span class="built_in">move</span>(ptr1); <span class="comment">// åˆæ³•ï¼šæ‰€æœ‰æƒä» ptr1 è½¬ç§»åˆ° ptr2</span></span><br><span class="line"><span class="comment">// æ­¤æ—¶ ptr1 ä¸º nullptrï¼Œptr2 æ‹¥æœ‰å¯¹ int(42) çš„æ‰€æœ‰æƒ</span></span><br></pre></td></tr></table></figure><p>è¿™ç§æ‰€æœ‰æƒçš„è½¬ç§»æœºåˆ¶ï¼Œä½¿å¾— <code>unique_ptr</code> åœ¨å‡½æ•°å‚æ•°ä¼ é€’å’Œè¿”å›å€¼ä¸­éå¸¸æœ‰ç”¨ï¼Œå¯ä»¥æ¸…æ™°åœ°è¡¨è¾¾æ‰€æœ‰æƒçš„è½¬ç§»æ„å›¾ã€‚</p><h4 id="1-1-2-RAIIï¼ˆèµ„æºè·å–å³åˆå§‹åŒ–ï¼‰åŸåˆ™çš„ä½“ç°"><a href="#1-1-2-RAIIï¼ˆèµ„æºè·å–å³åˆå§‹åŒ–ï¼‰åŸåˆ™çš„ä½“ç°" class="headerlink" title="1.1.2 RAIIï¼ˆèµ„æºè·å–å³åˆå§‹åŒ–ï¼‰åŸåˆ™çš„ä½“ç°"></a>1.1.2 RAIIï¼ˆèµ„æºè·å–å³åˆå§‹åŒ–ï¼‰åŸåˆ™çš„ä½“ç°</h4><p><code>unique_ptr</code> æ˜¯ <strong>RAIIï¼ˆResource Acquisition Is Initializationï¼‰</strong> åŸåˆ™çš„ç»ä½³èŒƒä¾‹ã€‚RAII æ˜¯ä¸€ç§ç¼–ç¨‹èŒƒå¼ï¼Œå®ƒå°†èµ„æºçš„ç”Ÿå‘½å‘¨æœŸä¸å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸç»‘å®šã€‚</p><p>èµ„æºï¼ˆå¦‚å†…å­˜ã€æ–‡ä»¶å¥æŸ„ã€é”ç­‰ï¼‰åœ¨å¯¹è±¡çš„æ„é€ å‡½æ•°ä¸­è·å–ï¼Œå¹¶åœ¨å¯¹è±¡çš„ææ„å‡½æ•°ä¸­é‡Šæ”¾ã€‚<code>unique_ptr</code> å®Œç¾åœ°éµå¾ªäº†è¿™ä¸€åŸåˆ™ï¼šå½“é€šè¿‡ <code>new</code> åˆ›å»ºä¸€ä¸ªå¯¹è±¡å¹¶ç”¨å…¶åˆå§‹åŒ– <code>unique_ptr</code> æ—¶ï¼Œèµ„æºè¢«è·å–ï¼›å½“ <code>unique_ptr</code> å¯¹è±¡ç¦»å¼€å…¶ä½œç”¨åŸŸå¹¶è¢«é”€æ¯æ—¶ï¼Œå…¶ææ„å‡½æ•°ä¼šè‡ªåŠ¨è°ƒç”¨ï¼Œä»è€Œé‡Šæ”¾æ‰€ç®¡ç†çš„èµ„æºã€‚</p><p>è¿™ç§æœºåˆ¶æå¤§åœ°ç®€åŒ–äº†èµ„æºç®¡ç†ï¼Œå°¤å…¶æ˜¯åœ¨å¤„ç†å¼‚å¸¸æ—¶ã€‚å³ä½¿åœ¨å‡½æ•°æ‰§è¡Œè¿‡ç¨‹ä¸­æŠ›å‡ºå¼‚å¸¸ï¼Œå¯¼è‡´å‡½æ•°æå‰é€€å‡ºï¼Œå±€éƒ¨ä½œç”¨åŸŸä¸­çš„ <code>unique_ptr</code> å¯¹è±¡ä¾ç„¶ä¼šè¢«æ­£ç¡®é”€æ¯ï¼Œå…¶ç®¡ç†çš„èµ„æºä¹Ÿä¼šè¢«å®‰å…¨é‡Šæ”¾ï¼Œä»è€Œé¿å…äº†å› å¼‚å¸¸å¤„ç†ä¸å½“è€Œå¯¼è‡´çš„èµ„æºæ³„æ¼ã€‚</p><h4 id="1-1-3-ä¸åŸå§‹æŒ‡é’ˆçš„åŒºåˆ«ä¸ä¼˜åŠ¿"><a href="#1-1-3-ä¸åŸå§‹æŒ‡é’ˆçš„åŒºåˆ«ä¸ä¼˜åŠ¿" class="headerlink" title="1.1.3 ä¸åŸå§‹æŒ‡é’ˆçš„åŒºåˆ«ä¸ä¼˜åŠ¿"></a>1.1.3 ä¸åŸå§‹æŒ‡é’ˆçš„åŒºåˆ«ä¸ä¼˜åŠ¿</h4><p>ä¸åŸå§‹æŒ‡é’ˆç›¸æ¯”ï¼Œ<code>unique_ptr</code> æä¾›äº†æ˜¾è‘—çš„ä¼˜åŠ¿ï¼š</p><ul><li><strong>å®‰å…¨æ€§</strong>ï¼šåŸå§‹æŒ‡é’ˆéœ€è¦ç¨‹åºå‘˜æ‰‹åŠ¨è°ƒç”¨ <code>delete</code> æ¥é‡Šæ”¾å†…å­˜ï¼Œè¿™ææ˜“å‡ºé”™ï¼Œå®¹æ˜“å¯¼è‡´å†…å­˜æ³„æ¼ï¼ˆå¿˜è®° <code>delete</code>ï¼‰æˆ–æ‚¬ç©ºæŒ‡é’ˆï¼ˆ<code>delete</code> åç»§ç»­ä½¿ç”¨ï¼‰ã€‚<code>unique_ptr</code> é€šè¿‡è‡ªåŠ¨ç®¡ç†å†…å­˜ï¼Œä»æ ¹æœ¬ä¸Šæ¶ˆé™¤äº†è¿™ç±»é—®é¢˜ã€‚</li><li><strong>æ¸…æ™°çš„è¯­ä¹‰</strong>ï¼šé€šè¿‡å…¶ç‹¬å æ‰€æœ‰æƒçš„ç‰¹æ€§ï¼Œä»£ç çš„æ„å›¾å˜å¾—æ›´åŠ æ˜ç¡®ï¼šä¸€ä¸ª <code>unique_ptr</code> æ˜ç¡®è¡¨ç¤ºå®ƒæ‹¥æœ‰å¹¶è´Ÿè´£é‡Šæ”¾è¯¥å¯¹è±¡ã€‚è¿™ä½¿å¾—ä»£ç æ›´æ˜“äºç†è§£å’Œç»´æŠ¤ã€‚</li><li><strong>æ‰©å±•æ€§</strong>ï¼š<code>unique_ptr</code> è¿˜æ”¯æŒè‡ªå®šä¹‰åˆ é™¤å™¨ï¼Œä½¿å…¶èƒ½å¤Ÿç®¡ç†ä¸ä»…ä»…æ˜¯é€šè¿‡ <code>new</code> åˆ†é…çš„èµ„æºï¼Œä¾‹å¦‚æ–‡ä»¶å¥æŸ„ã€ç½‘ç»œè¿æ¥ç­‰ï¼Œè¿›ä¸€æ­¥æ‰©å±•äº†å…¶åº”ç”¨èŒƒå›´ã€‚</li><li><strong>æ€§èƒ½</strong>ï¼šå°½ç®¡ <code>unique_ptr</code> æä¾›äº†è¿™äº›é¢å¤–çš„åŠŸèƒ½ï¼Œä½†å…¶æ€§èƒ½å¼€é”€æå°ï¼Œåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ä¸åŸå§‹æŒ‡é’ˆç›¸å½“ã€‚</li></ul><table><thead><tr><th>ç‰¹æ€§</th><th>åŸå§‹æŒ‡é’ˆ (T*)</th><th>std::unique_ptr<T></th></tr></thead><tbody><tr><td>æ‰€æœ‰æƒ</td><td>ä¸æ˜ç¡®ï¼Œéœ€è¦ç¨‹åºå‘˜æ‰‹åŠ¨ç®¡ç†</td><td>ç‹¬å æ‰€æœ‰æƒï¼Œé€šè¿‡ç§»åŠ¨è¯­ä¹‰è½¬ç§»</td></tr><tr><td>ç”Ÿå‘½å‘¨æœŸ</td><td>ä¸æ˜ç¡®ï¼Œéœ€è¦æ‰‹åŠ¨ delete</td><td>ä¸ unique_ptr å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸç»‘å®šï¼Œè‡ªåŠ¨é‡Šæ”¾</td></tr><tr><td>å†…å­˜æ³„æ¼é£é™©</td><td>é«˜ï¼Œå®¹æ˜“å¿˜è®° delete</td><td>æ— ï¼Œè‡ªåŠ¨é‡Šæ”¾</td></tr><tr><td>æ‚¬å‚æŒ‡é’ˆé£é™©</td><td>é«˜ï¼Œdelete åæŒ‡é’ˆä»æœ‰æ•ˆ</td><td>ä½ï¼Œé‡Šæ”¾å unique_ptr å˜ä¸º nullptr</td></tr><tr><td>é‡å¤é‡Šæ”¾é£é™©</td><td>é«˜ï¼Œå¯èƒ½å¤šæ¬¡ delete åŒä¸€æŒ‡é’ˆ</td><td>æ— ï¼Œæ‰€æœ‰æƒå”¯ä¸€</td></tr><tr><td>æ‹·è´</td><td>æ”¯æŒæµ…æ‹·è´ï¼Œå¯èƒ½å¯¼è‡´å¤šä¸ªæŒ‡é’ˆæŒ‡å‘åŒä¸€èµ„æº</td><td>ä¸æ”¯æŒæ‹·è´ï¼Œä»…æ”¯æŒç§»åŠ¨</td></tr><tr><td>å¤§å°</td><td>ä¸å¹³å°æŒ‡é’ˆå¤§å°ç›¸åŒ</td><td>é€šå¸¸ä¸åŸå§‹æŒ‡é’ˆå¤§å°ç›¸åŒï¼ˆå¾—ç›Šäºç©ºåŸºç±»ä¼˜åŒ–ï¼‰</td></tr><tr><td>è‡ªå®šä¹‰åˆ é™¤å™¨</td><td>éœ€è¦æ‰‹åŠ¨è°ƒç”¨</td><td>æ”¯æŒåœ¨æ¨¡æ¿å‚æ•°ä¸­æŒ‡å®š</td></tr></tbody></table><h3 id="1-2-æ¨¡æ¿ç±»å®šä¹‰ä¸å‚æ•°"><a href="#1-2-æ¨¡æ¿ç±»å®šä¹‰ä¸å‚æ•°" class="headerlink" title="1.2 æ¨¡æ¿ç±»å®šä¹‰ä¸å‚æ•°"></a>1.2 æ¨¡æ¿ç±»å®šä¹‰ä¸å‚æ•°</h3><p><code>std::unique_ptr</code> æ˜¯ä¸€ä¸ªç±»æ¨¡æ¿ï¼Œå…¶å®šä¹‰ä½äº <code>&lt;memory&gt;</code> å¤´æ–‡ä»¶ä¸­ã€‚å®ƒæœ‰ä¸¤ç§å½¢å¼ï¼šä¸€ç§ç”¨äºç®¡ç†å•ä¸ªå¯¹è±¡ï¼Œå¦ä¸€ç§ç”¨äºç®¡ç†åŠ¨æ€åˆ†é…çš„æ•°ç»„ã€‚</p><h4 id="1-2-1-æ¨¡æ¿å‚æ•°-Tï¼šè¢«ç®¡ç†çš„å¯¹è±¡ç±»å‹"><a href="#1-2-1-æ¨¡æ¿å‚æ•°-Tï¼šè¢«ç®¡ç†çš„å¯¹è±¡ç±»å‹" class="headerlink" title="1.2.1 æ¨¡æ¿å‚æ•° Tï¼šè¢«ç®¡ç†çš„å¯¹è±¡ç±»å‹"></a>1.2.1 æ¨¡æ¿å‚æ•° Tï¼šè¢«ç®¡ç†çš„å¯¹è±¡ç±»å‹</h4><p>ç¬¬ä¸€ä¸ªæ¨¡æ¿å‚æ•° <code>T</code> æŒ‡å®šäº† <code>unique_ptr</code> æ‰€ç®¡ç†çš„å¯¹è±¡çš„ç±»å‹ã€‚ä¾‹å¦‚ï¼Œ<code>std::unique_ptr&lt;int&gt;</code> ç®¡ç†ä¸€ä¸ª <code>int</code> ç±»å‹çš„å¯¹è±¡ï¼Œè€Œ <code>std::unique_ptr&lt;MyClass&gt;</code> åˆ™ç®¡ç†ä¸€ä¸ª <code>MyClass</code> ç±»å‹çš„å¯¹è±¡ã€‚</p><p>åœ¨ <code>unique_ptr</code> çš„å†…éƒ¨ï¼Œè¿™ä¸ªç±»å‹è¢«åˆ«åä¸º <code>element_type</code>ã€‚å¯¹äºæ•°ç»„ç‰¹åŒ–ç‰ˆæœ¬ <code>unique_ptr&lt;T[]&gt;</code>ï¼Œ<code>T</code> è¡¨ç¤ºæ•°ç»„å…ƒç´ çš„ç±»å‹ã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœ <code>T</code> æ˜¯ä¸€ä¸ªå¼•ç”¨ç±»å‹ï¼Œé‚£ä¹ˆå®ä¾‹åŒ– <code>unique_ptr&lt;T&gt;</code> çš„ç¨‹åºæ˜¯æ ¼å¼é”™è¯¯çš„ã€‚</p><h4 id="1-2-2-æ¨¡æ¿å‚æ•°-Deleterï¼šè‡ªå®šä¹‰åˆ é™¤å™¨ç±»å‹"><a href="#1-2-2-æ¨¡æ¿å‚æ•°-Deleterï¼šè‡ªå®šä¹‰åˆ é™¤å™¨ç±»å‹" class="headerlink" title="1.2.2 æ¨¡æ¿å‚æ•° Deleterï¼šè‡ªå®šä¹‰åˆ é™¤å™¨ç±»å‹"></a>1.2.2 æ¨¡æ¿å‚æ•° Deleterï¼šè‡ªå®šä¹‰åˆ é™¤å™¨ç±»å‹</h4><p>ç¬¬äºŒä¸ªæ¨¡æ¿å‚æ•° <code>Deleter</code> æ˜¯ä¸€ä¸ªå¯é€‰å‚æ•°ï¼Œç”¨äºæŒ‡å®šä¸€ä¸ªå¯è°ƒç”¨å¯¹è±¡ï¼ˆå‡½æ•°å¯¹è±¡æˆ–å‡½æ•°æŒ‡é’ˆï¼‰ï¼Œè¯¥å¯¹è±¡å®šä¹‰äº†å¦‚ä½•é”€æ¯è¢«ç®¡ç†çš„èµ„æºã€‚è¿™ä¸ªç±»å‹åœ¨ <code>unique_ptr</code> å†…éƒ¨è¢«åˆ«åä¸º <code>deleter_type</code>ã€‚</p><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œ<code>Deleter</code> æ˜¯ <code>std::default_delete&lt;T&gt;</code>ï¼Œå®ƒç®€å•åœ°è°ƒç”¨ <code>delete</code> æ¥é‡Šæ”¾å†…å­˜ã€‚ç„¶è€Œï¼Œé€šè¿‡æä¾›è‡ªå®šä¹‰çš„åˆ é™¤å™¨ï¼Œ<code>unique_ptr</code> å¯ä»¥ç®¡ç†ä»»ä½•éœ€è¦ç‰¹æ®Šæ¸…ç†é€»è¾‘çš„èµ„æºã€‚</p><p><code>Deleter</code> å¿…é¡»æ˜¯ä¸€ä¸ªå¯è°ƒç”¨å¯¹è±¡ï¼Œèƒ½å¤Ÿæ¥å—ä¸€ä¸ª <code>unique_ptr::pointer</code> ç±»å‹çš„å‚æ•°ã€‚å°† <code>Deleter</code> ä½œä¸ºæ¨¡æ¿å‚æ•°æ˜¯å®ç°é›¶å¼€é”€æŠ½è±¡çš„å…³é”®ï¼Œå› ä¸ºå®ƒå…è®¸ç¼–è¯‘å™¨åœ¨ç¼–è¯‘æ—¶å†…è”åˆ é™¤å™¨çš„è°ƒç”¨ï¼Œä»è€Œé¿å…äº†è¿è¡Œæ—¶çš„é¢å¤–å¼€é”€ã€‚</p><h4 id="1-2-3-é»˜è®¤åˆ é™¤å™¨-std-default-delete"><a href="#1-2-3-é»˜è®¤åˆ é™¤å™¨-std-default-delete" class="headerlink" title="1.2.3 é»˜è®¤åˆ é™¤å™¨ std::default_delete"></a>1.2.3 é»˜è®¤åˆ é™¤å™¨ std::default_delete<T></h4><p><code>std::default_delete&lt;T&gt;</code> æ˜¯ <code>unique_ptr</code> çš„é»˜è®¤åˆ é™¤å™¨ã€‚å®ƒæ˜¯ä¸€ä¸ªæ— çŠ¶æ€çš„å‡½æ•°å¯¹è±¡ï¼ˆfunctorï¼‰ï¼Œå…¶ <code>operator()</code> ç®€å•åœ°è°ƒç”¨ <code>delete</code> æ¥é”€æ¯å…¶ç®¡ç†çš„å¯¹è±¡ã€‚</p><p>å¯¹äºæ•°ç»„ç‰¹åŒ–ç‰ˆæœ¬ <code>unique_ptr&lt;T[]&gt;</code>ï¼Œ<code>default_delete&lt;T[]&gt;</code> ä¼šè°ƒç”¨ <code>delete[]</code> æ¥é‡Šæ”¾æ•°ç»„ã€‚</p><p><code>default_delete</code> çš„è®¾è®¡éå¸¸é«˜æ•ˆï¼Œå› ä¸ºå®ƒæ˜¯ä¸€ä¸ªç©ºç±»ï¼ˆempty classï¼‰ï¼Œä¸åŒ…å«ä»»ä½•æ•°æ®æˆå‘˜ã€‚è¿™ä½¿å¾— <code>unique_ptr</code> å¯ä»¥åˆ©ç”¨<strong>ç©ºåŸºç±»ä¼˜åŒ–ï¼ˆEBOï¼‰</strong> æŠ€æœ¯ï¼Œåœ¨ä¸å¢åŠ é¢å¤–å†…å­˜å¼€é”€çš„æƒ…å†µä¸‹å­˜å‚¨åˆ é™¤å™¨ã€‚</p><p>å½“ä½¿ç”¨é»˜è®¤åˆ é™¤å™¨æ—¶ï¼Œ<code>unique_ptr</code> çš„å¤§å°é€šå¸¸ä¸åŸå§‹æŒ‡é’ˆç›¸åŒï¼Œä¿è¯äº†å…¶è½»é‡çº§çš„ç‰¹æ€§ã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœä½¿ç”¨ <code>default_delete</code>ï¼Œè¢«ç®¡ç†çš„ç±»å‹ <code>T</code> åœ¨ <code>unique_ptr</code> çš„ææ„å‡½æ•°ã€ç§»åŠ¨èµ‹å€¼è¿ç®—ç¬¦å’Œ <code>reset</code> æˆå‘˜å‡½æ•°è¢«å®ä¾‹åŒ–çš„åœ°æ–¹å¿…é¡»æ˜¯å®Œæ•´ç±»å‹ï¼ˆcomplete typeï¼‰ã€‚</p><h3 id="1-3-å†…éƒ¨ç±»å‹å®šä¹‰"><a href="#1-3-å†…éƒ¨ç±»å‹å®šä¹‰" class="headerlink" title="1.3 å†…éƒ¨ç±»å‹å®šä¹‰"></a>1.3 å†…éƒ¨ç±»å‹å®šä¹‰</h3><p>ä¸ºäº†æ–¹ä¾¿ä½¿ç”¨å’Œæé«˜ä»£ç çš„å¯è¯»æ€§ï¼Œ<code>unique_ptr</code> å®šä¹‰äº†å‡ ä¸ªå†…éƒ¨ç±»å‹åˆ«åã€‚</p><h4 id="1-3-1-element-typeï¼šè¢«ç®¡ç†å¯¹è±¡çš„ç±»å‹åˆ«å"><a href="#1-3-1-element-typeï¼šè¢«ç®¡ç†å¯¹è±¡çš„ç±»å‹åˆ«å" class="headerlink" title="1.3.1 element_typeï¼šè¢«ç®¡ç†å¯¹è±¡çš„ç±»å‹åˆ«å"></a>1.3.1 element_typeï¼šè¢«ç®¡ç†å¯¹è±¡çš„ç±»å‹åˆ«å</h4><p><code>element_type</code> æ˜¯æ¨¡æ¿å‚æ•° <code>T</code> çš„åˆ«åã€‚å®ƒä»£è¡¨äº† <code>unique_ptr</code> æ‰€ç®¡ç†çš„å¯¹è±¡çš„ç±»å‹ã€‚ä¾‹å¦‚ï¼Œåœ¨ <code>std::unique_ptr&lt;int&gt;</code> ä¸­ï¼Œ<code>element_type</code> å°±æ˜¯ <code>int</code>ã€‚</p><p>è¿™ä¸ªåˆ«ååœ¨ç¼–å†™æ³›å‹ä»£ç æ—¶éå¸¸æœ‰ç”¨ï¼Œå› ä¸ºå®ƒå…è®¸åœ¨ä¸æ˜ç¡®çŸ¥é“ <code>T</code> çš„å…·ä½“ç±»å‹çš„æƒ…å†µä¸‹ï¼Œå¼•ç”¨è¢«ç®¡ç†å¯¹è±¡çš„ç±»å‹ã€‚</p><h4 id="1-3-2-deleter-typeï¼šåˆ é™¤å™¨çš„ç±»å‹åˆ«å"><a href="#1-3-2-deleter-typeï¼šåˆ é™¤å™¨çš„ç±»å‹åˆ«å" class="headerlink" title="1.3.2 deleter_typeï¼šåˆ é™¤å™¨çš„ç±»å‹åˆ«å"></a>1.3.2 deleter_typeï¼šåˆ é™¤å™¨çš„ç±»å‹åˆ«å</h4><p><code>deleter_type</code> æ˜¯æ¨¡æ¿å‚æ•° <code>Deleter</code> çš„åˆ«åã€‚å®ƒä»£è¡¨äº†ç”¨äºé”€æ¯è¢«ç®¡ç†å¯¹è±¡çš„åˆ é™¤å™¨çš„ç±»å‹ã€‚ä¾‹å¦‚ï¼Œåœ¨ <code>std::unique_ptr&lt;int, MyDeleter&gt;</code> ä¸­ï¼Œ<code>deleter_type</code> å°±æ˜¯ <code>MyDeleter</code>ã€‚</p><p>è¿™ä¸ªåˆ«ååŒæ ·æœ‰åŠ©äºç¼–å†™æ³›å‹ä»£ç ï¼Œä½¿å¾—ä»£ç å¯ä»¥çµæ´»åœ°å¤„ç†ä¸åŒç±»å‹çš„åˆ é™¤å™¨ã€‚</p><h4 id="1-3-3-pointerï¼šæŒ‡é’ˆç±»å‹åˆ«å"><a href="#1-3-3-pointerï¼šæŒ‡é’ˆç±»å‹åˆ«å" class="headerlink" title="1.3.3 pointerï¼šæŒ‡é’ˆç±»å‹åˆ«å"></a>1.3.3 pointerï¼šæŒ‡é’ˆç±»å‹åˆ«å</h4><p><code>pointer</code> æ˜¯ä¸€ä¸ªæ›´å¤æ‚çš„ç±»å‹åˆ«åï¼Œå®ƒå®šä¹‰äº† <code>unique_ptr</code> å†…éƒ¨ä½¿ç”¨çš„æŒ‡é’ˆç±»å‹ã€‚å®ƒçš„å®šä¹‰å¦‚ä¸‹ï¼š</p><ul><li>å¦‚æœ <code>Deleter</code> ç±»å‹ï¼ˆå»é™¤å¼•ç”¨åï¼‰æœ‰ä¸€ä¸ªåä¸º <code>pointer</code> çš„å†…éƒ¨ç±»å‹ï¼Œé‚£ä¹ˆ <code>unique_ptr::pointer</code> å°±æ˜¯è¿™ä¸ªç±»å‹ã€‚</li><li>å¦åˆ™ï¼Œ<code>pointer</code> å°±æ˜¯ <code>T*</code>ã€‚</li></ul><p>è¿™ä¸ªè®¾è®¡å…è®¸ <code>Deleter</code> æŒ‡å®šä¸€ä¸ªâ€æ™ºèƒ½â€æŒ‡é’ˆç±»å‹ï¼ˆä¾‹å¦‚ï¼Œä¸€ä¸ªç”¨äºå…±äº«å†…å­˜çš„åç§»æŒ‡é’ˆï¼‰ï¼Œè€Œä¸ä»…ä»…æ˜¯æ™®é€šçš„ <code>T*</code>ã€‚è¿™ä½¿å¾— <code>unique_ptr</code> èƒ½å¤Ÿä¸æ›´å¹¿æ³›çš„èµ„æºç®¡ç†æ–¹æ¡ˆé›†æˆã€‚</p><p><code>pointer</code> ç±»å‹å¿…é¡»æ»¡è¶³ <code>NullablePointer</code> çš„è¦æ±‚ï¼Œè¿™æ„å‘³ç€å®ƒå¯ä»¥è¢«é»˜è®¤æ„é€ ã€ä¸ <code>nullptr</code> è¿›è¡Œæ¯”è¾ƒï¼Œå¹¶ä¸”å¯ä»¥åƒåŸå§‹æŒ‡é’ˆä¸€æ ·ä½¿ç”¨ã€‚</p><h2 id="2-unique-ptr-çš„å¸¸ç”¨æ¥å£ä¸ç”¨æ³•"><a href="#2-unique-ptr-çš„å¸¸ç”¨æ¥å£ä¸ç”¨æ³•" class="headerlink" title="2. unique_ptr çš„å¸¸ç”¨æ¥å£ä¸ç”¨æ³•"></a>2. unique_ptr çš„å¸¸ç”¨æ¥å£ä¸ç”¨æ³•</h2><p><code>unique_ptr</code> æä¾›äº†ä¸€å¥—ä¸°å¯Œçš„æ¥å£ï¼Œç”¨äºç®¡ç†å…¶ç”Ÿå‘½å‘¨æœŸå’Œæ‰€æœ‰æƒã€‚è¿™äº›æ¥å£çš„è®¾è®¡æ—¨åœ¨æä¾›å®‰å…¨ã€é«˜æ•ˆä¸”ç›´è§‚çš„èµ„æºç®¡ç†æ–¹å¼ã€‚</p><h3 id="2-1-æ„é€ ä¸ææ„"><a href="#2-1-æ„é€ ä¸ææ„" class="headerlink" title="2.1 æ„é€ ä¸ææ„"></a>2.1 æ„é€ ä¸ææ„</h3><p><code>unique_ptr</code> çš„æ„é€ å‡½æ•°å’Œææ„å‡½æ•°æ˜¯å…¶èµ„æºç®¡ç†åŠŸèƒ½çš„æ ¸å¿ƒã€‚</p><h4 id="2-1-1-é»˜è®¤æ„é€ å‡½æ•°ï¼šåˆ›å»ºç©ºçš„-unique-ptr"><a href="#2-1-1-é»˜è®¤æ„é€ å‡½æ•°ï¼šåˆ›å»ºç©ºçš„-unique-ptr" class="headerlink" title="2.1.1 é»˜è®¤æ„é€ å‡½æ•°ï¼šåˆ›å»ºç©ºçš„ unique_ptr"></a>2.1.1 é»˜è®¤æ„é€ å‡½æ•°ï¼šåˆ›å»ºç©ºçš„ unique_ptr</h4><p><code>unique_ptr</code> çš„é»˜è®¤æ„é€ å‡½æ•°åˆ›å»ºä¸€ä¸ªä¸æ‹¥æœ‰ä»»ä½•å¯¹è±¡çš„ <code>unique_ptr</code>ï¼Œå…¶å†…éƒ¨æŒ‡é’ˆè¢«åˆå§‹åŒ–ä¸º <code>nullptr</code>ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">std::unique_ptr&lt;<span class="type">int</span>&gt; ptr; <span class="comment">// ptr ä¸ç®¡ç†ä»»ä½•å¯¹è±¡ï¼Œget() è¿”å› nullptr</span></span><br></pre></td></tr></table></figure><p>è¿™ä¸ªæ„é€ å‡½æ•°æ˜¯ <code>noexcept</code> çš„ï¼Œå¹¶ä¸”è¦æ±‚åˆ é™¤å™¨ç±»å‹ <code>Deleter</code> æ˜¯å¯é»˜è®¤æ„é€ çš„ï¼Œä¸”å…¶æ„é€ è¿‡ç¨‹ä¸æŠ›å‡ºå¼‚å¸¸ã€‚</p><p>æ­¤å¤–ï¼Œ<code>unique_ptr</code> è¿˜æœ‰ä¸€ä¸ªæ¥å— <code>std::nullptr_t</code> çš„æ„é€ å‡½æ•°ï¼Œå…¶æ•ˆæœä¸é»˜è®¤æ„é€ å‡½æ•°ç›¸åŒï¼Œè¿™ä½¿å¾— <code>unique_ptr</code> å¯ä»¥è¢«æ˜¾å¼åœ°åˆå§‹åŒ–ä¸º <code>nullptr</code>ã€‚</p><h4 id="2-1-2-å¸¦æŒ‡é’ˆçš„æ„é€ å‡½æ•°ï¼šæ¥ç®¡åŸå§‹æŒ‡é’ˆ"><a href="#2-1-2-å¸¦æŒ‡é’ˆçš„æ„é€ å‡½æ•°ï¼šæ¥ç®¡åŸå§‹æŒ‡é’ˆ" class="headerlink" title="2.1.2 å¸¦æŒ‡é’ˆçš„æ„é€ å‡½æ•°ï¼šæ¥ç®¡åŸå§‹æŒ‡é’ˆ"></a>2.1.2 å¸¦æŒ‡é’ˆçš„æ„é€ å‡½æ•°ï¼šæ¥ç®¡åŸå§‹æŒ‡é’ˆ</h4><p><code>unique_ptr</code> æä¾›äº†ä¸€ä¸ªæ˜¾å¼çš„æ„é€ å‡½æ•°ï¼Œç”¨äºä»ä¸€ä¸ªåŸå§‹æŒ‡é’ˆæ¥ç®¡æ‰€æœ‰æƒã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">std::unique_ptr&lt;<span class="type">int</span>&gt; <span class="title">ptr</span><span class="params">(<span class="keyword">new</span> <span class="type">int</span>(<span class="number">42</span>))</span></span>; <span class="comment">// ptr ç°åœ¨æ‹¥æœ‰è¿™ä¸ª int å¯¹è±¡</span></span><br></pre></td></tr></table></figure><p>è¿™ä¸ªæ„é€ å‡½æ•°å°†ä¼ å…¥çš„æŒ‡é’ˆå­˜å‚¨åœ¨ <code>unique_ptr</code> å†…éƒ¨ï¼Œå¹¶è´Ÿè´£åœ¨ææ„æ—¶é‡Šæ”¾å®ƒã€‚è¿™ä¸ªæ„é€ å‡½æ•°ä¹Ÿæ˜¯ <code>noexcept</code> çš„ï¼Œå¹¶ä¸”è¦æ±‚åˆ é™¤å™¨æ˜¯å¯é»˜è®¤æ„é€ çš„ã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸€æ—¦å°†ä¸€ä¸ªåŸå§‹æŒ‡é’ˆäº¤ç»™ <code>unique_ptr</code> ç®¡ç†ï¼Œå°±ä¸åº”è¯¥å†æ‰‹åŠ¨ <code>delete</code> å®ƒï¼Œä¹Ÿä¸åº”è¯¥å†ä½¿ç”¨è¿™ä¸ªåŸå§‹æŒ‡é’ˆï¼Œå› ä¸º <code>unique_ptr</code> ä¼šåœ¨å…¶ç”Ÿå‘½å‘¨æœŸç»“æŸæ—¶è‡ªåŠ¨å¤„ç†é‡Šæ”¾ã€‚</p><h4 id="2-1-3-ç§»åŠ¨æ„é€ å‡½æ•°ï¼šè½¬ç§»æ‰€æœ‰æƒ"><a href="#2-1-3-ç§»åŠ¨æ„é€ å‡½æ•°ï¼šè½¬ç§»æ‰€æœ‰æƒ" class="headerlink" title="2.1.3 ç§»åŠ¨æ„é€ å‡½æ•°ï¼šè½¬ç§»æ‰€æœ‰æƒ"></a>2.1.3 ç§»åŠ¨æ„é€ å‡½æ•°ï¼šè½¬ç§»æ‰€æœ‰æƒ</h4><p><code>unique_ptr</code> çš„æ ¸å¿ƒç‰¹æ€§ä¹‹ä¸€æ˜¯å…¶ç§»åŠ¨è¯­ä¹‰ã€‚å®ƒæä¾›äº†ç§»åŠ¨æ„é€ å‡½æ•°ï¼Œå…è®¸å°†æ‰€æœ‰æƒä»ä¸€ä¸ª <code>unique_ptr</code> è½¬ç§»ç»™å¦ä¸€ä¸ªã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">std::unique_ptr&lt;<span class="type">int</span>&gt; <span class="title">ptr1</span><span class="params">(<span class="keyword">new</span> <span class="type">int</span>(<span class="number">42</span>))</span></span>;</span><br><span class="line"><span class="function">std::unique_ptr&lt;<span class="type">int</span>&gt; <span class="title">ptr2</span><span class="params">(std::move(ptr1))</span></span>; <span class="comment">// æ‰€æœ‰æƒä» ptr1 è½¬ç§»åˆ° ptr2</span></span><br><span class="line"><span class="comment">// ç°åœ¨ ptr1 ä¸º nullptrï¼Œptr2 æ‹¥æœ‰è¯¥å¯¹è±¡</span></span><br></pre></td></tr></table></figure><p>ç§»åŠ¨æ„é€ å‡½æ•°æ˜¯ <code>noexcept</code> çš„ï¼Œå¹¶ä¸”è¦æ±‚åˆ é™¤å™¨æ˜¯å¯ç§»åŠ¨æ„é€ çš„ï¼ˆå¦‚æœ <code>Deleter</code> ä¸æ˜¯å¼•ç”¨ç±»å‹ï¼‰ã€‚</p><p>æ­¤å¤–ï¼Œ<code>unique_ptr</code> è¿˜æ”¯æŒä»ä¸€ä¸ªä¸åŒç±»å‹çš„ <code>unique_ptr</code> è¿›è¡Œç§»åŠ¨æ„é€ ï¼Œåªè¦æºæŒ‡é’ˆç±»å‹å¯ä»¥éšå¼è½¬æ¢ä¸ºç›®æ ‡æŒ‡é’ˆç±»å‹ï¼Œå¹¶ä¸”æºåˆ é™¤å™¨ç±»å‹å¯ä»¥è½¬æ¢ä¸ºç›®æ ‡åˆ é™¤å™¨ç±»å‹ã€‚è¿™ç§è·¨ç±»å‹çš„ç§»åŠ¨æ„é€ åœ¨å¤„ç†ç»§æ‰¿å±‚æ¬¡ç»“æ„æ—¶éå¸¸æœ‰ç”¨ã€‚</p><h4 id="2-1-4-ææ„å‡½æ•°ï¼šè‡ªåŠ¨é‡Šæ”¾èµ„æº"><a href="#2-1-4-ææ„å‡½æ•°ï¼šè‡ªåŠ¨é‡Šæ”¾èµ„æº" class="headerlink" title="2.1.4 ææ„å‡½æ•°ï¼šè‡ªåŠ¨é‡Šæ”¾èµ„æº"></a>2.1.4 ææ„å‡½æ•°ï¼šè‡ªåŠ¨é‡Šæ”¾èµ„æº</h4><p><code>unique_ptr</code> çš„ææ„å‡½æ•°æ˜¯å…¶ RAII æœºåˆ¶çš„å…³é”®ã€‚å½“ä¸€ä¸ª <code>unique_ptr</code> å¯¹è±¡è¢«é”€æ¯æ—¶ï¼Œå…¶ææ„å‡½æ•°ä¼šæ£€æŸ¥å®ƒæ˜¯å¦æ‹¥æœ‰ä¸€ä¸ªå¯¹è±¡ã€‚å¦‚æœæ‹¥æœ‰ï¼Œææ„å‡½æ•°ä¼šè°ƒç”¨å…¶å­˜å‚¨çš„åˆ é™¤å™¨æ¥é”€æ¯è¯¥å¯¹è±¡ã€‚</p><p>ä¾‹å¦‚ï¼Œå¯¹äºé»˜è®¤åˆ é™¤å™¨ï¼Œå®ƒä¼šè°ƒç”¨ <code>delete</code>ã€‚ææ„å‡½æ•°è¦æ±‚ <code>get_deleter()(get())</code> è¿™ä¸ªè¡¨è¾¾å¼æ˜¯åˆæ³•çš„ï¼Œå¹¶ä¸”ä¸ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚</p><p>è¿™ç§è‡ªåŠ¨é‡Šæ”¾æœºåˆ¶ç¡®ä¿äº†å³ä½¿åœ¨å‘ç”Ÿå¼‚å¸¸çš„æƒ…å†µä¸‹ï¼Œèµ„æºä¹Ÿèƒ½è¢«æ­£ç¡®æ¸…ç†ï¼Œä»è€Œæå¤§åœ°æé«˜äº†ä»£ç çš„å¥å£®æ€§ã€‚</p><h3 id="2-2-æ‰€æœ‰æƒç®¡ç†æ ¸å¿ƒæ¥å£"><a href="#2-2-æ‰€æœ‰æƒç®¡ç†æ ¸å¿ƒæ¥å£" class="headerlink" title="2.2 æ‰€æœ‰æƒç®¡ç†æ ¸å¿ƒæ¥å£"></a>2.2 æ‰€æœ‰æƒç®¡ç†æ ¸å¿ƒæ¥å£</h3><p><code>unique_ptr</code> æä¾›äº†ä¸€ç»„æ ¸å¿ƒæ¥å£ï¼Œç”¨äºåœ¨ä¸è½¬ç§»æ‰€æœ‰æƒçš„æƒ…å†µä¸‹è§‚å¯Ÿå’Œæ“ä½œå…¶ç®¡ç†çš„å¯¹è±¡ã€‚</p><h4 id="2-2-1-get-ï¼šè·å–åŸå§‹æŒ‡é’ˆï¼ˆä¸è½¬ç§»æ‰€æœ‰æƒï¼‰"><a href="#2-2-1-get-ï¼šè·å–åŸå§‹æŒ‡é’ˆï¼ˆä¸è½¬ç§»æ‰€æœ‰æƒï¼‰" class="headerlink" title="2.2.1 get()ï¼šè·å–åŸå§‹æŒ‡é’ˆï¼ˆä¸è½¬ç§»æ‰€æœ‰æƒï¼‰"></a>2.2.1 get()ï¼šè·å–åŸå§‹æŒ‡é’ˆï¼ˆä¸è½¬ç§»æ‰€æœ‰æƒï¼‰</h4><p><code>get()</code> æˆå‘˜å‡½æ•°è¿”å› <code>unique_ptr</code> å†…éƒ¨å­˜å‚¨çš„åŸå§‹æŒ‡é’ˆï¼Œä½†ä¸ä¼šè½¬ç§»æ‰€æœ‰æƒã€‚è°ƒç”¨ <code>get()</code> åï¼Œ<code>unique_ptr</code> ä»ç„¶æ‹¥æœ‰è¯¥å¯¹è±¡ï¼Œå¹¶å°†åœ¨å…¶ææ„æ—¶è´Ÿè´£é‡Šæ”¾å®ƒã€‚</p><p>è¿™ä¸ªå‡½æ•°é€šå¸¸ç”¨äºéœ€è¦ä¸åªæ¥å—åŸå§‹æŒ‡é’ˆçš„æ—§ç‰ˆ API è¿›è¡Œäº¤äº’çš„åœºæ™¯ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">std::unique_ptr&lt;<span class="type">int</span>&gt; <span class="title">ptr</span><span class="params">(<span class="keyword">new</span> <span class="type">int</span>(<span class="number">42</span>))</span></span>;</span><br><span class="line"><span class="type">int</span>* raw_ptr = ptr.<span class="built_in">get</span>(); <span class="comment">// raw_ptr æŒ‡å‘è¯¥å¯¹è±¡ï¼Œä½† ptr ä»ç„¶æ‹¥æœ‰å®ƒ</span></span><br><span class="line"><span class="comment">// ä¸è¦å¯¹ raw_ptr è°ƒç”¨ delete</span></span><br></pre></td></tr></table></figure><p><code>get()</code> æ˜¯ <code>noexcept</code> çš„ï¼Œå¹¶ä¸”è¿”å›çš„æŒ‡é’ˆç±»å‹æ˜¯ <code>unique_ptr::pointer</code>ã€‚</p><h4 id="2-2-2-release-ï¼šé‡Šæ”¾æ‰€æœ‰æƒå¹¶è¿”å›åŸå§‹æŒ‡é’ˆ"><a href="#2-2-2-release-ï¼šé‡Šæ”¾æ‰€æœ‰æƒå¹¶è¿”å›åŸå§‹æŒ‡é’ˆ" class="headerlink" title="2.2.2 release()ï¼šé‡Šæ”¾æ‰€æœ‰æƒå¹¶è¿”å›åŸå§‹æŒ‡é’ˆ"></a>2.2.2 release()ï¼šé‡Šæ”¾æ‰€æœ‰æƒå¹¶è¿”å›åŸå§‹æŒ‡é’ˆ</h4><p><code>release()</code> æˆå‘˜å‡½æ•°ä¼šæ–­å¼€ <code>unique_ptr</code> ä¸å…¶ç®¡ç†å¯¹è±¡ä¹‹é—´çš„å…³è”ï¼Œå¹¶è¿”å›è¯¥å¯¹è±¡çš„åŸå§‹æŒ‡é’ˆã€‚è°ƒç”¨ <code>release()</code> åï¼Œ<code>unique_ptr</code> å˜ä¸ºç©ºï¼ˆ<code>get() == nullptr</code>ï¼‰ï¼Œè€Œè°ƒç”¨è€…åˆ™è·å¾—äº†è¯¥å¯¹è±¡çš„æ‰€æœ‰æƒï¼Œå¹¶éœ€è¦è´Ÿè´£åœ¨é€‚å½“çš„æ—¶å€™æ‰‹åŠ¨é‡Šæ”¾å®ƒã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">std::unique_ptr&lt;<span class="type">int</span>&gt; <span class="title">ptr</span><span class="params">(<span class="keyword">new</span> <span class="type">int</span>(<span class="number">42</span>))</span></span>;</span><br><span class="line"><span class="type">int</span>* raw_ptr = ptr.<span class="built_in">release</span>(); <span class="comment">// ptr å˜ä¸ºç©ºï¼Œraw_ptr ç°åœ¨æ‹¥æœ‰è¯¥å¯¹è±¡</span></span><br><span class="line"><span class="comment">// ç°åœ¨å¿…é¡»å¯¹ raw_ptr è°ƒç”¨ delete: delete raw_ptr;</span></span><br></pre></td></tr></table></figure><p><code>release()</code> æ˜¯ <code>noexcept</code> çš„ï¼Œå®ƒé¦–å…ˆå°†å†…éƒ¨æŒ‡é’ˆè®¾ç½®ä¸º <code>nullptr</code>ï¼Œç„¶åè¿”å›å…¶å…ˆå‰çš„å€¼ã€‚</p><p>è¿™ä¸ªå‡½æ•°åœ¨éœ€è¦å°†æ‰€æœ‰æƒè½¬ç§»ç»™ä¸€ä¸ªä¸æ¥å— <code>unique_ptr</code> çš„å‡½æ•°æˆ– API æ—¶éå¸¸æœ‰ç”¨ã€‚</p><h4 id="2-2-3-reset-ï¼šé‡ç½®ç®¡ç†çš„å¯¹è±¡"><a href="#2-2-3-reset-ï¼šé‡ç½®ç®¡ç†çš„å¯¹è±¡" class="headerlink" title="2.2.3 reset()ï¼šé‡ç½®ç®¡ç†çš„å¯¹è±¡"></a>2.2.3 reset()ï¼šé‡ç½®ç®¡ç†çš„å¯¹è±¡</h4><p><code>reset()</code> æˆå‘˜å‡½æ•°ç”¨äºæ›¿æ¢ <code>unique_ptr</code> å½“å‰ç®¡ç†çš„å¯¹è±¡ã€‚å®ƒé¦–å…ˆä¼šé”€æ¯å½“å‰ç®¡ç†çš„å¯¹è±¡ï¼ˆå¦‚æœå­˜åœ¨ï¼‰ï¼Œç„¶åæ¥ç®¡æ–°ä¼ å…¥çš„æŒ‡é’ˆçš„æ‰€æœ‰æƒã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">std::unique_ptr&lt;<span class="type">int</span>&gt; <span class="title">ptr</span><span class="params">(<span class="keyword">new</span> <span class="type">int</span>(<span class="number">42</span>))</span></span>;</span><br><span class="line">ptr.<span class="built_in">reset</span>(<span class="keyword">new</span> <span class="built_in">int</span>(<span class="number">100</span>)); <span class="comment">// é”€æ¯æ—§çš„ int(42)ï¼Œå¹¶ç®¡ç†æ–°çš„ int(100)</span></span><br><span class="line">ptr.<span class="built_in">reset</span>(); <span class="comment">// é”€æ¯ int(100)ï¼Œå¹¶ä½¿ ptr å˜ä¸ºç©º</span></span><br></pre></td></tr></table></figure><p><code>reset()</code> å¯ä»¥æ¥å—ä¸€ä¸ªåŸå§‹æŒ‡é’ˆå‚æ•°ï¼Œä¹Ÿå¯ä»¥ä¸å¸¦å‚æ•°ï¼ˆé»˜è®¤ä¸º <code>nullptr</code>ï¼‰ã€‚å¦‚æœä¼ å…¥çš„æŒ‡é’ˆä¸å½“å‰ç®¡ç†çš„æŒ‡é’ˆç›¸åŒï¼Œ<code>reset()</code> ä¼šå…ˆå­˜å‚¨æ–°æŒ‡é’ˆï¼Œç„¶ååˆ é™¤æ—§æŒ‡é’ˆï¼Œè¿™å¯èƒ½å¯¼è‡´ä¼ å…¥çš„æŒ‡é’ˆè¢«ç«‹å³åˆ é™¤ã€‚</p><p><code>reset()</code> æ˜¯ <code>noexcept</code> çš„ï¼Œå¹¶ä¸”è¦æ±‚åˆ é™¤å™¨çš„è°ƒç”¨ä¸æŠ›å‡ºå¼‚å¸¸ã€‚</p><h4 id="2-2-4-swap-ï¼šäº¤æ¢ä¸¤ä¸ª-unique-ptr-çš„ç®¡ç†å¯¹è±¡"><a href="#2-2-4-swap-ï¼šäº¤æ¢ä¸¤ä¸ª-unique-ptr-çš„ç®¡ç†å¯¹è±¡" class="headerlink" title="2.2.4 swap()ï¼šäº¤æ¢ä¸¤ä¸ª unique_ptr çš„ç®¡ç†å¯¹è±¡"></a>2.2.4 swap()ï¼šäº¤æ¢ä¸¤ä¸ª unique_ptr çš„ç®¡ç†å¯¹è±¡</h4><p><code>swap()</code> æˆå‘˜å‡½æ•°ç”¨äºäº¤æ¢ä¸¤ä¸ª <code>unique_ptr</code> å¯¹è±¡çš„å†…å®¹ï¼ŒåŒ…æ‹¬å®ƒä»¬ç®¡ç†çš„æŒ‡é’ˆå’Œåˆ é™¤å™¨ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">std::unique_ptr&lt;<span class="type">int</span>&gt; <span class="title">ptr1</span><span class="params">(<span class="keyword">new</span> <span class="type">int</span>(<span class="number">42</span>))</span></span>;</span><br><span class="line"><span class="function">std::unique_ptr&lt;<span class="type">int</span>&gt; <span class="title">ptr2</span><span class="params">(<span class="keyword">new</span> <span class="type">int</span>(<span class="number">100</span>))</span></span>;</span><br><span class="line">ptr1.<span class="built_in">swap</span>(ptr2); <span class="comment">// ç°åœ¨ ptr1 ç®¡ç† int(100)ï¼Œptr2 ç®¡ç† int(42)</span></span><br></pre></td></tr></table></figure><p><code>swap()</code> æ˜¯ <code>noexcept</code> çš„ï¼Œå¹¶ä¸”é€šå¸¸å…·æœ‰å¸¸æ•°æ—¶é—´å¤æ‚åº¦ã€‚</p><p>æ­¤å¤–ï¼Œæ ‡å‡†åº“è¿˜æä¾›äº†ä¸€ä¸ªéæˆå‘˜çš„ <code>swap</code> å‡½æ•°æ¨¡æ¿ï¼Œä¸“é—¨ç”¨äº <code>unique_ptr</code>ï¼Œå®ƒä¹Ÿä¼šè°ƒç”¨æˆå‘˜ <code>swap</code> å‡½æ•°ã€‚</p><h3 id="2-3-å…¶ä»–é‡è¦æ“ä½œç¬¦ä¸å‡½æ•°"><a href="#2-3-å…¶ä»–é‡è¦æ“ä½œç¬¦ä¸å‡½æ•°" class="headerlink" title="2.3 å…¶ä»–é‡è¦æ“ä½œç¬¦ä¸å‡½æ•°"></a>2.3 å…¶ä»–é‡è¦æ“ä½œç¬¦ä¸å‡½æ•°</h3><p>é™¤äº†ä¸Šè¿°æ ¸å¿ƒæ¥å£ï¼Œ<code>unique_ptr</code> è¿˜æä¾›äº†ä¸€äº›æ“ä½œç¬¦å’Œè¾…åŠ©å‡½æ•°ï¼Œä½¿å…¶ä½¿ç”¨èµ·æ¥æ›´åƒä¸€ä¸ªåŸå§‹æŒ‡é’ˆã€‚</p><h4 id="2-3-1-operator-x3D-ï¼šç§»åŠ¨èµ‹å€¼è¿ç®—ç¬¦"><a href="#2-3-1-operator-x3D-ï¼šç§»åŠ¨èµ‹å€¼è¿ç®—ç¬¦" class="headerlink" title="2.3.1 operator&#x3D;ï¼šç§»åŠ¨èµ‹å€¼è¿ç®—ç¬¦"></a>2.3.1 operator&#x3D;ï¼šç§»åŠ¨èµ‹å€¼è¿ç®—ç¬¦</h4><p><code>unique_ptr</code> æä¾›äº†ç§»åŠ¨èµ‹å€¼è¿ç®—ç¬¦ï¼Œå…è®¸å°†ä¸€ä¸ª <code>unique_ptr</code> çš„æ‰€æœ‰æƒè½¬ç§»ç»™å¦ä¸€ä¸ªã€‚ä¸ç§»åŠ¨æ„é€ å‡½æ•°ç±»ä¼¼ï¼Œå®ƒä¼šé”€æ¯å·¦ä¾§ <code>unique_ptr</code> å½“å‰ç®¡ç†çš„å¯¹è±¡ï¼Œç„¶åæ¥ç®¡å³ä¾§ <code>unique_ptr</code> çš„æ‰€æœ‰æƒã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">std::unique_ptr&lt;<span class="type">int</span>&gt; <span class="title">ptr1</span><span class="params">(<span class="keyword">new</span> <span class="type">int</span>(<span class="number">42</span>))</span></span>;</span><br><span class="line">std::unique_ptr&lt;<span class="type">int</span>&gt; ptr2;</span><br><span class="line">ptr2 = std::<span class="built_in">move</span>(ptr1); <span class="comment">// æ‰€æœ‰æƒä» ptr1 è½¬ç§»åˆ° ptr2</span></span><br><span class="line"><span class="comment">// ç°åœ¨ ptr1 ä¸º nullptrï¼Œptr2 æ‹¥æœ‰è¯¥å¯¹è±¡</span></span><br></pre></td></tr></table></figure><p>ç§»åŠ¨èµ‹å€¼è¿ç®—ç¬¦æ˜¯ <code>noexcept</code> çš„ï¼Œå¹¶ä¸”è¦æ±‚åˆ é™¤å™¨æ˜¯å¯ç§»åŠ¨èµ‹å€¼çš„ï¼ˆå¦‚æœ <code>Deleter</code> ä¸æ˜¯å¼•ç”¨ç±»å‹ï¼‰ã€‚</p><p>å®ƒè¿˜æ”¯æŒä»ä¸€ä¸ªä¸åŒç±»å‹çš„ <code>unique_ptr</code> è¿›è¡Œç§»åŠ¨èµ‹å€¼ï¼Œåªè¦æ»¡è¶³ç›¸åº”çš„ç±»å‹è½¬æ¢è¦æ±‚ã€‚</p><h4 id="2-3-2-operator-ä¸-operator-gt-ï¼šè§£å¼•ç”¨æ“ä½œ"><a href="#2-3-2-operator-ä¸-operator-gt-ï¼šè§£å¼•ç”¨æ“ä½œ" class="headerlink" title="2.3.2 operator* ä¸ operator-&gt;ï¼šè§£å¼•ç”¨æ“ä½œ"></a>2.3.2 operator* ä¸ operator-&gt;ï¼šè§£å¼•ç”¨æ“ä½œ</h4><p>å¯¹äºéæ•°ç»„ç‰ˆæœ¬çš„ <code>unique_ptr</code>ï¼Œæä¾›äº† <code>operator*</code> å’Œ <code>operator-&gt;</code>ï¼Œä½¿å…¶å¯ä»¥åƒåŸå§‹æŒ‡é’ˆä¸€æ ·è¿›è¡Œè§£å¼•ç”¨ã€‚</p><ul><li><code>operator*</code> è¿”å›å¯¹æ‰€ç®¡ç†å¯¹è±¡çš„å¼•ç”¨ã€‚</li><li><code>operator-&gt;</code> è¿”å›å†…éƒ¨å­˜å‚¨çš„åŸå§‹æŒ‡é’ˆï¼Œå…è®¸è®¿é—®å¯¹è±¡çš„æˆå‘˜ã€‚</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">std::unique_ptr&lt;MyClass&gt; <span class="title">ptr</span><span class="params">(<span class="keyword">new</span> MyClass())</span></span>;</span><br><span class="line">ptr-&gt;<span class="built_in">doSomething</span>(); <span class="comment">// è°ƒç”¨ MyClass çš„æˆå‘˜å‡½æ•°</span></span><br><span class="line">(*ptr).<span class="built_in">doSomething</span>(); <span class="comment">// ç­‰ä»·äºä¸Šä¸€è¡Œ</span></span><br></pre></td></tr></table></figure><p>è¿™äº›æ“ä½œç¬¦ä½¿å¾— <code>unique_ptr</code> çš„ä½¿ç”¨ä½“éªŒä¸åŸå§‹æŒ‡é’ˆéå¸¸ç›¸ä¼¼ï¼Œä½†æä¾›äº†é¢å¤–çš„å®‰å…¨ä¿éšœã€‚</p><h4 id="2-3-3-operator-boolï¼šæ£€æŸ¥æ˜¯å¦ç®¡ç†å¯¹è±¡"><a href="#2-3-3-operator-boolï¼šæ£€æŸ¥æ˜¯å¦ç®¡ç†å¯¹è±¡" class="headerlink" title="2.3.3 operator boolï¼šæ£€æŸ¥æ˜¯å¦ç®¡ç†å¯¹è±¡"></a>2.3.3 operator boolï¼šæ£€æŸ¥æ˜¯å¦ç®¡ç†å¯¹è±¡</h4><p><code>unique_ptr</code> æä¾›äº†ä¸€ä¸ªè½¬æ¢åˆ° <code>bool</code> ç±»å‹çš„æ“ä½œç¬¦ï¼Œç”¨äºæ£€æŸ¥å…¶æ˜¯å¦ç®¡ç†ä¸€ä¸ªå¯¹è±¡ã€‚å¦‚æœ <code>unique_ptr</code> ä¸ä¸ºç©ºï¼ˆå³ <code>get() != nullptr</code>ï¼‰ï¼Œåˆ™è¿”å› <code>true</code>ï¼›å¦åˆ™è¿”å› <code>false</code>ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">std::unique_ptr&lt;<span class="type">int</span>&gt; <span class="title">ptr</span><span class="params">(<span class="keyword">new</span> <span class="type">int</span>(<span class="number">42</span>))</span></span>;</span><br><span class="line"><span class="keyword">if</span> (ptr) &#123;</span><br><span class="line">    <span class="comment">// ptr ç®¡ç†ä¸€ä¸ªå¯¹è±¡</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªæ“ä½œç¬¦ä½¿å¾—æ£€æŸ¥ <code>unique_ptr</code> çš„çŠ¶æ€å˜å¾—éå¸¸ç›´è§‚å’Œæ–¹ä¾¿ã€‚</p><h4 id="2-3-4-get-deleter-ï¼šè·å–åˆ é™¤å™¨"><a href="#2-3-4-get-deleter-ï¼šè·å–åˆ é™¤å™¨" class="headerlink" title="2.3.4 get_deleter()ï¼šè·å–åˆ é™¤å™¨"></a>2.3.4 get_deleter()ï¼šè·å–åˆ é™¤å™¨</h4><p><code>get_deleter()</code> æˆå‘˜å‡½æ•°è¿”å›ä¸€ä¸ªå¯¹ <code>unique_ptr</code> å†…éƒ¨å­˜å‚¨çš„åˆ é™¤å™¨çš„å¼•ç”¨ã€‚è¿™å…è®¸åœ¨è¿è¡Œæ—¶è®¿é—®å’Œä¿®æ”¹åˆ é™¤å™¨çš„çŠ¶æ€ï¼ˆå¦‚æœåˆ é™¤å™¨ä¸æ˜¯æ— çŠ¶æ€çš„ï¼‰ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">auto</span> deleter = [](<span class="type">int</span>* p) &#123; std::cout &lt;&lt; <span class="string">&quot;Deleting int\n&quot;</span>; <span class="keyword">delete</span> p; &#125;;</span><br><span class="line"><span class="function">std::unique_ptr&lt;<span class="type">int</span>, <span class="title">decltype</span><span class="params">(deleter)</span>&gt; <span class="title">ptr</span><span class="params">(<span class="keyword">new</span> <span class="type">int</span>(<span class="number">42</span>), deleter)</span></span>;</span><br><span class="line">ptr.<span class="built_in">get_deleter</span>()(<span class="keyword">new</span> <span class="built_in">int</span>(<span class="number">100</span>)); <span class="comment">// æ‰‹åŠ¨è°ƒç”¨åˆ é™¤å™¨</span></span><br></pre></td></tr></table></figure><p><code>get_deleter()</code> æœ‰ä¸¤ä¸ªé‡è½½ç‰ˆæœ¬ï¼Œä¸€ä¸ªè¿”å›éå¸¸é‡å¼•ç”¨ï¼Œå¦ä¸€ä¸ªè¿”å›å¸¸é‡å¼•ç”¨ã€‚</p><h2 id="3-unique-ptr-çš„å†…éƒ¨å®ç°é€»è¾‘"><a href="#3-unique-ptr-çš„å†…éƒ¨å®ç°é€»è¾‘" class="headerlink" title="3. unique_ptr çš„å†…éƒ¨å®ç°é€»è¾‘"></a>3. unique_ptr çš„å†…éƒ¨å®ç°é€»è¾‘</h2><p><code>unique_ptr</code> çš„é«˜æ•ˆæ€§å’Œå¼ºå¤§åŠŸèƒ½æºäºå…¶ç²¾å·§çš„å†…éƒ¨å®ç°ï¼Œç‰¹åˆ«æ˜¯å…¶å¯¹ç©ºåŸºç±»ä¼˜åŒ–ï¼ˆEBOï¼‰çš„åˆ©ç”¨ã€‚</p><h3 id="3-1-æ ¸å¿ƒæ•°æ®ç»“æ„"><a href="#3-1-æ ¸å¿ƒæ•°æ®ç»“æ„" class="headerlink" title="3.1 æ ¸å¿ƒæ•°æ®ç»“æ„"></a>3.1 æ ¸å¿ƒæ•°æ®ç»“æ„</h3><p><code>unique_ptr</code> çš„å†…éƒ¨å®ç°ä¸»è¦å›´ç»•ä¸¤ä¸ªæ ¸å¿ƒæ•°æ®æˆå‘˜ï¼šä¸€ä¸ªç”¨äºå­˜å‚¨è¢«ç®¡ç†å¯¹è±¡çš„åŸå§‹æŒ‡é’ˆï¼Œå¦ä¸€ä¸ªç”¨äºå­˜å‚¨åˆ é™¤å™¨ã€‚</p><h4 id="3-1-1-å­˜å‚¨åŸå§‹æŒ‡é’ˆ"><a href="#3-1-1-å­˜å‚¨åŸå§‹æŒ‡é’ˆ" class="headerlink" title="3.1.1 å­˜å‚¨åŸå§‹æŒ‡é’ˆ"></a>3.1.1 å­˜å‚¨åŸå§‹æŒ‡é’ˆ</h4><p><code>unique_ptr</code> å¿…é¡»å­˜å‚¨ä¸€ä¸ªæŒ‡å‘å…¶ç®¡ç†å¯¹è±¡çš„åŸå§‹æŒ‡é’ˆã€‚è¿™ä¸ªæŒ‡é’ˆçš„ç±»å‹ç”± <code>unique_ptr::pointer</code> å®šä¹‰ï¼Œé€šå¸¸æ˜¯ <code>T*</code>ï¼Œä½†åœ¨ä½¿ç”¨è‡ªå®šä¹‰åˆ é™¤å™¨æ—¶å¯èƒ½æ˜¯å…¶ä»–ç±»å‹ã€‚</p><p>è¿™ä¸ªæŒ‡é’ˆæ˜¯ <code>unique_ptr</code> çš„æ ¸å¿ƒï¼Œæ‰€æœ‰å¯¹ç®¡ç†å¯¹è±¡çš„è®¿é—®éƒ½é€šè¿‡è¿™ä¸ªæŒ‡é’ˆè¿›è¡Œã€‚</p><h4 id="3-1-2-å­˜å‚¨åˆ é™¤å™¨"><a href="#3-1-2-å­˜å‚¨åˆ é™¤å™¨" class="headerlink" title="3.1.2 å­˜å‚¨åˆ é™¤å™¨"></a>3.1.2 å­˜å‚¨åˆ é™¤å™¨</h4><p><code>unique_ptr</code> è¿˜éœ€è¦å­˜å‚¨å…¶åˆ é™¤å™¨ã€‚åˆ é™¤å™¨çš„ç±»å‹æ˜¯ <code>Deleter</code>ï¼Œå®ƒå¯ä»¥æ˜¯ä»»ä½•å¯è°ƒç”¨å¯¹è±¡ã€‚</p><p>å°†åˆ é™¤å™¨ä½œä¸º <code>unique_ptr</code> çš„ä¸€éƒ¨åˆ†ï¼Œä½¿å¾— <code>unique_ptr</code> èƒ½å¤Ÿçµæ´»åœ°ç®¡ç†å„ç§éœ€è¦ç‰¹æ®Šæ¸…ç†é€»è¾‘çš„èµ„æºã€‚ç„¶è€Œï¼Œå¦‚æœåˆ é™¤å™¨æ˜¯ä¸€ä¸ªæœ‰çŠ¶æ€çš„ã€éç©ºçš„å¯¹è±¡ï¼Œç›´æ¥å°†å…¶ä½œä¸º <code>unique_ptr</code> çš„æˆå‘˜ä¼šå¢åŠ  <code>unique_ptr</code> çš„å¤§å°ï¼Œä»è€Œå¼•å…¥é¢å¤–çš„å†…å­˜å¼€é”€ã€‚</p><p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œ<code>unique_ptr</code> é‡‡ç”¨äº†<strong>ç©ºåŸºç±»ä¼˜åŒ–</strong>æŠ€æœ¯ã€‚</p><h3 id="3-2-ç©ºåŸºç±»ä¼˜åŒ–ï¼ˆEBOï¼‰"><a href="#3-2-ç©ºåŸºç±»ä¼˜åŒ–ï¼ˆEBOï¼‰" class="headerlink" title="3.2 ç©ºåŸºç±»ä¼˜åŒ–ï¼ˆEBOï¼‰"></a>3.2 ç©ºåŸºç±»ä¼˜åŒ–ï¼ˆEBOï¼‰</h3><p><strong>ç©ºåŸºç±»ä¼˜åŒ–ï¼ˆEmpty Base Optimization, EBOï¼‰</strong> æ˜¯ C++ ä¸­ä¸€é¡¹é‡è¦çš„ä¼˜åŒ–æŠ€æœ¯ï¼Œå®ƒå…è®¸ä¸€ä¸ªç©ºç±»ï¼ˆå³æ²¡æœ‰éé™æ€æ•°æ®æˆå‘˜çš„ç±»ï¼‰ä½œä¸ºåŸºç±»æ—¶ï¼Œä¸å ç”¨ä»»ä½•é¢å¤–çš„å†…å­˜ç©ºé—´ã€‚<code>unique_ptr</code> åˆ©ç”¨ EBO æ¥ä¼˜åŒ–å…¶å†…éƒ¨å­˜å‚¨ï¼Œç‰¹åˆ«æ˜¯å½“ä½¿ç”¨é»˜è®¤çš„æ— çŠ¶æ€åˆ é™¤å™¨æ—¶ã€‚</p><h4 id="3-2-1-å‹ç¼©ç©ºæŒ‡é’ˆï¼ˆCompressed-Pairï¼‰æŠ€æœ¯"><a href="#3-2-1-å‹ç¼©ç©ºæŒ‡é’ˆï¼ˆCompressed-Pairï¼‰æŠ€æœ¯" class="headerlink" title="3.2.1 å‹ç¼©ç©ºæŒ‡é’ˆï¼ˆCompressed Pairï¼‰æŠ€æœ¯"></a>3.2.1 å‹ç¼©ç©ºæŒ‡é’ˆï¼ˆCompressed Pairï¼‰æŠ€æœ¯</h4><p>ä¸ºäº†å®ç° EBOï¼Œ<code>unique_ptr</code> çš„å®ç°é€šå¸¸ä¾èµ–äºä¸€ä¸ªåä¸º <code>compressed_pair</code>ï¼ˆæˆ–ç±»ä¼¼åç§°ï¼‰çš„å†…éƒ¨è¾…åŠ©ç±»ã€‚è¿™ä¸ªç±»æ¨¡æ¿æ—¨åœ¨å­˜å‚¨ä¸¤ä¸ªå¯¹è±¡ï¼Œå¹¶åˆ©ç”¨ EBO æ¥æ¶ˆé™¤å…¶ä¸­ä¸€ä¸ªå¯¹è±¡ï¼ˆå¦‚æœå®ƒæ˜¯ç©ºçš„ï¼‰çš„å­˜å‚¨å¼€é”€ã€‚</p><p><code>compressed_pair</code> çš„å®ç°é€šå¸¸æ¶‰åŠæ¨¡æ¿ç‰¹åŒ–å’Œç»§æ‰¿ã€‚å®ƒä¼šæ£€æŸ¥ä¸¤ä¸ªæ¨¡æ¿å‚æ•°çš„ç±»å‹ï¼Œå¦‚æœå…¶ä¸­ä¸€ä¸ªç±»å‹æ˜¯ç©ºçš„ä¸”ä¸æ˜¯ <code>final</code> çš„ï¼Œå®ƒå°±ä¼šå°†è¯¥ç±»å‹ä½œä¸ºåŸºç±»ï¼Œè€Œå¦ä¸€ä¸ªç±»å‹ä½œä¸ºæˆå‘˜å˜é‡ã€‚è¿™æ ·ï¼Œå¦‚æœåˆ é™¤å™¨æ˜¯ä¸€ä¸ªç©ºç±»ï¼ˆå¦‚ <code>default_delete</code>ï¼‰ï¼Œå®ƒå°±ä¸ä¼šå ç”¨ä»»ä½•é¢å¤–çš„å†…å­˜ç©ºé—´ã€‚</p><h4 id="3-2-2-ä¼˜åŒ–ç©ºåˆ é™¤å™¨çš„å­˜å‚¨å¼€é”€"><a href="#3-2-2-ä¼˜åŒ–ç©ºåˆ é™¤å™¨çš„å­˜å‚¨å¼€é”€" class="headerlink" title="3.2.2 ä¼˜åŒ–ç©ºåˆ é™¤å™¨çš„å­˜å‚¨å¼€é”€"></a>3.2.2 ä¼˜åŒ–ç©ºåˆ é™¤å™¨çš„å­˜å‚¨å¼€é”€</h4><p>åœ¨ <code>unique_ptr</code> çš„å…¸å‹å®ç°ä¸­ï¼Œå…¶å”¯ä¸€çš„æˆå‘˜å˜é‡æ˜¯ä¸€ä¸ª <code>compressed_pair&lt;pointer, deleter_type&gt;</code>ã€‚å½“ä½¿ç”¨é»˜è®¤çš„ <code>default_delete&lt;T&gt;</code> æ—¶ï¼Œ<code>deleter_type</code> æ˜¯ä¸€ä¸ªç©ºç±»ã€‚<code>compressed_pair</code> ä¼šæ£€æµ‹åˆ°è¿™ä¸€ç‚¹ï¼Œå¹¶å°† <code>deleter_type</code> ä½œä¸ºå…¶åŸºç±»ã€‚ç”±äº EBOï¼Œè¿™ä¸ªåŸºç±»ä¸ä¼šå¢åŠ  <code>compressed_pair</code> çš„å¤§å°ã€‚</p><p>å› æ­¤ï¼Œ<code>unique_ptr</code> çš„æœ€ç»ˆå¤§å°å°±åªæœ‰ä¸€ä¸ªæŒ‡é’ˆçš„å¤§å°ï¼Œä¸åŸå§‹æŒ‡é’ˆå®Œå…¨ç›¸åŒï¼Œå®ç°äº†<strong>é›¶å¼€é”€æŠ½è±¡</strong>ã€‚</p><p>è¿™ç§ä¼˜åŒ–æ˜¯ <code>unique_ptr</code> å°† <code>Deleter</code> ä½œä¸ºæ¨¡æ¿å‚æ•°è€Œéæ„é€ å‡½æ•°å‚æ•°çš„å…³é”®åŸå› ï¼Œä¹Ÿæ˜¯å…¶æ€§èƒ½ä¼˜äº <code>shared_ptr</code> çš„é‡è¦å› ç´ ä¹‹ä¸€ã€‚</p><h3 id="3-3-ç§»åŠ¨è¯­ä¹‰çš„å®ç°"><a href="#3-3-ç§»åŠ¨è¯­ä¹‰çš„å®ç°" class="headerlink" title="3.3 ç§»åŠ¨è¯­ä¹‰çš„å®ç°"></a>3.3 ç§»åŠ¨è¯­ä¹‰çš„å®ç°</h3><p><code>unique_ptr</code> çš„ç‹¬å æ‰€æœ‰æƒè¯­ä¹‰æ˜¯é€šè¿‡ç¦ç”¨æ‹·è´æ“ä½œå¹¶å¯ç”¨ç§»åŠ¨æ“ä½œæ¥å®ç°çš„ã€‚</p><h4 id="3-3-1-åˆ é™¤æ‹·è´æ„é€ å‡½æ•°å’Œæ‹·è´èµ‹å€¼è¿ç®—ç¬¦"><a href="#3-3-1-åˆ é™¤æ‹·è´æ„é€ å‡½æ•°å’Œæ‹·è´èµ‹å€¼è¿ç®—ç¬¦" class="headerlink" title="3.3.1 åˆ é™¤æ‹·è´æ„é€ å‡½æ•°å’Œæ‹·è´èµ‹å€¼è¿ç®—ç¬¦"></a>3.3.1 åˆ é™¤æ‹·è´æ„é€ å‡½æ•°å’Œæ‹·è´èµ‹å€¼è¿ç®—ç¬¦</h4><p>ä¸ºäº†ç¡®ä¿æ‰€æœ‰æƒçš„å”¯ä¸€æ€§ï¼Œ<code>unique_ptr</code> æ˜ç¡®åœ°å°†æ‹·è´æ„é€ å‡½æ•°å’Œæ‹·è´èµ‹å€¼è¿ç®—ç¬¦å£°æ˜ä¸º <code>delete</code>ã€‚è¿™æ„å‘³ç€ä»»ä½•è¯•å›¾å¤åˆ¶ <code>unique_ptr</code> çš„ä»£ç éƒ½ä¼šåœ¨ç¼–è¯‘æ—¶å¤±è´¥ï¼Œä»è€Œä»æ ¹æœ¬ä¸Šé˜²æ­¢äº†æ‰€æœ‰æƒçš„å…±äº«ã€‚</p><h4 id="3-3-2-å®ç°ç§»åŠ¨æ„é€ å‡½æ•°å’Œç§»åŠ¨èµ‹å€¼è¿ç®—ç¬¦"><a href="#3-3-2-å®ç°ç§»åŠ¨æ„é€ å‡½æ•°å’Œç§»åŠ¨èµ‹å€¼è¿ç®—ç¬¦" class="headerlink" title="3.3.2 å®ç°ç§»åŠ¨æ„é€ å‡½æ•°å’Œç§»åŠ¨èµ‹å€¼è¿ç®—ç¬¦"></a>3.3.2 å®ç°ç§»åŠ¨æ„é€ å‡½æ•°å’Œç§»åŠ¨èµ‹å€¼è¿ç®—ç¬¦</h4><p><code>unique_ptr</code> æä¾›äº†ç§»åŠ¨æ„é€ å‡½æ•°å’Œç§»åŠ¨èµ‹å€¼è¿ç®—ç¬¦ï¼Œå®ƒä»¬å…è®¸å°†æ‰€æœ‰æƒä»ä¸€ä¸ª <code>unique_ptr</code> è½¬ç§»ç»™å¦ä¸€ä¸ªã€‚è¿™äº›å‡½æ•°çš„å®ç°é€šå¸¸æ¶‰åŠä»¥ä¸‹æ­¥éª¤ï¼š</p><ol><li>ä»æº <code>unique_ptr</code> ä¸­è·å–åŸå§‹æŒ‡é’ˆï¼ˆé€šè¿‡ <code>release()</code>ï¼‰ã€‚</li><li>å°†è·å–çš„æŒ‡é’ˆå­˜å‚¨åˆ°ç›®æ ‡ <code>unique_ptr</code> ä¸­ã€‚</li><li>å°†æº <code>unique_ptr</code> çš„åˆ é™¤å™¨ç§»åŠ¨æˆ–å¤åˆ¶åˆ°ç›®æ ‡ <code>unique_ptr</code> ä¸­ã€‚</li><li>ç¡®ä¿æº <code>unique_ptr</code> åœ¨æ“ä½œåå˜ä¸ºç©ºï¼ˆ<code>get() == nullptr</code>ï¼‰ã€‚</li></ol><p>é€šè¿‡è¿™ç§æ–¹å¼ï¼Œ<code>unique_ptr</code> å®ç°äº†æ‰€æœ‰æƒçš„æ˜ç¡®è½¬ç§»ï¼Œä¿è¯äº†åœ¨ä»»ä½•æ—¶å€™éƒ½åªæœ‰ä¸€ä¸ª <code>unique_ptr</code> å®ä¾‹è´Ÿè´£ç®¡ç†ä¸€ä¸ªç‰¹å®šçš„èµ„æºã€‚</p><h2 id="4-unique-ptr-ä¸-shared-ptr-çš„åŒºåˆ«"><a href="#4-unique-ptr-ä¸-shared-ptr-çš„åŒºåˆ«" class="headerlink" title="4. unique_ptr ä¸ shared_ptr çš„åŒºåˆ«"></a>4. unique_ptr ä¸ shared_ptr çš„åŒºåˆ«</h2><p><code>unique_ptr</code> å’Œ <code>shared_ptr</code> æ˜¯ C++ æ ‡å‡†åº“ä¸­ä¸¤ç§ä¸»è¦çš„æ™ºèƒ½æŒ‡é’ˆï¼Œå®ƒä»¬éƒ½ç”¨äºè‡ªåŠ¨ç®¡ç†åŠ¨æ€åˆ†é…çš„èµ„æºï¼Œä½†å…¶åº•å±‚æ‰€æœ‰æƒæ¨¡å‹ã€æ€§èƒ½å’Œé€‚ç”¨åœºæ™¯æœ‰æ˜¾è‘—ä¸åŒã€‚</p><h3 id="4-1-æ‰€æœ‰æƒæ¨¡å‹å¯¹æ¯”"><a href="#4-1-æ‰€æœ‰æƒæ¨¡å‹å¯¹æ¯”" class="headerlink" title="4.1 æ‰€æœ‰æƒæ¨¡å‹å¯¹æ¯”"></a>4.1 æ‰€æœ‰æƒæ¨¡å‹å¯¹æ¯”</h3><p>æ‰€æœ‰æƒæ¨¡å‹æ˜¯ <code>unique_ptr</code> å’Œ <code>shared_ptr</code> æœ€æ ¹æœ¬çš„åŒºåˆ«ã€‚</p><h4 id="4-1-1-unique-ptr-çš„ç‹¬å æ‰€æœ‰æƒ"><a href="#4-1-1-unique-ptr-çš„ç‹¬å æ‰€æœ‰æƒ" class="headerlink" title="4.1.1 unique_ptr çš„ç‹¬å æ‰€æœ‰æƒ"></a>4.1.1 unique_ptr çš„ç‹¬å æ‰€æœ‰æƒ</h4><p><code>unique_ptr</code> éµå¾ª<strong>ç‹¬å æ‰€æœ‰æƒæ¨¡å‹</strong>ã€‚åœ¨ä»»ä½•ç»™å®šæ—¶åˆ»ï¼Œåªæœ‰ä¸€ä¸ª <code>unique_ptr</code> å®ä¾‹å¯ä»¥æ‹¥æœ‰ä¸€ä¸ªç‰¹å®šçš„å¯¹è±¡ã€‚å½“è¿™ä¸ª <code>unique_ptr</code> è¢«é”€æ¯æ—¶ï¼Œå®ƒæ‰€æ‹¥æœ‰çš„å¯¹è±¡ä¹Ÿä¼šè¢«é”€æ¯ã€‚</p><p>è¿™ç§æ¨¡å‹ä¿è¯äº†èµ„æºé‡Šæ”¾çš„ç¡®å®šæ€§å’Œå³æ—¶æ€§ã€‚æ‰€æœ‰æƒçš„è½¬ç§»åªèƒ½é€šè¿‡ç§»åŠ¨è¯­ä¹‰ï¼ˆ<code>std::move</code>ï¼‰æ¥å®Œæˆï¼Œè¿™ä½¿å¾—æ‰€æœ‰æƒçš„è½¬ç§»åœ¨ä»£ç ä¸­éå¸¸æ˜ç¡®ã€‚</p><h4 id="4-1-2-shared-ptr-çš„å…±äº«æ‰€æœ‰æƒä¸å¼•ç”¨è®¡æ•°"><a href="#4-1-2-shared-ptr-çš„å…±äº«æ‰€æœ‰æƒä¸å¼•ç”¨è®¡æ•°" class="headerlink" title="4.1.2 shared_ptr çš„å…±äº«æ‰€æœ‰æƒä¸å¼•ç”¨è®¡æ•°"></a>4.1.2 shared_ptr çš„å…±äº«æ‰€æœ‰æƒä¸å¼•ç”¨è®¡æ•°</h4><p><code>shared_ptr</code> éµå¾ª<strong>å…±äº«æ‰€æœ‰æƒæ¨¡å‹</strong>ã€‚å¤šä¸ª <code>shared_ptr</code> å®ä¾‹å¯ä»¥åŒæ—¶æ‹¥æœ‰åŒä¸€ä¸ªå¯¹è±¡ã€‚ä¸ºäº†è·Ÿè¸ªæœ‰å¤šå°‘ä¸ª <code>shared_ptr</code> æ­£åœ¨å…±äº«ä¸€ä¸ªå¯¹è±¡ï¼Œ<code>shared_ptr</code> å†…éƒ¨ä½¿ç”¨äº†ä¸€ä¸ªå¼•ç”¨è®¡æ•°å™¨ã€‚</p><p>æ¯å½“ä¸€ä¸ªæ–°çš„ <code>shared_ptr</code> è¢«åˆ›å»ºå¹¶æŒ‡å‘è¯¥å¯¹è±¡æ—¶ï¼Œå¼•ç”¨è®¡æ•°åŠ ä¸€ï¼›æ¯å½“ä¸€ä¸ª <code>shared_ptr</code> è¢«é”€æ¯æˆ–é‡ç½®æ—¶ï¼Œå¼•ç”¨è®¡æ•°å‡ä¸€ã€‚å½“å¼•ç”¨è®¡æ•°å˜ä¸ºé›¶æ—¶ï¼Œæ„å‘³ç€æ²¡æœ‰ <code>shared_ptr</code> å†æ‹¥æœ‰è¯¥å¯¹è±¡ï¼Œæ­¤æ—¶å¯¹è±¡ä¼šè¢«è‡ªåŠ¨é”€æ¯ã€‚</p><p>è¿™ç§æ¨¡å‹æä¾›äº†æ›´å¤§çš„çµæ´»æ€§ï¼Œä½†ä¹Ÿå¼•å…¥äº†é¢å¤–çš„å¼€é”€å’Œæ½œåœ¨çš„å¾ªç¯å¼•ç”¨é—®é¢˜ã€‚</p><h3 id="4-2-å¤åˆ¶ä¸ç§»åŠ¨è¯­ä¹‰å¯¹æ¯”"><a href="#4-2-å¤åˆ¶ä¸ç§»åŠ¨è¯­ä¹‰å¯¹æ¯”" class="headerlink" title="4.2 å¤åˆ¶ä¸ç§»åŠ¨è¯­ä¹‰å¯¹æ¯”"></a>4.2 å¤åˆ¶ä¸ç§»åŠ¨è¯­ä¹‰å¯¹æ¯”</h3><p>æ‰€æœ‰æƒæ¨¡å‹çš„å·®å¼‚ç›´æ¥å¯¼è‡´äº†ä¸¤è€…åœ¨å¤åˆ¶å’Œç§»åŠ¨è¯­ä¹‰ä¸Šçš„ä¸åŒã€‚</p><h4 id="4-2-1-unique-ptr-ä»…æ”¯æŒç§»åŠ¨"><a href="#4-2-1-unique-ptr-ä»…æ”¯æŒç§»åŠ¨" class="headerlink" title="4.2.1 unique_ptr ä»…æ”¯æŒç§»åŠ¨"></a>4.2.1 unique_ptr ä»…æ”¯æŒç§»åŠ¨</h4><p><code>unique_ptr</code> æ˜ç¡®ç¦æ­¢æ‹·è´ï¼Œåªæ”¯æŒç§»åŠ¨ã€‚æ‹·è´æ„é€ å‡½æ•°å’Œæ‹·è´èµ‹å€¼è¿ç®—ç¬¦è¢«å£°æ˜ä¸º <code>delete</code>ï¼Œä»¥é˜²æ­¢æ‰€æœ‰æƒçš„æ„å¤–å…±äº«ã€‚ç§»åŠ¨æ“ä½œåˆ™é«˜æ•ˆåœ°è½¬ç§»æ‰€æœ‰æƒï¼Œæº <code>unique_ptr</code> åœ¨æ“ä½œåä¼šå˜ä¸ºç©ºã€‚</p><h4 id="4-2-2-shared-ptr-æ”¯æŒå¤åˆ¶å’Œç§»åŠ¨"><a href="#4-2-2-shared-ptr-æ”¯æŒå¤åˆ¶å’Œç§»åŠ¨" class="headerlink" title="4.2.2 shared_ptr æ”¯æŒå¤åˆ¶å’Œç§»åŠ¨"></a>4.2.2 shared_ptr æ”¯æŒå¤åˆ¶å’Œç§»åŠ¨</h4><p><code>shared_ptr</code> æ—¢æ”¯æŒæ‹·è´ä¹Ÿæ”¯æŒç§»åŠ¨ã€‚</p><ul><li><strong>æ‹·è´</strong>ï¼šå½“ä¸€ä¸ª <code>shared_ptr</code> è¢«æ‹·è´æ—¶ï¼Œæ–°çš„ <code>shared_ptr</code> ä¼šä¸åŸ <code>shared_ptr</code> å…±äº«åŒä¸€ä¸ªå¯¹è±¡ï¼Œå¹¶ä¸”å¼•ç”¨è®¡æ•°ä¼šåŠ ä¸€ã€‚</li><li><strong>ç§»åŠ¨</strong>ï¼šå½“ä¸€ä¸ª <code>shared_ptr</code> è¢«ç§»åŠ¨æ—¶ï¼Œæ‰€æœ‰æƒä¼šä»æº <code>shared_ptr</code> è½¬ç§»åˆ°ç›®æ ‡ <code>shared_ptr</code>ï¼Œæº <code>shared_ptr</code> ä¼šå˜ä¸ºç©ºã€‚ä¸æ‹·è´ä¸åŒï¼Œç§»åŠ¨æ“ä½œä¸ä¼šä¿®æ”¹å¼•ç”¨è®¡æ•°ï¼Œå› æ­¤æ€§èƒ½æ›´é«˜ã€‚</li></ul><h3 id="4-3-æ€§èƒ½ä¸å¼€é”€å¯¹æ¯”"><a href="#4-3-æ€§èƒ½ä¸å¼€é”€å¯¹æ¯”" class="headerlink" title="4.3 æ€§èƒ½ä¸å¼€é”€å¯¹æ¯”"></a>4.3 æ€§èƒ½ä¸å¼€é”€å¯¹æ¯”</h3><p>æ€§èƒ½å’Œå¼€é”€æ˜¯é€‰æ‹© <code>unique_ptr</code> è¿˜æ˜¯ <code>shared_ptr</code> æ—¶éœ€è¦è€ƒè™‘çš„é‡è¦å› ç´ ã€‚</p><h4 id="4-3-1-unique-ptr-çš„è½»é‡çº§ç‰¹æ€§"><a href="#4-3-1-unique-ptr-çš„è½»é‡çº§ç‰¹æ€§" class="headerlink" title="4.3.1 unique_ptr çš„è½»é‡çº§ç‰¹æ€§"></a>4.3.1 unique_ptr çš„è½»é‡çº§ç‰¹æ€§</h4><p><code>unique_ptr</code> æ˜¯ä¸€ä¸ªéå¸¸è½»é‡çº§çš„æ™ºèƒ½æŒ‡é’ˆã€‚åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œå®ƒçš„å¤§å°ä¸åŸå§‹æŒ‡é’ˆç›¸åŒï¼Œå› ä¸ºå®ƒåˆ©ç”¨äº†ç©ºåŸºç±»ä¼˜åŒ–æ¥æ¶ˆé™¤æ— çŠ¶æ€åˆ é™¤å™¨çš„å­˜å‚¨å¼€é”€ã€‚</p><p>å®ƒçš„æ“ä½œï¼ˆå¦‚æ„é€ ã€ææ„ã€ç§»åŠ¨ï¼‰é€šå¸¸ä¸åŸå§‹æŒ‡é’ˆçš„æ“ä½œä¸€æ ·é«˜æ•ˆï¼Œæ²¡æœ‰é¢å¤–çš„è¿è¡Œæ—¶å¼€é”€ã€‚</p><h4 id="4-3-2-shared-ptr-çš„å¼•ç”¨è®¡æ•°å¼€é”€"><a href="#4-3-2-shared-ptr-çš„å¼•ç”¨è®¡æ•°å¼€é”€" class="headerlink" title="4.3.2 shared_ptr çš„å¼•ç”¨è®¡æ•°å¼€é”€"></a>4.3.2 shared_ptr çš„å¼•ç”¨è®¡æ•°å¼€é”€</h4><p><code>shared_ptr</code> çš„æ€§èƒ½å¼€é”€ç›¸å¯¹è¾ƒå¤§ã€‚è¿™ä¸»è¦æºäºå…¶å†…éƒ¨çš„å¼•ç”¨è®¡æ•°æœºåˆ¶ã€‚</p><ul><li><strong>å†…å­˜å¼€é”€</strong>ï¼š<code>shared_ptr</code> éœ€è¦ä¸ºæ¯ä¸ªç®¡ç†çš„å¯¹è±¡åˆ†é…ä¸€ä¸ªé¢å¤–çš„æ§åˆ¶å—ï¼ˆcontrol blockï¼‰æ¥å­˜å‚¨å¼•ç”¨è®¡æ•°å’Œå¼±å¼•ç”¨è®¡æ•°ã€‚è¿™ä½¿å¾— <code>shared_ptr</code> æœ¬èº«çš„å¤§å°é€šå¸¸æ˜¯åŸå§‹æŒ‡é’ˆçš„ä¸¤å€ï¼ˆä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘å¯¹è±¡ï¼Œä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘æ§åˆ¶å—ï¼‰ã€‚</li><li><strong>è¿è¡Œæ—¶å¼€é”€</strong>ï¼šå¼•ç”¨è®¡æ•°çš„å¢å‡å¿…é¡»æ˜¯åŸå­æ“ä½œï¼Œä»¥ä¿è¯çº¿ç¨‹å®‰å…¨ã€‚è¿™äº›åŸå­æ“ä½œä¼šå¸¦æ¥ä¸€å®šçš„æ€§èƒ½å¼€é”€ï¼Œå°¤å…¶æ˜¯åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹é¢‘ç¹åˆ›å»ºå’Œé”€æ¯ <code>shared_ptr</code> æ—¶ã€‚</li></ul><table><thead><tr><th>ç‰¹æ€§</th><th>std::unique_ptr</th><th>std::shared_ptr</th></tr></thead><tbody><tr><td>æ‰€æœ‰æƒæ¨¡å‹</td><td>ç‹¬å æ‰€æœ‰æƒ</td><td>å…±äº«æ‰€æœ‰æƒ</td></tr><tr><td>å¤åˆ¶è¯­ä¹‰</td><td>ä¸æ”¯æŒï¼ˆè¢«åˆ é™¤ï¼‰</td><td>æ”¯æŒï¼ˆå¢åŠ å¼•ç”¨è®¡æ•°ï¼‰</td></tr><tr><td>ç§»åŠ¨è¯­ä¹‰</td><td>æ”¯æŒï¼ˆè½¬ç§»æ‰€æœ‰æƒï¼‰</td><td>æ”¯æŒï¼ˆè½¬ç§»æ‰€æœ‰æƒï¼Œä¸å¢åŠ è®¡æ•°ï¼‰</td></tr><tr><td>å†…å­˜å¼€é”€</td><td>ä¸€ä¸ªæŒ‡é’ˆå¤§å°ï¼ˆè½»é‡çº§ï¼‰</td><td>ä¸¤ä¸ªæŒ‡é’ˆå¤§å° + æ§åˆ¶å—ï¼ˆè¾ƒé‡ï¼‰</td></tr><tr><td>æ€§èƒ½å¼€é”€</td><td>æå°</td><td>å¼•ç”¨è®¡æ•°çš„åŸå­æ“ä½œå¼€é”€</td></tr><tr><td>å¾ªç¯å¼•ç”¨</td><td>ä¸å­˜åœ¨</td><td>å¯èƒ½å¯¼è‡´å†…å­˜æ³„æ¼ï¼ˆéœ€é…åˆ weak_ptrï¼‰</td></tr><tr><td>é€‚ç”¨åœºæ™¯</td><td>ç‹¬å èµ„æºã€æ€§èƒ½æ•æ„Ÿã€å·¥å‚å‡½æ•°</td><td>å…±äº«èµ„æºã€å¤æ‚æ•°æ®ç»“æ„ã€å¼‚æ­¥æ“ä½œ</td></tr></tbody></table><h3 id="4-4-é€‚ç”¨åœºæ™¯å¯¹æ¯”"><a href="#4-4-é€‚ç”¨åœºæ™¯å¯¹æ¯”" class="headerlink" title="4.4 é€‚ç”¨åœºæ™¯å¯¹æ¯”"></a>4.4 é€‚ç”¨åœºæ™¯å¯¹æ¯”</h3><p>åŸºäºä»¥ä¸ŠåŒºåˆ«ï¼Œ<code>unique_ptr</code> å’Œ <code>shared_ptr</code> é€‚ç”¨äºä¸åŒçš„åœºæ™¯ã€‚</p><h4 id="4-4-1-ä½•æ—¶é€‰æ‹©-unique-ptr"><a href="#4-4-1-ä½•æ—¶é€‰æ‹©-unique-ptr" class="headerlink" title="4.4.1 ä½•æ—¶é€‰æ‹© unique_ptr"></a>4.4.1 ä½•æ—¶é€‰æ‹© unique_ptr</h4><ul><li><strong>ç‹¬å æ‰€æœ‰æƒ</strong>ï¼šå½“èµ„æºçš„ç”Ÿå‘½å‘¨æœŸåº”è¯¥ç”±å•ä¸ªæ‰€æœ‰è€…æ˜ç¡®ç®¡ç†æ—¶ï¼Œåº”é¦–é€‰ <code>unique_ptr</code>ã€‚ä¾‹å¦‚ï¼Œåœ¨å·¥å‚å‡½æ•°ä¸­åˆ›å»ºå¹¶è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œæˆ–è€…åœ¨ç±»ä¸­ä½œä¸ºæˆå‘˜å˜é‡ç®¡ç†ä¸€ä¸ªåŠ¨æ€åˆ†é…çš„å­å¯¹è±¡ã€‚</li><li><strong>æ€§èƒ½æ•æ„Ÿ</strong>ï¼šåœ¨å¯¹æ€§èƒ½è¦æ±‚è¾ƒé«˜çš„åœºæ™¯ä¸‹ï¼Œåº”ä¼˜å…ˆä½¿ç”¨ <code>unique_ptr</code>ï¼Œå› ä¸ºå®ƒæ²¡æœ‰å¼•ç”¨è®¡æ•°çš„å¼€é”€ã€‚</li><li><strong>RAII å°è£…</strong>ï¼šå½“éœ€è¦å°è£…ä»»ä½•éœ€è¦ç‰¹æ®Šæ¸…ç†é€»è¾‘çš„èµ„æºï¼ˆå¦‚æ–‡ä»¶å¥æŸ„ã€æ•°æ®åº“è¿æ¥ç­‰ï¼‰æ—¶ï¼Œ<code>unique_ptr</code> é…åˆè‡ªå®šä¹‰åˆ é™¤å™¨æ˜¯ä¸€ä¸ªéå¸¸å¥½çš„é€‰æ‹©ã€‚</li></ul><h4 id="4-4-2-ä½•æ—¶é€‰æ‹©-shared-ptr"><a href="#4-4-2-ä½•æ—¶é€‰æ‹©-shared-ptr" class="headerlink" title="4.4.2 ä½•æ—¶é€‰æ‹© shared_ptr"></a>4.4.2 ä½•æ—¶é€‰æ‹© shared_ptr</h4><ul><li><strong>å…±äº«æ‰€æœ‰æƒ</strong>ï¼šå½“å¤šä¸ªå¯¹è±¡éœ€è¦å…±äº«åŒä¸€ä¸ªèµ„æºï¼Œå¹¶ä¸”èµ„æºçš„ç”Ÿå‘½å‘¨æœŸåº”è¯¥ç”±æœ€åä¸€ä¸ªä½¿ç”¨è€…å†³å®šæ—¶ï¼Œåº”ä½¿ç”¨ <code>shared_ptr</code>ã€‚ä¾‹å¦‚ï¼Œåœ¨å¤æ‚çš„å¯¹è±¡å…³ç³»å›¾ä¸­ï¼Œæˆ–è€…åœ¨ç¼“å­˜ç³»ç»Ÿä¸­ã€‚</li><li><strong>éœ€è¦å¤åˆ¶</strong>ï¼šå½“éœ€è¦å°†ä¸€ä¸ªæŒ‡é’ˆä¼ é€’ç»™å¤šä¸ªæ¥æ”¶è€…ï¼Œå¹¶ä¸”æ¯ä¸ªæ¥æ”¶è€…éƒ½å¯èƒ½å»¶é•¿è¯¥å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸæ—¶ï¼Œ<code>shared_ptr</code> çš„æ‹·è´è¯­ä¹‰éå¸¸æœ‰ç”¨ã€‚</li><li><strong>ä¸ weak_ptr é…åˆä½¿ç”¨</strong>ï¼šå½“éœ€è¦æ‰“ç ´å¾ªç¯å¼•ç”¨ï¼Œæˆ–è€…éœ€è¦è§‚å¯Ÿä¸€ä¸ªå¯¹è±¡ä½†ä¸æƒ³å½±å“å…¶ç”Ÿå‘½å‘¨æœŸæ—¶ï¼Œ<code>shared_ptr</code> å¯ä»¥ä¸ <code>weak_ptr</code> é…åˆä½¿ç”¨ã€‚</li></ul><h2 id="5-unique-ptr-çš„å®é™…åº”ç”¨åœºæ™¯"><a href="#5-unique-ptr-çš„å®é™…åº”ç”¨åœºæ™¯" class="headerlink" title="5. unique_ptr çš„å®é™…åº”ç”¨åœºæ™¯"></a>5. unique_ptr çš„å®é™…åº”ç”¨åœºæ™¯</h2><p><code>unique_ptr</code> å‡­å€Ÿå…¶é«˜æ•ˆã€å®‰å…¨å’Œè¯­ä¹‰æ¸…æ™°çš„ç‰¹æ€§ï¼Œåœ¨ç°ä»£ C++ ç¼–ç¨‹ä¸­æœ‰ç€å¹¿æ³›çš„åº”ç”¨ã€‚</p><h3 id="5-1-ç®¡ç†åŠ¨æ€åˆ†é…çš„å¯¹è±¡"><a href="#5-1-ç®¡ç†åŠ¨æ€åˆ†é…çš„å¯¹è±¡" class="headerlink" title="5.1 ç®¡ç†åŠ¨æ€åˆ†é…çš„å¯¹è±¡"></a>5.1 ç®¡ç†åŠ¨æ€åˆ†é…çš„å¯¹è±¡</h3><p><code>unique_ptr</code> æœ€å¸¸è§çš„ç”¨é€”æ˜¯ç®¡ç†é€šè¿‡ <code>new</code> åŠ¨æ€åˆ†é…çš„å¯¹è±¡ï¼Œç¡®ä¿å…¶å†…å­˜èƒ½å¤Ÿè¢«è‡ªåŠ¨é‡Šæ”¾ã€‚</p><h4 id="5-1-1-ä½œä¸ºç±»æˆå‘˜å˜é‡ï¼ˆpImpl-æƒ¯ç”¨æ³•ï¼‰"><a href="#5-1-1-ä½œä¸ºç±»æˆå‘˜å˜é‡ï¼ˆpImpl-æƒ¯ç”¨æ³•ï¼‰" class="headerlink" title="5.1.1 ä½œä¸ºç±»æˆå‘˜å˜é‡ï¼ˆpImpl æƒ¯ç”¨æ³•ï¼‰"></a>5.1.1 ä½œä¸ºç±»æˆå‘˜å˜é‡ï¼ˆpImpl æƒ¯ç”¨æ³•ï¼‰</h4><p>åœ¨ç±»è®¾è®¡ä¸­ï¼Œå°† <code>unique_ptr</code> ä½œä¸ºæˆå‘˜å˜é‡æ˜¯å®ç° <strong>pImplï¼ˆPointer to Implementationï¼‰</strong> æƒ¯ç”¨æ³•çš„ç†æƒ³é€‰æ‹©ã€‚pImpl æƒ¯ç”¨æ³•é€šè¿‡å°†å®ç°ç»†èŠ‚éšè—åœ¨ä¸€ä¸ªä¸é€æ˜çš„æŒ‡é’ˆåé¢ï¼Œæ¥å‡å°‘ç¼–è¯‘ä¾èµ–å’Œæ¥å£çš„ç¨³å®šæ€§ã€‚</p><p>ä½¿ç”¨ <code>unique_ptr</code> ä½œä¸ºè¿™ä¸ªæŒ‡é’ˆï¼Œå¯ä»¥è‡ªåŠ¨ç®¡ç†å®ç°å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸï¼Œæ— éœ€åœ¨ç±»çš„ææ„å‡½æ•°ä¸­æ‰‹åŠ¨ <code>delete</code>ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// MyClass.h</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyClass</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">MyClass</span>();</span><br><span class="line">    ~<span class="built_in">MyClass</span>();</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">doSomething</span><span class="params">()</span></span>;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Impl</span>; <span class="comment">// å‰å‘å£°æ˜</span></span><br><span class="line">    std::unique_ptr&lt;Impl&gt; pImpl;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// MyClass.cpp</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyClass</span>::Impl &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">doSomething</span><span class="params">()</span> </span>&#123; <span class="comment">/* ... */</span> &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">MyClass::<span class="built_in">MyClass</span>() : <span class="built_in">pImpl</span>(std::<span class="built_in">make_unique</span>&lt;Impl&gt;()) &#123;&#125;</span><br><span class="line">MyClass::~<span class="built_in">MyClass</span>() = <span class="keyword">default</span>; <span class="comment">// è‡ªåŠ¨ç”Ÿæˆï¼Œä¼šè°ƒç”¨ unique_ptr çš„ææ„å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">MyClass::doSomething</span><span class="params">()</span> </span>&#123; pImpl-&gt;<span class="built_in">doSomething</span>(); &#125;</span><br></pre></td></tr></table></figure><p>è¿™ç§æ–¹å¼ä¸ä»…ç®€åŒ–äº†ä»£ç ï¼Œè¿˜æä¾›äº†å¼ºå¤§çš„å¼‚å¸¸å®‰å…¨ä¿éšœã€‚</p><h4 id="5-1-2-åœ¨å‡½æ•°ä¸­ä¼ é€’å’Œè¿”å›æ‰€æœ‰æƒ"><a href="#5-1-2-åœ¨å‡½æ•°ä¸­ä¼ é€’å’Œè¿”å›æ‰€æœ‰æƒ" class="headerlink" title="5.1.2 åœ¨å‡½æ•°ä¸­ä¼ é€’å’Œè¿”å›æ‰€æœ‰æƒ"></a>5.1.2 åœ¨å‡½æ•°ä¸­ä¼ é€’å’Œè¿”å›æ‰€æœ‰æƒ</h4><p><code>unique_ptr</code> éå¸¸é€‚åˆåœ¨å‡½æ•°ä¹‹é—´ä¼ é€’å’Œè¿”å›åŠ¨æ€åˆ†é…å¯¹è±¡çš„æ‰€æœ‰æƒã€‚</p><ul><li><strong>ä½œä¸ºè¿”å›å€¼</strong>ï¼šå·¥å‚å‡½æ•°å¯ä»¥è¿”å›ä¸€ä¸ª <code>unique_ptr</code>ï¼Œå°†æ–°åˆ›å»ºå¯¹è±¡çš„æ‰€æœ‰æƒè½¬ç§»ç»™è°ƒç”¨è€…ã€‚</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">std::unique_ptr&lt;MyClass&gt; <span class="title">createMyClass</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> std::<span class="built_in">make_unique</span>&lt;MyClass&gt;();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><strong>ä½œä¸ºå‚æ•°</strong>ï¼šå‡½æ•°å¯ä»¥é€šè¿‡å€¼æˆ–å³å€¼å¼•ç”¨çš„æ–¹å¼æ¥æ”¶ <code>unique_ptr</code>ï¼Œä»¥æ¥ç®¡æ‰€æœ‰æƒã€‚</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">processMyClass</span><span class="params">(std::unique_ptr&lt;MyClass&gt; ptr)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// ptr ç°åœ¨æ‹¥æœ‰è¯¥å¯¹è±¡</span></span><br><span class="line">&#125; <span class="comment">// ptr ç¦»å¼€ä½œç”¨åŸŸï¼Œå¯¹è±¡è¢«é”€æ¯</span></span><br></pre></td></tr></table></figure><p>è¿™ç§æ–¹å¼ä½¿å¾—æ‰€æœ‰æƒçš„è½¬ç§»åœ¨ä»£ç ä¸­éå¸¸æ˜ç¡®ï¼Œé¿å…äº†æ‰€æœ‰æƒçš„æ··æ·†ã€‚</p><h3 id="5-2-ç®¡ç†åŠ¨æ€æ•°ç»„"><a href="#5-2-ç®¡ç†åŠ¨æ€æ•°ç»„" class="headerlink" title="5.2 ç®¡ç†åŠ¨æ€æ•°ç»„"></a>5.2 ç®¡ç†åŠ¨æ€æ•°ç»„</h3><p><code>unique_ptr</code> æä¾›äº†å¯¹åŠ¨æ€æ•°ç»„çš„ç‰¹åŒ–ç‰ˆæœ¬ <code>unique_ptr&lt;T[]&gt;</code>ï¼Œç”¨äºç®¡ç†é€šè¿‡ <code>new[]</code> åˆ†é…çš„æ•°ç»„ã€‚</p><h4 id="5-2-1-ä½¿ç”¨-unique-ptr-lt-T-gt"><a href="#5-2-1-ä½¿ç”¨-unique-ptr-lt-T-gt" class="headerlink" title="5.2.1 ä½¿ç”¨ unique_ptr&lt;T[]&gt;"></a>5.2.1 ä½¿ç”¨ unique_ptr&lt;T[]&gt;</h4><p><code>unique_ptr&lt;T[]&gt;</code> çš„ç‰¹åŒ–ç‰ˆæœ¬é‡è½½äº† <code>operator[]</code>ï¼Œå¹¶ç¡®ä¿åœ¨ææ„æ—¶è°ƒç”¨ <code>delete[]</code> è€Œä¸æ˜¯ <code>delete</code>ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">std::unique_ptr&lt;<span class="type">int</span>[]&gt; <span class="title">arr</span><span class="params">(<span class="keyword">new</span> <span class="type">int</span>[<span class="number">10</span>])</span></span>;</span><br></pre></td></tr></table></figure><p>è¿™ä½¿å¾—ç®¡ç†åŠ¨æ€æ•°ç»„å˜å¾—åƒç®¡ç†å•ä¸ªå¯¹è±¡ä¸€æ ·ç®€å•å’Œå®‰å…¨ã€‚</p><h4 id="5-2-2-è®¿é—®æ•°ç»„å…ƒç´ "><a href="#5-2-2-è®¿é—®æ•°ç»„å…ƒç´ " class="headerlink" title="5.2.2 è®¿é—®æ•°ç»„å…ƒç´ "></a>5.2.2 è®¿é—®æ•°ç»„å…ƒç´ </h4><p>å¯¹äº <code>unique_ptr&lt;T[]&gt;</code>ï¼Œå¯ä»¥ä½¿ç”¨ <code>operator[]</code> æ¥è®¿é—®æ•°ç»„çš„å…ƒç´ ï¼Œå°±åƒä½¿ç”¨æ™®é€šæ•°ç»„ä¸€æ ·ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">std::unique_ptr&lt;<span class="type">int</span>[]&gt; <span class="title">arr</span><span class="params">(<span class="keyword">new</span> <span class="type">int</span>[<span class="number">10</span>])</span></span>;</span><br><span class="line">arr[<span class="number">0</span>] = <span class="number">42</span>;</span><br><span class="line">std::cout &lt;&lt; arr[<span class="number">0</span>] &lt;&lt; std::endl;</span><br></pre></td></tr></table></figure><p>è¿™ç§æ–¹å¼æ¯”ä½¿ç”¨ <code>std::vector</code> æ›´è½»é‡ï¼Œä½†åŠŸèƒ½ä¹Ÿæ›´æœ‰é™ï¼Œå› ä¸ºå®ƒä¸æ”¯æŒåŠ¨æ€è°ƒæ•´å¤§å°ã€‚</p><h3 id="5-3-ä¸æ ‡å‡†åº“å®¹å™¨ç»“åˆä½¿ç”¨"><a href="#5-3-ä¸æ ‡å‡†åº“å®¹å™¨ç»“åˆä½¿ç”¨" class="headerlink" title="5.3 ä¸æ ‡å‡†åº“å®¹å™¨ç»“åˆä½¿ç”¨"></a>5.3 ä¸æ ‡å‡†åº“å®¹å™¨ç»“åˆä½¿ç”¨</h3><p><code>unique_ptr</code> å¯ä»¥ä½œä¸ºæ ‡å‡†åº“å®¹å™¨ï¼ˆå¦‚ <code>std::vector</code>ï¼‰çš„å…ƒç´ ç±»å‹ï¼Œç”¨äºåˆ›å»ºå¤šæ€å¯¹è±¡å®¹å™¨ã€‚</p><h4 id="5-3-1-åœ¨-vector-ä¸­å­˜å‚¨-unique-ptr"><a href="#5-3-1-åœ¨-vector-ä¸­å­˜å‚¨-unique-ptr" class="headerlink" title="5.3.1 åœ¨ vector ä¸­å­˜å‚¨ unique_ptr"></a>5.3.1 åœ¨ vector ä¸­å­˜å‚¨ unique_ptr</h4><p>ç”±äº <code>unique_ptr</code> ä¸å¯æ‹·è´ï¼Œä½†å¯ç§»åŠ¨ï¼Œå› æ­¤å¯ä»¥å°†å…¶å­˜å‚¨åœ¨ <code>std::vector</code> ä¸­ã€‚è¿™ä½¿å¾—å¯ä»¥åˆ›å»ºä¸€ä¸ªæ‹¥æœ‰å…¶å…ƒç´ çš„å®¹å™¨ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">std::vector&lt;std::unique_ptr&lt;MyClass&gt;&gt; vec;</span><br><span class="line">vec.<span class="built_in">push_back</span>(std::<span class="built_in">make_unique</span>&lt;MyClass&gt;());</span><br><span class="line">vec.<span class="built_in">push_back</span>(std::<span class="built_in">make_unique</span>&lt;MyClass&gt;());</span><br></pre></td></tr></table></figure><p>å½“ <code>vec</code> è¢«é”€æ¯æ—¶ï¼Œå…¶æ‰€æœ‰å…ƒç´ ï¼ˆå³ <code>unique_ptr</code> å¯¹è±¡ï¼‰ä¹Ÿä¼šè¢«é”€æ¯ï¼Œä»è€Œè‡ªåŠ¨é‡Šæ”¾æ‰€æœ‰ç®¡ç†çš„ <code>MyClass</code> å¯¹è±¡ã€‚</p><h4 id="5-3-2-å®ç°å¤šæ€å®¹å™¨"><a href="#5-3-2-å®ç°å¤šæ€å®¹å™¨" class="headerlink" title="5.3.2 å®ç°å¤šæ€å®¹å™¨"></a>5.3.2 å®ç°å¤šæ€å®¹å™¨</h4><p>é€šè¿‡å°†åŸºç±»çš„ <code>unique_ptr</code> å­˜å‚¨åœ¨å®¹å™¨ä¸­ï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ªå¤šæ€å®¹å™¨ï¼Œç”¨äºå­˜å‚¨ä¸åŒæ´¾ç”Ÿç±»çš„å¯¹è±¡ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">std::vector&lt;std::unique_ptr&lt;Base&gt;&gt; poly_vec;</span><br><span class="line">poly_vec.<span class="built_in">push_back</span>(std::<span class="built_in">make_unique</span>&lt;Derived1&gt;());</span><br><span class="line">poly_vec.<span class="built_in">push_back</span>(std::<span class="built_in">make_unique</span>&lt;Derived2&gt;());</span><br></pre></td></tr></table></figure><p>å½“ <code>poly_vec</code> è¢«é”€æ¯æ—¶ï¼Œæ‰€æœ‰ <code>Derived1</code> å’Œ <code>Derived2</code> å¯¹è±¡éƒ½ä¼šè¢«è‡ªåŠ¨æ­£ç¡®åœ°é”€æ¯ã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœé€šè¿‡åŸºç±» <code>unique_ptr</code> åˆ é™¤æ´¾ç”Ÿç±»å¯¹è±¡ï¼ŒåŸºç±»çš„ææ„å‡½æ•°å¿…é¡»æ˜¯è™šå‡½æ•°ï¼ˆ<code>virtual</code>ï¼‰ï¼Œå¦åˆ™ä¼šå¯¼è‡´æœªå®šä¹‰è¡Œä¸ºã€‚</p><h3 id="5-4-è‡ªå®šä¹‰åˆ é™¤å™¨çš„åº”ç”¨"><a href="#5-4-è‡ªå®šä¹‰åˆ é™¤å™¨çš„åº”ç”¨" class="headerlink" title="5.4 è‡ªå®šä¹‰åˆ é™¤å™¨çš„åº”ç”¨"></a>5.4 è‡ªå®šä¹‰åˆ é™¤å™¨çš„åº”ç”¨</h3><p><code>unique_ptr</code> çš„ç¬¬äºŒä¸ªæ¨¡æ¿å‚æ•° <code>Deleter</code> ä½¿å…¶èƒ½å¤Ÿç®¡ç†ä»»ä½•éœ€è¦ç‰¹æ®Šæ¸…ç†é€»è¾‘çš„èµ„æºï¼Œè€Œä¸ä»…ä»…æ˜¯é€šè¿‡ <code>new</code> åˆ†é…çš„å†…å­˜ã€‚</p><h4 id="5-4-1-ç®¡ç†æ–‡ä»¶å¥æŸ„ï¼ˆFILE-ï¼‰"><a href="#5-4-1-ç®¡ç†æ–‡ä»¶å¥æŸ„ï¼ˆFILE-ï¼‰" class="headerlink" title="5.4.1 ç®¡ç†æ–‡ä»¶å¥æŸ„ï¼ˆFILE*ï¼‰"></a>5.4.1 ç®¡ç†æ–‡ä»¶å¥æŸ„ï¼ˆFILE*ï¼‰</h4><p>è¿™æ˜¯ä¸€ä¸ªç»å…¸çš„è‡ªå®šä¹‰åˆ é™¤å™¨åº”ç”¨åœºæ™¯ã€‚C æ ‡å‡†åº“ä¸­çš„æ–‡ä»¶æ“ä½œä½¿ç”¨ <code>FILE*</code> å¥æŸ„ï¼Œéœ€è¦é€šè¿‡ <code>fclose</code> æ¥å…³é—­ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å®šä¹‰ä¸€ä¸ªè‡ªå®šä¹‰åˆ é™¤å™¨</span></span><br><span class="line"><span class="keyword">auto</span> file_deleter = [](std::FILE* fp) &#123;</span><br><span class="line">    <span class="keyword">if</span> (fp) &#123;</span><br><span class="line">        std::<span class="built_in">fclose</span>(fp);</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;File closed.&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºä¸€ä¸ª unique_ptr æ¥ç®¡ç† FILE*</span></span><br><span class="line"><span class="keyword">using</span> unique_file_ptr = std::unique_ptr&lt;std::FILE, <span class="keyword">decltype</span>(file_deleter)&gt;;</span><br><span class="line"><span class="function">unique_file_ptr <span class="title">file</span><span class="params">(std::fopen(<span class="string">&quot;example.txt&quot;</span>, <span class="string">&quot;r&quot;</span>), file_deleter)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (file) &#123;</span><br><span class="line">    <span class="comment">// ä½¿ç”¨æ–‡ä»¶...</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å½“ file ç¦»å¼€ä½œç”¨åŸŸæ—¶ï¼Œfile_deleter ä¼šè¢«è‡ªåŠ¨è°ƒç”¨ï¼Œå…³é—­æ–‡ä»¶</span></span><br></pre></td></tr></table></figure><h4 id="5-4-2-ç®¡ç†å…¶ä»–éœ€è¦ç‰¹æ®Šæ¸…ç†çš„èµ„æº"><a href="#5-4-2-ç®¡ç†å…¶ä»–éœ€è¦ç‰¹æ®Šæ¸…ç†çš„èµ„æº" class="headerlink" title="5.4.2 ç®¡ç†å…¶ä»–éœ€è¦ç‰¹æ®Šæ¸…ç†çš„èµ„æº"></a>5.4.2 ç®¡ç†å…¶ä»–éœ€è¦ç‰¹æ®Šæ¸…ç†çš„èµ„æº</h4><p>é™¤äº†æ–‡ä»¶å¥æŸ„ï¼Œè‡ªå®šä¹‰åˆ é™¤å™¨è¿˜å¯ä»¥ç”¨äºç®¡ç†å„ç§å…¶ä»–èµ„æºï¼Œä¾‹å¦‚ï¼š</p><ul><li><strong>ç½‘ç»œå¥—æ¥å­—</strong>ï¼šåˆ é™¤å™¨å¯ä»¥è°ƒç”¨ <code>close</code> æˆ– <code>closesocket</code> æ¥å…³é—­å¥—æ¥å­—ã€‚</li><li><strong>æ•°æ®åº“è¿æ¥</strong>ï¼šåˆ é™¤å™¨å¯ä»¥è°ƒç”¨ç›¸åº”çš„ API æ¥æ–­å¼€æ•°æ®åº“è¿æ¥ã€‚</li><li><strong>äº’æ–¥é”</strong>ï¼šåˆ é™¤å™¨å¯ä»¥è°ƒç”¨ <code>unlock</code> æ¥é‡Šæ”¾é”ï¼Œç¡®ä¿å³ä½¿åœ¨å¼‚å¸¸æƒ…å†µä¸‹é”ä¹Ÿèƒ½è¢«æ­£ç¡®é‡Šæ”¾ã€‚</li><li><strong>å…±äº«å†…å­˜</strong>ï¼šåˆ é™¤å™¨å¯ä»¥è°ƒç”¨ <code>shm_unlink</code> æˆ–ç±»ä¼¼çš„å‡½æ•°æ¥æ¸…ç†å…±äº«å†…å­˜æ®µã€‚</li></ul><p>é€šè¿‡è¿™ç§æ–¹å¼ï¼Œ<code>unique_ptr</code> æˆä¸ºäº†ä¸€ä¸ªé€šç”¨çš„ RAII åŒ…è£…å™¨ï¼Œå¯ä»¥ç”¨äºç®¡ç†ä»»ä½•éœ€è¦æ˜¾å¼æ¸…ç†çš„èµ„æºï¼Œæå¤§åœ°æé«˜äº†ä»£ç çš„å¥å£®æ€§å’Œå®‰å…¨æ€§ã€‚</p>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;è¯¦è§£-C-unique-ptrï¼šç‹¬å å¼æ™ºèƒ½æŒ‡é’ˆ&quot;&gt;&lt;a href=&quot;#è¯¦è§£-C-unique-ptrï¼šç‹¬å å¼æ™ºèƒ½æŒ‡é’ˆ&quot; class=&quot;headerlink&quot; title=&quot;è¯¦è§£ C++ unique_ptrï¼šç‹¬å å¼æ™ºèƒ½æŒ‡é’ˆ&quot;&gt;&lt;/a&gt;è¯¦è§£ C++ unique_ptrï¼šç‹¬å å¼æ™ºèƒ½æŒ‡é’ˆ&lt;/h1&gt;&lt;h2 id=&quot;1-unique-ptr-çš„æ ¸å¿ƒæ¦‚å¿µä¸å®šä¹‰&quot;&gt;&lt;a href=&quot;#1-unique-ptr-çš„æ ¸å¿ƒæ¦‚å¿µä¸å®šä¹‰&quot; class=&quot;headerlink&quot; title=&quot;1. unique_ptr çš„æ ¸å¿ƒæ¦‚å¿µä¸å®šä¹‰&quot;&gt;&lt;/a&gt;1. unique_ptr çš„æ ¸å¿ƒæ¦‚å¿µä¸å®šä¹‰&lt;/h2&gt;&lt;h3 id=&quot;1-1-ä»€ä¹ˆæ˜¯-unique-ptr&quot;&gt;&lt;a href=&quot;#1-1-ä»€ä¹ˆæ˜¯-unique-ptr&quot; class=&quot;headerlink&quot; title=&quot;1.1 ä»€ä¹ˆæ˜¯ unique_ptr&quot;&gt;&lt;/a&gt;1.1 ä»€ä¹ˆæ˜¯ unique_ptr&lt;/h3&gt;&lt;p&gt;&lt;code&gt;std::unique_ptr&lt;/code&gt; æ˜¯ C++11 æ ‡å‡†åº“ä¸­å¼•å…¥çš„ä¸€ç§æ™ºèƒ½æŒ‡é’ˆï¼Œå…¶æ ¸å¿ƒè®¾è®¡ç›®æ ‡æ˜¯æä¾›ä¸€ç§å¯¹åŠ¨æ€åˆ†é…å¯¹è±¡çš„&lt;strong&gt;ç‹¬å æ‰€æœ‰æƒï¼ˆExclusive Ownershipï¼‰&lt;/strong&gt; ç®¡ç†æœºåˆ¶ã€‚&lt;/p&gt;</summary>
    
    
    
    
    <category term="C++" scheme="https://lyroom.github.io/tags/C/"/>
    
    <category term="æ™ºèƒ½æŒ‡é’ˆ" scheme="https://lyroom.github.io/tags/%E6%99%BA%E8%83%BD%E6%8C%87%E9%92%88/"/>
    
    <category term="unique_ptr" scheme="https://lyroom.github.io/tags/unique-ptr/"/>
    
  </entry>
  
  <entry>
    <title>C++æœèŠ±å¤•æ‹¾-assertå®ç”¨æ³•</title>
    <link href="https://lyroom.github.io/2025/09/22/C-%E6%9C%9D%E8%8A%B1%E5%A4%95%E6%8B%BE-assert%E5%AE%8F%E7%94%A8%E6%B3%95/"/>
    <id>https://lyroom.github.io/2025/09/22/C-%E6%9C%9D%E8%8A%B1%E5%A4%95%E6%8B%BE-assert%E5%AE%8F%E7%94%A8%E6%B3%95/</id>
    <published>2025-09-22T13:40:37.000Z</published>
    <updated>2025-09-22T13:40:37.000Z</updated>
    
    <content type="html"><![CDATA[<p>åˆšå­¦äº† C++ çš„ <strong>å¼‚å¸¸æœºåˆ¶ï¼ˆ<code>throw</code> &#x2F; <code>try</code> &#x2F; <code>catch</code>ï¼‰</strong>ï¼Œç°åœ¨é—®åˆ° <code>assert</code> â€”â€” å®ƒå’Œå¼‚å¸¸çœ‹ä¼¼éƒ½æ˜¯â€œæŠ¥é”™â€ï¼Œä½†<strong>ç”¨é€”ã€æ—¶æœºã€è¡Œä¸ºå®Œå…¨ä¸åŒ</strong>ï¼</p><h1 id="ğŸ§©-C-ä¸­çš„-assert-â€”â€”-é€šä¿—æ˜“æ‡‚-è¯¦ç»†å¯¹æ¯”å¼‚å¸¸æœºåˆ¶"><a href="#ğŸ§©-C-ä¸­çš„-assert-â€”â€”-é€šä¿—æ˜“æ‡‚-è¯¦ç»†å¯¹æ¯”å¼‚å¸¸æœºåˆ¶" class="headerlink" title="ğŸ§© C++ ä¸­çš„ assert â€”â€” é€šä¿—æ˜“æ‡‚ + è¯¦ç»†å¯¹æ¯”å¼‚å¸¸æœºåˆ¶"></a>ğŸ§© C++ ä¸­çš„ <code>assert</code> â€”â€” é€šä¿—æ˜“æ‡‚ + è¯¦ç»†å¯¹æ¯”å¼‚å¸¸æœºåˆ¶</h1><span id="more"></span><blockquote><p>âœ… ä¸€å¥è¯æ€»ç»“ï¼š<br><strong><code>assert</code> æ˜¯â€œè°ƒè¯•æ–­è¨€â€ï¼Œç”¨äºå¼€å‘é˜¶æ®µæ•æ‰â€œç»ä¸åº”è¯¥å‘ç”Ÿâ€çš„ç¨‹åºé”™è¯¯ï¼›è€Œ <code>å¼‚å¸¸</code> æ˜¯â€œè¿è¡Œæ—¶é”™è¯¯å¤„ç†â€ï¼Œç”¨äºå¤„ç†â€œå¯èƒ½å‘ç”Ÿâ€çš„æ„å¤–æƒ…å†µã€‚</strong></p></blockquote><hr><h2 id="ğŸ“Œ-ä¸€ã€ä»€ä¹ˆæ˜¯-assertï¼Ÿ"><a href="#ğŸ“Œ-ä¸€ã€ä»€ä¹ˆæ˜¯-assertï¼Ÿ" class="headerlink" title="ğŸ“Œ ä¸€ã€ä»€ä¹ˆæ˜¯ assertï¼Ÿ"></a>ğŸ“Œ ä¸€ã€ä»€ä¹ˆæ˜¯ <code>assert</code>ï¼Ÿ</h2><p><code>assert</code> æ˜¯ä¸€ä¸ª<strong>å®ï¼ˆmacroï¼‰</strong>ï¼Œå®šä¹‰åœ¨å¤´æ–‡ä»¶ <code>&lt;cassert&gt;</code> ä¸­ï¼ˆC è¯­è¨€æ˜¯ <code>&lt;assert.h&gt;</code>ï¼‰ã€‚</p><p>å®ƒçš„ä½œç”¨æ˜¯ï¼š</p><blockquote><p><strong>â€œå¦‚æœæ¡ä»¶ä¸ºå‡ï¼ˆfalseï¼‰ï¼Œç¨‹åºç«‹å³ç»ˆæ­¢ï¼Œå¹¶è¾“å‡ºé”™è¯¯ä¿¡æ¯â€</strong></p></blockquote><h3 id="ğŸ§ª-åŸºæœ¬è¯­æ³•ï¼š"><a href="#ğŸ§ª-åŸºæœ¬è¯­æ³•ï¼š" class="headerlink" title="ğŸ§ª åŸºæœ¬è¯­æ³•ï¼š"></a>ğŸ§ª åŸºæœ¬è¯­æ³•ï¼š</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cassert&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="built_in">assert</span>(æ¡ä»¶è¡¨è¾¾å¼);</span><br></pre></td></tr></table></figure><hr><h2 id="ğŸ¯-äºŒã€assert-çš„å…¸å‹ç”¨æ³•ï¼ˆè°ƒè¯•ç¥å™¨ï¼ï¼‰"><a href="#ğŸ¯-äºŒã€assert-çš„å…¸å‹ç”¨æ³•ï¼ˆè°ƒè¯•ç¥å™¨ï¼ï¼‰" class="headerlink" title="ğŸ¯ äºŒã€assert çš„å…¸å‹ç”¨æ³•ï¼ˆè°ƒè¯•ç¥å™¨ï¼ï¼‰"></a>ğŸ¯ äºŒã€<code>assert</code> çš„å…¸å‹ç”¨æ³•ï¼ˆè°ƒè¯•ç¥å™¨ï¼ï¼‰</h2><h3 id="âœ…-1-æ£€æŸ¥å‡½æ•°å‚æ•°ï¼ˆå‰ç½®æ¡ä»¶ï¼‰"><a href="#âœ…-1-æ£€æŸ¥å‡½æ•°å‚æ•°ï¼ˆå‰ç½®æ¡ä»¶ï¼‰" class="headerlink" title="âœ… 1. æ£€æŸ¥å‡½æ•°å‚æ•°ï¼ˆå‰ç½®æ¡ä»¶ï¼‰"></a>âœ… 1. æ£€æŸ¥å‡½æ•°å‚æ•°ï¼ˆå‰ç½®æ¡ä»¶ï¼‰</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cassert&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">double</span> <span class="title">divide</span><span class="params">(<span class="type">double</span> a, <span class="type">double</span> b)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">assert</span>(b != <span class="number">0.0</span>); <span class="comment">// å¼€å‘æ—¶ç¡®ä¿è°ƒç”¨è€…ä¸ä¼šä¼  0</span></span><br><span class="line">    <span class="keyword">return</span> a / b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    cout &lt;&lt; <span class="built_in">divide</span>(<span class="number">10.0</span>, <span class="number">2.0</span>) &lt;&lt; endl; <span class="comment">// âœ… æ­£å¸¸</span></span><br><span class="line">    cout &lt;&lt; <span class="built_in">divide</span>(<span class="number">10.0</span>, <span class="number">0.0</span>) &lt;&lt; endl; <span class="comment">// âŒ ç¨‹åºå´©æºƒï¼è¾“å‡ºé”™è¯¯ä½ç½®</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>ğŸ’¥ å¦‚æœ <code>b == 0.0</code>ï¼Œç¨‹åºä¼šç«‹å³ç»ˆæ­¢ï¼Œå¹¶è¾“å‡ºç±»ä¼¼ï¼š</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Assertion failed: b != 0.0, file test.cpp, line 6</span><br></pre></td></tr></table></figure><hr><h3 id="âœ…-2-æ£€æŸ¥å‡½æ•°è¿”å›å€¼æˆ–ä¸­é—´çŠ¶æ€ï¼ˆä¸å˜å¼ï¼‰"><a href="#âœ…-2-æ£€æŸ¥å‡½æ•°è¿”å›å€¼æˆ–ä¸­é—´çŠ¶æ€ï¼ˆä¸å˜å¼ï¼‰" class="headerlink" title="âœ… 2. æ£€æŸ¥å‡½æ•°è¿”å›å€¼æˆ–ä¸­é—´çŠ¶æ€ï¼ˆä¸å˜å¼ï¼‰"></a>âœ… 2. æ£€æŸ¥å‡½æ•°è¿”å›å€¼æˆ–ä¸­é—´çŠ¶æ€ï¼ˆä¸å˜å¼ï¼‰</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">factorial</span><span class="params">(<span class="type">int</span> n)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">assert</span>(n &gt;= <span class="number">0</span>); <span class="comment">// é˜¶ä¹˜ä¸èƒ½å¯¹è´Ÿæ•°è®¡ç®—ï¼</span></span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> result = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">        result *= i;</span><br><span class="line">        <span class="built_in">assert</span>(result &gt; <span class="number">0</span>); <span class="comment">// é˜²æ­¢æ•´æ•°æº¢å‡ºï¼ˆè°ƒè¯•ç”¨ï¼‰</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="âœ…-3-æ£€æŸ¥æŒ‡é’ˆä¸ä¸ºç©ºï¼ˆé˜²å´©æºƒï¼‰"><a href="#âœ…-3-æ£€æŸ¥æŒ‡é’ˆä¸ä¸ºç©ºï¼ˆé˜²å´©æºƒï¼‰" class="headerlink" title="âœ… 3. æ£€æŸ¥æŒ‡é’ˆä¸ä¸ºç©ºï¼ˆé˜²å´©æºƒï¼‰"></a>âœ… 3. æ£€æŸ¥æŒ‡é’ˆä¸ä¸ºç©ºï¼ˆé˜²å´©æºƒï¼‰</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">printLength</span><span class="params">(<span class="type">const</span> <span class="type">char</span>* str)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">assert</span>(str != <span class="literal">nullptr</span>); <span class="comment">// ç¡®ä¿è°ƒç”¨è€…æ²¡ä¼ ç©ºæŒ‡é’ˆ</span></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;é•¿åº¦: &quot;</span> &lt;&lt; <span class="built_in">strlen</span>(str) &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="âš™ï¸-ä¸‰ã€assert-çš„åº•å±‚æœºåˆ¶ï¼ˆé‡ç‚¹ï¼ï¼‰"><a href="#âš™ï¸-ä¸‰ã€assert-çš„åº•å±‚æœºåˆ¶ï¼ˆé‡ç‚¹ï¼ï¼‰" class="headerlink" title="âš™ï¸ ä¸‰ã€assert çš„åº•å±‚æœºåˆ¶ï¼ˆé‡ç‚¹ï¼ï¼‰"></a>âš™ï¸ ä¸‰ã€<code>assert</code> çš„åº•å±‚æœºåˆ¶ï¼ˆé‡ç‚¹ï¼ï¼‰</h2><p><code>assert</code> æ˜¯ä¸€ä¸ª<strong>é¢„å¤„ç†å®</strong>ï¼Œå®ƒçš„è¡Œä¸ºå–å†³äºæ˜¯å¦å®šä¹‰äº† <code>NDEBUG</code> å®ï¼š</p><table><thead><tr><th>ç¼–è¯‘æ¨¡å¼</th><th>NDEBUG æ˜¯å¦å®šä¹‰</th><th>assert è¡Œä¸º</th></tr></thead><tbody><tr><td>Debug æ¨¡å¼</td><td>âŒ æœªå®šä¹‰</td><td>âœ… æ£€æŸ¥æ¡ä»¶ï¼Œå¤±è´¥åˆ™ç»ˆæ­¢</td></tr><tr><td>Release æ¨¡å¼</td><td>âœ… å·²å®šä¹‰</td><td>âŒ è¢«å®Œå…¨ç§»é™¤ï¼Œæ— å¼€é”€</td></tr></tbody></table><h3 id="ğŸ”-ä¸¾ä¸ªä¾‹å­ï¼š"><a href="#ğŸ”-ä¸¾ä¸ªä¾‹å­ï¼š" class="headerlink" title="ğŸ” ä¸¾ä¸ªä¾‹å­ï¼š"></a>ğŸ” ä¸¾ä¸ªä¾‹å­ï¼š</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç¼–è¯‘æ—¶ï¼š</span></span><br><span class="line"><span class="comment">// Debug: g++ -g -o test test.cpp</span></span><br><span class="line"><span class="comment">// Release: g++ -DNDEBUG -O2 -o test test.cpp</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cassert&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> x = <span class="number">-1</span>;</span><br><span class="line">    <span class="built_in">assert</span>(x &gt;= <span class="number">0</span>); <span class="comment">// Debug æ¨¡å¼ä¸‹ä¼šå´©æºƒï¼ŒRelease æ¨¡å¼ä¸‹è¿™è¡Œä»£ç ä¸å­˜åœ¨ï¼</span></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;x = &quot;</span> &lt;&lt; x &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>âœ… <strong>è®¾è®¡å“²å­¦</strong>ï¼š<br><code>assert</code> åªç”¨äº<strong>å¼€å‘è°ƒè¯•é˜¶æ®µ</strong>ï¼Œæ•æ‰ç¨‹åºå‘˜çš„é€»è¾‘é”™è¯¯ï¼›<br>å‘å¸ƒç‰ˆæœ¬ä¸­å®Œå…¨æ¶ˆå¤±ï¼Œä¸å½±å“æ€§èƒ½ï¼</p></blockquote><hr><h2 id="ğŸ†š-å››ã€assert-vs-å¼‚å¸¸-â€”â€”-æ ¸å¿ƒåŒºåˆ«è¡¨"><a href="#ğŸ†š-å››ã€assert-vs-å¼‚å¸¸-â€”â€”-æ ¸å¿ƒåŒºåˆ«è¡¨" class="headerlink" title="ğŸ†š å››ã€assert vs å¼‚å¸¸ â€”â€” æ ¸å¿ƒåŒºåˆ«è¡¨"></a>ğŸ†š å››ã€<code>assert</code> vs <code>å¼‚å¸¸</code> â€”â€” æ ¸å¿ƒåŒºåˆ«è¡¨</h2><table><thead><tr><th>ç‰¹æ€§</th><th><code>assert</code></th><th><code>å¼‚å¸¸ (throw/catch)</code></th></tr></thead><tbody><tr><td><strong>ç”¨é€”</strong></td><td>æ•æ‰â€œç¨‹åºå‘˜é”™è¯¯â€ï¼ˆä¸è¯¥å‘ç”Ÿçš„ï¼‰</td><td>å¤„ç†â€œè¿è¡Œæ—¶é”™è¯¯â€ï¼ˆå¯èƒ½å‘ç”Ÿçš„ï¼‰</td></tr><tr><td><strong>æ˜¯å¦å¯æ¢å¤</strong></td><td>âŒ ç¨‹åºç›´æ¥ç»ˆæ­¢</td><td>âœ… å¯æ•è·å¹¶æ¢å¤</td></tr><tr><td><strong>æ˜¯å¦å½±å“å‘å¸ƒç‰ˆ</strong></td><td>âŒ Release æ¨¡å¼ä¸‹è¢«ç§»é™¤</td><td>âœ… å§‹ç»ˆå­˜åœ¨</td></tr><tr><td><strong>æ€§èƒ½å¼€é”€</strong></td><td>âŒ Debug æœ‰å¼€é”€ï¼ŒRelease æ— å¼€é”€</td><td>âœ… æ— å¼‚å¸¸æ—¶å¼€é”€æå°ï¼ŒæŠ›å¼‚å¸¸æ—¶è¾ƒå¤§</td></tr><tr><td><strong>é€‚ç”¨é˜¶æ®µ</strong></td><td>å¼€å‘è°ƒè¯•é˜¶æ®µ</td><td>å¼€å‘ + å‘å¸ƒé˜¶æ®µ</td></tr><tr><td><strong>å…¸å‹åœºæ™¯</strong></td><td>å‚æ•°æ£€æŸ¥ã€ä¸å˜å¼ã€å†…éƒ¨é€»è¾‘é”™è¯¯</td><td>æ–‡ä»¶æ‰“ä¸å¼€ã€ç½‘ç»œæ–­å¼€ã€ç”¨æˆ·è¾“å…¥é”™è¯¯</td></tr><tr><td><strong>èƒ½å¦è¢«å¿½ç•¥</strong></td><td>âŒ ä¸èƒ½ï¼ˆç›´æ¥ crashï¼‰</td><td>âœ… èƒ½ï¼ˆä½†ä¸æ¨èï¼‰</td></tr></tbody></table><hr><h2 id="ğŸš«-äº”ã€ä»€ä¹ˆæ—¶å€™ä¸è¯¥ç”¨-assertï¼Ÿ"><a href="#ğŸš«-äº”ã€ä»€ä¹ˆæ—¶å€™ä¸è¯¥ç”¨-assertï¼Ÿ" class="headerlink" title="ğŸš« äº”ã€ä»€ä¹ˆæ—¶å€™ä¸è¯¥ç”¨ assertï¼Ÿ"></a>ğŸš« äº”ã€ä»€ä¹ˆæ—¶å€™<strong>ä¸è¯¥</strong>ç”¨ <code>assert</code>ï¼Ÿ</h2><h3 id="âŒ-1-æ£€æŸ¥ç”¨æˆ·è¾“å…¥"><a href="#âŒ-1-æ£€æŸ¥ç”¨æˆ·è¾“å…¥" class="headerlink" title="âŒ 1. æ£€æŸ¥ç”¨æˆ·è¾“å…¥"></a>âŒ 1. æ£€æŸ¥ç”¨æˆ·è¾“å…¥</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> age;</span><br><span class="line">cin &gt;&gt; age;</span><br><span class="line"><span class="built_in">assert</span>(age &gt;= <span class="number">0</span>); <span class="comment">// âŒ é”™è¯¯ï¼ç”¨æˆ·å¯èƒ½è¾“å…¥è´Ÿæ•°ï¼Œè¿™æ˜¯â€œå¯é¢„æœŸé”™è¯¯â€</span></span><br></pre></td></tr></table></figure><p>âœ… åº”è¯¥ç”¨å¼‚å¸¸æˆ–é”™è¯¯ç ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (age &lt; <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="built_in">invalid_argument</span>(<span class="string">&quot;å¹´é¾„ä¸èƒ½ä¸ºè´Ÿæ•°ï¼&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="âŒ-2-æ£€æŸ¥æ–‡ä»¶-x2F-ç½‘ç»œç­‰å¤–éƒ¨èµ„æº"><a href="#âŒ-2-æ£€æŸ¥æ–‡ä»¶-x2F-ç½‘ç»œç­‰å¤–éƒ¨èµ„æº" class="headerlink" title="âŒ 2. æ£€æŸ¥æ–‡ä»¶&#x2F;ç½‘ç»œç­‰å¤–éƒ¨èµ„æº"></a>âŒ 2. æ£€æŸ¥æ–‡ä»¶&#x2F;ç½‘ç»œç­‰å¤–éƒ¨èµ„æº</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">FILE* f = <span class="built_in">fopen</span>(<span class="string">&quot;data.txt&quot;</span>, <span class="string">&quot;r&quot;</span>);</span><br><span class="line"><span class="built_in">assert</span>(f != <span class="literal">nullptr</span>); <span class="comment">// âŒ é”™è¯¯ï¼æ–‡ä»¶å¯èƒ½ä¸å­˜åœ¨ï¼Œè¿™æ˜¯â€œè¿è¡Œæ—¶å¼‚å¸¸â€</span></span><br></pre></td></tr></table></figure><p>âœ… åº”è¯¥ç”¨å¼‚å¸¸ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (!f) &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="built_in">runtime_error</span>(<span class="string">&quot;æ— æ³•æ‰“å¼€æ–‡ä»¶ data.txt&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="âŒ-3-åœ¨ææ„å‡½æ•°ä¸­ä½¿ç”¨ï¼ˆå±é™©ï¼ï¼‰"><a href="#âŒ-3-åœ¨ææ„å‡½æ•°ä¸­ä½¿ç”¨ï¼ˆå±é™©ï¼ï¼‰" class="headerlink" title="âŒ 3. åœ¨ææ„å‡½æ•°ä¸­ä½¿ç”¨ï¼ˆå±é™©ï¼ï¼‰"></a>âŒ 3. åœ¨ææ„å‡½æ•°ä¸­ä½¿ç”¨ï¼ˆå±é™©ï¼ï¼‰</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">~<span class="built_in">MyClass</span>() &#123;</span><br><span class="line">    <span class="built_in">assert</span>(ptr != <span class="literal">nullptr</span>); <span class="comment">// âŒ å¦‚æœ assert å¤±è´¥ â†’ ç¨‹åºç»ˆæ­¢ï¼Œå¯èƒ½æ©ç›–æ›´ä¸¥é‡é—®é¢˜</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>âœ… åº”è®°å½•æ—¥å¿—æˆ–é™é»˜å¤„ç†ã€‚</p><hr><h2 id="âœ…-å…­ã€ä»€ä¹ˆæ—¶å€™è¯¥ç”¨-assertï¼Ÿ"><a href="#âœ…-å…­ã€ä»€ä¹ˆæ—¶å€™è¯¥ç”¨-assertï¼Ÿ" class="headerlink" title="âœ… å…­ã€ä»€ä¹ˆæ—¶å€™è¯¥ç”¨ assertï¼Ÿ"></a>âœ… å…­ã€ä»€ä¹ˆæ—¶å€™<strong>è¯¥</strong>ç”¨ <code>assert</code>ï¼Ÿ</h2><table><thead><tr><th>åœºæ™¯</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td>å‡½æ•°å‰ç½®æ¡ä»¶</td><td><code>assert(index &gt;= 0 &amp;&amp; index &lt; size);</code></td></tr><tr><td>å¾ªç¯ä¸å˜å¼</td><td><code>assert(total &gt;= 0);</code></td></tr><tr><td>æŒ‡é’ˆæœ‰æ•ˆæ€§</td><td><code>assert(p != nullptr);</code></td></tr><tr><td>ç®—æ³•å†…éƒ¨çŠ¶æ€</td><td><code>assert(sorted == true);</code></td></tr><tr><td>æµ‹è¯•é©±åŠ¨å¼€å‘</td><td><code>assert(result == expected);</code></td></tr></tbody></table><blockquote><p>ğŸ¯ <strong>é»„é‡‘æ³•åˆ™</strong>ï¼š<br><strong>â€œå¦‚æœè¿™ä¸ªæ¡ä»¶ä¸ºå‡ï¼Œè¯´æ˜æˆ‘çš„ä»£ç æœ‰ bug â€”â€” ç”¨ <code>assert</code>â€</strong><br><strong>â€œå¦‚æœè¿™ä¸ªæ¡ä»¶ä¸ºå‡ï¼Œæ˜¯ç”¨æˆ·&#x2F;ç¯å¢ƒçš„é—®é¢˜ â€”â€” ç”¨å¼‚å¸¸â€</strong></p></blockquote><hr><h2 id="ğŸ§°-ä¸ƒã€è‡ªå®šä¹‰æ–­è¨€ï¼ˆé«˜çº§æŠ€å·§ï¼‰"><a href="#ğŸ§°-ä¸ƒã€è‡ªå®šä¹‰æ–­è¨€ï¼ˆé«˜çº§æŠ€å·§ï¼‰" class="headerlink" title="ğŸ§° ä¸ƒã€è‡ªå®šä¹‰æ–­è¨€ï¼ˆé«˜çº§æŠ€å·§ï¼‰"></a>ğŸ§° ä¸ƒã€è‡ªå®šä¹‰æ–­è¨€ï¼ˆé«˜çº§æŠ€å·§ï¼‰</h2><p>ä½ å¯ä»¥å®šä¹‰è‡ªå·±çš„æ–­è¨€å®ï¼Œæ·»åŠ æ›´å¤šä¿¡æ¯ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdlib&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> MY_ASSERT(expr, msg) \</span></span><br><span class="line"><span class="meta">    do &#123; \</span></span><br><span class="line"><span class="meta">        <span class="keyword">if</span> (!(expr)) &#123; \</span></span><br><span class="line"><span class="meta">            std::cerr &lt;&lt; <span class="string">&quot;Assertion failed: &quot;</span> &lt;&lt; #expr \</span></span><br><span class="line"><span class="meta">                      &lt;&lt; <span class="string">&quot; (&quot;</span> &lt;&lt; msg &lt;&lt; <span class="string">&quot;) &quot;</span> \</span></span><br><span class="line"><span class="meta">                      &lt;&lt; <span class="string">&quot;in &quot;</span> &lt;&lt; __FILE__ &lt;&lt; <span class="string">&quot;:&quot;</span> &lt;&lt; __LINE__ &lt;&lt; std::endl; \</span></span><br><span class="line"><span class="meta">            std::abort(); \</span></span><br><span class="line"><span class="meta">        &#125; \</span></span><br><span class="line"><span class="meta">    &#125; while(0)</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> x = <span class="number">-1</span>;</span><br><span class="line">    <span class="built_in">MY_ASSERT</span>(x &gt;= <span class="number">0</span>, <span class="string">&quot;x åº”è¯¥æ˜¯éè´Ÿæ•°&quot;</span>); </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>ğŸ–¨ï¸ è¾“å‡ºï¼š</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Assertion failed: x &gt;= 0 (x åº”è¯¥æ˜¯éè´Ÿæ•°) in test.cpp:15</span><br></pre></td></tr></table></figure><hr><h2 id="ğŸ“Š-å…«ã€assert-åœ¨å¤§å‹é¡¹ç›®ä¸­çš„ä½¿ç”¨ï¼ˆGoogle-x2F-Microsoft-é£æ ¼ï¼‰"><a href="#ğŸ“Š-å…«ã€assert-åœ¨å¤§å‹é¡¹ç›®ä¸­çš„ä½¿ç”¨ï¼ˆGoogle-x2F-Microsoft-é£æ ¼ï¼‰" class="headerlink" title="ğŸ“Š å…«ã€assert åœ¨å¤§å‹é¡¹ç›®ä¸­çš„ä½¿ç”¨ï¼ˆGoogle &#x2F; Microsoft é£æ ¼ï¼‰"></a>ğŸ“Š å…«ã€<code>assert</code> åœ¨å¤§å‹é¡¹ç›®ä¸­çš„ä½¿ç”¨ï¼ˆGoogle &#x2F; Microsoft é£æ ¼ï¼‰</h2><ul><li>Google C++ Style Guideï¼š<strong>é¼“åŠ±ä½¿ç”¨ <code>assert</code> æ£€æŸ¥å†…éƒ¨ä¸å˜å¼</strong></li><li>Microsoftï¼šåœ¨ Windows å†…æ ¸å¼€å‘ä¸­å¤§é‡ä½¿ç”¨ <code>NT_ASSERT</code></li><li>æ¸¸æˆå¼•æ“ï¼ˆå¦‚ Unrealï¼‰ï¼š<code>check()</code> å®ï¼ˆç±»ä¼¼ assertï¼‰</li></ul><blockquote><p>âœ… åŸåˆ™ï¼š<strong>â€œFail Fastâ€ â€”â€” å°½æ—©å´©æºƒï¼Œæ¯”éšè— bug å¯¼è‡´åç»­ç¾éš¾è¦å¥½ï¼</strong></p></blockquote><hr><h2 id="ğŸ§ -ä¹ã€è€ƒè€ƒä½ ï¼"><a href="#ğŸ§ -ä¹ã€è€ƒè€ƒä½ ï¼" class="headerlink" title="ğŸ§  ä¹ã€è€ƒè€ƒä½ ï¼"></a>ğŸ§  ä¹ã€è€ƒè€ƒä½ ï¼</h2><p>ä¸‹é¢ä»£ç åœ¨ Debug å’Œ Release æ¨¡å¼ä¸‹åˆ†åˆ«è¾“å‡ºä»€ä¹ˆï¼Ÿ</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cassert&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">getValue</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;getValue è¢«è°ƒç”¨äº†ï¼&quot;</span> &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">assert</span>(<span class="built_in">getValue</span>() &gt;= <span class="number">0</span>);</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;ç¨‹åºç»§ç»­...&quot;</span> &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>âœ… <strong>Debug æ¨¡å¼</strong>ï¼š</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">getValue è¢«è°ƒç”¨äº†ï¼</span><br><span class="line">Assertion failed: getValue() &gt;= 0, file test.cpp, line 10</span><br><span class="line">ğŸ’¥ ç¨‹åºç»ˆæ­¢ï¼Œä¸ä¼šè¾“å‡ºâ€œç¨‹åºç»§ç»­...â€</span><br></pre></td></tr></table></figure><blockquote><p>âœ… <strong>Release æ¨¡å¼</strong>ï¼š</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ç¨‹åºç»§ç»­...</span><br></pre></td></tr></table></figure><blockquote><p>ğŸŒŸ è§£é‡Šï¼šRelease æ¨¡å¼ä¸‹ <code>assert(...)</code> æ•´è¡Œè¢«é¢„å¤„ç†å™¨åˆ é™¤ï¼Œ<code>getValue()</code> æ ¹æœ¬ä¸ä¼šè¢«è°ƒç”¨ï¼</p></blockquote><hr><h2 id="ğŸ§©-åã€static-assert-â€”â€”-ç¼–è¯‘æœŸæ–­è¨€ï¼ˆC-11ï¼‰"><a href="#ğŸ§©-åã€static-assert-â€”â€”-ç¼–è¯‘æœŸæ–­è¨€ï¼ˆC-11ï¼‰" class="headerlink" title="ğŸ§© åã€static_assert â€”â€” ç¼–è¯‘æœŸæ–­è¨€ï¼ˆC++11ï¼‰"></a>ğŸ§© åã€<code>static_assert</code> â€”â€” ç¼–è¯‘æœŸæ–­è¨€ï¼ˆC++11ï¼‰</h2><p>é™¤äº†è¿è¡Œæ—¶ <code>assert</code>ï¼ŒC++11 å¼•å…¥äº† <strong>ç¼–è¯‘æœŸæ–­è¨€</strong>ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">static_assert</span>(<span class="built_in">sizeof</span>(<span class="type">int</span>) == <span class="number">4</span>, <span class="string">&quot;int å¿…é¡»æ˜¯ 4 å­—èŠ‚ï¼&quot;</span>);</span><br></pre></td></tr></table></figure><ul><li>åœ¨<strong>ç¼–è¯‘æ—¶</strong>æ£€æŸ¥æ¡ä»¶</li><li>å¤±è´¥åˆ™ç¼–è¯‘æŠ¥é”™</li><li>å¸¸ç”¨äºæ¨¡æ¿å…ƒç¼–ç¨‹ã€ç±»å‹æ£€æŸ¥</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">process</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">static_assert</span>(std::is_integral_v&lt;T&gt;, <span class="string">&quot;T å¿…é¡»æ˜¯æ•´æ•°ç±»å‹ï¼&quot;</span>);</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="ğŸ“Œ-æ€»ç»“ï¼šassert-ä½¿ç”¨å£è¯€"><a href="#ğŸ“Œ-æ€»ç»“ï¼šassert-ä½¿ç”¨å£è¯€" class="headerlink" title="ğŸ“Œ æ€»ç»“ï¼šassert ä½¿ç”¨å£è¯€"></a>ğŸ“Œ æ€»ç»“ï¼š<code>assert</code> ä½¿ç”¨å£è¯€</h2><blockquote><p>âœ… <strong>ç”¨ assert</strong>ï¼š  </p><ul><li>æ£€æŸ¥â€œç¨‹åºå‘˜çš„é”™â€  </li><li>è°ƒè¯•é˜¶æ®µæ•æ‰ bug  </li><li>å†…éƒ¨é€»è¾‘ã€ä¸å˜å¼ã€å‰ç½®æ¡ä»¶  </li><li>â€œFail Fastâ€ åŸåˆ™</li></ul><p>âŒ <strong>ä¸ç”¨ assert</strong>ï¼š  </p><ul><li>ç”¨æˆ·è¾“å…¥ã€å¤–éƒ¨èµ„æºã€å¯æ¢å¤é”™è¯¯  </li><li>å‘å¸ƒç‰ˆæœ¬ä¸­éœ€è¦å¤„ç†çš„é”™è¯¯  </li><li>ææ„å‡½æ•°ä¸­</li></ul><p>ğŸ”„ <strong>ç”¨å¼‚å¸¸</strong>ï¼š  </p><ul><li>å¤„ç†â€œå¯èƒ½å‘ç”Ÿâ€çš„è¿è¡Œæ—¶é”™è¯¯  </li><li>éœ€è¦æ¢å¤æˆ–é€šçŸ¥ç”¨æˆ·çš„åœºæ™¯  </li><li>åº“å‡½æ•°ã€API è®¾è®¡</li></ul></blockquote><hr><p>ğŸ¯ <strong>ç»ˆæå»ºè®®</strong>ï¼š</p><blockquote><p>æŠŠ <code>assert</code> å½“ä½œä½ çš„â€œä»£ç ä¿é•–â€ï¼Œåœ¨å¼€å‘é˜¶æ®µå¸®ä½ æªå‡ºéšè—çš„é€»è¾‘é”™è¯¯ï¼›<br>æŠŠ <code>å¼‚å¸¸</code> å½“ä½œä½ çš„â€œé”™è¯¯å¤„ç†ä¸“å®¶â€ï¼Œåœ¨è¿è¡Œæ—¶ä¼˜é›…åº”å¯¹å„ç§æ„å¤–æƒ…å†µã€‚</p></blockquote><p>ä¸¤è€…é…åˆï¼Œè®©ä½ çš„ C++ ç¨‹åºæ—¢å¥å£®åˆå®‰å…¨ï¼</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;åˆšå­¦äº† C++ çš„ &lt;strong&gt;å¼‚å¸¸æœºåˆ¶ï¼ˆ&lt;code&gt;throw&lt;/code&gt; &amp;#x2F; &lt;code&gt;try&lt;/code&gt; &amp;#x2F; &lt;code&gt;catch&lt;/code&gt;ï¼‰&lt;/strong&gt;ï¼Œç°åœ¨é—®åˆ° &lt;code&gt;assert&lt;/code&gt; â€”â€” å®ƒå’Œå¼‚å¸¸çœ‹ä¼¼éƒ½æ˜¯â€œæŠ¥é”™â€ï¼Œä½†&lt;strong&gt;ç”¨é€”ã€æ—¶æœºã€è¡Œä¸ºå®Œå…¨ä¸åŒ&lt;/strong&gt;ï¼&lt;/p&gt;
&lt;h1 id=&quot;ğŸ§©-C-ä¸­çš„-assert-â€”â€”-é€šä¿—æ˜“æ‡‚-è¯¦ç»†å¯¹æ¯”å¼‚å¸¸æœºåˆ¶&quot;&gt;&lt;a href=&quot;#ğŸ§©-C-ä¸­çš„-assert-â€”â€”-é€šä¿—æ˜“æ‡‚-è¯¦ç»†å¯¹æ¯”å¼‚å¸¸æœºåˆ¶&quot; class=&quot;headerlink&quot; title=&quot;ğŸ§© C++ ä¸­çš„ assert â€”â€” é€šä¿—æ˜“æ‡‚ + è¯¦ç»†å¯¹æ¯”å¼‚å¸¸æœºåˆ¶&quot;&gt;&lt;/a&gt;ğŸ§© C++ ä¸­çš„ &lt;code&gt;assert&lt;/code&gt; â€”â€” é€šä¿—æ˜“æ‡‚ + è¯¦ç»†å¯¹æ¯”å¼‚å¸¸æœºåˆ¶&lt;/h1&gt;</summary>
    
    
    
    
    <category term="C++" scheme="https://lyroom.github.io/tags/C/"/>
    
    <category term="æœèŠ±å¤•æ‹¾" scheme="https://lyroom.github.io/tags/%E6%9C%9D%E8%8A%B1%E5%A4%95%E6%8B%BE/"/>
    
    <category term="assert" scheme="https://lyroom.github.io/tags/assert/"/>
    
    <category term="æ–­è¨€" scheme="https://lyroom.github.io/tags/%E6%96%AD%E8%A8%80/"/>
    
  </entry>
  
  <entry>
    <title>C++æœèŠ±å¤•æ‹¾-å¼‚å¸¸æœºåˆ¶</title>
    <link href="https://lyroom.github.io/2025/09/22/C-%E6%9C%9D%E8%8A%B1%E5%A4%95%E6%8B%BE-%E5%BC%82%E5%B8%B8%E6%9C%BA%E5%88%B6/"/>
    <id>https://lyroom.github.io/2025/09/22/C-%E6%9C%9D%E8%8A%B1%E5%A4%95%E6%8B%BE-%E5%BC%82%E5%B8%B8%E6%9C%BA%E5%88%B6/</id>
    <published>2025-09-22T12:49:47.000Z</published>
    <updated>2025-09-22T12:49:47.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ğŸš¨-C-å¼‚å¸¸æœºåˆ¶-â€”â€”-ä»é›¶åˆ°ç²¾é€š"><a href="#ğŸš¨-C-å¼‚å¸¸æœºåˆ¶-â€”â€”-ä»é›¶åˆ°ç²¾é€š" class="headerlink" title="ğŸš¨ C++ å¼‚å¸¸æœºåˆ¶ â€”â€” ä»é›¶åˆ°ç²¾é€š"></a>ğŸš¨ C++ å¼‚å¸¸æœºåˆ¶ â€”â€” ä»é›¶åˆ°ç²¾é€š</h1><blockquote><p>ğŸ’¡ ä¸€å¥è¯æ€»ç»“ï¼š<br><strong>â€œå¼‚å¸¸ &#x3D; ç¨‹åºè¿è¡Œæ—¶å‘ç”Ÿçš„â€˜æ„å¤–æƒ…å†µâ€™ï¼ŒC++ ç”¨ <code>throw</code>, <code>try</code>, <code>catch</code> ä¸‰å‰‘å®¢æ¥å¤„ç†å®ƒï¼Œè®©ç¨‹åºä¸å´©æºƒã€èƒ½æ¢å¤ã€æœ‰å°Šä¸¥åœ°æŠ¥é”™ã€‚â€</strong></p></blockquote><span id="more"></span><hr><h2 id="ğŸ¯-ä¸€ã€ä¸ºä»€ä¹ˆè¦å­¦å¼‚å¸¸ï¼Ÿâ€”â€”-å…ˆçœ‹â€œæ²¡æœ‰å¼‚å¸¸â€çš„ç—›è‹¦"><a href="#ğŸ¯-ä¸€ã€ä¸ºä»€ä¹ˆè¦å­¦å¼‚å¸¸ï¼Ÿâ€”â€”-å…ˆçœ‹â€œæ²¡æœ‰å¼‚å¸¸â€çš„ç—›è‹¦" class="headerlink" title="ğŸ¯ ä¸€ã€ä¸ºä»€ä¹ˆè¦å­¦å¼‚å¸¸ï¼Ÿâ€”â€” å…ˆçœ‹â€œæ²¡æœ‰å¼‚å¸¸â€çš„ç—›è‹¦"></a>ğŸ¯ ä¸€ã€ä¸ºä»€ä¹ˆè¦å­¦å¼‚å¸¸ï¼Ÿâ€”â€” å…ˆçœ‹â€œæ²¡æœ‰å¼‚å¸¸â€çš„ç—›è‹¦</h2><h3 id="ğŸ‘¶-ä¼ ç»Ÿé”™è¯¯å¤„ç†æ–¹å¼ï¼šè¿”å›é”™è¯¯ç ï¼ˆreturn-1-NULL-falseâ€¦ï¼‰"><a href="#ğŸ‘¶-ä¼ ç»Ÿé”™è¯¯å¤„ç†æ–¹å¼ï¼šè¿”å›é”™è¯¯ç ï¼ˆreturn-1-NULL-falseâ€¦ï¼‰" class="headerlink" title="ğŸ‘¶ ä¼ ç»Ÿé”™è¯¯å¤„ç†æ–¹å¼ï¼šè¿”å›é”™è¯¯ç ï¼ˆreturn -1, NULL, falseâ€¦ï¼‰"></a>ğŸ‘¶ ä¼ ç»Ÿé”™è¯¯å¤„ç†æ–¹å¼ï¼šè¿”å›é”™è¯¯ç ï¼ˆreturn -1, NULL, falseâ€¦ï¼‰</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">divide</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (b == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>; <span class="comment">// ç”¨ -1 è¡¨ç¤ºâ€œé™¤é›¶é”™è¯¯â€</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> a / b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> result = <span class="built_in">divide</span>(<span class="number">10</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="keyword">if</span> (result == <span class="number">-1</span>) &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;é”™è¯¯ï¼šé™¤æ•°ä¸èƒ½ä¸º0ï¼&quot;</span> &lt;&lt; endl;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;ç»“æœæ˜¯ï¼š&quot;</span> &lt;&lt; result &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>â— é—®é¢˜æ¥äº†ï¼š</p><ul><li>å¦‚æœå¿˜è®°æ£€æŸ¥è¿”å›å€¼ï¼Ÿâ†’ ç¨‹åºé€»è¾‘é”™ä¹±ï¼</li><li>å¦‚æœå‡½æ•°è¦è¿”å›â€œæ­£å¸¸å€¼â€å’Œâ€œé”™è¯¯ç â€ï¼Ÿâ†’ è®¾è®¡æ··ä¹±ï¼</li><li>å¦‚æœé”™è¯¯å‘ç”Ÿåœ¨â€œæ·±å±‚è°ƒç”¨â€ä¸­ï¼Ÿâ†’ ä¸€å±‚å±‚å¾€ä¸Šä¼ ï¼Œä»£ç è‡ƒè‚¿ï¼</li></ul></blockquote><hr><h2 id="ğŸŒŸ-äºŒã€å¼‚å¸¸æœºåˆ¶ç™»åœº-â€”â€”-throw-try-catch"><a href="#ğŸŒŸ-äºŒã€å¼‚å¸¸æœºåˆ¶ç™»åœº-â€”â€”-throw-try-catch" class="headerlink" title="ğŸŒŸ äºŒã€å¼‚å¸¸æœºåˆ¶ç™»åœº â€”â€” throw, try, catch"></a>ğŸŒŸ äºŒã€å¼‚å¸¸æœºåˆ¶ç™»åœº â€”â€” <code>throw</code>, <code>try</code>, <code>catch</code></h2><p>C++ å¼‚å¸¸æœºåˆ¶ä¸‰å¤§å…³é”®å­—ï¼š</p><table><thead><tr><th>å…³é”®å­—</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td><code>throw</code></td><td>æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ï¼ˆç›¸å½“äºâ€œæŠ¥è­¦â€ï¼‰</td></tr><tr><td><code>try</code></td><td>åŒ…è£¹å¯èƒ½å‡ºé”™çš„ä»£ç ï¼ˆâ€œç›‘æ§åŒºâ€ï¼‰</td></tr><tr><td><code>catch</code></td><td>æ•è·å¹¶å¤„ç†å¼‚å¸¸ï¼ˆâ€œæ¥è­¦å¤„ç†â€ï¼‰</td></tr></tbody></table><hr><h3 id="ğŸ¬-ç”Ÿæ´»åŒ–æ¯”å–»ï¼šé¤å…ç‚¹é¤"><a href="#ğŸ¬-ç”Ÿæ´»åŒ–æ¯”å–»ï¼šé¤å…ç‚¹é¤" class="headerlink" title="ğŸ¬ ç”Ÿæ´»åŒ–æ¯”å–»ï¼šé¤å…ç‚¹é¤"></a>ğŸ¬ ç”Ÿæ´»åŒ–æ¯”å–»ï¼šé¤å…ç‚¹é¤</h3><ul><li>ä½ ç‚¹äº†ä¸€ä»½â€œç‰›æ’â€ â†’ <code>try &#123; ç‚¹é¤(); &#125;</code></li><li>å¨æˆ¿å‘ç°â€œç‰›è‚‰å–å®Œäº†â€ â†’ <code>throw &quot;æ²¡ç‰›è‚‰äº†ï¼&quot;;</code></li><li>æœåŠ¡å‘˜æ¥åˆ°é€šçŸ¥ â†’ <code>catch (string msg) &#123; å‘Šè¯‰é¡¾å®¢ + æ¨èåˆ«çš„èœ &#125;</code></li><li>é¡¾å®¢ä¸ä¼šå› ä¸ºâ€œæ²¡ç‰›è‚‰â€æ€æ¡Œå­ï¼ˆç¨‹åºä¸å´©æºƒï¼‰ï¼Œè€Œæ˜¯ä¼˜é›…æ¢èœ ğŸ˜Š</li></ul><hr><h2 id="ğŸ§©-ä¸‰ã€åŸºæœ¬è¯­æ³•-ç¤ºä¾‹"><a href="#ğŸ§©-ä¸‰ã€åŸºæœ¬è¯­æ³•-ç¤ºä¾‹" class="headerlink" title="ğŸ§© ä¸‰ã€åŸºæœ¬è¯­æ³• + ç¤ºä¾‹"></a>ğŸ§© ä¸‰ã€åŸºæœ¬è¯­æ³• + ç¤ºä¾‹</h2><h3 id="âœ…-1-æŠ›å‡ºå¼‚å¸¸ï¼šthrow-è¡¨è¾¾å¼"><a href="#âœ…-1-æŠ›å‡ºå¼‚å¸¸ï¼šthrow-è¡¨è¾¾å¼" class="headerlink" title="âœ… 1. æŠ›å‡ºå¼‚å¸¸ï¼šthrow è¡¨è¾¾å¼;"></a>âœ… 1. æŠ›å‡ºå¼‚å¸¸ï¼š<code>throw è¡¨è¾¾å¼;</code></h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">checkAge</span><span class="params">(<span class="type">int</span> age)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (age &lt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="string">&quot;å¹´é¾„ä¸èƒ½ä¸ºè´Ÿæ•°ï¼&quot;</span>; <span class="comment">// æŠ›å‡ºå­—ç¬¦ä¸²å¼‚å¸¸</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (age &gt; <span class="number">150</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="number">999</span>; <span class="comment">// æŠ›å‡ºæ•´æ•°å¼‚å¸¸ï¼ˆä¸æ¨èï¼Œä½†åˆæ³•ï¼‰</span></span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;å¹´é¾„åˆæ³•ï¼š&quot;</span> &lt;&lt; age &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>ğŸ’¡ <code>throw</code> å¯ä»¥æŠ›å‡º <strong>ä»»ä½•ç±»å‹</strong>ï¼š<code>int</code>, <code>string</code>, <code>char*</code>, è‡ªå®šä¹‰ç±»å¯¹è±¡ç­‰<br>âœ… æ¨èæŠ›å‡º <strong>å¼‚å¸¸ç±»å¯¹è±¡</strong>ï¼ˆåæ–‡è®²ï¼‰</p></blockquote><hr><h3 id="âœ…-2-æ•è·å¼‚å¸¸ï¼štry-catch"><a href="#âœ…-2-æ•è·å¼‚å¸¸ï¼štry-catch" class="headerlink" title="âœ… 2. æ•è·å¼‚å¸¸ï¼štry { ... } catch (...) { ... }"></a>âœ… 2. æ•è·å¼‚å¸¸ï¼š<code>try &#123; ... &#125; catch (...) &#123; ... &#125;</code></h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="built_in">checkAge</span>(<span class="number">-5</span>); <span class="comment">// å¯èƒ½æŠ›å¼‚å¸¸</span></span><br><span class="line">    &#125; <span class="built_in">catch</span> (<span class="type">const</span> <span class="type">char</span>* msg) &#123; <span class="comment">// æ•è· char* ç±»å‹å¼‚å¸¸</span></span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;æ•è·åˆ°å¼‚å¸¸ï¼š&quot;</span> &lt;&lt; msg &lt;&lt; endl;</span><br><span class="line">    &#125; <span class="built_in">catch</span> (<span class="type">int</span> code) &#123; <span class="comment">// æ•è· int ç±»å‹å¼‚å¸¸</span></span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;é”™è¯¯ä»£ç ï¼š&quot;</span> &lt;&lt; code &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;ç¨‹åºç»§ç»­è¿è¡Œ...&quot;</span> &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>ğŸ–¨ï¸ è¾“å‡ºï¼š</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">æ•è·åˆ°å¼‚å¸¸ï¼šå¹´é¾„ä¸èƒ½ä¸ºè´Ÿæ•°ï¼</span><br><span class="line">ç¨‹åºç»§ç»­è¿è¡Œ...</span><br></pre></td></tr></table></figure><hr><h2 id="ğŸ§±-å››ã€å¼‚å¸¸çš„ä¼ æ’­ï¼ˆæ ˆå±•å¼€-â€”â€”-Stack-Unwindingï¼‰"><a href="#ğŸ§±-å››ã€å¼‚å¸¸çš„ä¼ æ’­ï¼ˆæ ˆå±•å¼€-â€”â€”-Stack-Unwindingï¼‰" class="headerlink" title="ğŸ§± å››ã€å¼‚å¸¸çš„ä¼ æ’­ï¼ˆæ ˆå±•å¼€ â€”â€” Stack Unwindingï¼‰"></a>ğŸ§± å››ã€å¼‚å¸¸çš„ä¼ æ’­ï¼ˆæ ˆå±•å¼€ â€”â€” Stack Unwindingï¼‰</h2><h3 id="â“-é—®é¢˜ï¼šå¦‚æœå¼‚å¸¸å‘ç”Ÿåœ¨â€œå‡½æ•°è°ƒç”¨æ·±å¤„â€ï¼Œæ€ä¹ˆåŠï¼Ÿ"><a href="#â“-é—®é¢˜ï¼šå¦‚æœå¼‚å¸¸å‘ç”Ÿåœ¨â€œå‡½æ•°è°ƒç”¨æ·±å¤„â€ï¼Œæ€ä¹ˆåŠï¼Ÿ" class="headerlink" title="â“ é—®é¢˜ï¼šå¦‚æœå¼‚å¸¸å‘ç”Ÿåœ¨â€œå‡½æ•°è°ƒç”¨æ·±å¤„â€ï¼Œæ€ä¹ˆåŠï¼Ÿ"></a>â“ é—®é¢˜ï¼šå¦‚æœå¼‚å¸¸å‘ç”Ÿåœ¨â€œå‡½æ•°è°ƒç”¨æ·±å¤„â€ï¼Œæ€ä¹ˆåŠï¼Ÿ</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">func3</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="string">&quot;func3 å‡ºé”™äº†ï¼&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">func3</span>(); <span class="comment">// func3 æŠ›å¼‚å¸¸</span></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;è¿™è¡Œä¸ä¼šæ‰§è¡Œï¼&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func1</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">func2</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="built_in">func1</span>(); <span class="comment">// å¼‚å¸¸ä» func3 ä¸€è·¯â€œå†’æ³¡â€åˆ° main</span></span><br><span class="line">    &#125; <span class="built_in">catch</span> (<span class="type">const</span> <span class="type">char</span>* msg) &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;main æ•è·ï¼š&quot;</span> &lt;&lt; msg &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>ğŸ”„ <strong>æ ˆå±•å¼€è¿‡ç¨‹</strong>ï¼š</p><ol><li><code>func3()</code> æŠ›å¼‚å¸¸</li><li><code>func3()</code> ç«‹åˆ»é€€å‡º â†’ ææ„å±€éƒ¨å¯¹è±¡</li><li><code>func2()</code> é€€å‡º â†’ ææ„å±€éƒ¨å¯¹è±¡</li><li><code>func1()</code> é€€å‡º â†’ ææ„å±€éƒ¨å¯¹è±¡</li><li><code>main()</code> çš„ <code>catch</code> æ•è·å¼‚å¸¸ â†’ ç¨‹åºç»§ç»­</li></ol></blockquote><blockquote><p>âœ… <strong>å…³é”®ç‚¹</strong>ï¼šå¼‚å¸¸ä¼šæ²¿ç€è°ƒç”¨æ ˆâ€œå‘ä¸Šä¼ æ’­â€ï¼Œç›´åˆ°è¢«æ•è·ï¼Œä¸­é—´å‡½æ•°å…¨éƒ¨é€€å‡ºï¼ˆå±€éƒ¨å¯¹è±¡è¢«ææ„ï¼‰ï¼</p></blockquote><hr><h2 id="ğŸ§°-äº”ã€æ ‡å‡†å¼‚å¸¸ç±»ï¼ˆæ¨èä½¿ç”¨ï¼ï¼‰"><a href="#ğŸ§°-äº”ã€æ ‡å‡†å¼‚å¸¸ç±»ï¼ˆæ¨èä½¿ç”¨ï¼ï¼‰" class="headerlink" title="ğŸ§° äº”ã€æ ‡å‡†å¼‚å¸¸ç±»ï¼ˆæ¨èä½¿ç”¨ï¼ï¼‰"></a>ğŸ§° äº”ã€æ ‡å‡†å¼‚å¸¸ç±»ï¼ˆæ¨èä½¿ç”¨ï¼ï¼‰</h2><p>C++ æ ‡å‡†åº“æä¾›äº†ä¸€å¥—å¼‚å¸¸ç±»ï¼ˆåœ¨ <code>&lt;stdexcept&gt;</code> ä¸­ï¼‰ï¼Œå»ºè®®ä¼˜å…ˆä½¿ç”¨ï¼š</p><table><thead><tr><th>å¼‚å¸¸ç±»</th><th>ç”¨é€”</th></tr></thead><tbody><tr><td><code>std::runtime_error</code></td><td>è¿è¡Œæ—¶é”™è¯¯ï¼ˆå¦‚æ–‡ä»¶æ‰“ä¸å¼€ï¼‰</td></tr><tr><td><code>std::logic_error</code></td><td>é€»è¾‘é”™è¯¯ï¼ˆå¦‚ä¼ å‚é”™è¯¯ï¼‰</td></tr><tr><td><code>std::invalid_argument</code></td><td>æ— æ•ˆå‚æ•°</td></tr><tr><td><code>std::out_of_range</code></td><td>è¶Šç•Œè®¿é—®ï¼ˆå¦‚ vectorï¼‰</td></tr></tbody></table><h3 id="âœ…-ç¤ºä¾‹ï¼šä½¿ç”¨æ ‡å‡†å¼‚å¸¸"><a href="#âœ…-ç¤ºä¾‹ï¼šä½¿ç”¨æ ‡å‡†å¼‚å¸¸" class="headerlink" title="âœ… ç¤ºä¾‹ï¼šä½¿ç”¨æ ‡å‡†å¼‚å¸¸"></a>âœ… ç¤ºä¾‹ï¼šä½¿ç”¨æ ‡å‡†å¼‚å¸¸</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdexcept&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">double</span> <span class="title">divide</span><span class="params">(<span class="type">double</span> a, <span class="type">double</span> b)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (b == <span class="number">0.0</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="built_in">invalid_argument</span>(<span class="string">&quot;é™¤æ•°ä¸èƒ½ä¸ºé›¶ï¼&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> a / b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        cout &lt;&lt; <span class="built_in">divide</span>(<span class="number">10.0</span>, <span class="number">0.0</span>) &lt;&lt; endl;</span><br><span class="line">    &#125; <span class="built_in">catch</span> (<span class="type">const</span> invalid_argument&amp; e) &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;å‚æ•°é”™è¯¯ï¼š&quot;</span> &lt;&lt; e.<span class="built_in">what</span>() &lt;&lt; endl;</span><br><span class="line">    &#125; <span class="built_in">catch</span> (<span class="type">const</span> exception&amp; e) &#123; <span class="comment">// åŸºç±»ï¼Œæ•è·æ‰€æœ‰æ ‡å‡†å¼‚å¸¸</span></span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;æ ‡å‡†å¼‚å¸¸ï¼š&quot;</span> &lt;&lt; e.<span class="built_in">what</span>() &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>ğŸ“Œ <code>.what()</code> æ˜¯ <code>std::exception</code> çš„è™šå‡½æ•°ï¼Œè¿”å›é”™è¯¯æè¿°å­—ç¬¦ä¸²ã€‚</p></blockquote><hr><h2 id="ğŸ› ï¸-å…­ã€è‡ªå®šä¹‰å¼‚å¸¸ç±»ï¼ˆé«˜çº§ç”¨æ³•ï¼‰"><a href="#ğŸ› ï¸-å…­ã€è‡ªå®šä¹‰å¼‚å¸¸ç±»ï¼ˆé«˜çº§ç”¨æ³•ï¼‰" class="headerlink" title="ğŸ› ï¸ å…­ã€è‡ªå®šä¹‰å¼‚å¸¸ç±»ï¼ˆé«˜çº§ç”¨æ³•ï¼‰"></a>ğŸ› ï¸ å…­ã€è‡ªå®šä¹‰å¼‚å¸¸ç±»ï¼ˆé«˜çº§ç”¨æ³•ï¼‰</h2><p>ä½ å¯ä»¥ç»§æ‰¿ <code>std::exception</code> æˆ–å…¶å­ç±»ï¼Œåˆ›å»ºè‡ªå·±çš„å¼‚å¸¸ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyException</span> : <span class="keyword">public</span> std::exception &#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    string msg;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">MyException</span>(<span class="type">const</span> string&amp; m) : <span class="built_in">msg</span>(m) &#123;&#125;</span><br><span class="line">    <span class="function"><span class="type">const</span> <span class="type">char</span>* <span class="title">what</span><span class="params">()</span> <span class="type">const</span> <span class="keyword">noexcept</span> <span class="keyword">override</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> msg.<span class="built_in">c_str</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">riskyFunction</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="built_in">MyException</span>(<span class="string">&quot;æˆ‘çš„è‡ªå®šä¹‰å¼‚å¸¸ï¼&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="built_in">riskyFunction</span>();</span><br><span class="line">    &#125; <span class="built_in">catch</span> (<span class="type">const</span> MyException&amp; e) &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;æ•è·è‡ªå®šä¹‰å¼‚å¸¸ï¼š&quot;</span> &lt;&lt; e.<span class="built_in">what</span>() &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>âœ… è‡ªå®šä¹‰å¼‚å¸¸ &#x3D; æ›´ç²¾ç¡®çš„é”™è¯¯åˆ†ç±» + æ›´ä¸°å¯Œçš„é”™è¯¯ä¿¡æ¯ï¼</p></blockquote><hr><h2 id="âš ï¸-ä¸ƒã€å¼‚å¸¸è§„èŒƒï¼ˆC-11-èµ·å·²åºŸå¼ƒï¼Œäº†è§£å³å¯ï¼‰"><a href="#âš ï¸-ä¸ƒã€å¼‚å¸¸è§„èŒƒï¼ˆC-11-èµ·å·²åºŸå¼ƒï¼Œäº†è§£å³å¯ï¼‰" class="headerlink" title="âš ï¸ ä¸ƒã€å¼‚å¸¸è§„èŒƒï¼ˆC++11 èµ·å·²åºŸå¼ƒï¼Œäº†è§£å³å¯ï¼‰"></a>âš ï¸ ä¸ƒã€å¼‚å¸¸è§„èŒƒï¼ˆC++11 èµ·å·²åºŸå¼ƒï¼Œäº†è§£å³å¯ï¼‰</h2><p>è€ç‰ˆæœ¬ C++ æ”¯æŒå¼‚å¸¸è§„èŒƒï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">()</span> <span class="title">throw</span><span class="params">(<span class="type">int</span>)</span></span>; <span class="comment">// åªå…è®¸æŠ› int å¼‚å¸¸ï¼ˆå·²åºŸå¼ƒï¼‰</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">()</span> <span class="title">throw</span><span class="params">()</span></span>;    <span class="comment">// ä¸å…è®¸æŠ›ä»»ä½•å¼‚å¸¸ï¼ˆå·²åºŸå¼ƒï¼‰</span></span><br></pre></td></tr></table></figure><blockquote><p>ğŸš« <strong>C++11 èµ·åºŸå¼ƒ</strong>ï¼Œæ”¹ç”¨ <code>noexcept</code>ï¼š</p></blockquote><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">safeFunc</span><span class="params">()</span> <span class="keyword">noexcept</span> </span>&#123; <span class="comment">// æ‰¿è¯ºä¸æŠ›å¼‚å¸¸</span></span><br><span class="line">    <span class="comment">// å¦‚æœè¿™é‡Œ throw äº† â†’ std::terminate() ç¨‹åºç»ˆæ­¢ï¼</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="ğŸ”„-å…«ã€é‡æ–°æŠ›å‡ºå¼‚å¸¸ï¼ˆthrow-ï¼‰"><a href="#ğŸ”„-å…«ã€é‡æ–°æŠ›å‡ºå¼‚å¸¸ï¼ˆthrow-ï¼‰" class="headerlink" title="ğŸ”„ å…«ã€é‡æ–°æŠ›å‡ºå¼‚å¸¸ï¼ˆthrow;ï¼‰"></a>ğŸ”„ å…«ã€é‡æ–°æŠ›å‡ºå¼‚å¸¸ï¼ˆ<code>throw;</code>ï¼‰</h2><p>åœ¨ <code>catch</code> å—ä¸­ï¼Œä½ å¯ä»¥â€œå¤„ç†ä¸€éƒ¨åˆ†ï¼Œå†æŠ›å‡ºå»â€ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">handlePartially</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="built_in">riskyOperation</span>();</span><br><span class="line">    &#125; <span class="built_in">catch</span> (...) &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;è®°å½•æ—¥å¿—ï¼šå‘ç”Ÿå¼‚å¸¸ï¼&quot;</span> &lt;&lt; endl;</span><br><span class="line">        <span class="keyword">throw</span>; <span class="comment">// é‡æ–°æŠ›å‡ºå½“å‰å¼‚å¸¸ï¼ˆä¸æ”¹å˜ç±»å‹ï¼ï¼‰</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="built_in">handlePartially</span>();</span><br><span class="line">    &#125; <span class="built_in">catch</span> (<span class="type">const</span> <span class="type">char</span>* msg) &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;æœ€ç»ˆå¤„ç†ï¼š&quot;</span> &lt;&lt; msg &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>âœ… ç”¨é€”ï¼šæ—¥å¿—è®°å½•ã€èµ„æºæ¸…ç†ã€éƒ¨åˆ†å¤„ç†åäº¤ç»™ä¸Šå±‚ã€‚</p></blockquote><hr><h2 id="ğŸ§¹-ä¹ã€å¼‚å¸¸å®‰å…¨ä¸-RAIIï¼ˆé‡è¦ï¼ï¼‰"><a href="#ğŸ§¹-ä¹ã€å¼‚å¸¸å®‰å…¨ä¸-RAIIï¼ˆé‡è¦ï¼ï¼‰" class="headerlink" title="ğŸ§¹ ä¹ã€å¼‚å¸¸å®‰å…¨ä¸ RAIIï¼ˆé‡è¦ï¼ï¼‰"></a>ğŸ§¹ ä¹ã€å¼‚å¸¸å®‰å…¨ä¸ RAIIï¼ˆé‡è¦ï¼ï¼‰</h2><h3 id="â—-å¼‚å¸¸å¯èƒ½å¯¼è‡´èµ„æºæ³„æ¼ï¼"><a href="#â—-å¼‚å¸¸å¯èƒ½å¯¼è‡´èµ„æºæ³„æ¼ï¼" class="headerlink" title="â— å¼‚å¸¸å¯èƒ½å¯¼è‡´èµ„æºæ³„æ¼ï¼"></a>â— å¼‚å¸¸å¯èƒ½å¯¼è‡´èµ„æºæ³„æ¼ï¼</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">badExample</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span>* p = <span class="keyword">new</span> <span class="type">int</span>[<span class="number">1000</span>];</span><br><span class="line">    <span class="built_in">riskyFunction</span>(); <span class="comment">// å¦‚æœè¿™é‡ŒæŠ›å¼‚å¸¸ â†’ p æ°¸è¿œä¸ä¼š deleteï¼</span></span><br><span class="line">    <span class="keyword">delete</span>[] p;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="âœ…-è§£å†³æ–¹æ¡ˆï¼šRAII-æ™ºèƒ½æŒ‡é’ˆ"><a href="#âœ…-è§£å†³æ–¹æ¡ˆï¼šRAII-æ™ºèƒ½æŒ‡é’ˆ" class="headerlink" title="âœ… è§£å†³æ–¹æ¡ˆï¼šRAII + æ™ºèƒ½æŒ‡é’ˆ"></a>âœ… è§£å†³æ–¹æ¡ˆï¼šRAII + æ™ºèƒ½æŒ‡é’ˆ</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;memory&gt;</span></span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">goodExample</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">auto</span> p = std::<span class="built_in">make_unique</span>&lt;<span class="type">int</span>[]&gt;(<span class="number">1000</span>); <span class="comment">// æ™ºèƒ½æŒ‡é’ˆ</span></span><br><span class="line">    <span class="built_in">riskyFunction</span>(); <span class="comment">// å³ä½¿æŠ›å¼‚å¸¸ï¼Œp ä¹Ÿä¼šè‡ªåŠ¨ææ„ï¼</span></span><br><span class="line">    <span class="comment">// ä¸ç”¨æ‰‹åŠ¨ delete</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>ğŸŒŸ <strong>RAII åŸåˆ™</strong>ï¼šèµ„æºè·å–å³åˆå§‹åŒ–ï¼Œç»‘å®šå¯¹è±¡ç”Ÿå‘½å‘¨æœŸ â†’ å¼‚å¸¸æ—¶è‡ªåŠ¨é‡Šæ”¾ï¼</p></blockquote><hr><h2 id="ğŸš«-åã€ä¸è¦åœ¨ææ„å‡½æ•°ä¸­æŠ›å¼‚å¸¸ï¼"><a href="#ğŸš«-åã€ä¸è¦åœ¨ææ„å‡½æ•°ä¸­æŠ›å¼‚å¸¸ï¼" class="headerlink" title="ğŸš« åã€ä¸è¦åœ¨ææ„å‡½æ•°ä¸­æŠ›å¼‚å¸¸ï¼"></a>ğŸš« åã€ä¸è¦åœ¨ææ„å‡½æ•°ä¸­æŠ›å¼‚å¸¸ï¼</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">BadClass</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    ~<span class="built_in">BadClass</span>() &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="string">&quot;ææ„å‡½æ•°æŠ›å¼‚å¸¸ï¼&quot;</span>; <span class="comment">// âŒ å±é™©ï¼</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><blockquote><p>ğŸ’¥ å¦‚æœææ„å‡½æ•°æŠ›å¼‚å¸¸ï¼Œä¸”å½“å‰æ­£åœ¨å¤„ç†å¦ä¸€ä¸ªå¼‚å¸¸ â†’ <code>std::terminate()</code> ç¨‹åºç›´æ¥ç»ˆæ­¢ï¼</p></blockquote><p>âœ… æ­£ç¡®åšæ³•ï¼šåœ¨ææ„å‡½æ•°ä¸­ç”¨ <code>try-catch</code> åæ‰å¼‚å¸¸ï¼Œæˆ–è®°å½•æ—¥å¿—ã€‚</p><hr><h2 id="ğŸ“Š-åä¸€ã€å¼‚å¸¸çš„æ€§èƒ½å¼€é”€"><a href="#ğŸ“Š-åä¸€ã€å¼‚å¸¸çš„æ€§èƒ½å¼€é”€" class="headerlink" title="ğŸ“Š åä¸€ã€å¼‚å¸¸çš„æ€§èƒ½å¼€é”€"></a>ğŸ“Š åä¸€ã€å¼‚å¸¸çš„æ€§èƒ½å¼€é”€</h2><ul><li><strong>æ— å¼‚å¸¸æ—¶</strong>ï¼šç°ä»£ç¼–è¯‘å™¨ä¼˜åŒ–å¾—å¾ˆå¥½ï¼Œå‡ ä¹æ— å¼€é”€</li><li><strong>æŠ›å¼‚å¸¸æ—¶</strong>ï¼šæ ˆå±•å¼€ã€æŸ¥æ‰¾ catch å— â†’ å¼€é”€è¾ƒå¤§ï¼ˆæ¯” if-else æ…¢å¾ˆå¤šï¼‰</li><li>âœ… <strong>å»ºè®®</strong>ï¼šå¼‚å¸¸ç”¨äºâ€œçœŸæ­£å¼‚å¸¸â€çš„æƒ…å†µï¼ˆå¦‚æ–‡ä»¶æ‰“ä¸å¼€ã€ç½‘ç»œæ–­å¼€ï¼‰ï¼Œä¸è¦ç”¨äºæ§åˆ¶æµç¨‹ï¼</li></ul><hr><h2 id="ğŸ§ -åäºŒã€å¼‚å¸¸-vs-é”™è¯¯ç -â€”â€”-å¦‚ä½•é€‰æ‹©ï¼Ÿ"><a href="#ğŸ§ -åäºŒã€å¼‚å¸¸-vs-é”™è¯¯ç -â€”â€”-å¦‚ä½•é€‰æ‹©ï¼Ÿ" class="headerlink" title="ğŸ§  åäºŒã€å¼‚å¸¸ vs é”™è¯¯ç  â€”â€” å¦‚ä½•é€‰æ‹©ï¼Ÿ"></a>ğŸ§  åäºŒã€å¼‚å¸¸ vs é”™è¯¯ç  â€”â€” å¦‚ä½•é€‰æ‹©ï¼Ÿ</h2><table><thead><tr><th>åœºæ™¯</th><th>æ¨èæ–¹å¼</th></tr></thead><tbody><tr><td>é¢‘ç¹å‘ç”Ÿçš„â€œå¯é¢„æœŸâ€é”™è¯¯ï¼ˆå¦‚ç”¨æˆ·è¾“é”™ï¼‰</td><td>âœ… é”™è¯¯ç </td></tr><tr><td>ç½•è§ã€ä¸¥é‡ã€ä¸å¯æ¢å¤çš„é”™è¯¯ï¼ˆå¦‚å†…å­˜ä¸è¶³ã€æ–‡ä»¶æŸåï¼‰</td><td>âœ… å¼‚å¸¸</td></tr><tr><td>åº“å‡½æ•°ã€API è®¾è®¡</td><td>âœ… å¼‚å¸¸ï¼ˆæ›´å®‰å…¨ã€ä¸æ˜“å¿½ç•¥ï¼‰</td></tr><tr><td>æ€§èƒ½æ•æ„Ÿä»£ç ï¼ˆæ¸¸æˆå¾ªç¯ã€é«˜é¢‘äº¤æ˜“ï¼‰</td><td>âœ… é”™è¯¯ç </td></tr></tbody></table><hr><h2 id="ğŸ“-åä¸‰ã€å®Œæ•´å®æˆ˜ç¤ºä¾‹"><a href="#ğŸ“-åä¸‰ã€å®Œæ•´å®æˆ˜ç¤ºä¾‹" class="headerlink" title="ğŸ“ åä¸‰ã€å®Œæ•´å®æˆ˜ç¤ºä¾‹"></a>ğŸ“ åä¸‰ã€å®Œæ•´å®æˆ˜ç¤ºä¾‹</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;fstream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdexcept&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ConfigFile</span> &#123;</span><br><span class="line">    string filename;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">ConfigFile</span>(<span class="type">const</span> string&amp; fname) : <span class="built_in">filename</span>(fname) &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">string <span class="title">load</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="function">ifstream <span class="title">file</span><span class="params">(filename)</span></span>;</span><br><span class="line">        <span class="keyword">if</span> (!file.<span class="built_in">is_open</span>()) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="built_in">runtime_error</span>(<span class="string">&quot;æ— æ³•æ‰“å¼€é…ç½®æ–‡ä»¶: &quot;</span> + filename);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        string content, line;</span><br><span class="line">        <span class="keyword">while</span> (<span class="built_in">getline</span>(file, line)) &#123;</span><br><span class="line">            content += line + <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> content;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="function">ConfigFile <span class="title">cfg</span><span class="params">(<span class="string">&quot;config.txt&quot;</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        string data = cfg.<span class="built_in">load</span>();</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;é…ç½®å†…å®¹ï¼š\n&quot;</span> &lt;&lt; data &lt;&lt; endl;</span><br><span class="line">    &#125; <span class="built_in">catch</span> (<span class="type">const</span> runtime_error&amp; e) &#123;</span><br><span class="line">        cerr &lt;&lt; <span class="string">&quot;åŠ è½½å¤±è´¥ï¼š&quot;</span> &lt;&lt; e.<span class="built_in">what</span>() &lt;&lt; endl;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125; <span class="built_in">catch</span> (...) &#123;</span><br><span class="line">        cerr &lt;&lt; <span class="string">&quot;æœªçŸ¥é”™è¯¯ï¼&quot;</span> &lt;&lt; endl;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">2</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;ç¨‹åºæ­£å¸¸ç»“æŸã€‚&quot;</span> &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="ğŸ“Œ-æ€»ç»“ï¼šC-å¼‚å¸¸æœºåˆ¶æ ¸å¿ƒè¦ç‚¹"><a href="#ğŸ“Œ-æ€»ç»“ï¼šC-å¼‚å¸¸æœºåˆ¶æ ¸å¿ƒè¦ç‚¹" class="headerlink" title="ğŸ“Œ æ€»ç»“ï¼šC++ å¼‚å¸¸æœºåˆ¶æ ¸å¿ƒè¦ç‚¹"></a>ğŸ“Œ æ€»ç»“ï¼šC++ å¼‚å¸¸æœºåˆ¶æ ¸å¿ƒè¦ç‚¹</h2><table><thead><tr><th>æ¦‚å¿µ</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>throw</code></td><td>æŠ›å‡ºå¼‚å¸¸ï¼Œä¸­æ–­å½“å‰å‡½æ•°</td></tr><tr><td><code>try-catch</code></td><td>æ•è·å¹¶å¤„ç†å¼‚å¸¸ï¼Œé˜²æ­¢ç¨‹åºå´©æºƒ</td></tr><tr><td>æ ˆå±•å¼€</td><td>å¼‚å¸¸å‘ä¸Šä¼ æ’­ï¼Œä¸­é—´å‡½æ•°é€€å‡ºï¼Œå±€éƒ¨å¯¹è±¡ææ„</td></tr><tr><td>æ ‡å‡†å¼‚å¸¸</td><td>ä¼˜å…ˆä½¿ç”¨ <code>std::exception</code> åŠå…¶å­ç±»</td></tr><tr><td>è‡ªå®šä¹‰å¼‚å¸¸</td><td>ç»§æ‰¿ <code>std::exception</code>ï¼Œé‡å†™ <code>what()</code></td></tr><tr><td><code>noexcept</code></td><td>å£°æ˜å‡½æ•°ä¸æŠ›å¼‚å¸¸ï¼ˆC++11ï¼‰</td></tr><tr><td><code>throw;</code></td><td>é‡æ–°æŠ›å‡ºå½“å‰å¼‚å¸¸</td></tr><tr><td>RAII</td><td>ç”¨å¯¹è±¡ç®¡ç†èµ„æºï¼Œç¡®ä¿å¼‚å¸¸æ—¶è‡ªåŠ¨é‡Šæ”¾</td></tr><tr><td>ææ„å‡½æ•°</td><td>ç»å¯¹ä¸è¦æŠ›å¼‚å¸¸ï¼</td></tr><tr><td>æ€§èƒ½</td><td>å¼‚å¸¸ç”¨äºâ€œçœŸå¼‚å¸¸â€ï¼Œä¸è¦æ»¥ç”¨</td></tr></tbody></table><hr><h2 id="ğŸ§©-è€ƒè€ƒä½ ï¼"><a href="#ğŸ§©-è€ƒè€ƒä½ ï¼" class="headerlink" title="ğŸ§© è€ƒè€ƒä½ ï¼"></a>ğŸ§© è€ƒè€ƒä½ ï¼</h2><p>ä¸‹é¢ä»£ç ä¼šè¾“å‡ºä»€ä¹ˆï¼Ÿ</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">A</span> &#123;</span><br><span class="line">    <span class="built_in">A</span>() &#123; cout &lt;&lt; <span class="string">&quot;A æ„é€ &quot;</span> &lt;&lt; endl; &#125;</span><br><span class="line">    ~<span class="built_in">A</span>() &#123; cout &lt;&lt; <span class="string">&quot;A ææ„&quot;</span> &lt;&lt; endl; &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    A a;</span><br><span class="line">    <span class="keyword">throw</span> <span class="string">&quot;å‡ºé”™äº†ï¼&quot;</span>;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;è¿™è¡Œä¸ä¼šæ‰§è¡Œ&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="built_in">func</span>();</span><br><span class="line">    &#125; <span class="built_in">catch</span> (<span class="type">const</span> <span class="type">char</span>* msg) &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;æ•è·ï¼š&quot;</span> &lt;&lt; msg &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>âœ… ç­”æ¡ˆï¼š</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">A æ„é€ </span><br><span class="line">A ææ„</span><br><span class="line">æ•è·ï¼šå‡ºé”™äº†ï¼</span><br></pre></td></tr></table></figure><blockquote><p>ğŸŒŸ è§£é‡Šï¼šå³ä½¿ <code>throw</code> ä¸­æ–­äº† <code>func()</code>ï¼Œå±€éƒ¨å¯¹è±¡ <code>a</code> ä»ä¼šææ„ï¼è¿™å°±æ˜¯ <strong>æ ˆå±•å¼€ + RAII</strong> çš„å¨åŠ›ï¼</p></blockquote>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;ğŸš¨-C-å¼‚å¸¸æœºåˆ¶-â€”â€”-ä»é›¶åˆ°ç²¾é€š&quot;&gt;&lt;a href=&quot;#ğŸš¨-C-å¼‚å¸¸æœºåˆ¶-â€”â€”-ä»é›¶åˆ°ç²¾é€š&quot; class=&quot;headerlink&quot; title=&quot;ğŸš¨ C++ å¼‚å¸¸æœºåˆ¶ â€”â€” ä»é›¶åˆ°ç²¾é€š&quot;&gt;&lt;/a&gt;ğŸš¨ C++ å¼‚å¸¸æœºåˆ¶ â€”â€” ä»é›¶åˆ°ç²¾é€š&lt;/h1&gt;&lt;blockquote&gt;
&lt;p&gt;ğŸ’¡ ä¸€å¥è¯æ€»ç»“ï¼š&lt;br&gt;&lt;strong&gt;â€œå¼‚å¸¸ &amp;#x3D; ç¨‹åºè¿è¡Œæ—¶å‘ç”Ÿçš„â€˜æ„å¤–æƒ…å†µâ€™ï¼ŒC++ ç”¨ &lt;code&gt;throw&lt;/code&gt;, &lt;code&gt;try&lt;/code&gt;, &lt;code&gt;catch&lt;/code&gt; ä¸‰å‰‘å®¢æ¥å¤„ç†å®ƒï¼Œè®©ç¨‹åºä¸å´©æºƒã€èƒ½æ¢å¤ã€æœ‰å°Šä¸¥åœ°æŠ¥é”™ã€‚â€&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;</summary>
    
    
    
    
    <category term="C++" scheme="https://lyroom.github.io/tags/C/"/>
    
    <category term="æœèŠ±å¤•æ‹¾" scheme="https://lyroom.github.io/tags/%E6%9C%9D%E8%8A%B1%E5%A4%95%E6%8B%BE/"/>
    
  </entry>
  
  <entry>
    <title>C++æœèŠ±å¤•æ‹¾-ğŸŒŠ æµ…æ‹·è´ vs ğŸ—ï¸ æ·±æ‹·è´</title>
    <link href="https://lyroom.github.io/2025/09/22/C-%E6%9C%9D%E8%8A%B1%E5%A4%95%E6%8B%BE-%F0%9F%8C%8A-%E6%B5%85%E6%8B%B7%E8%B4%9D-vs-%F0%9F%8F%97%EF%B8%8F-%E6%B7%B1%E6%8B%B7%E8%B4%9D/"/>
    <id>https://lyroom.github.io/2025/09/22/C-%E6%9C%9D%E8%8A%B1%E5%A4%95%E6%8B%BE-%F0%9F%8C%8A-%E6%B5%85%E6%8B%B7%E8%B4%9D-vs-%F0%9F%8F%97%EF%B8%8F-%E6%B7%B1%E6%8B%B7%E8%B4%9D/</id>
    <published>2025-09-22T07:36:25.000Z</published>
    <updated>2025-09-22T07:36:25.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ğŸŒŠ-æµ…æ‹·è´-vs-ğŸ—ï¸-æ·±æ‹·è´-â€”â€”-ä¸€æ–‡çœ‹æ‡‚ï¼"><a href="#ğŸŒŠ-æµ…æ‹·è´-vs-ğŸ—ï¸-æ·±æ‹·è´-â€”â€”-ä¸€æ–‡çœ‹æ‡‚ï¼" class="headerlink" title="ğŸŒŠ æµ…æ‹·è´ vs ğŸ—ï¸ æ·±æ‹·è´ â€”â€” ä¸€æ–‡çœ‹æ‡‚ï¼"></a>ğŸŒŠ æµ…æ‹·è´ vs ğŸ—ï¸ æ·±æ‹·è´ â€”â€” ä¸€æ–‡çœ‹æ‡‚ï¼</h1><hr><h2 id="ğŸ§â€â™‚ï¸-ä¸¾ä¸ªç”Ÿæ´»ä¾‹å­ï¼šå¤å°é’¥åŒ™"><a href="#ğŸ§â€â™‚ï¸-ä¸¾ä¸ªç”Ÿæ´»ä¾‹å­ï¼šå¤å°é’¥åŒ™" class="headerlink" title="ğŸ§â€â™‚ï¸ ä¸¾ä¸ªç”Ÿæ´»ä¾‹å­ï¼šå¤å°é’¥åŒ™"></a>ğŸ§â€â™‚ï¸ ä¸¾ä¸ªç”Ÿæ´»ä¾‹å­ï¼šå¤å°é’¥åŒ™</h2><p>æƒ³è±¡ä½ æœ‰ä¸€æŠŠ<strong>å®¶é—¨é’¥åŒ™ğŸ”‘</strong>ï¼Œä½ æŠŠå®ƒâ€œæ‹·è´â€ç»™æœ‹å‹ï¼š</p><span id="more"></span><ul><li><p><strong>æµ…æ‹·è´</strong> &#x3D; ä½ ç›´æ¥æŠŠåŸé’¥åŒ™ç»™äº†æœ‹å‹ â†’ ä½ ä»¬ä¿©ç”¨çš„æ˜¯<strong>åŒä¸€æŠŠé’¥åŒ™</strong><br>ğŸ‘‰ ä»–ä¸¢äº†é’¥åŒ™ï¼Œä½ ä¹Ÿè¿›ä¸äº†é—¨ï¼<br>ğŸ‘‰ ä»–é…äº†ä¸€æŠŠæ–°é’¥åŒ™ï¼Œä½ ä¹Ÿå¤šäº†ä¸€æŠŠï¼</p></li><li><p><strong>æ·±æ‹·è´</strong> &#x3D; ä½ å»é…äº†ä¸€æŠŠ<strong>å…¨æ–°çš„ã€ç‹¬ç«‹çš„é’¥åŒ™</strong>ç»™æœ‹å‹ â†’ ä½ ä»¬å„æœ‰å„çš„é’¥åŒ™<br>ğŸ‘‰ ä»–ä¸¢äº†ï¼Œä¸å½±å“ä½ <br>ğŸ‘‰ ä»–æ¢é”äº†ï¼Œä½ å®¶é—¨è¿˜æ˜¯åŸæ ·ï¼</p></li></ul><hr><h2 id="ğŸ’¡-åœ¨-C-ä¸­ï¼Œè¿™â€œé’¥åŒ™â€å°±æ˜¯â€”â€”æŒ‡é’ˆæŒ‡å‘çš„å †å†…å­˜"><a href="#ğŸ’¡-åœ¨-C-ä¸­ï¼Œè¿™â€œé’¥åŒ™â€å°±æ˜¯â€”â€”æŒ‡é’ˆæŒ‡å‘çš„å †å†…å­˜" class="headerlink" title="ğŸ’¡ åœ¨ C++ ä¸­ï¼Œè¿™â€œé’¥åŒ™â€å°±æ˜¯â€”â€”æŒ‡é’ˆæŒ‡å‘çš„å †å†…å­˜"></a>ğŸ’¡ åœ¨ C++ ä¸­ï¼Œè¿™â€œé’¥åŒ™â€å°±æ˜¯â€”â€”<strong>æŒ‡é’ˆæŒ‡å‘çš„å †å†…å­˜</strong></h2><p>å½“ä½ æœ‰ä¸€ä¸ªç±»ï¼Œé‡Œé¢åŒ…å«æŒ‡é’ˆæˆå‘˜ï¼ˆæ¯”å¦‚ <code>int* p;</code>ï¼‰ï¼Œæ‹·è´å¯¹è±¡æ—¶ï¼š</p><ul><li><strong>æµ…æ‹·è´</strong>ï¼šåªå¤åˆ¶æŒ‡é’ˆçš„å€¼ï¼ˆåœ°å€ï¼‰â†’ ä¸¤ä¸ªå¯¹è±¡æŒ‡å‘<strong>åŒä¸€å—å†…å­˜</strong></li><li><strong>æ·±æ‹·è´</strong>ï¼šå¤åˆ¶æŒ‡é’ˆæŒ‡å‘çš„<strong>å†…å®¹</strong> â†’ ä¸¤ä¸ªå¯¹è±¡å„è‡ªæ‹¥æœ‰<strong>ç‹¬ç«‹çš„å†…å­˜</strong></li></ul><hr><h2 id="ğŸ“œ-é»˜è®¤æ‹·è´æ˜¯â€œæµ…æ‹·è´â€"><a href="#ğŸ“œ-é»˜è®¤æ‹·è´æ˜¯â€œæµ…æ‹·è´â€" class="headerlink" title="ğŸ“œ é»˜è®¤æ‹·è´æ˜¯â€œæµ…æ‹·è´â€"></a>ğŸ“œ é»˜è®¤æ‹·è´æ˜¯â€œæµ…æ‹·è´â€</h2><p>C++ ç¼–è¯‘å™¨é»˜è®¤æä¾›çš„æ‹·è´æ„é€ å‡½æ•°å’Œèµ‹å€¼è¿ç®—ç¬¦ï¼Œéƒ½æ˜¯<strong>æµ…æ‹·è´</strong>ï¼</p><h3 id="ğŸ‘‡-çœ‹ä¸ªæµ…æ‹·è´å‡ºé—®é¢˜çš„ä¾‹å­ï¼š"><a href="#ğŸ‘‡-çœ‹ä¸ªæµ…æ‹·è´å‡ºé—®é¢˜çš„ä¾‹å­ï¼š" class="headerlink" title="ğŸ‘‡ çœ‹ä¸ªæµ…æ‹·è´å‡ºé—®é¢˜çš„ä¾‹å­ï¼š"></a>ğŸ‘‡ çœ‹ä¸ªæµ…æ‹·è´å‡ºé—®é¢˜çš„ä¾‹å­ï¼š</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="type">int</span>* score;  <span class="comment">// æŒ‡å‘å †å†…å­˜çš„æŒ‡é’ˆ</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">Student</span>(<span class="type">int</span> s) &#123;</span><br><span class="line">        score = <span class="keyword">new</span> <span class="built_in">int</span>(s); <span class="comment">// åœ¨å †ä¸Šåˆ†é…å†…å­˜</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç¼–è¯‘å™¨é»˜è®¤ç”Ÿæˆæµ…æ‹·è´æ„é€ å‡½æ•°ï¼š</span></span><br><span class="line">    <span class="comment">// Student(const Student&amp; other) &#123;</span></span><br><span class="line">    <span class="comment">//     score = other.score; // åªå¤åˆ¶åœ°å€ï¼</span></span><br><span class="line">    <span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line">    ~<span class="built_in">Student</span>() &#123;</span><br><span class="line">        <span class="keyword">delete</span> score; <span class="comment">// é‡Šæ”¾å†…å­˜</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="function">Student <span class="title">s1</span><span class="params">(<span class="number">90</span>)</span></span>;</span><br><span class="line">    Student s2 = s1; <span class="comment">// æµ…æ‹·è´ï¼s2.score å’Œ s1.score æŒ‡å‘åŒä¸€å—å†…å­˜</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// å½“ s1 å’Œ s2 ææ„æ—¶...</span></span><br><span class="line">&#125; <span class="comment">// ğŸ’¥ ç¨‹åºå´©æºƒï¼åŒä¸€å—å†…å­˜è¢« delete äº†ä¸¤æ¬¡ï¼</span></span><br></pre></td></tr></table></figure><blockquote><p>ğŸ’¥ è¿™å°±æ˜¯â€œæµ…æ‹·è´é™·é˜±â€â€”â€”<strong>é‡å¤é‡Šæ”¾å†…å­˜ï¼Œç¨‹åºå´©æºƒï¼</strong></p></blockquote><hr><h2 id="âœ…-æ·±æ‹·è´ï¼šè‡ªå·±åŠ¨æ‰‹ï¼Œä¸°è¡£è¶³é£Ÿï¼"><a href="#âœ…-æ·±æ‹·è´ï¼šè‡ªå·±åŠ¨æ‰‹ï¼Œä¸°è¡£è¶³é£Ÿï¼" class="headerlink" title="âœ… æ·±æ‹·è´ï¼šè‡ªå·±åŠ¨æ‰‹ï¼Œä¸°è¡£è¶³é£Ÿï¼"></a>âœ… æ·±æ‹·è´ï¼šè‡ªå·±åŠ¨æ‰‹ï¼Œä¸°è¡£è¶³é£Ÿï¼</h2><p>æˆ‘ä»¬æ‰‹åŠ¨å†™æ‹·è´æ„é€ å‡½æ•°å’Œèµ‹å€¼è¿ç®—ç¬¦ï¼Œå®ç°æ·±æ‹·è´ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="type">int</span>* score;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">Student</span>(<span class="type">int</span> s) &#123;</span><br><span class="line">        score = <span class="keyword">new</span> <span class="built_in">int</span>(s);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ğŸ‘‡ æ·±æ‹·è´æ„é€ å‡½æ•°</span></span><br><span class="line">    <span class="built_in">Student</span>(<span class="type">const</span> Student&amp; other) &#123;</span><br><span class="line">        score = <span class="keyword">new</span> <span class="built_in">int</span>(*other.score); <span class="comment">// åˆ†é…æ–°å†…å­˜ï¼Œå¤åˆ¶å†…å®¹</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ğŸ‘‡ æ·±æ‹·è´èµ‹å€¼è¿ç®—ç¬¦</span></span><br><span class="line">    Student&amp; <span class="keyword">operator</span>=(<span class="type">const</span> Student&amp; other) &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span> == &amp;other) <span class="keyword">return</span> *<span class="keyword">this</span>; <span class="comment">// è‡ªæˆ‘èµ‹å€¼æ£€æŸ¥</span></span><br><span class="line">        <span class="keyword">delete</span> score;                     <span class="comment">// å…ˆé‡Šæ”¾æ—§å†…å­˜</span></span><br><span class="line">        score = <span class="keyword">new</span> <span class="built_in">int</span>(*other.score);    <span class="comment">// å†æ·±æ‹·è´</span></span><br><span class="line">        <span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ~<span class="built_in">Student</span>() &#123;</span><br><span class="line">        <span class="keyword">delete</span> score;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="function">Student <span class="title">s1</span><span class="params">(<span class="number">90</span>)</span></span>;</span><br><span class="line">    Student s2 = s1; <span class="comment">// æ·±æ‹·è´ï¼å„è‡ªæœ‰ç‹¬ç«‹å†…å­˜</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä¿®æ”¹ s2 ä¸å½±å“ s1</span></span><br><span class="line">    *s2.score = <span class="number">100</span>;</span><br><span class="line">    cout &lt;&lt; *s1.score &lt;&lt; endl; <span class="comment">// è¾“å‡º 90 âœ…</span></span><br><span class="line">    cout &lt;&lt; *s2.score &lt;&lt; endl; <span class="comment">// è¾“å‡º 100 âœ…</span></span><br><span class="line"></span><br><span class="line">&#125; <span class="comment">// ææ„æ—¶å„è‡ªé‡Šæ”¾è‡ªå·±çš„å†…å­˜ï¼Œå®‰å…¨ï¼âœ…</span></span><br></pre></td></tr></table></figure><hr><h2 id="ğŸ§©-ä¸€å¥è¯æ€»ç»“"><a href="#ğŸ§©-ä¸€å¥è¯æ€»ç»“" class="headerlink" title="ğŸ§© ä¸€å¥è¯æ€»ç»“"></a>ğŸ§© ä¸€å¥è¯æ€»ç»“</h2><blockquote><p><strong>æµ…æ‹·è´ &#x3D; å¤å°åœ°å€ï¼ˆå…±äº«èµ„æºï¼Œå±é™©ï¼ï¼‰</strong><br><strong>æ·±æ‹·è´ &#x3D; å¤å°å†…å®¹ï¼ˆç‹¬ç«‹èµ„æºï¼Œå®‰å…¨ï¼ï¼‰</strong></p></blockquote><hr><h2 id="ğŸš¨-ä»€ä¹ˆæ—¶å€™éœ€è¦æ·±æ‹·è´ï¼Ÿ"><a href="#ğŸš¨-ä»€ä¹ˆæ—¶å€™éœ€è¦æ·±æ‹·è´ï¼Ÿ" class="headerlink" title="ğŸš¨ ä»€ä¹ˆæ—¶å€™éœ€è¦æ·±æ‹·è´ï¼Ÿ"></a>ğŸš¨ ä»€ä¹ˆæ—¶å€™éœ€è¦æ·±æ‹·è´ï¼Ÿ</h2><p>âœ… å½“ä½ çš„ç±»ä¸­åŒ…å«ï¼š</p><ul><li>æŒ‡é’ˆæˆå‘˜ï¼ˆ<code>int*</code>, <code>char*</code>, <code>MyClass*</code> ç­‰ï¼‰</li><li>åŠ¨æ€åˆ†é…çš„èµ„æºï¼ˆ<code>new</code>, <code>malloc</code>, æ–‡ä»¶å¥æŸ„ç­‰ï¼‰</li><li>ä»»ä½•â€œç‹¬å èµ„æºâ€ â€”â€” ä¸èƒ½å…±äº«çš„ä¸œè¥¿ï¼</li></ul><blockquote><p>ğŸ“Œ å£è¯€ï¼š<strong>â€œä¸‰äº”æ³•åˆ™â€</strong><br>å¦‚æœä½ éœ€è¦è‡ªå®šä¹‰ææ„å‡½æ•°ã€æ‹·è´æ„é€ ã€èµ‹å€¼è¿ç®—ç¬¦ä¸­çš„ä»»ä½•ä¸€ä¸ªï¼Œå¾ˆå¯èƒ½ä¸‰ä¸ªéƒ½éœ€è¦å†™ï¼</p></blockquote><hr><h2 id="ğŸ-é¢å¤–å°è´´å£«ï¼šç°ä»£-C-æ›´æ¨èç”¨â€œæ™ºèƒ½æŒ‡é’ˆâ€æˆ–â€œå€¼è¯­ä¹‰â€"><a href="#ğŸ-é¢å¤–å°è´´å£«ï¼šç°ä»£-C-æ›´æ¨èç”¨â€œæ™ºèƒ½æŒ‡é’ˆâ€æˆ–â€œå€¼è¯­ä¹‰â€" class="headerlink" title="ğŸ é¢å¤–å°è´´å£«ï¼šç°ä»£ C++ æ›´æ¨èç”¨â€œæ™ºèƒ½æŒ‡é’ˆâ€æˆ–â€œå€¼è¯­ä¹‰â€"></a>ğŸ é¢å¤–å°è´´å£«ï¼šç°ä»£ C++ æ›´æ¨èç”¨â€œæ™ºèƒ½æŒ‡é’ˆâ€æˆ–â€œå€¼è¯­ä¹‰â€</h2><p>æ¯”å¦‚ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    std::unique_ptr&lt;<span class="type">int</span>&gt; score; <span class="comment">// è‡ªåŠ¨ç®¡ç†å†…å­˜ï¼Œæ‹·è´æ—¶ç¼–è¯‘å™¨ä¼šæŠ¥é”™ï¼ˆä¸å¯æ‹·è´ï¼‰</span></span><br><span class="line">    <span class="comment">// æˆ–è€…</span></span><br><span class="line">    <span class="type">int</span> score; <span class="comment">// ç›´æ¥å­˜å€¼ï¼Œæ ¹æœ¬ä¸éœ€è¦æŒ‡é’ˆ â†’ é»˜è®¤æ‹·è´å°±æ˜¯â€œæ·±æ‹·è´â€</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><blockquote><p>âœ… ä¼˜å…ˆä½¿ç”¨ <code>std::string</code>, <code>std::vector</code>, <code>std::unique_ptr</code> ç­‰ RAII ç±»å‹ï¼Œé¿å…æ‰‹åŠ¨ç®¡ç†å†…å­˜ï¼</p></blockquote><hr><h2 id="ğŸ§ -è€ƒè€ƒä½ ï¼"><a href="#ğŸ§ -è€ƒè€ƒä½ ï¼" class="headerlink" title="ğŸ§  è€ƒè€ƒä½ ï¼"></a>ğŸ§  è€ƒè€ƒä½ ï¼</h2><p>ä¸‹é¢ä»£ç ä¼šå‡ºé—®é¢˜å—ï¼Ÿ</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Cat</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    std::string name;</span><br><span class="line">    <span class="built_in">Cat</span>(std::string n) : <span class="built_in">name</span>(n) &#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="function">Cat <span class="title">c1</span><span class="params">(<span class="string">&quot;Tom&quot;</span>)</span></span>;</span><br><span class="line">    Cat c2 = c1; <span class="comment">// æµ…æ‹·è´è¿˜æ˜¯æ·±æ‹·è´ï¼Ÿ</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>âœ… ç­”æ¡ˆï¼š<strong>æ·±æ‹·è´ï¼</strong><br>å› ä¸º <code>std::string</code> å†…éƒ¨å·²ç»å¸®ä½ å®ç°äº†æ·±æ‹·è´ï¼ˆæˆ–å†™æ—¶å¤åˆ¶ï¼‰ï¼Œä½ æ— éœ€æ“å¿ƒï¼</p></blockquote>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;ğŸŒŠ-æµ…æ‹·è´-vs-ğŸ—ï¸-æ·±æ‹·è´-â€”â€”-ä¸€æ–‡çœ‹æ‡‚ï¼&quot;&gt;&lt;a href=&quot;#ğŸŒŠ-æµ…æ‹·è´-vs-ğŸ—ï¸-æ·±æ‹·è´-â€”â€”-ä¸€æ–‡çœ‹æ‡‚ï¼&quot; class=&quot;headerlink&quot; title=&quot;ğŸŒŠ æµ…æ‹·è´ vs ğŸ—ï¸ æ·±æ‹·è´ â€”â€” ä¸€æ–‡çœ‹æ‡‚ï¼&quot;&gt;&lt;/a&gt;ğŸŒŠ æµ…æ‹·è´ vs ğŸ—ï¸ æ·±æ‹·è´ â€”â€” ä¸€æ–‡çœ‹æ‡‚ï¼&lt;/h1&gt;&lt;hr&gt;
&lt;h2 id=&quot;ğŸ§â€â™‚ï¸-ä¸¾ä¸ªç”Ÿæ´»ä¾‹å­ï¼šå¤å°é’¥åŒ™&quot;&gt;&lt;a href=&quot;#ğŸ§â€â™‚ï¸-ä¸¾ä¸ªç”Ÿæ´»ä¾‹å­ï¼šå¤å°é’¥åŒ™&quot; class=&quot;headerlink&quot; title=&quot;ğŸ§â€â™‚ï¸ ä¸¾ä¸ªç”Ÿæ´»ä¾‹å­ï¼šå¤å°é’¥åŒ™&quot;&gt;&lt;/a&gt;ğŸ§â€â™‚ï¸ ä¸¾ä¸ªç”Ÿæ´»ä¾‹å­ï¼šå¤å°é’¥åŒ™&lt;/h2&gt;&lt;p&gt;æƒ³è±¡ä½ æœ‰ä¸€æŠŠ&lt;strong&gt;å®¶é—¨é’¥åŒ™ğŸ”‘&lt;/strong&gt;ï¼Œä½ æŠŠå®ƒâ€œæ‹·è´â€ç»™æœ‹å‹ï¼š&lt;/p&gt;</summary>
    
    
    
    
    <category term="C++" scheme="https://lyroom.github.io/tags/C/"/>
    
    <category term="æœèŠ±å¤•æ‹¾" scheme="https://lyroom.github.io/tags/%E6%9C%9D%E8%8A%B1%E5%A4%95%E6%8B%BE/"/>
    
    <category term="æµ…æ‹·è´" scheme="https://lyroom.github.io/tags/%E6%B5%85%E6%8B%B7%E8%B4%9D/"/>
    
    <category term="æ·±æ‹·è´" scheme="https://lyroom.github.io/tags/%E6%B7%B1%E6%8B%B7%E8%B4%9D/"/>
    
  </entry>
  
  <entry>
    <title>C++æœèŠ±å¤•æ‹¾-usingå…³é”®å­—</title>
    <link href="https://lyroom.github.io/2025/09/22/C-%E6%9C%9D%E8%8A%B1%E5%A4%95%E6%8B%BE-using%E5%85%B3%E9%94%AE%E5%AD%97/"/>
    <id>https://lyroom.github.io/2025/09/22/C-%E6%9C%9D%E8%8A%B1%E5%A4%95%E6%8B%BE-using%E5%85%B3%E9%94%AE%E5%AD%97/</id>
    <published>2025-09-22T07:12:49.000Z</published>
    <updated>2025-09-22T07:12:49.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ğŸ“˜-C-ä¸­-using-å…³é”®å­—çš„ç”¨æ³•è¯¦è§£"><a href="#ğŸ“˜-C-ä¸­-using-å…³é”®å­—çš„ç”¨æ³•è¯¦è§£" class="headerlink" title="ğŸ“˜ C++ ä¸­ using å…³é”®å­—çš„ç”¨æ³•è¯¦è§£"></a>ğŸ“˜ C++ ä¸­ <code>using</code> å…³é”®å­—çš„ç”¨æ³•è¯¦è§£</h1><p>åœ¨ C++ ä¸­ï¼Œ<code>using</code> å…³é”®å­—åŠŸèƒ½å¼ºå¤§ä¸”ç”¨é€”å¤šæ ·ï¼Œä» C++11 å¼€å§‹æ›´æ˜¯å¾—åˆ°äº†æ˜¾è‘—å¢å¼ºã€‚å®ƒä¸»è¦ç”¨äºç®€åŒ–ä»£ç ã€æé«˜å¯è¯»æ€§ã€è§£å†³ç»§æ‰¿ä¸­çš„å‡½æ•°éšè—é—®é¢˜ç­‰ã€‚ä»¥ä¸‹æ˜¯ <code>using</code> åœ¨ C++ ä¸­çš„<strong>ä¸»è¦ç”¨æ³•è¯¦è§£</strong>ï¼š</p><span id="more"></span><hr><h2 id="1ï¸âƒ£-å¼•å…¥å‘½åç©ºé—´æˆå‘˜ï¼ˆNamespace-Membersï¼‰"><a href="#1ï¸âƒ£-å¼•å…¥å‘½åç©ºé—´æˆå‘˜ï¼ˆNamespace-Membersï¼‰" class="headerlink" title="1ï¸âƒ£ å¼•å…¥å‘½åç©ºé—´æˆå‘˜ï¼ˆNamespace Membersï¼‰"></a>1ï¸âƒ£ å¼•å…¥å‘½åç©ºé—´æˆå‘˜ï¼ˆNamespace Membersï¼‰</h2><h3 id="1-1-å¼•å…¥å•ä¸ªæˆå‘˜"><a href="#1-1-å¼•å…¥å•ä¸ªæˆå‘˜" class="headerlink" title="1.1 å¼•å…¥å•ä¸ªæˆå‘˜"></a>1.1 å¼•å…¥å•ä¸ªæˆå‘˜</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> std::cout;</span><br><span class="line"><span class="keyword">using</span> std::endl;</span><br><span class="line"><span class="keyword">using</span> std::vector;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    vector&lt;<span class="type">int</span>&gt; v = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;;</span><br><span class="line">    cout &lt;&lt; v[<span class="number">0</span>] &lt;&lt; endl; <span class="comment">// ä¸ç”¨å†™ std::</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>âœ… æ¨èï¼šæ¯” <code>using namespace std;</code> æ›´å®‰å…¨ï¼Œé¿å…å‘½åæ±¡æŸ“ã€‚</p></blockquote><hr><h3 id="1-2-å¼•å…¥æ•´ä¸ªå‘½åç©ºé—´ï¼ˆè°¨æ…ä½¿ç”¨ï¼‰"><a href="#1-2-å¼•å…¥æ•´ä¸ªå‘½åç©ºé—´ï¼ˆè°¨æ…ä½¿ç”¨ï¼‰" class="headerlink" title="1.2 å¼•å…¥æ•´ä¸ªå‘½åç©ºé—´ï¼ˆè°¨æ…ä½¿ç”¨ï¼‰"></a>1.2 å¼•å…¥æ•´ä¸ªå‘½åç©ºé—´ï¼ˆè°¨æ…ä½¿ç”¨ï¼‰</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;Hello&quot;</span> &lt;&lt; endl;</span><br><span class="line">    vector&lt;<span class="type">int</span>&gt; v;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>âš ï¸ è­¦å‘Šï¼š<strong>ä¸è¦åœ¨å¤´æ–‡ä»¶æˆ–å¤§å‹é¡¹ç›®ä¸­ä½¿ç”¨</strong>ï¼Œå®¹æ˜“å¼•èµ·å‘½åå†²çªï¼</p></blockquote><hr><h2 id="2ï¸âƒ£-å®šä¹‰ç±»å‹åˆ«åï¼ˆType-Aliasï¼‰â€”-æ›¿ä»£-typedef"><a href="#2ï¸âƒ£-å®šä¹‰ç±»å‹åˆ«åï¼ˆType-Aliasï¼‰â€”-æ›¿ä»£-typedef" class="headerlink" title="2ï¸âƒ£ å®šä¹‰ç±»å‹åˆ«åï¼ˆType Aliasï¼‰â€” æ›¿ä»£ typedef"></a>2ï¸âƒ£ å®šä¹‰ç±»å‹åˆ«åï¼ˆType Aliasï¼‰â€” æ›¿ä»£ <code>typedef</code></h2><p>C++11 èµ·ï¼Œ<code>using</code> å¯ç”¨äºå®šä¹‰ç±»å‹åˆ«åï¼Œè¯­æ³•æ›´ç›´è§‚ï¼ŒåŠŸèƒ½æ›´å¼ºã€‚</p><h3 id="2-1-åŸºæœ¬ç±»å‹åˆ«å"><a href="#2-1-åŸºæœ¬ç±»å‹åˆ«å" class="headerlink" title="2.1 åŸºæœ¬ç±»å‹åˆ«å"></a>2.1 åŸºæœ¬ç±»å‹åˆ«å</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> IntPtr = <span class="type">int</span>*;</span><br><span class="line"><span class="keyword">using</span> String = std::string;</span><br><span class="line"><span class="keyword">using</span> Callback = <span class="built_in">void</span>(*)(<span class="type">int</span>);</span><br></pre></td></tr></table></figure><p>ç­‰ä»·äºï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="type">int</span>* IntPtr;</span><br><span class="line"><span class="keyword">typedef</span> std::string String;</span><br><span class="line"><span class="function"><span class="keyword">typedef</span> <span class="title">void</span><span class="params">(*Callback)</span><span class="params">(<span class="type">int</span>)</span></span>;</span><br></pre></td></tr></table></figure><blockquote><p>âœ… <code>using</code> è¯­æ³•æ›´ç¬¦åˆâ€œèµ‹å€¼â€è¯­ä¹‰ï¼š<code>åˆ«å = åŸç±»å‹</code></p></blockquote><hr><h3 id="2-2-æ¨¡æ¿åˆ«åï¼ˆtypedef-æ— æ³•åšåˆ°ï¼ï¼‰"><a href="#2-2-æ¨¡æ¿åˆ«åï¼ˆtypedef-æ— æ³•åšåˆ°ï¼ï¼‰" class="headerlink" title="2.2 æ¨¡æ¿åˆ«åï¼ˆtypedef æ— æ³•åšåˆ°ï¼ï¼‰"></a>2.2 æ¨¡æ¿åˆ«åï¼ˆ<code>typedef</code> æ— æ³•åšåˆ°ï¼ï¼‰</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">using</span> Vec = std::vector&lt;T&gt;;</span><br><span class="line"></span><br><span class="line">Vec&lt;<span class="type">int</span>&gt; v1;        <span class="comment">// std::vector&lt;int&gt;</span></span><br><span class="line">Vec&lt;std::string&gt; v2; <span class="comment">// std::vector&lt;std::string&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">using</span> MapString = std::map&lt;std::string, T&gt;;</span><br><span class="line"></span><br><span class="line">MapString&lt;<span class="type">int</span>&gt; m; <span class="comment">// std::map&lt;std::string, int&gt;</span></span><br></pre></td></tr></table></figure><blockquote><p>ğŸŒŸ è¿™æ˜¯ <code>using</code> æœ€å¼ºå¤§çš„ä¼˜åŠ¿ä¹‹ä¸€ â€”â€” <strong>æ”¯æŒæ¨¡æ¿åˆ«å</strong>ï¼</p></blockquote><hr><h2 id="3ï¸âƒ£-åœ¨æ´¾ç”Ÿç±»ä¸­å¼•å…¥åŸºç±»æˆå‘˜ï¼ˆè§£å†³å‡½æ•°éšè—ï¼‰"><a href="#3ï¸âƒ£-åœ¨æ´¾ç”Ÿç±»ä¸­å¼•å…¥åŸºç±»æˆå‘˜ï¼ˆè§£å†³å‡½æ•°éšè—ï¼‰" class="headerlink" title="3ï¸âƒ£ åœ¨æ´¾ç”Ÿç±»ä¸­å¼•å…¥åŸºç±»æˆå‘˜ï¼ˆè§£å†³å‡½æ•°éšè—ï¼‰"></a>3ï¸âƒ£ åœ¨æ´¾ç”Ÿç±»ä¸­å¼•å…¥åŸºç±»æˆå‘˜ï¼ˆè§£å†³å‡½æ•°éšè—ï¼‰</h2><p>å½“æ´¾ç”Ÿç±»å®šä¹‰äº†ä¸åŸºç±»åŒåçš„å‡½æ•°æ—¶ï¼ŒåŸºç±»æ‰€æœ‰é‡è½½ç‰ˆæœ¬éƒ½ä¼šè¢«<strong>éšè—</strong>ã€‚ä½¿ç”¨ <code>using</code> å¯æ˜¾å¼å¼•å…¥ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Base</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">(<span class="type">int</span> x)</span> </span>&#123; cout &lt;&lt; <span class="string">&quot;Base::func(int)&quot;</span> &lt;&lt; endl; &#125;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">(<span class="type">double</span> x)</span> </span>&#123; cout &lt;&lt; <span class="string">&quot;Base::func(double)&quot;</span> &lt;&lt; endl; &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Derived</span> : <span class="keyword">public</span> Base &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="keyword">using</span> Base::func; <span class="comment">// å¼•å…¥æ‰€æœ‰é‡è½½ç‰ˆæœ¬ âœ…</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">(<span class="type">char</span> x)</span> </span>&#123; cout &lt;&lt; <span class="string">&quot;Derived::func(char)&quot;</span> &lt;&lt; endl; &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Derived d;</span><br><span class="line">    d.<span class="built_in">func</span>(<span class="number">10</span>);    <span class="comment">// Base::func(int)</span></span><br><span class="line">    d.<span class="built_in">func</span>(<span class="number">3.14</span>);  <span class="comment">// Base::func(double)</span></span><br><span class="line">    d.<span class="built_in">func</span>(<span class="string">&#x27;a&#x27;</span>);   <span class="comment">// Derived::func(char)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>âŒ å¦‚æœæ²¡æœ‰ <code>using Base::func;</code>ï¼Œåˆ™ <code>d.func(10)</code> ä¼šæŠ¥é”™ â€”â€” å› ä¸ºåŸºç±»å‡½æ•°è¢«éšè—äº†ï¼</p></blockquote><hr><h2 id="4ï¸âƒ£-æ”¹å˜ç»§æ‰¿æˆå‘˜çš„è®¿é—®æƒé™ï¼ˆC-11ï¼‰"><a href="#4ï¸âƒ£-æ”¹å˜ç»§æ‰¿æˆå‘˜çš„è®¿é—®æƒé™ï¼ˆC-11ï¼‰" class="headerlink" title="4ï¸âƒ£ æ”¹å˜ç»§æ‰¿æˆå‘˜çš„è®¿é—®æƒé™ï¼ˆC++11ï¼‰"></a>4ï¸âƒ£ æ”¹å˜ç»§æ‰¿æˆå‘˜çš„è®¿é—®æƒé™ï¼ˆC++11ï¼‰</h2><p>åœ¨æ´¾ç”Ÿç±»ä¸­ï¼Œå¯ä»¥ç”¨ <code>using</code> æå‡æˆ–æ”¹å˜ä»åŸºç±»ç»§æ‰¿çš„æˆå‘˜çš„è®¿é—®çº§åˆ«ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Base</span> &#123;</span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">protectedFunc</span><span class="params">()</span> </span>&#123; cout &lt;&lt; <span class="string">&quot;Protected&quot;</span> &lt;&lt; endl; &#125;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">publicFunc</span><span class="params">()</span> </span>&#123; cout &lt;&lt; <span class="string">&quot;Public&quot;</span> &lt;&lt; endl; &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Derived</span> : <span class="keyword">private</span> Base &#123; <span class="comment">// ç§æœ‰ç»§æ‰¿</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="keyword">using</span> Base::publicFunc;     <span class="comment">// ä¿æŒ public</span></span><br><span class="line">    <span class="keyword">using</span> Base::protectedFunc;  <span class="comment">// æå‡ä¸º public âœ…</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Derived d;</span><br><span class="line">    d.<span class="built_in">publicFunc</span>();     <span class="comment">// âœ…</span></span><br><span class="line">    d.<span class="built_in">protectedFunc</span>();  <span class="comment">// âœ… ç°åœ¨å¯ä»¥è®¿é—®äº†ï¼</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>ğŸ“Œ æ³¨æ„ï¼šä¸èƒ½ç”¨ <code>using</code> é™ä½è®¿é—®æƒé™ï¼ˆæ¯”å¦‚ public â†’ privateï¼‰ï¼Œåªèƒ½æå‡æˆ–ä¿æŒã€‚</p></blockquote><hr><h2 id="5ï¸âƒ£-åœ¨æ¨¡æ¿ä¸­å¼•å…¥ä¾èµ–åŸºç±»æˆå‘˜ï¼ˆè§£å†³ç¼–è¯‘é”™è¯¯ï¼‰"><a href="#5ï¸âƒ£-åœ¨æ¨¡æ¿ä¸­å¼•å…¥ä¾èµ–åŸºç±»æˆå‘˜ï¼ˆè§£å†³ç¼–è¯‘é”™è¯¯ï¼‰" class="headerlink" title="5ï¸âƒ£ åœ¨æ¨¡æ¿ä¸­å¼•å…¥ä¾èµ–åŸºç±»æˆå‘˜ï¼ˆè§£å†³ç¼–è¯‘é”™è¯¯ï¼‰"></a>5ï¸âƒ£ åœ¨æ¨¡æ¿ä¸­å¼•å…¥ä¾èµ–åŸºç±»æˆå‘˜ï¼ˆè§£å†³ç¼–è¯‘é”™è¯¯ï¼‰</h2><p>åœ¨æ¨¡æ¿æ´¾ç”Ÿç±»ä¸­è®¿é—®åŸºç±»æˆå‘˜æ—¶ï¼Œæœ‰æ—¶ç¼–è¯‘å™¨æ— æ³•è¯†åˆ«ï¼Œéœ€ç”¨ <code>using</code> æˆ– <code>this-&gt;</code> æ˜¾å¼å£°æ˜ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Base</span> &#123;</span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line">    T value;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Derived</span> : <span class="keyword">public</span> Base&lt;T&gt; &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="keyword">using</span> Base&lt;T&gt;::value; <span class="comment">// âœ… æ˜¾å¼å¼•å…¥ä¾èµ–åŸºç±»æˆå‘˜</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">print</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        std::cout &lt;&lt; value &lt;&lt; std::endl; <span class="comment">// ç°åœ¨å¯ä»¥è®¿é—®</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><blockquote><p>ğŸ’¡ åŸå› ï¼šåœ¨æ¨¡æ¿ä¸­ï¼ŒåŸºç±»æ˜¯ä¾èµ–åç§°ï¼ˆdependent nameï¼‰ï¼Œç¼–è¯‘å™¨é»˜è®¤ä¸æŸ¥æ‰¾åŸºç±»ä½œç”¨åŸŸã€‚</p></blockquote><hr><h2 id="ğŸ“‹-æ€»ç»“ï¼šusing-çš„äº”å¤§ç”¨é€”"><a href="#ğŸ“‹-æ€»ç»“ï¼šusing-çš„äº”å¤§ç”¨é€”" class="headerlink" title="ğŸ“‹ æ€»ç»“ï¼šusing çš„äº”å¤§ç”¨é€”"></a>ğŸ“‹ æ€»ç»“ï¼š<code>using</code> çš„äº”å¤§ç”¨é€”</h2><table><thead><tr><th>ç”¨é€”</th><th>ç¤ºä¾‹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>1ï¸âƒ£ å¼•å…¥å‘½åç©ºé—´æˆå‘˜</td><td><code>using std::cout;</code></td><td>é¿å…å†™ <code>std::</code>ï¼Œæ›´å®‰å…¨</td></tr><tr><td>2ï¸âƒ£ å®šä¹‰ç±»å‹åˆ«å</td><td><code>using IntVec = std::vector&lt;int&gt;;</code></td><td>æ›¿ä»£ <code>typedef</code>ï¼Œæ”¯æŒæ¨¡æ¿</td></tr><tr><td>3ï¸âƒ£ å¼•å…¥åŸºç±»å‡½æ•°</td><td><code>using Base::func;</code></td><td>è§£å†³æ´¾ç”Ÿç±»å‡½æ•°éšè—é—®é¢˜</td></tr><tr><td>4ï¸âƒ£ æ”¹å˜è®¿é—®æƒé™</td><td><code>using Base::func;</code>ï¼ˆåœ¨ public ä¸‹ï¼‰</td><td>æå‡ç»§æ‰¿æˆå‘˜è®¿é—®çº§åˆ«</td></tr><tr><td>5ï¸âƒ£ æ¨¡æ¿ä¸­å¼•å…¥åŸºç±»æˆå‘˜</td><td><code>using Base&lt;T&gt;::member;</code></td><td>è§£å†³ä¾èµ–åç§°æŸ¥æ‰¾é—®é¢˜</td></tr></tbody></table><hr><h2 id="ğŸ’¡-æœ€ä½³å®è·µå»ºè®®"><a href="#ğŸ’¡-æœ€ä½³å®è·µå»ºè®®" class="headerlink" title="ğŸ’¡ æœ€ä½³å®è·µå»ºè®®"></a>ğŸ’¡ æœ€ä½³å®è·µå»ºè®®</h2><ul><li>âœ… ä¼˜å…ˆä½¿ç”¨ <code>using</code> å®šä¹‰ç±»å‹åˆ«åï¼ˆç‰¹åˆ«æ˜¯æ¨¡æ¿åˆ«åï¼‰</li><li>âœ… åœ¨ç±»ä¸­ä½¿ç”¨ <code>using</code> è§£å†³å‡½æ•°é‡è½½éšè—é—®é¢˜</li><li>âœ… åœ¨ <code>.cpp</code> æ–‡ä»¶ä¸­å±€éƒ¨ä½¿ç”¨ <code>using namespace xxx;</code>ï¼Œé¿å…åœ¨å¤´æ–‡ä»¶ä¸­ä½¿ç”¨</li><li>âœ… åœ¨æ¨¡æ¿æ´¾ç”Ÿç±»ä¸­ï¼Œå¯¹åŸºç±»æˆå‘˜ä½¿ç”¨ <code>using</code> æˆ– <code>this-&gt;</code> é¿å…ç¼–è¯‘é”™è¯¯</li><li>âŒ ä¸è¦ç”¨ <code>using</code> é™ä½è®¿é—®æƒé™ï¼ˆè¯­æ³•ä¸å…è®¸ï¼‰</li></ul><hr><h2 id="ğŸ§ -å°æµ‹éªŒ"><a href="#ğŸ§ -å°æµ‹éªŒ" class="headerlink" title="ğŸ§  å°æµ‹éªŒ"></a>ğŸ§  å°æµ‹éªŒ</h2><p>ä¸‹é¢ä»£ç èƒ½å¦ç¼–è¯‘é€šè¿‡ï¼Ÿ</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">A</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">foo</span><span class="params">(<span class="type">int</span>)</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">B</span> : <span class="keyword">public</span> A &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">foo</span><span class="params">(<span class="type">double</span>)</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    B b;</span><br><span class="line">    b.<span class="built_in">foo</span>(<span class="number">5</span>); <span class="comment">// â“ ä¼šè°ƒç”¨å“ªä¸ªï¼Ÿ</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>âŒ ç¼–è¯‘é”™è¯¯ï¼<code>A::foo(int)</code> è¢« <code>B::foo(double)</code> éšè—äº†ã€‚<br>âœ… è§£å†³æ–¹æ¡ˆï¼šåœ¨ <code>B</code> ä¸­æ·»åŠ  <code>using A::foo;</code></p></blockquote>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;ğŸ“˜-C-ä¸­-using-å…³é”®å­—çš„ç”¨æ³•è¯¦è§£&quot;&gt;&lt;a href=&quot;#ğŸ“˜-C-ä¸­-using-å…³é”®å­—çš„ç”¨æ³•è¯¦è§£&quot; class=&quot;headerlink&quot; title=&quot;ğŸ“˜ C++ ä¸­ using å…³é”®å­—çš„ç”¨æ³•è¯¦è§£&quot;&gt;&lt;/a&gt;ğŸ“˜ C++ ä¸­ &lt;code&gt;using&lt;/code&gt; å…³é”®å­—çš„ç”¨æ³•è¯¦è§£&lt;/h1&gt;&lt;p&gt;åœ¨ C++ ä¸­ï¼Œ&lt;code&gt;using&lt;/code&gt; å…³é”®å­—åŠŸèƒ½å¼ºå¤§ä¸”ç”¨é€”å¤šæ ·ï¼Œä» C++11 å¼€å§‹æ›´æ˜¯å¾—åˆ°äº†æ˜¾è‘—å¢å¼ºã€‚å®ƒä¸»è¦ç”¨äºç®€åŒ–ä»£ç ã€æé«˜å¯è¯»æ€§ã€è§£å†³ç»§æ‰¿ä¸­çš„å‡½æ•°éšè—é—®é¢˜ç­‰ã€‚ä»¥ä¸‹æ˜¯ &lt;code&gt;using&lt;/code&gt; åœ¨ C++ ä¸­çš„&lt;strong&gt;ä¸»è¦ç”¨æ³•è¯¦è§£&lt;/strong&gt;ï¼š&lt;/p&gt;</summary>
    
    
    
    
    <category term="c++" scheme="https://lyroom.github.io/tags/c/"/>
    
    <category term="æœèŠ±å¤•æ‹¾" scheme="https://lyroom.github.io/tags/%E6%9C%9D%E8%8A%B1%E5%A4%95%E6%8B%BE/"/>
    
  </entry>
  
  <entry>
    <title>C++æœèŠ±å¤•æ‹¾-ç¼ºçœ</title>
    <link href="https://lyroom.github.io/2025/09/19/C-%E6%9C%9D%E8%8A%B1%E5%A4%95%E6%8B%BE-%E7%BC%BA%E7%9C%81/"/>
    <id>https://lyroom.github.io/2025/09/19/C-%E6%9C%9D%E8%8A%B1%E5%A4%95%E6%8B%BE-%E7%BC%BA%E7%9C%81/</id>
    <published>2025-09-19T09:51:05.000Z</published>
    <updated>2025-09-19T09:51:05.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ğŸ“˜-c-æœèŠ±å¤•æ‹¾-ç¼ºçœ"><a href="#ğŸ“˜-c-æœèŠ±å¤•æ‹¾-ç¼ºçœ" class="headerlink" title="ğŸ“˜ c++æœèŠ±å¤•æ‹¾-ç¼ºçœ"></a>ğŸ“˜ c++æœèŠ±å¤•æ‹¾-ç¼ºçœ</h1><p> åœ¨C++ä¸­ï¼Œâ€œç¼ºçœâ€ï¼ˆDefaultï¼‰æ˜¯ä¸€ä¸ªæ ¸å¿ƒæ¦‚å¿µï¼Œä¸»è¦æŒ‡<strong>ç³»ç»Ÿã€ç¼–è¯‘å™¨æˆ–ç¨‹åºå‘˜é¢„å…ˆè®¾å®šçš„é»˜è®¤å€¼æˆ–è¡Œä¸º</strong>ï¼Œå½“ç”¨æˆ·æœªæ˜¾å¼æä¾›å…·ä½“å€¼æˆ–æŒ‡ä»¤æ—¶ï¼Œç¨‹åºå°†è‡ªåŠ¨é‡‡ç”¨è¿™äº›é¢„è®¾å€¼ã€‚ä»¥ä¸‹ä»å¤šä¸ªç»´åº¦ç³»ç»Ÿè§£æâ€œç¼ºçœâ€çš„å«ä¹‰ã€åº”ç”¨åœºæ™¯åŠæ³¨æ„äº‹é¡¹ï¼š<br> <span id="more"></span></p><h2 id="ğŸ”‘-1-ç¼ºçœçš„æ ¸å¿ƒå«ä¹‰"><a href="#ğŸ”‘-1-ç¼ºçœçš„æ ¸å¿ƒå«ä¹‰" class="headerlink" title="ğŸ”‘ 1. ç¼ºçœçš„æ ¸å¿ƒå«ä¹‰"></a><strong>ğŸ”‘ 1. ç¼ºçœçš„æ ¸å¿ƒå«ä¹‰</strong></h2><ul><li><strong>æœ¬è´¨</strong>ï¼šç¼ºçœæ˜¯â€œé¢„è®¾çš„é»˜è®¤çŠ¶æ€â€ï¼Œç”¨äºç®€åŒ–ä»£ç ç¼–å†™ã€å‡å°‘å†—ä½™å‚æ•°ä¼ é€’ï¼ŒåŒæ—¶ä¿æŒçµæ´»æ€§ï¼Œç”šè‡³ä»¥ä¸‹<strong>å¯ä»¥æŠŠâ€œç¼ºçœâ€ä¸¤ä¸ªå­—æ”¹æˆâ€œé»˜è®¤â€</strong>ä¹Ÿä¸å½±å“é€»è¾‘ã€‚</li><li><strong>å…³é”®ç‰¹æ€§</strong>ï¼š<ul><li><strong>å¯è¦†ç›–æ€§</strong>ï¼šç”¨æˆ·å¯æ˜¾å¼æä¾›å€¼è¦†ç›–ç¼ºçœè®¾ç½®ã€‚</li><li><strong>ä¸Šä¸‹æ–‡ä¾èµ–æ€§</strong>ï¼šç¼ºçœè¡Œä¸ºå¯èƒ½å› ç¼–è¯‘å™¨ã€æ ‡å‡†ç‰ˆæœ¬æˆ–ä»£ç ä¸Šä¸‹æ–‡è€Œå¼‚ã€‚</li><li><strong>éšå¼ç”Ÿæ•ˆ</strong>ï¼šåœ¨æœªæ˜ç¡®æŒ‡å®šæ—¶è‡ªåŠ¨æ¿€æ´»ï¼Œæ— éœ€é¢å¤–ä»£ç ã€‚</li></ul></li></ul><h2 id="ğŸ§©-2-ä¸»è¦åº”ç”¨åœºæ™¯"><a href="#ğŸ§©-2-ä¸»è¦åº”ç”¨åœºæ™¯" class="headerlink" title="ğŸ§© 2. ä¸»è¦åº”ç”¨åœºæ™¯"></a><strong>ğŸ§© 2. ä¸»è¦åº”ç”¨åœºæ™¯</strong></h2><h3 id="ï¼ˆ1ï¼‰å‡½æ•°é»˜è®¤å‚æ•°"><a href="#ï¼ˆ1ï¼‰å‡½æ•°é»˜è®¤å‚æ•°" class="headerlink" title="ï¼ˆ1ï¼‰å‡½æ•°é»˜è®¤å‚æ•°"></a><strong>ï¼ˆ1ï¼‰å‡½æ•°é»˜è®¤å‚æ•°</strong></h3><ul><li><strong>å®šä¹‰</strong>ï¼šåœ¨å‡½æ•°å£°æ˜æˆ–å®šä¹‰æ—¶ä¸ºå‚æ•°æŒ‡å®šé»˜è®¤å€¼ï¼Œè°ƒç”¨æ—¶å¯çœç•¥è¯¥å‚æ•°ã€‚</li><li><strong>è§„åˆ™</strong>ï¼š<ul><li>é»˜è®¤å‚æ•°éœ€ä»å³å‘å·¦è¿ç»­æŒ‡å®šï¼ˆå¦‚<code>void func(int a, int b=2, int c=3)</code>åˆæ³•ï¼Œä½†<code>void func(int a=1, int b, int c=3)</code>éæ³•ï¼‰ã€‚</li><li>é»˜è®¤å‚æ•°é€šå¸¸åœ¨å‡½æ•°å£°æ˜ä¸­æŒ‡å®šï¼ˆè€Œéå®šä¹‰ï¼‰ï¼Œä»¥é¿å…å¤šé‡å®šä¹‰å†²çªã€‚</li></ul></li><li><strong>ç¤ºä¾‹</strong>ï¼š<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">print</span><span class="params">(<span class="type">int</span> value = <span class="number">42</span>)</span> </span>&#123;  <span class="comment">// ç¼ºçœå‚æ•° value=42</span></span><br><span class="line">    std::cout &lt;&lt; value;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">print</span>();    <span class="comment">// è¾“å‡º 42ï¼ˆä½¿ç”¨ç¼ºçœå€¼ï¼‰</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="number">100</span>); <span class="comment">// è¾“å‡º 100ï¼ˆè¦†ç›–ç¼ºçœå€¼ï¼‰</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h3 id="ï¼ˆ2ï¼‰ç±»ä¸ç»“æ„ä½“çš„é»˜è®¤æˆå‘˜åˆå§‹åŒ–"><a href="#ï¼ˆ2ï¼‰ç±»ä¸ç»“æ„ä½“çš„é»˜è®¤æˆå‘˜åˆå§‹åŒ–" class="headerlink" title="ï¼ˆ2ï¼‰ç±»ä¸ç»“æ„ä½“çš„é»˜è®¤æˆå‘˜åˆå§‹åŒ–"></a><strong>ï¼ˆ2ï¼‰ç±»ä¸ç»“æ„ä½“çš„é»˜è®¤æˆå‘˜åˆå§‹åŒ–</strong></h3><ul><li><strong>C++11åŠä»¥ä¸Š</strong>ï¼šå¯åœ¨ç±»&#x2F;ç»“æ„ä½“ä¸­ç›´æ¥ä¸ºæˆå‘˜å˜é‡æŒ‡å®šé»˜è®¤å€¼ã€‚</li><li><strong>ä¼˜åŠ¿</strong>ï¼šé¿å…æœªåˆå§‹åŒ–å¯¼è‡´çš„æœªå®šä¹‰è¡Œä¸ºï¼Œç®€åŒ–æ„é€ å‡½æ•°ã€‚</li><li><strong>ç¤ºä¾‹</strong>ï¼š<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">Point</span> &#123;</span><br><span class="line">    <span class="type">int</span> x = <span class="number">0</span>;  <span class="comment">// ç¼ºçœå€¼ 0</span></span><br><span class="line">    <span class="type">int</span> y = <span class="number">0</span>;  <span class="comment">// ç¼ºçœå€¼ 0</span></span><br><span class="line">&#125;;</span><br><span class="line">Point p1;  <span class="comment">// p1.x=0, p1.y=0</span></span><br><span class="line">Point p2&#123;<span class="number">5</span>&#125;; <span class="comment">// p2.x=5, p2.y=0ï¼ˆè¦†ç›– x çš„ç¼ºçœå€¼ï¼‰</span></span><br></pre></td></tr></table></figure></li></ul><h3 id="ï¼ˆ3ï¼‰æ¨¡æ¿å‚æ•°çš„é»˜è®¤ç±»å‹"><a href="#ï¼ˆ3ï¼‰æ¨¡æ¿å‚æ•°çš„é»˜è®¤ç±»å‹" class="headerlink" title="ï¼ˆ3ï¼‰æ¨¡æ¿å‚æ•°çš„é»˜è®¤ç±»å‹"></a><strong>ï¼ˆ3ï¼‰æ¨¡æ¿å‚æ•°çš„é»˜è®¤ç±»å‹</strong></h3><ul><li><strong>å®šä¹‰</strong>ï¼šæ¨¡æ¿å‚æ•°å¯æŒ‡å®šé»˜è®¤ç±»å‹ï¼Œä½¿æ¨¡æ¿å®ä¾‹åŒ–æ—¶æ— éœ€æ˜¾å¼æä¾›ç±»å‹ã€‚</li><li><strong>è§„åˆ™</strong>ï¼šé»˜è®¤ç±»å‹éœ€ç¬¦åˆæ¨¡æ¿çš„è¯­ä¹‰è¦æ±‚ï¼ˆå¦‚å¯å¤åˆ¶ã€å¯æ¯”è¾ƒç­‰ï¼‰ã€‚</li><li><strong>ç¤ºä¾‹</strong>ï¼š<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T = <span class="type">int</span>&gt;  <span class="comment">// ç¼ºçœæ¨¡æ¿å‚æ•° T=int</span></span><br><span class="line"><span class="keyword">class</span> Box &#123;</span><br><span class="line">    T data;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">T <span class="title">getValue</span><span class="params">()</span> <span class="type">const</span> </span>&#123; <span class="keyword">return</span> data; &#125;</span><br><span class="line">&#125;;</span><br><span class="line">Box&lt;&gt; b1;    <span class="comment">// ç­‰ä»·äº Box&lt;int&gt; b1;</span></span><br><span class="line">Box&lt;<span class="type">double</span>&gt; b2; <span class="comment">// è¦†ç›–ç¼ºçœç±»å‹</span></span><br></pre></td></tr></table></figure></li></ul><h3 id="ï¼ˆ4ï¼‰æ„é€ å‡½æ•°ä¸ç‰¹æ®Šæˆå‘˜å‡½æ•°çš„é»˜è®¤ç”Ÿæˆ"><a href="#ï¼ˆ4ï¼‰æ„é€ å‡½æ•°ä¸ç‰¹æ®Šæˆå‘˜å‡½æ•°çš„é»˜è®¤ç”Ÿæˆ" class="headerlink" title="ï¼ˆ4ï¼‰æ„é€ å‡½æ•°ä¸ç‰¹æ®Šæˆå‘˜å‡½æ•°çš„é»˜è®¤ç”Ÿæˆ"></a><strong>ï¼ˆ4ï¼‰æ„é€ å‡½æ•°ä¸ç‰¹æ®Šæˆå‘˜å‡½æ•°çš„é»˜è®¤ç”Ÿæˆ</strong></h3><ul><li>**<code>= default</code>**ï¼šæ˜¾å¼è¦æ±‚ç¼–è¯‘å™¨ç”Ÿæˆé»˜è®¤çš„æ„é€ å‡½æ•°ã€ææ„å‡½æ•°ã€æ‹·è´æ„é€ å‡½æ•°ã€æ‹·è´èµ‹å€¼è¿ç®—ç¬¦ç­‰ã€‚</li><li><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šå½“ç±»éœ€è¦é»˜è®¤è¡Œä¸ºï¼ˆå¦‚æµ…æ‹·è´ï¼‰ä½†æœªæ˜¾å¼å®šä¹‰æ—¶ã€‚</li><li><strong>ç¤ºä¾‹</strong>ï¼š<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyClass</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">MyClass</span>() = <span class="keyword">default</span>;  <span class="comment">// ç¼ºçœæ„é€ å‡½æ•°</span></span><br><span class="line">    ~<span class="built_in">MyClass</span>() = <span class="keyword">default</span>; <span class="comment">// ç¼ºçœææ„å‡½æ•°</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></li></ul><h3 id="ï¼ˆ5ï¼‰æ ‡å‡†åº“å®¹å™¨çš„é»˜è®¤è¡Œä¸º"><a href="#ï¼ˆ5ï¼‰æ ‡å‡†åº“å®¹å™¨çš„é»˜è®¤è¡Œä¸º" class="headerlink" title="ï¼ˆ5ï¼‰æ ‡å‡†åº“å®¹å™¨çš„é»˜è®¤è¡Œä¸º"></a><strong>ï¼ˆ5ï¼‰æ ‡å‡†åº“å®¹å™¨çš„é»˜è®¤è¡Œä¸º</strong></h3><ul><li><strong>å®¹å™¨åˆå§‹åŒ–</strong>ï¼šå¦‚<code>std::vector&lt;int&gt; v;</code>é»˜è®¤æ„é€ ç©ºå‘é‡ï¼Œ<code>std::map&lt;int, std::string&gt; m;</code>é»˜è®¤æ„é€ ç©ºæ˜ å°„ã€‚</li><li><strong>ç®—æ³•é»˜è®¤å‚æ•°</strong>ï¼šå¦‚<code>std::sort(v.begin(), v.end())</code>é»˜è®¤ä½¿ç”¨<code>&lt;</code>æ¯”è¾ƒå…ƒç´ ã€‚</li></ul><h2 id="âš ï¸-3-ç¼ºçœå€¼çš„æ½œåœ¨é£é™©ä¸æ³¨æ„äº‹é¡¹"><a href="#âš ï¸-3-ç¼ºçœå€¼çš„æ½œåœ¨é£é™©ä¸æ³¨æ„äº‹é¡¹" class="headerlink" title="âš ï¸ 3. ç¼ºçœå€¼çš„æ½œåœ¨é£é™©ä¸æ³¨æ„äº‹é¡¹"></a><strong>âš ï¸ 3. ç¼ºçœå€¼çš„æ½œåœ¨é£é™©ä¸æ³¨æ„äº‹é¡¹</strong></h2><h3 id="ï¼ˆ1ï¼‰å‡½æ•°é‡è½½æ­§ä¹‰"><a href="#ï¼ˆ1ï¼‰å‡½æ•°é‡è½½æ­§ä¹‰" class="headerlink" title="ï¼ˆ1ï¼‰å‡½æ•°é‡è½½æ­§ä¹‰"></a><strong>ï¼ˆ1ï¼‰å‡½æ•°é‡è½½æ­§ä¹‰</strong></h3><ul><li>å½“å¤šä¸ªå‡½æ•°å…·æœ‰ç›¸åŒå‚æ•°æ•°é‡ä½†ä¸åŒé»˜è®¤å‚æ•°æ—¶ï¼Œè°ƒç”¨å¯èƒ½å› é»˜è®¤å‚æ•°å¯¼è‡´æ­§ä¹‰ã€‚</li><li><strong>ç¤ºä¾‹</strong>ï¼š<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">log</span><span class="params">(<span class="type">int</span> level)</span></span>;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">log</span><span class="params">(<span class="type">int</span> level, <span class="type">const</span> std::string &amp;message = <span class="string">&quot;&quot;</span>)</span></span>;</span><br><span class="line"><span class="built_in">log</span>(<span class="number">1</span>); <span class="comment">// ç¼–è¯‘é”™è¯¯ï¼šè°ƒç”¨å­˜åœ¨æ­§ä¹‰ï¼ˆåŒ¹é…ç¬¬ä¸€ä¸ªè¿˜æ˜¯ç¬¬äºŒä¸ªï¼Ÿï¼‰</span></span><br></pre></td></tr></table></figure></li></ul><h3 id="ï¼ˆ2ï¼‰é»˜è®¤å€¼å˜æ›´çš„å½±å“"><a href="#ï¼ˆ2ï¼‰é»˜è®¤å€¼å˜æ›´çš„å½±å“" class="headerlink" title="ï¼ˆ2ï¼‰é»˜è®¤å€¼å˜æ›´çš„å½±å“"></a><strong>ï¼ˆ2ï¼‰é»˜è®¤å€¼å˜æ›´çš„å½±å“</strong></h3><ul><li>ä¿®æ”¹å‡½æ•°çš„é»˜è®¤å‚æ•°å€¼å¯èƒ½ç ´åç°æœ‰ä»£ç ï¼ˆå¦‚ä»<code>func(int a=1)</code>æ”¹ä¸º<code>func(int a=2)</code>ï¼‰ã€‚</li><li>éœ€è°¨æ…å¯¹å¾…å…¬å…±APIçš„é»˜è®¤å‚æ•°ï¼Œé¿å…é¢‘ç¹å˜æ›´ã€‚</li></ul><h3 id="ï¼ˆ3ï¼‰æ€§èƒ½ä¸å¯è¯»æ€§æƒè¡¡"><a href="#ï¼ˆ3ï¼‰æ€§èƒ½ä¸å¯è¯»æ€§æƒè¡¡" class="headerlink" title="ï¼ˆ3ï¼‰æ€§èƒ½ä¸å¯è¯»æ€§æƒè¡¡"></a><strong>ï¼ˆ3ï¼‰æ€§èƒ½ä¸å¯è¯»æ€§æƒè¡¡</strong></h3><ul><li>è¿‡åº¦ä½¿ç”¨é»˜è®¤å‚æ•°å¯èƒ½éšè—å‡½æ•°ä¾èµ–å…³ç³»ï¼Œé™ä½ä»£ç å¯è¯»æ€§ã€‚</li><li>å¯¹äºå¤§å‹å¯¹è±¡ï¼Œé»˜è®¤å‚æ•°å¯èƒ½å¯¼è‡´ä¸å¿…è¦çš„æ‹·è´ï¼ˆéœ€ç»“åˆå¼•ç”¨ä¼ é€’ä¼˜åŒ–ï¼‰ã€‚<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">process</span><span class="params">(<span class="type">const</span> std::string&amp; name = <span class="string">&quot;default&quot;</span>)</span></span>; <span class="comment">// âœ… æ¨è</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">process</span><span class="params">(std::string name = <span class="string">&quot;default&quot;</span>)</span></span>;        <span class="comment">// âŒ å¯èƒ½æ‹·è´</span></span><br></pre></td></tr></table></figure></li></ul><h3 id="ï¼ˆ4ï¼‰ä¸constçš„äº¤äº’"><a href="#ï¼ˆ4ï¼‰ä¸constçš„äº¤äº’" class="headerlink" title="ï¼ˆ4ï¼‰ä¸constçš„äº¤äº’"></a><strong>ï¼ˆ4ï¼‰ä¸<code>const</code>çš„äº¤äº’</strong></h3><ul><li>é»˜è®¤å‚æ•°ä¸èƒ½æ˜¯å±€éƒ¨å˜é‡æˆ–éœ€è¦è®¡ç®—çš„è¡¨è¾¾å¼ï¼ˆéœ€ä¸ºç¼–è¯‘æ—¶å¸¸é‡æˆ–å¯æ±‚å€¼è¡¨è¾¾å¼ï¼‰ã€‚</li><li><strong>ç¤ºä¾‹</strong>ï¼š<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">calc</span><span class="params">()</span></span>;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">(<span class="type">int</span> x = calc())</span></span>; <span class="comment">// é”™è¯¯ï¼šé»˜è®¤å‚æ•°éœ€ä¸ºå¸¸é‡è¡¨è¾¾å¼</span></span><br></pre></td></tr></table></figure></li></ul><h3 id="5-é»˜è®¤å‚æ•°ä¸å¤´æ–‡ä»¶ç®¡ç†"><a href="#5-é»˜è®¤å‚æ•°ä¸å¤´æ–‡ä»¶ç®¡ç†" class="headerlink" title="(5) é»˜è®¤å‚æ•°ä¸å¤´æ–‡ä»¶ç®¡ç†"></a><strong>(5) é»˜è®¤å‚æ•°ä¸å¤´æ–‡ä»¶ç®¡ç†</strong></h3><ul><li>é»˜è®¤å‚æ•°å†™åœ¨<strong>å¤´æ–‡ä»¶å£°æ˜</strong>ä¸­ï¼Œè€Œé <code>.cpp</code> å®ç°æ–‡ä»¶</li><li>å¦åˆ™ä¸åŒç¼–è¯‘å•å…ƒçœ‹åˆ°ä¸åŒé»˜è®¤å€¼ â†’ é“¾æ¥é”™è¯¯æˆ–è¡Œä¸ºä¸ä¸€è‡´</li></ul><h2 id="ğŸ“ˆ-4-ç¼ºçœä¸C-æ ‡å‡†çš„æ¼”å˜"><a href="#ğŸ“ˆ-4-ç¼ºçœä¸C-æ ‡å‡†çš„æ¼”å˜" class="headerlink" title="ğŸ“ˆ 4. ç¼ºçœä¸C++æ ‡å‡†çš„æ¼”å˜"></a><strong>ğŸ“ˆ 4. ç¼ºçœä¸C++æ ‡å‡†çš„æ¼”å˜</strong></h2><ul><li><strong>C++98&#x2F;03</strong>ï¼šæ”¯æŒå‡½æ•°é»˜è®¤å‚æ•°ã€ç±»æˆå‘˜é»˜è®¤åˆå§‹åŒ–ï¼ˆéœ€åœ¨æ„é€ å‡½æ•°ä¸­å®Œæˆï¼‰ã€‚</li><li><strong>C++11</strong>ï¼šå¼•å…¥ç±»æˆå‘˜ç›´æ¥é»˜è®¤åˆå§‹åŒ–ï¼ˆå¦‚<code>int x=0;</code>ï¼‰ã€<code>= default</code>è¯­æ³•ã€æ¨¡æ¿é»˜è®¤å‚æ•°ã€‚</li><li><strong>C++17&#x2F;20</strong>ï¼šè¿›ä¸€æ­¥å¼ºåŒ–å¸¸é‡è¡¨è¾¾å¼ã€ç»“æ„åŒ–ç»‘å®šç­‰ç‰¹æ€§ï¼Œä½¿ç¼ºçœå€¼æ›´å®‰å…¨ã€çµæ´»ã€‚</li></ul><h2 id="ğŸ¯-5-å®é™…åº”ç”¨ä¸­çš„æœ€ä½³å®è·µ"><a href="#ğŸ¯-5-å®é™…åº”ç”¨ä¸­çš„æœ€ä½³å®è·µ" class="headerlink" title="ğŸ¯ 5. å®é™…åº”ç”¨ä¸­çš„æœ€ä½³å®è·µ"></a><strong>ğŸ¯ 5. å®é™…åº”ç”¨ä¸­çš„æœ€ä½³å®è·µ</strong></h2><ul><li><strong>æ˜ç¡®æ€§ä¼˜å…ˆ</strong>ï¼šåœ¨å…³é”®å‡½æ•°æˆ–å…¬å…±æ¥å£ä¸­ï¼Œé¿å…è¿‡åº¦ä¾èµ–é»˜è®¤å‚æ•°ï¼Œå¯é€šè¿‡é‡è½½æä¾›æ›´æ¸…æ™°çš„æ¥å£ã€‚</li><li><strong>æ–‡æ¡£åŒ–</strong>ï¼šå¯¹é»˜è®¤å‚æ•°çš„è¡Œä¸ºè¿›è¡Œæ–‡æ¡£è¯´æ˜ï¼Œå°¤å…¶æ˜¯éç›´è§‚çš„é€»è¾‘ã€‚</li><li><strong>æµ‹è¯•è¦†ç›–</strong>ï¼šç¡®ä¿é»˜è®¤å‚æ•°è·¯å¾„è¢«å•å…ƒæµ‹è¯•è¦†ç›–ï¼Œé¿å…å› ç¼ºçœå€¼å¯¼è‡´é€»è¾‘é”™è¯¯ã€‚</li><li><strong>é¿å…å…¨å±€çŠ¶æ€</strong>ï¼šé»˜è®¤å‚æ•°ä¸åº”ä¾èµ–å…¨å±€å˜é‡æˆ–å¯å˜çŠ¶æ€ï¼Œä»¥å…å¼•å‘éš¾ä»¥è¿½è¸ªçš„bugã€‚</li></ul><h2 id="âœ…-æ€»ç»“"><a href="#âœ…-æ€»ç»“" class="headerlink" title="âœ…  æ€»ç»“"></a><strong>âœ…  æ€»ç»“</strong></h2><p>C++ä¸­çš„â€œç¼ºçœâ€æ˜¯é¢„è®¾é»˜è®¤å€¼æˆ–è¡Œä¸ºçš„æœºåˆ¶ï¼Œå¹¿æ³›åº”ç”¨äºå‡½æ•°å‚æ•°ã€ç±»æˆå‘˜åˆå§‹åŒ–ã€æ¨¡æ¿å®ä¾‹åŒ–ç­‰åœºæ™¯ã€‚å®ƒé€šè¿‡å‡å°‘å†—ä½™ä»£ç æå‡å¼€å‘æ•ˆç‡ï¼Œä½†éœ€æ³¨æ„æ½œåœ¨é£é™©ï¼ˆå¦‚é‡è½½æ­§ä¹‰ã€æ€§èƒ½å½±å“ï¼‰ã€‚åˆç†ä½¿ç”¨ç¼ºçœæœºåˆ¶éœ€ç»“åˆå…·ä½“åœºæ™¯ï¼Œæƒè¡¡çµæ´»æ€§ã€å¯è¯»æ€§ä¸ç»´æŠ¤æˆæœ¬ï¼ŒåŒæ—¶éµå¾ªC++æ ‡å‡†çš„æ¼”è¿›æ–¹å‘ï¼Œç¡®ä¿ä»£ç çš„å¥å£®æ€§ä¸å¯æ‰©å±•æ€§ã€‚   </p>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;ğŸ“˜-c-æœèŠ±å¤•æ‹¾-ç¼ºçœ&quot;&gt;&lt;a href=&quot;#ğŸ“˜-c-æœèŠ±å¤•æ‹¾-ç¼ºçœ&quot; class=&quot;headerlink&quot; title=&quot;ğŸ“˜ c++æœèŠ±å¤•æ‹¾-ç¼ºçœ&quot;&gt;&lt;/a&gt;ğŸ“˜ c++æœèŠ±å¤•æ‹¾-ç¼ºçœ&lt;/h1&gt;&lt;p&gt; åœ¨C++ä¸­ï¼Œâ€œç¼ºçœâ€ï¼ˆDefaultï¼‰æ˜¯ä¸€ä¸ªæ ¸å¿ƒæ¦‚å¿µï¼Œä¸»è¦æŒ‡&lt;strong&gt;ç³»ç»Ÿã€ç¼–è¯‘å™¨æˆ–ç¨‹åºå‘˜é¢„å…ˆè®¾å®šçš„é»˜è®¤å€¼æˆ–è¡Œä¸º&lt;/strong&gt;ï¼Œå½“ç”¨æˆ·æœªæ˜¾å¼æä¾›å…·ä½“å€¼æˆ–æŒ‡ä»¤æ—¶ï¼Œç¨‹åºå°†è‡ªåŠ¨é‡‡ç”¨è¿™äº›é¢„è®¾å€¼ã€‚ä»¥ä¸‹ä»å¤šä¸ªç»´åº¦ç³»ç»Ÿè§£æâ€œç¼ºçœâ€çš„å«ä¹‰ã€åº”ç”¨åœºæ™¯åŠæ³¨æ„äº‹é¡¹ï¼š&lt;br&gt;</summary>
    
    
    
    
    <category term="c++" scheme="https://lyroom.github.io/tags/c/"/>
    
    <category term="æœèŠ±å¤•æ‹¾" scheme="https://lyroom.github.io/tags/%E6%9C%9D%E8%8A%B1%E5%A4%95%E6%8B%BE/"/>
    
  </entry>
  
  <entry>
    <title>C++æœèŠ±å¤•æ‹¾-å½¢å‚VSå®å‚</title>
    <link href="https://lyroom.github.io/2025/09/19/C-%E6%9C%9D%E8%8A%B1%E5%A4%95%E6%8B%BE-%E5%BD%A2%E5%8F%82VS%E5%AE%9E%E5%8F%82/"/>
    <id>https://lyroom.github.io/2025/09/19/C-%E6%9C%9D%E8%8A%B1%E5%A4%95%E6%8B%BE-%E5%BD%A2%E5%8F%82VS%E5%AE%9E%E5%8F%82/</id>
    <published>2025-09-19T09:33:13.000Z</published>
    <updated>2025-09-19T09:33:13.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ğŸ“˜-c-æœèŠ±å¤•æ‹¾-å½¢å‚VSå®å‚"><a href="#ğŸ“˜-c-æœèŠ±å¤•æ‹¾-å½¢å‚VSå®å‚" class="headerlink" title="ğŸ“˜ c++æœèŠ±å¤•æ‹¾-å½¢å‚VSå®å‚"></a>ğŸ“˜ c++æœèŠ±å¤•æ‹¾-å½¢å‚VSå®å‚</h1><p>åœ¨C++ä¸­ï¼Œ<strong>å½¢å‚ï¼ˆå½¢å¼å‚æ•°ï¼‰</strong>å’Œ<strong>å®å‚ï¼ˆå®é™…å‚æ•°ï¼‰</strong>æ˜¯å‡½æ•°è°ƒç”¨æœºåˆ¶çš„æ ¸å¿ƒæ¦‚å¿µï¼ŒäºŒè€…çš„åŒºåˆ«åŠä½¿ç”¨åœºæ™¯éœ€ç»“åˆC++çš„è¯­æ³•ç‰¹æ€§ï¼ˆå¦‚å€¼ä¼ é€’ã€å¼•ç”¨ä¼ é€’ã€æŒ‡é’ˆä¼ é€’ç­‰ï¼‰æ·±å…¥ç†è§£ã€‚ä»¥ä¸‹ä»å®šä¹‰ã€åŒºåˆ«ã€ä½¿ç”¨åœºæ™¯åŠç‰¹æ®Šæ¡ˆä¾‹å››æ–¹é¢ç³»ç»Ÿè§£æï¼š</p><span id="more"></span><h2 id="1-å®šä¹‰ä¸æœ¬è´¨"><a href="#1-å®šä¹‰ä¸æœ¬è´¨" class="headerlink" title="1. å®šä¹‰ä¸æœ¬è´¨"></a><strong>1. å®šä¹‰ä¸æœ¬è´¨</strong></h2><ul><li><p><strong>å½¢å‚ï¼ˆå½¢å¼å‚æ•°ï¼‰</strong><br>åœ¨å‡½æ•°<strong>å®šä¹‰</strong>æ—¶å£°æ˜çš„å‚æ•°ï¼Œæ˜¯å‡½æ•°æ¥å£çš„â€œå ä½ç¬¦â€ï¼Œç”¨äºæè¿°å‡½æ•°éœ€è¦æ¥æ”¶çš„æ•°æ®ç±»å‹ã€ç»“æ„åŠæ•°é‡ã€‚<br><em>ç¤ºä¾‹</em>ï¼š  </p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">printSum</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> </span>&#123;  <span class="comment">// aã€b æ˜¯å½¢å‚</span></span><br><span class="line">    std::cout &lt;&lt; a + b;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><strong>å®å‚ï¼ˆå®é™…å‚æ•°ï¼‰</strong><br>åœ¨å‡½æ•°<strong>è°ƒç”¨</strong>æ—¶å®é™…ä¼ é€’ç»™å‡½æ•°çš„å€¼æˆ–å˜é‡ï¼Œæ˜¯å…·ä½“çš„æ•°æ®ï¼Œç”¨äºæ›¿æ¢å½¢å‚æ‰§è¡Œå‡½æ•°é€»è¾‘ã€‚<br><em>ç¤ºä¾‹</em>ï¼š  </p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">printSum</span>(<span class="number">3</span>, <span class="number">5</span>);  <span class="comment">// 3 å’Œ 5 æ˜¯å®å‚</span></span><br><span class="line"><span class="type">int</span> x = <span class="number">10</span>, y = <span class="number">20</span>;</span><br><span class="line"><span class="built_in">printSum</span>(x, y);  <span class="comment">// x å’Œ y æ˜¯å®å‚</span></span><br></pre></td></tr></table></figure></li></ul><h2 id="2-æ ¸å¿ƒåŒºåˆ«"><a href="#2-æ ¸å¿ƒåŒºåˆ«" class="headerlink" title="2. æ ¸å¿ƒåŒºåˆ«"></a><strong>2. æ ¸å¿ƒåŒºåˆ«</strong></h2><table><thead><tr><th><strong>å¯¹æ¯”ç»´åº¦</strong></th><th><strong>å½¢å‚</strong></th><th><strong>å®å‚</strong></th></tr></thead><tbody><tr><td><strong>å­˜åœ¨é˜¶æ®µ</strong></td><td>å‡½æ•°å®šä¹‰æ—¶å£°æ˜ï¼ˆç¼–è¯‘æœŸç¡®å®šï¼‰</td><td>å‡½æ•°è°ƒç”¨æ—¶ä¼ é€’ï¼ˆè¿è¡Œæ—¶ç¡®å®šï¼‰</td></tr><tr><td><strong>ä½œç”¨èŒƒå›´</strong></td><td>ä»…åœ¨å‡½æ•°å†…éƒ¨æœ‰æ•ˆï¼ˆå±€éƒ¨ä½œç”¨åŸŸï¼‰</td><td>ç”±å¤–éƒ¨ä½œç”¨åŸŸå†³å®šï¼ˆå¦‚å…¨å±€å˜é‡ã€å±€éƒ¨å˜é‡ï¼‰</td></tr><tr><td><strong>ç”Ÿå‘½å‘¨æœŸ</strong></td><td>å‡½æ•°è°ƒç”¨æ—¶åˆ›å»ºï¼Œè°ƒç”¨ç»“æŸé”€æ¯</td><td>ç”±å¤–éƒ¨ä½œç”¨åŸŸå†³å®šï¼ˆå¦‚å…¨å±€å˜é‡æŒç»­å­˜åœ¨ï¼‰</td></tr><tr><td><strong>å†…å­˜å ç”¨</strong></td><td>ä¸å ç”¨å®é™…å†…å­˜ï¼ˆç¬¦å·å¼•ç”¨ï¼‰</td><td>å ç”¨å…·ä½“å†…å­˜ï¼ˆå­˜å‚¨å®é™…å€¼æˆ–åœ°å€ï¼‰</td></tr><tr><td><strong>ä¿®æ”¹å½±å“</strong></td><td>ä¿®æ”¹å½¢å‚ä»…å½±å“å‡½æ•°å†…éƒ¨é€»è¾‘</td><td>ä¿®æ”¹å®å‚å¯èƒ½å½±å“å¤–éƒ¨æ•°æ®ï¼ˆéœ€çœ‹ä¼ é€’æ–¹å¼ï¼‰</td></tr><tr><td><strong>ç±»å‹è¦æ±‚</strong></td><td>éœ€æ˜ç¡®æŒ‡å®šç±»å‹ï¼ˆå¦‚<code>int</code>ã€<code>float</code>ï¼‰</td><td>éœ€ä¸å½¢å‚ç±»å‹å…¼å®¹ï¼ˆæˆ–å¯éšå¼è½¬æ¢ï¼‰</td></tr></tbody></table><h2 id="3-ä¼ é€’æ–¹å¼ä¸å½±å“"><a href="#3-ä¼ é€’æ–¹å¼ä¸å½±å“" class="headerlink" title="3. ä¼ é€’æ–¹å¼ä¸å½±å“"></a><strong>3. ä¼ é€’æ–¹å¼ä¸å½±å“</strong></h2><p>C++ä¸­å‚æ•°ä¼ é€’çš„æœ¬è´¨æ˜¯<strong>æ•°æ®å¤åˆ¶</strong>æˆ–<strong>åœ°å€ä¼ é€’</strong>ï¼Œå…·ä½“åˆ†ä¸ºä»¥ä¸‹ä¸‰ç§æ–¹å¼ï¼š</p><h3 id="ï¼ˆ1ï¼‰å€¼ä¼ é€’ï¼ˆPass-by-Valueï¼‰"><a href="#ï¼ˆ1ï¼‰å€¼ä¼ é€’ï¼ˆPass-by-Valueï¼‰" class="headerlink" title="ï¼ˆ1ï¼‰å€¼ä¼ é€’ï¼ˆPass by Valueï¼‰"></a><strong>ï¼ˆ1ï¼‰å€¼ä¼ é€’ï¼ˆPass by Valueï¼‰</strong></h3><ul><li><strong>æœºåˆ¶</strong>ï¼šå®å‚å°†<strong>å€¼</strong>å¤åˆ¶ç»™å½¢å‚ï¼Œå‡½æ•°å†…ä¿®æ”¹å½¢å‚ä¸å½±å“å¤–éƒ¨å®å‚ã€‚  </li><li><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šä¸å¯å˜ç±»å‹ï¼ˆå¦‚<code>int</code>ã€<code>double</code>ã€<code>struct</code>ï¼‰æˆ–éœ€ä¿æŠ¤å®å‚ä¸è¢«ä¿®æ”¹çš„åœºæ™¯ã€‚  </li><li><em>ç¤ºä¾‹</em>ï¼š  <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">changeValue</span><span class="params">(<span class="type">int</span> num)</span> </span>&#123;</span><br><span class="line">    num = <span class="number">100</span>;  <span class="comment">// ä¿®æ”¹å½¢å‚ï¼Œä¸å½±å“å¤–éƒ¨å®å‚</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> x = <span class="number">5</span>;</span><br><span class="line">    <span class="built_in">changeValue</span>(x);</span><br><span class="line">    std::cout &lt;&lt; x;  <span class="comment">// è¾“å‡º 5ï¼ˆx æœªè¢«ä¿®æ”¹ï¼‰</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h3 id="ï¼ˆ2ï¼‰å¼•ç”¨ä¼ é€’ï¼ˆPass-by-Referenceï¼‰"><a href="#ï¼ˆ2ï¼‰å¼•ç”¨ä¼ é€’ï¼ˆPass-by-Referenceï¼‰" class="headerlink" title="ï¼ˆ2ï¼‰å¼•ç”¨ä¼ é€’ï¼ˆPass by Referenceï¼‰"></a><strong>ï¼ˆ2ï¼‰å¼•ç”¨ä¼ é€’ï¼ˆPass by Referenceï¼‰</strong></h3><ul><li><strong>æœºåˆ¶</strong>ï¼šå®å‚å°†<strong>å¼•ç”¨ï¼ˆåœ°å€ï¼‰</strong>ä¼ é€’ç»™å½¢å‚ï¼Œå‡½æ•°å†…ä¿®æ”¹å½¢å‚ä¼šç›´æ¥å½±å“å¤–éƒ¨å®å‚ã€‚  </li><li><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šå¯å˜ç±»å‹ï¼ˆå¦‚æ•°ç»„ã€ç±»å¯¹è±¡ï¼‰æˆ–éœ€åœ¨å‡½æ•°å†…ä¿®æ”¹å¤–éƒ¨æ•°æ®çš„åœºæ™¯ï¼ˆå¦‚äº¤æ¢ä¸¤ä¸ªå˜é‡ï¼‰ã€‚  </li><li><em>ç¤ºä¾‹</em>ï¼š  <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">swap</span><span class="params">(<span class="type">int</span> &amp;a, <span class="type">int</span> &amp;b)</span> </span>&#123;  <span class="comment">// aã€b æ˜¯å¼•ç”¨å½¢å‚</span></span><br><span class="line">    <span class="type">int</span> temp = a;</span><br><span class="line">    a = b;</span><br><span class="line">    b = temp;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> x = <span class="number">5</span>, y = <span class="number">10</span>;</span><br><span class="line">    <span class="built_in">swap</span>(x, y);  <span class="comment">// ä¼ é€’å˜é‡å¼•ç”¨</span></span><br><span class="line">    std::cout &lt;&lt; x &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; y;  <span class="comment">// è¾“å‡º 10 5ï¼ˆxã€y è¢«äº¤æ¢ï¼‰</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h3 id="ï¼ˆ3ï¼‰æŒ‡é’ˆä¼ é€’ï¼ˆPass-by-Pointerï¼‰"><a href="#ï¼ˆ3ï¼‰æŒ‡é’ˆä¼ é€’ï¼ˆPass-by-Pointerï¼‰" class="headerlink" title="ï¼ˆ3ï¼‰æŒ‡é’ˆä¼ é€’ï¼ˆPass by Pointerï¼‰"></a><strong>ï¼ˆ3ï¼‰æŒ‡é’ˆä¼ é€’ï¼ˆPass by Pointerï¼‰</strong></h3><ul><li><strong>æœºåˆ¶</strong>ï¼šå®å‚å°†<strong>æŒ‡é’ˆï¼ˆåœ°å€ï¼‰</strong>ä¼ é€’ç»™å½¢å‚ï¼Œå‡½æ•°å†…é€šè¿‡æŒ‡é’ˆä¿®æ”¹æŒ‡å‘çš„å†…å­˜ã€‚  </li><li><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šéœ€åŠ¨æ€å†…å­˜æ“ä½œã€æ•°ç»„éå†æˆ–å…¼å®¹Cè¯­è¨€æ¥å£çš„åœºæ™¯ã€‚  </li><li><em>ç¤ºä¾‹</em>ï¼š  <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">modifyArray</span><span class="params">(<span class="type">int</span> *arr, <span class="type">int</span> size)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; size; i++) &#123;</span><br><span class="line">        arr[i] *= <span class="number">2</span>;  <span class="comment">// é€šè¿‡æŒ‡é’ˆä¿®æ”¹å¤–éƒ¨æ•°ç»„</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> arr[<span class="number">3</span>] = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;;</span><br><span class="line">    <span class="built_in">modifyArray</span>(arr, <span class="number">3</span>);  <span class="comment">// ä¼ é€’æ•°ç»„é¦–åœ°å€</span></span><br><span class="line">    <span class="comment">// arr å˜ä¸º &#123;2, 4, 6&#125;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h2 id="4-ä½¿ç”¨åœºæ™¯ä¸æœ€ä½³å®è·µ"><a href="#4-ä½¿ç”¨åœºæ™¯ä¸æœ€ä½³å®è·µ" class="headerlink" title="4. ä½¿ç”¨åœºæ™¯ä¸æœ€ä½³å®è·µ"></a><strong>4. ä½¿ç”¨åœºæ™¯ä¸æœ€ä½³å®è·µ</strong></h2><ul><li><p><strong>ä½¿ç”¨å½¢å‚çš„åœºæ™¯</strong>  </p><ul><li>å®šä¹‰å‡½æ•°æ¥å£æ—¶ï¼Œæ˜ç¡®éœ€è¦å“ªäº›è¾“å…¥ï¼ˆå¦‚<code>double calculateArea(double length, double width)</code>ï¼‰ã€‚  </li><li>è®¾ç½®é»˜è®¤å€¼ï¼ˆC++11èµ·æ”¯æŒ<code>= default</code>æˆ–æ˜¾å¼é»˜è®¤å€¼ï¼‰ï¼Œä½¿å‚æ•°å¯çœç•¥ï¼ˆå¦‚<code>void greet(const std::string &amp;name = &quot;æ¸¸å®¢&quot;)</code>ï¼‰ã€‚  </li><li>é™åˆ¶å‚æ•°ç±»å‹ï¼ˆé€šè¿‡ç±»å‹æç¤ºï¼‰æˆ–ä½¿ç”¨<code>const</code>ä¿æŠ¤å½¢å‚ä¸è¢«ä¿®æ”¹ï¼ˆå¦‚<code>void process(const std::vector&lt;int&gt; &amp;data)</code>ï¼‰ã€‚  </li><li>å®ç°å‡½æ•°é‡è½½ï¼ˆé€šè¿‡å½¢å‚ç±»å‹ã€æ•°é‡æˆ–é¡ºåºåŒºåˆ†åŒåå‡½æ•°ï¼‰ã€‚</li></ul></li><li><p><strong>ä½¿ç”¨å®å‚çš„åœºæ™¯</strong>  </p><ul><li>è°ƒç”¨å‡½æ•°æ—¶ï¼Œä¼ é€’å…·ä½“å€¼ï¼ˆå¦‚<code>calculateArea(5.0, 3.0)</code>ï¼‰ã€‚  </li><li>ä¼ é€’å˜é‡ã€è¡¨è¾¾å¼æˆ–å‡½æ•°ç»“æœï¼ˆå¦‚<code>calculateArea(a+b, c*2)</code>ï¼‰ã€‚  </li><li>ä¼ é€’å¯å˜å¯¹è±¡ï¼ˆå¦‚æ•°ç»„ã€ç±»å¯¹è±¡ï¼‰ä»¥ä¿®æ”¹å¤–éƒ¨æ•°æ®ï¼ˆéœ€ä½¿ç”¨å¼•ç”¨æˆ–æŒ‡é’ˆï¼‰ã€‚  </li><li>ä¼ é€’åŠ¨æ€å†…å­˜åœ°å€ï¼ˆå¦‚<code>int *ptr = new int[10]; modifyArray(ptr, 10)</code>ï¼‰ã€‚</li></ul></li></ul><h2 id="5-ç‰¹æ®Šæ¡ˆä¾‹ä¸æ³¨æ„äº‹é¡¹"><a href="#5-ç‰¹æ®Šæ¡ˆä¾‹ä¸æ³¨æ„äº‹é¡¹" class="headerlink" title="5. ç‰¹æ®Šæ¡ˆä¾‹ä¸æ³¨æ„äº‹é¡¹"></a><strong>5. ç‰¹æ®Šæ¡ˆä¾‹ä¸æ³¨æ„äº‹é¡¹</strong></h2><ul><li><p><strong>å½¢å‚ä¸å®å‚çš„â€œé”™ä½â€</strong>  </p><ul><li><strong>æ•°é‡ä¸åŒ¹é…</strong>ï¼šè°ƒç”¨æ—¶å®å‚æ•°é‡å°‘äºå½¢å‚ä¼šæŠ¥é”™ï¼ˆå¦‚<code>error: too few arguments to function</code>ï¼‰ï¼›è¿‡å¤šåˆ™å¯èƒ½è¢«å¿½ç•¥æˆ–éœ€ä½¿ç”¨å¯å˜å‚æ•°ï¼ˆå¦‚<code>...</code>ï¼‰ã€‚  </li><li><strong>ç±»å‹ä¸åŒ¹é…</strong>ï¼šå¦‚å½¢å‚è¦æ±‚<code>int</code>ï¼Œä½†å®å‚ä¼ é€’<code>float</code>ï¼Œå¯èƒ½è§¦å‘éšå¼è½¬æ¢æˆ–ç¼–è¯‘é”™è¯¯ï¼ˆéœ€çœ‹å…·ä½“ç±»å‹å…¼å®¹æ€§ï¼‰ã€‚  </li><li><strong>å¼•ç”¨ä¸æŒ‡é’ˆçš„é™·é˜±</strong>ï¼šè‹¥å½¢å‚ä¸ºå¼•ç”¨ç±»å‹ï¼ˆå¦‚<code>int &amp;a</code>ï¼‰ï¼Œå®å‚å¿…é¡»æ˜¯å¯ä¿®æ”¹çš„å·¦å€¼ï¼ˆå¦‚å˜é‡ï¼‰ï¼Œä¸èƒ½æ˜¯å¸¸é‡æˆ–ä¸´æ—¶å€¼ï¼ˆå¦‚<code>changeValue(10)</code>ä¼šæŠ¥é”™ï¼‰ã€‚</li></ul></li><li><p><strong>constå½¢å‚ä¸å®å‚</strong>  </p><ul><li>ä½¿ç”¨<code>const</code>ä¿®é¥°å½¢å‚å¯é˜²æ­¢å‡½æ•°å†…æ„å¤–ä¿®æ”¹å‚æ•°ï¼ˆå¦‚<code>void print(const std::string &amp;str)</code>ï¼‰ã€‚  </li><li>å®å‚ä¸º<code>const</code>å˜é‡æ—¶ï¼Œéœ€ç¡®ä¿å½¢å‚ä¹Ÿä¸º<code>const</code>ï¼ˆå¦‚<code>const int x = 5; print(x)</code>éœ€å½¢å‚ä¸º<code>const int</code>ï¼‰ã€‚</li></ul></li><li><p><strong>å‡½æ•°é‡è½½ä¸å½¢å‚</strong><br>C++æ”¯æŒé€šè¿‡å½¢å‚ç±»å‹ã€æ•°é‡æˆ–é¡ºåºå®ç°å‡½æ•°é‡è½½ï¼ˆå¦‚<code>void log(int); void log(double);</code>ï¼‰ï¼Œä½†éœ€æ³¨æ„é‡è½½è§£æè§„åˆ™ï¼ˆå¦‚ç±»å‹æå‡ã€å¼•ç”¨æŠ˜å ï¼‰ã€‚</p></li></ul><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a><strong>æ€»ç»“</strong></h2><p>å½¢å‚æ˜¯å‡½æ•°æ¥å£çš„â€œè®¾è®¡å›¾â€ï¼Œå®šä¹‰äº†å‡½æ•°éœ€è¦çš„æ•°æ®ç»“æ„ï¼›å®å‚æ˜¯â€œå®é™…ææ–™â€ï¼Œåœ¨è°ƒç”¨æ—¶å¡«å……å½¢å‚çš„å ä½ç¬¦ã€‚äºŒè€…é€šè¿‡<strong>ä¼ é€’æ–¹å¼</strong>ï¼ˆå€¼ã€å¼•ç”¨ã€æŒ‡é’ˆï¼‰å…³è”ï¼Œå½±å“æ•°æ®çš„å¤åˆ¶ã€ä¿®æ”¹åŠå†…å­˜å ç”¨ã€‚åœ¨C++ä¸­ï¼Œåˆç†é€‰æ‹©ä¼ é€’æ–¹å¼ï¼ˆå¦‚å¯¹å¤§å‹å¯¹è±¡ä½¿ç”¨å¼•ç”¨ä¼ é€’é¿å…æ‹·è´ï¼‰ã€åˆ©ç”¨<code>const</code>ä¿æŠ¤æ•°æ®ã€é€šè¿‡å‡½æ•°é‡è½½è®¾è®¡çµæ´»æ¥å£ï¼Œæ˜¯é«˜æ•ˆç¼–ç¨‹çš„å…³é”®ã€‚</p>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;ğŸ“˜-c-æœèŠ±å¤•æ‹¾-å½¢å‚VSå®å‚&quot;&gt;&lt;a href=&quot;#ğŸ“˜-c-æœèŠ±å¤•æ‹¾-å½¢å‚VSå®å‚&quot; class=&quot;headerlink&quot; title=&quot;ğŸ“˜ c++æœèŠ±å¤•æ‹¾-å½¢å‚VSå®å‚&quot;&gt;&lt;/a&gt;ğŸ“˜ c++æœèŠ±å¤•æ‹¾-å½¢å‚VSå®å‚&lt;/h1&gt;&lt;p&gt;åœ¨C++ä¸­ï¼Œ&lt;strong&gt;å½¢å‚ï¼ˆå½¢å¼å‚æ•°ï¼‰&lt;/strong&gt;å’Œ&lt;strong&gt;å®å‚ï¼ˆå®é™…å‚æ•°ï¼‰&lt;/strong&gt;æ˜¯å‡½æ•°è°ƒç”¨æœºåˆ¶çš„æ ¸å¿ƒæ¦‚å¿µï¼ŒäºŒè€…çš„åŒºåˆ«åŠä½¿ç”¨åœºæ™¯éœ€ç»“åˆC++çš„è¯­æ³•ç‰¹æ€§ï¼ˆå¦‚å€¼ä¼ é€’ã€å¼•ç”¨ä¼ é€’ã€æŒ‡é’ˆä¼ é€’ç­‰ï¼‰æ·±å…¥ç†è§£ã€‚ä»¥ä¸‹ä»å®šä¹‰ã€åŒºåˆ«ã€ä½¿ç”¨åœºæ™¯åŠç‰¹æ®Šæ¡ˆä¾‹å››æ–¹é¢ç³»ç»Ÿè§£æï¼š&lt;/p&gt;</summary>
    
    
    
    
    <category term="c++" scheme="https://lyroom.github.io/tags/c/"/>
    
    <category term="æœèŠ±å¤•æ‹¾" scheme="https://lyroom.github.io/tags/%E6%9C%9D%E8%8A%B1%E5%A4%95%E6%8B%BE/"/>
    
  </entry>
  
  <entry>
    <title>æ™ºèƒ½æŒ‡é’ˆ</title>
    <link href="https://lyroom.github.io/2025/09/19/%E6%99%BA%E8%83%BD%E6%8C%87%E9%92%88/"/>
    <id>https://lyroom.github.io/2025/09/19/%E6%99%BA%E8%83%BD%E6%8C%87%E9%92%88/</id>
    <published>2025-09-19T04:53:17.000Z</published>
    <updated>2025-09-19T04:53:17.000Z</updated>
    
    <content type="html"><![CDATA[<p>å“ˆå“ˆå“ˆ</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;å“ˆå“ˆå“ˆ&lt;/p&gt;
</summary>
      
    
    
    
    
    <category term="æ™ºèƒ½æŒ‡é’ˆ" scheme="https://lyroom.github.io/tags/%E6%99%BA%E8%83%BD%E6%8C%87%E9%92%88/"/>
    
    <category term="c++" scheme="https://lyroom.github.io/tags/c/"/>
    
    <category term="æœèŠ±å¤•æ‹¾" scheme="https://lyroom.github.io/tags/%E6%9C%9D%E8%8A%B1%E5%A4%95%E6%8B%BE/"/>
    
    <category term="æŒ‡é’ˆ" scheme="https://lyroom.github.io/tags/%E6%8C%87%E9%92%88/"/>
    
  </entry>
  
  <entry>
    <title>C++ ç¨‹åºè¿è¡Œæ—¶å†…å­˜å¸ƒå±€</title>
    <link href="https://lyroom.github.io/2025/09/19/C-%E7%A8%8B%E5%BA%8F%E8%BF%90%E8%A1%8C%E6%97%B6%E5%86%85%E5%AD%98%E5%B8%83%E5%B1%80/"/>
    <id>https://lyroom.github.io/2025/09/19/C-%E7%A8%8B%E5%BA%8F%E8%BF%90%E8%A1%8C%E6%97%B6%E5%86%85%E5%AD%98%E5%B8%83%E5%B1%80/</id>
    <published>2025-09-19T04:26:31.000Z</published>
    <updated>2025-09-19T04:26:31.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ğŸ§ -C-ç¨‹åºè¿è¡Œæ—¶å†…å­˜å¸ƒå±€"><a href="#ğŸ§ -C-ç¨‹åºè¿è¡Œæ—¶å†…å­˜å¸ƒå±€" class="headerlink" title="ğŸ§  C++ ç¨‹åºè¿è¡Œæ—¶å†…å­˜å¸ƒå±€"></a>ğŸ§  C++ ç¨‹åºè¿è¡Œæ—¶å†…å­˜å¸ƒå±€</h1><blockquote><p>ğŸ“Œ é€‚ç”¨äºç†è§£å…¨å±€å˜é‡ã€æ ˆã€å †ã€é™æ€åŒºã€ä»£ç æ®µçš„å­˜å‚¨ä½ç½®ä¸ç”Ÿå‘½å‘¨æœŸã€‚</p></blockquote><p>æœ¬æ–‡æˆ‘ä»¬ä¸»è¦ä»‹ç» C++ ç¨‹åºè¿è¡Œæ—¶å†…å­˜å¸ƒå±€ï¼Œä»¥åŠå˜é‡å­˜å‚¨ä½ç½®ï¼ŒåŒ…æ‹¬æ ˆã€å †ã€é™æ€å­˜å‚¨åŒºç­‰ï¼Œå¹¶é™„ä¸Š ASCII å›¾è§£ã€‚</p><span id="more"></span><hr><h2 id="ğŸ–¼ï¸-å†…å­˜å¸ƒå±€ç¤ºæ„å›¾ï¼ˆASCII-å›¾ï¼‰"><a href="#ğŸ–¼ï¸-å†…å­˜å¸ƒå±€ç¤ºæ„å›¾ï¼ˆASCII-å›¾ï¼‰" class="headerlink" title="ğŸ–¼ï¸ å†…å­˜å¸ƒå±€ç¤ºæ„å›¾ï¼ˆASCII å›¾ï¼‰"></a>ğŸ–¼ï¸ å†…å­˜å¸ƒå±€ç¤ºæ„å›¾ï¼ˆASCII å›¾ï¼‰</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">é«˜åœ°å€</span><br><span class="line">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â† æ ˆé¡¶ï¼ˆå‘ä½åœ°å€å¢é•¿ï¼‰</span><br><span class="line">â”‚         Stack (æ ˆ)           â”‚</span><br><span class="line">â”‚  - å±€éƒ¨å˜é‡                  â”‚</span><br><span class="line">â”‚  - å‡½æ•°å‚æ•°                  â”‚</span><br><span class="line">â”‚  - è¿”å›åœ°å€                  â”‚</span><br><span class="line">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><br><span class="line">â”‚                              â”‚  â† æœªä½¿ç”¨å†…å­˜ï¼ˆç©ºé—²åŒºï¼‰</span><br><span class="line">â”‚        ï¼ˆFree Memoryï¼‰       â”‚</span><br><span class="line">â”‚                              â”‚</span><br><span class="line">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><br><span class="line">â”‚         Heap (å †)            â”‚  â† å †åº•ï¼ˆå‘é«˜åœ°å€å¢é•¿ï¼‰</span><br><span class="line">â”‚  - new / malloc åˆ†é…çš„å¯¹è±¡    â”‚</span><br><span class="line">â”‚  - åŠ¨æ€æ•°æ®ç»“æ„              â”‚</span><br><span class="line">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><br><span class="line">â”‚   .bss æ®µ                    â”‚</span><br><span class="line">â”‚  - æœªåˆå§‹åŒ–çš„å…¨å±€/é™æ€å˜é‡     â”‚ â†’ int global_uninit;</span><br><span class="line">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><br><span class="line">â”‚   .data æ®µ                   â”‚</span><br><span class="line">â”‚  - å·²åˆå§‹åŒ–çš„å…¨å±€/é™æ€å˜é‡     â”‚ â†’ int global_init = 100;</span><br><span class="line">â”‚  - static å˜é‡               â”‚</span><br><span class="line">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><br><span class="line">â”‚   .text æ®µï¼ˆä»£ç æ®µï¼‰          â”‚</span><br><span class="line">â”‚  - å‡½æ•°æœºå™¨æŒ‡ä»¤               â”‚ â†’ main(), func() ç­‰</span><br><span class="line">â”‚  - åªè¯»                      â”‚</span><br><span class="line">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â† ä½åœ°å€</span><br></pre></td></tr></table></figure><hr><h2 id="ğŸ”-å„å†…å­˜åŒºåŸŸè¯¦è§£"><a href="#ğŸ”-å„å†…å­˜åŒºåŸŸè¯¦è§£" class="headerlink" title="ğŸ” å„å†…å­˜åŒºåŸŸè¯¦è§£"></a>ğŸ” å„å†…å­˜åŒºåŸŸè¯¦è§£</h2><h3 id="1ï¸âƒ£-æ ˆï¼ˆStackï¼‰"><a href="#1ï¸âƒ£-æ ˆï¼ˆStackï¼‰" class="headerlink" title="1ï¸âƒ£ æ ˆï¼ˆStackï¼‰"></a>1ï¸âƒ£ æ ˆï¼ˆStackï¼‰</h3><ul><li><strong>ä½ç½®</strong>ï¼šé«˜åœ°å€ â†’ å‘ä½åœ°å€å¢é•¿</li><li><strong>å†…å®¹</strong>ï¼š<ul><li>å±€éƒ¨å˜é‡</li><li>å‡½æ•°å‚æ•°</li><li>è¿”å›åœ°å€</li></ul></li><li><strong>ç®¡ç†æ–¹å¼</strong>ï¼šç¼–è¯‘å™¨è‡ªåŠ¨åˆ†é…&#x2F;é‡Šæ”¾</li><li><strong>ç”Ÿå‘½å‘¨æœŸ</strong>ï¼šå‡½æ•°ä½œç”¨åŸŸï¼Œç¦»å¼€å‡½æ•°åè‡ªåŠ¨é‡Šæ”¾å†…å­˜</li><li><strong>ç‰¹ç‚¹</strong>ï¼šå¿«ã€å®‰å…¨ã€å®¹é‡å°ï¼ˆé€šå¸¸å‡  MBï¼‰</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">(<span class="type">int</span> a)</span> </span>&#123; <span class="comment">//å‡½æ•°å‚æ•° â† å­˜åœ¨æ ˆä¸Š</span></span><br><span class="line">    <span class="type">int</span> x = <span class="number">10</span>; <span class="comment">// å±€éƒ¨å˜é‡ â† å­˜åœ¨æ ˆä¸Š</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>ğŸ“Œ æˆ‘ä»¬å¸¸è¯´æ ˆå†…å­˜æ˜¯<strong>å‡½æ•°è°ƒç”¨æ ˆ</strong>ï¼Œå‡½æ•°è°ƒç”¨æ—¶ï¼Œ<strong>å‚æ•°ã€å±€éƒ¨å˜é‡</strong>ä¼šå‹å…¥æ ˆä¸­ï¼Œå‡½æ•°è¿”å›æ—¶ï¼Œ<strong>å‚æ•°ã€å±€éƒ¨å˜é‡</strong>ä¼šä»æ ˆä¸­å¼¹å‡ºã€‚</p></blockquote><hr><h3 id="2ï¸âƒ£-å †ï¼ˆHeapï¼‰"><a href="#2ï¸âƒ£-å †ï¼ˆHeapï¼‰" class="headerlink" title="2ï¸âƒ£ å †ï¼ˆHeapï¼‰"></a>2ï¸âƒ£ å †ï¼ˆHeapï¼‰</h3><ul><li><strong>ä½ç½®</strong>ï¼šé™æ€åŒºä¹‹ä¸Šï¼Œæ ˆä¹‹ä¸‹ â†’ å‘é«˜åœ°å€å¢é•¿</li><li><strong>å†…å®¹</strong>ï¼š<ul><li><code>new</code> &#x2F; <code>malloc</code> åˆ†é…çš„å¯¹è±¡</li><li>åŠ¨æ€æ•°ç»„ã€å¯¹è±¡ã€å®¹å™¨åº•å±‚å­˜å‚¨ç­‰</li></ul></li><li><strong>ç®¡ç†æ–¹å¼</strong>ï¼šæ‰‹åŠ¨ <code>delete</code> &#x2F; <code>free</code> æˆ–ä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆï¼ˆæ¨èï¼‰</li><li><strong>ç”Ÿå‘½å‘¨æœŸ</strong>ï¼šç”±ç¨‹åºå‘˜æ§åˆ¶</li><li><strong>ç‰¹ç‚¹</strong>ï¼šæ…¢ã€çµæ´»ã€å®¹é‡å¤§</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span>* p = <span class="keyword">new</span> <span class="built_in">int</span>(<span class="number">42</span>); <span class="comment">// â† pæŒ‡å‘å¯¹è±¡åœ¨å †ï¼Œp æŒ‡é’ˆå˜é‡åœ¨æ ˆ</span></span><br></pre></td></tr></table></figure><hr><h3 id="3ï¸âƒ£-é™æ€å­˜å‚¨åŒºï¼ˆData-Segmentï¼‰"><a href="#3ï¸âƒ£-é™æ€å­˜å‚¨åŒºï¼ˆData-Segmentï¼‰" class="headerlink" title="3ï¸âƒ£ é™æ€å­˜å‚¨åŒºï¼ˆData Segmentï¼‰"></a>3ï¸âƒ£ é™æ€å­˜å‚¨åŒºï¼ˆData Segmentï¼‰</h3><h4 id="â¤-data-æ®µ"><a href="#â¤-data-æ®µ" class="headerlink" title="â¤ .data æ®µ"></a>â¤ <code>.data</code> æ®µ</h4><ul><li>å­˜æ”¾<strong>å·²åˆå§‹åŒ–</strong>çš„å…¨å±€å˜é‡å’Œé™æ€å˜é‡</li><li>ç¤ºä¾‹ï¼š</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> global_var = <span class="number">999</span>;      <span class="comment">// â† .data</span></span><br><span class="line"><span class="type">static</span> <span class="type">int</span> s = <span class="number">100</span>;        <span class="comment">// â† .data</span></span><br></pre></td></tr></table></figure><h4 id="â¤-bss-æ®µ"><a href="#â¤-bss-æ®µ" class="headerlink" title="â¤ .bss æ®µ"></a>â¤ <code>.bss</code> æ®µ</h4><ul><li>å­˜æ”¾<strong>æœªåˆå§‹åŒ–æˆ–åˆå§‹åŒ–ä¸º 0</strong> çš„å…¨å±€&#x2F;é™æ€å˜é‡</li><li>ç¤ºä¾‹ï¼š</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> uninit_global;         <span class="comment">// â† .bssï¼ˆé»˜è®¤=0ï¼‰</span></span><br><span class="line"><span class="type">static</span> <span class="type">int</span> zero_static = <span class="number">0</span>; <span class="comment">// â† é€šå¸¸ä¼˜åŒ–è¿› .bss</span></span><br></pre></td></tr></table></figure><blockquote><p>ğŸ’¡ <strong>ä¸ºä»€ä¹ˆåˆ† <code>.data</code> å’Œ <code>.bss</code>ï¼Ÿ</strong><br><code>.data</code> éœ€ä¿å­˜åˆå§‹å€¼ â†’ å ç”¨å¯æ‰§è¡Œæ–‡ä»¶ç©ºé—´ï¼›<br><code>.bss</code> åªéœ€è®°å½•å¤§å° â†’ åŠ è½½æ—¶æ¸…é›¶ â†’ èŠ‚çœç£ç›˜ç©ºé—´ã€‚</p></blockquote><hr><h3 id="4ï¸âƒ£-ä»£ç æ®µï¼ˆ-textï¼‰"><a href="#4ï¸âƒ£-ä»£ç æ®µï¼ˆ-textï¼‰" class="headerlink" title="4ï¸âƒ£ ä»£ç æ®µï¼ˆ.textï¼‰"></a>4ï¸âƒ£ ä»£ç æ®µï¼ˆ.textï¼‰</h3><ul><li><strong>å†…å®¹</strong>ï¼šç¨‹åºçš„æœºå™¨æŒ‡ä»¤ï¼ˆå‡½æ•°ä½“ï¼‰</li><li><strong>å±æ€§</strong>ï¼šåªè¯»ã€ä¸å¯ä¿®æ”¹</li><li><strong>ç¤ºä¾‹</strong>ï¼š</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123; <span class="keyword">return</span> <span class="number">0</span>; &#125; <span class="comment">// â† å‡½æ•°ä»£ç å­˜åœ¨ .text æ®µ</span></span><br></pre></td></tr></table></figure><hr><h2 id="ğŸ§­-åœ°å€å¢é•¿æ–¹å‘ç¤ºæ„"><a href="#ğŸ§­-åœ°å€å¢é•¿æ–¹å‘ç¤ºæ„" class="headerlink" title="ğŸ§­ åœ°å€å¢é•¿æ–¹å‘ç¤ºæ„"></a>ğŸ§­ åœ°å€å¢é•¿æ–¹å‘ç¤ºæ„</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">é«˜åœ°å€ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><br><span class="line">                       â†“ æ ˆå‘ä¸‹å¢é•¿ï¼ˆå‡½æ•°è°ƒç”¨å‹æ ˆï¼‰</span><br><span class="line">       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><br><span class="line">       â”‚   Stack       â”‚</span><br><span class="line">       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><br><span class="line">       â”‚   (Free)      â”‚</span><br><span class="line">       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><br><span class="line">       â”‚   Heap        â”‚</span><br><span class="line">       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><br><span class="line">                       â†‘ å †å‘ä¸Šå¢é•¿ï¼ˆnew åˆ†é…å†…å­˜ï¼‰</span><br><span class="line">ä½åœ°å€ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><br></pre></td></tr></table></figure><blockquote><p>âš ï¸ å®é™…åœ°å€åˆ†å¸ƒå¯èƒ½å› æ“ä½œç³»ç»Ÿã€ç¼–è¯‘å™¨ã€æ¶æ„ç•¥æœ‰ä¸åŒï¼Œä½†â€œæ ˆå‘ä¸‹ã€å †å‘ä¸Šâ€æ˜¯å¸¸è§æ¨¡å‹ã€‚</p></blockquote><hr><h2 id="ğŸ§ª-ç¤ºä¾‹ä»£ç -åœ°å€è¾“å‡ºç¤ºæ„"><a href="#ğŸ§ª-ç¤ºä¾‹ä»£ç -åœ°å€è¾“å‡ºç¤ºæ„" class="headerlink" title="ğŸ§ª ç¤ºä¾‹ä»£ç  + åœ°å€è¾“å‡ºç¤ºæ„"></a>ğŸ§ª ç¤ºä¾‹ä»£ç  + åœ°å€è¾“å‡ºç¤ºæ„</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> global_data = <span class="number">100</span>;     <span class="comment">// â†’ .data</span></span><br><span class="line"><span class="type">int</span> global_bss;            <span class="comment">// â†’ .bss</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> local_stack = <span class="number">200</span>;           <span class="comment">// â†’ æ ˆ</span></span><br><span class="line">    <span class="type">static</span> <span class="type">int</span> local_static = <span class="number">300</span>;   <span class="comment">// â†’ .dataï¼ˆé™æ€å±€éƒ¨å˜é‡ï¼‰</span></span><br><span class="line">    <span class="type">int</span>* heap_ptr = <span class="keyword">new</span> <span class="built_in">int</span>(<span class="number">400</span>);    <span class="comment">// â†’ å †å¯¹è±¡ï¼ŒæŒ‡é’ˆå˜é‡åœ¨æ ˆ</span></span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;global_data (.data): &quot;</span> &lt;&lt; &amp;global_data &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;global_bss  (.bss) : &quot;</span> &lt;&lt; &amp;global_bss &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;local_static(.data): &quot;</span> &lt;&lt; &amp;local_static &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;local_stack (stack): &quot;</span> &lt;&lt; &amp;local_stack &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;heap object (heap) : &quot;</span> &lt;&lt; heap_ptr &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">delete</span> heap_ptr;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ğŸ“Œ <strong>å…¸å‹è¾“å‡ºåœ°å€é¡ºåºï¼ˆ64ä½ Linux ç¤ºä¾‹ï¼‰</strong>ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">global_data:  0x555555558010  â† .dataï¼ˆä½åœ°å€åŒºï¼‰</span><br><span class="line">global_bss:   0x555555558014  â† .bssï¼ˆç´§é‚» .dataï¼‰</span><br><span class="line">local_static: 0x555555558018  â† é™æ€åŒº</span><br><span class="line">local_stack:  0x7fffffffdc8c  â† æ ˆï¼ˆé«˜åœ°å€ï¼‰</span><br><span class="line">heap object:  0x555555579eb0  â† å †ï¼ˆä¸­é—´åœ°å€ï¼‰</span><br></pre></td></tr></table></figure><hr><h2 id="âœ…-æ€»ç»“å£è¯€"><a href="#âœ…-æ€»ç»“å£è¯€" class="headerlink" title="âœ… æ€»ç»“å£è¯€"></a>âœ… æ€»ç»“å£è¯€</h2><blockquote><p><strong>â€œä»£ç å«åº•ï¼Œæ•°æ®å±…ä¸­ï¼Œå †å¾€ä¸Šçˆ¬ï¼Œæ ˆå¾€ä¸‹é™ï¼Œå…¨å±€é™æ€ç¨³å¦‚æ³°å±±ã€‚â€</strong></p></blockquote><hr><h2 id="ğŸ“š-é™„ï¼šå˜é‡å­˜å‚¨ä½ç½®é€ŸæŸ¥è¡¨"><a href="#ğŸ“š-é™„ï¼šå˜é‡å­˜å‚¨ä½ç½®é€ŸæŸ¥è¡¨" class="headerlink" title="ğŸ“š é™„ï¼šå˜é‡å­˜å‚¨ä½ç½®é€ŸæŸ¥è¡¨"></a>ğŸ“š é™„ï¼šå˜é‡å­˜å‚¨ä½ç½®é€ŸæŸ¥è¡¨</h2><table><thead><tr><th>å˜é‡ç±»å‹</th><th>å­˜å‚¨ä½ç½®</th><th>ç”Ÿå‘½å‘¨æœŸ</th><th>æ˜¯å¦éœ€è¦æ‰‹åŠ¨ç®¡ç†</th></tr></thead><tbody><tr><td>å…¨å±€å˜é‡</td><td>é™æ€åŒºï¼ˆ.data&#x2F;.bssï¼‰</td><td>æ•´ä¸ªç¨‹åºè¿è¡ŒæœŸ</td><td>âŒ å¦</td></tr><tr><td>é™æ€å±€éƒ¨å˜é‡</td><td>é™æ€åŒº</td><td>æ•´ä¸ªç¨‹åºè¿è¡ŒæœŸ</td><td>âŒ å¦</td></tr><tr><td>å±€éƒ¨å˜é‡</td><td>æ ˆ</td><td>å‡½æ•°ä½œç”¨åŸŸ</td><td>âŒ è‡ªåŠ¨ç®¡ç†</td></tr><tr><td><code>new</code> &#x2F; <code>malloc</code> å¯¹è±¡</td><td>å †</td><td>æ‰‹åŠ¨æ§åˆ¶</td><td>âœ… æ˜¯ï¼ˆæˆ–æ™ºèƒ½æŒ‡é’ˆï¼‰</td></tr><tr><td>å‡½æ•°ä»£ç </td><td>ä»£ç æ®µï¼ˆ.textï¼‰</td><td>æ•´ä¸ªç¨‹åºè¿è¡ŒæœŸ</td><td>âŒ åªè¯»ä¸å¯ä¿®æ”¹</td></tr></tbody></table><hr><p>ğŸ“Œ <strong>å­¦ä¹ å»ºè®®</strong>ï¼šé…åˆè°ƒè¯•å™¨ï¼ˆå¦‚ GDBï¼‰æˆ–æ‰“å°å˜é‡åœ°å€ï¼Œäº²è‡ªè§‚å¯Ÿå†…å­˜åˆ†å¸ƒï¼Œç†è§£æ›´æ·±åˆ»ï¼</p>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;ğŸ§ -C-ç¨‹åºè¿è¡Œæ—¶å†…å­˜å¸ƒå±€&quot;&gt;&lt;a href=&quot;#ğŸ§ -C-ç¨‹åºè¿è¡Œæ—¶å†…å­˜å¸ƒå±€&quot; class=&quot;headerlink&quot; title=&quot;ğŸ§  C++ ç¨‹åºè¿è¡Œæ—¶å†…å­˜å¸ƒå±€&quot;&gt;&lt;/a&gt;ğŸ§  C++ ç¨‹åºè¿è¡Œæ—¶å†…å­˜å¸ƒå±€&lt;/h1&gt;&lt;blockquote&gt;
&lt;p&gt;ğŸ“Œ é€‚ç”¨äºç†è§£å…¨å±€å˜é‡ã€æ ˆã€å †ã€é™æ€åŒºã€ä»£ç æ®µçš„å­˜å‚¨ä½ç½®ä¸ç”Ÿå‘½å‘¨æœŸã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;æœ¬æ–‡æˆ‘ä»¬ä¸»è¦ä»‹ç» C++ ç¨‹åºè¿è¡Œæ—¶å†…å­˜å¸ƒå±€ï¼Œä»¥åŠå˜é‡å­˜å‚¨ä½ç½®ï¼ŒåŒ…æ‹¬æ ˆã€å †ã€é™æ€å­˜å‚¨åŒºç­‰ï¼Œå¹¶é™„ä¸Š ASCII å›¾è§£ã€‚&lt;/p&gt;</summary>
    
    
    
    
    <category term="C++" scheme="https://lyroom.github.io/tags/C/"/>
    
    <category term="å†…å­˜" scheme="https://lyroom.github.io/tags/%E5%86%85%E5%AD%98/"/>
    
  </entry>
  
  <entry>
    <title>topå‘½ä»¤è§£æ</title>
    <link href="https://lyroom.github.io/2025/09/16/top%E5%91%BD%E4%BB%A4%E8%A7%A3%E6%9E%90/"/>
    <id>https://lyroom.github.io/2025/09/16/top%E5%91%BD%E4%BB%A4%E8%A7%A3%E6%9E%90/</id>
    <published>2025-09-16T04:16:44.000Z</published>
    <updated>2025-09-16T04:16:44.000Z</updated>
    
    <content type="html"><![CDATA[<hr><h1 id="ğŸ§-Linux-å‘½ä»¤è§£æï¼ˆæ‚è®°ï¼‰â€”â€”-top-å‘½ä»¤è¯¦è§£"><a href="#ğŸ§-Linux-å‘½ä»¤è§£æï¼ˆæ‚è®°ï¼‰â€”â€”-top-å‘½ä»¤è¯¦è§£" class="headerlink" title="ğŸ§ Linux å‘½ä»¤è§£æï¼ˆæ‚è®°ï¼‰â€”â€” top å‘½ä»¤è¯¦è§£"></a>ğŸ§ Linux å‘½ä»¤è§£æï¼ˆæ‚è®°ï¼‰â€”â€” <code>top</code> å‘½ä»¤è¯¦è§£</h1><blockquote><p><code>top</code> æ˜¯ Linux ç³»ç»Ÿä¸­æœ€å¸¸ç”¨çš„å®æ—¶æ€§èƒ½ç›‘æ§å·¥å…·ï¼Œç”¨äºåŠ¨æ€æŸ¥çœ‹ç³»ç»Ÿèµ„æºä½¿ç”¨æƒ…å†µå’Œè¿›ç¨‹çŠ¶æ€ã€‚æœ¬æ–‡å°†ç»“åˆçœŸå®è¾“å‡ºç¤ºä¾‹ï¼Œé€è¡Œé€åˆ—è§£æå…¶å«ä¹‰ï¼Œå¹¶æä¾›å®ç”¨è¯Šæ–­æŠ€å·§ã€‚</p></blockquote><hr><span id="more"></span><h2 id="ğŸ“Š-ä¸€ã€å®æˆ˜ç¤ºä¾‹ï¼štop-å®Œæ•´è¾“å‡º"><a href="#ğŸ“Š-ä¸€ã€å®æˆ˜ç¤ºä¾‹ï¼štop-å®Œæ•´è¾“å‡º" class="headerlink" title="ğŸ“Š ä¸€ã€å®æˆ˜ç¤ºä¾‹ï¼štop å®Œæ•´è¾“å‡º"></a>ğŸ“Š ä¸€ã€å®æˆ˜ç¤ºä¾‹ï¼š<code>top</code> å®Œæ•´è¾“å‡º</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">root@armbian:~<span class="comment"># top</span></span><br><span class="line">top - 12:20:30 up  2:23,  1 user,  load average: 0.00, 0.01, 0.00</span><br><span class="line">Tasks: 236 total,   1 running, 235 sleeping,   0 stopped,   0 zombie</span><br><span class="line">%Cpu(s):  0.5 us,  0.9 sy,  0.0 ni, 98.6 <span class="built_in">id</span>,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st </span><br><span class="line">MiB Mem :   1801.0 total,    132.6 free,    928.2 used,    892.1 buff/cache     </span><br><span class="line">MiB Swap:      0.0 total,      0.0 free,      0.0 used.    872.8 avail Mem </span><br><span class="line"></span><br><span class="line">    PID USER      PR  NI    VIRT    RES    SHR S  %CPU  %MEM     TIME+ COMMAND                                                     </span><br><span class="line">   2472 1000      20   0 1299292  49084  32056 S   1.0   2.7   1:25.30 kernel                                                      </span><br><span class="line">  43581 root      20   0   11628   4768   2884 R   1.0   0.3   0:00.16 top                                                         </span><br><span class="line">    310 root      rt   0       0      0      0 S   0.7   0.0   0:48.36 sugov:0                                                     </span><br><span class="line">    643 root      -2   0       0      0      0 S   0.3   0.0   0:33.40 ksdioirqd/mmc0                                              </span><br><span class="line">   1452 root      20   0 3445756  57160  33332 S   0.3   3.1   0:10.08 dockerd                                                     </span><br><span class="line">   2438 root      20   0    1668   1100    820 S   0.3   0.1   0:25.89 procd                                                       </span><br><span class="line">   2629 root      20   0   85704  22124   9184 S   0.3   1.2   0:24.84 clouddrive                                                  </span><br></pre></td></tr></table></figure><hr><h2 id="ğŸ§­-äºŒã€å…¨å±€ç³»ç»Ÿä¿¡æ¯è¯¦è§£ï¼ˆå‰5è¡Œï¼‰"><a href="#ğŸ§­-äºŒã€å…¨å±€ç³»ç»Ÿä¿¡æ¯è¯¦è§£ï¼ˆå‰5è¡Œï¼‰" class="headerlink" title="ğŸ§­ äºŒã€å…¨å±€ç³»ç»Ÿä¿¡æ¯è¯¦è§£ï¼ˆå‰5è¡Œï¼‰"></a>ğŸ§­ äºŒã€å…¨å±€ç³»ç»Ÿä¿¡æ¯è¯¦è§£ï¼ˆå‰5è¡Œï¼‰</h2><h3 id="ğŸ”¹-ç¬¬1è¡Œï¼šç³»ç»Ÿè¿è¡Œæ—¶é—´-amp-è´Ÿè½½å¹³å‡å€¼"><a href="#ğŸ”¹-ç¬¬1è¡Œï¼šç³»ç»Ÿè¿è¡Œæ—¶é—´-amp-è´Ÿè½½å¹³å‡å€¼" class="headerlink" title="ğŸ”¹ ç¬¬1è¡Œï¼šç³»ç»Ÿè¿è¡Œæ—¶é—´ &amp; è´Ÿè½½å¹³å‡å€¼"></a>ğŸ”¹ ç¬¬1è¡Œï¼šç³»ç»Ÿè¿è¡Œæ—¶é—´ &amp; è´Ÿè½½å¹³å‡å€¼</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">top - 12:20:30 up 2:23, 1 user, load average: 0.00, 0.01, 0.00</span><br></pre></td></tr></table></figure><ul><li><strong>å½“å‰æ—¶é—´</strong>ï¼š12:20:30</li><li><strong>è¿è¡Œæ—¶é—´</strong>ï¼š2å°æ—¶23åˆ†é’Ÿï¼ˆæ–°å¯åŠ¨ç³»ç»Ÿï¼‰</li><li><strong>ç™»å½•ç”¨æˆ·</strong>ï¼š1 ä¸ªç”¨æˆ·ï¼ˆrootï¼‰</li><li><strong>è´Ÿè½½å¹³å‡å€¼</strong>ï¼š<ul><li>1åˆ†é’Ÿï¼š0.00 â†’ å‡ ä¹æ— è´Ÿè½½</li><li>5åˆ†é’Ÿï¼š0.01 â†’ æè½»è´Ÿè½½</li><li>15åˆ†é’Ÿï¼š0.00 â†’ éå¸¸ç©ºé—²</li></ul></li></ul><blockquote><p>âœ… ç³»ç»Ÿéå¸¸å¥åº·ï¼Œæ— è¿‡è½½é£é™©ï¼ˆå³ä½¿å•æ ¸ CPU ä¹Ÿè¿œæœªæ»¡è½½ï¼‰</p></blockquote><hr><h3 id="ğŸ”¹-ç¬¬2è¡Œï¼šä»»åŠ¡ï¼ˆè¿›ç¨‹ï¼‰ç»Ÿè®¡"><a href="#ğŸ”¹-ç¬¬2è¡Œï¼šä»»åŠ¡ï¼ˆè¿›ç¨‹ï¼‰ç»Ÿè®¡" class="headerlink" title="ğŸ”¹ ç¬¬2è¡Œï¼šä»»åŠ¡ï¼ˆè¿›ç¨‹ï¼‰ç»Ÿè®¡"></a>ğŸ”¹ ç¬¬2è¡Œï¼šä»»åŠ¡ï¼ˆè¿›ç¨‹ï¼‰ç»Ÿè®¡</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Tasks: 236 total, 1 running, 235 sleeping, 0 stopped, 0 zombie</span><br></pre></td></tr></table></figure><ul><li><strong>æ€»è¿›ç¨‹æ•°</strong>ï¼š236</li><li><strong>è¿è¡Œä¸­</strong>ï¼š1 ä¸ªï¼ˆå°±æ˜¯ <code>top</code> è‡ªå·±ï¼‰</li><li><strong>ç¡çœ ä¸­</strong>ï¼š235 ä¸ªï¼ˆæ­£å¸¸ï¼Œå¤§éƒ¨åˆ†åå°æœåŠ¡éƒ½åœ¨ç­‰å¾…ï¼‰</li><li><strong>åƒµå°¸è¿›ç¨‹</strong>ï¼š0 â†’ âœ… å¥åº·ï¼</li></ul><hr><h3 id="ğŸ”¹-ç¬¬3è¡Œï¼šCPU-ä½¿ç”¨æƒ…å†µ"><a href="#ğŸ”¹-ç¬¬3è¡Œï¼šCPU-ä½¿ç”¨æƒ…å†µ" class="headerlink" title="ğŸ”¹ ç¬¬3è¡Œï¼šCPU ä½¿ç”¨æƒ…å†µ"></a>ğŸ”¹ ç¬¬3è¡Œï¼šCPU ä½¿ç”¨æƒ…å†µ</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">%Cpu(s): 0.5 us, 0.9 sy, 0.0 ni, 98.6 id, 0.0 wa, 0.0 hi, 0.0 si, 0.0 st</span><br></pre></td></tr></table></figure><ul><li><strong>ç”¨æˆ·ç©ºé—´</strong>ï¼ˆusï¼‰ï¼š0.5% â†’ ç”¨æˆ·ç¨‹åºå ç”¨æä½</li><li><strong>å†…æ ¸ç©ºé—´</strong>ï¼ˆsyï¼‰ï¼š0.9% â†’ ç³»ç»Ÿè°ƒç”¨&#x2F;é©±åŠ¨å ç”¨ä¹Ÿå¾ˆä½</li><li><strong>ç©ºé—²</strong>ï¼ˆidï¼‰ï¼š98.6% â†’ CPU å‡ ä¹å®Œå…¨ç©ºé—²</li><li><strong>I&#x2F;O ç­‰å¾…</strong>ï¼ˆwaï¼‰ï¼š0.0% â†’ æ— ç£ç›˜&#x2F;ç½‘ç»œç“¶é¢ˆ</li><li><strong>è™šæ‹Ÿæœºå·å–</strong>ï¼ˆstï¼‰ï¼š0.0% â†’ ä¸æ˜¯è™šæ‹Ÿæœºæˆ–æœªè¢«æŠ¢å </li></ul><blockquote><p>âœ… CPU èµ„æºå……è¶³ï¼Œæ— ä»»ä½•ç“¶é¢ˆ</p></blockquote><hr><h3 id="ğŸ”¹-ç¬¬4è¡Œï¼šç‰©ç†å†…å­˜ï¼ˆRAMï¼‰ä½¿ç”¨æƒ…å†µ"><a href="#ğŸ”¹-ç¬¬4è¡Œï¼šç‰©ç†å†…å­˜ï¼ˆRAMï¼‰ä½¿ç”¨æƒ…å†µ" class="headerlink" title="ğŸ”¹ ç¬¬4è¡Œï¼šç‰©ç†å†…å­˜ï¼ˆRAMï¼‰ä½¿ç”¨æƒ…å†µ"></a>ğŸ”¹ ç¬¬4è¡Œï¼šç‰©ç†å†…å­˜ï¼ˆRAMï¼‰ä½¿ç”¨æƒ…å†µ</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">MiB Mem : 1801.0 total, 132.6 free, 928.2 used, 892.1 buff/cache</span><br></pre></td></tr></table></figure><ul><li><strong>æ€»å†…å­˜</strong>ï¼š1801 MiB â‰ˆ <strong>1.76 GB</strong></li><li><strong>ç©ºé—²å†…å­˜</strong>ï¼š132.6 MiBï¼ˆâš ï¸ Linux ä¼šç¼“å­˜ï¼Œæ­¤å€¼å°æ˜¯æ­£å¸¸çš„ï¼‰</li><li><strong>å·²ä½¿ç”¨</strong>ï¼š928.2 MiBï¼ˆå«ç¼“å­˜ï¼‰</li><li><strong>ç¼“å†²&#x2F;ç¼“å­˜</strong>ï¼š892.1 MiB â†’ å¯è¢«å¿«é€Ÿå›æ”¶ä¾›ç¨‹åºä½¿ç”¨</li></ul><hr><h3 id="ğŸ”¹-ç¬¬5è¡Œï¼šSwap-ä¸å¯ç”¨å†…å­˜"><a href="#ğŸ”¹-ç¬¬5è¡Œï¼šSwap-ä¸å¯ç”¨å†…å­˜" class="headerlink" title="ğŸ”¹ ç¬¬5è¡Œï¼šSwap ä¸å¯ç”¨å†…å­˜"></a>ğŸ”¹ ç¬¬5è¡Œï¼šSwap ä¸å¯ç”¨å†…å­˜</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">MiB Swap: 0.0 total, 0.0 free, 0.0 used. 872.8 avail Mem</span><br></pre></td></tr></table></figure><ul><li><strong>äº¤æ¢åˆ†åŒº</strong>ï¼šæœªé…ç½®ï¼ˆtotal&#x3D;0ï¼‰â†’ åµŒå…¥å¼&#x2F;è½»é‡ç³»ç»Ÿå¸¸è§</li><li><strong>å¯ç”¨å†…å­˜</strong>ï¼ˆavail Memï¼‰ï¼š<strong>872.8 MiB</strong> â†’ âœ… å†…å­˜å……è¶³ï¼</li></ul><blockquote><p>ğŸ’¡ å°½ç®¡ <code>used=928.2 MiB</code>ï¼Œä½† <code>avail Mem=872.8 MiB</code>ï¼Œè¯´æ˜ç³»ç»Ÿä»æœ‰è¿‘ä¸€åŠå†…å­˜å¯ç«‹å³åˆ†é…ç»™æ–°è¿›ç¨‹ï¼Œ<strong>æ— å†…å­˜å‹åŠ›</strong>ã€‚</p></blockquote><hr><h2 id="ğŸ“‹-ä¸‰ã€è¿›ç¨‹åˆ—è¡¨å„åˆ—è¯¦è§£ï¼ˆç»“åˆç¤ºä¾‹ï¼‰"><a href="#ğŸ“‹-ä¸‰ã€è¿›ç¨‹åˆ—è¡¨å„åˆ—è¯¦è§£ï¼ˆç»“åˆç¤ºä¾‹ï¼‰" class="headerlink" title="ğŸ“‹ ä¸‰ã€è¿›ç¨‹åˆ—è¡¨å„åˆ—è¯¦è§£ï¼ˆç»“åˆç¤ºä¾‹ï¼‰"></a>ğŸ“‹ ä¸‰ã€è¿›ç¨‹åˆ—è¡¨å„åˆ—è¯¦è§£ï¼ˆç»“åˆç¤ºä¾‹ï¼‰</h2><table><thead><tr><th>åˆ—å</th><th>å«ä¹‰è¯´æ˜</th><th>ç¤ºä¾‹è§£æï¼ˆæ¥è‡ªä¸Šæ–¹è¾“å‡ºï¼‰</th></tr></thead><tbody><tr><td><strong>PID</strong></td><td>è¿›ç¨‹ ID</td><td><code>43581</code> æ˜¯å½“å‰è¿è¡Œçš„ <code>top</code> è¿›ç¨‹</td></tr><tr><td><strong>USER</strong></td><td>è¿›ç¨‹æ‰€æœ‰è€…</td><td><code>root</code> æˆ– <code>1000</code>ï¼ˆæ™®é€šç”¨æˆ·ï¼‰</td></tr><tr><td><strong>PR</strong></td><td>è°ƒåº¦ä¼˜å…ˆçº§ã€‚<code>rt</code> &#x3D; å®æ—¶ä¼˜å…ˆçº§</td><td><code>sugov:0</code> çš„ <code>PR=rt</code>ï¼Œæ˜¯å†…æ ¸è°ƒåº¦å™¨çº¿ç¨‹</td></tr><tr><td><strong>NI</strong></td><td>Nice å€¼ï¼ˆ-20~19ï¼‰ï¼Œå½±å“ä¼˜å…ˆçº§</td><td>å¤šæ•°ä¸º <code>0</code>ï¼Œ<code>ksdioirqd/mmc0</code> ä¸º <code>-2</code>ï¼ˆé«˜ä¼˜å…ˆçº§ï¼‰</td></tr><tr><td><strong>VIRT</strong></td><td>è™šæ‹Ÿå†…å­˜æ€»é‡ï¼ˆKiBï¼‰</td><td><code>kernel</code> è¿›ç¨‹ï¼š1,299,292 KiB â‰ˆ 1.3 GB</td></tr><tr><td><strong>RES</strong></td><td>å¸¸é©»ç‰©ç†å†…å­˜ï¼ˆKiBï¼‰ï¼ŒçœŸå®å ç”¨</td><td><code>dockerd</code> å ç”¨ 57,160 KiB â‰ˆ 57 MB</td></tr><tr><td><strong>SHR</strong></td><td>å…±äº«å†…å­˜éƒ¨åˆ†</td><td><code>clouddrive</code> çš„ 9,184 KiB æ˜¯å…±äº«åº“å†…å­˜</td></tr><tr><td><strong>S</strong></td><td>è¿›ç¨‹çŠ¶æ€ï¼š<br>â€¢ <code>R</code>&#x3D;è¿è¡Œä¸­<br>â€¢ <code>S</code>&#x3D;ç¡çœ <br>â€¢ <code>Z</code>&#x3D;åƒµå°¸ç­‰</td><td><code>top</code> æ˜¯ <code>R</code>ï¼Œå…¶ä½™å¤§å¤šæ˜¯ <code>S</code>ï¼ˆæ­£å¸¸ï¼‰</td></tr><tr><td><strong>%CPU</strong></td><td>CPU ä½¿ç”¨ç‡ï¼ˆå¤šæ ¸å¯ &gt;100%ï¼‰</td><td><code>top</code> å’Œ <code>kernel</code> å„å  1.0%ï¼Œæä½</td></tr><tr><td><strong>%MEM</strong></td><td>ç‰©ç†å†…å­˜å ç”¨ç™¾åˆ†æ¯”ï¼ˆåŸºäº RESï¼‰</td><td><code>dockerd</code> å  3.1%ï¼Œæ˜¯å½“å‰å†…å­˜å ç”¨æœ€é«˜çš„è¿›ç¨‹</td></tr><tr><td><strong>TIME+</strong></td><td>ç´¯è®¡ CPU æ—¶é—´ï¼ˆåˆ†:ç§’.ç™¾åˆ†ç§’ï¼‰</td><td><code>kernel</code> å·²ç´¯è®¡ä½¿ç”¨ 1åˆ†25ç§’ CPU æ—¶é—´</td></tr><tr><td><strong>COMMAND</strong></td><td>å¯åŠ¨å‘½ä»¤å</td><td><code>clouddrive</code>, <code>dockerd</code>, <code>procd</code> ç­‰</td></tr></tbody></table><hr><h2 id="ğŸ› ï¸-å››ã€å®ç”¨æŠ€å·§ä¸è¯Šæ–­å»ºè®®"><a href="#ğŸ› ï¸-å››ã€å®ç”¨æŠ€å·§ä¸è¯Šæ–­å»ºè®®" class="headerlink" title="ğŸ› ï¸ å››ã€å®ç”¨æŠ€å·§ä¸è¯Šæ–­å»ºè®®"></a>ğŸ› ï¸ å››ã€å®ç”¨æŠ€å·§ä¸è¯Šæ–­å»ºè®®</h2><h3 id="ğŸ”-å¿«é€Ÿå®šä½é—®é¢˜"><a href="#ğŸ”-å¿«é€Ÿå®šä½é—®é¢˜" class="headerlink" title="ğŸ” å¿«é€Ÿå®šä½é—®é¢˜"></a>ğŸ” å¿«é€Ÿå®šä½é—®é¢˜</h3><ul><li><strong>CPU é«˜ï¼Ÿ</strong> â†’ çœ‹ <code>%CPU</code> åˆ—ï¼ŒæŒ‰ <code>P</code> æ’åº</li><li><strong>å†…å­˜é«˜ï¼Ÿ</strong> â†’ çœ‹ <code>%MEM</code> æˆ– <code>RES</code>ï¼ŒæŒ‰ <code>M</code> æ’åº</li><li><strong>I&#x2F;O å¡ï¼Ÿ</strong> â†’ çœ‹å…¨å±€ <code>wa</code> æ˜¯å¦ &gt; 5%</li><li><strong>åƒµå°¸è¿›ç¨‹ï¼Ÿ</strong> â†’ çœ‹ Tasks è¡Œ <code>zombie</code> æ˜¯å¦ &gt; 0</li></ul><h3 id="ğŸ¯-äº¤äº’æ“ä½œï¼ˆåœ¨-top-ç•Œé¢ä¸­ï¼‰"><a href="#ğŸ¯-äº¤äº’æ“ä½œï¼ˆåœ¨-top-ç•Œé¢ä¸­ï¼‰" class="headerlink" title="ğŸ¯ äº¤äº’æ“ä½œï¼ˆåœ¨ top ç•Œé¢ä¸­ï¼‰"></a>ğŸ¯ äº¤äº’æ“ä½œï¼ˆåœ¨ <code>top</code> ç•Œé¢ä¸­ï¼‰</h3><table><thead><tr><th>æŒ‰é”®</th><th>åŠŸèƒ½</th></tr></thead><tbody><tr><td><code>P</code></td><td>æŒ‰ CPU ä½¿ç”¨ç‡æ’åº</td></tr><tr><td><code>M</code></td><td>æŒ‰å†…å­˜ä½¿ç”¨ç‡æ’åº</td></tr><tr><td><code>T</code></td><td>æŒ‰è¿è¡Œæ—¶é—´æ’åº</td></tr><tr><td><code>c</code></td><td>æ˜¾ç¤ºå®Œæ•´å‘½ä»¤è¡Œ</td></tr><tr><td><code>e</code> &#x2F; <code>E</code></td><td>åˆ‡æ¢å†…å­˜å•ä½ï¼ˆè¿›ç¨‹åŒº&#x2F;å…¨å±€ï¼‰</td></tr><tr><td><code>1</code></td><td>æ˜¾ç¤ºæ¯ä¸ª CPU æ ¸å¿ƒä½¿ç”¨æƒ…å†µ</td></tr><tr><td><code>k</code></td><td>æ€æ­»æŒ‡å®š PID è¿›ç¨‹</td></tr><tr><td><code>q</code></td><td>é€€å‡º top</td></tr></tbody></table><h3 id="âš ï¸-å¼‚å¸¸å…³æ³¨ç‚¹ï¼ˆæœ¬ä¾‹ä¸­å‡æ— ï¼‰"><a href="#âš ï¸-å¼‚å¸¸å…³æ³¨ç‚¹ï¼ˆæœ¬ä¾‹ä¸­å‡æ— ï¼‰" class="headerlink" title="âš ï¸ å¼‚å¸¸å…³æ³¨ç‚¹ï¼ˆæœ¬ä¾‹ä¸­å‡æ— ï¼‰"></a>âš ï¸ å¼‚å¸¸å…³æ³¨ç‚¹ï¼ˆæœ¬ä¾‹ä¸­å‡æ— ï¼‰</h3><ul><li><strong>åƒµå°¸è¿›ç¨‹</strong> â†’ Tasks è¡Œæ˜¾ç¤º <code>0 zombie</code> âœ…</li><li><strong>é«˜ I&#x2F;O ç­‰å¾…</strong> â†’ <code>wa=0.0</code> âœ…</li><li><strong>Swap ä½¿ç”¨</strong> â†’ <code>Swap used=0.0</code> âœ…</li><li><strong>è´Ÿè½½è¿‡é«˜</strong> â†’ <code>load average</code> å…¨éƒ¨ &lt; 0.02 âœ…</li></ul><h3 id="ğŸ§µ-æŸ¥çœ‹çº¿ç¨‹ï¼ˆè¿›é˜¶ï¼‰"><a href="#ğŸ§µ-æŸ¥çœ‹çº¿ç¨‹ï¼ˆè¿›é˜¶ï¼‰" class="headerlink" title="ğŸ§µ æŸ¥çœ‹çº¿ç¨‹ï¼ˆè¿›é˜¶ï¼‰"></a>ğŸ§µ æŸ¥çœ‹çº¿ç¨‹ï¼ˆè¿›é˜¶ï¼‰</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">top -Hp &lt;PID&gt;</span><br></pre></td></tr></table></figure><p>ä¾‹å¦‚ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">top -Hp 2472   <span class="comment"># æŸ¥çœ‹ PID=2472ï¼ˆkernelï¼‰çš„æ‰€æœ‰çº¿ç¨‹</span></span><br></pre></td></tr></table></figure><p>ç”¨äºå®šä½å…·ä½“å“ªä¸ªçº¿ç¨‹å ç”¨è¿‡é«˜ã€‚</p><hr><h2 id="ğŸ§©-äº”ã€ç»“åˆç¤ºä¾‹çš„è¯Šæ–­ç»“è®º"><a href="#ğŸ§©-äº”ã€ç»“åˆç¤ºä¾‹çš„è¯Šæ–­ç»“è®º" class="headerlink" title="ğŸ§© äº”ã€ç»“åˆç¤ºä¾‹çš„è¯Šæ–­ç»“è®º"></a>ğŸ§© äº”ã€ç»“åˆç¤ºä¾‹çš„è¯Šæ–­ç»“è®º</h2><blockquote><p>ğŸ’¡ <strong>ç³»ç»Ÿæ•´ä½“çŠ¶æ€å¥åº·ï¼Œèµ„æºå……è¶³ï¼Œæ— æ€§èƒ½ç“¶é¢ˆã€‚</strong></p></blockquote><ul><li><strong>CPU</strong>ï¼š98.6% ç©ºé—²ï¼Œæ— å‹åŠ›</li><li><strong>å†…å­˜</strong>ï¼šå¯ç”¨ 872 MiBï¼Œæ—  Swap ä½¿ç”¨ï¼Œæ— æ³„æ¼</li><li><strong>è´Ÿè½½</strong>ï¼šæ¥è¿‘ 0ï¼Œç³»ç»Ÿæä¸ºç©ºé—²</li><li><strong>è¿›ç¨‹</strong>ï¼šæ— åƒµå°¸ï¼Œæ— å¼‚å¸¸çŠ¶æ€</li><li><strong>çƒ­ç‚¹è¿›ç¨‹</strong>ï¼š<ul><li><code>dockerd</code> å†…å­˜å ç”¨æœ€é«˜ï¼ˆ3.1%ï¼‰</li><li><code>kernel</code> å’Œ <code>top</code> æ˜¯å½“å‰å”¯äºŒè½»å¾®ä½¿ç”¨ CPU çš„è¿›ç¨‹ï¼ˆå„ 1.0%ï¼‰</li></ul></li></ul><hr><h2 id="ğŸ“Œ-å…­ã€é™„å½•ï¼šé€ŸæŸ¥è¡¨"><a href="#ğŸ“Œ-å…­ã€é™„å½•ï¼šé€ŸæŸ¥è¡¨" class="headerlink" title="ğŸ“Œ å…­ã€é™„å½•ï¼šé€ŸæŸ¥è¡¨"></a>ğŸ“Œ å…­ã€é™„å½•ï¼šé€ŸæŸ¥è¡¨</h2><table><thead><tr><th>é¡¹ç›®</th><th>æ­£å¸¸èŒƒå›´</th><th>æœ¬ä¾‹çŠ¶æ€</th><th>æ˜¯å¦å¥åº·</th></tr></thead><tbody><tr><td>Load Average</td><td>&lt; CPU æ ¸æ•°</td><td>0.00~0.01</td><td>âœ…</td></tr><tr><td>%CPU idle</td><td>&gt; 20%</td><td>98.6%</td><td>âœ…</td></tr><tr><td>I&#x2F;O Wait (wa)</td><td>&lt; 5%</td><td>0.0%</td><td>âœ…</td></tr><tr><td>Zombie è¿›ç¨‹</td><td>0</td><td>0</td><td>âœ…</td></tr><tr><td>Swap Used</td><td>0ï¼ˆæˆ–æå°ï¼‰</td><td>0.0</td><td>âœ…</td></tr><tr><td>Avail Mem</td><td>&gt; æ€»å†…å­˜ 20%</td><td>872.8 &#x2F; 1801 â‰ˆ 48%</td><td>âœ…</td></tr></tbody></table><hr><h2 id="âœ…-æ€»ç»“"><a href="#âœ…-æ€»ç»“" class="headerlink" title="âœ… æ€»ç»“"></a>âœ… æ€»ç»“</h2><p>é€šè¿‡ <code>top</code> å‘½ä»¤ï¼Œæˆ‘ä»¬å¯ä»¥ï¼š</p><ol><li><strong>5ç§’å†…åˆ¤æ–­ç³»ç»Ÿæ•´ä½“å¥åº·åº¦</strong>ï¼ˆé€šè¿‡å‰5è¡Œå…¨å±€ä¿¡æ¯ï¼‰</li><li><strong>ç²¾å‡†å®šä½èµ„æºå ç”¨å¤§æˆ·</strong>ï¼ˆé€šè¿‡è¿›ç¨‹åˆ—è¡¨ + æ’åºï¼‰</li><li><strong>å‘ç°æ½œåœ¨é—®é¢˜</strong>ï¼ˆåƒµå°¸ã€I&#x2F;Oç“¶é¢ˆã€å†…å­˜æ³„æ¼ç­‰ï¼‰</li></ol>]]></content>
    
    
    <summary type="html">&lt;hr&gt;
&lt;h1 id=&quot;ğŸ§-Linux-å‘½ä»¤è§£æï¼ˆæ‚è®°ï¼‰â€”â€”-top-å‘½ä»¤è¯¦è§£&quot;&gt;&lt;a href=&quot;#ğŸ§-Linux-å‘½ä»¤è§£æï¼ˆæ‚è®°ï¼‰â€”â€”-top-å‘½ä»¤è¯¦è§£&quot; class=&quot;headerlink&quot; title=&quot;ğŸ§ Linux å‘½ä»¤è§£æï¼ˆæ‚è®°ï¼‰â€”â€” top å‘½ä»¤è¯¦è§£&quot;&gt;&lt;/a&gt;ğŸ§ Linux å‘½ä»¤è§£æï¼ˆæ‚è®°ï¼‰â€”â€” &lt;code&gt;top&lt;/code&gt; å‘½ä»¤è¯¦è§£&lt;/h1&gt;&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;top&lt;/code&gt; æ˜¯ Linux ç³»ç»Ÿä¸­æœ€å¸¸ç”¨çš„å®æ—¶æ€§èƒ½ç›‘æ§å·¥å…·ï¼Œç”¨äºåŠ¨æ€æŸ¥çœ‹ç³»ç»Ÿèµ„æºä½¿ç”¨æƒ…å†µå’Œè¿›ç¨‹çŠ¶æ€ã€‚æœ¬æ–‡å°†ç»“åˆçœŸå®è¾“å‡ºç¤ºä¾‹ï¼Œé€è¡Œé€åˆ—è§£æå…¶å«ä¹‰ï¼Œå¹¶æä¾›å®ç”¨è¯Šæ–­æŠ€å·§ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr&gt;</summary>
    
    
    
    
    <category term="linux" scheme="https://lyroom.github.io/tags/linux/"/>
    
    <category term="top" scheme="https://lyroom.github.io/tags/top/"/>
    
  </entry>
  
  <entry>
    <title>markdownå­¦ä¹ </title>
    <link href="https://lyroom.github.io/2025/09/16/markdown%E5%AD%A6%E4%B9%A0/"/>
    <id>https://lyroom.github.io/2025/09/16/markdown%E5%AD%A6%E4%B9%A0/</id>
    <published>2025-09-16T02:03:49.511Z</published>
    <updated>2025-09-16T02:03:49.511Z</updated>
    
    <content type="html"><![CDATA[<hr><h1 id="ğŸ“˜-Markdown-å­¦ä¹ ç¬”è®°"><a href="#ğŸ“˜-Markdown-å­¦ä¹ ç¬”è®°" class="headerlink" title="ğŸ“˜ Markdown å­¦ä¹ ç¬”è®°"></a>ğŸ“˜ Markdown å­¦ä¹ ç¬”è®°</h1><p>ç¨‹åºå‘˜å¿…é¡»è¦ä¼šçš„MarkDownè¯­æ³•ï¼Œè¿™æ˜¯å†™åšå®¢çš„åŸºçŸ³ï¼Œä¸‹é¢æˆ‘ä»¬æ¥ç®€çŸ­çš„å­¦ä¹ ä¸€ä¸‹è¯­æ³•ã€‚</p><span id="more"></span><h2 id="1ï¸âƒ£-æ ‡é¢˜"><a href="#1ï¸âƒ£-æ ‡é¢˜" class="headerlink" title="1ï¸âƒ£ æ ‡é¢˜"></a>1ï¸âƒ£ æ ‡é¢˜</h2><p>è¾“å…¥æ ¼å¼ï¼š</p><p><code>#ï¼ˆ*nï¼‰+ ç©ºæ ¼ + æ ‡é¢˜å†…å®¹</code></p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="code">`#`</span> ä¸€çº§æ ‡é¢˜  </span><br><span class="line"><span class="bullet">-</span> <span class="code">`##`</span> äºŒçº§æ ‡é¢˜  </span><br><span class="line"><span class="bullet">-</span> <span class="code">`###`</span> ä¸‰çº§æ ‡é¢˜  </span><br><span class="line"><span class="bullet">-</span> <span class="code">`####`</span> å››çº§æ ‡é¢˜  </span><br></pre></td></tr></table></figure><p>ç¤ºä¾‹ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="section"># ä¸€çº§æ ‡é¢˜</span></span><br><span class="line"><span class="section">## äºŒçº§æ ‡é¢˜</span></span><br><span class="line"><span class="section">### ä¸‰çº§æ ‡é¢˜</span></span><br></pre></td></tr></table></figure><hr><h2 id="2ï¸âƒ£-å­—ä½“"><a href="#2ï¸âƒ£-å­—ä½“" class="headerlink" title="2ï¸âƒ£ å­—ä½“"></a>2ï¸âƒ£ å­—ä½“</h2><ul><li><em>æ–œä½“</em>ï¼š<code>*æ–‡æœ¬*</code> â†’ <em>Hello World</em></li><li><strong>åŠ ç²—</strong>ï¼š<code>**æ–‡æœ¬**</code> â†’ <strong>Hello World</strong></li><li><em><strong>æ–œä½“åŠ ç²—</strong></em>ï¼š<code>***æ–‡æœ¬***</code> â†’ <em><strong>Hello World</strong></em></li><li><del>åˆ é™¤çº¿</del>ï¼š<code>~~æ–‡æœ¬~~</code> â†’ <del>Hello World</del></li></ul><hr><h2 id="3ï¸âƒ£-å¼•ç”¨"><a href="#3ï¸âƒ£-å¼•ç”¨" class="headerlink" title="3ï¸âƒ£ å¼•ç”¨"></a>3ï¸âƒ£ å¼•ç”¨</h2><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="quote">&gt; è¿™æ˜¯ä¸€æ®µå¼•ç”¨</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœï¼š</p><blockquote><p>å®‡å®™å¾ˆå¤§ï¼Œç”Ÿæ´»æ›´å¤§</p></blockquote><hr><h2 id="4ï¸âƒ£-åˆ†å‰²çº¿"><a href="#4ï¸âƒ£-åˆ†å‰²çº¿" class="headerlink" title="4ï¸âƒ£ åˆ†å‰²çº¿"></a>4ï¸âƒ£ åˆ†å‰²çº¿</h2><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">--- </span><br><span class="line"><span class="strong">**<span class="emphasis">*</span></span></span><br></pre></td></tr></table></figure><p>æ•ˆæœï¼š</p><hr><hr><hr><h2 id="5ï¸âƒ£-å›¾ç‰‡"><a href="#5ï¸âƒ£-å›¾ç‰‡" class="headerlink" title="5ï¸âƒ£ å›¾ç‰‡"></a>5ï¸âƒ£ å›¾ç‰‡</h2><p>è¯­æ³•ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">{% asset_img "span>" "<span class="string">å›¾ç‰‡æè¿°</span>" %}</span><br></pre></td></tr></table></figure><p>ç¤ºä¾‹ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">![<span class="string">dilireba</span>](<span class="link">markdownå­¦ä¹ /dilirebal.jpg</span>)</span><br></pre></td></tr></table></figure><hr><h2 id="6ï¸âƒ£-è¶…é“¾æ¥"><a href="#6ï¸âƒ£-è¶…é“¾æ¥" class="headerlink" title="6ï¸âƒ£ è¶…é“¾æ¥"></a>6ï¸âƒ£ è¶…é“¾æ¥</h2><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">ç‚¹å‡»è·³è½¬åˆ° Henry çš„åšå®¢</span>](<span class="link">https://lyroom.github.io/</span>)</span><br></pre></td></tr></table></figure><p>æ•ˆæœï¼š<br> <a href="https://lyroom.github.io/">ç‚¹å‡»è·³è½¬åˆ° Henry çš„åšå®¢</a></p><hr><h2 id="7ï¸âƒ£-åˆ—è¡¨"><a href="#7ï¸âƒ£-åˆ—è¡¨" class="headerlink" title="7ï¸âƒ£ åˆ—è¡¨"></a>7ï¸âƒ£ åˆ—è¡¨</h2><p>æœ‰åºåˆ—è¡¨ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">1.</span> A</span><br><span class="line"><span class="bullet">2.</span> B</span><br><span class="line"><span class="bullet">3.</span> C</span><br></pre></td></tr></table></figure><p>æ— åºåˆ—è¡¨ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> A</span><br><span class="line"><span class="bullet">-</span> B</span><br><span class="line"><span class="bullet">-</span> C</span><br></pre></td></tr></table></figure><p>æ•ˆæœï¼š</p><ol><li>A</li><li>B</li><li>C</li></ol><ul><li>A</li><li>B</li><li>C</li></ul><p>ä»»åŠ¡åˆ—è¡¨ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> [x] å·²å®Œæˆçš„ä»»åŠ¡ä¸€</span><br><span class="line"><span class="bullet">-</span> [ ] æœªå®Œæˆçš„ä»»åŠ¡äºŒ</span><br><span class="line"><span class="bullet">-</span> [ ] æœªå®Œæˆçš„ä»»åŠ¡ä¸‰</span><br></pre></td></tr></table></figure><p>æ•ˆæœï¼š</p><ul><li><input checked="" disabled="" type="checkbox"> å·²å®Œæˆçš„ä»»åŠ¡ä¸€</li><li><input disabled="" type="checkbox"> æœªå®Œæˆçš„ä»»åŠ¡äºŒ</li><li><input disabled="" type="checkbox"> æœªå®Œæˆçš„ä»»åŠ¡ä¸‰</li></ul><hr><h2 id="8ï¸âƒ£-è¡¨æ ¼"><a href="#8ï¸âƒ£-è¡¨æ ¼" class="headerlink" title="8ï¸âƒ£ è¡¨æ ¼"></a>8ï¸âƒ£ è¡¨æ ¼</h2><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">| åå­— | æ€§åˆ« | ç”Ÿæ—¥ |</span><br><span class="line">| ---- | ---- | ---- |</span><br><span class="line">| å¼ ä¸‰ | ç”·   | 2000 |</span><br><span class="line">| æå›› | å¥³   | 2001 |</span><br></pre></td></tr></table></figure><p>æ•ˆæœï¼š</p><table><thead><tr><th>åå­—</th><th>æ€§åˆ«</th><th>ç”Ÿæ—¥</th></tr></thead><tbody><tr><td>å¼ ä¸‰</td><td>ç”·</td><td>2000</td></tr><tr><td>æå››</td><td>å¥³</td><td>2001</td></tr></tbody></table><hr><h2 id="9ï¸âƒ£-ä»£ç å—"><a href="#9ï¸âƒ£-ä»£ç å—" class="headerlink" title="9ï¸âƒ£ ä»£ç å—"></a>9ï¸âƒ£ ä»£ç å—</h2><p>è¯­æ³•ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="code">```è¯­è¨€</span></span><br><span class="line"><span class="code">ä»£ç å†…å®¹</span></span><br><span class="line"><span class="code">```</span></span><br></pre></td></tr></table></figure><p>ç¤ºä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Hello</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String []args)</span>&#123;</span><br><span class="line">        System.out.print(<span class="string">&quot;Hello World&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="ğŸ”Ÿ-æ–‡ç« æˆªæ–­"><a href="#ğŸ”Ÿ-æ–‡ç« æˆªæ–­" class="headerlink" title="ğŸ”Ÿ æ–‡ç« æˆªæ–­"></a>ğŸ”Ÿ æ–‡ç« æˆªæ–­</h2><p>æœ‰äº›åšå®¢ç³»ç»Ÿæ”¯æŒ <code>&lt;!--more--&gt;</code> æ¥æˆªæ–­æ­£æ–‡ã€‚</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--more--&gt;</span><br></pre></td></tr></table></figure><hr><h2 id="1ï¸âƒ£1ï¸âƒ£-é«˜äº®æ–‡æœ¬"><a href="#1ï¸âƒ£1ï¸âƒ£-é«˜äº®æ–‡æœ¬" class="headerlink" title="1ï¸âƒ£1ï¸âƒ£ é«˜äº®æ–‡æœ¬"></a>1ï¸âƒ£1ï¸âƒ£ é«˜äº®æ–‡æœ¬</h2><p>è¯­æ³•ï¼ˆéƒ¨åˆ† Markdown æ¸²æŸ“å™¨æ”¯æŒï¼Œå¦‚ Typoraï¼‰ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">==é«˜äº®æ–‡æœ¬==</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">mark</span>&gt;</span></span>é«˜äº®æ–‡æœ¬<span class="language-xml"><span class="tag">&lt;/<span class="name">mark</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p>æ•ˆæœï¼š<br> &#x3D;&#x3D;è¿™å°±æ˜¯æ•ˆæœ&#x3D;&#x3D;<br> <mark>è¿™ä¹Ÿæ˜¯æ•ˆæœ</mark></p><hr><h2 id="1ï¸âƒ£2ï¸âƒ£-è¡Œå†…ä»£ç "><a href="#1ï¸âƒ£2ï¸âƒ£-è¡Œå†…ä»£ç " class="headerlink" title="1ï¸âƒ£2ï¸âƒ£ è¡Œå†…ä»£ç "></a>1ï¸âƒ£2ï¸âƒ£ è¡Œå†…ä»£ç </h2><p>è¯­æ³•ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">è¿™é‡Œæœ‰ä¸€æ®µ `ä»£ç ` åœ¨è¡Œå†…ã€‚</span><br></pre></td></tr></table></figure><p>æ•ˆæœï¼š</p><p>è¿™é‡Œæœ‰ä¸€æ®µ <code>ä»£ç </code> åœ¨è¡Œå†…ã€‚</p><hr><h2 id="1ï¸âƒ£3ï¸âƒ£-æ¢è¡Œ"><a href="#1ï¸âƒ£3ï¸âƒ£-æ¢è¡Œ" class="headerlink" title="1ï¸âƒ£3ï¸âƒ£ æ¢è¡Œ"></a>1ï¸âƒ£3ï¸âƒ£ æ¢è¡Œ</h2><p>è¯­æ³•ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1.è¡Œå°¾åŠ ä¸¤ä¸ªç©ºæ ¼[space][space]</span><br><span class="line">2.è¡Œå°¾åŠ &lt;br&gt;</span><br><span class="line">3.è¡Œå°¾åŠ åæ–œæ \</span><br></pre></td></tr></table></figure><h2 id="æ•ˆæœï¼šç¬¬ä¸€è¡Œç¬¬äºŒè¡Œç¬¬ä¸‰è¡Œ"><a href="#æ•ˆæœï¼šç¬¬ä¸€è¡Œç¬¬äºŒè¡Œç¬¬ä¸‰è¡Œ" class="headerlink" title="æ•ˆæœï¼šç¬¬ä¸€è¡Œç¬¬äºŒè¡Œç¬¬ä¸‰è¡Œ\"></a>æ•ˆæœï¼š<br>ç¬¬ä¸€è¡Œ<br>ç¬¬äºŒè¡Œ<br><br>ç¬¬ä¸‰è¡Œ\</h2><h2 id="1ï¸âƒ£4ï¸âƒ£-è„šæ³¨"><a href="#1ï¸âƒ£4ï¸âƒ£-è„šæ³¨" class="headerlink" title="1ï¸âƒ£4ï¸âƒ£ è„šæ³¨"></a>1ï¸âƒ£4ï¸âƒ£ è„šæ³¨</h2><p>è¯­æ³•ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">è„šæ³¨å†…å®¹</span>](<span class="link">#è„šæ³¨ &quot;æ ‡é¢˜&quot;</span>)</span><br></pre></td></tr></table></figure><p>æ•ˆæœï¼š</p><p><a href="#%E8%84%9A%E6%B3%A8" title="æ ‡é¢˜">è„šæ³¨å†…å®¹</a></p><hr><h2 id="1ï¸âƒ£5ï¸âƒ£-æ•°å­¦å…¬å¼"><a href="#1ï¸âƒ£5ï¸âƒ£-æ•°å­¦å…¬å¼" class="headerlink" title="1ï¸âƒ£5ï¸âƒ£ æ•°å­¦å…¬å¼"></a>1ï¸âƒ£5ï¸âƒ£ æ•°å­¦å…¬å¼</h2><p>è¯­æ³•ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$$</span><br><span class="line">å…¬å¼å†…å®¹</span><br><span class="line">$$</span><br></pre></td></tr></table></figure><p>æ•ˆæœï¼š</p><p>$$<br>å…¬å¼å†…å®¹<br>$$</p><hr><h2 id="1ï¸âƒ£6ï¸âƒ£-æµç¨‹å›¾"><a href="#1ï¸âƒ£6ï¸âƒ£-æµç¨‹å›¾" class="headerlink" title="1ï¸âƒ£6ï¸âƒ£ æµç¨‹å›¾"></a>1ï¸âƒ£6ï¸âƒ£ æµç¨‹å›¾</h2><p>è¯­æ³•ï¼š</p><h2 id="1ï¸âƒ£3ï¸âƒ£-å¸¸ç”¨ç¬¦å·-amp-Emoji"><a href="#1ï¸âƒ£3ï¸âƒ£-å¸¸ç”¨ç¬¦å·-amp-Emoji" class="headerlink" title="1ï¸âƒ£3ï¸âƒ£ å¸¸ç”¨ç¬¦å· &amp; Emoji"></a>1ï¸âƒ£3ï¸âƒ£ å¸¸ç”¨ç¬¦å· &amp; Emoji</h2><h3 id="ğŸ”¹-åˆ—è¡¨ç¬¦å·"><a href="#ğŸ”¹-åˆ—è¡¨ç¬¦å·" class="headerlink" title="ğŸ”¹ åˆ—è¡¨ç¬¦å·"></a>ğŸ”¹ åˆ—è¡¨ç¬¦å·</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">- ğŸ”¹ è“è‰²å°ç‚¹</span><br><span class="line">- ğŸ”¸ æ©™è‰²å°ç‚¹</span><br><span class="line">- ğŸ”º çº¢è‰²ä¸‰è§’</span><br><span class="line">- ğŸ”» è“è‰²ä¸‰è§’</span><br><span class="line">- â–¶ ç®­å¤´</span><br><span class="line">- â¡ å³ç®­å¤´</span><br><span class="line">- â¬… å·¦ç®­å¤´</span><br><span class="line">- â¬† ä¸Šç®­å¤´</span><br><span class="line">- â¬‡ ä¸‹ç®­å¤´</span><br></pre></td></tr></table></figure><p>æ•ˆæœï¼š</p><ul><li>ğŸ”¹ è“è‰²å°ç‚¹</li><li>ğŸ”¸ æ©™è‰²å°ç‚¹</li><li>ğŸ”º çº¢è‰²ä¸‰è§’</li><li>ğŸ”» è“è‰²ä¸‰è§’</li><li>â–¶ ç®­å¤´</li><li>â¡ å³ç®­å¤´</li><li>â¬… å·¦ç®­å¤´</li><li>â¬† ä¸Šç®­å¤´</li><li>â¬‡ ä¸‹ç®­å¤´</li></ul><hr><h3 id="âœ…-çŠ¶æ€ç¬¦å·"><a href="#âœ…-çŠ¶æ€ç¬¦å·" class="headerlink" title="âœ… çŠ¶æ€ç¬¦å·"></a>âœ… çŠ¶æ€ç¬¦å·</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">âœ… æˆåŠŸ</span><br><span class="line">âŒ å¤±è´¥</span><br><span class="line">âš ï¸ è­¦å‘Š</span><br><span class="line">â„¹ï¸ ä¿¡æ¯</span><br><span class="line">â“ ç–‘é—®</span><br></pre></td></tr></table></figure><p>æ•ˆæœï¼š<br> âœ… æˆåŠŸ<br> âŒ å¤±è´¥<br> âš ï¸ è­¦å‘Š<br> â„¹ï¸ ä¿¡æ¯<br> â“ ç–‘é—®</p><hr><h3 id="â­-é‡ç‚¹-x2F-è£…é¥°"><a href="#â­-é‡ç‚¹-x2F-è£…é¥°" class="headerlink" title="â­ é‡ç‚¹&#x2F;è£…é¥°"></a>â­ é‡ç‚¹&#x2F;è£…é¥°</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">â­ æ˜Ÿæ ‡</span><br><span class="line">âœ¨ é—ªå…‰</span><br><span class="line">ğŸ”¥ ç«ç„°</span><br><span class="line">ğŸ’¡ æƒ³æ³•</span><br><span class="line">ğŸ“Œ å›¾é’‰</span><br><span class="line">ğŸ“ å›å½¢é’ˆ</span><br><span class="line">ğŸ“ è®°äº‹</span><br><span class="line">ğŸ“‚ æ–‡ä»¶å¤¹</span><br><span class="line">ğŸ“¦ åŒ…è£¹</span><br></pre></td></tr></table></figure><p>æ•ˆæœï¼š<br> â­ æ˜Ÿæ ‡<br> âœ¨ é—ªå…‰<br> ğŸ”¥ ç«ç„°<br> ğŸ’¡ æƒ³æ³•<br> ğŸ“Œ å›¾é’‰<br> ğŸ“ å›å½¢é’ˆ<br> ğŸ“ è®°äº‹<br> ğŸ“‚ æ–‡ä»¶å¤¹<br> ğŸ“¦ åŒ…è£¹</p><hr><h3 id="â°-æ—¶é—´-x2F-è¿›åº¦"><a href="#â°-æ—¶é—´-x2F-è¿›åº¦" class="headerlink" title="â° æ—¶é—´&#x2F;è¿›åº¦"></a>â° æ—¶é—´&#x2F;è¿›åº¦</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">â° æ—¶é’Ÿ</span><br><span class="line">âŒ› æ²™æ¼</span><br><span class="line">ğŸ”„ å¾ªç¯</span><br><span class="line">ğŸš€ ç«ç®­</span><br></pre></td></tr></table></figure><p>æ•ˆæœï¼š<br> â° æ—¶é’Ÿ<br> âŒ› æ²™æ¼<br> ğŸ”„ å¾ªç¯<br> ğŸš€ ç«ç®­</p><hr><h3 id="ğŸ”—-å¸¸ç”¨å›¾æ ‡"><a href="#ğŸ”—-å¸¸ç”¨å›¾æ ‡" class="headerlink" title="ğŸ”— å¸¸ç”¨å›¾æ ‡"></a>ğŸ”— å¸¸ç”¨å›¾æ ‡</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">ğŸ’» ç”µè„‘</span><br><span class="line">ğŸ“± æ‰‹æœº</span><br><span class="line">ğŸŒ åœ°çƒ</span><br><span class="line">ğŸ”‘ é’¥åŒ™</span><br><span class="line">ğŸ”’ é”</span><br><span class="line">ğŸ”“ è§£é”</span><br><span class="line">âš™ï¸ é½¿è½®</span><br><span class="line">ğŸ–¥ï¸ æ˜¾ç¤ºå™¨</span><br></pre></td></tr></table></figure><p>æ•ˆæœï¼š<br> ğŸ’» ç”µè„‘<br> ğŸ“± æ‰‹æœº<br> ğŸŒ åœ°çƒ<br> ğŸ”‘ é’¥åŒ™<br> ğŸ”’ é”<br> ğŸ”“ è§£é”<br> âš™ï¸ é½¿è½®<br> ğŸ–¥ï¸ æ˜¾ç¤ºå™¨</p><hr><h2 id="ğŸ“Œ-å°æŠ€å·§"><a href="#ğŸ“Œ-å°æŠ€å·§" class="headerlink" title="ğŸ“Œ å°æŠ€å·§"></a>ğŸ“Œ å°æŠ€å·§</h2><ul><li>åœ¨ Markdown é‡Œç›´æ¥å¤åˆ¶ç²˜è´´ Emoji å³å¯ä½¿ç”¨ã€‚</li><li>å¯ä¸ <code>-</code> æˆ– <code>*</code> æ­é…ï¼Œåšæˆæ¼‚äº®çš„åˆ—è¡¨ã€‚</li><li>åœ¨æ ‡é¢˜é‡Œç”¨ Emojiï¼Œè®©å±‚æ¬¡æ›´æ¸…æ™°ï¼š</li></ul><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">## ğŸš€ å¿«é€Ÿå¼€å§‹</span></span><br><span class="line"><span class="section">## âš™ï¸ é…ç½®æ–¹æ³•</span></span><br><span class="line"><span class="section">## ğŸ“ ä½¿ç”¨ç¤ºä¾‹</span></span><br><span class="line"><span class="section">## â“ å¸¸è§é—®é¢˜</span></span><br></pre></td></tr></table></figure><h2 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h2><p><a href="https://www.runoob.com/markdown/md-tutorial.html">èœé¸Ÿmarkdown</a></p>]]></content>
    
    
    <summary type="html">&lt;hr&gt;
&lt;h1 id=&quot;ğŸ“˜-Markdown-å­¦ä¹ ç¬”è®°&quot;&gt;&lt;a href=&quot;#ğŸ“˜-Markdown-å­¦ä¹ ç¬”è®°&quot; class=&quot;headerlink&quot; title=&quot;ğŸ“˜ Markdown å­¦ä¹ ç¬”è®°&quot;&gt;&lt;/a&gt;ğŸ“˜ Markdown å­¦ä¹ ç¬”è®°&lt;/h1&gt;&lt;p&gt;ç¨‹åºå‘˜å¿…é¡»è¦ä¼šçš„MarkDownè¯­æ³•ï¼Œè¿™æ˜¯å†™åšå®¢çš„åŸºçŸ³ï¼Œä¸‹é¢æˆ‘ä»¬æ¥ç®€çŸ­çš„å­¦ä¹ ä¸€ä¸‹è¯­æ³•ã€‚&lt;/p&gt;</summary>
    
    
    
    
    <category term="Markdown" scheme="https://lyroom.github.io/tags/Markdown/"/>
    
  </entry>
  
  <entry>
    <title>linuxç¦»çº¿å®‰è£…è½¯ä»¶æ–¹æ³•</title>
    <link href="https://lyroom.github.io/2025/09/16/linux%E7%A6%BB%E7%BA%BF%E5%AE%89%E8%A3%85%E8%BD%AF%E4%BB%B6%E6%96%B9%E6%B3%95/"/>
    <id>https://lyroom.github.io/2025/09/16/linux%E7%A6%BB%E7%BA%BF%E5%AE%89%E8%A3%85%E8%BD%AF%E4%BB%B6%E6%96%B9%E6%B3%95/</id>
    <published>2025-09-15T16:02:05.000Z</published>
    <updated>2025-09-15T16:02:05.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ğŸ§-Linuxç¦»çº¿å®‰è£…è½¯ä»¶æ–¹æ³•"><a href="#ğŸ§-Linuxç¦»çº¿å®‰è£…è½¯ä»¶æ–¹æ³•" class="headerlink" title="ğŸ§ Linuxç¦»çº¿å®‰è£…è½¯ä»¶æ–¹æ³•"></a>ğŸ§ Linuxç¦»çº¿å®‰è£…è½¯ä»¶æ–¹æ³•</h1><p>åœ¨ç¦»çº¿ç¯å¢ƒä¸‹å®‰è£…è½¯ä»¶æ—¶ï¼Œä¸ä»…éœ€è¦ä¸‹è½½ä¸»åŒ…ï¼Œè¿˜è¦æŠŠä¾èµ–åŒ…ä¸€å¹¶ä¸‹è½½ã€‚è¿™é‡Œæä¾›ä¸¤ç§æƒ…å†µçš„å¤„ç†æ–¹æ³•ã€‚</p><span id="more"></span><h2 id="è·¨æ¶æ„å®‰è£…è½¯ä»¶æ–¹æ³•ï¼ˆä¾‹å¦‚åœ¨-x86-ä¸Šä¸‹è½½-arm64-åŒ…ï¼‰"><a href="#è·¨æ¶æ„å®‰è£…è½¯ä»¶æ–¹æ³•ï¼ˆä¾‹å¦‚åœ¨-x86-ä¸Šä¸‹è½½-arm64-åŒ…ï¼‰" class="headerlink" title="è·¨æ¶æ„å®‰è£…è½¯ä»¶æ–¹æ³•ï¼ˆä¾‹å¦‚åœ¨ x86 ä¸Šä¸‹è½½ arm64 åŒ…ï¼‰"></a>è·¨æ¶æ„å®‰è£…è½¯ä»¶æ–¹æ³•ï¼ˆä¾‹å¦‚åœ¨ x86 ä¸Šä¸‹è½½ arm64 åŒ…ï¼‰</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å…ˆæŸ¥çœ‹å‘è¡Œç‰ˆæœ¬é‡Œé¢æœ‰æ²¡æœ‰å¯¹åº”çš„æ¶æ„å’Œç‰ˆæœ¬</span></span><br><span class="line">apt list -a top</span><br><span class="line"><span class="comment"># æˆ–è€…</span></span><br><span class="line">apt-cache policy &lt;åŒ…å&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 1. æ·»åŠ ç›®æ ‡æ¶æ„æ”¯æŒ</span></span><br><span class="line">sudo dpkg --add-architecture arm64</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. å®‰è£…ä¾èµ–åˆ†æå·¥å…·</span></span><br><span class="line">sudo apt install apt-rdepends</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3. æŸ¥çœ‹å¯¹åº”åŒ…çš„ä¾èµ–</span></span><br><span class="line">apt-rdepends &lt;åŒ…å&gt;:arm64</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4. å»ºç«‹ç›®å½•å¹¶è¿›å…¥</span></span><br><span class="line"><span class="built_in">mkdir</span> dependsdep &amp;&amp; <span class="built_in">cd</span> dependsdep</span><br><span class="line"></span><br><span class="line"><span class="comment"># 5. æ‰¹é‡ä¸‹è½½ä¾èµ–åŒ…</span></span><br><span class="line">apt-rdepends &lt;åŒ…å&gt;:arm64 | grep -E -v <span class="string">&#x27;^ &#x27;</span> | xargs -I&#123;&#125; apt download &#123;&#125;:arm64</span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><h3 id="ğŸ“Œsudo-dpkg-add-architecture-arm64è¿™æ¡å‘½ä»¤æ˜¯æ°¸ä¹…åˆ‡æ¢è½¯ä»¶åŒ…ä¸‹è½½å—"><a href="#ğŸ“Œsudo-dpkg-add-architecture-arm64è¿™æ¡å‘½ä»¤æ˜¯æ°¸ä¹…åˆ‡æ¢è½¯ä»¶åŒ…ä¸‹è½½å—" class="headerlink" title="ğŸ“Œsudo dpkg --add-architecture arm64è¿™æ¡å‘½ä»¤æ˜¯æ°¸ä¹…åˆ‡æ¢è½¯ä»¶åŒ…ä¸‹è½½å—"></a><strong><code>ğŸ“Œsudo dpkg --add-architecture arm64</code>è¿™æ¡å‘½ä»¤æ˜¯æ°¸ä¹…åˆ‡æ¢è½¯ä»¶åŒ…ä¸‹è½½å—</strong></h3><p>ä¸æ˜¯çš„ï¼Œä¸æ˜¯æ°¸ä¹… <strong>åˆ‡æ¢</strong>ï¼Œè€Œæ˜¯æ°¸ä¹… <strong>å¢åŠ </strong> ä¸€ç§æ¶æ„æ”¯æŒã€‚</p><h4 id="ğŸ”¹è§£é‡Šä¸€ä¸‹"><a href="#ğŸ”¹è§£é‡Šä¸€ä¸‹" class="headerlink" title="ğŸ”¹è§£é‡Šä¸€ä¸‹"></a>ğŸ”¹è§£é‡Šä¸€ä¸‹</h4><ul><li><code>dpkg --print-architecture</code><br> æ˜¾ç¤ºç³»ç»Ÿçš„ã€Œä¸»æ¶æ„ã€ï¼ˆé€šå¸¸æ˜¯ <code>amd64</code>ï¼‰ã€‚</li><li><code>dpkg --print-foreign-architectures</code><br> æ˜¾ç¤ºç³»ç»Ÿé¢å¤–æ”¯æŒçš„ã€Œå¤–éƒ¨æ¶æ„ã€ã€‚</li></ul><p>å½“ä½ æ‰§è¡Œï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo dpkg --add-architecture arm64</span><br></pre></td></tr></table></figure><ul><li>ç³»ç»Ÿä¼šåœ¨ <code>/var/lib/dpkg/arch</code> é‡Œè®°å½• <code>arm64</code>ã€‚</li><li>ä»¥å <code>apt update</code> æ—¶ï¼Œå°±ä¼šåŒæ—¶è·å– <code>amd64</code> å’Œ <code>arm64</code> çš„è½¯ä»¶åŒ…ä¿¡æ¯ã€‚</li><li>è¿™æ ·ä½ å°±å¯ä»¥å®‰è£… <code>:arm64</code> åç¼€çš„åŒ…ï¼ˆå¦‚æœæºé‡Œæœ‰ï¼‰ã€‚</li></ul><h4 id="ğŸ”¹æ˜¯å¦â€œæ°¸ä¹…â€ï¼Ÿ"><a href="#ğŸ”¹æ˜¯å¦â€œæ°¸ä¹…â€ï¼Ÿ" class="headerlink" title="ğŸ”¹æ˜¯å¦â€œæ°¸ä¹…â€ï¼Ÿ"></a>ğŸ”¹æ˜¯å¦â€œæ°¸ä¹…â€ï¼Ÿ</h4><ul><li>âœ… æ°¸ä¹…æœ‰æ•ˆï¼ˆé™¤éä½ æ‰‹åŠ¨åˆ é™¤ï¼‰ã€‚</li><li>âŒ ä¸æ˜¯åˆ‡æ¢ä¸»æ¶æ„ï¼Œä¸»æ¶æ„ä»ç„¶æ˜¯ <code>amd64</code>ã€‚</li><li>ä½ å¯ä»¥éšæ—¶åˆ é™¤ï¼š</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo dpkg --remove-architecture arm64</span><br></pre></td></tr></table></figure><h4 id="ğŸ”¹ä¸¾ä¸ªä¾‹å­"><a href="#ğŸ”¹ä¸¾ä¸ªä¾‹å­" class="headerlink" title="ğŸ”¹ä¸¾ä¸ªä¾‹å­"></a>ğŸ”¹ä¸¾ä¸ªä¾‹å­</h4><ol><li><p>é»˜è®¤æƒ…å†µï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">dpkg --print-architecture</span><br><span class="line"><span class="comment"># amd64</span></span><br><span class="line"></span><br><span class="line">dpkg --print-foreign-architectures</span><br><span class="line"><span class="comment"># ï¼ˆç©ºï¼‰</span></span><br></pre></td></tr></table></figure></li><li><p>åŠ äº† arm64ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">sudo dpkg --add-architecture arm64</span><br><span class="line">sudo apt update</span><br><span class="line"></span><br><span class="line">dpkg --print-architecture</span><br><span class="line"><span class="comment"># amd64</span></span><br><span class="line"></span><br><span class="line">dpkg --print-foreign-architectures</span><br><span class="line"><span class="comment"># arm64</span></span><br></pre></td></tr></table></figure></li></ol><hr><h2 id="åŒæ¶æ„å®‰è£…è½¯ä»¶æ–¹æ³•ï¼ˆä¾‹å¦‚-x86-ä¸Šä¸‹è½½-x86-åŒ…ï¼‰"><a href="#åŒæ¶æ„å®‰è£…è½¯ä»¶æ–¹æ³•ï¼ˆä¾‹å¦‚-x86-ä¸Šä¸‹è½½-x86-åŒ…ï¼‰" class="headerlink" title="åŒæ¶æ„å®‰è£…è½¯ä»¶æ–¹æ³•ï¼ˆä¾‹å¦‚ x86 ä¸Šä¸‹è½½ x86 åŒ…ï¼‰"></a>åŒæ¶æ„å®‰è£…è½¯ä»¶æ–¹æ³•ï¼ˆä¾‹å¦‚ x86 ä¸Šä¸‹è½½ x86 åŒ…ï¼‰</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1. å®‰è£…ä¾èµ–åˆ†æå·¥å…·</span></span><br><span class="line">sudo apt install apt-rdepends</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. æŸ¥çœ‹åŒ…çš„ä¾èµ–</span></span><br><span class="line">apt-rdepends &lt;åŒ…å&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3. å»ºç«‹ç›®å½•å¹¶è¿›å…¥</span></span><br><span class="line"><span class="built_in">mkdir</span> dependsdep &amp;&amp; <span class="built_in">cd</span> dependsdep</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4. æ‰¹é‡ä¸‹è½½ä¾èµ–åŒ…</span></span><br><span class="line">apt-rdepends &lt;åŒ…å&gt; | grep -E -v <span class="string">&#x27;^ &#x27;</span> | xargs -I&#123;&#125; apt download &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 5. å®‰è£…ç›®æ ‡åŒ…ï¼ˆå‡è®¾åŒ…å·²ç»ä¸‹è½½åˆ°ä¸Šä¸€çº§ç›®å½•ï¼‰</span></span><br><span class="line">sudo dpkg -i ../&lt;åŒ…å&gt;*.deb</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;ğŸ§-Linuxç¦»çº¿å®‰è£…è½¯ä»¶æ–¹æ³•&quot;&gt;&lt;a href=&quot;#ğŸ§-Linuxç¦»çº¿å®‰è£…è½¯ä»¶æ–¹æ³•&quot; class=&quot;headerlink&quot; title=&quot;ğŸ§ Linuxç¦»çº¿å®‰è£…è½¯ä»¶æ–¹æ³•&quot;&gt;&lt;/a&gt;ğŸ§ Linuxç¦»çº¿å®‰è£…è½¯ä»¶æ–¹æ³•&lt;/h1&gt;&lt;p&gt;åœ¨ç¦»çº¿ç¯å¢ƒä¸‹å®‰è£…è½¯ä»¶æ—¶ï¼Œä¸ä»…éœ€è¦ä¸‹è½½ä¸»åŒ…ï¼Œè¿˜è¦æŠŠä¾èµ–åŒ…ä¸€å¹¶ä¸‹è½½ã€‚è¿™é‡Œæä¾›ä¸¤ç§æƒ…å†µçš„å¤„ç†æ–¹æ³•ã€‚&lt;/p&gt;</summary>
    
    
    
    
    <category term="linux" scheme="https://lyroom.github.io/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>æ„å»ºå·¥å…·é“¾æ·±åº¦è§£æï¼šGCCã€G++ã€CMakeã€Makeã€QMake å’Œ CMakeLists.txt</title>
    <link href="https://lyroom.github.io/2025/09/05/%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7%E9%93%BE%E6%B7%B1%E5%BA%A6%E8%A7%A3%E6%9E%90%EF%BC%9AGCC%E3%80%81G-%E3%80%81CMake%E3%80%81Make%E3%80%81QMake-%E5%92%8C-CMakeLists-txt/"/>
    <id>https://lyroom.github.io/2025/09/05/%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7%E9%93%BE%E6%B7%B1%E5%BA%A6%E8%A7%A3%E6%9E%90%EF%BC%9AGCC%E3%80%81G-%E3%80%81CMake%E3%80%81Make%E3%80%81QMake-%E5%92%8C-CMakeLists-txt/</id>
    <published>2025-09-05T03:35:00.000Z</published>
    <updated>2025-09-05T03:35:00.000Z</updated>
    
    <content type="html"><![CDATA[<p>  GCCã€G++ã€CMakeã€Makeã€QMake å’Œ CMakeLists.txtè¿™ä¸€ç³»åˆ—çš„åè¯å¯¹äºåˆå­¦c++çš„å­¦è€…æ¥è¯´æ˜¯ä¸æ˜¯å¬èµ·æ¥å¾ˆè¿·èŒ«ï¼Œä½†æ˜¯åˆåœ¨å¾ˆå¤šçš„é¡¹ç›®ä¸­é‡åˆ°è¿‡ï¼Ÿä»Šå¤©æˆ‘ä»¬æ¥ç®€çŸ­çš„ä»‹ç»ä¸€ä¸‹è¿™äº›ä¸“æœ‰åè¯ï¼Œå¹¶ä¸”ææ‡‚ä»–ä»¬ä¹‹é—´çš„å…³è”ã€‚</p><span id="more"></span><h2 id="1-GCC-GNU-Compiler-Collection"><a href="#1-GCC-GNU-Compiler-Collection" class="headerlink" title="1. GCC (GNU Compiler Collection)"></a>1. GCC (GNU Compiler Collection)</h2><ul><li><p><strong>æœ¬è´¨</strong>ï¼š<strong>ç¼–è¯‘å™¨</strong></p></li><li><p><strong>ä½œç”¨</strong>ï¼š</p><ul><li>å°†æºä»£ç ï¼ˆ.c&#x2F;.cppï¼‰è½¬æ¢ä¸ºæœºå™¨å¯æ‰§è¡Œæ–‡ä»¶</li><li>å¤„ç†ç¼–è¯‘è¿‡ç¨‹çš„4ä¸ªé˜¶æ®µï¼š<ol><li>é¢„å¤„ç†ï¼ˆå®å±•å¼€ã€å¤´æ–‡ä»¶åŒ…å«ï¼‰</li><li>ç¼–è¯‘ï¼ˆæºä»£ç  â†’ æ±‡ç¼–ä»£ç ï¼‰</li><li>æ±‡ç¼–ï¼ˆæ±‡ç¼–ä»£ç  â†’ æœºå™¨ç ï¼‰</li><li>é“¾æ¥ï¼ˆåˆå¹¶å¤šä¸ªç›®æ ‡æ–‡ä»¶å’Œåº“ï¼‰</li></ol></li></ul></li><li><p><strong>ç‰¹ç‚¹</strong>ï¼š</p><ul><li>æ”¯æŒå¤šç§è¯­è¨€ï¼ˆC, C++, Objective-C, Fortranç­‰ï¼‰</li><li>è·¨å¹³å°ï¼ˆLinux&#x2F;Windows&#x2F;macOSï¼‰</li><li>æä¾›ä¸°å¯Œçš„ç¼–è¯‘é€‰é¡¹ï¼ˆä¼˜åŒ–çº§åˆ«ã€è­¦å‘Šæ§åˆ¶ç­‰ï¼‰</li></ul></li><li><p><strong>ä½¿ç”¨ç¤ºä¾‹</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">gcc -c main.c -o main.o          <span class="comment"># ç¼–è¯‘Cæ–‡ä»¶</span></span><br><span class="line">g++ -Wall -O2 app.cpp -o app     <span class="comment"># ç¼–è¯‘C++æ–‡ä»¶å¹¶ä¼˜åŒ–</span></span><br></pre></td></tr></table></figure></li></ul><h2 id="2-G"><a href="#2-G" class="headerlink" title="2. G++"></a>2. G++</h2><ul><li><p><strong>æœ¬è´¨</strong>ï¼š<strong>C++å‰ç«¯ç¼–è¯‘å™¨</strong></p></li><li><p><strong>ä½œç”¨</strong>ï¼š</p><ul><li>GCCçš„C++ç‰¹å®šç‰ˆæœ¬</li><li>è‡ªåŠ¨é“¾æ¥C++æ ‡å‡†åº“ï¼ˆlibstdc++ï¼‰</li><li>å¤„ç†C++ç‰¹æœ‰çš„ç¼–è¯‘ç‰¹æ€§ï¼ˆæ¨¡æ¿ã€å¼‚å¸¸å¤„ç†ç­‰ï¼‰</li></ul></li><li><p><strong>ä¸GCCçš„å…³ç³»</strong>ï¼š</p><ul><li>G++æ˜¯GCCçš„ä¸€éƒ¨åˆ†ï¼Œä¸“æ³¨äºC++ç¼–è¯‘</li><li>ç›¸å½“äº<code>gcc -lstdc++</code>çš„å¿«æ·æ–¹å¼</li></ul></li><li><p><strong>ä½¿ç”¨ç¤ºä¾‹</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">g++ -std=c++17 main.cpp utils.cpp -o app</span><br></pre></td></tr></table></figure></li></ul><h2 id="3-Make"><a href="#3-Make" class="headerlink" title="3. Make"></a>3. Make</h2><ul><li><p><strong>æœ¬è´¨</strong>ï¼š<strong>æ„å»ºè‡ªåŠ¨åŒ–å·¥å…·</strong></p></li><li><p><strong>ä½œç”¨</strong>ï¼š</p><ul><li>æ ¹æ®Makefileè§„åˆ™ç®¡ç†æ„å»ºè¿‡ç¨‹</li><li>è‡ªåŠ¨æ£€æµ‹éœ€è¦é‡æ–°ç¼–è¯‘çš„æ–‡ä»¶ï¼ˆå¢é‡ç¼–è¯‘ï¼‰</li><li>æ‰§è¡Œç¼–è¯‘å‘½ä»¤ï¼ˆè°ƒç”¨gcc&#x2F;g++ï¼‰</li></ul></li><li><p><strong>æ ¸å¿ƒæ¦‚å¿µ</strong>ï¼š</p><ul><li>ç›®æ ‡ï¼ˆtargetsï¼‰</li><li>ä¾èµ–ï¼ˆdependenciesï¼‰</li><li>å‘½ä»¤ï¼ˆcommandsï¼‰</li></ul></li><li><p><strong>Makefileç¤ºä¾‹</strong>ï¼š</p><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">app: main.o utils.o</span></span><br><span class="line">    g++ main.o utils.o -o app</span><br><span class="line">    </span><br><span class="line"><span class="section">main.o: main.cpp</span></span><br><span class="line">    g++ -c main.cpp</span><br><span class="line">    </span><br><span class="line"><span class="section">utils.o: utils.cpp utils.h</span></span><br><span class="line">    g++ -c utils.cpp</span><br><span class="line">    </span><br><span class="line"><span class="section">clean:</span></span><br><span class="line">    rm -f *.o app</span><br></pre></td></tr></table></figure></li><li><p><strong>ç‰¹ç‚¹</strong>ï¼š</p><ul><li>ç®€å•ç›´æ¥</li><li>éœ€è¦æ‰‹åŠ¨ç®¡ç†ä¾èµ–å…³ç³»</li><li>è·¨å¹³å°æ€§æœ‰é™</li></ul></li></ul><h2 id="4-QMake"><a href="#4-QMake" class="headerlink" title="4. QMake"></a>4. QMake</h2><ul><li><p><strong>æœ¬è´¨</strong>ï¼š<strong>Qtä¸“ç”¨çš„æ„å»ºç³»ç»Ÿç”Ÿæˆå™¨</strong></p></li><li><p><strong>ä½œç”¨</strong>ï¼š</p><ul><li>è§£æ.proæ–‡ä»¶</li><li>ç”Ÿæˆå¹³å°ç‰¹å®šçš„æ„å»ºæ–‡ä»¶ï¼ˆMakefileæˆ–IDEé¡¹ç›®æ–‡ä»¶ï¼‰</li><li>è‡ªåŠ¨å¤„ç†Qtç‰¹æœ‰çš„æ„å»ºæ­¥éª¤ï¼ˆmoc, uic, rccï¼‰</li></ul></li><li><p><strong>.proæ–‡ä»¶ç¤ºä¾‹</strong>ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">QT += widgets</span><br><span class="line">TARGET = myapp</span><br><span class="line">SOURCES += main.cpp widget.cpp</span><br><span class="line">HEADERS += widget.h</span><br><span class="line">RESOURCES += app.qrc</span><br></pre></td></tr></table></figure></li><li><p><strong>ç‰¹ç‚¹</strong>ï¼š</p><ul><li>QtåŸç”Ÿæ”¯æŒ</li><li>ç®€å•æ˜“å­¦</li><li>è·¨å¹³å°ï¼ˆç”Ÿæˆä¸åŒå¹³å°çš„æ„å»ºæ–‡ä»¶ï¼‰</li><li>åŠŸèƒ½ç›¸å¯¹æœ‰é™ï¼ˆç›¸æ¯”CMakeï¼‰</li></ul></li></ul><h2 id="5-CMake"><a href="#5-CMake" class="headerlink" title="5. CMake"></a>5. CMake</h2><ul><li><p><strong>æœ¬è´¨</strong>ï¼š<strong>è·¨å¹³å°æ„å»ºç³»ç»Ÿç”Ÿæˆå™¨</strong></p></li><li><p><strong>ä½œç”¨</strong>ï¼š</p><ul><li>è§£æCMakeLists.txtæ–‡ä»¶</li><li>ç”Ÿæˆå¹³å°ç‰¹å®šçš„æ„å»ºç³»ç»Ÿæ–‡ä»¶ï¼š<ul><li>Linux&#x2F;macOS â†’ Makefile</li><li>Windows â†’ Visual Studioè§£å†³æ–¹æ¡ˆ(.sln)</li><li>Ninja â†’ build.ninja</li></ul></li><li>è‡ªåŠ¨æ£€æµ‹ç³»ç»Ÿç¯å¢ƒå’Œä¾èµ–åº“</li></ul></li><li><p><strong>æ ¸å¿ƒä¼˜åŠ¿</strong>ï¼š</p><ul><li>â€œWrite once, build everywhereâ€</li><li>æ”¯æŒå¤æ‚é¡¹ç›®ç»“æ„</li><li>å¼ºå¤§çš„ä¾èµ–ç®¡ç†</li><li>æ¨¡å—åŒ–ç³»ç»Ÿ</li></ul></li><li><p><strong>ä½¿ç”¨æµç¨‹</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> build &amp;&amp; <span class="built_in">cd</span> build</span><br><span class="line">cmake ..     <span class="comment"># ç”Ÿæˆæ„å»ºç³»ç»Ÿ</span></span><br><span class="line">make         <span class="comment"># æ‰§è¡Œæ„å»º</span></span><br></pre></td></tr></table></figure></li></ul><h2 id="6-CMakeLists-txt"><a href="#6-CMakeLists-txt" class="headerlink" title="6. CMakeLists.txt"></a>6. CMakeLists.txt</h2><ul><li><p><strong>æœ¬è´¨</strong>ï¼š<strong>CMakeçš„é…ç½®æ–‡ä»¶</strong></p></li><li><p><strong>ä½œç”¨</strong>ï¼š</p><ul><li>æè¿°é¡¹ç›®ç»“æ„å’Œæ„å»ºè§„åˆ™</li><li>å®šä¹‰ç¼–è¯‘ç›®æ ‡ï¼ˆå¯æ‰§è¡Œæ–‡ä»¶ã€åº“ï¼‰</li><li>æŒ‡å®šä¾èµ–å…³ç³»å’Œé“¾æ¥é€‰é¡¹</li></ul></li><li><p><strong>ç¤ºä¾‹</strong>ï¼š</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">cmake_minimum_required</span>(VERSION <span class="number">3.10</span>)</span><br><span class="line"><span class="keyword">project</span>(MyApp)</span><br><span class="line"></span><br><span class="line"><span class="keyword">add_executable</span>(myapp main.cpp)</span><br><span class="line"></span><br><span class="line"><span class="keyword">find_package</span>(Qt5 COMPONENTS Widgets REQUIRED)</span><br><span class="line"><span class="keyword">target_link_libraries</span>(myapp PRIVATE Qt5::Widgets)</span><br><span class="line"></span><br><span class="line"><span class="keyword">set_target_properties</span>(myapp PROPERTIES</span><br><span class="line">    CXX_STANDARD <span class="number">17</span></span><br><span class="line">    CXX_STANDARD_REQUIRED <span class="keyword">ON</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure></li></ul><h2 id="å·¥å…·é“¾å¯¹æ¯”åˆ†æ"><a href="#å·¥å…·é“¾å¯¹æ¯”åˆ†æ" class="headerlink" title="å·¥å…·é“¾å¯¹æ¯”åˆ†æ"></a>å·¥å…·é“¾å¯¹æ¯”åˆ†æ</h2><h3 id="å±‚çº§å…³ç³»"><a href="#å±‚çº§å…³ç³»" class="headerlink" title="å±‚çº§å…³ç³»"></a>å±‚çº§å…³ç³»</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[æºä»£ç ] </span><br><span class="line">  â”œâ”€â”€ [GCC/G++] â†’ ç›´æ¥ç¼–è¯‘ï¼ˆç®€å•é¡¹ç›®ï¼‰</span><br><span class="line">  â”œâ”€â”€ [Makefile] â†’ [make] â†’ è°ƒç”¨[GCC/G++]</span><br><span class="line">  â”œâ”€â”€ [.pro] â†’ [qmake] â†’ ç”Ÿæˆ[Makefile] â†’ [make] â†’ [GCC/G++]</span><br><span class="line">  â””â”€â”€ [CMakeLists.txt] â†’ [cmake] â†’ ç”Ÿæˆ[Makefile/VSé¡¹ç›®ç­‰] â†’ [make/MSBuild] â†’ [GCC/G++/MSVC]</span><br></pre></td></tr></table></figure><h3 id="åŠŸèƒ½å¯¹æ¯”è¡¨"><a href="#åŠŸèƒ½å¯¹æ¯”è¡¨" class="headerlink" title="åŠŸèƒ½å¯¹æ¯”è¡¨"></a>åŠŸèƒ½å¯¹æ¯”è¡¨</h3><table><thead><tr><th>å·¥å…·&#x2F;æ–‡ä»¶</th><th>ä¸»è¦ä½œç”¨</th><th>è¾“å…¥</th><th>è¾“å‡º</th><th>è·¨å¹³å°æ€§</th><th>å¤æ‚åº¦</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>GCC&#x2F;G++</td><td>ç¼–è¯‘æºä»£ç </td><td>æºä»£ç æ–‡ä»¶</td><td>ç›®æ ‡æ–‡ä»¶&#x2F;å¯æ‰§è¡Œæ–‡ä»¶</td><td>é«˜</td><td>ä½</td><td>ç®€å•ç¨‹åºã€å•æ–‡ä»¶ç¼–è¯‘</td></tr><tr><td>Make</td><td>æ‰§è¡Œæ„å»ºè§„åˆ™</td><td>Makefile</td><td>æ„å»ºäº§ç‰©</td><td>ä¸­</td><td>ä¸­</td><td>ä¸­å°å‹é¡¹ç›®</td></tr><tr><td>QMake</td><td>ç”ŸæˆQté¡¹ç›®æ„å»ºç³»ç»Ÿ</td><td>.proæ–‡ä»¶</td><td>Makefile&#x2F;é¡¹ç›®æ–‡ä»¶</td><td>é«˜</td><td>ä¸­</td><td>Qté¡¹ç›®</td></tr><tr><td>CMake</td><td>ç”Ÿæˆè·¨å¹³å°æ„å»ºç³»ç»Ÿ</td><td>CMakeLists.txt</td><td>æ„å»ºç³»ç»Ÿæ–‡ä»¶</td><td>æé«˜</td><td>é«˜</td><td>å¤§å‹è·¨å¹³å°é¡¹ç›®</td></tr><tr><td>CMakeLists.txt</td><td>æè¿°é¡¹ç›®æ„å»ºè§„åˆ™</td><td>æ— </td><td>æ— </td><td>æé«˜</td><td>é«˜</td><td>æ‰€æœ‰CMakeé¡¹ç›®</td></tr></tbody></table><h3 id="å·¥ä½œæµç¨‹å¯¹æ¯”"><a href="#å·¥ä½œæµç¨‹å¯¹æ¯”" class="headerlink" title="å·¥ä½œæµç¨‹å¯¹æ¯”"></a>å·¥ä½œæµç¨‹å¯¹æ¯”</h3><p><strong>ç®€å•é¡¹ç›®ï¼š</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">main.cpp â†’ g++ â†’ a.out</span><br></pre></td></tr></table></figure><p><strong>Makeé¡¹ç›®ï¼š</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">main.cpp + utils.cpp + Makefile â†’ make â†’ (g++) â†’ app</span><br></pre></td></tr></table></figure><p><strong>QMakeé¡¹ç›®ï¼š</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">main.cpp + widget.cpp + app.pro â†’ qmake â†’ Makefile â†’ make â†’ (g++) â†’ app</span><br></pre></td></tr></table></figure><p><strong>CMakeé¡¹ç›®ï¼š</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">main.cpp + utils.cpp + CMakeLists.txt â†’ cmake â†’ Makefile â†’ make â†’ (g++) â†’ app</span><br></pre></td></tr></table></figure><h2 id="ç°ä»£C-é¡¹ç›®æ¨èå·¥ä½œæµ"><a href="#ç°ä»£C-é¡¹ç›®æ¨èå·¥ä½œæµ" class="headerlink" title="ç°ä»£C++é¡¹ç›®æ¨èå·¥ä½œæµ"></a>ç°ä»£C++é¡¹ç›®æ¨èå·¥ä½œæµ</h2><h3 id="å¯¹äºQté¡¹ç›®"><a href="#å¯¹äºQté¡¹ç›®" class="headerlink" title="å¯¹äºQté¡¹ç›®"></a>å¯¹äºQté¡¹ç›®</h3><!-- <img src="/2025/09/05/%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7%E9%93%BE%E6%B7%B1%E5%BA%A6%E8%A7%A3%E6%9E%90%EF%BC%9AGCC%E3%80%81G-%E3%80%81CMake%E3%80%81Make%E3%80%81QMake-%E5%92%8C-CMakeLists-txt/process.png" class="" title="å…³ç³»"> --><center><img src="/2025/09/05/æ„å»ºå·¥å…·é“¾æ·±åº¦è§£æï¼šGCCã€G-ã€CMakeã€Makeã€QMake-å’Œ-CMakeLists-txt/å¤§çº².png"  alt="å¤§çº²" style="zoom: 70%;" /></center><h3 id="å…³é”®é…ç½®ç¤ºä¾‹"><a href="#å…³é”®é…ç½®ç¤ºä¾‹" class="headerlink" title="å…³é”®é…ç½®ç¤ºä¾‹"></a>å…³é”®é…ç½®ç¤ºä¾‹</h3><p><strong>Qté¡¹ç›®çš„CMakeLists.txtï¼š</strong></p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">cmake_minimum_required</span>(VERSION <span class="number">3.16</span>)</span><br><span class="line"><span class="keyword">project</span>(MyQtApp)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥æ‰¾Qtåº“</span></span><br><span class="line"><span class="keyword">find_package</span>(Qt6 COMPONENTS Widgets Network REQUIRED)</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºå¯æ‰§è¡Œæ–‡ä»¶</span></span><br><span class="line"><span class="keyword">add_executable</span>(myapp</span><br><span class="line">    main.cpp</span><br><span class="line">    mainwindow.cpp</span><br><span class="line">    resources.qrc</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment"># é“¾æ¥Qtåº“</span></span><br><span class="line"><span class="keyword">target_link_libraries</span>(myapp PRIVATE</span><br><span class="line">    Qt6::Widgets</span><br><span class="line">    Qt6::Network</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è‡ªåŠ¨å¤„ç†Qtå…ƒå¯¹è±¡ç³»ç»Ÿ</span></span><br><span class="line"><span class="keyword">set_target_properties</span>(myapp PROPERTIES</span><br><span class="line">    AUTOMOC <span class="keyword">ON</span></span><br><span class="line">    AUTOUIC <span class="keyword">ON</span></span><br><span class="line">    AUTORCC <span class="keyword">ON</span></span><br><span class="line">    CXX_STANDARD <span class="number">17</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®‰è£…è§„åˆ™</span></span><br><span class="line"><span class="keyword">install</span>(TARGETS myapp DESTINATION bin)</span><br></pre></td></tr></table></figure><h2 id="å¦‚ä½•é€‰æ‹©æ„å»ºå·¥å…·ï¼Ÿ"><a href="#å¦‚ä½•é€‰æ‹©æ„å»ºå·¥å…·ï¼Ÿ" class="headerlink" title="å¦‚ä½•é€‰æ‹©æ„å»ºå·¥å…·ï¼Ÿ"></a>å¦‚ä½•é€‰æ‹©æ„å»ºå·¥å…·ï¼Ÿ</h2><ol><li><p><strong>å°å‹å·¥å…·&#x2F;å¿«é€ŸåŸå‹</strong>ï¼š</p><ul><li>ç›´æ¥ä½¿ç”¨G++ç¼–è¯‘</li><li>æˆ–ç®€å•Makefile</li></ul></li><li><p><strong>Qtä¸“ç”¨é¡¹ç›®</strong>ï¼š</p><ul><li>ä¼ ç»Ÿï¼šQMake + .proæ–‡ä»¶</li><li>ç°ä»£ï¼šCMakeï¼ˆQtå®˜æ–¹æ¨èï¼‰</li></ul></li><li><p><strong>è·¨å¹³å°C++åº“&#x2F;åº”ç”¨</strong>ï¼š</p><ul><li>CMakeï¼ˆè¡Œä¸šæ ‡å‡†ï¼‰</li></ul></li><li><p><strong>å¤§å‹å¤æ‚ç³»ç»Ÿ</strong>ï¼š</p><ul><li>CMake + ç°ä»£æ„å»ºç³»ç»Ÿï¼ˆå¦‚Ninjaï¼‰</li></ul></li></ol><h2 id="å¸¸è§é—®é¢˜è§£ç­”"><a href="#å¸¸è§é—®é¢˜è§£ç­”" class="headerlink" title="å¸¸è§é—®é¢˜è§£ç­”"></a>å¸¸è§é—®é¢˜è§£ç­”</h2><p><strong>Qï¼šCMakeèƒ½å®Œå…¨æ›¿ä»£Makeå—ï¼Ÿ</strong><br>Aï¼šä¸å®Œå…¨ã€‚CMakeç”ŸæˆMakefileï¼Œç„¶åMakeæ‰§è¡Œæ„å»ºã€‚CMakeæ˜¯æ„å»ºç³»ç»Ÿç”Ÿæˆå™¨ï¼ŒMakeæ˜¯æ„å»ºæ‰§è¡Œå™¨ã€‚</p><p><strong>Qï¼šQMakeä¼šè¢«æ·˜æ±°å—ï¼Ÿ</strong><br>Aï¼šQtå®˜æ–¹å·²è½¬å‘CMakeä½œä¸ºé¦–é€‰æ„å»ºç³»ç»Ÿï¼Œä½†QMakeä»è¢«å¹¿æ³›ä½¿ç”¨ï¼Œç‰¹åˆ«æ˜¯ç»´æŠ¤æ—§é¡¹ç›®æ—¶ã€‚</p><p><strong>Qï¼šä¸ºä»€ä¹ˆéœ€è¦æ„å»ºç³»ç»Ÿï¼Ÿ</strong><br>Aï¼šå½“é¡¹ç›®å…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹æ—¶ï¼š</p><ul><li>å¤šä¸ªæºæ–‡ä»¶</li><li>å¤æ‚çš„ä¾èµ–å…³ç³»</li><li>éœ€è¦è·¨å¹³å°æ„å»º</li><li>åŒ…å«èµ„æºæ–‡ä»¶å’Œä»£ç ç”Ÿæˆ</li><li>éœ€è¦å®‰è£…è§„åˆ™å’Œæ‰“åŒ…</li></ul><p><strong>Qï¼šGCCå’ŒClangçš„åŒºåˆ«ï¼Ÿ</strong><br>Aï¼šä¸¤è€…éƒ½æ˜¯ç¼–è¯‘å™¨ï¼ŒGCCæ˜¯GNUé¡¹ç›®ï¼ŒClangæ˜¯LLVMé¡¹ç›®ã€‚Clangæœ‰æ›´å‹å¥½çš„é”™è¯¯ä¿¡æ¯ï¼Œæ›´å¿«çš„ç¼–è¯‘é€Ÿåº¦ï¼Œæ›´å¥½çš„C++æ ‡å‡†æ”¯æŒã€‚</p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><ul><li><strong>ç¼–è¯‘å™¨å±‚</strong>ï¼šGCC&#x2F;G++ è´Ÿè´£å°†æºä»£ç è½¬æ¢ä¸ºæœºå™¨ç </li><li><strong>æ„å»ºæ‰§è¡Œå±‚</strong>ï¼šMake è´Ÿè´£æ‰§è¡Œæ„å»ºè§„åˆ™</li><li><strong>æ„å»ºç³»ç»Ÿç”Ÿæˆå±‚</strong>ï¼š<ul><li>QMakeï¼šä¸“ä¸ºQtä¼˜åŒ–çš„æ„å»ºç³»ç»Ÿç”Ÿæˆå™¨</li><li>CMakeï¼šé€šç”¨è·¨å¹³å°æ„å»ºç³»ç»Ÿç”Ÿæˆå™¨</li></ul></li><li><strong>é…ç½®æ–‡ä»¶</strong>ï¼š<ul><li>.proï¼šQMakeçš„é…ç½®æ–‡ä»¶</li><li>CMakeLists.txtï¼šCMakeçš„é…ç½®æ–‡ä»¶</li></ul></li></ul><p>ç°ä»£C++å¼€å‘ä¸­ï¼Œ<strong>CMake + GCC&#x2F;Clang + Ninja</strong> å·²æˆä¸ºä¸»æµç»„åˆï¼Œæä¾›æœ€é«˜æ•ˆã€æœ€çµæ´»çš„æ„å»ºè§£å†³æ–¹æ¡ˆã€‚å¯¹äºQté¡¹ç›®ï¼Œè™½ç„¶QMakeä»å¯ç”¨ï¼Œä½†CMakeå·²æˆä¸ºå®˜æ–¹æ¨èçš„é€‰æ‹©ï¼Œç‰¹åˆ«æ˜¯æ–°é¡¹ç›®ã€‚</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;  GCCã€G++ã€CMakeã€Makeã€QMake å’Œ CMakeLists.txtè¿™ä¸€ç³»åˆ—çš„åè¯å¯¹äºåˆå­¦c++çš„å­¦è€…æ¥è¯´æ˜¯ä¸æ˜¯å¬èµ·æ¥å¾ˆè¿·èŒ«ï¼Œä½†æ˜¯åˆåœ¨å¾ˆå¤šçš„é¡¹ç›®ä¸­é‡åˆ°è¿‡ï¼Ÿä»Šå¤©æˆ‘ä»¬æ¥ç®€çŸ­çš„ä»‹ç»ä¸€ä¸‹è¿™äº›ä¸“æœ‰åè¯ï¼Œå¹¶ä¸”ææ‡‚ä»–ä»¬ä¹‹é—´çš„å…³è”ã€‚&lt;/p&gt;</summary>
    
    
    
    
    <category term="c/c++" scheme="https://lyroom.github.io/tags/c-c/"/>
    
    <category term="GCC/G++" scheme="https://lyroom.github.io/tags/GCC-G/"/>
    
    <category term="Make" scheme="https://lyroom.github.io/tags/Make/"/>
    
    <category term="QMake" scheme="https://lyroom.github.io/tags/QMake/"/>
    
    <category term="CMake" scheme="https://lyroom.github.io/tags/CMake/"/>
    
    <category term="CMakeLists" scheme="https://lyroom.github.io/tags/CMakeLists/"/>
    
  </entry>
  
  <entry>
    <title>ubuntuè™šæ‹Ÿæœºå®‰è£…vmtoolsé‡åˆ°çš„é—®é¢˜</title>
    <link href="https://lyroom.github.io/2025/09/04/ubuntu%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%AE%89%E8%A3%85vmtools%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98/"/>
    <id>https://lyroom.github.io/2025/09/04/ubuntu%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%AE%89%E8%A3%85vmtools%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98/</id>
    <published>2025-09-03T20:02:02.000Z</published>
    <updated>2025-09-03T20:02:02.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id=""><a href="#" class="headerlink" title=""></a></h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get autoremove open-vm-tools</span><br><span class="line">sudo apt-get install open-vm-tools</span><br><span class="line">sudo apt-get install open-vm-tools-desktop</span><br></pre></td></tr></table></figure><p>done!</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;&quot;&gt;&lt;a href=&quot;#&quot; class=&quot;headerlink&quot; title=&quot;&quot;&gt;&lt;/a&gt;&lt;/h1&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;li</summary>
      
    
    
    
    
    <category term="VMware" scheme="https://lyroom.github.io/tags/VMware/"/>
    
    <category term="Ubuntu" scheme="https://lyroom.github.io/tags/Ubuntu/"/>
    
  </entry>
  
  <entry>
    <title>c++ç»§æ‰¿ä¸­çš„çˆ¶å­çº è‘›</title>
    <link href="https://lyroom.github.io/2024/10/23/c-%E7%BB%A7%E6%89%BF%E4%B8%AD%E7%9A%84%E7%88%B6%E5%AD%90%E7%BA%A0%E8%91%9B/"/>
    <id>https://lyroom.github.io/2024/10/23/c-%E7%BB%A7%E6%89%BF%E4%B8%AD%E7%9A%84%E7%88%B6%E5%AD%90%E7%BA%A0%E8%91%9B/</id>
    <published>2024-10-23T14:42:31.000Z</published>
    <updated>2024-10-23T14:42:31.000Z</updated>
    
    <content type="html"><![CDATA[<p>æƒ³å¿…å„ä½å¯¹äºé¢å‘å¯¹è±¡éƒ½å·²äº†ç„¶äºèƒ¸äº†å§ï¼Œä»Šå¤©æˆ‘å¶ç„¶é—´é‡åˆ°äº†ä¸€ä¸ªé¢è¯•é¢˜ï¼Œæ˜¯å…³äºç»§æ‰¿æ–¹é¢çš„ï¼Œè›®æœ‰ä¸é”™çš„ï¼Œé‚€è¯·å„ä½æ¥æ¢è®¨ä¸€ä¸‹ã€‚</p><span id="more"></span><p>å…ˆçœ‹ä¸‹é¢ä¸€æ®µä»£ç ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Base</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="type">int</span> a = <span class="number">1</span>;</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">print</span><span class="params">(<span class="type">int</span> n = <span class="number">2</span>)</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Derive</span>:<span class="keyword">public</span> Base&#123;</span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        <span class="type">int</span> b=<span class="number">3</span>;</span><br><span class="line">        <span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">print</span><span class="params">(<span class="type">int</span> n = <span class="number">10</span>)</span><span class="keyword">override</span> </span>&#123;</span><br><span class="line">            std::cout &lt;&lt; <span class="string">&quot;Derive :&quot;</span>&lt;&lt;b + n &lt;&lt; std::endl;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;;</span><br><span class="line"> <span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">     Base *arr = <span class="keyword">new</span> Derive[<span class="number">10</span>];</span><br><span class="line">     arr[<span class="number">7</span>].<span class="built_in">print</span>();</span><br><span class="line">     <span class="keyword">delete</span>[] arr;</span><br><span class="line"></span><br><span class="line">     Base *ptr = <span class="keyword">new</span> <span class="built_in">Derive</span>();</span><br><span class="line">     ptr-&gt;<span class="built_in">print</span>();</span><br><span class="line">     <span class="keyword">delete</span> ptr;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½ å¯ä»¥å°è¯•åˆ†æä¸€ä¸‹ï¼Œè¿™æ®µä»£ç çš„ç»“æœå—ï¼Ÿæˆ‘ä»¬å¯ä»¥å›é¡¾ä¸€ä¸‹<a href="https://lyroom.github.io/2024/10/16/C-%E6%A0%B8%E5%BF%83%E7%BC%96%E7%A8%8B/#4-6-%E7%BB%A7%E6%89%BF:~:text=0%3B%0A%7D-,4.6%20%E7%BB%A7%E6%89%BF,-%E7%BB%A7%E6%89%BF%E6%98%AF%E9%9D%A2%E5%90%91">ç»§æ‰¿</a>çš„æ¦‚å¿µ<br>è¿è¡Œè¿™æ®µä»£ç ä¹‹åæˆ‘ä»¬å‘ç°ï¼Œç»“æœå¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mingw64ï¼š</span><br><span class="line">    Derive :5</span><br><span class="line">    Derive :5</span><br><span class="line">mingw32ï¼š</span><br><span class="line">    exited with code -1073741819</span><br></pre></td></tr></table></figure><p>ä¸ºä»€ä¹ˆä¼šå‡ºç°è¿™ç§æƒ…å†µå‘¢ï¼Ÿæˆ‘ä»¬ä¸€æ­¥æ­¥æ¥åˆ†æã€‚</p><h3 id="ä»£ç å…³é”®ç‚¹è§£é‡Š"><a href="#ä»£ç å…³é”®ç‚¹è§£é‡Š" class="headerlink" title="ä»£ç å…³é”®ç‚¹è§£é‡Š"></a>ä»£ç å…³é”®ç‚¹è§£é‡Š</h3><ol><li><p><strong>ç±»ç»“æ„</strong>ï¼š</p><ul><li><code>Base</code>ç±»ï¼šåŒ…å«æˆå‘˜å˜é‡<code>a = 1</code>ï¼Œä»¥åŠè™šå‡½æ•°<code>print(int n = 2)</code>ï¼Œé»˜è®¤å‚æ•°ä¸º2ã€‚å‡½æ•°è¾“å‡º<code>&quot;Base:&quot; &lt;&lt; a + n</code>ã€‚</li><li><code>Derive</code>ç±»ï¼šç»§æ‰¿è‡ª<code>Base</code>ï¼Œæ·»åŠ æˆå‘˜å˜é‡<code>b = 3</code>ï¼Œå¹¶è¦†ç›–è™šå‡½æ•°<code>print(int n = 10)</code>ï¼Œé»˜è®¤å‚æ•°æ”¹ä¸º10ã€‚å‡½æ•°è¾“å‡º<code>&quot;Derive:&quot; &lt;&lt; b + n</code>ã€‚</li><li>è™šå‡½æ•°ï¼ˆ<code>virtual</code>ï¼‰æ”¯æŒè¿è¡Œæ—¶å¤šæ€ï¼šé€šè¿‡åŸºç±»æŒ‡é’ˆè°ƒç”¨æ—¶ï¼Œå®é™…æ‰§è¡Œæ´¾ç”Ÿç±»çš„è¦†ç›–å‡½æ•°ï¼ˆåŠ¨æ€ç»‘å®šï¼‰ã€‚</li></ul></li><li><p><strong>ç»“æ„ä½“ï¼ˆç±»ï¼‰åœ¨å†…å­˜ä¸­çš„å­˜æ”¾è§„åˆ™</strong></p><p>â€‹ä¸ºäº†æ›´æ–¹ä¾¿çš„è®¿é—®ç»“æ„ä½“å¯¹è±¡ä¸­çš„æˆå‘˜å˜é‡ï¼Œé€šå¸¸éœ€è¦åœ¨å†…å­˜ä¸­<code>å¯¹é½å­˜å‚¨</code>ï¼Œæ‰€ä»¥é€šå¸¸éœ€è¦ç©ºä¸€æ®µå†…å­˜ï¼Œè¿™ä¾¿æ˜¯<code>å¡«å……</code>ã€‚æ‰€ä»¥ä¸€ä¸ªç»“æ„ä½“å¯¹è±¡åœ¨å†…å­˜ä¸­çš„<code>å­˜å‚¨åŸåˆ™</code>æ˜¯ï¼š</p><blockquote><p>ç»“æ„ä½“çš„èµ·å§‹åœ°å€ &#x3D; æœ€å¤§æˆå‘˜å¯¹é½å€¼çš„æ•´æ•°å€</p><p>æ¯ä¸ªæˆå‘˜çš„èµ·å§‹åœ°å€èƒ½å¤Ÿè¢«è¯¥æˆå‘˜å¤§å°æ•´é™¤</p><p>ç»“æ„ä½“çš„å¤§å° &#x3D; æœ€å¤§æˆå‘˜çš„æ•´æ•°å€</p></blockquote><p><strong><code>åœ¨64ä½ç³»ç»Ÿä¸­ï¼Œæ¯ä¸ªå†…å­˜å•å…ƒçš„å¤§å°é€šå¸¸ä¸º64bå³8Bï¼Œæ‰€ä»¥ä¸€èˆ¬æŒ‰ç…§8Bå¯¹é½ï¼ŒæŒ‡é’ˆå¤§å°é€šå¸¸ä¹Ÿä¸º8B</code></strong></p><p><strong><code>åœ¨32ä½ç³»ç»Ÿä¸­ï¼Œæ¯ä¸ªå†…å­˜å•å…ƒçš„å¤§å°é€šå¸¸æ—¶32bå³4Bï¼Œæ‰€ä»¥ä¸€èˆ¬æŒ‰ç…§4Bå¯¹é½ï¼ŒæŒ‡é’ˆå¤§å°é€šå¸¸ä¹Ÿä¸º4B</code></strong></p><p>â€‹æŒ‰ç…§ä¸Šé¢çš„åŸåˆ™ï¼Œå¯ä»¥çŸ¥é“ä¸Šè¿°çˆ¶å­ç±»å¯¹è±¡åœ¨ä¸åŒç³»ç»Ÿä¸­ï¼Œå†…å­˜çš„å­˜å‚¨æ–¹å¼ï¼š</p><center><img src="/2024/10/23/c-ç»§æ‰¿ä¸­çš„çˆ¶å­çº è‘›/å†…å­˜.png"  style="zoom:67%;" /></center></li><li><p><strong>é»˜è®¤å‚æ•°çš„ç»‘å®šè§„åˆ™</strong>ï¼š</p><ul><li>é»˜è®¤å‚æ•°æ˜¯<strong>é™æ€ç»‘å®š</strong>ï¼ˆåœ¨ç¼–è¯‘æ—¶åŸºäºæŒ‡é’ˆæˆ–å¼•ç”¨ç±»å‹ç¡®å®šï¼‰ï¼Œè€ŒéåŠ¨æ€ç»‘å®šã€‚</li><li>å½“é€šè¿‡åŸºç±»æŒ‡é’ˆè°ƒç”¨è™šå‡½æ•°æ—¶ï¼š<ul><li>å‡½æ•°å®ç°ï¼ˆå‡½æ•°ä½“ï¼‰ä½¿ç”¨æ´¾ç”Ÿç±»çš„ç‰ˆæœ¬ï¼ˆåŠ¨æ€ç»‘å®šï¼‰ã€‚</li><li>é»˜è®¤å‚æ•°å€¼ä½¿ç”¨åŸºç±»å®šä¹‰çš„é»˜è®¤å€¼ï¼ˆé™æ€ç»‘å®šï¼‰ï¼Œå¿½ç•¥æ´¾ç”Ÿç±»çš„é»˜è®¤å€¼ï¼Œæ‰€ä»¥è¿ç®—æ—¶<code>nçš„å€¼å§‹ç»ˆä¸º2</code>ã€‚</li></ul></li></ul></li><li><p><strong>æ•°ç»„åˆ†é…é—®é¢˜</strong>ï¼š</p><ul><li><code>Base* arr = new Derive[10]</code>ï¼šè¿™é‡Œåˆ†é…äº†ä¸€ä¸ªåŒ…å«10ä¸ª<code>Derive</code>å¯¹è±¡çš„æ•°ç»„ï¼Œä½†ç”¨<code>Base*</code>æŒ‡é’ˆæŒ‡å‘å®ƒã€‚</li></ul> <center>  <img src="/2024/10/23/c-ç»§æ‰¿ä¸­çš„çˆ¶å­çº è‘›/5.png"  style="zoom:100%;" /> </center><p>æˆ‘ä»¬å¸Œæœ›æƒ…å†µå¦‚ä¸‹ï¼š</p> <center>  <img src="/2024/10/23/c-ç»§æ‰¿ä¸­çš„çˆ¶å­çº è‘›/4.png"  style="zoom:100%;" /> </center><p>ä½†å®é™…ä¸Šå‘¢ï¼Ÿï¼Ÿï¼Ÿ</p></li></ol><h3 id="è¾“å‡ºç»“æœåˆ†æ"><a href="#è¾“å‡ºç»“æœåˆ†æ" class="headerlink" title="è¾“å‡ºç»“æœåˆ†æ"></a>è¾“å‡ºç»“æœåˆ†æ</h3><h4 id="1-ç¬¬ä¸€æ¬¡è°ƒç”¨ï¼šarr-7-print"><a href="#1-ç¬¬ä¸€æ¬¡è°ƒç”¨ï¼šarr-7-print" class="headerlink" title="1. ç¬¬ä¸€æ¬¡è°ƒç”¨ï¼šarr[7].print()"></a>1. ç¬¬ä¸€æ¬¡è°ƒç”¨ï¼š<code>arr[7].print()</code></h4><ul><li><p><strong>è¾“å‡ºç»“æœ</strong>ï¼š</p><p><strong>mingw64</strong>æ„å»ºè¿è¡Œæ—¶ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Derive :5</span><br></pre></td></tr></table></figure><p><strong>mingw32</strong>æ„å»ºè¿è¡Œæ—¶:  </p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">exited with code -1073741819</span><br></pre></td></tr></table></figure><ul><li><p><strong>ä¸¤ä¸ªç¼–è¯‘å™¨ä¸ºå•¥è¾“å‡ºç»“æœä¸åŒï¼Ÿ</strong>ï¼š</p><p>â€‹<strong>å…³é”®åœ¨äºarr[7] æœ‰æ²¡æœ‰æŒ‡å‘[Derive7]</strong></p><ul><li><p>mingw64æ„å»ºæ—¶ï¼š</p><center><img src="/2024/10/23/c-ç»§æ‰¿ä¸­çš„çˆ¶å­çº è‘›/1.png"  style="zoom:100%;" /></center><p>è™½ç„¶Baseå’ŒDeriveå¤§å°ä¸åŒï¼Œä½†æ˜¯ç”±äº<code>å†…å­˜å¯¹é½</code>ä½¿å¾—Baseçš„å¤§å°å’ŒDeriveå¤§å°ç›¸åŒï¼Œé˜´å·®é˜³é”™çš„ä½¿å¾—arr[7]æŒ‡å‘äº†Derive[7]çš„ä½ç½®ï¼Œä½¿å¾—å¯ä»¥è°ƒç”¨Deriveçš„printå‡½æ•°ï¼Œè¾“å‡ºä¸º5ï¼›</p></li><li><p>mingw32æ„å»ºæ—¶ï¼š</p></li></ul><center> <img src="/2024/10/23/c-ç»§æ‰¿ä¸­çš„çˆ¶å­çº è‘›/2.png"  style="zoom:100%;" /></center><p>   æŒ‡é’ˆç®—æœ¯é”™è¯¯ï¼š<code>arr</code>æŒ‡å‘<code>Derive[10]</code>æ•°ç»„ï¼Œä½†<code>arr[7]</code>åŸºäº<code>sizeof(Base)</code>è®¡ç®—åœ°å€ï¼ˆä¾‹å¦‚ï¼Œåœ¨32ä½ç³»ç»Ÿä¸­ï¼Œ<code>arr + 7 * 8 = arr + 56</code>ï¼‰ã€‚å®é™…ç¬¬7ä¸ª<code>Derive</code>å¯¹è±¡ä½äº<code>arr + 7 * 12 = arr + 84</code>ï¼ˆå‡è®¾<code>sizeof(Derive)=12</code>ï¼‰ã€‚å› æ­¤ï¼Œ<code>arr[7]</code>æŒ‡å‘æ— æ•ˆå†…å­˜ã€‚æ‰€ä»¥è¾“å‡ºé”™è¯¯å€¼ã€‚</p></li><li><p><strong>ä¸ºä»€ä¹ˆä¸æ˜¯å¤šæ€è¾“å‡ºï¼Ÿ</strong> å³ä½¿å¿½ç•¥æŒ‡é’ˆé”™è¯¯ï¼Œç†è®ºä¸Šï¼š</p><ul><li>å‡½æ•°è°ƒç”¨åº”ä½¿ç”¨<code>Derive::print</code>å®ç°ï¼ˆè™šå‡½æ•°åŠ¨æ€ç»‘å®šï¼‰ã€‚</li><li>ä½†é»˜è®¤å‚æ•°é™æ€ç»‘å®šä¸º<code>Base::print</code>çš„<code>n=2</code>ï¼ˆå› ä¸º<code>arr</code>ç±»å‹æ˜¯<code>Base*</code>ï¼‰ã€‚</li><li>è¾“å‡ºåº”ä¸º<code>&quot;Derive:&quot; &lt;&lt; b + 2</code>ï¼ˆå³<code>Derive:5</code>ï¼‰ï¼Œä½†ç”±äºå¯¹è±¡åœ°å€é”™è¯¯ï¼Œ<code>b</code>çš„å€¼å¯èƒ½æ— æ•ˆæˆ–å–è‡ªé”™è¯¯å†…å­˜ã€‚</li></ul></li></ul></li></ul><h4 id="2-ç¬¬äºŒæ¬¡è°ƒç”¨ï¼šptr-gt-print"><a href="#2-ç¬¬äºŒæ¬¡è°ƒç”¨ï¼šptr-gt-print" class="headerlink" title="2. ç¬¬äºŒæ¬¡è°ƒç”¨ï¼šptr-&gt;print()"></a>2. ç¬¬äºŒæ¬¡è°ƒç”¨ï¼š<code>ptr-&gt;print()</code></h4><ul><li><strong>è¾“å‡ºç»“æœ</strong>ï¼š<code>Derive:5</code>  <ul><li>åŸå› ï¼š<ul><li><code>ptr</code>æŒ‡å‘ä¸€ä¸ªæœ‰æ•ˆçš„<code>Derive</code>å¯¹è±¡ï¼ˆ<code>new Derive()</code>ï¼‰ï¼Œå¤šæ€æ­£ç¡®ï¼š<code>ptr</code>ç±»å‹æ˜¯<code>Base*</code>ï¼Œä½†å¯¹è±¡æ˜¯<code>Derive</code>ï¼Œå› æ­¤è™šå‡½æ•°è°ƒç”¨<code>Derive::print</code>å®ç°ï¼ˆåŠ¨æ€ç»‘å®šï¼‰ã€‚</li><li>é»˜è®¤å‚æ•°é™æ€ç»‘å®šï¼šè°ƒç”¨<code>ptr-&gt;print()</code>æœªæä¾›å‚æ•°ï¼Œç¼–è¯‘å™¨åŸºäº<code>ptr</code>çš„é™æ€ç±»å‹ï¼ˆ<code>Base*</code>ï¼‰ä½¿ç”¨<code>Base::print</code>çš„é»˜è®¤å€¼<code>n=2</code>ï¼ˆå¿½ç•¥<code>Derive::print</code>çš„<code>n=10</code>ï¼‰ã€‚</li><li>å› æ­¤ï¼Œå®é™…è°ƒç”¨<code>Derive::print(2)</code>ï¼š<ul><li><code>b + n = 3 + 2 = 5</code>ã€‚</li><li>è¾“å‡ºï¼š<code>&quot;Derive:5&quot;</code>ã€‚</li></ul></li></ul></li><li>å…³é”®åŸç†ï¼šé»˜è®¤å‚æ•°åœ¨ç¼–è¯‘æ—¶ç¡®å®šï¼ŒåŸºäºæŒ‡é’ˆç±»å‹ï¼ˆ<code>Base*</code>ï¼‰ï¼Œè€Œå‡½æ•°ä½“åœ¨è¿è¡Œæ—¶ç¡®å®šï¼ŒåŸºäºå¯¹è±¡ç±»å‹ï¼ˆ<code>Derive</code>ï¼‰ã€‚</li></ul></li></ul>]]></content>
    
    
    <summary type="html">&lt;p&gt;æƒ³å¿…å„ä½å¯¹äºé¢å‘å¯¹è±¡éƒ½å·²äº†ç„¶äºèƒ¸äº†å§ï¼Œä»Šå¤©æˆ‘å¶ç„¶é—´é‡åˆ°äº†ä¸€ä¸ªé¢è¯•é¢˜ï¼Œæ˜¯å…³äºç»§æ‰¿æ–¹é¢çš„ï¼Œè›®æœ‰ä¸é”™çš„ï¼Œé‚€è¯·å„ä½æ¥æ¢è®¨ä¸€ä¸‹ã€‚&lt;/p&gt;</summary>
    
    
    
    
    <category term="c++" scheme="https://lyroom.github.io/tags/c/"/>
    
    <category term="ç»§æ‰¿" scheme="https://lyroom.github.io/tags/%E7%BB%A7%E6%89%BF/"/>
    
    <category term="å¤šæ€" scheme="https://lyroom.github.io/tags/%E5%A4%9A%E6%80%81/"/>
    
    <category term="è™šå‡½æ•°" scheme="https://lyroom.github.io/tags/%E8%99%9A%E5%87%BD%E6%95%B0/"/>
    
    <category term="è™šå‡½æ•°è¡¨" scheme="https://lyroom.github.io/tags/%E8%99%9A%E5%87%BD%E6%95%B0%E8%A1%A8/"/>
    
    <category term="è™šå‡½æ•°æŒ‡é’ˆ" scheme="https://lyroom.github.io/tags/%E8%99%9A%E5%87%BD%E6%95%B0%E6%8C%87%E9%92%88/"/>
    
  </entry>
  
  <entry>
    <title>C++æ ¸å¿ƒç¼–ç¨‹</title>
    <link href="https://lyroom.github.io/2024/10/16/C-%E6%A0%B8%E5%BF%83%E7%BC%96%E7%A8%8B/"/>
    <id>https://lyroom.github.io/2024/10/16/C-%E6%A0%B8%E5%BF%83%E7%BC%96%E7%A8%8B/</id>
    <published>2024-10-16T03:56:40.000Z</published>
    <updated>2024-10-16T03:56:40.000Z</updated>
    
    <content type="html"><![CDATA[<p>æœ¬é˜¶æ®µä¸»è¦é’ˆå¯¹<code>C++</code> , <code>é¢å‘å¯¹è±¡</code> , <code>ç¼–ç¨‹æŠ€æœ¯</code>åšè¯¦ç»†è®²è§£ï¼Œæ¢è®¨C++ä¸­çš„æ ¸å¿ƒå’Œç²¾é«“ã€‚</p><span id="more"></span><h2 id="1-å†…å­˜åˆ†åŒºæ¨¡å‹"><a href="#1-å†…å­˜åˆ†åŒºæ¨¡å‹" class="headerlink" title="1 å†…å­˜åˆ†åŒºæ¨¡å‹"></a>1 å†…å­˜åˆ†åŒºæ¨¡å‹</h2><p>C++ç¨‹åºåœ¨æ‰§è¡Œæ—¶ï¼Œå°†å†…å­˜å¤§æ–¹å‘åˆ’åˆ†ä¸º<strong>4ä¸ªåŒºåŸŸ</strong></p><ul><li>ä»£ç åŒºï¼šå­˜æ”¾å‡½æ•°ä½“çš„äºŒè¿›åˆ¶ä»£ç ï¼Œç”±æ“ä½œç³»ç»Ÿè¿›è¡Œç®¡ç†çš„</li><li>å…¨å±€åŒºï¼šå­˜æ”¾å…¨å±€å˜é‡å’Œé™æ€å˜é‡ä»¥åŠå¸¸é‡</li><li>æ ˆåŒºï¼šç”±ç¼–è¯‘å™¨è‡ªåŠ¨åˆ†é…é‡Šæ”¾, å­˜æ”¾å‡½æ•°çš„å‚æ•°å€¼,å±€éƒ¨å˜é‡ç­‰</li><li>å †åŒºï¼šç”±ç¨‹åºå‘˜åˆ†é…å’Œé‡Šæ”¾,è‹¥ç¨‹åºå‘˜ä¸é‡Šæ”¾,ç¨‹åºç»“æŸæ—¶ç”±æ“ä½œç³»ç»Ÿå›æ”¶</li></ul><p><strong>å†…å­˜å››åŒºæ„ä¹‰ï¼š</strong></p><p>ä¸åŒåŒºåŸŸå­˜æ”¾çš„æ•°æ®ï¼Œèµ‹äºˆä¸åŒçš„ç”Ÿå‘½å‘¨æœŸ, ç»™æˆ‘ä»¬æ›´å¤§çš„çµæ´»ç¼–ç¨‹</p><h3 id="1-1-ç¨‹åºè¿è¡Œå‰"><a href="#1-1-ç¨‹åºè¿è¡Œå‰" class="headerlink" title="1.1 ç¨‹åºè¿è¡Œå‰"></a>1.1 ç¨‹åºè¿è¡Œå‰</h3><p>â€‹åœ¨ç¨‹åºç¼–è¯‘åï¼Œç”Ÿæˆäº†exeå¯æ‰§è¡Œç¨‹åºï¼Œ<strong>æœªæ‰§è¡Œè¯¥ç¨‹åºå‰</strong>åˆ†ä¸ºä¸¤ä¸ªåŒºåŸŸ</p><p>â€‹<strong>ä»£ç åŒºï¼š</strong></p><p>â€‹å­˜æ”¾ CPU æ‰§è¡Œçš„æœºå™¨æŒ‡ä»¤</p><p>â€‹ä»£ç åŒºæ˜¯<strong>å…±äº«</strong>çš„ï¼Œå…±äº«çš„ç›®çš„æ˜¯å¯¹äºé¢‘ç¹è¢«æ‰§è¡Œçš„ç¨‹åºï¼Œåªéœ€è¦åœ¨å†…å­˜ä¸­æœ‰ä¸€ä»½ä»£ç å³å¯</p><p>â€‹ä»£ç åŒºæ˜¯<strong>åªè¯»</strong>çš„ï¼Œä½¿å…¶åªè¯»çš„åŸå› æ˜¯é˜²æ­¢ç¨‹åºæ„å¤–åœ°ä¿®æ”¹äº†å®ƒçš„æŒ‡ä»¤</p><p>â€‹<strong>å…¨å±€åŒºï¼š</strong></p><p>â€‹å…¨å±€å˜é‡å’Œé™æ€å˜é‡å­˜æ”¾åœ¨æ­¤.</p><p>â€‹å…¨å±€åŒºè¿˜åŒ…å«äº†å¸¸é‡åŒº, å­—ç¬¦ä¸²å¸¸é‡å’Œå…¶ä»–å¸¸é‡ä¹Ÿå­˜æ”¾åœ¨æ­¤.</p><p>â€‹&#x3D;&#x3D;è¯¥åŒºåŸŸçš„æ•°æ®åœ¨ç¨‹åºç»“æŸåç”±æ“ä½œç³»ç»Ÿé‡Šæ”¾&#x3D;&#x3D;.</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å…¨å±€å˜é‡</span></span><br><span class="line"><span class="type">int</span> g_a = <span class="number">10</span>;</span><br><span class="line"><span class="type">int</span> g_b = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å…¨å±€å¸¸é‡</span></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> c_g_a = <span class="number">10</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> c_g_b = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å±€éƒ¨å˜é‡</span></span><br><span class="line"><span class="type">int</span> a = <span class="number">10</span>;</span><br><span class="line"><span class="type">int</span> b = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ‰“å°åœ°å€</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å±€éƒ¨å˜é‡aåœ°å€ä¸ºï¼š &quot;</span> &lt;&lt; (<span class="type">int</span>)&amp;a &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å±€éƒ¨å˜é‡båœ°å€ä¸ºï¼š &quot;</span> &lt;&lt; (<span class="type">int</span>)&amp;b &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å…¨å±€å˜é‡g_aåœ°å€ä¸ºï¼š &quot;</span> &lt;&lt;  (<span class="type">int</span>)&amp;g_a &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å…¨å±€å˜é‡g_båœ°å€ä¸ºï¼š &quot;</span> &lt;&lt;  (<span class="type">int</span>)&amp;g_b &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="comment">//é™æ€å˜é‡</span></span><br><span class="line"><span class="type">static</span> <span class="type">int</span> s_a = <span class="number">10</span>;</span><br><span class="line"><span class="type">static</span> <span class="type">int</span> s_b = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;é™æ€å˜é‡s_aåœ°å€ä¸ºï¼š &quot;</span> &lt;&lt; (<span class="type">int</span>)&amp;s_a &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;é™æ€å˜é‡s_båœ°å€ä¸ºï¼š &quot;</span> &lt;&lt; (<span class="type">int</span>)&amp;s_b &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å­—ç¬¦ä¸²å¸¸é‡åœ°å€ä¸ºï¼š &quot;</span> &lt;&lt; (<span class="type">int</span>)&amp;<span class="string">&quot;hello world&quot;</span> &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å­—ç¬¦ä¸²å¸¸é‡åœ°å€ä¸ºï¼š &quot;</span> &lt;&lt; (<span class="type">int</span>)&amp;<span class="string">&quot;hello world1&quot;</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å…¨å±€å¸¸é‡c_g_aåœ°å€ä¸ºï¼š &quot;</span> &lt;&lt; (<span class="type">int</span>)&amp;c_g_a &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å…¨å±€å¸¸é‡c_g_båœ°å€ä¸ºï¼š &quot;</span> &lt;&lt; (<span class="type">int</span>)&amp;c_g_b &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> c_l_a = <span class="number">10</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> c_l_b = <span class="number">10</span>;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å±€éƒ¨å¸¸é‡c_l_aåœ°å€ä¸ºï¼š &quot;</span> &lt;&lt; (<span class="type">int</span>)&amp;c_l_a &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å±€éƒ¨å¸¸é‡c_l_båœ°å€ä¸ºï¼š &quot;</span> &lt;&lt; (<span class="type">int</span>)&amp;c_l_b &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ‰“å°ç»“æœï¼š</p><img src="/2024/10/16/C-%E6%A0%B8%E5%BF%83%E7%BC%96%E7%A8%8B/1545017602518.png" class="" width="1545017602518"><p>æ€»ç»“ï¼š</p><ul><li>C++ä¸­åœ¨ç¨‹åºè¿è¡Œå‰åˆ†ä¸ºå…¨å±€åŒºå’Œä»£ç åŒº</li><li>ä»£ç åŒºç‰¹ç‚¹æ˜¯å…±äº«å’Œåªè¯»</li><li>å…¨å±€åŒºä¸­å­˜æ”¾å…¨å±€å˜é‡ã€é™æ€å˜é‡ã€å¸¸é‡</li><li>å¸¸é‡åŒºä¸­å­˜æ”¾ constä¿®é¥°çš„å…¨å±€å¸¸é‡  å’Œ å­—ç¬¦ä¸²å¸¸é‡</li></ul><h3 id="1-2-ç¨‹åºè¿è¡Œå"><a href="#1-2-ç¨‹åºè¿è¡Œå" class="headerlink" title="1.2 ç¨‹åºè¿è¡Œå"></a>1.2 ç¨‹åºè¿è¡Œå</h3><p>â€‹<strong>æ ˆåŒºï¼š</strong></p><p>â€‹ç”±ç¼–è¯‘å™¨è‡ªåŠ¨åˆ†é…é‡Šæ”¾, å­˜æ”¾å‡½æ•°çš„å‚æ•°å€¼,å±€éƒ¨å˜é‡ç­‰</p><p>â€‹æ³¨æ„äº‹é¡¹ï¼šä¸è¦è¿”å›å±€éƒ¨å˜é‡çš„åœ°å€ï¼Œæ ˆåŒºå¼€è¾Ÿçš„æ•°æ®ç”±ç¼–è¯‘å™¨è‡ªåŠ¨é‡Šæ”¾</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> * <span class="title">func</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">int</span> a = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">return</span> &amp;a;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> *p = <span class="built_in">func</span>();</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; *p &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; *p &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>â€‹<strong>å †åŒºï¼š</strong></p><p>â€‹ç”±ç¨‹åºå‘˜åˆ†é…é‡Šæ”¾,è‹¥ç¨‹åºå‘˜ä¸é‡Šæ”¾,ç¨‹åºç»“æŸæ—¶ç”±æ“ä½œç³»ç»Ÿå›æ”¶</p><p>â€‹åœ¨C++ä¸­ä¸»è¦åˆ©ç”¨newåœ¨å †åŒºå¼€è¾Ÿå†…å­˜</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span>* <span class="title">func</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">int</span>* a = <span class="keyword">new</span> <span class="built_in">int</span>(<span class="number">10</span>);</span><br><span class="line"><span class="keyword">return</span> a;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> *p = <span class="built_in">func</span>();</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; *p &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; *p &lt;&lt; endl;</span><br><span class="line">    </span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ€»ç»“ï¼š</strong></p><p>å †åŒºæ•°æ®ç”±ç¨‹åºå‘˜ç®¡ç†å¼€è¾Ÿå’Œé‡Šæ”¾</p><p>å †åŒºæ•°æ®åˆ©ç”¨newå…³é”®å­—è¿›è¡Œå¼€è¾Ÿå†…å­˜</p><h3 id="1-3-newæ“ä½œç¬¦"><a href="#1-3-newæ“ä½œç¬¦" class="headerlink" title="1.3 newæ“ä½œç¬¦"></a>1.3 newæ“ä½œç¬¦</h3><p>â€‹C++ä¸­åˆ©ç”¨&#x3D;&#x3D;new&#x3D;&#x3D;æ“ä½œç¬¦åœ¨å †åŒºå¼€è¾Ÿæ•°æ®</p><p>â€‹å †åŒºå¼€è¾Ÿçš„æ•°æ®ï¼Œç”±ç¨‹åºå‘˜æ‰‹åŠ¨å¼€è¾Ÿï¼Œæ‰‹åŠ¨é‡Šæ”¾ï¼Œé‡Šæ”¾åˆ©ç”¨æ“ä½œç¬¦ &#x3D;&#x3D;delete&#x3D;&#x3D;</p><p>â€‹è¯­æ³•ï¼š<code> new æ•°æ®ç±»å‹</code></p><p>â€‹åˆ©ç”¨newåˆ›å»ºçš„æ•°æ®ï¼Œä¼šè¿”å›è¯¥æ•°æ®å¯¹åº”çš„ç±»å‹çš„æŒ‡é’ˆ</p><p><strong>ç¤ºä¾‹1ï¼š åŸºæœ¬è¯­æ³•</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span>* <span class="title">func</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">int</span>* a = <span class="keyword">new</span> <span class="built_in">int</span>(<span class="number">10</span>);</span><br><span class="line"><span class="keyword">return</span> a;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> *p = <span class="built_in">func</span>();</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; *p &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; *p &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ©ç”¨deleteé‡Šæ”¾å †åŒºæ•°æ®</span></span><br><span class="line"><span class="keyword">delete</span> p;</span><br><span class="line"></span><br><span class="line"><span class="comment">//cout &lt;&lt; *p &lt;&lt; endl; //æŠ¥é”™ï¼Œé‡Šæ”¾çš„ç©ºé—´ä¸å¯è®¿é—®</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>ç¤ºä¾‹2ï¼šå¼€è¾Ÿæ•°ç»„</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å †åŒºå¼€è¾Ÿæ•°ç»„</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span>* arr = <span class="keyword">new</span> <span class="type">int</span>[<span class="number">10</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line">arr[i] = i + <span class="number">100</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; arr[i] &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//é‡Šæ”¾æ•°ç»„ delete ååŠ  []</span></span><br><span class="line"><span class="keyword">delete</span>[] arr;</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="2-å¼•ç”¨"><a href="#2-å¼•ç”¨" class="headerlink" title="2 å¼•ç”¨"></a>2 å¼•ç”¨</h2><h3 id="2-1-å¼•ç”¨çš„åŸºæœ¬ä½¿ç”¨"><a href="#2-1-å¼•ç”¨çš„åŸºæœ¬ä½¿ç”¨" class="headerlink" title="2.1 å¼•ç”¨çš„åŸºæœ¬ä½¿ç”¨"></a>2.1 å¼•ç”¨çš„åŸºæœ¬ä½¿ç”¨</h3><p>**ä½œç”¨ï¼š **ç»™å˜é‡èµ·åˆ«å</p><p><strong>è¯­æ³•ï¼š</strong> <code>æ•°æ®ç±»å‹ &amp;åˆ«å = åŸå</code></p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> a = <span class="number">10</span>;</span><br><span class="line"><span class="type">int</span> &amp;b = a;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;a = &quot;</span> &lt;&lt; a &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;b = &quot;</span> &lt;&lt; b &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">b = <span class="number">100</span>;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;a = &quot;</span> &lt;&lt; a &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;b = &quot;</span> &lt;&lt; b &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-2-å¼•ç”¨æ³¨æ„äº‹é¡¹"><a href="#2-2-å¼•ç”¨æ³¨æ„äº‹é¡¹" class="headerlink" title="2.2 å¼•ç”¨æ³¨æ„äº‹é¡¹"></a>2.2 å¼•ç”¨æ³¨æ„äº‹é¡¹</h3><ul><li>å¼•ç”¨å¿…é¡»åˆå§‹åŒ–</li><li>å¼•ç”¨åœ¨åˆå§‹åŒ–åï¼Œä¸å¯ä»¥æ”¹å˜</li></ul><p>ç¤ºä¾‹ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> a = <span class="number">10</span>;</span><br><span class="line"><span class="type">int</span> b = <span class="number">20</span>;</span><br><span class="line"><span class="comment">//int &amp;c; //é”™è¯¯ï¼Œå¼•ç”¨å¿…é¡»åˆå§‹åŒ–</span></span><br><span class="line"><span class="type">int</span> &amp;c = a; <span class="comment">//ä¸€æ—¦åˆå§‹åŒ–åï¼Œå°±ä¸å¯ä»¥æ›´æ”¹</span></span><br><span class="line">c = b; <span class="comment">//è¿™æ˜¯èµ‹å€¼æ“ä½œï¼Œä¸æ˜¯æ›´æ”¹å¼•ç”¨</span></span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;a = &quot;</span> &lt;&lt; a &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;b = &quot;</span> &lt;&lt; b &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;c = &quot;</span> &lt;&lt; c &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-3-å¼•ç”¨åšå‡½æ•°å‚æ•°"><a href="#2-3-å¼•ç”¨åšå‡½æ•°å‚æ•°" class="headerlink" title="2.3 å¼•ç”¨åšå‡½æ•°å‚æ•°"></a>2.3 å¼•ç”¨åšå‡½æ•°å‚æ•°</h3><p><strong>ä½œç”¨ï¼š</strong>å‡½æ•°ä¼ å‚æ—¶ï¼Œå¯ä»¥åˆ©ç”¨å¼•ç”¨çš„æŠ€æœ¯è®©å½¢å‚ä¿®é¥°å®å‚</p><p><strong>ä¼˜ç‚¹ï¼š</strong>å¯ä»¥ç®€åŒ–æŒ‡é’ˆä¿®æ”¹å®å‚</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1. å€¼ä¼ é€’</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">mySwap01</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> </span>&#123;</span><br><span class="line"><span class="type">int</span> temp = a;</span><br><span class="line">a = b;</span><br><span class="line">b = temp;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//2. åœ°å€ä¼ é€’</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">mySwap02</span><span class="params">(<span class="type">int</span>* a, <span class="type">int</span>* b)</span> </span>&#123;</span><br><span class="line"><span class="type">int</span> temp = *a;</span><br><span class="line">*a = *b;</span><br><span class="line">*b = temp;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//3. å¼•ç”¨ä¼ é€’</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">mySwap03</span><span class="params">(<span class="type">int</span>&amp; a, <span class="type">int</span>&amp; b)</span> </span>&#123;</span><br><span class="line"><span class="type">int</span> temp = a;</span><br><span class="line">a = b;</span><br><span class="line">b = temp;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> a = <span class="number">10</span>;</span><br><span class="line"><span class="type">int</span> b = <span class="number">20</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">mySwap01</span>(a, b);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;a:&quot;</span> &lt;&lt; a &lt;&lt; <span class="string">&quot; b:&quot;</span> &lt;&lt; b &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="built_in">mySwap02</span>(&amp;a, &amp;b);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;a:&quot;</span> &lt;&lt; a &lt;&lt; <span class="string">&quot; b:&quot;</span> &lt;&lt; b &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="built_in">mySwap03</span>(a, b);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;a:&quot;</span> &lt;&lt; a &lt;&lt; <span class="string">&quot; b:&quot;</span> &lt;&lt; b &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>æ€»ç»“ï¼šé€šè¿‡å¼•ç”¨å‚æ•°äº§ç”Ÿçš„æ•ˆæœåŒæŒ‰åœ°å€ä¼ é€’æ˜¯ä¸€æ ·çš„ã€‚å¼•ç”¨çš„è¯­æ³•æ›´æ¸…æ¥šç®€å•</p></blockquote><h3 id="2-4-å¼•ç”¨åšå‡½æ•°è¿”å›å€¼"><a href="#2-4-å¼•ç”¨åšå‡½æ•°è¿”å›å€¼" class="headerlink" title="2.4 å¼•ç”¨åšå‡½æ•°è¿”å›å€¼"></a>2.4 å¼•ç”¨åšå‡½æ•°è¿”å›å€¼</h3><p>ä½œç”¨ï¼šå¼•ç”¨æ˜¯å¯ä»¥ä½œä¸ºå‡½æ•°çš„è¿”å›å€¼å­˜åœ¨çš„</p><p>æ³¨æ„ï¼š<strong>ä¸è¦è¿”å›å±€éƒ¨å˜é‡å¼•ç”¨</strong></p><p>ç”¨æ³•ï¼šå‡½æ•°è°ƒç”¨ä½œä¸ºå·¦å€¼</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è¿”å›å±€éƒ¨å˜é‡å¼•ç”¨</span></span><br><span class="line"><span class="function"><span class="type">int</span>&amp; <span class="title">test01</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="type">int</span> a = <span class="number">10</span>; <span class="comment">//å±€éƒ¨å˜é‡</span></span><br><span class="line"><span class="keyword">return</span> a;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è¿”å›é™æ€å˜é‡å¼•ç”¨</span></span><br><span class="line"><span class="function"><span class="type">int</span>&amp; <span class="title">test02</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="type">static</span> <span class="type">int</span> a = <span class="number">20</span>;</span><br><span class="line"><span class="keyword">return</span> a;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä¸èƒ½è¿”å›å±€éƒ¨å˜é‡çš„å¼•ç”¨</span></span><br><span class="line"><span class="type">int</span>&amp; ref = <span class="built_in">test01</span>();</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;ref = &quot;</span> &lt;&lt; ref &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;ref = &quot;</span> &lt;&lt; ref &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å¦‚æœå‡½æ•°åšå·¦å€¼ï¼Œé‚£ä¹ˆå¿…é¡»è¿”å›å¼•ç”¨</span></span><br><span class="line"><span class="type">int</span>&amp; ref2 = <span class="built_in">test02</span>();</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;ref2 = &quot;</span> &lt;&lt; ref2 &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;ref2 = &quot;</span> &lt;&lt; ref2 &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test02</span>() = <span class="number">1000</span>;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;ref2 = &quot;</span> &lt;&lt; ref2 &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;ref2 = &quot;</span> &lt;&lt; ref2 &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>â€‹</p><h3 id="2-5-å¼•ç”¨çš„æœ¬è´¨"><a href="#2-5-å¼•ç”¨çš„æœ¬è´¨" class="headerlink" title="2.5 å¼•ç”¨çš„æœ¬è´¨"></a>2.5 å¼•ç”¨çš„æœ¬è´¨</h3><p>æœ¬è´¨ï¼š<strong>å¼•ç”¨çš„æœ¬è´¨åœ¨c++å†…éƒ¨å®ç°æ˜¯ä¸€ä¸ªæŒ‡é’ˆå¸¸é‡.</strong></p><p>è®²è§£ç¤ºä¾‹ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å‘ç°æ˜¯å¼•ç”¨ï¼Œè½¬æ¢ä¸º int* const ref = &amp;a;</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">(<span class="type">int</span>&amp; ref)</span></span>&#123;</span><br><span class="line">ref = <span class="number">100</span>; <span class="comment">// refæ˜¯å¼•ç”¨ï¼Œè½¬æ¢ä¸º*ref = 100</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="type">int</span> a = <span class="number">10</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//è‡ªåŠ¨è½¬æ¢ä¸º int* const ref = &amp;a; æŒ‡é’ˆå¸¸é‡æ˜¯æŒ‡é’ˆæŒ‡å‘ä¸å¯æ”¹ï¼Œä¹Ÿè¯´æ˜ä¸ºä»€ä¹ˆå¼•ç”¨ä¸å¯æ›´æ”¹</span></span><br><span class="line"><span class="type">int</span>&amp; ref = a; </span><br><span class="line">ref = <span class="number">20</span>; <span class="comment">//å†…éƒ¨å‘ç°refæ˜¯å¼•ç”¨ï¼Œè‡ªåŠ¨å¸®æˆ‘ä»¬è½¬æ¢ä¸º: *ref = 20;</span></span><br><span class="line">    </span><br><span class="line">cout &lt;&lt; <span class="string">&quot;a:&quot;</span> &lt;&lt; a &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;ref:&quot;</span> &lt;&lt; ref &lt;&lt; endl;</span><br><span class="line">    </span><br><span class="line"><span class="built_in">func</span>(a);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç»“è®ºï¼šC++æ¨èç”¨å¼•ç”¨æŠ€æœ¯ï¼Œå› ä¸ºè¯­æ³•æ–¹ä¾¿ï¼Œå¼•ç”¨æœ¬è´¨æ˜¯æŒ‡é’ˆå¸¸é‡ï¼Œä½†æ˜¯æ‰€æœ‰çš„æŒ‡é’ˆæ“ä½œç¼–è¯‘å™¨éƒ½å¸®æˆ‘ä»¬åšäº†</p><h3 id="2-6-å¸¸é‡å¼•ç”¨"><a href="#2-6-å¸¸é‡å¼•ç”¨" class="headerlink" title="2.6 å¸¸é‡å¼•ç”¨"></a>2.6 å¸¸é‡å¼•ç”¨</h3><p><strong>ä½œç”¨ï¼š</strong>å¸¸é‡å¼•ç”¨ä¸»è¦ç”¨æ¥ä¿®é¥°å½¢å‚ï¼Œé˜²æ­¢è¯¯æ“ä½œ</p><p>åœ¨å‡½æ•°å½¢å‚åˆ—è¡¨ä¸­ï¼Œå¯ä»¥åŠ &#x3D;&#x3D;constä¿®é¥°å½¢å‚&#x3D;&#x3D;ï¼Œé˜²æ­¢å½¢å‚æ”¹å˜å®å‚</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å¼•ç”¨ä½¿ç”¨çš„åœºæ™¯ï¼Œé€šå¸¸ç”¨æ¥ä¿®é¥°å½¢å‚</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">showValue</span><span class="params">(<span class="type">const</span> <span class="type">int</span>&amp; v)</span> </span>&#123;</span><br><span class="line"><span class="comment">//v += 10;</span></span><br><span class="line">cout &lt;&lt; v &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//int&amp; ref = 10;  å¼•ç”¨æœ¬èº«éœ€è¦ä¸€ä¸ªåˆæ³•çš„å†…å­˜ç©ºé—´ï¼Œå› æ­¤è¿™è¡Œé”™è¯¯</span></span><br><span class="line"><span class="comment">//åŠ å…¥constå°±å¯ä»¥äº†ï¼Œç¼–è¯‘å™¨ä¼˜åŒ–ä»£ç ï¼Œint temp = 10; const int&amp; ref = temp;</span></span><br><span class="line"><span class="type">const</span> <span class="type">int</span>&amp; ref = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ref = 100;  //åŠ å…¥conståä¸å¯ä»¥ä¿®æ”¹å˜é‡</span></span><br><span class="line">cout &lt;&lt; ref &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å‡½æ•°ä¸­åˆ©ç”¨å¸¸é‡å¼•ç”¨é˜²æ­¢è¯¯æ“ä½œä¿®æ”¹å®å‚</span></span><br><span class="line"><span class="type">int</span> a = <span class="number">10</span>;</span><br><span class="line"><span class="built_in">showValue</span>(a);</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="3-å‡½æ•°æé«˜"><a href="#3-å‡½æ•°æé«˜" class="headerlink" title="3 å‡½æ•°æé«˜"></a>3 å‡½æ•°æé«˜</h2><h3 id="3-1-å‡½æ•°é»˜è®¤å‚æ•°"><a href="#3-1-å‡½æ•°é»˜è®¤å‚æ•°" class="headerlink" title="3.1 å‡½æ•°é»˜è®¤å‚æ•°"></a>3.1 å‡½æ•°é»˜è®¤å‚æ•°</h3><p>åœ¨C++ä¸­ï¼Œå‡½æ•°çš„å½¢å‚åˆ—è¡¨ä¸­çš„å½¢å‚æ˜¯å¯ä»¥æœ‰é»˜è®¤å€¼çš„ã€‚</p><p>è¯­æ³•ï¼š<code> è¿”å›å€¼ç±»å‹  å‡½æ•°å ï¼ˆå‚æ•°= é»˜è®¤å€¼ï¼‰&#123;&#125;</code></p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">func</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b = <span class="number">10</span>, <span class="type">int</span> c = <span class="number">10</span>)</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> a + b + c;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//1. å¦‚æœæŸä¸ªä½ç½®å‚æ•°æœ‰é»˜è®¤å€¼ï¼Œé‚£ä¹ˆä»è¿™ä¸ªä½ç½®å¾€åï¼Œä»å·¦å‘å³ï¼Œå¿…é¡»éƒ½è¦æœ‰é»˜è®¤å€¼</span></span><br><span class="line"><span class="comment">//2. å¦‚æœå‡½æ•°å£°æ˜æœ‰é»˜è®¤å€¼ï¼Œå‡½æ•°å®ç°çš„æ—¶å€™å°±ä¸èƒ½æœ‰é»˜è®¤å‚æ•°</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">func2</span><span class="params">(<span class="type">int</span> a = <span class="number">10</span>, <span class="type">int</span> b = <span class="number">10</span>)</span></span>;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">func2</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;ret = &quot;</span> &lt;&lt; <span class="built_in">func</span>(<span class="number">20</span>, <span class="number">20</span>) &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;ret = &quot;</span> &lt;&lt; <span class="built_in">func</span>(<span class="number">100</span>) &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-2-å‡½æ•°å ä½å‚æ•°"><a href="#3-2-å‡½æ•°å ä½å‚æ•°" class="headerlink" title="3.2 å‡½æ•°å ä½å‚æ•°"></a>3.2 å‡½æ•°å ä½å‚æ•°</h3><p>C++ä¸­å‡½æ•°çš„å½¢å‚åˆ—è¡¨é‡Œå¯ä»¥æœ‰å ä½å‚æ•°ï¼Œç”¨æ¥åšå ä½ï¼Œè°ƒç”¨å‡½æ•°æ—¶å¿…é¡»å¡«è¡¥è¯¥ä½ç½®</p><p><strong>è¯­æ³•ï¼š</strong> <code>è¿”å›å€¼ç±»å‹ å‡½æ•°å (æ•°æ®ç±»å‹)&#123;&#125;</code></p><p>åœ¨ç°é˜¶æ®µå‡½æ•°çš„å ä½å‚æ•°å­˜åœ¨æ„ä¹‰ä¸å¤§ï¼Œä½†æ˜¯åé¢çš„è¯¾ç¨‹ä¸­ä¼šç”¨åˆ°è¯¥æŠ€æœ¯</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å‡½æ•°å ä½å‚æ•° ï¼Œå ä½å‚æ•°ä¹Ÿå¯ä»¥æœ‰é»˜è®¤å‚æ•°</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span>)</span> </span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;this is func&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">func</span>(<span class="number">10</span>,<span class="number">10</span>); <span class="comment">//å ä½å‚æ•°å¿…é¡»å¡«è¡¥</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-3-å‡½æ•°é‡è½½"><a href="#3-3-å‡½æ•°é‡è½½" class="headerlink" title="3.3 å‡½æ•°é‡è½½"></a>3.3 å‡½æ•°é‡è½½</h3><h4 id="3-3-1-å‡½æ•°é‡è½½æ¦‚è¿°"><a href="#3-3-1-å‡½æ•°é‡è½½æ¦‚è¿°" class="headerlink" title="3.3.1 å‡½æ•°é‡è½½æ¦‚è¿°"></a>3.3.1 å‡½æ•°é‡è½½æ¦‚è¿°</h4><p><strong>ä½œç”¨ï¼š</strong>å‡½æ•°åå¯ä»¥ç›¸åŒï¼Œæé«˜å¤ç”¨æ€§</p><p><strong>å‡½æ•°é‡è½½æ»¡è¶³æ¡ä»¶ï¼š</strong></p><ul><li>åŒä¸€ä¸ªä½œç”¨åŸŸä¸‹</li><li>å‡½æ•°åç§°ç›¸åŒ</li><li>å‡½æ•°å‚æ•°<strong>ç±»å‹ä¸åŒ</strong>  æˆ–è€… <strong>ä¸ªæ•°ä¸åŒ</strong> æˆ–è€… <strong>é¡ºåºä¸åŒ</strong></li></ul><p><strong>æ³¨æ„:</strong>  å‡½æ•°çš„è¿”å›å€¼ä¸å¯ä»¥ä½œä¸ºå‡½æ•°é‡è½½çš„æ¡ä»¶</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å‡½æ•°é‡è½½éœ€è¦å‡½æ•°éƒ½åœ¨åŒä¸€ä¸ªä½œç”¨åŸŸä¸‹</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;func çš„è°ƒç”¨ï¼&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">(<span class="type">int</span> a)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;func (int a) çš„è°ƒç”¨ï¼&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">(<span class="type">double</span> a)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;func (double a)çš„è°ƒç”¨ï¼&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">(<span class="type">int</span> a ,<span class="type">double</span> b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;func (int a ,double b) çš„è°ƒç”¨ï¼&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">(<span class="type">double</span> a ,<span class="type">int</span> b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;func (double a ,int b)çš„è°ƒç”¨ï¼&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å‡½æ•°è¿”å›å€¼ä¸å¯ä»¥ä½œä¸ºå‡½æ•°é‡è½½æ¡ä»¶</span></span><br><span class="line"><span class="comment">//int func(double a, int b)</span></span><br><span class="line"><span class="comment">//&#123;</span></span><br><span class="line"><span class="comment">//cout &lt;&lt; &quot;func (double a ,int b)çš„è°ƒç”¨ï¼&quot; &lt;&lt; endl;</span></span><br><span class="line"><span class="comment">//&#125;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">func</span>();</span><br><span class="line"><span class="built_in">func</span>(<span class="number">10</span>);</span><br><span class="line"><span class="built_in">func</span>(<span class="number">3.14</span>);</span><br><span class="line"><span class="built_in">func</span>(<span class="number">10</span>,<span class="number">3.14</span>);</span><br><span class="line"><span class="built_in">func</span>(<span class="number">3.14</span> , <span class="number">10</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="3-3-2-å‡½æ•°é‡è½½æ³¨æ„äº‹é¡¹"><a href="#3-3-2-å‡½æ•°é‡è½½æ³¨æ„äº‹é¡¹" class="headerlink" title="3.3.2 å‡½æ•°é‡è½½æ³¨æ„äº‹é¡¹"></a>3.3.2 å‡½æ•°é‡è½½æ³¨æ„äº‹é¡¹</h4><ul><li>å¼•ç”¨ä½œä¸ºé‡è½½æ¡ä»¶</li><li>å‡½æ•°é‡è½½ç¢°åˆ°å‡½æ•°é»˜è®¤å‚æ•°</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å‡½æ•°é‡è½½æ³¨æ„äº‹é¡¹</span></span><br><span class="line"><span class="comment">//1ã€å¼•ç”¨ä½œä¸ºé‡è½½æ¡ä»¶</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">(<span class="type">int</span> &amp;a)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;func (int &amp;a) è°ƒç”¨ &quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">(<span class="type">const</span> <span class="type">int</span> &amp;a)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;func (const int &amp;a) è°ƒç”¨ &quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//2ã€å‡½æ•°é‡è½½ç¢°åˆ°å‡½æ•°é»˜è®¤å‚æ•°</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func2</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b = <span class="number">10</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;func2(int a, int b = 10) è°ƒç”¨&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func2</span><span class="params">(<span class="type">int</span> a)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;func2(int a) è°ƒç”¨&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> a = <span class="number">10</span>;</span><br><span class="line"><span class="built_in">func</span>(a); <span class="comment">//è°ƒç”¨æ— const</span></span><br><span class="line"><span class="built_in">func</span>(<span class="number">10</span>);<span class="comment">//è°ƒç”¨æœ‰const</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//func2(10); //ç¢°åˆ°é»˜è®¤å‚æ•°äº§ç”Ÿæ­§ä¹‰ï¼Œéœ€è¦é¿å…</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="4-ç±»å’Œå¯¹è±¡"><a href="#4-ç±»å’Œå¯¹è±¡" class="headerlink" title="4 ç±»å’Œå¯¹è±¡"></a><strong>4</strong> ç±»å’Œå¯¹è±¡</h2><p>C++é¢å‘å¯¹è±¡çš„ä¸‰å¤§ç‰¹æ€§ä¸ºï¼š&#x3D;&#x3D;å°è£…ã€ç»§æ‰¿ã€å¤šæ€&#x3D;&#x3D;</p><p>C++è®¤ä¸º&#x3D;&#x3D;ä¸‡äº‹ä¸‡ç‰©éƒ½çš†ä¸ºå¯¹è±¡&#x3D;&#x3D;ï¼Œå¯¹è±¡ä¸Šæœ‰å…¶å±æ€§å’Œè¡Œä¸º</p><p><strong>ä¾‹å¦‚ï¼š</strong></p><p>â€‹äººå¯ä»¥ä½œä¸ºå¯¹è±¡ï¼Œå±æ€§æœ‰å§“åã€å¹´é¾„ã€èº«é«˜ã€ä½“é‡â€¦ï¼Œè¡Œä¸ºæœ‰èµ°ã€è·‘ã€è·³ã€åƒé¥­ã€å”±æ­Œâ€¦</p><p>â€‹è½¦ä¹Ÿå¯ä»¥ä½œä¸ºå¯¹è±¡ï¼Œå±æ€§æœ‰è½®èƒã€æ–¹å‘ç›˜ã€è½¦ç¯â€¦,è¡Œä¸ºæœ‰è½½äººã€æ”¾éŸ³ä¹ã€æ”¾ç©ºè°ƒâ€¦</p><p>â€‹å…·æœ‰ç›¸åŒæ€§è´¨çš„&#x3D;&#x3D;å¯¹è±¡&#x3D;&#x3D;ï¼Œæˆ‘ä»¬å¯ä»¥æŠ½è±¡ç§°ä¸º&#x3D;&#x3D;ç±»&#x3D;&#x3D;ï¼Œäººå±äºäººç±»ï¼Œè½¦å±äºè½¦ç±»</p><h3 id="4-1-å°è£…"><a href="#4-1-å°è£…" class="headerlink" title="4.1 å°è£…"></a>4.1 å°è£…</h3><h4 id="4-1-1-å°è£…çš„æ„ä¹‰"><a href="#4-1-1-å°è£…çš„æ„ä¹‰" class="headerlink" title="4.1.1  å°è£…çš„æ„ä¹‰"></a>4.1.1  å°è£…çš„æ„ä¹‰</h4><p>å°è£…æ˜¯C++é¢å‘å¯¹è±¡ä¸‰å¤§ç‰¹æ€§ä¹‹ä¸€</p><p>å°è£…çš„æ„ä¹‰ï¼š</p><ul><li>å°†å±æ€§å’Œè¡Œä¸ºä½œä¸ºä¸€ä¸ªæ•´ä½“ï¼Œè¡¨ç°ç”Ÿæ´»ä¸­çš„äº‹ç‰©</li><li>å°†å±æ€§å’Œè¡Œä¸ºåŠ ä»¥æƒé™æ§åˆ¶</li></ul><p><strong>å°è£…æ„ä¹‰ä¸€ï¼š</strong></p><p>â€‹åœ¨è®¾è®¡ç±»çš„æ—¶å€™ï¼Œå±æ€§å’Œè¡Œä¸ºå†™åœ¨ä¸€èµ·ï¼Œè¡¨ç°äº‹ç‰©</p><p><strong>è¯­æ³•ï¼š</strong> <code>class ç±»å&#123;   è®¿é—®æƒé™ï¼š å±æ€§  / è¡Œä¸º  &#125;;</code></p><p><strong>ç¤ºä¾‹1ï¼š</strong>è®¾è®¡ä¸€ä¸ªåœ†ç±»ï¼Œæ±‚åœ†çš„å‘¨é•¿</p><p><strong>ç¤ºä¾‹ä»£ç ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//åœ†å‘¨ç‡</span></span><br><span class="line"><span class="type">const</span> <span class="type">double</span> PI = <span class="number">3.14</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//1ã€å°è£…çš„æ„ä¹‰</span></span><br><span class="line"><span class="comment">//å°†å±æ€§å’Œè¡Œä¸ºä½œä¸ºä¸€ä¸ªæ•´ä½“ï¼Œç”¨æ¥è¡¨ç°ç”Ÿæ´»ä¸­çš„äº‹ç‰©</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//å°è£…ä¸€ä¸ªåœ†ç±»ï¼Œæ±‚åœ†çš„å‘¨é•¿</span></span><br><span class="line"><span class="comment">//classä»£è¡¨è®¾è®¡ä¸€ä¸ªç±»ï¼Œåé¢è·Ÿç€çš„æ˜¯ç±»å</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Circle</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:  <span class="comment">//è®¿é—®æƒé™  å…¬å…±çš„æƒé™</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//å±æ€§</span></span><br><span class="line"><span class="type">int</span> m_r;<span class="comment">//åŠå¾„</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//è¡Œä¸º</span></span><br><span class="line"><span class="comment">//è·å–åˆ°åœ†çš„å‘¨é•¿</span></span><br><span class="line"><span class="function"><span class="type">double</span> <span class="title">calculateZC</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//2 * pi  * r</span></span><br><span class="line"><span class="comment">//è·å–åœ†çš„å‘¨é•¿</span></span><br><span class="line"><span class="keyword">return</span>  <span class="number">2</span> * PI * m_r;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//é€šè¿‡åœ†ç±»ï¼Œåˆ›å»ºåœ†çš„å¯¹è±¡</span></span><br><span class="line"><span class="comment">// c1å°±æ˜¯ä¸€ä¸ªå…·ä½“çš„åœ†</span></span><br><span class="line">Circle c1;</span><br><span class="line">c1.m_r = <span class="number">10</span>; <span class="comment">//ç»™åœ†å¯¹è±¡çš„åŠå¾„ è¿›è¡Œèµ‹å€¼æ“ä½œ</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//2 * pi * 10 = = 62.8</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;åœ†çš„å‘¨é•¿ä¸ºï¼š &quot;</span> &lt;&lt; c1.<span class="built_in">calculateZC</span>() &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>ç¤ºä¾‹2ï¼š</strong>è®¾è®¡ä¸€ä¸ªå­¦ç”Ÿç±»ï¼Œå±æ€§æœ‰å§“åå’Œå­¦å·ï¼Œå¯ä»¥ç»™å§“åå’Œå­¦å·èµ‹å€¼ï¼Œå¯ä»¥æ˜¾ç¤ºå­¦ç”Ÿçš„å§“åå’Œå­¦å·</p><p><strong>ç¤ºä¾‹2ä»£ç ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å­¦ç”Ÿç±»</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">setName</span><span class="params">(string name)</span> </span>&#123;</span><br><span class="line">m_name = name;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">setID</span><span class="params">(<span class="type">int</span> id)</span> </span>&#123;</span><br><span class="line">m_id = id;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">showStudent</span><span class="params">()</span> </span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;name:&quot;</span> &lt;&lt; m_name &lt;&lt; <span class="string">&quot; ID:&quot;</span> &lt;&lt; m_id &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">string m_name;</span><br><span class="line"><span class="type">int</span> m_id;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">Student stu;</span><br><span class="line">stu.<span class="built_in">setName</span>(<span class="string">&quot;å¾·ç›è¥¿äºš&quot;</span>);</span><br><span class="line">stu.<span class="built_in">setID</span>(<span class="number">250</span>);</span><br><span class="line">stu.<span class="built_in">showStudent</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>å°è£…æ„ä¹‰äºŒï¼š</strong></p><p>ç±»åœ¨è®¾è®¡æ—¶ï¼Œå¯ä»¥æŠŠå±æ€§å’Œè¡Œä¸ºæ”¾åœ¨ä¸åŒçš„æƒé™ä¸‹ï¼ŒåŠ ä»¥æ§åˆ¶</p><p>è®¿é—®æƒé™æœ‰ä¸‰ç§ï¼š</p><ol><li>public        å…¬å…±æƒé™  </li><li>protected ä¿æŠ¤æƒé™</li><li>private      ç§æœ‰æƒé™</li></ol><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ä¸‰ç§æƒé™</span></span><br><span class="line"><span class="comment">//å…¬å…±æƒé™  public     ç±»å†…å¯ä»¥è®¿é—®  ç±»å¤–å¯ä»¥è®¿é—®</span></span><br><span class="line"><span class="comment">//ä¿æŠ¤æƒé™  protected  ç±»å†…å¯ä»¥è®¿é—®  ç±»å¤–ä¸å¯ä»¥è®¿é—®</span></span><br><span class="line"><span class="comment">//ç§æœ‰æƒé™  private    ç±»å†…å¯ä»¥è®¿é—®  ç±»å¤–ä¸å¯ä»¥è®¿é—®</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">//å§“å  å…¬å…±æƒé™</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">string m_Name;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ±½è½¦  ä¿æŠ¤æƒé™</span></span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line">string m_Car;</span><br><span class="line"></span><br><span class="line"><span class="comment">//é“¶è¡Œå¡å¯†ç   ç§æœ‰æƒé™</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line"><span class="type">int</span> m_Password;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">m_Name = <span class="string">&quot;å¼ ä¸‰&quot;</span>;</span><br><span class="line">m_Car = <span class="string">&quot;æ‹–æ‹‰æœº&quot;</span>;</span><br><span class="line">m_Password = <span class="number">123456</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">Person p;</span><br><span class="line">p.m_Name = <span class="string">&quot;æå››&quot;</span>;</span><br><span class="line"><span class="comment">//p.m_Car = &quot;å¥”é©°&quot;;  //ä¿æŠ¤æƒé™ç±»å¤–è®¿é—®ä¸åˆ°</span></span><br><span class="line"><span class="comment">//p.m_Password = 123; //ç§æœ‰æƒé™ç±»å¤–è®¿é—®ä¸åˆ°</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="4-1-2-structå’ŒclassåŒºåˆ«"><a href="#4-1-2-structå’ŒclassåŒºåˆ«" class="headerlink" title="4.1.2 structå’ŒclassåŒºåˆ«"></a>4.1.2 structå’ŒclassåŒºåˆ«</h4><p>åœ¨C++ä¸­ structå’Œclasså”¯ä¸€çš„<strong>åŒºåˆ«</strong>å°±åœ¨äº <strong>é»˜è®¤çš„è®¿é—®æƒé™ä¸åŒ</strong></p><p>åŒºåˆ«ï¼š</p><ul><li>struct é»˜è®¤æƒé™ä¸ºå…¬å…±</li><li>class   é»˜è®¤æƒé™ä¸ºç§æœ‰</li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">C1</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="type">int</span>  m_A; <span class="comment">//é»˜è®¤æ˜¯ç§æœ‰æƒé™</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">C2</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="type">int</span> m_A;  <span class="comment">//é»˜è®¤æ˜¯å…¬å…±æƒé™</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">C1 c1;</span><br><span class="line">c1.m_A = <span class="number">10</span>; <span class="comment">//é”™è¯¯ï¼Œè®¿é—®æƒé™æ˜¯ç§æœ‰</span></span><br><span class="line"></span><br><span class="line">C2 c2;</span><br><span class="line">c2.m_A = <span class="number">10</span>; <span class="comment">//æ­£ç¡®ï¼Œè®¿é—®æƒé™æ˜¯å…¬å…±</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="4-1-3-æˆå‘˜å±æ€§è®¾ç½®ä¸ºç§æœ‰"><a href="#4-1-3-æˆå‘˜å±æ€§è®¾ç½®ä¸ºç§æœ‰" class="headerlink" title="4.1.3 æˆå‘˜å±æ€§è®¾ç½®ä¸ºç§æœ‰"></a>4.1.3 æˆå‘˜å±æ€§è®¾ç½®ä¸ºç§æœ‰</h4><p><strong>ä¼˜ç‚¹1ï¼š</strong>å°†æ‰€æœ‰æˆå‘˜å±æ€§è®¾ç½®ä¸ºç§æœ‰ï¼Œå¯ä»¥è‡ªå·±æ§åˆ¶è¯»å†™æƒé™</p><p><strong>ä¼˜ç‚¹2ï¼š</strong>å¯¹äºå†™æƒé™ï¼Œæˆ‘ä»¬å¯ä»¥æ£€æµ‹æ•°æ®çš„æœ‰æ•ˆæ€§</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"></span><br><span class="line"><span class="comment">//å§“åè®¾ç½®å¯è¯»å¯å†™</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">setName</span><span class="params">(string name)</span> </span>&#123;</span><br><span class="line">m_Name = name;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">string <span class="title">getName</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> m_Name;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//è·å–å¹´é¾„ </span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">getAge</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> m_Age;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//è®¾ç½®å¹´é¾„</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">setAge</span><span class="params">(<span class="type">int</span> age)</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span> (age &lt; <span class="number">0</span> || age &gt; <span class="number">150</span>) &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;ä½ ä¸ªè€å¦–ç²¾!&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line">m_Age = age;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æƒ…äººè®¾ç½®ä¸ºåªå†™</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">setLover</span><span class="params">(string lover)</span> </span>&#123;</span><br><span class="line">m_Lover = lover;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">string m_Name; <span class="comment">//å¯è¯»å¯å†™  å§“å</span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> m_Age; <span class="comment">//åªè¯»  å¹´é¾„</span></span><br><span class="line"></span><br><span class="line">string m_Lover; <span class="comment">//åªå†™  æƒ…äºº</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">Person p;</span><br><span class="line"><span class="comment">//å§“åè®¾ç½®</span></span><br><span class="line">p.<span class="built_in">setName</span>(<span class="string">&quot;å¼ ä¸‰&quot;</span>);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å§“åï¼š &quot;</span> &lt;&lt; p.<span class="built_in">getName</span>() &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å¹´é¾„è®¾ç½®</span></span><br><span class="line">p.<span class="built_in">setAge</span>(<span class="number">50</span>);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å¹´é¾„ï¼š &quot;</span> &lt;&lt; p.<span class="built_in">getAge</span>() &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æƒ…äººè®¾ç½®</span></span><br><span class="line">p.<span class="built_in">setLover</span>(<span class="string">&quot;è‹äº•&quot;</span>);</span><br><span class="line"><span class="comment">//cout &lt;&lt; &quot;æƒ…äººï¼š &quot; &lt;&lt; p.m_Lover &lt;&lt; endl;  //åªå†™å±æ€§ï¼Œä¸å¯ä»¥è¯»å–</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>ç»ƒä¹ æ¡ˆä¾‹1ï¼šè®¾è®¡ç«‹æ–¹ä½“ç±»</strong></p><p>è®¾è®¡ç«‹æ–¹ä½“ç±»(Cube)</p><p>æ±‚å‡ºç«‹æ–¹ä½“çš„é¢ç§¯å’Œä½“ç§¯</p><p>åˆ†åˆ«ç”¨å…¨å±€å‡½æ•°å’Œæˆå‘˜å‡½æ•°åˆ¤æ–­ä¸¤ä¸ªç«‹æ–¹ä½“æ˜¯å¦ç›¸ç­‰ã€‚</p><img src="/2024/10/16/C-%E6%A0%B8%E5%BF%83%E7%BC%96%E7%A8%8B/1545533548532.png" class="" width="1545533548532"><p><strong>ç»ƒä¹ æ¡ˆä¾‹2ï¼šç‚¹å’Œåœ†çš„å…³ç³»</strong></p><p>è®¾è®¡ä¸€ä¸ªåœ†å½¢ç±»ï¼ˆCircleï¼‰ï¼Œå’Œä¸€ä¸ªç‚¹ç±»ï¼ˆPointï¼‰ï¼Œè®¡ç®—ç‚¹å’Œåœ†çš„å…³ç³»ã€‚</p><img src="/2024/10/16/C-%E6%A0%B8%E5%BF%83%E7%BC%96%E7%A8%8B/1545533829184.png" class="" width="1545533829184"><h3 id="4-2-å¯¹è±¡çš„åˆå§‹åŒ–å’Œæ¸…ç†"><a href="#4-2-å¯¹è±¡çš„åˆå§‹åŒ–å’Œæ¸…ç†" class="headerlink" title="4.2 å¯¹è±¡çš„åˆå§‹åŒ–å’Œæ¸…ç†"></a>4.2 å¯¹è±¡çš„åˆå§‹åŒ–å’Œæ¸…ç†</h3><ul><li>ç”Ÿæ´»ä¸­æˆ‘ä»¬ä¹°çš„ç”µå­äº§å“éƒ½åŸºæœ¬ä¼šæœ‰å‡ºå‚è®¾ç½®ï¼Œåœ¨æŸä¸€å¤©æˆ‘ä»¬ä¸ç”¨æ—¶å€™ä¹Ÿä¼šåˆ é™¤ä¸€äº›è‡ªå·±ä¿¡æ¯æ•°æ®ä¿è¯å®‰å…¨</li><li>C++ä¸­çš„é¢å‘å¯¹è±¡æ¥æºäºç”Ÿæ´»ï¼Œæ¯ä¸ªå¯¹è±¡ä¹Ÿéƒ½ä¼šæœ‰åˆå§‹è®¾ç½®ä»¥åŠ å¯¹è±¡é”€æ¯å‰çš„æ¸…ç†æ•°æ®çš„è®¾ç½®ã€‚</li></ul><h4 id="4-2-1-æ„é€ å‡½æ•°å’Œææ„å‡½æ•°"><a href="#4-2-1-æ„é€ å‡½æ•°å’Œææ„å‡½æ•°" class="headerlink" title="4.2.1 æ„é€ å‡½æ•°å’Œææ„å‡½æ•°"></a>4.2.1 æ„é€ å‡½æ•°å’Œææ„å‡½æ•°</h4><p>å¯¹è±¡çš„<strong>åˆå§‹åŒ–å’Œæ¸…ç†</strong>ä¹Ÿæ˜¯ä¸¤ä¸ªéå¸¸é‡è¦çš„å®‰å…¨é—®é¢˜</p><p>â€‹ä¸€ä¸ªå¯¹è±¡æˆ–è€…å˜é‡æ²¡æœ‰åˆå§‹çŠ¶æ€ï¼Œå¯¹å…¶ä½¿ç”¨åæœæ˜¯æœªçŸ¥</p><p>â€‹åŒæ ·çš„ä½¿ç”¨å®Œä¸€ä¸ªå¯¹è±¡æˆ–å˜é‡ï¼Œæ²¡æœ‰åŠæ—¶æ¸…ç†ï¼Œä¹Ÿä¼šé€ æˆä¸€å®šçš„å®‰å…¨é—®é¢˜</p><p>c++åˆ©ç”¨äº†<strong>æ„é€ å‡½æ•°</strong>å’Œ<strong>ææ„å‡½æ•°</strong>è§£å†³ä¸Šè¿°é—®é¢˜ï¼Œè¿™ä¸¤ä¸ªå‡½æ•°å°†ä¼šè¢«ç¼–è¯‘å™¨è‡ªåŠ¨è°ƒç”¨ï¼Œå®Œæˆå¯¹è±¡åˆå§‹åŒ–å’Œæ¸…ç†å·¥ä½œã€‚</p><p>å¯¹è±¡çš„åˆå§‹åŒ–å’Œæ¸…ç†å·¥ä½œæ˜¯ç¼–è¯‘å™¨å¼ºåˆ¶è¦æˆ‘ä»¬åšçš„äº‹æƒ…ï¼Œå› æ­¤å¦‚æœ<strong>æˆ‘ä»¬ä¸æä¾›æ„é€ å’Œææ„ï¼Œç¼–è¯‘å™¨ä¼šæä¾›</strong></p><p><strong>ç¼–è¯‘å™¨æä¾›çš„æ„é€ å‡½æ•°å’Œææ„å‡½æ•°æ˜¯ç©ºå®ç°ã€‚</strong></p><ul><li>æ„é€ å‡½æ•°ï¼šä¸»è¦ä½œç”¨åœ¨äºåˆ›å»ºå¯¹è±¡æ—¶ä¸ºå¯¹è±¡çš„æˆå‘˜å±æ€§èµ‹å€¼ï¼Œæ„é€ å‡½æ•°ç”±ç¼–è¯‘å™¨è‡ªåŠ¨è°ƒç”¨ï¼Œæ— é¡»æ‰‹åŠ¨è°ƒç”¨ã€‚</li><li>ææ„å‡½æ•°ï¼šä¸»è¦ä½œç”¨åœ¨äºå¯¹è±¡<strong>é”€æ¯å‰</strong>ç³»ç»Ÿè‡ªåŠ¨è°ƒç”¨ï¼Œæ‰§è¡Œä¸€äº›æ¸…ç†å·¥ä½œã€‚</li></ul><p><strong>æ„é€ å‡½æ•°è¯­æ³•ï¼š</strong><code>ç±»å()&#123;&#125;</code></p><ol><li>æ„é€ å‡½æ•°ï¼Œæ²¡æœ‰è¿”å›å€¼ä¹Ÿä¸å†™void</li><li>å‡½æ•°åç§°ä¸ç±»åç›¸åŒ</li><li>æ„é€ å‡½æ•°å¯ä»¥æœ‰å‚æ•°ï¼Œå› æ­¤å¯ä»¥å‘ç”Ÿé‡è½½</li><li>ç¨‹åºåœ¨è°ƒç”¨å¯¹è±¡æ—¶å€™ä¼šè‡ªåŠ¨è°ƒç”¨æ„é€ ï¼Œæ— é¡»æ‰‹åŠ¨è°ƒç”¨,è€Œä¸”åªä¼šè°ƒç”¨ä¸€æ¬¡</li></ol><p><strong>ææ„å‡½æ•°è¯­æ³•ï¼š</strong> <code>~ç±»å()&#123;&#125;</code></p><ol><li>ææ„å‡½æ•°ï¼Œæ²¡æœ‰è¿”å›å€¼ä¹Ÿä¸å†™void</li><li>å‡½æ•°åç§°ä¸ç±»åç›¸åŒ,åœ¨åç§°å‰åŠ ä¸Šç¬¦å·  ~</li><li>ææ„å‡½æ•°ä¸å¯ä»¥æœ‰å‚æ•°ï¼Œå› æ­¤ä¸å¯ä»¥å‘ç”Ÿé‡è½½</li><li>ç¨‹åºåœ¨å¯¹è±¡é”€æ¯å‰ä¼šè‡ªåŠ¨è°ƒç”¨ææ„ï¼Œæ— é¡»æ‰‹åŠ¨è°ƒç”¨,è€Œä¸”åªä¼šè°ƒç”¨ä¸€æ¬¡</li></ol><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="comment">//æ„é€ å‡½æ•°</span></span><br><span class="line"><span class="built_in">Person</span>()</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Personçš„æ„é€ å‡½æ•°è°ƒç”¨&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//ææ„å‡½æ•°</span></span><br><span class="line">~<span class="built_in">Person</span>()</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Personçš„ææ„å‡½æ•°è°ƒç”¨&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Person p;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="4-2-2-æ„é€ å‡½æ•°çš„åˆ†ç±»åŠè°ƒç”¨"><a href="#4-2-2-æ„é€ å‡½æ•°çš„åˆ†ç±»åŠè°ƒç”¨" class="headerlink" title="4.2.2 æ„é€ å‡½æ•°çš„åˆ†ç±»åŠè°ƒç”¨"></a>4.2.2 æ„é€ å‡½æ•°çš„åˆ†ç±»åŠè°ƒç”¨</h4><p>ä¸¤ç§åˆ†ç±»æ–¹å¼ï¼š</p><p>â€‹æŒ‰å‚æ•°åˆ†ä¸ºï¼š æœ‰å‚æ„é€ å’Œæ— å‚æ„é€ </p><p>â€‹æŒ‰ç±»å‹åˆ†ä¸ºï¼š æ™®é€šæ„é€ å’Œæ‹·è´æ„é€ </p><p>ä¸‰ç§è°ƒç”¨æ–¹å¼ï¼š</p><p>â€‹æ‹¬å·æ³•</p><p>â€‹æ˜¾ç¤ºæ³•</p><p>â€‹éšå¼è½¬æ¢æ³•</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1ã€æ„é€ å‡½æ•°åˆ†ç±»</span></span><br><span class="line"><span class="comment">// æŒ‰ç…§å‚æ•°åˆ†ç±»åˆ†ä¸º æœ‰å‚å’Œæ— å‚æ„é€    æ— å‚åˆç§°ä¸ºé»˜è®¤æ„é€ å‡½æ•°</span></span><br><span class="line"><span class="comment">// æŒ‰ç…§ç±»å‹åˆ†ç±»åˆ†ä¸º æ™®é€šæ„é€ å’Œæ‹·è´æ„é€ </span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="comment">//æ— å‚ï¼ˆé»˜è®¤ï¼‰æ„é€ å‡½æ•°</span></span><br><span class="line"><span class="built_in">Person</span>() &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æ— å‚æ„é€ å‡½æ•°!&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æœ‰å‚æ„é€ å‡½æ•°</span></span><br><span class="line"><span class="built_in">Person</span>(<span class="type">int</span> a) &#123;</span><br><span class="line">age = a;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æœ‰å‚æ„é€ å‡½æ•°!&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æ‹·è´æ„é€ å‡½æ•°</span></span><br><span class="line"><span class="built_in">Person</span>(<span class="type">const</span> Person&amp; p) &#123;</span><br><span class="line">age = p.age;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æ‹·è´æ„é€ å‡½æ•°!&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//ææ„å‡½æ•°</span></span><br><span class="line">~<span class="built_in">Person</span>() &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;ææ„å‡½æ•°!&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="type">int</span> age;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//2ã€æ„é€ å‡½æ•°çš„è°ƒç”¨</span></span><br><span class="line"><span class="comment">//è°ƒç”¨æ— å‚æ„é€ å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span> </span>&#123;</span><br><span class="line">Person p; <span class="comment">//è°ƒç”¨æ— å‚æ„é€ å‡½æ•°</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è°ƒç”¨æœ‰å‚çš„æ„é€ å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test02</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//2.1  æ‹¬å·æ³•ï¼Œå¸¸ç”¨</span></span><br><span class="line"><span class="function">Person <span class="title">p1</span><span class="params">(<span class="number">10</span>)</span></span>;</span><br><span class="line"><span class="comment">//æ³¨æ„1ï¼šè°ƒç”¨æ— å‚æ„é€ å‡½æ•°ä¸èƒ½åŠ æ‹¬å·ï¼Œå¦‚æœåŠ äº†ç¼–è¯‘å™¨è®¤ä¸ºè¿™æ˜¯ä¸€ä¸ªå‡½æ•°å£°æ˜</span></span><br><span class="line"><span class="comment">//Person p2();</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//2.2 æ˜¾å¼æ³•</span></span><br><span class="line">Person p2 = <span class="built_in">Person</span>(<span class="number">10</span>); </span><br><span class="line">Person p3 = <span class="built_in">Person</span>(p2);</span><br><span class="line"><span class="comment">//Person(10)å•ç‹¬å†™å°±æ˜¯åŒ¿åå¯¹è±¡  å½“å‰è¡Œç»“æŸä¹‹åï¼Œé©¬ä¸Šææ„</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//2.3 éšå¼è½¬æ¢æ³•</span></span><br><span class="line">Person p4 = <span class="number">10</span>; <span class="comment">// Person p4 = Person(10); </span></span><br><span class="line">Person p5 = p4; <span class="comment">// Person p5 = Person(p4); </span></span><br><span class="line"></span><br><span class="line"><span class="comment">//æ³¨æ„2ï¼šä¸èƒ½åˆ©ç”¨ æ‹·è´æ„é€ å‡½æ•° åˆå§‹åŒ–åŒ¿åå¯¹è±¡ ç¼–è¯‘å™¨è®¤ä¸ºæ˜¯å¯¹è±¡å£°æ˜</span></span><br><span class="line"><span class="comment">//Person p5(p4);</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"><span class="comment">//test02();</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="4-2-3-æ‹·è´æ„é€ å‡½æ•°è°ƒç”¨æ—¶æœº"><a href="#4-2-3-æ‹·è´æ„é€ å‡½æ•°è°ƒç”¨æ—¶æœº" class="headerlink" title="4.2.3 æ‹·è´æ„é€ å‡½æ•°è°ƒç”¨æ—¶æœº"></a>4.2.3 æ‹·è´æ„é€ å‡½æ•°è°ƒç”¨æ—¶æœº</h4><p>C++ä¸­æ‹·è´æ„é€ å‡½æ•°è°ƒç”¨æ—¶æœºé€šå¸¸æœ‰ä¸‰ç§æƒ…å†µ</p><ul><li>ä½¿ç”¨ä¸€ä¸ªå·²ç»åˆ›å»ºå®Œæ¯•çš„å¯¹è±¡æ¥åˆå§‹åŒ–ä¸€ä¸ªæ–°å¯¹è±¡</li><li>å€¼ä¼ é€’çš„æ–¹å¼ç»™å‡½æ•°å‚æ•°ä¼ å€¼</li><li>ä»¥å€¼æ–¹å¼è¿”å›å±€éƒ¨å¯¹è±¡</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Person</span>() &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æ— å‚æ„é€ å‡½æ•°!&quot;</span> &lt;&lt; endl;</span><br><span class="line">mAge = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">Person</span>(<span class="type">int</span> age) &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æœ‰å‚æ„é€ å‡½æ•°!&quot;</span> &lt;&lt; endl;</span><br><span class="line">mAge = age;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">Person</span>(<span class="type">const</span> Person&amp; p) &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æ‹·è´æ„é€ å‡½æ•°!&quot;</span> &lt;&lt; endl;</span><br><span class="line">mAge = p.mAge;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//ææ„å‡½æ•°åœ¨é‡Šæ”¾å†…å­˜ä¹‹å‰è°ƒç”¨</span></span><br><span class="line">~<span class="built_in">Person</span>() &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;ææ„å‡½æ•°!&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="type">int</span> mAge;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//1. ä½¿ç”¨ä¸€ä¸ªå·²ç»åˆ›å»ºå®Œæ¯•çš„å¯¹è±¡æ¥åˆå§‹åŒ–ä¸€ä¸ªæ–°å¯¹è±¡</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="function">Person <span class="title">man</span><span class="params">(<span class="number">100</span>)</span></span>; <span class="comment">//på¯¹è±¡å·²ç»åˆ›å»ºå®Œæ¯•</span></span><br><span class="line"><span class="function">Person <span class="title">newman</span><span class="params">(man)</span></span>; <span class="comment">//è°ƒç”¨æ‹·è´æ„é€ å‡½æ•°</span></span><br><span class="line">Person newman2 = man; <span class="comment">//æ‹·è´æ„é€ </span></span><br><span class="line"></span><br><span class="line"><span class="comment">//Person newman3;</span></span><br><span class="line"><span class="comment">//newman3 = man; //ä¸æ˜¯è°ƒç”¨æ‹·è´æ„é€ å‡½æ•°ï¼Œèµ‹å€¼æ“ä½œ</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//2. å€¼ä¼ é€’çš„æ–¹å¼ç»™å‡½æ•°å‚æ•°ä¼ å€¼</span></span><br><span class="line"><span class="comment">//ç›¸å½“äºPerson p1 = p;</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">doWork</span><span class="params">(Person p1)</span> </span>&#123;&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test02</span><span class="params">()</span> </span>&#123;</span><br><span class="line">Person p; <span class="comment">//æ— å‚æ„é€ å‡½æ•°</span></span><br><span class="line"><span class="built_in">doWork</span>(p);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//3. ä»¥å€¼æ–¹å¼è¿”å›å±€éƒ¨å¯¹è±¡</span></span><br><span class="line"><span class="function">Person <span class="title">doWork2</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Person p1;</span><br><span class="line">cout &lt;&lt; (<span class="type">int</span> *)&amp;p1 &lt;&lt; endl;</span><br><span class="line"><span class="keyword">return</span> p1;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test03</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Person p = <span class="built_in">doWork2</span>();</span><br><span class="line">cout &lt;&lt; (<span class="type">int</span> *)&amp;p &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//test01();</span></span><br><span class="line"><span class="comment">//test02();</span></span><br><span class="line"><span class="built_in">test03</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="4-2-4-æ„é€ å‡½æ•°è°ƒç”¨è§„åˆ™"><a href="#4-2-4-æ„é€ å‡½æ•°è°ƒç”¨è§„åˆ™" class="headerlink" title="4.2.4 æ„é€ å‡½æ•°è°ƒç”¨è§„åˆ™"></a>4.2.4 æ„é€ å‡½æ•°è°ƒç”¨è§„åˆ™</h4><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œc++ç¼–è¯‘å™¨è‡³å°‘ç»™ä¸€ä¸ªç±»æ·»åŠ 3ä¸ªå‡½æ•°</p><p>1ï¼é»˜è®¤æ„é€ å‡½æ•°(æ— å‚ï¼Œå‡½æ•°ä½“ä¸ºç©º)</p><p>2ï¼é»˜è®¤ææ„å‡½æ•°(æ— å‚ï¼Œå‡½æ•°ä½“ä¸ºç©º)</p><p>3ï¼é»˜è®¤æ‹·è´æ„é€ å‡½æ•°ï¼Œå¯¹å±æ€§è¿›è¡Œå€¼æ‹·è´</p><p>æ„é€ å‡½æ•°è°ƒç”¨è§„åˆ™å¦‚ä¸‹ï¼š</p><ul><li><p>å¦‚æœç”¨æˆ·å®šä¹‰æœ‰å‚æ„é€ å‡½æ•°ï¼Œc++ä¸åœ¨æä¾›é»˜è®¤æ— å‚æ„é€ ï¼Œä½†æ˜¯ä¼šæä¾›é»˜è®¤æ‹·è´æ„é€ </p></li><li><p>å¦‚æœç”¨æˆ·å®šä¹‰æ‹·è´æ„é€ å‡½æ•°ï¼Œc++ä¸ä¼šå†æä¾›å…¶ä»–æ„é€ å‡½æ•°</p></li></ul><p>ç¤ºä¾‹ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="comment">//æ— å‚ï¼ˆé»˜è®¤ï¼‰æ„é€ å‡½æ•°</span></span><br><span class="line"><span class="built_in">Person</span>() &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æ— å‚æ„é€ å‡½æ•°!&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æœ‰å‚æ„é€ å‡½æ•°</span></span><br><span class="line"><span class="built_in">Person</span>(<span class="type">int</span> a) &#123;</span><br><span class="line">age = a;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æœ‰å‚æ„é€ å‡½æ•°!&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æ‹·è´æ„é€ å‡½æ•°</span></span><br><span class="line"><span class="built_in">Person</span>(<span class="type">const</span> Person&amp; p) &#123;</span><br><span class="line">age = p.age;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æ‹·è´æ„é€ å‡½æ•°!&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//ææ„å‡½æ•°</span></span><br><span class="line">~<span class="built_in">Person</span>() &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;ææ„å‡½æ•°!&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="type">int</span> age;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="function">Person <span class="title">p1</span><span class="params">(<span class="number">18</span>)</span></span>;</span><br><span class="line"><span class="comment">//å¦‚æœä¸å†™æ‹·è´æ„é€ ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨æ·»åŠ æ‹·è´æ„é€ ï¼Œå¹¶ä¸”åšæµ…æ‹·è´æ“ä½œ</span></span><br><span class="line"><span class="function">Person <span class="title">p2</span><span class="params">(p1)</span></span>;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;p2çš„å¹´é¾„ä¸ºï¼š &quot;</span> &lt;&lt; p2.age &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test02</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//å¦‚æœç”¨æˆ·æä¾›æœ‰å‚æ„é€ ï¼Œç¼–è¯‘å™¨ä¸ä¼šæä¾›é»˜è®¤æ„é€ ï¼Œä¼šæä¾›æ‹·è´æ„é€ </span></span><br><span class="line">Person p1; <span class="comment">//æ­¤æ—¶å¦‚æœç”¨æˆ·è‡ªå·±æ²¡æœ‰æä¾›é»˜è®¤æ„é€ ï¼Œä¼šå‡ºé”™</span></span><br><span class="line"><span class="function">Person <span class="title">p2</span><span class="params">(<span class="number">10</span>)</span></span>; <span class="comment">//ç”¨æˆ·æä¾›çš„æœ‰å‚</span></span><br><span class="line"><span class="function">Person <span class="title">p3</span><span class="params">(p2)</span></span>; <span class="comment">//æ­¤æ—¶å¦‚æœç”¨æˆ·æ²¡æœ‰æä¾›æ‹·è´æ„é€ ï¼Œç¼–è¯‘å™¨ä¼šæä¾›</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//å¦‚æœç”¨æˆ·æä¾›æ‹·è´æ„é€ ï¼Œç¼–è¯‘å™¨ä¸ä¼šæä¾›å…¶ä»–æ„é€ å‡½æ•°</span></span><br><span class="line">Person p4; <span class="comment">//æ­¤æ—¶å¦‚æœç”¨æˆ·è‡ªå·±æ²¡æœ‰æä¾›é»˜è®¤æ„é€ ï¼Œä¼šå‡ºé”™</span></span><br><span class="line"><span class="function">Person <span class="title">p5</span><span class="params">(<span class="number">10</span>)</span></span>; <span class="comment">//æ­¤æ—¶å¦‚æœç”¨æˆ·è‡ªå·±æ²¡æœ‰æä¾›æœ‰å‚ï¼Œä¼šå‡ºé”™</span></span><br><span class="line"><span class="function">Person <span class="title">p6</span><span class="params">(p5)</span></span>; <span class="comment">//ç”¨æˆ·è‡ªå·±æä¾›æ‹·è´æ„é€ </span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="4-2-5-æ·±æ‹·è´ä¸æµ…æ‹·è´"><a href="#4-2-5-æ·±æ‹·è´ä¸æµ…æ‹·è´" class="headerlink" title="4.2.5 æ·±æ‹·è´ä¸æµ…æ‹·è´"></a>4.2.5 æ·±æ‹·è´ä¸æµ…æ‹·è´</h4><p>æ·±æµ…æ‹·è´æ˜¯é¢è¯•ç»å…¸é—®é¢˜ï¼Œä¹Ÿæ˜¯å¸¸è§çš„ä¸€ä¸ªå‘</p><p>æµ…æ‹·è´ï¼šç®€å•çš„èµ‹å€¼æ‹·è´æ“ä½œ</p><p>æ·±æ‹·è´ï¼šåœ¨å †åŒºé‡æ–°ç”³è¯·ç©ºé—´ï¼Œè¿›è¡Œæ‹·è´æ“ä½œ</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="comment">//æ— å‚ï¼ˆé»˜è®¤ï¼‰æ„é€ å‡½æ•°</span></span><br><span class="line"><span class="built_in">Person</span>() &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æ— å‚æ„é€ å‡½æ•°!&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æœ‰å‚æ„é€ å‡½æ•°</span></span><br><span class="line"><span class="built_in">Person</span>(<span class="type">int</span> age ,<span class="type">int</span> height) &#123;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æœ‰å‚æ„é€ å‡½æ•°!&quot;</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">m_age = age;</span><br><span class="line">m_height = <span class="keyword">new</span> <span class="built_in">int</span>(height);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æ‹·è´æ„é€ å‡½æ•°  </span></span><br><span class="line"><span class="built_in">Person</span>(<span class="type">const</span> Person&amp; p) &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æ‹·è´æ„é€ å‡½æ•°!&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="comment">//å¦‚æœä¸åˆ©ç”¨æ·±æ‹·è´åœ¨å †åŒºåˆ›å»ºæ–°å†…å­˜ï¼Œä¼šå¯¼è‡´æµ…æ‹·è´å¸¦æ¥çš„é‡å¤é‡Šæ”¾å †åŒºé—®é¢˜</span></span><br><span class="line">m_age = p.m_age;</span><br><span class="line">m_height = <span class="keyword">new</span> <span class="built_in">int</span>(*p.m_height);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ææ„å‡½æ•°</span></span><br><span class="line">~<span class="built_in">Person</span>() &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;ææ„å‡½æ•°!&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="keyword">if</span> (m_height != <span class="literal">NULL</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">delete</span> m_height;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="type">int</span> m_age;</span><br><span class="line"><span class="type">int</span>* m_height;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="function">Person <span class="title">p1</span><span class="params">(<span class="number">18</span>, <span class="number">180</span>)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function">Person <span class="title">p2</span><span class="params">(p1)</span></span>;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;p1çš„å¹´é¾„ï¼š &quot;</span> &lt;&lt; p1.m_age &lt;&lt; <span class="string">&quot; èº«é«˜ï¼š &quot;</span> &lt;&lt; *p1.m_height &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;p2çš„å¹´é¾„ï¼š &quot;</span> &lt;&lt; p2.m_age &lt;&lt; <span class="string">&quot; èº«é«˜ï¼š &quot;</span> &lt;&lt; *p2.m_height &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ€»ç»“ï¼šå¦‚æœå±æ€§æœ‰åœ¨å †åŒºå¼€è¾Ÿçš„ï¼Œä¸€å®šè¦è‡ªå·±æä¾›æ‹·è´æ„é€ å‡½æ•°ï¼Œé˜²æ­¢æµ…æ‹·è´å¸¦æ¥çš„é—®é¢˜</p></blockquote><h4 id="4-2-6-åˆå§‹åŒ–åˆ—è¡¨"><a href="#4-2-6-åˆå§‹åŒ–åˆ—è¡¨" class="headerlink" title="4.2.6 åˆå§‹åŒ–åˆ—è¡¨"></a>4.2.6 åˆå§‹åŒ–åˆ—è¡¨</h4><p><strong>ä½œç”¨ï¼š</strong></p><p>C++æä¾›äº†åˆå§‹åŒ–åˆ—è¡¨è¯­æ³•ï¼Œç”¨æ¥åˆå§‹åŒ–å±æ€§</p><p><strong>è¯­æ³•ï¼š</strong><code>æ„é€ å‡½æ•°()ï¼šå±æ€§1(å€¼1),å±æ€§2ï¼ˆå€¼2ï¼‰... &#123;&#125;</code></p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"></span><br><span class="line"><span class="comment">////ä¼ ç»Ÿæ–¹å¼åˆå§‹åŒ–</span></span><br><span class="line"><span class="comment">//Person(int a, int b, int c) &#123;</span></span><br><span class="line"><span class="comment">//m_A = a;</span></span><br><span class="line"><span class="comment">//m_B = b;</span></span><br><span class="line"><span class="comment">//m_C = c;</span></span><br><span class="line"><span class="comment">//&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆå§‹åŒ–åˆ—è¡¨æ–¹å¼åˆå§‹åŒ–</span></span><br><span class="line"><span class="built_in">Person</span>(<span class="type">int</span> a, <span class="type">int</span> b, <span class="type">int</span> c) :<span class="built_in">m_A</span>(a), <span class="built_in">m_B</span>(b), <span class="built_in">m_C</span>(c) &#123;&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">PrintPerson</span><span class="params">()</span> </span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;mA:&quot;</span> &lt;&lt; m_A &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;mB:&quot;</span> &lt;&lt; m_B &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;mC:&quot;</span> &lt;&lt; m_C &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line"><span class="type">int</span> m_A;</span><br><span class="line"><span class="type">int</span> m_B;</span><br><span class="line"><span class="type">int</span> m_C;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="function">Person <span class="title">p</span><span class="params">(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)</span></span>;</span><br><span class="line">p.<span class="built_in">PrintPerson</span>();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="4-2-7-ç±»å¯¹è±¡ä½œä¸ºç±»æˆå‘˜"><a href="#4-2-7-ç±»å¯¹è±¡ä½œä¸ºç±»æˆå‘˜" class="headerlink" title="4.2.7 ç±»å¯¹è±¡ä½œä¸ºç±»æˆå‘˜"></a>4.2.7 ç±»å¯¹è±¡ä½œä¸ºç±»æˆå‘˜</h4><p>C++ç±»ä¸­çš„æˆå‘˜å¯ä»¥æ˜¯å¦ä¸€ä¸ªç±»çš„å¯¹è±¡ï¼Œæˆ‘ä»¬ç§°è¯¥æˆå‘˜ä¸º å¯¹è±¡æˆå‘˜</p><p>ä¾‹å¦‚ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">A</span> &#123;&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">B</span></span><br><span class="line">&#123;</span><br><span class="line">    A aï¼›</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Bç±»ä¸­æœ‰å¯¹è±¡Aä½œä¸ºæˆå‘˜ï¼ŒAä¸ºå¯¹è±¡æˆå‘˜</p><p>é‚£ä¹ˆå½“åˆ›å»ºBå¯¹è±¡æ—¶ï¼ŒAä¸Bçš„æ„é€ å’Œææ„çš„é¡ºåºæ˜¯è°å…ˆè°åï¼Ÿ</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Phone</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Phone</span>(string name)</span><br><span class="line">&#123;</span><br><span class="line">m_PhoneName = name;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Phoneæ„é€ &quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">~<span class="built_in">Phone</span>()</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Phoneææ„&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">string m_PhoneName;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆå§‹åŒ–åˆ—è¡¨å¯ä»¥å‘Šè¯‰ç¼–è¯‘å™¨è°ƒç”¨å“ªä¸€ä¸ªæ„é€ å‡½æ•°</span></span><br><span class="line"><span class="built_in">Person</span>(string name, string pName) :<span class="built_in">m_Name</span>(name), <span class="built_in">m_Phone</span>(pName)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Personæ„é€ &quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">~<span class="built_in">Person</span>()</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Personææ„&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">playGame</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; m_Name &lt;&lt; <span class="string">&quot; ä½¿ç”¨&quot;</span> &lt;&lt; m_Phone.m_PhoneName &lt;&lt; <span class="string">&quot; ç‰Œæ‰‹æœº! &quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">string m_Name;</span><br><span class="line">Phone m_Phone;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//å½“ç±»ä¸­æˆå‘˜æ˜¯å…¶ä»–ç±»å¯¹è±¡æ—¶ï¼Œæˆ‘ä»¬ç§°è¯¥æˆå‘˜ä¸º å¯¹è±¡æˆå‘˜</span></span><br><span class="line"><span class="comment">//æ„é€ çš„é¡ºåºæ˜¯ ï¼šå…ˆè°ƒç”¨å¯¹è±¡æˆå‘˜çš„æ„é€ ï¼Œå†è°ƒç”¨æœ¬ç±»æ„é€ </span></span><br><span class="line"><span class="comment">//ææ„é¡ºåºä¸æ„é€ ç›¸å</span></span><br><span class="line"><span class="function">Person <span class="title">p</span><span class="params">(<span class="string">&quot;å¼ ä¸‰&quot;</span> , <span class="string">&quot;è‹¹æœX&quot;</span>)</span></span>;</span><br><span class="line">p.<span class="built_in">playGame</span>();</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="4-2-8-é™æ€æˆå‘˜"><a href="#4-2-8-é™æ€æˆå‘˜" class="headerlink" title="4.2.8 é™æ€æˆå‘˜"></a>4.2.8 é™æ€æˆå‘˜</h4><p>é™æ€æˆå‘˜å°±æ˜¯åœ¨æˆå‘˜å˜é‡å’Œæˆå‘˜å‡½æ•°å‰åŠ ä¸Šå…³é”®å­—staticï¼Œç§°ä¸ºé™æ€æˆå‘˜</p><p>é™æ€æˆå‘˜åˆ†ä¸ºï¼š</p><ul><li>é™æ€æˆå‘˜å˜é‡<ul><li>æ‰€æœ‰å¯¹è±¡å…±äº«åŒä¸€ä»½æ•°æ®</li><li>åœ¨ç¼–è¯‘é˜¶æ®µåˆ†é…å†…å­˜</li><li>ç±»å†…å£°æ˜ï¼Œç±»å¤–åˆå§‹åŒ–</li></ul></li><li>é™æ€æˆå‘˜å‡½æ•°<ul><li>æ‰€æœ‰å¯¹è±¡å…±äº«åŒä¸€ä¸ªå‡½æ•°</li><li>é™æ€æˆå‘˜å‡½æ•°åªèƒ½è®¿é—®é™æ€æˆå‘˜å˜é‡</li></ul></li></ul><p><strong>ç¤ºä¾‹1 ï¼š</strong>é™æ€æˆå‘˜å˜é‡</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"></span><br><span class="line"><span class="type">static</span> <span class="type">int</span> m_A; <span class="comment">//é™æ€æˆå‘˜å˜é‡</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//é™æ€æˆå‘˜å˜é‡ç‰¹ç‚¹ï¼š</span></span><br><span class="line"><span class="comment">//1 åœ¨ç¼–è¯‘é˜¶æ®µåˆ†é…å†…å­˜</span></span><br><span class="line"><span class="comment">//2 ç±»å†…å£°æ˜ï¼Œç±»å¤–åˆå§‹åŒ–</span></span><br><span class="line"><span class="comment">//3 æ‰€æœ‰å¯¹è±¡å…±äº«åŒä¸€ä»½æ•°æ®</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line"><span class="type">static</span> <span class="type">int</span> m_B; <span class="comment">//é™æ€æˆå‘˜å˜é‡ä¹Ÿæ˜¯æœ‰è®¿é—®æƒé™çš„</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="type">int</span> Person::m_A = <span class="number">10</span>;</span><br><span class="line"><span class="type">int</span> Person::m_B = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//é™æ€æˆå‘˜å˜é‡ä¸¤ç§è®¿é—®æ–¹å¼</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//1ã€é€šè¿‡å¯¹è±¡</span></span><br><span class="line">Person p1;</span><br><span class="line">p1.m_A = <span class="number">100</span>;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;p1.m_A = &quot;</span> &lt;&lt; p1.m_A &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">Person p2;</span><br><span class="line">p2.m_A = <span class="number">200</span>;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;p1.m_A = &quot;</span> &lt;&lt; p1.m_A &lt;&lt; endl; <span class="comment">//å…±äº«åŒä¸€ä»½æ•°æ®</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;p2.m_A = &quot;</span> &lt;&lt; p2.m_A &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="comment">//2ã€é€šè¿‡ç±»å</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;m_A = &quot;</span> &lt;&lt; Person::m_A &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//cout &lt;&lt; &quot;m_B = &quot; &lt;&lt; Person::m_B &lt;&lt; endl; //ç§æœ‰æƒé™è®¿é—®ä¸åˆ°</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>ç¤ºä¾‹2ï¼š</strong>é™æ€æˆå‘˜å‡½æ•°</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"></span><br><span class="line"><span class="comment">//é™æ€æˆå‘˜å‡½æ•°ç‰¹ç‚¹ï¼š</span></span><br><span class="line"><span class="comment">//1 ç¨‹åºå…±äº«ä¸€ä¸ªå‡½æ•°</span></span><br><span class="line"><span class="comment">//2 é™æ€æˆå‘˜å‡½æ•°åªèƒ½è®¿é—®é™æ€æˆå‘˜å˜é‡</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">static</span> <span class="type">void</span> <span class="title">func</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;funcè°ƒç”¨&quot;</span> &lt;&lt; endl;</span><br><span class="line">m_A = <span class="number">100</span>;</span><br><span class="line"><span class="comment">//m_B = 100; //é”™è¯¯ï¼Œä¸å¯ä»¥è®¿é—®éé™æ€æˆå‘˜å˜é‡</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">static</span> <span class="type">int</span> m_A; <span class="comment">//é™æ€æˆå‘˜å˜é‡</span></span><br><span class="line"><span class="type">int</span> m_B; <span class="comment">// </span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line"></span><br><span class="line"><span class="comment">//é™æ€æˆå‘˜å‡½æ•°ä¹Ÿæ˜¯æœ‰è®¿é—®æƒé™çš„</span></span><br><span class="line"><span class="function"><span class="type">static</span> <span class="type">void</span> <span class="title">func2</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;func2è°ƒç”¨&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="type">int</span> Person::m_A = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//é™æ€æˆå‘˜å˜é‡ä¸¤ç§è®¿é—®æ–¹å¼</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//1ã€é€šè¿‡å¯¹è±¡</span></span><br><span class="line">Person p1;</span><br><span class="line">p1.<span class="built_in">func</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">//2ã€é€šè¿‡ç±»å</span></span><br><span class="line">Person::<span class="built_in">func</span>();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//Person::func2(); //ç§æœ‰æƒé™è®¿é—®ä¸åˆ°</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="4-3-C-å¯¹è±¡æ¨¡å‹å’ŒthisæŒ‡é’ˆ"><a href="#4-3-C-å¯¹è±¡æ¨¡å‹å’ŒthisæŒ‡é’ˆ" class="headerlink" title="4.3 C++å¯¹è±¡æ¨¡å‹å’ŒthisæŒ‡é’ˆ"></a>4.3 C++å¯¹è±¡æ¨¡å‹å’ŒthisæŒ‡é’ˆ</h3><h4 id="4-3-1-æˆå‘˜å˜é‡å’Œæˆå‘˜å‡½æ•°åˆ†å¼€å­˜å‚¨"><a href="#4-3-1-æˆå‘˜å˜é‡å’Œæˆå‘˜å‡½æ•°åˆ†å¼€å­˜å‚¨" class="headerlink" title="4.3.1 æˆå‘˜å˜é‡å’Œæˆå‘˜å‡½æ•°åˆ†å¼€å­˜å‚¨"></a>4.3.1 æˆå‘˜å˜é‡å’Œæˆå‘˜å‡½æ•°åˆ†å¼€å­˜å‚¨</h4><p>åœ¨C++ä¸­ï¼Œç±»å†…çš„æˆå‘˜å˜é‡å’Œæˆå‘˜å‡½æ•°åˆ†å¼€å­˜å‚¨</p><p>åªæœ‰éé™æ€æˆå‘˜å˜é‡æ‰å±äºç±»çš„å¯¹è±¡ä¸Š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Person</span>() &#123;</span><br><span class="line">mA = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//éé™æ€æˆå‘˜å˜é‡å å¯¹è±¡ç©ºé—´</span></span><br><span class="line"><span class="type">int</span> mA;</span><br><span class="line"><span class="comment">//é™æ€æˆå‘˜å˜é‡ä¸å å¯¹è±¡ç©ºé—´</span></span><br><span class="line"><span class="type">static</span> <span class="type">int</span> mB; </span><br><span class="line"><span class="comment">//å‡½æ•°ä¹Ÿä¸å å¯¹è±¡ç©ºé—´ï¼Œæ‰€æœ‰å‡½æ•°å…±äº«ä¸€ä¸ªå‡½æ•°å®ä¾‹</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">()</span> </span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;mA:&quot;</span> &lt;&lt; <span class="keyword">this</span>-&gt;mA &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//é™æ€æˆå‘˜å‡½æ•°ä¹Ÿä¸å å¯¹è±¡ç©ºé—´</span></span><br><span class="line"><span class="function"><span class="type">static</span> <span class="type">void</span> <span class="title">sfunc</span><span class="params">()</span> </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="built_in">sizeof</span>(Person) &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="4-3-2-thisæŒ‡é’ˆæ¦‚å¿µ"><a href="#4-3-2-thisæŒ‡é’ˆæ¦‚å¿µ" class="headerlink" title="4.3.2 thisæŒ‡é’ˆæ¦‚å¿µ"></a>4.3.2 thisæŒ‡é’ˆæ¦‚å¿µ</h4><p>é€šè¿‡4.3.1æˆ‘ä»¬çŸ¥é“åœ¨C++ä¸­æˆå‘˜å˜é‡å’Œæˆå‘˜å‡½æ•°æ˜¯åˆ†å¼€å­˜å‚¨çš„</p><p>æ¯ä¸€ä¸ªéé™æ€æˆå‘˜å‡½æ•°åªä¼šè¯ç”Ÿä¸€ä»½å‡½æ•°å®ä¾‹ï¼Œä¹Ÿå°±æ˜¯è¯´å¤šä¸ªåŒç±»å‹çš„å¯¹è±¡ä¼šå…±ç”¨ä¸€å—ä»£ç </p><p>é‚£ä¹ˆé—®é¢˜æ˜¯ï¼šè¿™ä¸€å—ä»£ç æ˜¯å¦‚ä½•åŒºåˆ†é‚£ä¸ªå¯¹è±¡è°ƒç”¨è‡ªå·±çš„å‘¢ï¼Ÿ</p><p>c++é€šè¿‡æä¾›ç‰¹æ®Šçš„å¯¹è±¡æŒ‡é’ˆï¼ŒthisæŒ‡é’ˆï¼Œè§£å†³ä¸Šè¿°é—®é¢˜ã€‚<strong>thisæŒ‡é’ˆæŒ‡å‘è¢«è°ƒç”¨çš„æˆå‘˜å‡½æ•°æ‰€å±çš„å¯¹è±¡</strong></p><p>thisæŒ‡é’ˆæ˜¯éšå«æ¯ä¸€ä¸ªéé™æ€æˆå‘˜å‡½æ•°å†…çš„ä¸€ç§æŒ‡é’ˆ</p><p>thisæŒ‡é’ˆä¸éœ€è¦å®šä¹‰ï¼Œç›´æ¥ä½¿ç”¨å³å¯</p><p>thisæŒ‡é’ˆçš„ç”¨é€”ï¼š</p><ul><li>å½“å½¢å‚å’Œæˆå‘˜å˜é‡åŒåæ—¶ï¼Œå¯ç”¨thisæŒ‡é’ˆæ¥åŒºåˆ†</li><li>åœ¨ç±»çš„éé™æ€æˆå‘˜å‡½æ•°ä¸­è¿”å›å¯¹è±¡æœ¬èº«ï¼Œå¯ä½¿ç”¨return *this</li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"></span><br><span class="line"><span class="built_in">Person</span>(<span class="type">int</span> age)</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">//1ã€å½“å½¢å‚å’Œæˆå‘˜å˜é‡åŒåæ—¶ï¼Œå¯ç”¨thisæŒ‡é’ˆæ¥åŒºåˆ†</span></span><br><span class="line"><span class="keyword">this</span>-&gt;age = age;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">Person&amp; <span class="title">PersonAddPerson</span><span class="params">(Person p)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">this</span>-&gt;age += p.age;</span><br><span class="line"><span class="comment">//è¿”å›å¯¹è±¡æœ¬èº«</span></span><br><span class="line"><span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> age;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="function">Person <span class="title">p1</span><span class="params">(<span class="number">10</span>)</span></span>;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;p1.age = &quot;</span> &lt;&lt; p1.age &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="function">Person <span class="title">p2</span><span class="params">(<span class="number">10</span>)</span></span>;</span><br><span class="line">p2.<span class="built_in">PersonAddPerson</span>(p1).<span class="built_in">PersonAddPerson</span>(p1).<span class="built_in">PersonAddPerson</span>(p1);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;p2.age = &quot;</span> &lt;&lt; p2.age &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="4-3-3-ç©ºæŒ‡é’ˆè®¿é—®æˆå‘˜å‡½æ•°"><a href="#4-3-3-ç©ºæŒ‡é’ˆè®¿é—®æˆå‘˜å‡½æ•°" class="headerlink" title="4.3.3 ç©ºæŒ‡é’ˆè®¿é—®æˆå‘˜å‡½æ•°"></a>4.3.3 ç©ºæŒ‡é’ˆè®¿é—®æˆå‘˜å‡½æ•°</h4><p>C++ä¸­ç©ºæŒ‡é’ˆä¹Ÿæ˜¯å¯ä»¥è°ƒç”¨æˆå‘˜å‡½æ•°çš„ï¼Œä½†æ˜¯ä¹Ÿè¦æ³¨æ„æœ‰æ²¡æœ‰ç”¨åˆ°thisæŒ‡é’ˆ</p><p>å¦‚æœç”¨åˆ°thisæŒ‡é’ˆï¼Œéœ€è¦åŠ ä»¥åˆ¤æ–­ä¿è¯ä»£ç çš„å¥å£®æ€§</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ç©ºæŒ‡é’ˆè®¿é—®æˆå‘˜å‡½æ•°</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">ShowClassName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æˆ‘æ˜¯Personç±»!&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">ShowPerson</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">this</span> == <span class="literal">NULL</span>) &#123;</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; mAge &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="type">int</span> mAge;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Person * p = <span class="literal">NULL</span>;</span><br><span class="line">p-&gt;<span class="built_in">ShowClassName</span>(); <span class="comment">//ç©ºæŒ‡é’ˆï¼Œå¯ä»¥è°ƒç”¨æˆå‘˜å‡½æ•°</span></span><br><span class="line">p-&gt;<span class="built_in">ShowPerson</span>();  <span class="comment">//ä½†æ˜¯å¦‚æœæˆå‘˜å‡½æ•°ä¸­ç”¨åˆ°äº†thisæŒ‡é’ˆï¼Œå°±ä¸å¯ä»¥äº†</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="4-3-4-constä¿®é¥°æˆå‘˜å‡½æ•°"><a href="#4-3-4-constä¿®é¥°æˆå‘˜å‡½æ•°" class="headerlink" title="4.3.4 constä¿®é¥°æˆå‘˜å‡½æ•°"></a>4.3.4 constä¿®é¥°æˆå‘˜å‡½æ•°</h4><p><strong>å¸¸å‡½æ•°ï¼š</strong></p><ul><li>æˆå‘˜å‡½æ•°ååŠ conståæˆ‘ä»¬ç§°ä¸ºè¿™ä¸ªå‡½æ•°ä¸º<strong>å¸¸å‡½æ•°</strong></li><li>å¸¸å‡½æ•°å†…ä¸å¯ä»¥ä¿®æ”¹æˆå‘˜å±æ€§</li><li>æˆå‘˜å±æ€§å£°æ˜æ—¶åŠ å…³é”®å­—mutableåï¼Œåœ¨å¸¸å‡½æ•°ä¸­ä¾ç„¶å¯ä»¥ä¿®æ”¹</li></ul><p><strong>å¸¸å¯¹è±¡ï¼š</strong></p><ul><li>å£°æ˜å¯¹è±¡å‰åŠ constç§°è¯¥å¯¹è±¡ä¸ºå¸¸å¯¹è±¡</li><li>å¸¸å¯¹è±¡åªèƒ½è°ƒç”¨å¸¸å‡½æ•°</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Person</span>() &#123;</span><br><span class="line">m_A = <span class="number">0</span>;</span><br><span class="line">m_B = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//thisæŒ‡é’ˆçš„æœ¬è´¨æ˜¯ä¸€ä¸ªæŒ‡é’ˆå¸¸é‡ï¼ŒæŒ‡é’ˆçš„æŒ‡å‘ä¸å¯ä¿®æ”¹</span></span><br><span class="line"><span class="comment">//å¦‚æœæƒ³è®©æŒ‡é’ˆæŒ‡å‘çš„å€¼ä¹Ÿä¸å¯ä»¥ä¿®æ”¹ï¼Œéœ€è¦å£°æ˜å¸¸å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">ShowPerson</span><span class="params">()</span> <span class="type">const</span> </span>&#123;</span><br><span class="line"><span class="comment">//const Type* const pointer;</span></span><br><span class="line"><span class="comment">//this = NULL; //ä¸èƒ½ä¿®æ”¹æŒ‡é’ˆçš„æŒ‡å‘ Person* const this;</span></span><br><span class="line"><span class="comment">//this-&gt;mA = 100; //ä½†æ˜¯thisæŒ‡é’ˆæŒ‡å‘çš„å¯¹è±¡çš„æ•°æ®æ˜¯å¯ä»¥ä¿®æ”¹çš„</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//constä¿®é¥°æˆå‘˜å‡½æ•°ï¼Œè¡¨ç¤ºæŒ‡é’ˆæŒ‡å‘çš„å†…å­˜ç©ºé—´çš„æ•°æ®ä¸èƒ½ä¿®æ”¹ï¼Œé™¤äº†mutableä¿®é¥°çš„å˜é‡</span></span><br><span class="line"><span class="keyword">this</span>-&gt;m_B = <span class="number">100</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">MyFunc</span><span class="params">()</span> <span class="type">const</span> </span>&#123;</span><br><span class="line"><span class="comment">//mA = 10000;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="type">int</span> m_A;</span><br><span class="line"><span class="keyword">mutable</span> <span class="type">int</span> m_B; <span class="comment">//å¯ä¿®æ”¹ å¯å˜çš„</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//constä¿®é¥°å¯¹è±¡  å¸¸å¯¹è±¡</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> Person person; <span class="comment">//å¸¸é‡å¯¹è±¡  </span></span><br><span class="line">cout &lt;&lt; person.m_A &lt;&lt; endl;</span><br><span class="line"><span class="comment">//person.mA = 100; //å¸¸å¯¹è±¡ä¸èƒ½ä¿®æ”¹æˆå‘˜å˜é‡çš„å€¼,ä½†æ˜¯å¯ä»¥è®¿é—®</span></span><br><span class="line">person.m_B = <span class="number">100</span>; <span class="comment">//ä½†æ˜¯å¸¸å¯¹è±¡å¯ä»¥ä¿®æ”¹mutableä¿®é¥°æˆå‘˜å˜é‡</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//å¸¸å¯¹è±¡è®¿é—®æˆå‘˜å‡½æ•°</span></span><br><span class="line">person.<span class="built_in">MyFunc</span>(); <span class="comment">//å¸¸å¯¹è±¡ä¸èƒ½è°ƒç”¨constçš„å‡½æ•°</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="4-4-å‹å…ƒ"><a href="#4-4-å‹å…ƒ" class="headerlink" title="4.4 å‹å…ƒ"></a>4.4 å‹å…ƒ</h3><p>ç”Ÿæ´»ä¸­ä½ çš„å®¶æœ‰å®¢å…(Public)ï¼Œæœ‰ä½ çš„å§å®¤(Private)</p><p>å®¢å…æ‰€æœ‰æ¥çš„å®¢äººéƒ½å¯ä»¥è¿›å»ï¼Œä½†æ˜¯ä½ çš„å§å®¤æ˜¯ç§æœ‰çš„ï¼Œä¹Ÿå°±æ˜¯è¯´åªæœ‰ä½ èƒ½è¿›å»</p><p>ä½†æ˜¯å‘¢ï¼Œä½ ä¹Ÿå¯ä»¥å…è®¸ä½ çš„å¥½é—ºèœœå¥½åŸºå‹è¿›å»ã€‚</p><p>åœ¨ç¨‹åºé‡Œï¼Œæœ‰äº›ç§æœ‰å±æ€§ ä¹Ÿæƒ³è®©ç±»å¤–ç‰¹æ®Šçš„ä¸€äº›å‡½æ•°æˆ–è€…ç±»è¿›è¡Œè®¿é—®ï¼Œå°±éœ€è¦ç”¨åˆ°å‹å…ƒçš„æŠ€æœ¯</p><p>å‹å…ƒçš„ç›®çš„å°±æ˜¯è®©ä¸€ä¸ªå‡½æ•°æˆ–è€…ç±» è®¿é—®å¦ä¸€ä¸ªç±»ä¸­ç§æœ‰æˆå‘˜</p><p>å‹å…ƒçš„å…³é”®å­—ä¸º  &#x3D;&#x3D;friend&#x3D;&#x3D;</p><p>å‹å…ƒçš„ä¸‰ç§å®ç°</p><ul><li>å…¨å±€å‡½æ•°åšå‹å…ƒ</li><li>ç±»åšå‹å…ƒ</li><li>æˆå‘˜å‡½æ•°åšå‹å…ƒ</li></ul><h4 id="4-4-1-å…¨å±€å‡½æ•°åšå‹å…ƒ"><a href="#4-4-1-å…¨å±€å‡½æ•°åšå‹å…ƒ" class="headerlink" title="4.4.1 å…¨å±€å‡½æ•°åšå‹å…ƒ"></a>4.4.1 å…¨å±€å‡½æ•°åšå‹å…ƒ</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Building</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">//å‘Šè¯‰ç¼–è¯‘å™¨ goodGayå…¨å±€å‡½æ•° æ˜¯ Buildingç±»çš„å¥½æœ‹å‹ï¼Œå¯ä»¥è®¿é—®ç±»ä¸­çš„ç§æœ‰å†…å®¹</span></span><br><span class="line"><span class="function"><span class="keyword">friend</span> <span class="type">void</span> <span class="title">goodGay</span><span class="params">(Building * building)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"></span><br><span class="line"><span class="built_in">Building</span>()</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_SittingRoom = <span class="string">&quot;å®¢å…&quot;</span>;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_BedRoom = <span class="string">&quot;å§å®¤&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">string m_SittingRoom; <span class="comment">//å®¢å…</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">string m_BedRoom; <span class="comment">//å§å®¤</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">goodGay</span><span class="params">(Building * building)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å¥½åŸºå‹æ­£åœ¨è®¿é—®ï¼š &quot;</span> &lt;&lt; building-&gt;m_SittingRoom &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å¥½åŸºå‹æ­£åœ¨è®¿é—®ï¼š &quot;</span> &lt;&lt; building-&gt;m_BedRoom &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Building b;</span><br><span class="line"><span class="built_in">goodGay</span>(&amp;b);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="4-4-2-ç±»åšå‹å…ƒ"><a href="#4-4-2-ç±»åšå‹å…ƒ" class="headerlink" title="4.4.2 ç±»åšå‹å…ƒ"></a>4.4.2 ç±»åšå‹å…ƒ</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Building</span>;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">goodGay</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"></span><br><span class="line"><span class="built_in">goodGay</span>();</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">visit</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">Building *building;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Building</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">//å‘Šè¯‰ç¼–è¯‘å™¨ goodGayç±»æ˜¯Buildingç±»çš„å¥½æœ‹å‹ï¼Œå¯ä»¥è®¿é—®åˆ°Buildingç±»ä¸­ç§æœ‰å†…å®¹</span></span><br><span class="line"><span class="keyword">friend</span> <span class="keyword">class</span> <span class="title class_">goodGay</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Building</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">string m_SittingRoom; <span class="comment">//å®¢å…</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">string m_BedRoom;<span class="comment">//å§å®¤</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">Building::<span class="built_in">Building</span>()</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_SittingRoom = <span class="string">&quot;å®¢å…&quot;</span>;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_BedRoom = <span class="string">&quot;å§å®¤&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">goodGay::<span class="built_in">goodGay</span>()</span><br><span class="line">&#123;</span><br><span class="line">building = <span class="keyword">new</span> Building;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">goodGay::visit</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å¥½åŸºå‹æ­£åœ¨è®¿é—®&quot;</span> &lt;&lt; building-&gt;m_SittingRoom &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å¥½åŸºå‹æ­£åœ¨è®¿é—®&quot;</span> &lt;&lt; building-&gt;m_BedRoom &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">goodGay gg;</span><br><span class="line">gg.<span class="built_in">visit</span>();</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="4-4-3-æˆå‘˜å‡½æ•°åšå‹å…ƒ"><a href="#4-4-3-æˆå‘˜å‡½æ•°åšå‹å…ƒ" class="headerlink" title="4.4.3 æˆå‘˜å‡½æ•°åšå‹å…ƒ"></a>4.4.3 æˆå‘˜å‡½æ•°åšå‹å…ƒ</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Building</span>;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">goodGay</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"></span><br><span class="line"><span class="built_in">goodGay</span>();</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">visit</span><span class="params">()</span></span>; <span class="comment">//åªè®©visitå‡½æ•°ä½œä¸ºBuildingçš„å¥½æœ‹å‹ï¼Œå¯ä»¥å‘è®¿é—®Buildingä¸­ç§æœ‰å†…å®¹</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">visit2</span><span class="params">()</span></span>; </span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">Building *building;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Building</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">//å‘Šè¯‰ç¼–è¯‘å™¨  goodGayç±»ä¸­çš„visitæˆå‘˜å‡½æ•° æ˜¯Buildingå¥½æœ‹å‹ï¼Œå¯ä»¥è®¿é—®ç§æœ‰å†…å®¹</span></span><br><span class="line"><span class="function"><span class="keyword">friend</span> <span class="type">void</span> <span class="title">goodGay::visit</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Building</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">string m_SittingRoom; <span class="comment">//å®¢å…</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">string m_BedRoom;<span class="comment">//å§å®¤</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">Building::<span class="built_in">Building</span>()</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_SittingRoom = <span class="string">&quot;å®¢å…&quot;</span>;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_BedRoom = <span class="string">&quot;å§å®¤&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">goodGay::<span class="built_in">goodGay</span>()</span><br><span class="line">&#123;</span><br><span class="line">building = <span class="keyword">new</span> Building;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">goodGay::visit</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å¥½åŸºå‹æ­£åœ¨è®¿é—®&quot;</span> &lt;&lt; building-&gt;m_SittingRoom &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å¥½åŸºå‹æ­£åœ¨è®¿é—®&quot;</span> &lt;&lt; building-&gt;m_BedRoom &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">goodGay::visit2</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å¥½åŸºå‹æ­£åœ¨è®¿é—®&quot;</span> &lt;&lt; building-&gt;m_SittingRoom &lt;&lt; endl;</span><br><span class="line"><span class="comment">//cout &lt;&lt; &quot;å¥½åŸºå‹æ­£åœ¨è®¿é—®&quot; &lt;&lt; building-&gt;m_BedRoom &lt;&lt; endl;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">goodGay  gg;</span><br><span class="line">gg.<span class="built_in">visit</span>();</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    </span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="4-5-è¿ç®—ç¬¦é‡è½½"><a href="#4-5-è¿ç®—ç¬¦é‡è½½" class="headerlink" title="4.5 è¿ç®—ç¬¦é‡è½½"></a>4.5 è¿ç®—ç¬¦é‡è½½</h3><p>è¿ç®—ç¬¦é‡è½½æ¦‚å¿µï¼šå¯¹å·²æœ‰çš„è¿ç®—ç¬¦é‡æ–°è¿›è¡Œå®šä¹‰ï¼Œèµ‹äºˆå…¶å¦ä¸€ç§åŠŸèƒ½ï¼Œä»¥é€‚åº”ä¸åŒçš„æ•°æ®ç±»å‹</p><h4 id="4-5-1-åŠ å·è¿ç®—ç¬¦é‡è½½"><a href="#4-5-1-åŠ å·è¿ç®—ç¬¦é‡è½½" class="headerlink" title="4.5.1 åŠ å·è¿ç®—ç¬¦é‡è½½"></a>4.5.1 åŠ å·è¿ç®—ç¬¦é‡è½½</h4><p>ä½œç”¨ï¼šå®ç°ä¸¤ä¸ªè‡ªå®šä¹‰æ•°æ®ç±»å‹ç›¸åŠ çš„è¿ç®—</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Person</span>() &#123;&#125;;</span><br><span class="line"><span class="built_in">Person</span>(<span class="type">int</span> a, <span class="type">int</span> b)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_A = a;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_B = b;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æˆå‘˜å‡½æ•°å®ç° + å·è¿ç®—ç¬¦é‡è½½</span></span><br><span class="line">Person <span class="keyword">operator</span>+(<span class="type">const</span> Person&amp; p) &#123;</span><br><span class="line">Person temp;</span><br><span class="line">temp.m_A = <span class="keyword">this</span>-&gt;m_A + p.m_A;</span><br><span class="line">temp.m_B = <span class="keyword">this</span>-&gt;m_B + p.m_B;</span><br><span class="line"><span class="keyword">return</span> temp;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="type">int</span> m_A;</span><br><span class="line"><span class="type">int</span> m_B;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å…¨å±€å‡½æ•°å®ç° + å·è¿ç®—ç¬¦é‡è½½</span></span><br><span class="line"><span class="comment">//Person operator+(const Person&amp; p1, const Person&amp; p2) &#123;</span></span><br><span class="line"><span class="comment">//Person temp(0, 0);</span></span><br><span class="line"><span class="comment">//temp.m_A = p1.m_A + p2.m_A;</span></span><br><span class="line"><span class="comment">//temp.m_B = p1.m_B + p2.m_B;</span></span><br><span class="line"><span class="comment">//return temp;</span></span><br><span class="line"><span class="comment">//&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//è¿ç®—ç¬¦é‡è½½ å¯ä»¥å‘ç”Ÿå‡½æ•°é‡è½½ </span></span><br><span class="line">Person <span class="keyword">operator</span>+(<span class="type">const</span> Person&amp; p2, <span class="type">int</span> val)  </span><br><span class="line">&#123;</span><br><span class="line">Person temp;</span><br><span class="line">temp.m_A = p2.m_A + val;</span><br><span class="line">temp.m_B = p2.m_B + val;</span><br><span class="line"><span class="keyword">return</span> temp;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="function">Person <span class="title">p1</span><span class="params">(<span class="number">10</span>, <span class="number">10</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">p2</span><span class="params">(<span class="number">20</span>, <span class="number">20</span>)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æˆå‘˜å‡½æ•°æ–¹å¼</span></span><br><span class="line">Person p3 = p2 + p1;  <span class="comment">//ç›¸å½“äº p2.operaor+(p1)</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;mA:&quot;</span> &lt;&lt; p3.m_A &lt;&lt; <span class="string">&quot; mB:&quot;</span> &lt;&lt; p3.m_B &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Person p4 = p3 + <span class="number">10</span>; <span class="comment">//ç›¸å½“äº operator+(p3,10)</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;mA:&quot;</span> &lt;&lt; p4.m_A &lt;&lt; <span class="string">&quot; mB:&quot;</span> &lt;&lt; p4.m_B &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ€»ç»“1ï¼šå¯¹äºå†…ç½®çš„æ•°æ®ç±»å‹çš„è¡¨è¾¾å¼çš„çš„è¿ç®—ç¬¦æ˜¯ä¸å¯èƒ½æ”¹å˜çš„</p></blockquote><blockquote><p>æ€»ç»“2ï¼šä¸è¦æ»¥ç”¨è¿ç®—ç¬¦é‡è½½</p></blockquote><h4 id="4-5-2-å·¦ç§»è¿ç®—ç¬¦é‡è½½"><a href="#4-5-2-å·¦ç§»è¿ç®—ç¬¦é‡è½½" class="headerlink" title="4.5.2 å·¦ç§»è¿ç®—ç¬¦é‡è½½"></a>4.5.2 å·¦ç§»è¿ç®—ç¬¦é‡è½½</h4><p>ä½œç”¨ï¼šå¯ä»¥è¾“å‡ºè‡ªå®šä¹‰æ•°æ®ç±»å‹</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line"><span class="keyword">friend</span> ostream&amp; <span class="keyword">operator</span>&lt;&lt;(ostream&amp; out, Person&amp; p);</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"></span><br><span class="line"><span class="built_in">Person</span>(<span class="type">int</span> a, <span class="type">int</span> b)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_A = a;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_B = b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æˆå‘˜å‡½æ•° å®ç°ä¸äº†  p &lt;&lt; cout ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„æ•ˆæœ</span></span><br><span class="line"><span class="comment">//void operator&lt;&lt;(Person&amp; p)&#123;</span></span><br><span class="line"><span class="comment">//&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line"><span class="type">int</span> m_A;</span><br><span class="line"><span class="type">int</span> m_B;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å…¨å±€å‡½æ•°å®ç°å·¦ç§»é‡è½½</span></span><br><span class="line"><span class="comment">//ostreamå¯¹è±¡åªèƒ½æœ‰ä¸€ä¸ª</span></span><br><span class="line">ostream&amp; <span class="keyword">operator</span>&lt;&lt;(ostream&amp; out, Person&amp; p) &#123;</span><br><span class="line">out &lt;&lt; <span class="string">&quot;a:&quot;</span> &lt;&lt; p.m_A &lt;&lt; <span class="string">&quot; b:&quot;</span> &lt;&lt; p.m_B;</span><br><span class="line"><span class="keyword">return</span> out;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="function">Person <span class="title">p1</span><span class="params">(<span class="number">10</span>, <span class="number">20</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; p1 &lt;&lt; <span class="string">&quot;hello world&quot;</span> &lt;&lt; endl; <span class="comment">//é“¾å¼ç¼–ç¨‹</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ€»ç»“ï¼šé‡è½½å·¦ç§»è¿ç®—ç¬¦é…åˆå‹å…ƒå¯ä»¥å®ç°è¾“å‡ºè‡ªå®šä¹‰æ•°æ®ç±»å‹</p></blockquote><h4 id="4-5-3-é€’å¢è¿ç®—ç¬¦é‡è½½"><a href="#4-5-3-é€’å¢è¿ç®—ç¬¦é‡è½½" class="headerlink" title="4.5.3 é€’å¢è¿ç®—ç¬¦é‡è½½"></a>4.5.3 é€’å¢è¿ç®—ç¬¦é‡è½½</h4><p>ä½œç”¨ï¼š é€šè¿‡é‡è½½é€’å¢è¿ç®—ç¬¦ï¼Œå®ç°è‡ªå·±çš„æ•´å‹æ•°æ®</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyInteger</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">friend</span> ostream&amp; <span class="keyword">operator</span>&lt;&lt;(ostream&amp; out, MyInteger myint);</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">MyInteger</span>() &#123;</span><br><span class="line">m_Num = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å‰ç½®++</span></span><br><span class="line">MyInteger&amp; <span class="keyword">operator</span>++() &#123;</span><br><span class="line"><span class="comment">//å…ˆ++</span></span><br><span class="line">m_Num++;</span><br><span class="line"><span class="comment">//å†è¿”å›</span></span><br><span class="line"><span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åç½®++</span></span><br><span class="line">MyInteger <span class="keyword">operator</span>++(<span class="type">int</span>) &#123;</span><br><span class="line"><span class="comment">//å…ˆè¿”å›</span></span><br><span class="line">MyInteger temp = *<span class="keyword">this</span>; <span class="comment">//è®°å½•å½“å‰æœ¬èº«çš„å€¼ï¼Œç„¶åè®©æœ¬èº«çš„å€¼åŠ 1ï¼Œä½†æ˜¯è¿”å›çš„æ˜¯ä»¥å‰çš„å€¼ï¼Œè¾¾åˆ°å…ˆè¿”å›å++ï¼›</span></span><br><span class="line">m_Num++;</span><br><span class="line"><span class="keyword">return</span> temp;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line"><span class="type">int</span> m_Num;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ostream&amp; <span class="keyword">operator</span>&lt;&lt;(ostream&amp; out, MyInteger myint) &#123;</span><br><span class="line">out &lt;&lt; myint.m_Num;</span><br><span class="line"><span class="keyword">return</span> out;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//å‰ç½®++ å…ˆ++ å†è¿”å›</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span> </span>&#123;</span><br><span class="line">MyInteger myInt;</span><br><span class="line">cout &lt;&lt; ++myInt &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; myInt &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åç½®++ å…ˆè¿”å› å†++</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test02</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">MyInteger myInt;</span><br><span class="line">cout &lt;&lt; myInt++ &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; myInt &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"><span class="comment">//test02();</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ€»ç»“ï¼š å‰ç½®é€’å¢è¿”å›å¼•ç”¨ï¼Œåç½®é€’å¢è¿”å›å€¼</p></blockquote><h4 id="4-5-4-èµ‹å€¼è¿ç®—ç¬¦é‡è½½"><a href="#4-5-4-èµ‹å€¼è¿ç®—ç¬¦é‡è½½" class="headerlink" title="4.5.4 èµ‹å€¼è¿ç®—ç¬¦é‡è½½"></a>4.5.4 èµ‹å€¼è¿ç®—ç¬¦é‡è½½</h4><p>c++ç¼–è¯‘å™¨è‡³å°‘ç»™ä¸€ä¸ªç±»æ·»åŠ 4ä¸ªå‡½æ•°</p><ol><li>é»˜è®¤æ„é€ å‡½æ•°(æ— å‚ï¼Œå‡½æ•°ä½“ä¸ºç©º)</li><li>é»˜è®¤ææ„å‡½æ•°(æ— å‚ï¼Œå‡½æ•°ä½“ä¸ºç©º)</li><li>é»˜è®¤æ‹·è´æ„é€ å‡½æ•°ï¼Œå¯¹å±æ€§è¿›è¡Œå€¼æ‹·è´</li><li>èµ‹å€¼è¿ç®—ç¬¦ operator&#x3D;, å¯¹å±æ€§è¿›è¡Œå€¼æ‹·è´</li></ol><p>å¦‚æœç±»ä¸­æœ‰å±æ€§æŒ‡å‘å †åŒºï¼Œåšèµ‹å€¼æ“ä½œæ—¶ä¹Ÿä¼šå‡ºç°æ·±æµ…æ‹·è´é—®é¢˜</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"></span><br><span class="line"><span class="built_in">Person</span>(<span class="type">int</span> age)</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">//å°†å¹´é¾„æ•°æ®å¼€è¾Ÿåˆ°å †åŒº</span></span><br><span class="line">m_Age = <span class="keyword">new</span> <span class="built_in">int</span>(age);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//é‡è½½èµ‹å€¼è¿ç®—ç¬¦ </span></span><br><span class="line">Person&amp; <span class="keyword">operator</span>=(Person &amp;p)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (m_Age != <span class="literal">NULL</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">delete</span> m_Age;</span><br><span class="line">m_Age = <span class="literal">NULL</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//ç¼–è¯‘å™¨æä¾›çš„ä»£ç æ˜¯æµ…æ‹·è´</span></span><br><span class="line"><span class="comment">//m_Age = p.m_Age;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//æä¾›æ·±æ‹·è´ è§£å†³æµ…æ‹·è´çš„é—®é¢˜</span></span><br><span class="line">m_Age = <span class="keyword">new</span> <span class="built_in">int</span>(*p.m_Age);</span><br><span class="line"></span><br><span class="line"><span class="comment">//è¿”å›è‡ªèº«</span></span><br><span class="line"><span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">~<span class="built_in">Person</span>()</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (m_Age != <span class="literal">NULL</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">delete</span> m_Age;</span><br><span class="line">m_Age = <span class="literal">NULL</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å¹´é¾„çš„æŒ‡é’ˆ</span></span><br><span class="line"><span class="type">int</span> *m_Age;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="function">Person <span class="title">p1</span><span class="params">(<span class="number">18</span>)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function">Person <span class="title">p2</span><span class="params">(<span class="number">20</span>)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function">Person <span class="title">p3</span><span class="params">(<span class="number">30</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">p3 = p2 = p1; <span class="comment">//èµ‹å€¼æ“ä½œ</span></span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;p1çš„å¹´é¾„ä¸ºï¼š&quot;</span> &lt;&lt; *p1.m_Age &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;p2çš„å¹´é¾„ä¸ºï¼š&quot;</span> &lt;&lt; *p2.m_Age &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;p3çš„å¹´é¾„ä¸ºï¼š&quot;</span> &lt;&lt; *p3.m_Age &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">//int a = 10;</span></span><br><span class="line"><span class="comment">//int b = 20;</span></span><br><span class="line"><span class="comment">//int c = 30;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//c = b = a;</span></span><br><span class="line"><span class="comment">//cout &lt;&lt; &quot;a = &quot; &lt;&lt; a &lt;&lt; endl;</span></span><br><span class="line"><span class="comment">//cout &lt;&lt; &quot;b = &quot; &lt;&lt; b &lt;&lt; endl;</span></span><br><span class="line"><span class="comment">//cout &lt;&lt; &quot;c = &quot; &lt;&lt; c &lt;&lt; endl;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="4-5-5-å…³ç³»è¿ç®—ç¬¦é‡è½½"><a href="#4-5-5-å…³ç³»è¿ç®—ç¬¦é‡è½½" class="headerlink" title="4.5.5 å…³ç³»è¿ç®—ç¬¦é‡è½½"></a>4.5.5 å…³ç³»è¿ç®—ç¬¦é‡è½½</h4><p><strong>ä½œç”¨ï¼š</strong>é‡è½½å…³ç³»è¿ç®—ç¬¦ï¼Œå¯ä»¥è®©ä¸¤ä¸ªè‡ªå®šä¹‰ç±»å‹å¯¹è±¡è¿›è¡Œå¯¹æ¯”æ“ä½œ</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Person</span>(string name, <span class="type">int</span> age)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_Name = name;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_Age = age;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="type">bool</span> <span class="keyword">operator</span>==(Person &amp; p)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">this</span>-&gt;m_Name == p.m_Name &amp;&amp; <span class="keyword">this</span>-&gt;m_Age == p.m_Age)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">bool</span> <span class="keyword">operator</span>!=(Person &amp; p)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">this</span>-&gt;m_Name == p.m_Name &amp;&amp; <span class="keyword">this</span>-&gt;m_Age == p.m_Age)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">string m_Name;</span><br><span class="line"><span class="type">int</span> m_Age;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//int a = 0;</span></span><br><span class="line"><span class="comment">//int b = 0;</span></span><br><span class="line"></span><br><span class="line"><span class="function">Person <span class="title">a</span><span class="params">(<span class="string">&quot;å­™æ‚Ÿç©º&quot;</span>, <span class="number">18</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">b</span><span class="params">(<span class="string">&quot;å­™æ‚Ÿç©º&quot;</span>, <span class="number">18</span>)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (a == b)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;aå’Œbç›¸ç­‰&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;aå’Œbä¸ç›¸ç­‰&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (a != b)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;aå’Œbä¸ç›¸ç­‰&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;aå’Œbç›¸ç­‰&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="4-5-6-å‡½æ•°è°ƒç”¨è¿ç®—ç¬¦é‡è½½"><a href="#4-5-6-å‡½æ•°è°ƒç”¨è¿ç®—ç¬¦é‡è½½" class="headerlink" title="4.5.6 å‡½æ•°è°ƒç”¨è¿ç®—ç¬¦é‡è½½"></a>4.5.6 å‡½æ•°è°ƒç”¨è¿ç®—ç¬¦é‡è½½</h4><ul><li>å‡½æ•°è°ƒç”¨è¿ç®—ç¬¦ ()  ä¹Ÿå¯ä»¥é‡è½½</li><li>ç”±äºé‡è½½åä½¿ç”¨çš„æ–¹å¼éå¸¸åƒå‡½æ•°çš„è°ƒç”¨ï¼Œå› æ­¤ç§°ä¸ºä»¿å‡½æ•°</li><li>ä»¿å‡½æ•°æ²¡æœ‰å›ºå®šå†™æ³•ï¼Œéå¸¸çµæ´»</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyPrint</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">operator</span><span class="params">()</span><span class="params">(string text)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; text &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//é‡è½½çš„ï¼ˆï¼‰æ“ä½œç¬¦ ä¹Ÿç§°ä¸ºä»¿å‡½æ•°</span></span><br><span class="line">MyPrint myFunc;</span><br><span class="line"><span class="built_in">myFunc</span>(<span class="string">&quot;hello world&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyAdd</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">int</span> v1, <span class="type">int</span> v2)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> v1 + v2;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test02</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">MyAdd add;</span><br><span class="line"><span class="type">int</span> ret = <span class="built_in">add</span>(<span class="number">10</span>, <span class="number">10</span>);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;ret = &quot;</span> &lt;&lt; ret &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åŒ¿åå¯¹è±¡è°ƒç”¨  </span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;MyAdd()(100,100) = &quot;</span> &lt;&lt; <span class="built_in">MyAdd</span>()(<span class="number">100</span>, <span class="number">100</span>) &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"><span class="built_in">test02</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="4-6-ç»§æ‰¿"><a href="#4-6-ç»§æ‰¿" class="headerlink" title="4.6  ç»§æ‰¿"></a>4.6  ç»§æ‰¿</h3><p><strong>ç»§æ‰¿æ˜¯é¢å‘å¯¹è±¡ä¸‰å¤§ç‰¹æ€§ä¹‹ä¸€</strong></p><p>æœ‰äº›ç±»ä¸ç±»ä¹‹é—´å­˜åœ¨ç‰¹æ®Šçš„å…³ç³»ï¼Œä¾‹å¦‚ä¸‹å›¾ä¸­ï¼š</p><img src="/2024/10/16/C-%E6%A0%B8%E5%BF%83%E7%BC%96%E7%A8%8B/1544861202252.png" class="" width="1544861202252"><p>æˆ‘ä»¬å‘ç°ï¼Œå®šä¹‰è¿™äº›ç±»æ—¶ï¼Œä¸‹çº§åˆ«çš„æˆå‘˜é™¤äº†æ‹¥æœ‰ä¸Šä¸€çº§çš„å…±æ€§ï¼Œè¿˜æœ‰è‡ªå·±çš„ç‰¹æ€§ã€‚</p><p>è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±å¯ä»¥è€ƒè™‘åˆ©ç”¨ç»§æ‰¿çš„æŠ€æœ¯ï¼Œå‡å°‘é‡å¤ä»£ç </p><h4 id="4-6-1-ç»§æ‰¿çš„åŸºæœ¬è¯­æ³•"><a href="#4-6-1-ç»§æ‰¿çš„åŸºæœ¬è¯­æ³•" class="headerlink" title="4.6.1 ç»§æ‰¿çš„åŸºæœ¬è¯­æ³•"></a>4.6.1 ç»§æ‰¿çš„åŸºæœ¬è¯­æ³•</h4><p>ä¾‹å¦‚æˆ‘ä»¬çœ‹åˆ°å¾ˆå¤šç½‘ç«™ä¸­ï¼Œéƒ½æœ‰å…¬å…±çš„å¤´éƒ¨ï¼Œå…¬å…±çš„åº•éƒ¨ï¼Œç”šè‡³å…¬å…±çš„å·¦ä¾§åˆ—è¡¨ï¼Œåªæœ‰ä¸­å¿ƒå†…å®¹ä¸åŒ</p><p>æ¥ä¸‹æ¥æˆ‘ä»¬åˆ†åˆ«åˆ©ç”¨æ™®é€šå†™æ³•å’Œç»§æ‰¿çš„å†™æ³•æ¥å®ç°ç½‘é¡µä¸­çš„å†…å®¹ï¼Œçœ‹ä¸€ä¸‹ç»§æ‰¿å­˜åœ¨çš„æ„ä¹‰ä»¥åŠå¥½å¤„</p><p><strong>æ™®é€šå®ç°ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Javaé¡µé¢</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Java</span> </span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">header</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;é¦–é¡µã€å…¬å¼€è¯¾ã€ç™»å½•ã€æ³¨å†Œ...ï¼ˆå…¬å…±å¤´éƒ¨ï¼‰&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">footer</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å¸®åŠ©ä¸­å¿ƒã€äº¤æµåˆä½œã€ç«™å†…åœ°å›¾...(å…¬å…±åº•éƒ¨)&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">left</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Java,Python,C++...(å…¬å…±åˆ†ç±»åˆ—è¡¨)&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">content</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;JAVAå­¦ç§‘è§†é¢‘&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//Pythoné¡µé¢</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Python</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">header</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;é¦–é¡µã€å…¬å¼€è¯¾ã€ç™»å½•ã€æ³¨å†Œ...ï¼ˆå…¬å…±å¤´éƒ¨ï¼‰&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">footer</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å¸®åŠ©ä¸­å¿ƒã€äº¤æµåˆä½œã€ç«™å†…åœ°å›¾...(å…¬å…±åº•éƒ¨)&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">left</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Java,Python,C++...(å…¬å…±åˆ†ç±»åˆ—è¡¨)&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">content</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Pythonå­¦ç§‘è§†é¢‘&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//C++é¡µé¢</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CPP</span> </span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">header</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;é¦–é¡µã€å…¬å¼€è¯¾ã€ç™»å½•ã€æ³¨å†Œ...ï¼ˆå…¬å…±å¤´éƒ¨ï¼‰&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">footer</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å¸®åŠ©ä¸­å¿ƒã€äº¤æµåˆä½œã€ç«™å†…åœ°å›¾...(å…¬å…±åº•éƒ¨)&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">left</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Java,Python,C++...(å…¬å…±åˆ†ç±»åˆ—è¡¨)&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">content</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;C++å­¦ç§‘è§†é¢‘&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//Javaé¡µé¢</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Javaä¸‹è½½è§†é¢‘é¡µé¢å¦‚ä¸‹ï¼š &quot;</span> &lt;&lt; endl;</span><br><span class="line">Java ja;</span><br><span class="line">ja.<span class="built_in">header</span>();</span><br><span class="line">ja.<span class="built_in">footer</span>();</span><br><span class="line">ja.<span class="built_in">left</span>();</span><br><span class="line">ja.<span class="built_in">content</span>();</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;--------------------&quot;</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Pythoné¡µé¢</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Pythonä¸‹è½½è§†é¢‘é¡µé¢å¦‚ä¸‹ï¼š &quot;</span> &lt;&lt; endl;</span><br><span class="line">Python py;</span><br><span class="line">py.<span class="built_in">header</span>();</span><br><span class="line">py.<span class="built_in">footer</span>();</span><br><span class="line">py.<span class="built_in">left</span>();</span><br><span class="line">py.<span class="built_in">content</span>();</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;--------------------&quot;</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="comment">//C++é¡µé¢</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;C++ä¸‹è½½è§†é¢‘é¡µé¢å¦‚ä¸‹ï¼š &quot;</span> &lt;&lt; endl;</span><br><span class="line">CPP cp;</span><br><span class="line">cp.<span class="built_in">header</span>();</span><br><span class="line">cp.<span class="built_in">footer</span>();</span><br><span class="line">cp.<span class="built_in">left</span>();</span><br><span class="line">cp.<span class="built_in">content</span>();</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>ç»§æ‰¿å®ç°ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å…¬å…±é¡µé¢</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">BasePage</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">header</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;é¦–é¡µã€å…¬å¼€è¯¾ã€ç™»å½•ã€æ³¨å†Œ...ï¼ˆå…¬å…±å¤´éƒ¨ï¼‰&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">footer</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å¸®åŠ©ä¸­å¿ƒã€äº¤æµåˆä½œã€ç«™å†…åœ°å›¾...(å…¬å…±åº•éƒ¨)&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">left</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Java,Python,C++...(å…¬å…±åˆ†ç±»åˆ—è¡¨)&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Javaé¡µé¢</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Java</span> : <span class="keyword">public</span> BasePage</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">content</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;JAVAå­¦ç§‘è§†é¢‘&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//Pythoné¡µé¢</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Python</span> : <span class="keyword">public</span> BasePage</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">content</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Pythonå­¦ç§‘è§†é¢‘&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//C++é¡µé¢</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CPP</span> : <span class="keyword">public</span> BasePage</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">content</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;C++å­¦ç§‘è§†é¢‘&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//Javaé¡µé¢</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Javaä¸‹è½½è§†é¢‘é¡µé¢å¦‚ä¸‹ï¼š &quot;</span> &lt;&lt; endl;</span><br><span class="line">Java ja;</span><br><span class="line">ja.<span class="built_in">header</span>();</span><br><span class="line">ja.<span class="built_in">footer</span>();</span><br><span class="line">ja.<span class="built_in">left</span>();</span><br><span class="line">ja.<span class="built_in">content</span>();</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;--------------------&quot;</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Pythoné¡µé¢</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Pythonä¸‹è½½è§†é¢‘é¡µé¢å¦‚ä¸‹ï¼š &quot;</span> &lt;&lt; endl;</span><br><span class="line">Python py;</span><br><span class="line">py.<span class="built_in">header</span>();</span><br><span class="line">py.<span class="built_in">footer</span>();</span><br><span class="line">py.<span class="built_in">left</span>();</span><br><span class="line">py.<span class="built_in">content</span>();</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;--------------------&quot;</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="comment">//C++é¡µé¢</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;C++ä¸‹è½½è§†é¢‘é¡µé¢å¦‚ä¸‹ï¼š &quot;</span> &lt;&lt; endl;</span><br><span class="line">CPP cp;</span><br><span class="line">cp.<span class="built_in">header</span>();</span><br><span class="line">cp.<span class="built_in">footer</span>();</span><br><span class="line">cp.<span class="built_in">left</span>();</span><br><span class="line">cp.<span class="built_in">content</span>();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ€»ç»“ï¼š</strong></p><p>ç»§æ‰¿çš„å¥½å¤„ï¼š&#x3D;&#x3D;å¯ä»¥å‡å°‘é‡å¤çš„ä»£ç &#x3D;&#x3D;</p><p>class A : public B; </p><p>A ç±»ç§°ä¸ºå­ç±» æˆ– æ´¾ç”Ÿç±»</p><p>B ç±»ç§°ä¸ºçˆ¶ç±» æˆ– åŸºç±»</p><p><strong>æ´¾ç”Ÿç±»ä¸­çš„æˆå‘˜ï¼ŒåŒ…å«ä¸¤å¤§éƒ¨åˆ†</strong>ï¼š</p><p>ä¸€ç±»æ˜¯ä»åŸºç±»ç»§æ‰¿è¿‡æ¥çš„ï¼Œä¸€ç±»æ˜¯è‡ªå·±å¢åŠ çš„æˆå‘˜ã€‚</p><p>ä»åŸºç±»ç»§æ‰¿è¿‡è¿‡æ¥çš„è¡¨ç°å…¶å…±æ€§ï¼Œè€Œæ–°å¢çš„æˆå‘˜ä½“ç°äº†å…¶ä¸ªæ€§ã€‚</p><h4 id="4-6-2-ç»§æ‰¿æ–¹å¼"><a href="#4-6-2-ç»§æ‰¿æ–¹å¼" class="headerlink" title="4.6.2 ç»§æ‰¿æ–¹å¼"></a>4.6.2 ç»§æ‰¿æ–¹å¼</h4><p>ç»§æ‰¿çš„è¯­æ³•ï¼š<code>class å­ç±» : ç»§æ‰¿æ–¹å¼  çˆ¶ç±»</code></p><p><strong>ç»§æ‰¿æ–¹å¼ä¸€å…±æœ‰ä¸‰ç§ï¼š</strong></p><ul><li>å…¬å…±ç»§æ‰¿</li><li>ä¿æŠ¤ç»§æ‰¿</li><li>ç§æœ‰ç»§æ‰¿</li></ul><img src="/2024/10/16/C-%E6%A0%B8%E5%BF%83%E7%BC%96%E7%A8%8B/clip_image002.png" class="" title="img"><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Base1</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>: </span><br><span class="line"><span class="type">int</span> m_A;</span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line"><span class="type">int</span> m_B;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line"><span class="type">int</span> m_C;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å…¬å…±ç»§æ‰¿</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Son1</span> :<span class="keyword">public</span> Base1</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">m_A; <span class="comment">//å¯è®¿é—® publicæƒé™</span></span><br><span class="line">m_B; <span class="comment">//å¯è®¿é—® protectedæƒé™</span></span><br><span class="line"><span class="comment">//m_C; //ä¸å¯è®¿é—®</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">myClass</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Son1 s1;</span><br><span class="line">s1.m_A; <span class="comment">//å…¶ä»–ç±»åªèƒ½è®¿é—®åˆ°å…¬å…±æƒé™</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä¿æŠ¤ç»§æ‰¿</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Base2</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="type">int</span> m_A;</span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line"><span class="type">int</span> m_B;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line"><span class="type">int</span> m_C;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Son2</span>:<span class="keyword">protected</span> Base2</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">m_A; <span class="comment">//å¯è®¿é—® protectedæƒé™</span></span><br><span class="line">m_B; <span class="comment">//å¯è®¿é—® protectedæƒé™</span></span><br><span class="line"><span class="comment">//m_C; //ä¸å¯è®¿é—®</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">myClass2</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Son2 s;</span><br><span class="line"><span class="comment">//s.m_A; //ä¸å¯è®¿é—®</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç§æœ‰ç»§æ‰¿</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Base3</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="type">int</span> m_A;</span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line"><span class="type">int</span> m_B;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line"><span class="type">int</span> m_C;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Son3</span>:<span class="keyword">private</span> Base3</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">m_A; <span class="comment">//å¯è®¿é—® privateæƒé™</span></span><br><span class="line">m_B; <span class="comment">//å¯è®¿é—® privateæƒé™</span></span><br><span class="line"><span class="comment">//m_C; //ä¸å¯è®¿é—®</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">GrandSon3</span> :<span class="keyword">public</span> Son3</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//Son3æ˜¯ç§æœ‰ç»§æ‰¿ï¼Œæ‰€ä»¥ç»§æ‰¿Son3çš„å±æ€§åœ¨GrandSon3ä¸­éƒ½æ— æ³•è®¿é—®åˆ°</span></span><br><span class="line"><span class="comment">//m_A;</span></span><br><span class="line"><span class="comment">//m_B;</span></span><br><span class="line"><span class="comment">//m_C;</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h4 id="4-6-3-ç»§æ‰¿ä¸­çš„å¯¹è±¡æ¨¡å‹"><a href="#4-6-3-ç»§æ‰¿ä¸­çš„å¯¹è±¡æ¨¡å‹" class="headerlink" title="4.6.3 ç»§æ‰¿ä¸­çš„å¯¹è±¡æ¨¡å‹"></a>4.6.3 ç»§æ‰¿ä¸­çš„å¯¹è±¡æ¨¡å‹</h4><p><strong>é—®é¢˜ï¼š</strong>ä»çˆ¶ç±»ç»§æ‰¿è¿‡æ¥çš„æˆå‘˜ï¼Œå“ªäº›å±äºå­ç±»å¯¹è±¡ä¸­ï¼Ÿ</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Base</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="type">int</span> m_A;</span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line"><span class="type">int</span> m_B;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line"><span class="type">int</span> m_C; <span class="comment">//ç§æœ‰æˆå‘˜åªæ˜¯è¢«éšè—äº†ï¼Œä½†æ˜¯è¿˜æ˜¯ä¼šç»§æ‰¿ä¸‹å»</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å…¬å…±ç»§æ‰¿</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Son</span> :<span class="keyword">public</span> Base</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="type">int</span> m_D;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;sizeof Son = &quot;</span> &lt;&lt; <span class="built_in">sizeof</span>(Son) &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åˆ©ç”¨å·¥å…·æŸ¥çœ‹ï¼š</p><img src="/2024/10/16/C-%E6%A0%B8%E5%BF%83%E7%BC%96%E7%A8%8B/1545881904150.png" class="" width="1545881904150"><p>æ‰“å¼€å·¥å…·çª—å£åï¼Œå®šä½åˆ°å½“å‰CPPæ–‡ä»¶çš„ç›˜ç¬¦</p><p>ç„¶åè¾“å…¥ï¼š cl &#x2F;d1 reportSingleClassLayoutæŸ¥çœ‹çš„ç±»å   æ‰€å±æ–‡ä»¶å</p><p>æ•ˆæœå¦‚ä¸‹å›¾ï¼š</p><img src="/2024/10/16/C-%E6%A0%B8%E5%BF%83%E7%BC%96%E7%A8%8B/1545882158050.png" class="" width="1545882158050"><blockquote><p>ç»“è®ºï¼š çˆ¶ç±»ä¸­ç§æœ‰æˆå‘˜ä¹Ÿæ˜¯è¢«å­ç±»ç»§æ‰¿ä¸‹å»äº†ï¼Œåªæ˜¯ç”±ç¼–è¯‘å™¨ç»™éšè—åè®¿é—®ä¸åˆ°</p></blockquote><h4 id="4-6-4-ç»§æ‰¿ä¸­æ„é€ å’Œææ„é¡ºåº"><a href="#4-6-4-ç»§æ‰¿ä¸­æ„é€ å’Œææ„é¡ºåº" class="headerlink" title="4.6.4 ç»§æ‰¿ä¸­æ„é€ å’Œææ„é¡ºåº"></a>4.6.4 ç»§æ‰¿ä¸­æ„é€ å’Œææ„é¡ºåº</h4><p>å­ç±»ç»§æ‰¿çˆ¶ç±»åï¼Œå½“åˆ›å»ºå­ç±»å¯¹è±¡ï¼Œä¹Ÿä¼šè°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°</p><p>é—®é¢˜ï¼šçˆ¶ç±»å’Œå­ç±»çš„æ„é€ å’Œææ„é¡ºåºæ˜¯è°å…ˆè°åï¼Ÿ</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Base</span> </span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Base</span>()</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Baseæ„é€ å‡½æ•°!&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">~<span class="built_in">Base</span>()</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Baseææ„å‡½æ•°!&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Son</span> : <span class="keyword">public</span> Base</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Son</span>()</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Sonæ„é€ å‡½æ•°!&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">~<span class="built_in">Son</span>()</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Sonææ„å‡½æ•°!&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//ç»§æ‰¿ä¸­ å…ˆè°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°ï¼Œå†è°ƒç”¨å­ç±»æ„é€ å‡½æ•°ï¼Œææ„é¡ºåºä¸æ„é€ ç›¸å</span></span><br><span class="line">Son s;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ€»ç»“ï¼šç»§æ‰¿ä¸­ å…ˆè°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°ï¼Œå†è°ƒç”¨å­ç±»æ„é€ å‡½æ•°ï¼Œææ„é¡ºåºä¸æ„é€ ç›¸å</p></blockquote><h4 id="4-6-5-ç»§æ‰¿åŒåæˆå‘˜å¤„ç†æ–¹å¼"><a href="#4-6-5-ç»§æ‰¿åŒåæˆå‘˜å¤„ç†æ–¹å¼" class="headerlink" title="4.6.5 ç»§æ‰¿åŒåæˆå‘˜å¤„ç†æ–¹å¼"></a>4.6.5 ç»§æ‰¿åŒåæˆå‘˜å¤„ç†æ–¹å¼</h4><p>é—®é¢˜ï¼šå½“å­ç±»ä¸çˆ¶ç±»å‡ºç°åŒåçš„æˆå‘˜ï¼Œå¦‚ä½•é€šè¿‡å­ç±»å¯¹è±¡ï¼Œè®¿é—®åˆ°å­ç±»æˆ–çˆ¶ç±»ä¸­åŒåçš„æ•°æ®å‘¢ï¼Ÿ</p><ul><li>è®¿é—®å­ç±»åŒåæˆå‘˜   ç›´æ¥è®¿é—®å³å¯</li><li>è®¿é—®çˆ¶ç±»åŒåæˆå‘˜   éœ€è¦åŠ ä½œç”¨åŸŸ</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Base</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Base</span>()</span><br><span class="line">&#123;</span><br><span class="line">m_A = <span class="number">100</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Base - func()è°ƒç”¨&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">(<span class="type">int</span> a)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Base - func(int a)è°ƒç”¨&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="type">int</span> m_A;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Son</span> : <span class="keyword">public</span> Base &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Son</span>()</span><br><span class="line">&#123;</span><br><span class="line">m_A = <span class="number">200</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å½“å­ç±»ä¸çˆ¶ç±»æ‹¥æœ‰åŒåçš„æˆå‘˜å‡½æ•°ï¼Œå­ç±»ä¼šéšè—çˆ¶ç±»ä¸­æ‰€æœ‰ç‰ˆæœ¬çš„åŒåæˆå‘˜å‡½æ•°</span></span><br><span class="line"><span class="comment">//å¦‚æœæƒ³è®¿é—®çˆ¶ç±»ä¸­è¢«éšè—çš„åŒåæˆå‘˜å‡½æ•°ï¼Œéœ€è¦åŠ çˆ¶ç±»çš„ä½œç”¨åŸŸ</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Son - func()è°ƒç”¨&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="type">int</span> m_A;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Son s;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Sonä¸‹çš„m_A = &quot;</span> &lt;&lt; s.m_A &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Baseä¸‹çš„m_A = &quot;</span> &lt;&lt; s.Base::m_A &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">s.<span class="built_in">func</span>();</span><br><span class="line">s.Base::<span class="built_in">func</span>();</span><br><span class="line">s.Base::<span class="built_in">func</span>(<span class="number">10</span>);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"><span class="keyword">return</span> EXIT_SUCCESS;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ol><li>å­ç±»å¯¹è±¡å¯ä»¥ç›´æ¥è®¿é—®åˆ°å­ç±»ä¸­åŒåæˆå‘˜</li><li>å­ç±»å¯¹è±¡åŠ ä½œç”¨åŸŸå¯ä»¥è®¿é—®åˆ°çˆ¶ç±»åŒåæˆå‘˜</li><li>å½“å­ç±»ä¸çˆ¶ç±»æ‹¥æœ‰åŒåçš„æˆå‘˜å‡½æ•°ï¼Œå­ç±»ä¼šéšè—çˆ¶ç±»ä¸­åŒåæˆå‘˜å‡½æ•°ï¼ŒåŠ ä½œç”¨åŸŸå¯ä»¥è®¿é—®åˆ°çˆ¶ç±»ä¸­åŒåå‡½æ•°</li></ol><h4 id="4-6-6-ç»§æ‰¿åŒåé™æ€æˆå‘˜å¤„ç†æ–¹å¼"><a href="#4-6-6-ç»§æ‰¿åŒåé™æ€æˆå‘˜å¤„ç†æ–¹å¼" class="headerlink" title="4.6.6 ç»§æ‰¿åŒåé™æ€æˆå‘˜å¤„ç†æ–¹å¼"></a>4.6.6 ç»§æ‰¿åŒåé™æ€æˆå‘˜å¤„ç†æ–¹å¼</h4><p>é—®é¢˜ï¼šç»§æ‰¿ä¸­åŒåçš„é™æ€æˆå‘˜åœ¨å­ç±»å¯¹è±¡ä¸Šå¦‚ä½•è¿›è¡Œè®¿é—®ï¼Ÿ</p><p>é™æ€æˆå‘˜å’Œéé™æ€æˆå‘˜å‡ºç°åŒåï¼Œå¤„ç†æ–¹å¼ä¸€è‡´</p><ul><li>è®¿é—®å­ç±»åŒåæˆå‘˜   ç›´æ¥è®¿é—®å³å¯</li><li>è®¿é—®çˆ¶ç±»åŒåæˆå‘˜   éœ€è¦åŠ ä½œç”¨åŸŸ</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Base</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">static</span> <span class="type">void</span> <span class="title">func</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Base - static void func()&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">static</span> <span class="type">void</span> <span class="title">func</span><span class="params">(<span class="type">int</span> a)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Base - static void func(int a)&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">static</span> <span class="type">int</span> m_A;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> Base::m_A = <span class="number">100</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Son</span> : <span class="keyword">public</span> Base &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">static</span> <span class="type">void</span> <span class="title">func</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Son - static void func()&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">static</span> <span class="type">int</span> m_A;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> Son::m_A = <span class="number">200</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åŒåæˆå‘˜å±æ€§</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//é€šè¿‡å¯¹è±¡è®¿é—®</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;é€šè¿‡å¯¹è±¡è®¿é—®ï¼š &quot;</span> &lt;&lt; endl;</span><br><span class="line">Son s;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Son  ä¸‹ m_A = &quot;</span> &lt;&lt; s.m_A &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Base ä¸‹ m_A = &quot;</span> &lt;&lt; s.Base::m_A &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="comment">//é€šè¿‡ç±»åè®¿é—®</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;é€šè¿‡ç±»åè®¿é—®ï¼š &quot;</span> &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Son  ä¸‹ m_A = &quot;</span> &lt;&lt; Son::m_A &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Base ä¸‹ m_A = &quot;</span> &lt;&lt; Son::Base::m_A &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åŒåæˆå‘˜å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test02</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//é€šè¿‡å¯¹è±¡è®¿é—®</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;é€šè¿‡å¯¹è±¡è®¿é—®ï¼š &quot;</span> &lt;&lt; endl;</span><br><span class="line">Son s;</span><br><span class="line">s.<span class="built_in">func</span>();</span><br><span class="line">s.Base::<span class="built_in">func</span>();</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;é€šè¿‡ç±»åè®¿é—®ï¼š &quot;</span> &lt;&lt; endl;</span><br><span class="line">Son::<span class="built_in">func</span>();</span><br><span class="line">Son::Base::<span class="built_in">func</span>();</span><br><span class="line"><span class="comment">//å‡ºç°åŒåï¼Œå­ç±»ä¼šéšè—æ‰çˆ¶ç±»ä¸­æ‰€æœ‰åŒåæˆå‘˜å‡½æ•°ï¼Œéœ€è¦åŠ ä½œä½œç”¨åŸŸè®¿é—®</span></span><br><span class="line">Son::Base::<span class="built_in">func</span>(<span class="number">100</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//test01();</span></span><br><span class="line"><span class="built_in">test02</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ€»ç»“ï¼šåŒåé™æ€æˆå‘˜å¤„ç†æ–¹å¼å’Œéé™æ€å¤„ç†æ–¹å¼ä¸€æ ·ï¼Œåªä¸è¿‡æœ‰ä¸¤ç§è®¿é—®çš„æ–¹å¼ï¼ˆé€šè¿‡å¯¹è±¡ å’Œ é€šè¿‡ç±»åï¼‰</p></blockquote><h4 id="4-6-7-å¤šç»§æ‰¿è¯­æ³•"><a href="#4-6-7-å¤šç»§æ‰¿è¯­æ³•" class="headerlink" title="4.6.7 å¤šç»§æ‰¿è¯­æ³•"></a>4.6.7 å¤šç»§æ‰¿è¯­æ³•</h4><p>C++å…è®¸<strong>ä¸€ä¸ªç±»ç»§æ‰¿å¤šä¸ªç±»</strong></p><p>è¯­æ³•ï¼š<code> class å­ç±» ï¼šç»§æ‰¿æ–¹å¼ çˆ¶ç±»1 ï¼Œ ç»§æ‰¿æ–¹å¼ çˆ¶ç±»2...</code></p><p>å¤šç»§æ‰¿å¯èƒ½ä¼šå¼•å‘çˆ¶ç±»ä¸­æœ‰åŒåæˆå‘˜å‡ºç°ï¼Œéœ€è¦åŠ ä½œç”¨åŸŸåŒºåˆ†</p><p><strong>C++å®é™…å¼€å‘ä¸­ä¸å»ºè®®ç”¨å¤šç»§æ‰¿</strong></p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Base1</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Base1</span>()</span><br><span class="line">&#123;</span><br><span class="line">m_A = <span class="number">100</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="type">int</span> m_A;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Base2</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Base2</span>()</span><br><span class="line">&#123;</span><br><span class="line">m_A = <span class="number">200</span>;  <span class="comment">//å¼€å§‹æ˜¯m_B ä¸ä¼šå‡ºé—®é¢˜ï¼Œä½†æ˜¯æ”¹ä¸ºmAå°±ä¼šå‡ºç°ä¸æ˜ç¡®</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="type">int</span> m_A;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è¯­æ³•ï¼šclass å­ç±»ï¼šç»§æ‰¿æ–¹å¼ çˆ¶ç±»1 ï¼Œç»§æ‰¿æ–¹å¼ çˆ¶ç±»2 </span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Son</span> : <span class="keyword">public</span> Base2, <span class="keyword">public</span> Base1 </span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Son</span>()</span><br><span class="line">&#123;</span><br><span class="line">m_C = <span class="number">300</span>;</span><br><span class="line">m_D = <span class="number">400</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="type">int</span> m_C;</span><br><span class="line"><span class="type">int</span> m_D;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//å¤šç»§æ‰¿å®¹æ˜“äº§ç”Ÿæˆå‘˜åŒåçš„æƒ…å†µ</span></span><br><span class="line"><span class="comment">//é€šè¿‡ä½¿ç”¨ç±»åä½œç”¨åŸŸå¯ä»¥åŒºåˆ†è°ƒç”¨å“ªä¸€ä¸ªåŸºç±»çš„æˆå‘˜</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Son s;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;sizeof Son = &quot;</span> &lt;&lt; <span class="built_in">sizeof</span>(s) &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; s.Base1::m_A &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; s.Base2::m_A &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ€»ç»“ï¼š å¤šç»§æ‰¿ä¸­å¦‚æœçˆ¶ç±»ä¸­å‡ºç°äº†åŒåæƒ…å†µï¼Œå­ç±»ä½¿ç”¨æ—¶å€™è¦åŠ ä½œç”¨åŸŸ</p></blockquote><h4 id="4-6-8-è±å½¢ç»§æ‰¿"><a href="#4-6-8-è±å½¢ç»§æ‰¿" class="headerlink" title="4.6.8 è±å½¢ç»§æ‰¿"></a>4.6.8 è±å½¢ç»§æ‰¿</h4><p><strong>è±å½¢ç»§æ‰¿æ¦‚å¿µï¼š</strong></p><p>â€‹ä¸¤ä¸ªæ´¾ç”Ÿç±»ç»§æ‰¿åŒä¸€ä¸ªåŸºç±»</p><p>â€‹åˆæœ‰æŸä¸ªç±»åŒæ—¶ç»§æ‰¿è€…ä¸¤ä¸ªæ´¾ç”Ÿç±»</p><p>â€‹è¿™ç§ç»§æ‰¿è¢«ç§°ä¸ºè±å½¢ç»§æ‰¿ï¼Œæˆ–è€…é’»çŸ³ç»§æ‰¿</p><p><strong>å…¸å‹çš„è±å½¢ç»§æ‰¿æ¡ˆä¾‹ï¼š</strong></p><img src="/2024/10/16/C-%E6%A0%B8%E5%BF%83%E7%BC%96%E7%A8%8B/clip_image002.jpg" class="" title="IMG_256"><p><strong>è±å½¢ç»§æ‰¿é—®é¢˜ï¼š</strong></p><ol><li><pre><code>ç¾Šç»§æ‰¿äº†åŠ¨ç‰©çš„æ•°æ®ï¼Œé©¼åŒæ ·ç»§æ‰¿äº†åŠ¨ç‰©çš„æ•°æ®ï¼Œå½“è‰æ³¥é©¬ä½¿ç”¨æ•°æ®æ—¶ï¼Œå°±ä¼šäº§ç”ŸäºŒä¹‰æ€§ã€‚</code></pre></li><li><pre><code>è‰æ³¥é©¬ç»§æ‰¿è‡ªåŠ¨ç‰©çš„æ•°æ®ç»§æ‰¿äº†ä¸¤ä»½ï¼Œå…¶å®æˆ‘ä»¬åº”è¯¥æ¸…æ¥šï¼Œè¿™ä»½æ•°æ®æˆ‘ä»¬åªéœ€è¦ä¸€ä»½å°±å¯ä»¥ã€‚</code></pre></li></ol><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Animal</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="type">int</span> m_Age;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç»§æ‰¿å‰åŠ virtualå…³é”®å­—åï¼Œå˜ä¸ºè™šç»§æ‰¿</span></span><br><span class="line"><span class="comment">//æ­¤æ—¶å…¬å…±çš„çˆ¶ç±»Animalç§°ä¸ºè™šåŸºç±»</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Sheep</span> : <span class="keyword">virtual</span> <span class="keyword">public</span> Animal &#123;&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Tuo</span>   : <span class="keyword">virtual</span> <span class="keyword">public</span> Animal &#123;&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SheepTuo</span> : <span class="keyword">public</span> Sheep, <span class="keyword">public</span> Tuo &#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">SheepTuo st;</span><br><span class="line">st.Sheep::m_Age = <span class="number">100</span>;</span><br><span class="line">st.Tuo::m_Age = <span class="number">200</span>;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;st.Sheep::m_Age = &quot;</span> &lt;&lt; st.Sheep::m_Age &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;st.Tuo::m_Age = &quot;</span> &lt;&lt;  st.Tuo::m_Age &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;st.m_Age = &quot;</span> &lt;&lt; st.m_Age &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è±å½¢ç»§æ‰¿ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">A</span> &#123; <span class="keyword">public</span>: <span class="type">int</span> data; &#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">B</span> : <span class="keyword">public</span> A &#123;&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">C</span> : <span class="keyword">public</span> A &#123;&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">D</span> : <span class="keyword">public</span> B, <span class="keyword">public</span> C &#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    D d;</span><br><span class="line">    d.data = <span class="number">10</span>;  <span class="comment">// é”™è¯¯ï¼äºŒä¹‰æ€§ï¼šä¸çŸ¥é“è®¿é—® B::data è¿˜æ˜¯ C::data</span></span><br><span class="line">    d.B::data = <span class="number">10</span>; <span class="comment">// éœ€æ˜¾å¼æŒ‡å®šè·¯å¾„ï¼ˆä»æœ‰é‡å¤å†…å­˜ï¼‰</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è§£å†³æ–¹æ¡ˆï¼šè™šç»§æ‰¿</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//åˆ©ç”¨è™šç»§æ‰¿å</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">A</span> &#123; <span class="keyword">public</span>: <span class="type">int</span> data; &#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å…³é”®ï¼šä½¿ç”¨ virtual ç»§æ‰¿</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">B</span> : <span class="keyword">virtual</span> <span class="keyword">public</span> A &#123;&#125;; <span class="comment">// è™šç»§æ‰¿</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">C</span> : <span class="keyword">virtual</span> <span class="keyword">public</span> A &#123;&#125;; <span class="comment">// è™šç»§æ‰¿</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">D</span> : <span class="keyword">public</span> B, <span class="keyword">public</span> C &#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    D d;</span><br><span class="line">    d.data = <span class="number">10</span>;  <span class="comment">// âœ… æ­£ç¡®ï¼ä¸å†æœ‰äºŒä¹‰æ€§</span></span><br><span class="line">    d.B::data = <span class="number">20</span>; <span class="comment">// âœ… ä¿®æ”¹çš„æ˜¯åŒä¸€ä»½æ•°æ®</span></span><br><span class="line">    d.C::data = <span class="number">30</span>; <span class="comment">// âœ… å€¼å˜ä¸º30ï¼ˆå…±äº«åŒä¸€ä»½ï¼‰</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å†…å­˜å¯¹æ¯”ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">æ™®é€šç»§æ‰¿ï¼š</span><br><span class="line">D &#123; </span><br><span class="line">  B &#123; A &#123; data &#125; &#125; </span><br><span class="line">  C &#123; A &#123; data &#125; &#125;   // æ¯ä¸ªæ´¾ç”Ÿç±»å¯¹è±¡éƒ½ä¿ç•™äº†çˆ¶ç±»çš„æˆå‘˜ï¼Œäº§ç”Ÿäº†é‡å¤å‰¯æœ¬ï¼</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">è™šç»§æ‰¿ï¼š</span><br><span class="line">D &#123; </span><br><span class="line">  B &#123; ... &#125; </span><br><span class="line">  C &#123; ... &#125; </span><br><span class="line">  å…±äº«çš„ A &#123; data &#125;   // å”¯ä¸€å‰¯æœ¬</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>è±å½¢ç»§æ‰¿å¸¦æ¥çš„ä¸»è¦é—®é¢˜æ˜¯å­ç±»ç»§æ‰¿ä¸¤ä»½ç›¸åŒçš„æ•°æ®ï¼Œå¯¼è‡´èµ„æºæµªè´¹ä»¥åŠæ¯«æ— æ„ä¹‰</li><li>åˆ©ç”¨è™šç»§æ‰¿å¯ä»¥è§£å†³è±å½¢ç»§æ‰¿é—®é¢˜</li></ul><h3 id="4-7-å¤šæ€"><a href="#4-7-å¤šæ€" class="headerlink" title="4.7  å¤šæ€"></a>4.7  å¤šæ€</h3><h4 id="4-7-1-å¤šæ€çš„åŸºæœ¬æ¦‚å¿µ"><a href="#4-7-1-å¤šæ€çš„åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="4.7.1 å¤šæ€çš„åŸºæœ¬æ¦‚å¿µ"></a>4.7.1 å¤šæ€çš„åŸºæœ¬æ¦‚å¿µ</h4><p><strong>å¤šæ€æ˜¯C++é¢å‘å¯¹è±¡ä¸‰å¤§ç‰¹æ€§ä¹‹ä¸€</strong></p><p>å¤šæ€åˆ†ä¸ºä¸¤ç±»</p><ul><li>é™æ€å¤šæ€: å‡½æ•°é‡è½½ å’Œ è¿ç®—ç¬¦é‡è½½å±äºé™æ€å¤šæ€ï¼Œå¤ç”¨å‡½æ•°å</li><li>åŠ¨æ€å¤šæ€: æ´¾ç”Ÿç±»å’Œè™šå‡½æ•°å®ç°è¿è¡Œæ—¶å¤šæ€</li></ul><p>é™æ€å¤šæ€å’ŒåŠ¨æ€å¤šæ€åŒºåˆ«ï¼š</p><ul><li>é™æ€å¤šæ€çš„å‡½æ•°åœ°å€æ—©ç»‘å®š  -  ç¼–è¯‘é˜¶æ®µç¡®å®šå‡½æ•°åœ°å€</li><li>åŠ¨æ€å¤šæ€çš„å‡½æ•°åœ°å€æ™šç»‘å®š  -  è¿è¡Œé˜¶æ®µç¡®å®šå‡½æ•°åœ°å€</li></ul><p>ä¸‹é¢é€šè¿‡æ¡ˆä¾‹è¿›è¡Œè®²è§£å¤šæ€</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Animal</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="comment">//Speakå‡½æ•°å°±æ˜¯è™šå‡½æ•°</span></span><br><span class="line"><span class="comment">//å‡½æ•°å‰é¢åŠ ä¸Švirtualå…³é”®å­—ï¼Œå˜æˆè™šå‡½æ•°ï¼Œé‚£ä¹ˆç¼–è¯‘å™¨åœ¨ç¼–è¯‘çš„æ—¶å€™å°±ä¸èƒ½ç¡®å®šå‡½æ•°è°ƒç”¨äº†ã€‚</span></span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">speak</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;åŠ¨ç‰©åœ¨è¯´è¯&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Cat</span> :<span class="keyword">public</span> Animal</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">speak</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å°çŒ«åœ¨è¯´è¯&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Dog</span> :<span class="keyword">public</span> Animal</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">speak</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å°ç‹—åœ¨è¯´è¯&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//æˆ‘ä»¬å¸Œæœ›ä¼ å…¥ä»€ä¹ˆå¯¹è±¡ï¼Œé‚£ä¹ˆå°±è°ƒç”¨ä»€ä¹ˆå¯¹è±¡çš„å‡½æ•°</span></span><br><span class="line"><span class="comment">//å¦‚æœå‡½æ•°åœ°å€åœ¨ç¼–è¯‘é˜¶æ®µå°±èƒ½ç¡®å®šï¼Œé‚£ä¹ˆé™æ€è”ç¼–</span></span><br><span class="line"><span class="comment">//å¦‚æœå‡½æ•°åœ°å€åœ¨è¿è¡Œé˜¶æ®µæ‰èƒ½ç¡®å®šï¼Œå°±æ˜¯åŠ¨æ€è”ç¼–</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">DoSpeak</span><span class="params">(Animal &amp; animal)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">animal.<span class="built_in">speak</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//å¤šæ€æ»¡è¶³æ¡ä»¶ï¼š </span></span><br><span class="line"><span class="comment">//1ã€æœ‰ç»§æ‰¿å…³ç³»</span></span><br><span class="line"><span class="comment">//2ã€å­ç±»é‡å†™çˆ¶ç±»ä¸­çš„è™šå‡½æ•°</span></span><br><span class="line"><span class="comment">//å¤šæ€ä½¿ç”¨ï¼š</span></span><br><span class="line"><span class="comment">//çˆ¶ç±»æŒ‡é’ˆæˆ–å¼•ç”¨æŒ‡å‘å­ç±»å¯¹è±¡</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Cat cat;</span><br><span class="line"><span class="built_in">DoSpeak</span>(cat);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Dog dog;</span><br><span class="line"><span class="built_in">DoSpeak</span>(dog);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><p>å¤šæ€æ»¡è¶³æ¡ä»¶</p><ul><li>æœ‰ç»§æ‰¿å…³ç³»</li><li>å­ç±»é‡å†™çˆ¶ç±»ä¸­çš„è™šå‡½æ•°</li></ul><p>å¤šæ€ä½¿ç”¨æ¡ä»¶</p><ul><li>çˆ¶ç±»æŒ‡é’ˆæˆ–å¼•ç”¨æŒ‡å‘å­ç±»å¯¹è±¡</li></ul><p>é‡å†™ï¼šå‡½æ•°è¿”å›å€¼ç±»å‹  å‡½æ•°å å‚æ•°åˆ—è¡¨ å®Œå…¨ä¸€è‡´ç§°ä¸ºé‡å†™</p><h4 id="4-7-2-å¤šæ€æ¡ˆä¾‹ä¸€-è®¡ç®—å™¨ç±»"><a href="#4-7-2-å¤šæ€æ¡ˆä¾‹ä¸€-è®¡ç®—å™¨ç±»" class="headerlink" title="4.7.2 å¤šæ€æ¡ˆä¾‹ä¸€-è®¡ç®—å™¨ç±»"></a>4.7.2 å¤šæ€æ¡ˆä¾‹ä¸€-è®¡ç®—å™¨ç±»</h4><p>æ¡ˆä¾‹æè¿°ï¼š</p><p>åˆ†åˆ«åˆ©ç”¨æ™®é€šå†™æ³•å’Œå¤šæ€æŠ€æœ¯ï¼Œè®¾è®¡å®ç°ä¸¤ä¸ªæ“ä½œæ•°è¿›è¡Œè¿ç®—çš„è®¡ç®—å™¨ç±»</p><p>å¤šæ€çš„ä¼˜ç‚¹ï¼š</p><ul><li>ä»£ç ç»„ç»‡ç»“æ„æ¸…æ™°</li><li>å¯è¯»æ€§å¼º</li><li>åˆ©äºå‰æœŸå’ŒåæœŸçš„æ‰©å±•ä»¥åŠç»´æŠ¤</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ™®é€šå®ç°</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Calculator</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">getResult</span><span class="params">(string oper)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">if</span> (oper == <span class="string">&quot;+&quot;</span>) &#123;</span><br><span class="line"><span class="keyword">return</span> m_Num1 + m_Num2;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (oper == <span class="string">&quot;-&quot;</span>) &#123;</span><br><span class="line"><span class="keyword">return</span> m_Num1 - m_Num2;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (oper == <span class="string">&quot;*&quot;</span>) &#123;</span><br><span class="line"><span class="keyword">return</span> m_Num1 * m_Num2;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å¦‚æœè¦æä¾›æ–°çš„è¿ç®—ï¼Œéœ€è¦ä¿®æ”¹æºç </span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="type">int</span> m_Num1;</span><br><span class="line"><span class="type">int</span> m_Num2;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//æ™®é€šå®ç°æµ‹è¯•</span></span><br><span class="line">Calculator c;</span><br><span class="line">c.m_Num1 = <span class="number">10</span>;</span><br><span class="line">c.m_Num2 = <span class="number">10</span>;</span><br><span class="line">cout &lt;&lt; c.m_Num1 &lt;&lt; <span class="string">&quot; + &quot;</span> &lt;&lt; c.m_Num2 &lt;&lt; <span class="string">&quot; = &quot;</span> &lt;&lt; c.<span class="built_in">getResult</span>(<span class="string">&quot;+&quot;</span>) &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; c.m_Num1 &lt;&lt; <span class="string">&quot; - &quot;</span> &lt;&lt; c.m_Num2 &lt;&lt; <span class="string">&quot; = &quot;</span> &lt;&lt; c.<span class="built_in">getResult</span>(<span class="string">&quot;-&quot;</span>) &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; c.m_Num1 &lt;&lt; <span class="string">&quot; * &quot;</span> &lt;&lt; c.m_Num2 &lt;&lt; <span class="string">&quot; = &quot;</span> &lt;&lt; c.<span class="built_in">getResult</span>(<span class="string">&quot;*&quot;</span>) &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//å¤šæ€å®ç°</span></span><br><span class="line"><span class="comment">//æŠ½è±¡è®¡ç®—å™¨ç±»</span></span><br><span class="line"><span class="comment">//å¤šæ€ä¼˜ç‚¹ï¼šä»£ç ç»„ç»‡ç»“æ„æ¸…æ™°ï¼Œå¯è¯»æ€§å¼ºï¼Œåˆ©äºå‰æœŸå’ŒåæœŸçš„æ‰©å±•ä»¥åŠç»´æŠ¤</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">AbstractCalculator</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span> :</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">int</span> <span class="title">getResult</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> m_Num1;</span><br><span class="line"><span class="type">int</span> m_Num2;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åŠ æ³•è®¡ç®—å™¨</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">AddCalculator</span> :<span class="keyword">public</span> AbstractCalculator</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">getResult</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> m_Num1 + m_Num2;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å‡æ³•è®¡ç®—å™¨</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SubCalculator</span> :<span class="keyword">public</span> AbstractCalculator</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">getResult</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> m_Num1 - m_Num2;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä¹˜æ³•è®¡ç®—å™¨</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MulCalculator</span> :<span class="keyword">public</span> AbstractCalculator</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">getResult</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> m_Num1 * m_Num2;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test02</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//åˆ›å»ºåŠ æ³•è®¡ç®—å™¨</span></span><br><span class="line">AbstractCalculator *abc = <span class="keyword">new</span> AddCalculator;</span><br><span class="line">abc-&gt;m_Num1 = <span class="number">10</span>;</span><br><span class="line">abc-&gt;m_Num2 = <span class="number">10</span>;</span><br><span class="line">cout &lt;&lt; abc-&gt;m_Num1 &lt;&lt; <span class="string">&quot; + &quot;</span> &lt;&lt; abc-&gt;m_Num2 &lt;&lt; <span class="string">&quot; = &quot;</span> &lt;&lt; abc-&gt;<span class="built_in">getResult</span>() &lt;&lt; endl;</span><br><span class="line"><span class="keyword">delete</span> abc;  <span class="comment">//ç”¨å®Œäº†è®°å¾—é”€æ¯</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ›å»ºå‡æ³•è®¡ç®—å™¨</span></span><br><span class="line">abc = <span class="keyword">new</span> SubCalculator;</span><br><span class="line">abc-&gt;m_Num1 = <span class="number">10</span>;</span><br><span class="line">abc-&gt;m_Num2 = <span class="number">10</span>;</span><br><span class="line">cout &lt;&lt; abc-&gt;m_Num1 &lt;&lt; <span class="string">&quot; - &quot;</span> &lt;&lt; abc-&gt;m_Num2 &lt;&lt; <span class="string">&quot; = &quot;</span> &lt;&lt; abc-&gt;<span class="built_in">getResult</span>() &lt;&lt; endl;</span><br><span class="line"><span class="keyword">delete</span> abc;  </span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ›å»ºä¹˜æ³•è®¡ç®—å™¨</span></span><br><span class="line">abc = <span class="keyword">new</span> MulCalculator;</span><br><span class="line">abc-&gt;m_Num1 = <span class="number">10</span>;</span><br><span class="line">abc-&gt;m_Num2 = <span class="number">10</span>;</span><br><span class="line">cout &lt;&lt; abc-&gt;m_Num1 &lt;&lt; <span class="string">&quot; * &quot;</span> &lt;&lt; abc-&gt;m_Num2 &lt;&lt; <span class="string">&quot; = &quot;</span> &lt;&lt; abc-&gt;<span class="built_in">getResult</span>() &lt;&lt; endl;</span><br><span class="line"><span class="keyword">delete</span> abc;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//test01();</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">test02</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ€»ç»“ï¼šC++å¼€å‘æå€¡åˆ©ç”¨å¤šæ€è®¾è®¡ç¨‹åºæ¶æ„ï¼Œå› ä¸ºå¤šæ€ä¼˜ç‚¹å¾ˆå¤š</p></blockquote><h4 id="4-7-3-çº¯è™šå‡½æ•°å’ŒæŠ½è±¡ç±»"><a href="#4-7-3-çº¯è™šå‡½æ•°å’ŒæŠ½è±¡ç±»" class="headerlink" title="4.7.3 çº¯è™šå‡½æ•°å’ŒæŠ½è±¡ç±»"></a>4.7.3 çº¯è™šå‡½æ•°å’ŒæŠ½è±¡ç±»</h4><p>åœ¨å¤šæ€ä¸­ï¼Œé€šå¸¸çˆ¶ç±»ä¸­è™šå‡½æ•°çš„å®ç°æ˜¯æ¯«æ— æ„ä¹‰çš„ï¼Œä¸»è¦éƒ½æ˜¯è°ƒç”¨å­ç±»é‡å†™çš„å†…å®¹</p><p>å› æ­¤å¯ä»¥å°†è™šå‡½æ•°æ”¹ä¸º<strong>çº¯è™šå‡½æ•°</strong></p><p>çº¯è™šå‡½æ•°è¯­æ³•ï¼š<code>virtual è¿”å›å€¼ç±»å‹ å‡½æ•°å ï¼ˆå‚æ•°åˆ—è¡¨ï¼‰= 0 ;</code></p><p>å½“ç±»ä¸­æœ‰äº†çº¯è™šå‡½æ•°ï¼Œè¿™ä¸ªç±»ä¹Ÿç§°ä¸º&#x3D;&#x3D;æŠ½è±¡ç±»&#x3D;&#x3D;</p><p><strong>æŠ½è±¡ç±»ç‰¹ç‚¹</strong>ï¼š</p><ul><li>æ— æ³•å®ä¾‹åŒ–å¯¹è±¡</li><li>å­ç±»å¿…é¡»é‡å†™æŠ½è±¡ç±»ä¸­çš„çº¯è™šå‡½æ•°ï¼Œå¦åˆ™ä¹Ÿå±äºæŠ½è±¡ç±»</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Base</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="comment">//çº¯è™šå‡½æ•°</span></span><br><span class="line"><span class="comment">//ç±»ä¸­åªè¦æœ‰ä¸€ä¸ªçº¯è™šå‡½æ•°å°±ç§°ä¸ºæŠ½è±¡ç±»</span></span><br><span class="line"><span class="comment">//æŠ½è±¡ç±»æ— æ³•å®ä¾‹åŒ–å¯¹è±¡</span></span><br><span class="line"><span class="comment">//å­ç±»å¿…é¡»é‡å†™çˆ¶ç±»ä¸­çš„çº¯è™šå‡½æ•°ï¼Œå¦åˆ™ä¹Ÿå±äºæŠ½è±¡ç±»</span></span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">func</span><span class="params">()</span> </span>= <span class="number">0</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Son</span> :<span class="keyword">public</span> Base</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">func</span><span class="params">()</span> </span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;funcè°ƒç”¨&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Base * base = <span class="literal">NULL</span>;</span><br><span class="line"><span class="comment">//base = new Base; // é”™è¯¯ï¼ŒæŠ½è±¡ç±»æ— æ³•å®ä¾‹åŒ–å¯¹è±¡</span></span><br><span class="line">base = <span class="keyword">new</span> Son;</span><br><span class="line">base-&gt;<span class="built_in">func</span>();</span><br><span class="line"><span class="keyword">delete</span> base;<span class="comment">//è®°å¾—é”€æ¯</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="4-7-4-å¤šæ€æ¡ˆä¾‹äºŒ-åˆ¶ä½œé¥®å“"><a href="#4-7-4-å¤šæ€æ¡ˆä¾‹äºŒ-åˆ¶ä½œé¥®å“" class="headerlink" title="4.7.4 å¤šæ€æ¡ˆä¾‹äºŒ-åˆ¶ä½œé¥®å“"></a>4.7.4 å¤šæ€æ¡ˆä¾‹äºŒ-åˆ¶ä½œé¥®å“</h4><p><strong>æ¡ˆä¾‹æè¿°ï¼š</strong></p><p>åˆ¶ä½œé¥®å“çš„å¤§è‡´æµç¨‹ä¸ºï¼šç…®æ°´ -  å†²æ³¡ - å€’å…¥æ¯ä¸­ - åŠ å…¥è¾…æ–™</p><p>åˆ©ç”¨å¤šæ€æŠ€æœ¯å®ç°æœ¬æ¡ˆä¾‹ï¼Œæä¾›æŠ½è±¡åˆ¶ä½œé¥®å“åŸºç±»ï¼Œæä¾›å­ç±»åˆ¶ä½œå’–å•¡å’ŒèŒ¶å¶</p><img src="/2024/10/16/C-%E6%A0%B8%E5%BF%83%E7%BC%96%E7%A8%8B/1545985945198.png" class="" width="1545985945198"><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æŠ½è±¡åˆ¶ä½œé¥®å“</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">AbstractDrinking</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="comment">//çƒ§æ°´</span></span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">Boil</span><span class="params">()</span> </span>= <span class="number">0</span>;</span><br><span class="line"><span class="comment">//å†²æ³¡</span></span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">Brew</span><span class="params">()</span> </span>= <span class="number">0</span>;</span><br><span class="line"><span class="comment">//å€’å…¥æ¯ä¸­</span></span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">PourInCup</span><span class="params">()</span> </span>= <span class="number">0</span>;</span><br><span class="line"><span class="comment">//åŠ å…¥è¾…æ–™</span></span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">PutSomething</span><span class="params">()</span> </span>= <span class="number">0</span>;</span><br><span class="line"><span class="comment">//è§„å®šæµç¨‹</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">MakeDrink</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="built_in">Boil</span>();</span><br><span class="line"><span class="built_in">Brew</span>();</span><br><span class="line"><span class="built_in">PourInCup</span>();</span><br><span class="line"><span class="built_in">PutSomething</span>();</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ¶ä½œå’–å•¡</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Coffee</span> : <span class="keyword">public</span> AbstractDrinking &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="comment">//çƒ§æ°´</span></span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">Boil</span><span class="params">()</span> </span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;ç…®å†œå¤«å±±æ³‰!&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å†²æ³¡</span></span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">Brew</span><span class="params">()</span> </span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å†²æ³¡å’–å•¡!&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å€’å…¥æ¯ä¸­</span></span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">PourInCup</span><span class="params">()</span> </span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å°†å’–å•¡å€’å…¥æ¯ä¸­!&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//åŠ å…¥è¾…æ–™</span></span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">PutSomething</span><span class="params">()</span> </span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;åŠ å…¥ç‰›å¥¶!&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ¶ä½œèŒ¶æ°´</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Tea</span> : <span class="keyword">public</span> AbstractDrinking &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="comment">//çƒ§æ°´</span></span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">Boil</span><span class="params">()</span> </span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;ç…®è‡ªæ¥æ°´!&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å†²æ³¡</span></span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">Brew</span><span class="params">()</span> </span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å†²æ³¡èŒ¶å¶!&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å€’å…¥æ¯ä¸­</span></span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">PourInCup</span><span class="params">()</span> </span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å°†èŒ¶æ°´å€’å…¥æ¯ä¸­!&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//åŠ å…¥è¾…æ–™</span></span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">PutSomething</span><span class="params">()</span> </span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;åŠ å…¥æ¸æ!&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä¸šåŠ¡å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">DoWork</span><span class="params">(AbstractDrinking* drink)</span> </span>&#123;</span><br><span class="line">drink-&gt;<span class="built_in">MakeDrink</span>();</span><br><span class="line"><span class="keyword">delete</span> drink;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="built_in">DoWork</span>(<span class="keyword">new</span> Coffee);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;--------------&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="built_in">DoWork</span>(<span class="keyword">new</span> Tea);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="4-7-5-è™šææ„å’Œçº¯è™šææ„"><a href="#4-7-5-è™šææ„å’Œçº¯è™šææ„" class="headerlink" title="4.7.5 è™šææ„å’Œçº¯è™šææ„"></a>4.7.5 è™šææ„å’Œçº¯è™šææ„</h4><p>å¤šæ€ä½¿ç”¨æ—¶ï¼Œå¦‚æœå­ç±»ä¸­æœ‰å±æ€§å¼€è¾Ÿåˆ°å †åŒºï¼Œé‚£ä¹ˆçˆ¶ç±»æŒ‡é’ˆåœ¨é‡Šæ”¾æ—¶æ— æ³•è°ƒç”¨åˆ°å­ç±»çš„ææ„ä»£ç </p><p>è§£å†³æ–¹å¼ï¼šå°†çˆ¶ç±»ä¸­çš„ææ„å‡½æ•°æ”¹ä¸º<strong>è™šææ„</strong>æˆ–è€…<strong>çº¯è™šææ„</strong></p><p>è™šææ„å’Œçº¯è™šææ„å…±æ€§ï¼š</p><ul><li>å¯ä»¥è§£å†³çˆ¶ç±»æŒ‡é’ˆé‡Šæ”¾å­ç±»å¯¹è±¡</li><li>éƒ½éœ€è¦æœ‰å…·ä½“çš„å‡½æ•°å®ç°</li></ul><p>è™šææ„å’Œçº¯è™šææ„åŒºåˆ«ï¼š</p><ul><li>å¦‚æœæ˜¯çº¯è™šææ„ï¼Œè¯¥ç±»å±äºæŠ½è±¡ç±»ï¼Œæ— æ³•å®ä¾‹åŒ–å¯¹è±¡</li></ul><p>è™šææ„è¯­æ³•ï¼š</p><p><code>virtual ~ç±»å()&#123;&#125;</code></p><p>çº¯è™šææ„è¯­æ³•ï¼š</p><p><code> virtual ~ç±»å() = 0;</code></p><p><code>ç±»å::~ç±»å()&#123;&#125;</code></p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Animal</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"></span><br><span class="line"><span class="built_in">Animal</span>()</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Animal æ„é€ å‡½æ•°è°ƒç”¨ï¼&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">Speak</span><span class="params">()</span> </span>= <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ææ„å‡½æ•°åŠ ä¸Švirtualå…³é”®å­—ï¼Œå˜æˆè™šææ„å‡½æ•°</span></span><br><span class="line"><span class="comment">//virtual ~Animal()</span></span><br><span class="line"><span class="comment">//&#123;</span></span><br><span class="line"><span class="comment">//cout &lt;&lt; &quot;Animalè™šææ„å‡½æ•°è°ƒç”¨ï¼&quot; &lt;&lt; endl;</span></span><br><span class="line"><span class="comment">//&#125;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">virtual</span> ~<span class="built_in">Animal</span>() = <span class="number">0</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">Animal::~<span class="built_in">Animal</span>()</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Animal çº¯è™šææ„å‡½æ•°è°ƒç”¨ï¼&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å’ŒåŒ…å«æ™®é€šçº¯è™šå‡½æ•°çš„ç±»ä¸€æ ·ï¼ŒåŒ…å«äº†çº¯è™šææ„å‡½æ•°çš„ç±»ä¹Ÿæ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ã€‚ä¸èƒ½å¤Ÿè¢«å®ä¾‹åŒ–ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Cat</span> : <span class="keyword">public</span> Animal &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Cat</span>(string name)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Catæ„é€ å‡½æ•°è°ƒç”¨ï¼&quot;</span> &lt;&lt; endl;</span><br><span class="line">m_Name = <span class="keyword">new</span> <span class="built_in">string</span>(name);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">Speak</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; *m_Name &lt;&lt;  <span class="string">&quot;å°çŒ«åœ¨è¯´è¯!&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">~<span class="built_in">Cat</span>()</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Catææ„å‡½æ•°è°ƒç”¨!&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">this</span>-&gt;m_Name != <span class="literal">NULL</span>) &#123;</span><br><span class="line"><span class="keyword">delete</span> m_Name;</span><br><span class="line">m_Name = <span class="literal">NULL</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">string *m_Name;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Animal *animal = <span class="keyword">new</span> <span class="built_in">Cat</span>(<span class="string">&quot;Tom&quot;</span>);</span><br><span class="line">animal-&gt;<span class="built_in">Speak</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">//é€šè¿‡çˆ¶ç±»æŒ‡é’ˆå»é‡Šæ”¾ï¼Œä¼šå¯¼è‡´å­ç±»å¯¹è±¡å¯èƒ½æ¸…ç†ä¸å¹²å‡€ï¼Œé€ æˆå†…å­˜æ³„æ¼</span></span><br><span class="line"><span class="comment">//æ€ä¹ˆè§£å†³ï¼Ÿç»™åŸºç±»å¢åŠ ä¸€ä¸ªè™šææ„å‡½æ•°</span></span><br><span class="line"><span class="comment">//è™šææ„å‡½æ•°å°±æ˜¯ç”¨æ¥è§£å†³é€šè¿‡çˆ¶ç±»æŒ‡é’ˆé‡Šæ”¾å­ç±»å¯¹è±¡</span></span><br><span class="line"><span class="keyword">delete</span> animal;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><p>â€‹1. è™šææ„æˆ–çº¯è™šææ„å°±æ˜¯ç”¨æ¥è§£å†³é€šè¿‡çˆ¶ç±»æŒ‡é’ˆé‡Šæ”¾å­ç±»å¯¹è±¡</p><p>â€‹2. å¦‚æœå­ç±»ä¸­æ²¡æœ‰å †åŒºæ•°æ®ï¼Œå¯ä»¥ä¸å†™ä¸ºè™šææ„æˆ–çº¯è™šææ„</p><p>â€‹3. æ‹¥æœ‰çº¯è™šææ„å‡½æ•°çš„ç±»ä¹Ÿå±äºæŠ½è±¡ç±»</p><h4 id="4-7-6-å¤šæ€æ¡ˆä¾‹ä¸‰-ç”µè„‘ç»„è£…"><a href="#4-7-6-å¤šæ€æ¡ˆä¾‹ä¸‰-ç”µè„‘ç»„è£…" class="headerlink" title="4.7.6 å¤šæ€æ¡ˆä¾‹ä¸‰-ç”µè„‘ç»„è£…"></a>4.7.6 å¤šæ€æ¡ˆä¾‹ä¸‰-ç”µè„‘ç»„è£…</h4><p><strong>æ¡ˆä¾‹æè¿°ï¼š</strong></p><p>ç”µè„‘ä¸»è¦ç»„æˆéƒ¨ä»¶ä¸º CPUï¼ˆç”¨äºè®¡ç®—ï¼‰ï¼Œæ˜¾å¡ï¼ˆç”¨äºæ˜¾ç¤ºï¼‰ï¼Œå†…å­˜æ¡ï¼ˆç”¨äºå­˜å‚¨ï¼‰</p><p>å°†æ¯ä¸ªé›¶ä»¶å°è£…å‡ºæŠ½è±¡åŸºç±»ï¼Œå¹¶ä¸”æä¾›ä¸åŒçš„å‚å•†ç”Ÿäº§ä¸åŒçš„é›¶ä»¶ï¼Œä¾‹å¦‚Intelå‚å•†å’ŒLenovoå‚å•†</p><p>åˆ›å»ºç”µè„‘ç±»æä¾›è®©ç”µè„‘å·¥ä½œçš„å‡½æ•°ï¼Œå¹¶ä¸”è°ƒç”¨æ¯ä¸ªé›¶ä»¶å·¥ä½œçš„æ¥å£</p><p>æµ‹è¯•æ—¶ç»„è£…ä¸‰å°ä¸åŒçš„ç”µè„‘è¿›è¡Œå·¥ä½œ</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æŠ½è±¡CPUç±»</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CPU</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="comment">//æŠ½è±¡çš„è®¡ç®—å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">calculate</span><span class="params">()</span> </span>= <span class="number">0</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æŠ½è±¡æ˜¾å¡ç±»</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">VideoCard</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="comment">//æŠ½è±¡çš„æ˜¾ç¤ºå‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">display</span><span class="params">()</span> </span>= <span class="number">0</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æŠ½è±¡å†…å­˜æ¡ç±»</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Memory</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="comment">//æŠ½è±¡çš„å­˜å‚¨å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">storage</span><span class="params">()</span> </span>= <span class="number">0</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç”µè„‘ç±»</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Computer</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Computer</span>(CPU * cpu, VideoCard * vc, Memory * mem)</span><br><span class="line">&#123;</span><br><span class="line">m_cpu = cpu;</span><br><span class="line">m_vc = vc;</span><br><span class="line">m_mem = mem;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æä¾›å·¥ä½œçš„å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">work</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//è®©é›¶ä»¶å·¥ä½œèµ·æ¥ï¼Œè°ƒç”¨æ¥å£</span></span><br><span class="line">m_cpu-&gt;<span class="built_in">calculate</span>();</span><br><span class="line"></span><br><span class="line">m_vc-&gt;<span class="built_in">display</span>();</span><br><span class="line"></span><br><span class="line">m_mem-&gt;<span class="built_in">storage</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æä¾›ææ„å‡½æ•° é‡Šæ”¾3ä¸ªç”µè„‘é›¶ä»¶</span></span><br><span class="line">~<span class="built_in">Computer</span>()</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//é‡Šæ”¾CPUé›¶ä»¶</span></span><br><span class="line"><span class="keyword">if</span> (m_cpu != <span class="literal">NULL</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">delete</span> m_cpu;</span><br><span class="line">m_cpu = <span class="literal">NULL</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//é‡Šæ”¾æ˜¾å¡é›¶ä»¶</span></span><br><span class="line"><span class="keyword">if</span> (m_vc != <span class="literal">NULL</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">delete</span> m_vc;</span><br><span class="line">m_vc = <span class="literal">NULL</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//é‡Šæ”¾å†…å­˜æ¡é›¶ä»¶</span></span><br><span class="line"><span class="keyword">if</span> (m_mem != <span class="literal">NULL</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">delete</span> m_mem;</span><br><span class="line">m_mem = <span class="literal">NULL</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line"></span><br><span class="line">CPU * m_cpu; <span class="comment">//CPUçš„é›¶ä»¶æŒ‡é’ˆ</span></span><br><span class="line">VideoCard * m_vc; <span class="comment">//æ˜¾å¡é›¶ä»¶æŒ‡é’ˆ</span></span><br><span class="line">Memory * m_mem; <span class="comment">//å†…å­˜æ¡é›¶ä»¶æŒ‡é’ˆ</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å…·ä½“å‚å•†</span></span><br><span class="line"><span class="comment">//Intelå‚å•†</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">IntelCPU</span> :<span class="keyword">public</span> CPU</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">calculate</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Intelçš„CPUå¼€å§‹è®¡ç®—äº†ï¼&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">IntelVideoCard</span> :<span class="keyword">public</span> VideoCard</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">display</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Intelçš„æ˜¾å¡å¼€å§‹æ˜¾ç¤ºäº†ï¼&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">IntelMemory</span> :<span class="keyword">public</span> Memory</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">storage</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Intelçš„å†…å­˜æ¡å¼€å§‹å­˜å‚¨äº†ï¼&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Lenovoå‚å•†</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">LenovoCPU</span> :<span class="keyword">public</span> CPU</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">calculate</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Lenovoçš„CPUå¼€å§‹è®¡ç®—äº†ï¼&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">LenovoVideoCard</span> :<span class="keyword">public</span> VideoCard</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">display</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Lenovoçš„æ˜¾å¡å¼€å§‹æ˜¾ç¤ºäº†ï¼&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">LenovoMemory</span> :<span class="keyword">public</span> Memory</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">storage</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Lenovoçš„å†…å­˜æ¡å¼€å§‹å­˜å‚¨äº†ï¼&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//ç¬¬ä¸€å°ç”µè„‘é›¶ä»¶</span></span><br><span class="line">CPU * intelCpu = <span class="keyword">new</span> IntelCPU;</span><br><span class="line">VideoCard * intelCard = <span class="keyword">new</span> IntelVideoCard;</span><br><span class="line">Memory * intelMem = <span class="keyword">new</span> IntelMemory;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;ç¬¬ä¸€å°ç”µè„‘å¼€å§‹å·¥ä½œï¼š&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="comment">//åˆ›å»ºç¬¬ä¸€å°ç”µè„‘</span></span><br><span class="line">Computer * computer1 = <span class="keyword">new</span> <span class="built_in">Computer</span>(intelCpu, intelCard, intelMem);</span><br><span class="line">computer1-&gt;<span class="built_in">work</span>();</span><br><span class="line"><span class="keyword">delete</span> computer1;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;-----------------------&quot;</span> &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;ç¬¬äºŒå°ç”µè„‘å¼€å§‹å·¥ä½œï¼š&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="comment">//ç¬¬äºŒå°ç”µè„‘ç»„è£…</span></span><br><span class="line">Computer * computer2 = <span class="keyword">new</span> <span class="built_in">Computer</span>(<span class="keyword">new</span> LenovoCPU, <span class="keyword">new</span> LenovoVideoCard, <span class="keyword">new</span> LenovoMemory);;</span><br><span class="line">computer2-&gt;<span class="built_in">work</span>();</span><br><span class="line"><span class="keyword">delete</span> computer2;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;-----------------------&quot;</span> &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;ç¬¬ä¸‰å°ç”µè„‘å¼€å§‹å·¥ä½œï¼š&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="comment">//ç¬¬ä¸‰å°ç”µè„‘ç»„è£…</span></span><br><span class="line">Computer * computer3 = <span class="keyword">new</span> <span class="built_in">Computer</span>(<span class="keyword">new</span> LenovoCPU, <span class="keyword">new</span> IntelVideoCard, <span class="keyword">new</span> LenovoMemory);;</span><br><span class="line">computer3-&gt;<span class="built_in">work</span>();</span><br><span class="line"><span class="keyword">delete</span> computer3;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="5-æ–‡ä»¶æ“ä½œ"><a href="#5-æ–‡ä»¶æ“ä½œ" class="headerlink" title="5 æ–‡ä»¶æ“ä½œ"></a>5 æ–‡ä»¶æ“ä½œ</h2><p>ç¨‹åºè¿è¡Œæ—¶äº§ç”Ÿçš„æ•°æ®éƒ½å±äºä¸´æ—¶æ•°æ®ï¼Œç¨‹åºä¸€æ—¦è¿è¡Œç»“æŸéƒ½ä¼šè¢«é‡Šæ”¾</p><p>é€šè¿‡<strong>æ–‡ä»¶å¯ä»¥å°†æ•°æ®æŒä¹…åŒ–</strong></p><p>C++ä¸­å¯¹æ–‡ä»¶æ“ä½œéœ€è¦åŒ…å«å¤´æ–‡ä»¶ &#x3D;&#x3D;&lt; fstream &gt;&#x3D;&#x3D;</p><p>æ–‡ä»¶ç±»å‹åˆ†ä¸ºä¸¤ç§ï¼š</p><ol><li><strong>æ–‡æœ¬æ–‡ä»¶</strong>     -  æ–‡ä»¶ä»¥æ–‡æœ¬çš„<strong>ASCIIç </strong>å½¢å¼å­˜å‚¨åœ¨è®¡ç®—æœºä¸­</li><li><strong>äºŒè¿›åˆ¶æ–‡ä»¶</strong> -  æ–‡ä»¶ä»¥æ–‡æœ¬çš„<strong>äºŒè¿›åˆ¶</strong>å½¢å¼å­˜å‚¨åœ¨è®¡ç®—æœºä¸­ï¼Œç”¨æˆ·ä¸€èˆ¬ä¸èƒ½ç›´æ¥è¯»æ‡‚å®ƒä»¬</li></ol><p>æ“ä½œæ–‡ä»¶çš„ä¸‰å¤§ç±»:</p><ol><li>ofstreamï¼šå†™æ“ä½œ</li><li>ifstreamï¼š è¯»æ“ä½œ</li><li>fstream ï¼š è¯»å†™æ“ä½œ</li></ol><h3 id="5-1æ–‡æœ¬æ–‡ä»¶"><a href="#5-1æ–‡æœ¬æ–‡ä»¶" class="headerlink" title="5.1æ–‡æœ¬æ–‡ä»¶"></a>5.1æ–‡æœ¬æ–‡ä»¶</h3><h4 id="5-1-1å†™æ–‡ä»¶"><a href="#5-1-1å†™æ–‡ä»¶" class="headerlink" title="5.1.1å†™æ–‡ä»¶"></a>5.1.1å†™æ–‡ä»¶</h4><p>   å†™æ–‡ä»¶æ­¥éª¤å¦‚ä¸‹ï¼š</p><ol><li><p>åŒ…å«å¤´æ–‡ä»¶   </p><p>#include &lt;fstream&gt;</p></li><li><p>åˆ›å»ºæµå¯¹è±¡  </p><p>ofstream ofs;</p></li><li><p>æ‰“å¼€æ–‡ä»¶</p><p>ofs.open(â€œæ–‡ä»¶è·¯å¾„â€,æ‰“å¼€æ–¹å¼);</p></li><li><p>å†™æ•°æ®</p><p>ofs &lt;&lt; â€œå†™å…¥çš„æ•°æ®â€;</p></li><li><p>å…³é—­æ–‡ä»¶</p><p>ofs.close();</p></li></ol><p>æ–‡ä»¶æ‰“å¼€æ–¹å¼ï¼š</p><table><thead><tr><th>æ‰“å¼€æ–¹å¼</th><th>è§£é‡Š</th></tr></thead><tbody><tr><td>ios::in</td><td>ä¸ºè¯»æ–‡ä»¶è€Œæ‰“å¼€æ–‡ä»¶</td></tr><tr><td>ios::out</td><td>ä¸ºå†™æ–‡ä»¶è€Œæ‰“å¼€æ–‡ä»¶</td></tr><tr><td>ios::ate</td><td>åˆå§‹ä½ç½®ï¼šæ–‡ä»¶å°¾</td></tr><tr><td>ios::app</td><td>è¿½åŠ æ–¹å¼å†™æ–‡ä»¶</td></tr><tr><td>ios::trunc</td><td>å¦‚æœæ–‡ä»¶å­˜åœ¨å…ˆåˆ é™¤ï¼Œå†åˆ›å»º</td></tr><tr><td>ios::binary</td><td>äºŒè¿›åˆ¶æ–¹å¼</td></tr></tbody></table><p><strong>æ³¨æ„ï¼š</strong> æ–‡ä»¶æ‰“å¼€æ–¹å¼å¯ä»¥é…åˆä½¿ç”¨ï¼Œåˆ©ç”¨|æ“ä½œç¬¦</p><p><strong>ä¾‹å¦‚ï¼š</strong>ç”¨äºŒè¿›åˆ¶æ–¹å¼å†™æ–‡ä»¶ <code>ios::binary |  ios:: out</code></p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;fstream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">ofstream ofs;</span><br><span class="line">ofs.<span class="built_in">open</span>(<span class="string">&quot;test.txt&quot;</span>, ios::out);</span><br><span class="line"></span><br><span class="line">ofs &lt;&lt; <span class="string">&quot;å§“åï¼šå¼ ä¸‰&quot;</span> &lt;&lt; endl;</span><br><span class="line">ofs &lt;&lt; <span class="string">&quot;æ€§åˆ«ï¼šç”·&quot;</span> &lt;&lt; endl;</span><br><span class="line">ofs &lt;&lt; <span class="string">&quot;å¹´é¾„ï¼š18&quot;</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">ofs.<span class="built_in">close</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>æ–‡ä»¶æ“ä½œå¿…é¡»åŒ…å«å¤´æ–‡ä»¶ fstream</li><li>è¯»æ–‡ä»¶å¯ä»¥åˆ©ç”¨ ofstream  ï¼Œæˆ–è€…fstreamç±»</li><li>æ‰“å¼€æ–‡ä»¶æ—¶å€™éœ€è¦æŒ‡å®šæ“ä½œæ–‡ä»¶çš„è·¯å¾„ï¼Œä»¥åŠæ‰“å¼€æ–¹å¼</li><li>åˆ©ç”¨&lt;&lt;å¯ä»¥å‘æ–‡ä»¶ä¸­å†™æ•°æ®</li><li>æ“ä½œå®Œæ¯•ï¼Œè¦å…³é—­æ–‡ä»¶</li></ul><h4 id="5-1-2è¯»æ–‡ä»¶"><a href="#5-1-2è¯»æ–‡ä»¶" class="headerlink" title="5.1.2è¯»æ–‡ä»¶"></a>5.1.2è¯»æ–‡ä»¶</h4><p>è¯»æ–‡ä»¶ä¸å†™æ–‡ä»¶æ­¥éª¤ç›¸ä¼¼ï¼Œä½†æ˜¯è¯»å–æ–¹å¼ç›¸å¯¹äºæ¯”è¾ƒå¤š</p><p>è¯»æ–‡ä»¶æ­¥éª¤å¦‚ä¸‹ï¼š</p><ol><li><p>åŒ…å«å¤´æ–‡ä»¶   </p><p>#include &lt;fstream&gt;</p></li><li><p>åˆ›å»ºæµå¯¹è±¡  </p><p>ifstream ifs;</p></li><li><p>æ‰“å¼€æ–‡ä»¶å¹¶åˆ¤æ–­æ–‡ä»¶æ˜¯å¦æ‰“å¼€æˆåŠŸ</p><p>ifs.open(â€œæ–‡ä»¶è·¯å¾„â€,æ‰“å¼€æ–¹å¼);</p></li><li><p>è¯»æ•°æ®</p><p>å››ç§æ–¹å¼è¯»å–</p></li><li><p>å…³é—­æ–‡ä»¶</p><p>ifs.close();</p></li></ol><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;fstream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">ifstream ifs;</span><br><span class="line">ifs.<span class="built_in">open</span>(<span class="string">&quot;test.txt&quot;</span>, ios::in);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (!ifs.<span class="built_in">is_open</span>())</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æ–‡ä»¶æ‰“å¼€å¤±è´¥&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç¬¬ä¸€ç§æ–¹å¼</span></span><br><span class="line"><span class="comment">//char buf[1024] = &#123; 0 &#125;;</span></span><br><span class="line"><span class="comment">//while (ifs &gt;&gt; buf)</span></span><br><span class="line"><span class="comment">//&#123;</span></span><br><span class="line"><span class="comment">//cout &lt;&lt; buf &lt;&lt; endl;</span></span><br><span class="line"><span class="comment">//&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//ç¬¬äºŒç§</span></span><br><span class="line"><span class="comment">//char buf[1024] = &#123; 0 &#125;;</span></span><br><span class="line"><span class="comment">//while (ifs.getline(buf,sizeof(buf)))</span></span><br><span class="line"><span class="comment">//&#123;</span></span><br><span class="line"><span class="comment">//cout &lt;&lt; buf &lt;&lt; endl;</span></span><br><span class="line"><span class="comment">//&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//ç¬¬ä¸‰ç§</span></span><br><span class="line"><span class="comment">//string buf;</span></span><br><span class="line"><span class="comment">//while (getline(ifs, buf))</span></span><br><span class="line"><span class="comment">//&#123;</span></span><br><span class="line"><span class="comment">//cout &lt;&lt; buf &lt;&lt; endl;</span></span><br><span class="line"><span class="comment">//&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="type">char</span> c;</span><br><span class="line"><span class="keyword">while</span> ((c = ifs.<span class="built_in">get</span>()) != EOF)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; c;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ifs.<span class="built_in">close</span>();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>è¯»æ–‡ä»¶å¯ä»¥åˆ©ç”¨ ifstream  ï¼Œæˆ–è€…fstreamç±»</li><li>åˆ©ç”¨is_openå‡½æ•°å¯ä»¥åˆ¤æ–­æ–‡ä»¶æ˜¯å¦æ‰“å¼€æˆåŠŸ</li><li>close å…³é—­æ–‡ä»¶</li></ul><h3 id="5-2-äºŒè¿›åˆ¶æ–‡ä»¶"><a href="#5-2-äºŒè¿›åˆ¶æ–‡ä»¶" class="headerlink" title="5.2 äºŒè¿›åˆ¶æ–‡ä»¶"></a>5.2 äºŒè¿›åˆ¶æ–‡ä»¶</h3><p>ä»¥äºŒè¿›åˆ¶çš„æ–¹å¼å¯¹æ–‡ä»¶è¿›è¡Œè¯»å†™æ“ä½œ</p><p>æ‰“å¼€æ–¹å¼è¦æŒ‡å®šä¸º &#x3D;&#x3D;ios::binary&#x3D;&#x3D;</p><h4 id="5-2-1-å†™æ–‡ä»¶"><a href="#5-2-1-å†™æ–‡ä»¶" class="headerlink" title="5.2.1 å†™æ–‡ä»¶"></a>5.2.1 å†™æ–‡ä»¶</h4><p>äºŒè¿›åˆ¶æ–¹å¼å†™æ–‡ä»¶ä¸»è¦åˆ©ç”¨æµå¯¹è±¡è°ƒç”¨æˆå‘˜å‡½æ•°write</p><p>å‡½æ•°åŸå‹ ï¼š<code>ostream&amp; write(const char * buffer,int len);</code></p><p>å‚æ•°è§£é‡Šï¼šå­—ç¬¦æŒ‡é’ˆbufferæŒ‡å‘å†…å­˜ä¸­ä¸€æ®µå­˜å‚¨ç©ºé—´ã€‚lenæ˜¯è¯»å†™çš„å­—èŠ‚æ•°</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;fstream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="type">char</span> m_Name[<span class="number">64</span>];</span><br><span class="line"><span class="type">int</span> m_Age;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//äºŒè¿›åˆ¶æ–‡ä»¶  å†™æ–‡ä»¶</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//1ã€åŒ…å«å¤´æ–‡ä»¶</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//2ã€åˆ›å»ºè¾“å‡ºæµå¯¹è±¡</span></span><br><span class="line"><span class="function">ofstream <span class="title">ofs</span><span class="params">(<span class="string">&quot;person.txt&quot;</span>, ios::out | ios::binary)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//3ã€æ‰“å¼€æ–‡ä»¶</span></span><br><span class="line"><span class="comment">//ofs.open(&quot;person.txt&quot;, ios::out | ios::binary);</span></span><br><span class="line"></span><br><span class="line">Person p = &#123;<span class="string">&quot;å¼ ä¸‰&quot;</span>  , <span class="number">18</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//4ã€å†™æ–‡ä»¶</span></span><br><span class="line">ofs.<span class="built_in">write</span>((<span class="type">const</span> <span class="type">char</span> *)&amp;p, <span class="built_in">sizeof</span>(p));</span><br><span class="line"></span><br><span class="line"><span class="comment">//5ã€å…³é—­æ–‡ä»¶</span></span><br><span class="line">ofs.<span class="built_in">close</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>æ–‡ä»¶è¾“å‡ºæµå¯¹è±¡ å¯ä»¥é€šè¿‡writeå‡½æ•°ï¼Œä»¥äºŒè¿›åˆ¶æ–¹å¼å†™æ•°æ®</li></ul><h4 id="5-2-2-è¯»æ–‡ä»¶"><a href="#5-2-2-è¯»æ–‡ä»¶" class="headerlink" title="5.2.2 è¯»æ–‡ä»¶"></a>5.2.2 è¯»æ–‡ä»¶</h4><p>äºŒè¿›åˆ¶æ–¹å¼è¯»æ–‡ä»¶ä¸»è¦åˆ©ç”¨æµå¯¹è±¡è°ƒç”¨æˆå‘˜å‡½æ•°read</p><p>å‡½æ•°åŸå‹ï¼š<code>istream&amp; read(char *buffer,int len);</code></p><p>å‚æ•°è§£é‡Šï¼šå­—ç¬¦æŒ‡é’ˆbufferæŒ‡å‘å†…å­˜ä¸­ä¸€æ®µå­˜å‚¨ç©ºé—´ã€‚lenæ˜¯è¯»å†™çš„å­—èŠ‚æ•°</p><p>ç¤ºä¾‹ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;fstream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="type">char</span> m_Name[<span class="number">64</span>];</span><br><span class="line"><span class="type">int</span> m_Age;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="function">ifstream <span class="title">ifs</span><span class="params">(<span class="string">&quot;person.txt&quot;</span>, ios::in | ios::binary)</span></span>;</span><br><span class="line"><span class="keyword">if</span> (!ifs.<span class="built_in">is_open</span>())</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æ–‡ä»¶æ‰“å¼€å¤±è´¥&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Person p;</span><br><span class="line">ifs.<span class="built_in">read</span>((<span class="type">char</span> *)&amp;p, <span class="built_in">sizeof</span>(p));</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å§“åï¼š &quot;</span> &lt;&lt; p.m_Name &lt;&lt; <span class="string">&quot; å¹´é¾„ï¼š &quot;</span> &lt;&lt; p.m_Age &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>æ–‡ä»¶è¾“å…¥æµå¯¹è±¡ å¯ä»¥é€šè¿‡readå‡½æ•°ï¼Œä»¥äºŒè¿›åˆ¶æ–¹å¼è¯»æ•°æ®</li></ul>]]></content>
    
    
    <summary type="html">&lt;p&gt;æœ¬é˜¶æ®µä¸»è¦é’ˆå¯¹&lt;code&gt;C++&lt;/code&gt; , &lt;code&gt;é¢å‘å¯¹è±¡&lt;/code&gt; , &lt;code&gt;ç¼–ç¨‹æŠ€æœ¯&lt;/code&gt;åšè¯¦ç»†è®²è§£ï¼Œæ¢è®¨C++ä¸­çš„æ ¸å¿ƒå’Œç²¾é«“ã€‚&lt;/p&gt;</summary>
    
    
    
    
    <category term="C++" scheme="https://lyroom.github.io/tags/C/"/>
    
    <category term="é¢å‘å¯¹è±¡" scheme="https://lyroom.github.io/tags/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/"/>
    
    <category term="ç¼–ç¨‹æŠ€æœ¯" scheme="https://lyroom.github.io/tags/%E7%BC%96%E7%A8%8B%E6%8A%80%E6%9C%AF/"/>
    
  </entry>
  
</feed>
