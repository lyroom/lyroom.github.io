[{"title":"å¸¸é‡æŒ‡é’ˆè¿˜æ˜¯æŒ‡é’ˆå¸¸é‡â€”â€”conståˆ°åº•ä¿®é¥°äº†è°ï¼Ÿ","date":"2025-10-04T08:19:27.000Z","path":"2025/10/04/å¸¸é‡æŒ‡é’ˆè¿˜æ˜¯æŒ‡é’ˆå¸¸é‡â€”â€”conståˆ°åº•ä¿®é¥°äº†è°ï¼Ÿ/","text":"å½“consté‡åˆ°æŒ‡é’ˆï¼Œå¼•ç”¨æ—¶ï¼Œæˆ‘ä»¬å¾€å¾€ä¼šå¾ˆå›°æƒ‘ï¼Œå®ƒä¿®é¥°çš„æ˜¯æŒ‡é’ˆæœ¬èº«è¿˜æ˜¯æŒ‡é’ˆæ‰€æŒ‡å‘çš„å˜é‡å‘¢ï¼Ÿæœ¬æ–‡ä¼šåŠ©ä½ è§£å†³è¿™ç±»é—®é¢˜ã€‚ ğŸ”¹ C++ const ä¿®é¥°é¡ºåºå›¾1. åŸºç¡€è§„åˆ™ï¼ˆå³å·¦æ³•åˆ™ï¼‰è¯»ä¸€ä¸ªå£°æ˜æ—¶ï¼š ä»å˜é‡åå¼€å§‹ å…ˆçœ‹å³è¾¹ï¼Œå†çœ‹å·¦è¾¹ *ã€&amp; ä¼˜å…ˆçº§ç›¸åŒï¼ŒæŒ‰ç»“åˆå¾‹ const ä¿®é¥°å®ƒå·¦è¾¹æœ€è¿‘çš„ä¸œè¥¿ï¼ˆå¦‚æœå·¦è¾¹æ²¡æœ‰ï¼Œå°±ä¿®é¥°å³è¾¹ï¼‰ 2. å¸¸è§ä¾‹å­å›¾123int* p;p â†’ * â†’ intp æ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘ int 123const int* p; //constå·¦è¾¹æ²¡ä¸œè¥¿ï¼Œé™å®šå³è¾¹çš„int p â†’ * â†’ const intp æ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘ const int 12345int* const p; //å·¦è¾¹æœ‰int *ï¼Œconsté™å®šint * const â”‚p â†’ * â”€â”˜ â†’ intp æ˜¯ä¸€ä¸ª const æŒ‡é’ˆï¼ŒæŒ‡å‘ int 12345const int* const p; const â”‚p â†’ * â”€â”˜ â†’ const intp æ˜¯ä¸€ä¸ª const æŒ‡é’ˆï¼ŒæŒ‡å‘ const int 123int&amp; r;r â†’ &amp; â†’ intr æ˜¯ int çš„å¼•ç”¨ 123const int&amp; r;r â†’ &amp; â†’ const intr æ˜¯ const int çš„å¼•ç”¨ 3. æ¥ä¸ªæµ‹è¯•é—®é¢˜å¼•å…¥ï¼š 1234567891011121314template&lt;typename T&gt;void printValue(const T&amp; t) &#123; std::cout &lt;&lt; &quot;General printValue: &quot; &lt;&lt; t &lt;&lt; std::endl;&#125;template&lt;&gt;void printValue&lt;std::string &gt;(const std::string&amp; t) &#123; std::cout &lt;&lt; &quot;Specialized printValue: &quot; &lt;&lt; t &lt;&lt; std::endl;&#125;template&lt;&gt;void printValue&lt;int*&gt;(const int*&amp; t) &#123; std::cout &lt;&lt; &quot;Specialized printValue: &quot; &lt;&lt; *t &lt;&lt; std::endl;&#125; è¿™ä¸ªæ¨¡æ¿æŠ¥äº†ç¬¬12è¡Œä»£ç çš„æ¨¡æ¿å’ŒåŸæ¨¡ç‰ˆä¸åŒ¹é…ï¼Œè¿™ä¸ªåŸå› æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ è§£å†³æ€è·¯ï¼š 123const std::string&amp; t; // const å·¦è¾¹æ²¡ä¸œè¥¿ï¼Œé™å®šstd::stringr â†’ &amp; â†’ const std::stringr æ˜¯ä¸€ä¸ªå¼•ç”¨ï¼Œç»‘å®šåˆ° &quot;std::stringçš„ä¸€ä¸ªå¸¸é‡&quot; 123const int*&amp; r; //const é™å®šintr â†’ &amp; â†’ * â†’ const intr æ˜¯ä¸€ä¸ªå¼•ç”¨ï¼Œç»‘å®šåˆ° &quot;æŒ‡å‘ const int çš„æŒ‡é’ˆ&quot; 123int* const&amp; r; //å·¦è¾¹æœ‰int * ï¼Œconsté™å®šint*r â†’ &amp; â†’ const * â†’ intr æ˜¯ä¸€ä¸ªå¼•ç”¨ï¼Œç»‘å®šåˆ° &quot;const æŒ‡é’ˆï¼ŒæŒ‡å‘ int&quot; å†çœ‹çœ‹è¿™ä¸ªåŸæ¨¡æ¿ï¼Œæˆ‘ä»¬å¸Œæœ›consté™å®šçš„æ˜¯Tç±»å‹æ•°æ®tçš„å¼•ç”¨å†…å®¹ï¼Œè€Œæˆ‘ä»¬çš„ä¸»è§’æ˜¯int *,æ˜¯ä¸€ä¸ªæŒ‡å‘intçš„æŒ‡é’ˆï¼Œæˆ‘ä»¬éœ€è¦è¿™ä¸ªæŒ‡é’ˆä¸è¢«ä¿®æ”¹ï¼Œè€Œä¸æ˜¯è¿™ä¸ªæŒ‡é’ˆæŒ‡å‘çš„ä¸€ä¸ªintæ•°æ®ä¸è¢«ä¿®æ”¹ï¼Œæ‰€ä»¥è¦æ”¹æˆä¸‹é¢è¿™ç§æƒ…å†µæ‰èƒ½åŒ¹é…åŸæ¨¡æ¿ã€‚ ğŸ“Œ C++ const ä¿®é¥°é€ŸæŸ¥è¡¨ å£°æ˜ å«ä¹‰ å“ªä¸ªæ˜¯ const èƒ½å¦æ”¹å¯¹è±¡ èƒ½å¦æ”¹æŒ‡é’ˆ int* p; p æ˜¯æŒ‡é’ˆï¼ŒæŒ‡å‘ int æ—  const âœ… å¯ä»¥ âœ… å¯ä»¥ const int* p; æˆ– int const* p; p æ˜¯æŒ‡é’ˆï¼ŒæŒ‡å‘ const int int æ˜¯ const âŒ ä¸è¡Œ âœ… å¯ä»¥ int* const p; p æ˜¯ const æŒ‡é’ˆï¼ŒæŒ‡å‘ int æŒ‡é’ˆæ˜¯ const âœ… å¯ä»¥ âŒ ä¸è¡Œ const int* const p; p æ˜¯ const æŒ‡é’ˆï¼ŒæŒ‡å‘ const int ä¸¤è€…éƒ½ const âŒ ä¸è¡Œ âŒ ä¸è¡Œ int&amp; r; r æ˜¯ int çš„å¼•ç”¨ æ—  const âœ… å¯ä»¥ â€”â€” const int&amp; r; r æ˜¯ const int çš„å¼•ç”¨ int æ˜¯ const âŒ ä¸è¡Œ â€”â€” const int*&amp; r; r æ˜¯å¼•ç”¨ï¼Œç»‘å®šåˆ°ã€ŒæŒ‡å‘ const int çš„æŒ‡é’ˆã€ int æ˜¯ const âŒ ä¸è¡Œ âœ… å¯ä»¥ int* const&amp; r; r æ˜¯å¼•ç”¨ï¼Œç»‘å®šåˆ°ã€Œconst æŒ‡é’ˆï¼ŒæŒ‡å‘ intã€ æŒ‡é’ˆæ˜¯ const âœ… å¯ä»¥ âŒ ä¸è¡Œ const int* const&amp; r; r æ˜¯å¼•ç”¨ï¼Œç»‘å®šåˆ°ã€Œconst æŒ‡é’ˆï¼ŒæŒ‡å‘ const intã€ ä¸¤è€…éƒ½ const âŒ ä¸è¡Œ âŒ ä¸è¡Œ ğŸ“Œ å£è¯€æ€»ç»“ const åœ¨ * å·¦è¾¹ â†’ ä¿®é¥°æ‰€æŒ‡å¯¹è±¡ const int* p â†’ æŒ‡å‘ const intï¼ˆä¸èƒ½æ”¹å¯¹è±¡ï¼‰ const åœ¨ * å³è¾¹ â†’ ä¿®é¥°æŒ‡é’ˆæœ¬èº« int* const p â†’ const æŒ‡é’ˆï¼ˆä¸èƒ½æ”¹æŒ‡é’ˆï¼‰ &amp; å‡ºç°æ—¶ï¼Œå°±æ˜¯â€œå¼•ç”¨åˆ°å‰é¢é‚£ä¸€æ•´ä¸ªç±»å‹â€ã€‚","link":"","tags":[{"name":"C++","slug":"C","permalink":"https://lyroom.github.io/tags/C/"},{"name":"const","slug":"const","permalink":"https://lyroom.github.io/tags/const/"}]},{"title":"C++æœèŠ±å¤•æ‹¾-æ¨¡æ¿è¯¦è§£","date":"2025-09-26T08:19:24.000Z","path":"2025/09/26/C-æœèŠ±å¤•æ‹¾-æ¨¡æ¿è¯¦è§£/","text":"æ¨¡æ¿è¯¦è§£æ¨¡æ¿åŸºç¡€C++ æ¨¡æ¿ï¼ˆTemplatesï¼‰æ˜¯ç°ä»£ C++ ä¸­å¼ºå¤§è€Œçµæ´»çš„ç‰¹æ€§ï¼Œæ”¯æŒæ³›å‹ç¼–ç¨‹ï¼Œä½¿å¾—ä»£ç æ›´å…·å¤ç”¨æ€§å’Œç±»å‹å®‰å…¨æ€§ã€‚æ¨¡æ¿ä¸ä»…åŒ…æ‹¬åŸºæœ¬çš„å‡½æ•°æ¨¡æ¿å’Œç±»æ¨¡æ¿ï¼Œè¿˜æ¶µç›–äº†æ¨¡æ¿ç‰¹åŒ–ï¼ˆå…¨ç‰¹åŒ–ä¸åç‰¹åŒ–ï¼‰ã€æ¨¡æ¿å‚æ•°ç§ç±»ã€å˜å‚æ¨¡æ¿ï¼ˆVariadic Templatesï¼‰ã€æ¨¡æ¿å…ƒç¼–ç¨‹ï¼ˆTemplate Metaprogrammingï¼‰ã€SFINAEï¼ˆSubstitution Failure Is Not An Errorï¼‰ç­‰é«˜çº§å†…å®¹ã€‚ å‡½æ•°æ¨¡æ¿å‡½æ•°æ¨¡æ¿å…è®¸ç¼–å†™é€šç”¨çš„å‡½æ•°ï¼Œé€šè¿‡ç±»å‹å‚æ•°åŒ–ï¼Œä½¿å…¶èƒ½å¤Ÿå¤„ç†ä¸åŒçš„æ•°æ®ç±»å‹ã€‚å®ƒé€šè¿‡æ¨¡æ¿å‚æ•°å®šä¹‰ä¸ç±»å‹æ— å…³çš„å‡½æ•°ã€‚ è¯­æ³•ï¼š1234template &lt;typename T&gt;T functionName(T param) &#123; // å‡½æ•°ä½“&#125; ç¤ºä¾‹ï¼šæœ€å¤§å€¼å‡½æ•°12345678910111213#include &lt;iostream&gt;template &lt;typename T&gt;T maxValue(T a, T b) &#123; return (a &gt; b) ? a : b;&#125;int main() &#123; std::cout &lt;&lt; maxValue(3, 7) &lt;&lt; std::endl; // int ç±»å‹ std::cout &lt;&lt; maxValue(3.14, 2.72) &lt;&lt; std::endl; // double ç±»å‹ std::cout &lt;&lt; maxValue(&#x27;a&#x27;, &#x27;z&#x27;) &lt;&lt; std::endl; // char ç±»å‹ return 0;&#125; è¾“å‡ºï¼š 12373.14z è¦ç‚¹ï¼š æ¨¡æ¿å‚æ•°åˆ—è¡¨ä»¥ template &lt;typename T&gt; æˆ– template &lt;class T&gt; å¼€å¤´ï¼Œä¸¤è€…ç­‰ä»·ã€‚ ç±»å‹æ¨å¯¼ï¼šç¼–è¯‘å™¨æ ¹æ®å‡½æ•°å‚æ•°è‡ªåŠ¨æ¨å¯¼æ¨¡æ¿å‚æ•°ç±»å‹ã€‚ ç±»æ¨¡æ¿ç±»æ¨¡æ¿å…è®¸å®šä¹‰é€šç”¨çš„ç±»ï¼Œé€šè¿‡ç±»å‹å‚æ•°åŒ–ï¼Œå®ç°ä¸åŒç±»å‹çš„å¯¹è±¡ã€‚ è¯­æ³•ï¼š123456template &lt;typename T&gt;class ClassName &#123;public: T memberVariable; // æ„é€ å‡½æ•°ã€æˆå‘˜å‡½æ•°ç­‰&#125;; ç¤ºä¾‹ï¼šç®€å•çš„ Pair ç±»12345678910111213141516171819202122232425262728#include &lt;iostream&gt;#include &lt;string&gt;template &lt;typename T, typename U&gt;class Pair &#123;public: T first; U second; Pair(T a, U b) : first(a), second(b) &#123;&#125; void print() const &#123; std::cout &lt;&lt; &quot;Pair: &quot; &lt;&lt; first &lt;&lt; &quot;, &quot; &lt;&lt; second &lt;&lt; std::endl; &#125;&#125;;int main() &#123; Pair&lt;int, double&gt; p1(1, 2.5); p1.print(); // è¾“å‡ºï¼šPair: 1, 2.5 Pair&lt;std::string, std::string&gt; p2(&quot;Hello&quot;, &quot;World&quot;); p2.print(); // è¾“å‡ºï¼šPair: Hello, World Pair&lt;std::string, int&gt; p3(&quot;Age&quot;, 30); p3.print(); // è¾“å‡ºï¼šPair: Age, 30 return 0;&#125; è¾“å‡ºï¼š123Pair: 1, 2.5Pair: Hello, WorldPair: Age, 30 è¦ç‚¹ï¼š ç±»æ¨¡æ¿å¯ä»¥æœ‰å¤šä¸ªç±»å‹å‚æ•°ã€‚ æ¨¡æ¿å‚æ•°å¯ä»¥è¢«ç”¨äºæˆå‘˜å˜é‡å’Œæˆå‘˜å‡½æ•°ä¸­ã€‚ ç±»æ¨¡æ¿å®ä¾‹åŒ–æ—¶æŒ‡å®šå…·ä½“ç±»å‹ï¼Œå¦‚ Pair&lt;int, double&gt;ã€‚ æ¨¡æ¿å‚æ•°æ¨¡æ¿å‚æ•°å†³å®šäº†æ¨¡æ¿çš„æ³›ç”¨æ€§ä¸çµæ´»æ€§ã€‚C++ æ¨¡æ¿å‚æ•°ç§ç±»ä¸»è¦åŒ…æ‹¬ç±»å‹å‚æ•°ã€éç±»å‹å‚æ•°å’Œæ¨¡æ¿æ¨¡æ¿å‚æ•°ã€‚ ç±»å‹å‚æ•°ï¼ˆType Parametersï¼‰ç±»å‹å‚æ•°ç”¨äºè¡¨ç¤ºä»»æ„ç±»å‹ï¼Œåœ¨æ¨¡æ¿å®ä¾‹åŒ–æ—¶è¢«å…·ä½“çš„ç±»å‹æ›¿ä»£ã€‚ éç±»å‹å‚æ•°ï¼ˆNon-Type Parametersï¼‰éç±»å‹å‚æ•°å…è®¸æ¨¡æ¿æ¥å—éç±»å‹çš„å€¼ï¼Œå¦‚æ•´æ•°ã€æŒ‡é’ˆæˆ–å¼•ç”¨ã€‚C++17 æ”¯æŒæ›´å¤šéç±»å‹å‚æ•°ç±»å‹ï¼Œå¦‚ autoã€‚ è¯­æ³•ï¼š1234template &lt;typename T, int Size&gt;class Array &#123; // ...&#125;; ç¤ºä¾‹ï¼šå›ºå®šå¤§å°çš„æ•°ç»„ç±»123456789101112131415161718192021222324252627#include &lt;iostream&gt;template &lt;typename T, int N&gt;class Array &#123;private: T data[N];public: T&amp; operator[](int index) &#123; return data[index]; &#125; const T&amp; operator[](int index) const &#123; return data[index]; &#125; void fill(const T&amp; value) &#123; for (int i = 0; i &lt; N; ++i) &#123; data[i] = value; &#125; &#125;&#125;;int main() &#123; Array&lt;int, 5&gt; arr; for (int i = 0; i &lt; 5; ++i) &#123; arr[i] = i * 10; &#125; for (int i = 0; i &lt; 5; ++i) &#123; std::cout &lt;&lt; arr[i] &lt;&lt; &quot; &quot;; &#125; return 0;&#125; è¾“å‡ºï¼š 10 10 20 30 40 æ³¨æ„äº‹é¡¹ï¼š éç±»å‹å‚æ•°å¿…é¡»æ˜¯ç¼–è¯‘æœŸå¸¸é‡ã€‚ å…è®¸çš„ç±»å‹åŒ…æ‹¬æ•´å‹ã€æšä¸¾ã€æŒ‡é’ˆã€å¼•ç”¨ç­‰ï¼Œä½†ä¸åŒ…æ‹¬æµ®ç‚¹æ•°å’Œç±»ç±»å‹ã€‚ æ¨¡æ¿æ¨¡æ¿å‚æ•°ï¼ˆTemplate Template Parametersï¼‰æ¨¡æ¿æ¨¡æ¿å‚æ•°å…è®¸æ¨¡æ¿æ¥å—å¦ä¸€ä¸ªæ¨¡æ¿ä½œä¸ºå‚æ•°ã€‚è¿™å¯¹äºæŠ½è±¡å®¹å™¨å’Œç­–ç•¥æ¨¡å¼ç­‰åœºæ™¯éå¸¸æœ‰ç”¨ã€‚ è¯­æ³•ï¼š1234template &lt;template &lt;typename&gt; class Container&gt;class Adapter &#123; // ...&#125;; ç¤ºä¾‹ï¼šå®¹å™¨é€‚é…å™¨123456789101112131415161718192021222324#include &lt;iostream&gt;#include &lt;vector&gt;#include &lt;deque&gt;template &lt;template &lt;typename&gt; class Container&gt;class Stack &#123;private: Container&lt;int&gt; elements;public: void push(int value) &#123; elements.push_back(value); &#125; void pop() &#123; elements.pop_back(); &#125; int top() const &#123; return elements.back(); &#125;&#125;;int main() &#123; Stack&lt;std::vector&gt; stack1; Stack&lt;std::deque&gt; stack2; stack1.push(1); stack1.push(2); stack2.push(3); stack2.push(4); std::cout &lt;&lt; stack1.top() &lt;&lt; &quot; &quot; &lt;&lt; stack2.top() &lt;&lt; std::endl; return 0;&#125; è¾“å‡ºï¼š 12 4 è¦ç‚¹ï¼š æ¨¡æ¿æ¨¡æ¿å‚æ•°éœ€è¦å®Œå…¨åŒ¹é…è¢«æ¥å—æ¨¡æ¿çš„å‚æ•°åˆ—è¡¨ã€‚ å¯é€šè¿‡é»˜è®¤æ¨¡æ¿å‚æ•°å¢å¼ºçµæ´»æ€§ã€‚ æ¨¡æ¿ç‰¹åŒ–ï¼ˆTemplate Specializationï¼‰æ¨¡æ¿ç‰¹åŒ–å…è®¸å¼€å‘è€…ä¸ºç‰¹å®šç±»å‹æˆ–ç±»å‹ç»„åˆæä¾›ä¸“é—¨çš„å®ç°ã€‚å½“é€šç”¨æ¨¡æ¿æ— æ³•æ»¡è¶³ç‰¹å®šéœ€æ±‚æ—¶ï¼Œç‰¹åŒ–æ¨¡æ¿å¯ä»¥è°ƒæ•´è¡Œä¸ºä»¥å¤„ç†ç‰¹å®šçš„æƒ…å†µã€‚C++ æ”¯æŒå…¨ç‰¹åŒ–ï¼ˆFull Specializationï¼‰å’Œåç‰¹åŒ–ï¼ˆPartial Specializationï¼‰ï¼Œä½†éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå‡½æ•°æ¨¡æ¿ä¸æ”¯æŒåç‰¹åŒ–ï¼Œåªèƒ½è¿›è¡Œå…¨ç‰¹åŒ–ã€‚ å…¨ç‰¹åŒ–ï¼ˆFull Specializationï¼‰å…¨ç‰¹åŒ–æ˜¯é’ˆå¯¹æ¨¡æ¿å‚æ•°çš„å®Œå…¨ç‰¹å®šç±»å‹ç»„åˆã€‚å®ƒæä¾›äº†æ¨¡æ¿çš„ä¸€ä¸ªç‰¹å®šç‰ˆæœ¬ï¼Œå½“æ¨¡æ¿å‚æ•°å®Œå…¨åŒ¹é…ç‰¹åŒ–ç±»å‹æ—¶ï¼Œç¼–è¯‘å™¨å°†ä¼˜å…ˆä½¿ç”¨è¯¥ç‰¹åŒ–ç‰ˆæœ¬ã€‚ è¯­æ³•1234template &lt;&gt;class ClassName&lt;SpecificType&gt; &#123; // ç‰¹åŒ–å®ç°&#125;; ç¤ºä¾‹ï¼šç±»æ¨¡æ¿å…¨ç‰¹åŒ–1234567891011121314151617181920212223242526272829#include &lt;iostream&gt;#include &lt;string&gt;template &lt;typename T&gt;class Printer &#123;public: void print(const T&amp; value) &#123; std::cout &lt;&lt; &quot;General Printer: &quot; &lt;&lt; value &lt;&lt; std::endl; &#125;&#125;;// å…¨ç‰¹åŒ–ç‰ˆæœ¬template &lt;&gt;class Printer&lt;std::string&gt; &#123;public: void print(const std::string&amp; value) &#123; std::cout &lt;&lt; &quot;String Printer: \\&quot;&quot; &lt;&lt; value &lt;&lt; &quot;\\&quot;&quot; &lt;&lt; std::endl; &#125;&#125;;int main() &#123; Printer&lt;int&gt; intPrinter; Printer&lt;std::string&gt; stringPrinter; intPrinter.print(42); stringPrinter.print(&quot;Hello World&quot;); return 0;&#125; è¾“å‡ºï¼š 12General Printer: 42String Printer: &quot;Hello World&quot; è§£æ é€šç”¨æ¨¡æ¿é€‚ç”¨äºæ‰€æœ‰ç±»å‹ï¼Œåœ¨printå‡½æ•°ä¸­ä»¥é€šç”¨æ–¹å¼è¾“å‡ºå€¼ã€‚ å…¨ç‰¹åŒ–æ¨¡æ¿é’ˆå¯¹std::stringç±»å‹è¿›è¡Œäº†ä¸“é—¨åŒ–ï¼Œå®ç°äº†ä¸åŒçš„printå‡½æ•°ã€‚ å½“å®ä¾‹åŒ–Printer&lt;std::string&gt;æ—¶ï¼Œç¼–è¯‘å™¨é€‰æ‹©å…¨ç‰¹åŒ–ç‰ˆæœ¬è€Œéé€šç”¨æ¨¡æ¿ã€‚ åç‰¹åŒ–ï¼ˆPartial Specializationï¼‰åç‰¹åŒ–å…è®¸æ¨¡æ¿å¯¹éƒ¨åˆ†å‚æ•°è¿›è¡Œç‰¹å®šç±»å‹çš„å¤„ç†ï¼ŒåŒæ—¶ä¿æŒå…¶ä»–å‚æ•°çš„é€šç”¨æ€§ã€‚å¯¹äºç±»æ¨¡æ¿è€Œè¨€ï¼Œå¯ä»¥é’ˆå¯¹æ¨¡æ¿å‚æ•°çš„æŸäº›ç‰¹æ€§è¿›è¡Œåç‰¹åŒ–ï¼›å¯¹äºå‡½æ•°æ¨¡æ¿ï¼Œåˆ™ä»…æ”¯æŒå…¨ç‰¹åŒ–ï¼Œä¸æ”¯æŒåç‰¹åŒ–ã€‚ è¯­æ³•1234template &lt;typename T, typename U&gt;class ClassName&lt;T, U*&gt; &#123; // åç‰¹åŒ–ï¼šå½“Uæ˜¯æŒ‡é’ˆç±»å‹æ—¶ // ç‰¹åŒ–å®ç°&#125;; ç¤ºä¾‹ï¼šç±»æ¨¡æ¿åç‰¹åŒ–123456789101112131415161718192021222324252627282930313233343536373839404142#include &lt;iostream&gt;template &lt;typename T, typename U&gt;class Pair &#123;public: T first; U second; void print() const &#123; std::cout &lt;&lt; &quot;General Pair: &quot; &lt;&lt; first &lt;&lt; &quot;, &quot; &lt;&lt; second &lt;&lt; std::endl; &#125;&#125;;// åç‰¹åŒ–ç‰ˆæœ¬ï¼šå½“ç¬¬äºŒä¸ªç±»å‹æ˜¯æŒ‡é’ˆæ—¶template &lt;typename T, typename U&gt;class Pair&lt;T, U*&gt; &#123;public: T first; U* second; void print() const &#123; std::cout &lt;&lt; &quot;Pointer Pair: &quot; &lt;&lt; first &lt;&lt; &quot;, &quot;; if (second) &#123; std::cout &lt;&lt; *second; &#125; else &#123; std::cout &lt;&lt; &quot;nullptr&quot;; &#125; std::cout &lt;&lt; std::endl; &#125;&#125;;int main() &#123; int value = 100; Pair&lt;int, double&gt; p1(10, 3.14); Pair&lt;int, int*&gt; p2(20, &amp;value); p1.print(); p2.print(); return 0;&#125; è¾“å‡ºï¼š 12General Pair: 10, 3.14Pointer Pair: 20, 100 è§£æ é€šç”¨æ¨¡æ¿å¤„ç†éæŒ‡é’ˆç±»å‹å¯¹ã€‚ åç‰¹åŒ–æ¨¡æ¿å¤„ç†ç¬¬äºŒä¸ªç±»å‹ä¸ºæŒ‡é’ˆçš„æƒ…å†µï¼Œæ‰“å°æŒ‡é’ˆæŒ‡å‘çš„å€¼ã€‚ ä½¿ç”¨åç‰¹åŒ–æå‡äº†æ¨¡æ¿çš„çµæ´»æ€§ï¼Œä½¿å…¶èƒ½å¤Ÿæ ¹æ®éƒ¨åˆ†å‚æ•°ç±»å‹è¿›è¡Œä¸åŒå¤„ç†ã€‚ å‡½æ•°æ¨¡æ¿çš„ç‰¹åŒ–ä¸ç±»æ¨¡æ¿ä¸åŒï¼Œå‡½æ•°æ¨¡æ¿ä¸æ”¯æŒåç‰¹åŒ–ï¼Œåªèƒ½è¿›è¡Œå…¨ç‰¹åŒ–ã€‚å½“å¯¹å‡½æ•°æ¨¡æ¿è¿›è¡Œå…¨ç‰¹åŒ–æ—¶ï¼Œéœ€è¦æ˜¾å¼æŒ‡å®šç±»å‹ã€‚ ç¤ºä¾‹ï¼šå‡½æ•°æ¨¡æ¿å…¨ç‰¹åŒ–123456789101112131415161718192021#include &lt;iostream&gt;#include &lt;string&gt;template &lt;typename T&gt;void printValue(const T&amp; value) &#123; std::cout &lt;&lt; &quot;General value: &quot; &lt;&lt; value &lt;&lt; std::endl;&#125;// å…¨ç‰¹åŒ–ç‰ˆæœ¬template &lt;&gt;void printValue&lt;std::string&gt;(const std::string&amp; value) &#123; std::cout &lt;&lt; &quot;String value: \\&quot;&quot; &lt;&lt; value &lt;&lt; &quot;\\&quot;&quot; &lt;&lt; std::endl;&#125;int main() &#123; printValue(42); printValue(3.14); printValue(std::string(&quot;Hello&quot;)); return 0;&#125; è¾“å‡ºï¼š 123General value: 42General value: 3.14String value: &quot;Hello&quot; è§£æ é€šç”¨å‡½æ•°æ¨¡æ¿é€‚ç”¨äºæ‰€æœ‰ç±»å‹ï¼Œæä¾›é€šç”¨çš„printValueå®ç°ã€‚ å…¨ç‰¹åŒ–å‡½æ•°æ¨¡æ¿ä¸“é—¨å¤„ç†std::stringç±»å‹ï¼Œæä¾›ä¸åŒçš„è¾“å‡ºæ ¼å¼ã€‚ è°ƒç”¨printValueæ—¶ï¼Œç¼–è¯‘å™¨æ ¹æ®å®å‚ç±»å‹é€‰æ‹©é€‚å½“çš„æ¨¡æ¿ç‰ˆæœ¬ã€‚ æ³¨æ„äº‹é¡¹ ä¼˜å…ˆçº§ï¼šå…¨ç‰¹åŒ–ç‰ˆæœ¬çš„ä¼˜å…ˆçº§é«˜äºé€šç”¨æ¨¡æ¿ï¼Œå› æ­¤å½“ç‰¹åŒ–æ¡ä»¶æ»¡è¶³æ—¶ï¼Œæ€»æ˜¯é€‰æ‹©ç‰¹åŒ–ç‰ˆæœ¬ã€‚ æ˜¾å¼æŒ‡å®šç±»å‹ï¼šå‡½æ•°æ¨¡æ¿ç‰¹åŒ–éœ€è¦åœ¨è°ƒç”¨æ—¶æ˜¾å¼æŒ‡å®šç±»å‹ï¼Œæˆ–è€…ç¡®ä¿ç±»å‹æ¨å¯¼å¯ä»¥æ­£ç¡®åŒ¹é…ç‰¹åŒ–ç‰ˆæœ¬ã€‚ ä¸æ”¯æŒåç‰¹åŒ–ï¼šæ— æ³•é€šè¿‡åç‰¹åŒ–å¯¹å‡½æ•°æ¨¡æ¿è¿›è¡Œéƒ¨åˆ†ç‰¹åŒ–ï¼Œéœ€è¦é€šè¿‡å…¶ä»–æ–¹æ³•ï¼ˆå¦‚é‡è½½ï¼‰å®ç°ç±»ä¼¼åŠŸèƒ½ã€‚ æ€»ç»“ å…¨ç‰¹åŒ–é€‚ç”¨äºä¸ºå…·ä½“ç±»å‹æˆ–ç±»å‹ç»„åˆæä¾›ä¸“é—¨å®ç°ï¼Œé€‚ç”¨äºç±»æ¨¡æ¿å’Œå‡½æ•°æ¨¡æ¿ã€‚ åç‰¹åŒ–ä»…é€‚ç”¨äºç±»æ¨¡æ¿ï¼Œå…è®¸é’ˆå¯¹éƒ¨åˆ†å‚æ•°è¿›è¡Œç‰¹å®šå¤„ç†ï¼ŒåŒæ—¶ä¿æŒå…¶ä»–å‚æ•°çš„é€šç”¨æ€§ã€‚ å‡½æ•°æ¨¡æ¿ä»…æ”¯æŒå…¨ç‰¹åŒ–ï¼Œä¸æ”¯æŒåç‰¹åŒ–ï¼›ç±»æ¨¡æ¿æ”¯æŒå…¨ç‰¹åŒ–å’Œåç‰¹åŒ–ã€‚ ç‰¹åŒ–æ¨¡æ¿æå‡äº†æ¨¡æ¿çš„çµæ´»æ€§å’Œé€‚åº”æ€§ï¼Œä½¿å…¶èƒ½å¤Ÿæ ¹æ®ä¸åŒç±»å‹éœ€æ±‚è°ƒæ•´è¡Œä¸ºã€‚ å˜å‚æ¨¡æ¿ï¼ˆVariadic Templatesï¼‰å˜å‚æ¨¡æ¿å…è®¸æ¨¡æ¿æ¥å—å¯å˜æ•°é‡çš„å‚æ•°ï¼Œæä¾›æé«˜çš„çµæ´»æ€§ï¼Œæ˜¯å®ç°è¯¸å¦‚ std::tupleã€std::variant ç­‰æ¨¡æ¿åº“ç»„ä»¶çš„åŸºç¡€ã€‚ å®šä¹‰ä¸è¯­æ³•å˜å‚æ¨¡æ¿ä½¿ç”¨ å‚æ•°åŒ…ï¼ˆParameter Packï¼‰ï¼Œé€šè¿‡ ... è¯­æ³•æ¥è¡¨ç¤ºã€‚ è¯­æ³•ï¼š1234template &lt;typename... Args&gt;void functionName(Args... args) &#123; // å‡½æ•°ä½“&#125; é€’å½’ä¸å±•å¼€ï¼ˆRecursion and Expansionï¼‰å˜å‚æ¨¡æ¿é€šå¸¸ä¸é€’å½’ç›¸ç»“åˆï¼Œé€šè¿‡é€’å½’åœ°å¤„ç†å‚æ•°åŒ…ï¼Œæˆ–è€…ä½¿ç”¨ æŠ˜å è¡¨è¾¾å¼ï¼ˆFold Expressionsï¼‰ æ¥å±•å¼€å‘å‚æ•°åŒ…ã€‚ é€’å½’ç¤ºä¾‹ï¼šæ‰“å°æ‰€æœ‰å‚æ•°123456789101112131415161718#include &lt;iostream&gt;// ç»ˆæ­¢å‡½æ•°void print() &#123; std::cout &lt;&lt; std::endl;&#125;// é€’å½’å‡½æ•°æ¨¡æ¿template &lt;typename T, typename... Args&gt;void print(T first, Args... args) &#123; std::cout &lt;&lt; first &lt;&lt; &quot; &quot;; print(args...);&#125;int main() &#123; print(1, 2.5, &quot;Hello&quot;, &#x27;A&#x27;); return 0;&#125; è¾“å‡ºï¼š 11 2.5 Hello A æŠ˜å è¡¨è¾¾å¼ç‰ˆæœ¬1234567891011#include &lt;iostream&gt;template &lt;typename... Args&gt;void print(Args... args) &#123; (std::cout &lt;&lt; ... &lt;&lt; args) &lt;&lt; std::endl; // C++17 æŠ˜å è¡¨è¾¾å¼&#125;int main() &#123; print(1, 2.5, &quot;Hello&quot;, &#x27;A&#x27;); return 0;&#125; æŠ˜å è¡¨è¾¾å¼ç¤ºä¾‹ï¼šè®¡ç®—æ€»å’ŒC++17 å¼•å…¥äº†æŠ˜å è¡¨è¾¾å¼ï¼Œç®€åŒ–äº†å‚æ•°åŒ…çš„å¤„ç†ã€‚ 1234567891011#include &lt;iostream&gt;template &lt;typename... Args&gt;auto sum(Args... args) &#123; return (args + ...); // äºŒå…ƒå³æŠ˜å &#125;int main() &#123; std::cout &lt;&lt; sum(1, 2, 3, 4, 5) &lt;&lt; std::endl; return 0;&#125; è¾“å‡ºï¼š 115 åº”ç”¨ç¤ºä¾‹ç¤ºä¾‹ï¼šæ—¥å¿—è®°å½•å™¨1234567891011121314#include &lt;iostream&gt;#include &lt;string&gt;template &lt;typename... Args&gt;void log(const Args&amp;... args) &#123; std::cout &lt;&lt; &quot;[LOG] &quot;; (std::cout &lt;&lt; ... &lt;&lt; args) &lt;&lt; std::endl;&#125;int main() &#123; log(&quot;User&quot;, &quot; logged in at &quot;, 14, &quot;:30&quot;); log(&quot;Error code: &quot;, 404, &quot;, Message: &quot;, &quot;Not Found&quot;); return 0;&#125; è¾“å‡ºï¼š 12[LOG] User logged in at 14:30[LOG] Error code: 404, Message: Not Found è¦ç‚¹ï¼š å˜å‚æ¨¡æ¿æå¤§åœ°æå‡äº†æ¨¡æ¿çš„çµæ´»æ€§ã€‚ ä½¿ç”¨é€’å½’æˆ–æŠ˜å è¡¨è¾¾å¼å¤„ç†å‚æ•°åŒ…ã€‚ å¸¸ç”¨äºå®ç°é€šç”¨å‡½æ•°ã€å®¹å™¨ç±»å’Œå…ƒç¼–ç¨‹å·¥å…·ã€‚ æ¨¡æ¿æŠ˜å ï¼ˆFold Expressionsï¼‰1. æŠ˜å è¡¨è¾¾å¼çš„æ¦‚å¿µä¸èƒŒæ™¯åœ¨C++ä¸­ï¼Œå¯å˜å‚æ•°æ¨¡æ¿å…è®¸å‡½æ•°æˆ–ç±»æ¨¡æ¿æ¥å—ä»»æ„æ•°é‡çš„æ¨¡æ¿å‚æ•°ã€‚è¿™åœ¨ç¼–å†™çµæ´»ä¸”é€šç”¨çš„ä»£ç æ—¶éå¸¸æœ‰ç”¨ã€‚ç„¶è€Œï¼Œå¤„ç†å‚æ•°åŒ…ä¸­çš„æ¯ä¸ªå‚æ•°å¾€å¾€éœ€è¦é€’å½’æ¨¡æ¿æŠ€å·§ï¼Œè¿™æ ·çš„ä»£ç é€šå¸¸å¤æ‚ä¸”éš¾ä»¥ç»´æŠ¤ã€‚ æŠ˜å è¡¨è¾¾å¼çš„å¼•å…¥æ˜¾è‘—ç®€åŒ–äº†è¿™ä¸€è¿‡ç¨‹ã€‚å®ƒä»¬å…è®¸å¼€å‘è€…ç›´æ¥å¯¹å‚æ•°åŒ…åº”ç”¨æ“ä½œç¬¦ï¼Œè€Œæ— éœ€æ‰‹åŠ¨å±•å¼€æˆ–é€’å½’å¤„ç†å‚æ•°ã€‚è¿™ä¸ä»…ä½¿ä»£ç æ›´åŠ ç®€æ´ï¼Œè¿˜æé«˜äº†å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚ æŠ˜å è¡¨è¾¾å¼å¯åˆ†ä¸ºï¼š ä¸€å…ƒæŠ˜å è¡¨è¾¾å¼ï¼ˆUnary Foldï¼‰ï¼šå¯¹å‚æ•°åŒ…ä¸­çš„æ¯ä¸ªå‚æ•°åº”ç”¨ä¸€ä¸ªä¸€å…ƒæ“ä½œç¬¦ã€‚ äºŒå…ƒæŠ˜å è¡¨è¾¾å¼ï¼ˆBinary Foldï¼‰ï¼šå¯¹å‚æ•°åŒ…ä¸­çš„æ¯ä¸ªå‚æ•°åº”ç”¨ä¸€ä¸ªäºŒå…ƒæ“ä½œç¬¦ã€‚ æ­¤å¤–ï¼ŒäºŒå…ƒæŠ˜å è¡¨è¾¾å¼å¯è¿›ä¸€æ­¥ç»†åˆ†ä¸ºå·¦æŠ˜å ï¼ˆLeft Foldï¼‰å’Œå³æŠ˜å ï¼ˆRight Foldï¼‰ï¼Œå–å†³äºæ“ä½œç¬¦çš„ç»“åˆæ–¹å‘ã€‚ 2. ä¸€å…ƒæŠ˜å è¡¨è¾¾å¼ï¼ˆUnary Foldï¼‰ä¸€å…ƒæŠ˜å è¡¨è¾¾å¼ç”¨äºåœ¨å‚æ•°åŒ…çš„æ¯ä¸ªå‚æ•°å‰æˆ–ååº”ç”¨ä¸€å…ƒæ“ä½œç¬¦ã€‚è¯­æ³•å½¢å¼å¦‚ä¸‹ï¼š å‰ç½®ä¸€å…ƒæŠ˜å ï¼ˆUnary Prefix Foldï¼‰1(op ... pack) åç½®ä¸€å…ƒæŠ˜å ï¼ˆUnary Postfix Foldï¼‰1(pack ... op) å…¶ä¸­ï¼Œop æ˜¯ä¸€å…ƒæ“ä½œç¬¦ï¼Œå¦‚!ï¼ˆé€»è¾‘éï¼‰ã€~ï¼ˆæŒ‰ä½å–åï¼‰ç­‰ã€‚ ç¤ºä¾‹1ï¼šé€»è¾‘éæ“ä½œ12345678910111213#include &lt;iostream&gt;template &lt;typename... Args&gt;bool allFalse(Args... args) &#123; return (!args &amp;&amp; ...); // ä¸€å…ƒå·¦æŠ˜å &#125;int main() &#123; std::cout &lt;&lt; std::boolalpha; std::cout &lt;&lt; allFalse(false, false, false) &lt;&lt; std::endl; // true std::cout &lt;&lt; allFalse(false, true, false) &lt;&lt; std::endl; // false return 0;&#125; 3. äºŒå…ƒæŠ˜å è¡¨è¾¾å¼ï¼ˆBinary Foldï¼‰äºŒå…ƒæŠ˜å è¡¨è¾¾å¼ç”¨äºåœ¨å‚æ•°åŒ…çš„æ¯ä¸ªå‚æ•°ä¹‹é—´åº”ç”¨ä¸€ä¸ªäºŒå…ƒæ“ä½œç¬¦ã€‚å®ƒä»¬å¯ä»¥åˆ†ä¸ºäºŒå…ƒå·¦æŠ˜å ï¼ˆBinary Left Foldï¼‰å’ŒäºŒå…ƒå³æŠ˜å ï¼ˆBinary Right Foldï¼‰ï¼Œå–å†³äºæ“ä½œç¬¦çš„ç»“åˆæ–¹å‘ã€‚ äºŒå…ƒæŠ˜å è¡¨è¾¾å¼è¯­æ³•äºŒå…ƒå·¦æŠ˜å ï¼ˆLeft Foldï¼‰ï¼š (init op ... op pack) æˆ–è€…ç®€åŒ–ä¸ºï¼š(pack1 op ... op packN) äºŒå…ƒå³æŠ˜å ï¼ˆRight Foldï¼‰ï¼š (pack1 op ... op init op ...) æˆ–è€…ç®€åŒ–ä¸ºï¼š(pack1 op ... op packN) å…¶ä¸­ï¼Œop æ˜¯äºŒå…ƒæ“ä½œç¬¦ï¼Œå¦‚+ã€*ã€&amp;&amp;ã€||ã€&lt;&lt; ç­‰ã€‚ å·¦æŠ˜å ä¸å³æŠ˜å çš„åŒºåˆ« äºŒå…ƒå·¦æŠ˜å ï¼ˆBinary Left Foldï¼‰ï¼šæ“ä½œç¬¦ä»å·¦è‡³å³ç»“åˆï¼Œç­‰ä»·äº (((a op b) op c) op d)ã€‚ äºŒå…ƒå³æŠ˜å ï¼ˆBinary Right Foldï¼‰ï¼šæ“ä½œç¬¦ä»å³è‡³å·¦ç»“åˆï¼Œç­‰ä»·äº (a op (b op (c op d)))ã€‚ ç¤ºä¾‹1ï¼šæ±‚å’Œï¼ˆBinary Left Foldï¼‰1234567891011#include &lt;iostream&gt;template &lt;typename... Args&gt;auto sum(Args... args) &#123; return (args + ...); // äºŒå…ƒå·¦æŠ˜å &#125;int main() &#123; std::cout &lt;&lt; sum(1, 2, 3, 4) &lt;&lt; std::endl; // è¾“å‡ºï¼š10 return 0;&#125; è§£é‡Šï¼š (args + ...) æ˜¯ä¸€ä¸ªäºŒå…ƒå·¦æŠ˜å è¡¨è¾¾å¼ã€‚ å®ƒå°†+æ“ä½œç¬¦é€ä¸ªåº”ç”¨äºå‚æ•°ï¼ŒæŒ‰ç…§å·¦æŠ˜å é¡ºåºã€‚ å³ï¼Œ((1 + 2) + 3) + 4 = 10ã€‚ ç¤ºä¾‹2ï¼šä¹˜ç§¯ï¼ˆBinary Right Foldï¼‰1234567891011#include &lt;iostream&gt;template &lt;typename... Args&gt;auto product(Args... args) &#123; return (... * args); // äºŒå…ƒå³æŠ˜å &#125;int main() &#123; std::cout &lt;&lt; product(2, 3, 4) &lt;&lt; std::endl; // è¾“å‡ºï¼š24 return 0;&#125; è§£é‡Šï¼š (... * args) æ˜¯ä¸€ä¸ªäºŒå…ƒå³æŠ˜å è¡¨è¾¾å¼ã€‚ å®ƒå°†*æ“ä½œç¬¦é€ä¸ªåº”ç”¨äºå‚æ•°ï¼ŒæŒ‰ç…§å³æŠ˜å é¡ºåºã€‚ å³ï¼Œ2 * (3 * 4) = 2 * 12 = 24ã€‚ ç¤ºä¾‹3ï¼šé€»è¾‘ä¸ï¼ˆBinary Left Foldï¼‰12345678910111213#include &lt;iostream&gt;template &lt;typename... Args&gt;bool allTrue(Args... args) &#123; return (args &amp;&amp; ...); // äºŒå…ƒå·¦æŠ˜å &#125;int main() &#123; std::cout &lt;&lt; std::boolalpha; std::cout &lt;&lt; allTrue(true, true, true) &lt;&lt; std::endl; // true std::cout &lt;&lt; allTrue(true, false, true) &lt;&lt; std::endl; // false return 0;&#125; è§£é‡Šï¼š (args &amp;&amp; ...) æ˜¯ä¸€ä¸ªäºŒå…ƒå·¦æŠ˜å è¡¨è¾¾å¼ã€‚ ç”¨äºæ£€æŸ¥æ‰€æœ‰å‚æ•°æ˜¯å¦ä¸ºtrueã€‚ ç±»ä¼¼äºé“¾å¼çš„é€»è¾‘ä¸è¿ç®—ã€‚ 4. å·¦æŠ˜å ä¸å³æŠ˜å ï¼ˆLeft and Right Foldsï¼‰äº†è§£å·¦æŠ˜å å’Œå³æŠ˜å çš„åŒºåˆ«ï¼Œå¯¹äºæ­£ç¡®é€‰æ‹©æŠ˜å è¡¨è¾¾å¼çš„å½¢å¼è‡³å…³é‡è¦ã€‚ äºŒå…ƒå·¦æŠ˜å ï¼ˆBinary Left Foldï¼‰è¯­æ³•ï¼š (args op ...) å±•å¼€æ–¹å¼ï¼š ((arg1 op arg2) op arg3) op ... op argN é€‚ç”¨åœºæ™¯ï¼š å½“æ“ä½œç¬¦æ˜¯ç»“åˆæ€§çš„ä¸”ä»å·¦ä¾§å¼€å§‹ç´¯ç§¯æ“ä½œæ—¶ï¼ˆå¦‚+ã€*ï¼‰ã€‚ éœ€è¦ä¸¥æ ¼çš„é¡ºåºæ‰§è¡Œæ—¶ï¼Œç¡®ä¿ä»å·¦åˆ°å³ä¾æ¬¡å¤„ç†å‚æ•°ã€‚ ç¤ºä¾‹ï¼š (args + ...) &#x2F;&#x2F; å·¦æŠ˜å æ±‚å’Œ äºŒå…ƒå³æŠ˜å ï¼ˆBinary Right Foldï¼‰è¯­æ³•ï¼š (... op args) å±•å¼€æ–¹å¼ï¼š arg1 op (arg2 op (arg3 op ... op argN)) é€‚ç”¨åœºæ™¯ï¼š å½“æ“ä½œç¬¦æ˜¯å³ç»“åˆçš„ï¼Œæˆ–å½“éœ€è¦ä»å³ä¾§å¼€å§‹ç´¯ç§¯æ“ä½œæ—¶ã€‚ æŸäº›ç‰¹å®šçš„é€»è¾‘å’Œæ•°æ®ç»“æ„å¯èƒ½éœ€è¦å³ä¾§å…ˆå¤„ç†ã€‚ ç¤ºä¾‹ï¼š (... + args) &#x2F;&#x2F; å³æŠ˜å æ±‚å’Œ 5. op åœ¨æŠ˜å è¡¨è¾¾å¼ä¸­çš„ä½œç”¨åœ¨æŠ˜å è¡¨è¾¾å¼ä¸­ï¼Œop ä»£è¡¨äºŒå…ƒæ“ä½œç¬¦ï¼Œç”¨äºå®šä¹‰å¦‚ä½•å°†å‚æ•°åŒ…ä¸­çš„å„ä¸ªå‚æ•°ç›¸äº’ç»“åˆã€‚op å¯ä»¥æ˜¯ä»»ä½•åˆæ³•çš„äºŒå…ƒæ“ä½œç¬¦ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºï¼š ç®—æœ¯æ“ä½œç¬¦ï¼š+ã€-ã€*ã€/ã€% ç­‰ã€‚ é€»è¾‘æ“ä½œç¬¦ï¼š&amp;&amp;ã€|| ç­‰ã€‚ æŒ‰ä½æ“ä½œç¬¦ï¼š&amp;ã€|ã€^ã€&lt;&lt;ã€&gt;&gt; ç­‰ã€‚ æ¯”è¾ƒæ“ä½œç¬¦ï¼š==ã€!=ã€&lt;ã€&gt;ã€&lt;=ã€&gt;= ç­‰ã€‚ è‡ªå®šä¹‰æ“ä½œç¬¦ï¼šå¦‚æœå®šä¹‰äº†è‡ªå®šä¹‰ç±»å‹å¹¶é‡è½½äº†ç‰¹å®šçš„æ“ä½œç¬¦ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨è¿™äº›æ“ä½œç¬¦ã€‚ op çš„é€‰æ‹©ç›´æ¥å½±å“æŠ˜å è¡¨è¾¾å¼çš„è¡Œä¸ºå’Œç»“æœã€‚é€‰æ‹©é€‚å½“çš„æ“ä½œç¬¦æ˜¯å®ç°ç‰¹å®šåŠŸèƒ½çš„å…³é”®ã€‚ ç¤ºä¾‹1ï¼šä½¿ç”¨åŠ æ³•æ“ä½œç¬¦1234template &lt;typename... Args&gt;auto sum(Args... args) &#123; return (args + ...);&#125; ç¤ºä¾‹2ï¼šä½¿ç”¨é€»è¾‘ä¸æ“ä½œç¬¦1234template &lt;typename... Args&gt;bool all(Args... args) &#123; return (args &amp;&amp; ...);&#125; ç¤ºä¾‹3ï¼šä½¿ç”¨å·¦ç§»æ“ä½œç¬¦ï¼ˆæµæ’å…¥ï¼‰1234template &lt;typename... Args&gt;void print(Args... args) &#123; (std::cout &lt;&lt; ... &lt;&lt; args) &lt;&lt; std::endl;&#125; è§£é‡Šï¼š åœ¨ä¸Šè¿°ç¤ºä¾‹ä¸­ï¼Œop åˆ†åˆ«ä¸º +ã€&amp;&amp;ã€&lt;&lt;ã€‚ æ¯ä¸ªæ“ä½œç¬¦å®šä¹‰äº†å¦‚ä½•å°†å‚æ•°åŒ…ä¸­çš„å…ƒç´ ç›¸äº’ç»“åˆã€‚ ç¤ºä¾‹4ï¼šä½¿ç”¨è‡ªå®šä¹‰æ“ä½œç¬¦å‡è®¾æœ‰ä¸€ä¸ªè‡ªå®šä¹‰ç±»å‹Pointï¼Œå¹¶é‡è½½äº†+æ“ä½œç¬¦ä»¥æ”¯æŒç‚¹çš„ç›¸åŠ ã€‚ 1234567891011121314151617181920212223242526#include &lt;iostream&gt;struct Point &#123; int x, y; Point(int x, int y) : x(x), y(y) &#123;&#125; Point operator+(const Point&amp; other) const &#123; return Point(x + other.x, y + other.y); &#125;&#125;;std::ostream&amp; operator&lt;&lt;(std::ostream&amp; os, const Point&amp; p) &#123; return os &lt;&lt; &quot;(&quot; &lt;&lt; p.x &lt;&lt; &quot;, &quot; &lt;&lt; p.y &lt;&lt; &quot;)&quot;;&#125;template &lt;typename... Args&gt;auto sumPoints(Args... args) &#123; return (args + ...);&#125;int main() &#123; Point p1(1, 2), p2(3, 4), p3(5, 6); Point result = sumPoints(p1, p2, p3); std::cout &lt;&lt; result &lt;&lt; std::endl; // è¾“å‡ºï¼š(9, 12) return 0;&#125; è§£é‡Šï¼š é€šè¿‡é‡è½½+æ“ä½œç¬¦ï¼ŒsumPointså‡½æ•°èƒ½å¤Ÿå°†å¤šä¸ªPointå¯¹è±¡ç›¸åŠ ï¼Œå¾—åˆ°ç´¯ç§¯çš„ç»“æœã€‚ 6. ç¤ºä¾‹ä»£ç ä¸åº”ç”¨ä¸ºäº†å…¨é¢ç†è§£æŠ˜å è¡¨è¾¾å¼çš„åº”ç”¨ï¼Œä»¥ä¸‹æä¾›å¤šä¸ªå…·ä½“ç¤ºä¾‹ï¼Œæ¶µç›–ä¸åŒç±»å‹çš„æŠ˜å è¡¨è¾¾å¼ã€‚ ç¤ºä¾‹1ï¼šå­—ç¬¦ä¸²æ‹¼æ¥12345678910111213#include &lt;iostream&gt;#include &lt;string&gt;template &lt;typename... Args&gt;std::string concatenate(Args... args) &#123; return (std::string&#123;&#125; + ... + args); // äºŒå…ƒå·¦æŠ˜å &#125;int main() &#123; std::string result = concatenate(&quot;Hello&quot;, &quot; &quot;, &quot;World&quot;, &quot;!&quot;); std::cout &lt;&lt; result &lt;&lt; std::endl; // è¾“å‡ºï¼šHello World! return 0;&#125; ç¤ºä¾‹2ï¼šè®¡ç®—é€»è¾‘ä¸12345678910111213#include &lt;iostream&gt;template &lt;typename... Args&gt;bool all(Args... args) &#123; return (args &amp;&amp; ...);&#125;int main() &#123; std::cout &lt;&lt; std::boolalpha; std::cout &lt;&lt; all(true, true, true) &lt;&lt; std::endl; // true std::cout &lt;&lt; all(true, false, true) &lt;&lt; std::endl; // false return 0;&#125; ç¤ºä¾‹3ï¼šè®¡ç®—æœ€å¤§å€¼1234567891011121314151617#include &lt;iostream&gt;#include &lt;algorithm&gt;template &lt;typename T, typename... Args&gt;T maxValue(T first, Args... args) &#123; if constexpr (sizeof...(args) == 0) &#123; return first; &#125; else &#123; T restMax = maxValue(args...); return (first &gt; restMax) ? first : restMax; &#125;&#125;int main() &#123; std::cout &lt;&lt; maxValue(1, 5, 3, 9, 2) &lt;&lt; std::endl; // è¾“å‡ºï¼š9 return 0;&#125; æ³¨æ„ï¼š ä¸Šè¿°ç¤ºä¾‹ä¸­çš„(std::max)(first, ... , args)æ˜¯ä¸€ä¸ªéæ ‡å‡†ç”¨æ³•ï¼Œéœ€è¦æ ¹æ®å…·ä½“æƒ…å†µè°ƒæ•´ã€‚é€šå¸¸ï¼Œstd::maxä¸æ”¯æŒç›´æ¥çš„æŠ˜å è¡¨è¾¾å¼ï¼Œå› æ­¤æ­¤ä¾‹æ›´é€‚åˆä½œä¸ºæ¦‚å¿µæ€§è¯´æ˜ã€‚åœ¨å®é™…åº”ç”¨ä¸­ï¼Œå¯ä»¥ä½¿ç”¨std::initializer_listæˆ–å…¶ä»–æ–¹æ³•å®ç°å¤šå‚æ•°çš„æœ€å¤§å€¼è®¡ç®—ã€‚ ç¤ºä¾‹4ï¼šç­›é€‰é€»è¾‘å‡è®¾éœ€è¦æ£€æŸ¥å¤šä¸ªæ¡ä»¶æ˜¯å¦æ»¡è¶³ï¼Œä¸”æ¯ä¸ªæ¡ä»¶ä¹‹é—´ä½¿ç”¨é€»è¾‘æˆ–æ“ä½œï¼š 12345678910111213#include &lt;iostream&gt;template &lt;typename... Conditions&gt;bool anyCondition(Conditions... conds) &#123; return (conds || ...); // äºŒå…ƒå·¦æŠ˜å &#125;int main() &#123; bool a = false, b = true, c = false; std::cout &lt;&lt; std::boolalpha; std::cout &lt;&lt; anyCondition(a, b, c) &lt;&lt; std::endl; // true return 0;&#125; 7. æ³¨æ„äº‹é¡¹ä¸æœ€ä½³å®è·µ æ“ä½œç¬¦çš„é€‰æ‹©é€‰æ‹©åˆé€‚çš„æ“ä½œç¬¦ï¼ˆopï¼‰å¯¹äºå®ç°æ­£ç¡®çš„æŠ˜å è¡Œä¸ºè‡³å…³é‡è¦ã€‚ç¡®ä¿æ‰€é€‰çš„æ“ä½œç¬¦ç¬¦åˆæ‰€éœ€çš„é€»è¾‘å’Œè®¡ç®—éœ€æ±‚ã€‚ æ“ä½œç¬¦çš„ç»“åˆæ€§ä¸åŒçš„æ“ä½œç¬¦å…·æœ‰ä¸åŒçš„ç»“åˆæ€§ï¼ˆå·¦ç»“åˆã€å³ç»“åˆï¼‰ã€‚äº†è§£æ“ä½œç¬¦çš„ç»“åˆæ€§æœ‰åŠ©äºé€‰æ‹©æ­£ç¡®çš„æŠ˜å æ–¹å‘ï¼ˆå·¦æŠ˜å æˆ–å³æŠ˜å ï¼‰ã€‚ å‚æ•°åŒ…çš„åˆå§‹åŒ–åœ¨äºŒå…ƒæŠ˜å è¡¨è¾¾å¼ä¸­ï¼Œæœ‰æ—¶éœ€è¦ä¸€ä¸ªåˆå§‹å€¼ï¼ˆinitï¼‰ã€‚è¿™ä¸»è¦ç”¨äºç¡®ä¿æŠ˜å çš„æ­£ç¡®æ€§ï¼Œå°¤å…¶åœ¨å‚æ•°åŒ…å¯èƒ½ä¸ºç©ºçš„æƒ…å†µä¸‹ã€‚ ç¤ºä¾‹ï¼š 1234template &lt;typename... Args&gt;auto sumWithInit(int init, Args... args) &#123; return (init + ... + args); // å¸¦åˆå§‹å€¼çš„å·¦æŠ˜å &#125; å‚æ•°åŒ…ä¸ºç©ºçš„æƒ…å†µå¦‚æœå‚æ•°åŒ…ä¸ºç©ºï¼ŒæŠ˜å è¡¨è¾¾å¼çš„ç»“æœå–å†³äºæŠ˜å çš„ç±»å‹å’Œåˆå§‹å€¼ã€‚åˆç†è®¾ç½®åˆå§‹å€¼å¯ä»¥é¿å…æ½œåœ¨çš„é”™è¯¯ã€‚ ç¤ºä¾‹ï¼š 1234template &lt;typename... Args&gt;auto safeSum(Args... args) &#123; return (0 + ... + args); // ç©ºåŒ…æ—¶è¿”å›0&#125; ä¸é€’å½’æ¨¡æ¿çš„æ¯”è¾ƒæŠ˜å è¡¨è¾¾å¼åœ¨å¤„ç†å¯å˜å‚æ•°æ¨¡æ¿æ—¶ï¼Œæ¯”ä¼ ç»Ÿçš„é€’å½’æ¨¡æ¿æ–¹æ³•æ›´ç®€æ´ã€æ˜“è¯»ä¸”æ˜“äºç»´æŠ¤ã€‚ç„¶è€Œï¼Œç†è§£æŠ˜å è¡¨è¾¾å¼çš„åŸºæœ¬åŸç†å’Œè¯­æ³•å¯¹äºå……åˆ†åˆ©ç”¨å…¶ä¼˜åŠ¿è‡³å…³é‡è¦ã€‚ ç¼–è¯‘å™¨æ”¯æŒç¡®ä¿æ‰€ä½¿ç”¨çš„ç¼–è¯‘å™¨æ”¯æŒC++17æˆ–æ›´é«˜æ ‡å‡†ï¼Œå› ä¸ºæŠ˜å è¡¨è¾¾å¼æ˜¯åœ¨C++17ä¸­å¼•å…¥çš„ã€‚å¸¸è§çš„æ”¯æŒC++17çš„ç¼–è¯‘å™¨åŒ…æ‹¬ï¼š GCCï¼šä»ç‰ˆæœ¬7å¼€å§‹æ”¯æŒC++17ï¼Œå…¶ä¸­å®Œæ•´æ”¯æŒåœ¨åç»­ç‰ˆæœ¬ä¸­å¾—åˆ°å¢å¼ºã€‚ Clangï¼šä»ç‰ˆæœ¬5å¼€å§‹æ”¯æŒC++17ã€‚ MSVCï¼ˆVisual Studioï¼‰ï¼šä»Visual Studio 2017ç‰ˆæœ¬15.7å¼€å§‹æä¾›è¾ƒå…¨é¢çš„C++17æ”¯æŒã€‚ æ€§èƒ½è€ƒè™‘æŠ˜å è¡¨è¾¾å¼æœ¬èº«å¹¶ä¸å¼•å…¥é¢å¤–çš„æ€§èƒ½å¼€é”€ã€‚å®ƒä»¬æ˜¯åœ¨ç¼–è¯‘æ—¶å±•å¼€çš„ï¼Œç”Ÿæˆçš„ä»£ç ä¸æ‰‹åŠ¨å±•å¼€å‚æ•°åŒ…æ—¶çš„ä»£ç å‡ ä¹ç›¸åŒã€‚ç„¶è€Œï¼Œç¼–å†™é«˜æ•ˆçš„æŠ˜å è¡¨è¾¾å¼ä»ç„¶éœ€è¦ç†è§£æ‰€åº”ç”¨æ“ä½œç¬¦çš„æ€§èƒ½ç‰¹æ€§ã€‚ SFINAEï¼ˆSubstitution Failure Is Not An Errorï¼‰ä¸€ã€ä»€ä¹ˆæ˜¯SFINAEï¼ŸSFINAE æ˜¯ â€œSubstitution Failure Is Not An Errorâ€ï¼ˆæ›¿æ¢å¤±è´¥ä¸æ˜¯é”™è¯¯ï¼‰çš„ç¼©å†™ï¼Œæ˜¯C++æ¨¡æ¿ç¼–ç¨‹ä¸­çš„ä¸€ä¸ªé‡è¦æ¦‚å¿µã€‚å®ƒå…è®¸ç¼–è¯‘å™¨åœ¨æ¨¡æ¿å®ä¾‹åŒ–è¿‡ç¨‹ä¸­ï¼Œå¦‚æœåœ¨æ›¿æ¢æ¨¡æ¿å‚æ•°æ—¶å¤±è´¥ï¼ˆå³ä¸æ»¡è¶³æŸäº›æ¡ä»¶ï¼‰ï¼Œä¸ä¼šå°†å…¶è§†ä¸ºç¼–è¯‘é”™è¯¯ï¼Œè€Œæ˜¯ç»§ç»­å¯»æ‰¾å…¶ä»–å¯èƒ½çš„æ¨¡æ¿æˆ–é‡è½½ã€‚è¿™ä¸€æœºåˆ¶ä¸ºæ¡ä»¶ç¼–è¯‘ã€ç±»å‹ç‰¹æ€§æ£€æµ‹ã€å‡½æ•°é‡è½½ç­‰æä¾›äº†å¼ºå¤§çš„æ”¯æŒã€‚ äºŒã€SFINAEçš„å·¥ä½œåŸç†åœ¨æ¨¡æ¿å®ä¾‹åŒ–è¿‡ç¨‹ä¸­ï¼Œç¼–è¯‘å™¨ä¼šå°è¯•å°†æ¨¡æ¿å‚æ•°æ›¿æ¢ä¸ºå…·ä½“ç±»å‹ã€‚å¦‚æœåœ¨æ›¿æ¢è¿‡ç¨‹ä¸­å‡ºç°ä¸åˆæ³•çš„è¡¨è¾¾å¼æˆ–ç±»å‹ï¼Œç¼–è¯‘å™¨ä¸ä¼šæŠ¥é”™ï¼Œè€Œæ˜¯å°†è¯¥æ¨¡æ¿è§†ä¸ºä¸å¯è¡Œçš„ï¼Œç»§ç»­å°è¯•å…¶ä»–æ¨¡æ¿æˆ–é‡è½½ã€‚è¿™ä¸€ç‰¹æ€§å…è®¸å¼€å‘è€…æ ¹æ®ç±»å‹ç‰¹æ€§é€‰æ‹©ä¸åŒçš„æ¨¡æ¿å®ç°ã€‚ ä¸‰ã€SFINAEçš„åº”ç”¨åœºæ™¯ å‡½æ•°é‡è½½é€‰æ‹©ï¼šæ ¹æ®å‚æ•°ç±»å‹çš„ä¸åŒé€‰æ‹©ä¸åŒçš„å‡½æ•°å®ç°ã€‚ ç±»å‹ç‰¹æ€§æ£€æµ‹ï¼šæ£€æµ‹ç±»å‹æ˜¯å¦å…·æœ‰æŸäº›æˆå‘˜æˆ–ç‰¹æ€§ï¼Œä»è€Œå†³å®šæ˜¯å¦å¯ç”¨æŸäº›åŠŸèƒ½ã€‚ æ¡ä»¶ç¼–è¯‘ï¼šæ ¹æ®æ¨¡æ¿å‚æ•°çš„ç‰¹æ€§å†³å®šæ˜¯å¦ç¼–è¯‘æŸäº›ä»£ç æ®µã€‚ å››ã€SFINAEçš„åŸºæœ¬ç”¨æ³•SFINAEé€šå¸¸ä¸std::enable_ifã€æ¨¡æ¿ç‰¹åŒ–ã€ä»¥åŠç±»å‹èƒå–ç­‰æŠ€æœ¯ç»“åˆä½¿ç”¨ã€‚ä»¥ä¸‹é€šè¿‡å‡ ä¸ªä¾‹å­æ¥è¯´æ˜SFINAEçš„åº”ç”¨ã€‚ ç¤ºä¾‹ä¸€ï¼šé€šè¿‡std::enable_ifå®ç°å‡½æ•°é‡è½½1234567891011121314151617181920212223#include &lt;iostream&gt;#include &lt;type_traits&gt;template &lt;typename T&gt;typename std::enable_if&lt;std::is_integral&lt;T&gt;::value, T&gt;::typeprocess(T value) &#123; std::cout &lt;&lt; &quot;Processing integral: &quot; &lt;&lt; value &lt;&lt; std::endl; return value;&#125;template &lt;typename T&gt;typename std::enable_if&lt;std::is_floating_point&lt;T&gt;::value, T&gt;::typeprocess(T value) &#123; std::cout &lt;&lt; &quot;Processing floating point: &quot; &lt;&lt; value &lt;&lt; std::endl; return value;&#125;int main() &#123; process(42); // è°ƒç”¨æ•´æ•°ç‰ˆæœ¬ process(3.14); // è°ƒç”¨æµ®ç‚¹æ•°ç‰ˆæœ¬ // process(&quot;hello&quot;); // ç¼–è¯‘é”™è¯¯ï¼šæ²¡æœ‰åŒ¹é…çš„å‡½æ•° return 0;&#125; è§£é‡Šï¼š std::enable_if æ ¹æ®æ¡ä»¶ std::is_integral&lt;T&gt;::value æˆ– std::is_floating_point&lt;T&gt;::value å†³å®šæ˜¯å¦å¯ç”¨å¯¹åº”çš„å‡½æ•°æ¨¡æ¿ã€‚ å½“æ¡ä»¶ä¸æ»¡è¶³æ—¶ï¼Œè¯¥æ¨¡æ¿å®ä¾‹åŒ–å¤±è´¥ï¼Œä½†ç”±äºSFINAEè§„åˆ™ï¼Œç¼–è¯‘å™¨ä¸ä¼šæŠ¥é”™ï¼Œè€Œæ˜¯å¿½ç•¥è¯¥æ¨¡æ¿ï¼Œä»è€Œå®ç°å‡½æ•°é‡è½½é€‰æ‹©ã€‚ ç¤ºä¾‹äºŒï¼šæ£€æµ‹ç±»å‹æ˜¯å¦å…·æœ‰ç‰¹å®šæˆå‘˜å‡è®¾æˆ‘ä»¬éœ€è¦å®ç°ä¸€ä¸ªå‡½æ•°ï¼Œä»…å½“ç±»å‹ T å…·æœ‰æˆå‘˜å‡½æ•° foo æ—¶æ‰å¯ç”¨è¯¥å‡½æ•°ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142#include &lt;iostream&gt;#include &lt;type_traits&gt;// æ£€æµ‹ç±»å‹Tæ˜¯å¦æœ‰fooæˆå‘˜å‡½æ•°template &lt;typename T&gt;class has_foo &#123;private: template &lt;typename U&gt; static auto test(int) -&gt; decltype(std::declval&lt;U&gt;().foo(), std::true_type&#123;&#125;); template &lt;typename U&gt; static std::false_type test(...); public: static constexpr bool value = decltype(test&lt;T&gt;(0))::value;&#125;;// ä»…å½“Tæœ‰fooæˆå‘˜æ—¶æ‰å¯ç”¨çš„å‡½æ•°template &lt;typename T&gt;typename std::enable_if&lt;has_foo&lt;T&gt;::value&gt;::typecall_foo(T&amp; obj) &#123; obj.foo();&#125;// æµ‹è¯•ç±»struct WithFoo &#123; void foo() &#123; std::cout &lt;&lt; &quot;WithFoo::foo() called&quot; &lt;&lt; std::endl; &#125;&#125;;struct WithoutFoo &#123; // æ²¡æœ‰fooæˆå‘˜å‡½æ•°&#125;;int main() &#123; WithFoo wf; WithoutFoo wof; call_foo(wf); // æ­£å¸¸è°ƒç”¨ // call_foo(wof); // ç¼–è¯‘é”™è¯¯ï¼šæ²¡æœ‰åŒ¹é…çš„å‡½æ•° return 0;&#125; è§£é‡Šï¼š has_foo æ˜¯ä¸€ä¸ªç±»å‹èƒå–ç±»ï¼Œç”¨äºæ£€æµ‹ç±»å‹ T æ˜¯å¦å…·æœ‰æˆå‘˜å‡½æ•° fooã€‚ call_foo å‡½æ•°æ¨¡æ¿ä»…åœ¨ T å…·æœ‰ foo æˆå‘˜æ—¶å¯ç”¨ã€‚ å¯¹äºä¸å…·æœ‰ foo æˆå‘˜çš„ç±»å‹ï¼Œç¼–è¯‘å™¨ä¼šå¿½ç•¥ call_fooï¼Œä»è€Œé¿å…ç¼–è¯‘é”™è¯¯ã€‚ ç¤ºä¾‹ä¸‰ï¼šé€šè¿‡æ¨¡æ¿ç‰¹åŒ–å®ç°ä¸åŒçš„è¡Œä¸ºä»¥ä¸‹æ˜¯å®Œæ•´çš„ã€æ­£ç¡®å®ç° TypePrinter çš„ä»£ç ç¤ºä¾‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849#include &lt;iostream&gt;#include &lt;type_traits&gt;// æ£€æµ‹ç±»å‹Tæ˜¯å¦æœ‰évoidçš„value_typetemplate &lt;typename T, typename = void&gt;struct has_non_void_value_type : std::false_type &#123;&#125;;template &lt;typename T&gt;struct has_non_void_value_type&lt;T, std::void_t&lt;typename T::value_type&gt;&gt; : std::negation&lt;std::is_void&lt;typename T::value_type&gt;&gt; &#123;&#125;;// ä¸»æ¨¡æ¿template &lt;typename T, bool HasValueType = has_non_void_value_type&lt;T&gt;::value&gt;struct TypePrinter &#123; static void print() &#123; std::cout &lt;&lt; &quot;Type without value_type or value_type is void&quot; &lt;&lt; std::endl; &#125;&#125;;// ç‰¹åŒ–ç‰ˆæœ¬ï¼šå½“Tæœ‰évoidçš„value_typeæ—¶template &lt;typename T&gt;struct TypePrinter&lt;T, true&gt; &#123; static void print() &#123; std::cout &lt;&lt; &quot;Type with value_type: &quot; &lt;&lt; typeid(typename T::value_type).name() &lt;&lt; std::endl; &#125;&#125;;// æµ‹è¯•ç»“æ„ä½“struct WithValueType &#123; using value_type = int;&#125;;struct WithoutValueType &#123; // æ²¡æœ‰value_type&#125;;struct WithVoidValueType &#123; using value_type = void;&#125;;int main() &#123; TypePrinter&lt;WithValueType&gt;::print(); // æœ‰value_type TypePrinter&lt;WithoutValueType&gt;::print(); // æ²¡æœ‰value_type TypePrinter&lt;WithVoidValueType&gt;::print(); // value_typeæ˜¯void return 0;&#125; ä»£ç è§£é‡Š Trait has_non_void_value_type: ä¸»æ¨¡æ¿ï¼šé»˜è®¤æƒ…å†µä¸‹ï¼Œhas_non_void_value_type&lt;T&gt; ç»§æ‰¿è‡ª std::false_typeï¼Œè¡¨ç¤º T æ²¡æœ‰ value_type æˆ– value_type æ˜¯ voidã€‚ ç‰¹åŒ–æ¨¡æ¿ï¼šä»…å½“ T æœ‰ value_type ä¸” value_type ä¸æ˜¯ void æ—¶ï¼Œhas_non_void_value_type&lt;T&gt; ç»§æ‰¿è‡ª std::true_typeã€‚ TypePrinter æ¨¡æ¿: ä¸»æ¨¡æ¿ï¼šæ¥å—ä¸€ä¸ªç±»å‹ T å’Œä¸€ä¸ªå¸ƒå°”æ¨¡æ¿å‚æ•° HasValueTypeï¼Œé»˜è®¤ä¸º has_non_void_value_type&lt;T&gt;::valueã€‚ ç‰¹åŒ–ç‰ˆæœ¬ TypePrinter&lt;T, true&gt;ï¼šå½“ HasValueType ä¸º true æ—¶ï¼Œè¡¨ç¤º T æœ‰é void çš„ value_typeï¼Œæä¾›ç›¸åº”çš„ print å®ç°ã€‚ ç‰¹åŒ–ç‰ˆæœ¬ TypePrinter&lt;T, false&gt;ï¼šå½“ HasValueType ä¸º false æ—¶ï¼Œè¡¨ç¤º T æ²¡æœ‰ value_type æˆ– value_type æ˜¯ voidï¼Œæä¾›é»˜è®¤çš„ print å®ç°ã€‚ æµ‹è¯•ç»“æ„ä½“ï¼š WithValueTypeï¼šæœ‰ä¸€ä¸ªé void çš„ value_typeã€‚ WithoutValueTypeï¼šæ²¡æœ‰ value_typeã€‚ WithVoidValueTypeï¼šæœ‰ä¸€ä¸ª value_typeï¼Œä½†å®ƒæ˜¯ voidã€‚ main å‡½æ•°ï¼š åˆ†åˆ«æµ‹è¯•äº†ä¸‰ç§æƒ…å†µï¼ŒéªŒè¯ TypePrinter çš„è¡Œä¸ºæ˜¯å¦ç¬¦åˆé¢„æœŸã€‚ äº”ã€SFINAEçš„ä¼˜ç¼ºç‚¹ä¼˜ç‚¹ï¼š çµæ´»æ€§é«˜ï¼šèƒ½å¤Ÿæ ¹æ®ç±»å‹ç‰¹æ€§é€‰æ‹©ä¸åŒçš„å®ç°ï¼Œæå‡ä»£ç çš„æ³›åŒ–èƒ½åŠ›ã€‚ ç±»å‹å®‰å…¨ï¼šé€šè¿‡ç¼–è¯‘æœŸæ£€æµ‹ï¼Œé¿å…äº†è¿è¡Œæ—¶é”™è¯¯ã€‚ æ— éœ€é¢å¤–çš„è¿è¡Œæ—¶å¼€é”€ï¼šæ‰€æœ‰çš„ç±»å‹ç­›é€‰éƒ½åœ¨ç¼–è¯‘æœŸå®Œæˆã€‚ ç¼ºç‚¹ï¼š å¤æ‚æ€§é«˜ï¼šSFINAEç›¸å…³çš„ä»£ç å¾€å¾€è¾ƒä¸ºå¤æ‚ï¼Œé˜…è¯»å’Œç»´æŠ¤éš¾åº¦è¾ƒå¤§ã€‚ ç¼–è¯‘å™¨é”™è¯¯ä¿¡æ¯éš¾ä»¥ç†è§£ï¼šSFINAEå¤±è´¥æ—¶ï¼Œç¼–è¯‘å™¨å¯èƒ½ç»™å‡ºæ™¦æ¶©çš„é”™è¯¯ä¿¡æ¯ï¼Œè°ƒè¯•å›°éš¾ã€‚ æ¨¡æ¿å®ä¾‹åŒ–æ·±åº¦é™åˆ¶ï¼šè¿‡åº¦ä½¿ç”¨SFINAEå¯èƒ½å¯¼è‡´ç¼–è¯‘æ—¶é—´å¢åŠ å’Œæ¨¡æ¿å®ä¾‹åŒ–æ·±åº¦é™åˆ¶é—®é¢˜ã€‚ å…­ã€ç°ä»£C++ä¸­çš„æ›¿ä»£æ–¹æ¡ˆéšç€C++11åŠåç»­æ ‡å‡†çš„å‘å±•ï¼Œå¼•å…¥äº†è¯¸å¦‚decltypeã€constexprã€if constexprã€æ¦‚å¿µï¼ˆC++20ï¼‰ç­‰æ–°çš„ç‰¹æ€§ï¼Œéƒ¨åˆ†æƒ…å†µä¸‹å¯ä»¥æ›¿ä»£ä¼ ç»Ÿçš„SFINAEï¼Œæé«˜ä»£ç çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚ä¾‹å¦‚ï¼ŒC++20å¼•å…¥çš„æ¦‚å¿µï¼ˆConceptsï¼‰æä¾›äº†æ›´ä¸ºç®€æ´å’Œç›´è§‚çš„æ–¹å¼æ¥çº¦æŸæ¨¡æ¿å‚æ•°ï¼Œå‡å°‘äº†SFINAEçš„å¤æ‚æ€§ã€‚ ç¤ºä¾‹ï¼šä½¿ç”¨æ¦‚å¿µæ›¿ä»£SFINAE1234567891011121314151617181920212223#include &lt;iostream&gt;#include &lt;concepts&gt;template &lt;typename T&gt;concept Integral = std::is_integral_v&lt;T&gt;;template &lt;Integral T&gt;void process(T value) &#123; std::cout &lt;&lt; &quot;Processing integral: &quot; &lt;&lt; value &lt;&lt; std::endl;&#125;template &lt;typename T&gt;requires std::floating_point&lt;T&gt;void process(T value) &#123; std::cout &lt;&lt; &quot;Processing floating point: &quot; &lt;&lt; value &lt;&lt; std::endl;&#125;int main() &#123; process(42); // è°ƒç”¨æ•´æ•°ç‰ˆæœ¬ process(3.14); // è°ƒç”¨æµ®ç‚¹æ•°ç‰ˆæœ¬ // process(&quot;hello&quot;); // ç¼–è¯‘é”™è¯¯ï¼šæ²¡æœ‰åŒ¹é…çš„å‡½æ•° return 0;&#125; è§£é‡Šï¼š ä½¿ç”¨æ¦‚å¿µIntegralä»£æ›¿std::enable_ifï¼Œè¯­æ³•æ›´ç®€æ´ï¼Œä»£ç æ›´æ˜“è¯»ã€‚ å½“ç±»å‹ä¸æ»¡è¶³æ¦‚å¿µæ—¶ï¼Œç¼–è¯‘å™¨ä¼šç»™å‡ºæ˜ç¡®çš„é”™è¯¯ä¿¡æ¯ï¼Œä¾¿äºè°ƒè¯•ã€‚ è™½ç„¶ä¸Šè¿°æ–¹æ³•ç»å…¸ä¸”æœ‰æ•ˆï¼Œä½†åœ¨C++11åŠä»¥åç‰ˆæœ¬ï¼Œå­˜åœ¨æ›´ç®€æ´å’Œæ˜“è¯»çš„æ–¹å¼æ¥å®ç°ç›¸åŒçš„åŠŸèƒ½ã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨std::void_tå’Œæ›´ç°ä»£çš„æ£€æµ‹æŠ€å·§ï¼Œæˆ–è€…ç›´æ¥ä½¿ç”¨C++20çš„æ¦‚å¿µï¼ˆConceptsï¼‰ï¼Œä½¿ä»£ç æ›´åŠ æ¸…æ™°ã€‚ ç¤ºä¾‹ï¼šä½¿ç”¨std::void_tç®€åŒ–has_foo1234567891011121314151617181920212223#include &lt;iostream&gt;#include &lt;type_traits&gt;template &lt;typename T, typename = void&gt;struct has_foo : std::false_type &#123;&#125;;template &lt;typename T&gt;struct has_foo&lt;T, std::void_t&lt;decltype(std::declval&lt;T&gt;().foo())&gt;&gt; : std::true_type &#123;&#125;;template &lt;typename T&gt;std::enable_if_t&lt;has_foo&lt;T&gt;::value&gt; call_foo(T&amp; obj) &#123; obj.foo();&#125;struct WithFoo &#123; void foo() &#123; std::cout &lt;&lt; &quot;WithFoo::foo() called&quot; &lt;&lt; std::endl; &#125;&#125;;int main() &#123; WithFoo wf; call_foo(wf); // æ­£å¸¸è°ƒç”¨ return 0;&#125; è§£é‡Šï¼š åˆ©ç”¨std::void_tï¼Œhas_fooç»“æ„æ›´ä¸ºç®€æ´ã€‚ decltype(std::declval&lt;T&gt;().foo())å°è¯•åœ¨ä¸å®ä¾‹åŒ–Tå¯¹è±¡çš„æƒ…å†µä¸‹æ£€æµ‹foo()æˆå‘˜å‡½æ•°ã€‚ å¦‚æœfoo()å­˜åœ¨ï¼Œhas_foo&lt;T&gt;ç»§æ‰¿è‡ªstd::true_typeï¼Œå¦åˆ™ç»§æ‰¿è‡ªstd::false_typeã€‚ ä½¿ç”¨C++20æ¦‚å¿µå¦‚æœä½ ä½¿ç”¨çš„æ˜¯æ”¯æŒC++20çš„ç¼–è¯‘å™¨ï¼Œå¯ä»¥åˆ©ç”¨æ¦‚å¿µï¼ˆConceptsï¼‰è¿›ä¸€æ­¥ç®€åŒ–å’Œå¢å¼ºå¯è¯»æ€§ã€‚ 12345678910111213141516171819202122#include &lt;iostream&gt;#include &lt;concepts&gt;template &lt;typename T&gt;concept HasFoo = requires(T t) &#123; t.foo();&#125;;template &lt;HasFoo T&gt;void call_foo(T&amp; obj) &#123; obj.foo();&#125;struct WithFoo &#123; void foo() &#123; std::cout &lt;&lt; &quot;WithFoo::foo() called&quot; &lt;&lt; std::endl; &#125;&#125;;int main() &#123; WithFoo wf; call_foo(wf); // æ­£å¸¸è°ƒç”¨ return 0;&#125; è§£é‡Šï¼š HasFooæ¦‚å¿µï¼šä½¿ç”¨requiresè¡¨è¾¾å¼æ£€æµ‹ç±»å‹Tæ˜¯å¦å…·æœ‰void foo()æˆå‘˜å‡½æ•°ã€‚ call_fooå‡½æ•°æ¨¡æ¿ï¼šä»…å½“Tæ»¡è¶³HasFooæ¦‚å¿µæ—¶ï¼Œæ¨¡æ¿è¢«å¯ç”¨ã€‚ è¿™ç§æ–¹å¼æ›´ç›´è§‚ï¼Œæ˜“äºç†è§£å’Œç»´æŠ¤ã€‚ ä¸ƒã€æ€»ç»“SFINAEä½œä¸ºC++æ¨¡æ¿ç¼–ç¨‹ä¸­çš„ä¸€é¡¹å¼ºå¤§åŠŸèƒ½ï¼Œé€šè¿‡åœ¨æ¨¡æ¿å®ä¾‹åŒ–è¿‡ç¨‹ä¸­å…è®¸æ›¿æ¢å¤±è´¥è€Œä¸æŠ¥é”™ï¼Œå®ç°äº†åŸºäºç±»å‹ç‰¹æ€§çš„ç¼–ç¨‹ã€‚ç„¶è€Œï¼ŒSFINAEçš„è¯­æ³•å¤æ‚ä¸”éš¾ä»¥ç»´æŠ¤ï¼Œç°ä»£C++å¼•å…¥çš„æ–°ç‰¹æ€§å¦‚æ¦‚å¿µç­‰åœ¨æŸäº›æƒ…å†µä¸‹å·²ç»èƒ½å¤Ÿæ›´ç®€æ´åœ°å®ç°ç±»ä¼¼çš„åŠŸèƒ½ã€‚å°½ç®¡å¦‚æ­¤ï¼Œç†è§£SFINAEçš„å·¥ä½œæœºåˆ¶ä¾ç„¶å¯¹äºæŒæ¡é«˜çº§æ¨¡æ¿æŠ€æœ¯å’Œé˜…è¯»è€æ—§ä»£ç å…·æœ‰é‡è¦æ„ä¹‰ã€‚ ç»¼åˆæ¡ˆä¾‹ï¼šç»“åˆæ¨¡æ¿ç‰¹åŒ–ä¸æŠ˜å è¡¨è¾¾å¼ä¸ºäº†è¿›ä¸€æ­¥å·©å›ºå¯¹æ¨¡æ¿ç‰¹åŒ–å’ŒæŠ˜å è¡¨è¾¾å¼çš„ç†è§£ï¼Œæœ¬èŠ‚å°†é€šè¿‡ä¸€ä¸ªç»¼åˆæ¡ˆä¾‹å±•ç¤ºå¦‚ä½•å°†ä¸¤è€…ç»“åˆä½¿ç”¨ã€‚ æ¡ˆä¾‹æè¿°å®ç°ä¸€ä¸ªé€šç”¨çš„æ—¥å¿—è®°å½•å™¨Loggerï¼Œèƒ½å¤Ÿå¤„ç†ä»»æ„æ•°é‡å’Œç±»å‹çš„å‚æ•°ï¼Œå¹¶æ ¹æ®ä¸åŒçš„ç±»å‹ç»„åˆè°ƒæ•´è¾“å‡ºæ ¼å¼ã€‚å…·ä½“éœ€æ±‚åŒ…æ‹¬ï¼š å¯¹äºæ™®é€šç±»å‹ï¼Œä½¿ç”¨é€šç”¨çš„æ‰“å°æ ¼å¼ã€‚ å¯¹äºæŒ‡é’ˆç±»å‹ï¼Œæ‰“å°æŒ‡é’ˆåœ°å€æˆ–æŒ‡å‘çš„å€¼ã€‚ å¯¹äºstd::stringç±»å‹ï¼Œä½¿ç”¨ä¸“é—¨çš„æ ¼å¼ã€‚ æ”¯æŒå¯å˜æ•°é‡çš„å‚æ•°ï¼Œé€šè¿‡æŠ˜å è¡¨è¾¾å¼å®ç°å‚æ•°çš„é€ä¸€æ‰“å°ã€‚ å®ç°æ­¥éª¤ å®šä¹‰é€šç”¨ç±»æ¨¡æ¿Loggerï¼Œä½¿ç”¨æ¨¡æ¿ç‰¹åŒ–å’Œåç‰¹åŒ–å¤„ç†ä¸åŒç±»å‹ã€‚ å®ç°logå‡½æ•°ï¼Œä½¿ç”¨æ¨¡æ¿æŠ˜å è¡¨è¾¾å¼é€ä¸€æ‰“å°å‚æ•°ã€‚ ä»£ç å®ç°12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758#include &lt;iostream&gt;#include &lt;string&gt;#include &lt;type_traits&gt;// é€šç”¨æ¨¡æ¿template &lt;typename T, typename Enable = void&gt;class Logger &#123;public: static void log(const T&amp; value) &#123; std::cout &lt;&lt; &quot;General Logger: &quot; &lt;&lt; value &lt;&lt; std::endl; &#125;&#125;;// æŒ‡é’ˆç±»å‹çš„åç‰¹åŒ–template &lt;typename T&gt;class Logger&lt;T*, void&gt; &#123;public: static void log(T* value) &#123; if (value) &#123; std::cout &lt;&lt; &quot;Pointer Logger: &quot; &lt;&lt; *value &lt;&lt; &quot; (address: &quot; &lt;&lt; value &lt;&lt; &quot;)&quot; &lt;&lt; std::endl; &#125; else &#123; std::cout &lt;&lt; &quot;Pointer Logger: nullptr&quot; &lt;&lt; std::endl; &#125; &#125;&#125;;// std::stringç±»å‹çš„å…¨ç‰¹åŒ–template &lt;&gt;class Logger&lt;std::string, void&gt; &#123;public: static void log(const std::string&amp; value) &#123; std::cout &lt;&lt; &quot;String Logger: \\&quot;&quot; &lt;&lt; value &lt;&lt; &quot;\\&quot;&quot; &lt;&lt; std::endl; &#125;&#125;;// è¾…åŠ©å‡½æ•°ï¼šè®°å½•å•ä¸ªå€¼template &lt;typename T&gt;void logOne(const T&amp; value) &#123; Logger&lt;T&gt;::log(value);&#125;// ä½¿ç”¨æŠ˜å è¡¨è¾¾å¼è®°å½•æ‰€æœ‰å‚æ•°template &lt;typename... Args&gt;void logAll(const Args&amp;... args) &#123; (logOne(args), ...); // C++17 æŠ˜å è¡¨è¾¾å¼&#125;int main() &#123; int x = 42; double y = 3.14; std::string str = &quot;Hello World&quot;; int* ptr = &amp;x; int* nullPtr = nullptr; logAll(x, y, str, ptr, nullPtr); return 0;&#125; è¾“å‡ºï¼š 12345General Logger: 42General Logger: 3.14String Logger: &quot;Hello World&quot;Pointer Logger: 42 (address: 0x7ffd...)Pointer Logger: nullptr è§£æ **é€šç”¨æ¨¡æ¿Logger&lt;T, Enable&gt;**ï¼š ä½¿ç”¨ç¬¬äºŒä¸ªæ¨¡æ¿å‚æ•°Enableä¸SFINAEï¼ˆSubstitution Failure Is Not An Errorï¼‰ç»“åˆï¼Œæ§åˆ¶æ¨¡æ¿ç‰¹åŒ–ã€‚ å¯¹äºéæŒ‡é’ˆç±»å‹å’Œéstd::stringç±»å‹ï¼Œä½¿ç”¨é€šç”¨å®ç°ï¼Œæ‰“å°â€General Logger: valueâ€ã€‚ **ç±»æ¨¡æ¿åç‰¹åŒ–Logger&lt;T, Enable&gt;**ï¼š ä½¿ç”¨std::enable_ifå’Œstd::is_pointerï¼Œå½“Tæ˜¯æŒ‡é’ˆç±»å‹æ—¶ï¼Œç‰¹åŒ–æ¨¡æ¿ã€‚ å®ç°æŒ‡é’ˆç±»å‹çš„ç‰¹æ®Šæ—¥å¿—å¤„ç†ï¼Œæ‰“å°æŒ‡é’ˆæŒ‡å‘çš„å€¼æˆ–nullptrã€‚ **ç±»æ¨¡æ¿å…¨ç‰¹åŒ–Logger&lt;std::string&gt;**ï¼š ä¸ºstd::stringç±»å‹æä¾›å…¨ç‰¹åŒ–ç‰ˆæœ¬ï¼Œä½¿ç”¨ä¸åŒçš„è¾“å‡ºæ ¼å¼ã€‚ logOneå‡½æ•°æ¨¡æ¿ï¼š ç®€åŒ–è°ƒç”¨è¿‡ç¨‹ï¼Œè°ƒç”¨ç›¸åº”çš„Logger&lt;T&gt;::logæ–¹æ³•ã€‚ logAllå‡½æ•°æ¨¡æ¿ï¼š ä½¿ç”¨æ¨¡æ¿æŠ˜å è¡¨è¾¾å¼(logOne(args), ...)ï¼Œå®ç°å¯¹æ‰€æœ‰å‚æ•°çš„é€ä¸€æ—¥å¿—è®°å½•ã€‚ é€šè¿‡å·¦æŠ˜å çš„é€—å·è¡¨è¾¾å¼ï¼Œç¡®ä¿æ¯ä¸ªlogOneè°ƒç”¨ä¾æ¬¡æ‰§è¡Œã€‚ mainå‡½æ•°ï¼š æµ‹è¯•ä¸åŒç±»å‹çš„æ—¥å¿—è®°å½•ï¼ŒåŒ…æ‹¬æ™®é€šç±»å‹ã€æŒ‡é’ˆç±»å‹å’Œstd::stringç±»å‹ã€‚ è°ƒç”¨logAllå‡½æ•°ï¼Œå®ç°å¤šå‚æ•°çš„ç»¼åˆæ—¥å¿—è®°å½•ã€‚ æ¨¡æ¿å…ƒç¼–ç¨‹ï¼ˆTemplate Metaprogrammingï¼‰ä»€ä¹ˆæ˜¯æ¨¡æ¿å…ƒç¼–ç¨‹æ¨¡æ¿å…ƒç¼–ç¨‹ï¼ˆTemplate Metaprogrammingï¼‰æ˜¯ä¸€ç§åœ¨ç¼–è¯‘æœŸé€šè¿‡æ¨¡æ¿æœºåˆ¶è¿›è¡Œä»£ç ç”Ÿæˆå’Œè®¡ç®—çš„ç¼–ç¨‹æŠ€æœ¯ã€‚å®ƒåˆ©ç”¨ç¼–è¯‘å™¨çš„æ¨¡æ¿å®ä¾‹åŒ–æœºåˆ¶ï¼Œåœ¨ç¼–è¯‘æœŸé—´æ‰§è¡Œä»£ç é€»è¾‘ï¼Œä»¥æé«˜ç¨‹åºçš„æ€§èƒ½å’Œçµæ´»æ€§ã€‚ æ¨¡æ¿å…ƒç¼–ç¨‹çš„ä¼˜åŠ¿ æé«˜ä»£ç çš„å¯é‡ç”¨æ€§å’Œæ³›åŒ–èƒ½åŠ›ã€‚ åœ¨ç¼–è¯‘æœŸè¿›è¡Œå¤æ‚è®¡ç®—ï¼Œå‡å°‘è¿è¡Œæ—¶å¼€é”€ã€‚ å®ç°ç±»å‹å®‰å…¨çš„é«˜çº§æŠ½è±¡ã€‚ æ¨¡æ¿å…ƒç¼–ç¨‹åŸºç¡€ æ¨¡æ¿ç‰¹åŒ–ï¼ˆTemplate Specializationï¼‰ï¼š å…¨ç‰¹åŒ–ï¼ˆFull Specializationï¼‰ï¼šä¸ºç‰¹å®šç±»å‹æä¾›ç‰¹å®šå®ç°ã€‚ åç‰¹åŒ–ï¼ˆPartial Specializationï¼‰ï¼šä¸ºéƒ¨åˆ†æ¨¡æ¿å‚æ•°ç‰¹å®šçš„æƒ…å†µæä¾›å®ç°ã€‚ é€’å½’æ¨¡æ¿ï¼ˆRecursive Templatesï¼‰ï¼šåˆ©ç”¨æ¨¡æ¿çš„é€’å½’å®ä¾‹åŒ–æœºåˆ¶ï¼Œå®ç°ç¼–è¯‘æœŸè®¡ç®—ã€‚ ç¼–è¯‘æœŸè®¡ç®—æ¨¡æ¿å…ƒç¼–ç¨‹å…è®¸åœ¨ç¼–è¯‘æ—¶æ‰§è¡Œè®¡ç®—ï¼Œå¦‚è®¡ç®—é˜¶ä¹˜ã€æ–æ³¢é‚£å¥‘æ•°åˆ—ç­‰ã€‚ ç¤ºä¾‹ï¼šç¼–è¯‘æœŸé˜¶ä¹˜123456789101112131415161718#include &lt;iostream&gt;// åŸºæœ¬æ¨¡æ¿template &lt;int N&gt;struct Factorial &#123; static const int value = N * Factorial&lt;N - 1&gt;::value;&#125;;// ç‰¹åŒ–æ¨¡æ¿ï¼šé€’å½’ç»ˆæ­¢æ¡ä»¶template &lt;&gt;struct Factorial&lt;0&gt; &#123; static const int value = 1;&#125;;int main() &#123; std::cout &lt;&lt; &quot;Factorial of 5: &quot; &lt;&lt; Factorial&lt;5&gt;::value &lt;&lt; std::endl; return 0;&#125; è¾“å‡ºï¼š 1Factorial of 5: 120 è®²è§£ï¼š åŸºæœ¬æ¨¡æ¿Factorialå®šä¹‰äº†ä¸€ä¸ªé™æ€å¸¸é‡valueï¼Œå…¶å€¼ä¸ºN * Factorial&lt;N - 1&gt;::valueï¼Œå®ç°é€’å½’è®¡ç®—ã€‚ ç‰¹åŒ–æ¨¡æ¿Factorial&lt;0&gt;å®šä¹‰é€’å½’ç»ˆæ­¢æ¡ä»¶ï¼Œå½“N&#x3D;0æ—¶ï¼Œvalueä¸º1ã€‚ åœ¨mainå‡½æ•°ä¸­ï¼Œé€šè¿‡Factorial&lt;5&gt;::valueè·å–5çš„é˜¶ä¹˜ç»“æœï¼Œç¼–è¯‘æœŸå³ç”Ÿæˆå…¶å€¼ã€‚ é™æ€æˆå‘˜å˜é‡çš„åŸºæœ¬è§„åˆ™åœ¨ C++ ä¸­ï¼Œé™æ€æˆå‘˜å˜é‡çš„å£°æ˜ä¸å®šä¹‰æœ‰ä»¥ä¸‹åŸºæœ¬è§„åˆ™ï¼š å£°æ˜ï¼ˆDeclarationï¼‰ï¼šåœ¨ç±»å†…éƒ¨å£°æ˜é™æ€æˆå‘˜å˜é‡ï¼Œå‘Šè¯‰ç¼–è¯‘å™¨è¯¥ç±»åŒ…å«è¿™ä¸ªé™æ€æˆå‘˜ã€‚ å®šä¹‰ï¼ˆDefinitionï¼‰ï¼šåœ¨ç±»å¤–éƒ¨å¯¹é™æ€æˆå‘˜å˜é‡è¿›è¡Œå®šä¹‰ï¼Œåˆ†é…å­˜å‚¨ç©ºé—´ã€‚ é€šå¸¸ï¼Œå¯¹äºé constexpr æˆ–é inline çš„é™æ€æˆå‘˜å˜é‡ï¼Œå¿…é¡» åœ¨ç±»å¤–è¿›è¡Œå®šä¹‰ï¼Œå¦åˆ™ä¼šå¯¼è‡´é“¾æ¥å™¨é”™è¯¯ï¼ˆundefined referenceï¼‰ã€‚ ç‰¹æ®Šæƒ…å†µï¼šstatic const æ•´æ•°æˆå‘˜å¯¹äº static constæ•´æ•°ç±»å‹ çš„é™æ€æˆå‘˜å˜é‡ï¼ŒC++ æ ‡å‡†åšäº†ä¸€äº›ç‰¹æ®Šçš„å¤„ç†ï¼š ç±»å†…åˆå§‹åŒ–ï¼šä½ å¯ä»¥åœ¨ç±»å†…éƒ¨åˆå§‹åŒ– static const æ•´æ•°æˆå‘˜å˜é‡ï¼Œä¾‹å¦‚ static const int value = 42;ã€‚ ä½¿ç”¨åœºæ™¯ï¼š ä¸éœ€è¦ç±»å¤–å®šä¹‰ï¼šåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œç¼–è¯‘å™¨åœ¨ç¼–è¯‘é˜¶æ®µå¯ä»¥ç›´æ¥ä½¿ç”¨ç±»å†…çš„åˆå§‹åŒ–å€¼ï¼Œæ— éœ€ç±»å¤–å®šä¹‰ã€‚ éœ€è¦ç±»å¤–å®šä¹‰ï¼šå¦‚æœä½ åœ¨ç¨‹åºä¸­å¯¹è¯¥é™æ€æˆå‘˜å˜é‡è¿›è¡Œå–å€ï¼ˆä¾‹å¦‚ï¼Œ&amp;Factorial&lt;5&gt;::valueï¼‰ï¼Œæˆ–è€…åœ¨å…¶ä»–éœ€è¦è¯¥å˜é‡çš„å­˜å‚¨ä½ç½®æ—¶ï¼Œå°±éœ€è¦åœ¨ç±»å¤–è¿›è¡Œå®šä¹‰ã€‚ C++11 åŠä¹‹å‰çš„æ ‡å‡†åœ¨ C++11 åŠæ›´æ—©çš„æ ‡å‡†ä¸­ï¼Œå¯¹äº static const æ•´æ•°æˆå‘˜å˜é‡ï¼š ä¸éœ€è¦ç±»å¤–å®šä¹‰çš„æƒ…å†µï¼š ä»…åœ¨ä½œä¸ºç¼–è¯‘æœŸå¸¸é‡ä½¿ç”¨æ—¶ï¼Œä¸éœ€è¦ç±»å¤–å®šä¹‰ã€‚ä¾‹å¦‚ï¼Œç”¨äºæ•°ç»„å¤§å°ã€æ¨¡æ¿å‚æ•°ç­‰ã€‚ éœ€è¦ç±»å¤–å®šä¹‰çš„æƒ…å†µï¼š å½“ä½ éœ€è¦å¯¹å˜é‡è¿›è¡Œå–å€ï¼Œæˆ–è€…åœ¨éœ€è¦å…¶å­˜å‚¨ä½ç½®æ—¶ï¼Œå¿…é¡»åœ¨ç±»å¤–å®šä¹‰ã€‚ä¾‹å¦‚ï¼š 12345// ç±»å†…å£°æ˜static const int value = 42;// ç±»å¤–å®šä¹‰ï¼ˆå¦‚æœéœ€è¦è¿›è¡Œå–å€æ“ä½œï¼‰const int ClassName::value; C++17 åŠæ›´æ–°æ ‡å‡†ä» C++17 å¼€å§‹ï¼Œå¼•å…¥äº† å†…è”å˜é‡ï¼ˆinline variablesï¼‰ï¼Œä½¿å¾—åœ¨ç±»å†…å®šä¹‰é™æ€æˆå‘˜å˜é‡å˜å¾—æ›´åŠ çµæ´»ï¼š å†…è”é™æ€æˆå‘˜å˜é‡ï¼š ä½¿ç”¨ inline å…³é”®å­—ï¼Œå¯ä»¥åœ¨ç±»å†…å¯¹é™æ€æˆå‘˜å˜é‡è¿›è¡Œå®šä¹‰ï¼Œæ— éœ€åœ¨ç±»å¤–è¿›è¡Œå•ç‹¬å®šä¹‰ã€‚ è¿™é€‚ç”¨äº C++17 åŠæ›´é«˜ç‰ˆæœ¬ã€‚ ä¾‹å¦‚ï¼Œä½ å¯ä»¥è¿™æ ·ç¼–å†™ï¼š 123456789template &lt;int N&gt;struct Factorial &#123; static inline const int value = N * Factorial&lt;N - 1&gt;::value;&#125;;template &lt;&gt;struct Factorial&lt;0&gt; &#123; static inline const int value = 1;&#125;; åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ— éœ€åœ¨ç±»å¤–è¿›è¡Œå®šä¹‰ï¼Œå› ä¸º inline ç¡®ä¿äº†è¯¥å˜é‡åœ¨æ¯ä¸ªç¿»è¯‘å•å…ƒä¸­éƒ½åªæœ‰ä¸€ä¸ªå®ä¾‹ã€‚ åœ¨ C++11 åŠä¹‹å‰çš„æ ‡å‡†ä»£ç ï¼š 123456789101112template &lt;int N&gt;struct Factorial &#123; static const int value = N * Factorial&lt;N - 1&gt;::value;&#125;;template &lt;&gt;struct Factorial&lt;0&gt; &#123; static const int value = 1;&#125;;// å¦‚æœéœ€è¦å–å€ï¼Œéœ€è¦åœ¨ç±»å¤–å®šä¹‰// const int Factorial&lt;5&gt;::value; ä½œä¸ºç¼–è¯‘æœŸå¸¸é‡ä½¿ç”¨ï¼š ä¾‹å¦‚ï¼Œç”¨äºå…¶ä»–æ¨¡æ¿å‚æ•°æˆ–ç¼–è¯‘æœŸå¸¸é‡è®¡ç®—æ—¶ï¼Œä¸éœ€è¦ç±»å¤–å®šä¹‰ã€‚ å–å€æˆ–éœ€è¦å­˜å‚¨ä½ç½®æ—¶ï¼š éœ€è¦åœ¨ç±»å¤–è¿›è¡Œå®šä¹‰ã€‚ä¾‹å¦‚ï¼š 12345int main() &#123; std::cout &lt;&lt; Factorial&lt;5&gt;::value &lt;&lt; std::endl; // ä¸éœ€è¦å®šä¹‰ const int* ptr = &amp;Factorial&lt;5&gt;::value; // éœ€è¦å®šä¹‰ return 0;&#125; åœ¨ C++17 åŠæ›´é«˜æ ‡å‡†å¦‚æœä½ ä½¿ç”¨ C++17 åŠæ›´é«˜ç‰ˆæœ¬ï¼Œå¯ä»¥ä½¿ç”¨ inline å…³é”®å­—ï¼š 123456789template &lt;int N&gt;struct Factorial &#123; static inline const int value = N * Factorial&lt;N - 1&gt;::value;&#125;;template &lt;&gt;struct Factorial&lt;0&gt; &#123; static inline const int value = 1;&#125;; æ— éœ€ç±»å¤–å®šä¹‰ï¼š inline ä½¿å¾—åœ¨ç±»å†…çš„å®šä¹‰æˆä¸ºå”¯ä¸€çš„å®šä¹‰ï¼Œå³ä½¿åœ¨å¤šä¸ªç¿»è¯‘å•å…ƒä¸­ä½¿ç”¨ï¼Œä¹Ÿä¸ä¼šå¯¼è‡´é‡å¤å®šä¹‰é”™è¯¯ã€‚ å®é™…ç¤ºä¾‹ä¸æµ‹è¯•ç¤ºä¾‹ 1ï¼šä»…ä½œä¸ºç¼–è¯‘æœŸå¸¸é‡ä½¿ç”¨ C++11 åŠä¹‹å‰ï¼šæ— éœ€ç±»å¤–å®šä¹‰ã€‚ C++17 åŠæ›´æ–°ï¼šåŒæ ·æ— éœ€ç±»å¤–å®šä¹‰ï¼Œä¸”å¯ä»¥ä½¿ç”¨ inline è¿›ä¸€æ­¥ä¼˜åŒ–ã€‚ ç¤ºä¾‹ 2ï¼šå–å€ C++11 åŠä¹‹å‰ï¼šå¿…é¡»æä¾›ç±»å¤–å®šä¹‰ï¼Œå¦åˆ™ä¼šåœ¨é“¾æ¥æ—¶å‡ºç°é”™è¯¯ã€‚ C++17 åŠæ›´æ–°ï¼šè‹¥æœªä½¿ç”¨ inlineï¼Œä»éœ€æä¾›ç±»å¤–å®šä¹‰ï¼›ä½¿ç”¨ inline åˆ™æ— éœ€ã€‚ ç¤ºä¾‹ 3ï¼šä½¿ç”¨ inlineï¼ˆC++17 åŠæ›´é«˜ï¼‰ C++17 åŠä»¥ä¸Šï¼š æ— éœ€ç±»å¤–å®šä¹‰ã€‚ inline ä¿è¯äº†å¤šé‡å®šä¹‰çš„åˆæ³•æ€§ã€‚ è¯¦ç»†è§£æä¸ºä»€ä¹ˆæœ‰è¿™æ ·çš„ç‰¹æ®Šå¤„ç†ï¼Ÿ ä¼˜åŒ–ä¸æ€§èƒ½ï¼š åœ¨ç¼–è¯‘æœŸå¸¸é‡çš„æƒ…å†µä¸‹ï¼Œä¸éœ€è¦åœ¨è¿è¡Œæ—¶åˆ†é…å­˜å‚¨ç©ºé—´ï¼Œç¼–è¯‘å™¨å¯ä»¥ä¼˜åŒ–æ‰ç›¸å…³ä»£ç ã€‚ å…¼å®¹æ€§ï¼š æ—©æœŸ C++ æ ‡å‡†éµå¾ªè¿™ç§è§„åˆ™ï¼Œå…è®¸åœ¨ç±»å†…åˆå§‹åŒ–é™æ€å¸¸é‡æˆå‘˜å˜é‡ï¼Œä¾¿äºæ¨¡æ¿å…ƒç¼–ç¨‹å’Œå¸¸é‡è¡¨è¾¾å¼çš„ä½¿ç”¨ã€‚ inline å˜é‡ï¼š C++17 å¼•å…¥ inline å…³é”®å­—ç”¨äºå˜é‡ï¼Œè§£å†³äº†é™æ€æˆå‘˜å˜é‡åœ¨å¤šä¸ªç¿»è¯‘å•å…ƒä¸­çš„å®šä¹‰é—®é¢˜ï¼Œä½¿å¾—ä»£ç æ›´ç®€æ´ã€‚ æ˜¯å¦æ€»æ˜¯éœ€è¦å®šä¹‰ï¼Ÿå¹¶éæ€»æ˜¯éœ€è¦ã€‚å…³é”®åœ¨äº å¦‚ä½•ä½¿ç”¨ è¿™ä¸ªé™æ€æˆå‘˜å˜é‡ï¼š ä»…ä½œä¸ºç¼–è¯‘æœŸå¸¸é‡ä½¿ç”¨ï¼šæ— éœ€ç±»å¤–å®šä¹‰ã€‚ éœ€è¦å­˜å‚¨ä½ç½®æˆ–å–å€ï¼šéœ€è¦ç±»å¤–å®šä¹‰ï¼Œé™¤éä½¿ç”¨ inlineï¼ˆC++17 åŠä»¥ä¸Šï¼‰ã€‚ ç¼–è¯‘å™¨ä¸é“¾æ¥å™¨çš„è¡Œä¸º ç¼–è¯‘é˜¶æ®µï¼š ç±»å†…çš„åˆå§‹åŒ–ç”¨äºç¼–è¯‘æœŸå¸¸é‡è®¡ç®—ï¼Œä¸æ¶‰åŠå­˜å‚¨åˆ†é…ã€‚ é“¾æ¥é˜¶æ®µï¼š å¦‚æœæ²¡æœ‰ç±»å¤–å®šä¹‰ï¼Œä¸”é™æ€æˆå‘˜è¢« odr-usedï¼ˆå¯èƒ½éœ€è¦å­˜å‚¨ä½ç½®ï¼‰ï¼Œé“¾æ¥å™¨ä¼šæŠ¥é”™ï¼Œæç¤ºæ‰¾ä¸åˆ°ç¬¦å·å®šä¹‰ã€‚ ä½¿ç”¨ inline å…³é”®å­—åï¼Œç¼–è¯‘å™¨å¤„ç†ä¸ºå†…è”å˜é‡ï¼Œé¿å…äº†å¤šé‡å®šä¹‰é—®é¢˜ã€‚ ç¤ºä¾‹ï¼šç¼–è¯‘æœŸæ–æ³¢é‚£å¥‘æ•°åˆ—123456789101112131415161718192021#include &lt;iostream&gt;template &lt;int N&gt;struct Fibonacci &#123; static const int value = Fibonacci&lt;N - 1&gt;::value + Fibonacci&lt;N - 2&gt;::value;&#125;;template &lt;&gt;struct Fibonacci&lt;0&gt; &#123; static const int value = 0;&#125;;template &lt;&gt;struct Fibonacci&lt;1&gt; &#123; static const int value = 1;&#125;;int main() &#123; std::cout &lt;&lt; &quot;Fibonacci(10): &quot; &lt;&lt; Fibonacci&lt;10&gt;::value &lt;&lt; std::endl; return 0;&#125; è¾“å‡ºï¼š 1Fibonacci(10): 55 è¦ç‚¹ï¼š æ¨¡æ¿å…ƒç¼–ç¨‹åˆ©ç”¨ç¼–è¯‘æœŸè®¡ç®—æå‡ç¨‹åºæ€§èƒ½ã€‚ éœ€è¦ç†è§£æ¨¡æ¿é€’å½’ä¸ç»ˆæ­¢æ¡ä»¶ã€‚ å¸¸ä¸ç±»å‹ç‰¹æ€§å’Œæ¨¡æ¿ç‰¹åŒ–ç»“åˆä½¿ç”¨ã€‚ ç±»å‹è®¡ç®—ä¸SFINAE ç±»å‹è®¡ç®—ï¼šåœ¨ç¼–è¯‘æœŸè¿›è¡Œç±»å‹çš„æ¨å¯¼å’Œè½¬æ¢ã€‚ SFINAEï¼ˆSubstitution Failure Is Not An Errorï¼‰ï¼šæ¨¡æ¿å®ä¾‹åŒ–è¿‡ç¨‹ä¸­ï¼Œå¦‚æœæŸä¸ªæ›¿æ¢å¤±è´¥ï¼Œç¼–è¯‘å™¨ä¸ä¼šæŠ¥é”™ï¼Œè€Œæ˜¯å¿½ç•¥è¯¥æ¨¡æ¿ï¼Œå¹¶å°è¯•å…¶ä»–åŒ¹é…ã€‚ ç¤ºä¾‹ï¼šæ£€æµ‹ç±»å‹æ˜¯å¦å¯åŠ 12345678910111213141516171819202122232425#include &lt;iostream&gt;#include &lt;type_traits&gt;template &lt;typename T, typename = void&gt;struct is_addable : std::false_type &#123;&#125;;template &lt;typename T&gt;struct is_addable&lt;T, decltype(void(std::declval&lt;T&gt;() + std::declval&lt;T&gt;()))&gt; : std::true_type &#123;&#125;;template &lt;typename T&gt;typename std::enable_if&lt;is_addable&lt;T&gt;::value, T&gt;::typeadd(const T&amp; a, const T&amp; b) &#123; return a + b;&#125;int main() &#123; std::cout &lt;&lt; std::boolalpha; std::cout &lt;&lt; &quot;int is addable: &quot; &lt;&lt; is_addable&lt;int&gt;::value &lt;&lt; std::endl; std::cout &lt;&lt; &quot;std::string is addable: &quot; &lt;&lt; is_addable&lt;std::string&gt;::value &lt;&lt; std::endl; std::cout &lt;&lt; add(3, 4) &lt;&lt; std::endl; std::cout &lt;&lt; add(std::string(&quot;Hello&quot;), std::string(&quot; World&quot;)) &lt;&lt; std::endl; return 0;&#125; è®²è§£ï¼š struct is_addable&lt;...&gt; : std::true_type &#123;&#125; ç›®çš„ï¼šå®šä¹‰ä¸€ä¸ªåä¸º is_addable çš„ç»“æ„ä½“æ¨¡æ¿ï¼Œå®ƒç»§æ‰¿è‡ª std::true_typeã€‚ ä½œç”¨ï¼šå½“ç‰¹å®šçš„æ¨¡æ¿å‚æ•°æ»¡è¶³æ¡ä»¶æ—¶ï¼Œè¿™ä¸ªç‰¹åŒ–ç‰ˆæœ¬å°†è¢«é€‰ä¸­ï¼Œè¡¨ç¤º T ç±»å‹æ˜¯å¯åŠ çš„ï¼Œå³æ”¯æŒ + æ“ä½œç¬¦ã€‚ æ¨¡æ¿å‚æ•°è§£é‡Šï¼š&lt;T, decltype(void(std::declval&lt;T&gt;() + std::declval&lt;T&gt;()))&gt; Tï¼šè¿™æ˜¯è¦æ£€æŸ¥çš„ç±»å‹ã€‚ std::declval&lt;T&gt;()ï¼š ç”¨é€”ï¼šstd::declval&lt;T&gt;() æ˜¯ä¸€ä¸ªç”¨äºåœ¨ä¸å®é™…åˆ›å»º T ç±»å‹å¯¹è±¡çš„æƒ…å†µä¸‹ï¼Œç”Ÿæˆä¸€ä¸ª T ç±»å‹çš„å³å€¼å¼•ç”¨ã€‚ ä½œç”¨ï¼šå®ƒå…è®¸æˆ‘ä»¬åœ¨ç¼–è¯‘æ—¶æ¨¡æ‹Ÿ T ç±»å‹çš„å¯¹è±¡ï¼Œä»¥ä¾¿ç”¨äºè¡¨è¾¾å¼çš„æ£€æµ‹ã€‚ std::declval&lt;T&gt;() + std::declval&lt;T&gt;()ï¼š è¡¨è¾¾å¼ï¼šå°è¯•å¯¹ä¸¤ä¸ª T ç±»å‹çš„å³å€¼å¼•ç”¨è¿›è¡ŒåŠ æ³•è¿ç®—ã€‚ ç›®çš„ï¼šæ£€æŸ¥ T ç±»å‹æ˜¯å¦æ”¯æŒ + æ“ä½œç¬¦ã€‚ void(...)ï¼š å°†åŠ æ³•è¡¨è¾¾å¼çš„ç»“æœè½¬æ¢ä¸º void ç±»å‹ã€‚è¿™æ˜¯ä¸ºäº†åœ¨ decltype ä¸­ä»…å…³å¿ƒè¡¨è¾¾å¼æ˜¯å¦æœ‰æ•ˆï¼Œè€Œä¸å…³å¿ƒå…¶å…·ä½“ç±»å‹ã€‚ decltype(void(std::declval&lt;T&gt;() + std::declval&lt;T&gt;()))ï¼š ä½œç”¨ï¼šå¦‚æœ T ç±»å‹æ”¯æŒåŠ æ³•è¿ç®—ï¼Œåˆ™è¯¥ decltype è¡¨è¾¾å¼çš„ç±»å‹ä¸º voidï¼Œå¦åˆ™ä¼šå¯¼è‡´æ›¿æ¢å¤±è´¥ã€‚ é«˜çº§æ¨¡æ¿å…ƒç¼–ç¨‹æŠ€å·§ å˜å‚æ¨¡æ¿ï¼ˆVariadic Templatesï¼‰ï¼šæ”¯æŒæ¨¡æ¿å‚æ•°åŒ…ï¼Œå®ç°æ›´åŠ çµæ´»çš„æ¨¡æ¿å®šä¹‰ã€‚ ç¤ºä¾‹ï¼šæ±‚å’Œæ¨¡æ¿12345678910111213141516171819#include &lt;iostream&gt;template &lt;int... Ns&gt;struct Sum;template &lt;&gt;struct Sum&lt;&gt; &#123; static const int value = 0;&#125;;template &lt;int N, int... Ns&gt;struct Sum&lt;N, Ns...&gt; &#123; static const int value = N + Sum&lt;Ns...&gt;::value;&#125;;int main() &#123; std::cout &lt;&lt; &quot;Sum: &quot; &lt;&lt; Sum&lt;1, 2, 3, 4, 5&gt;::value &lt;&lt; std::endl; return 0;&#125; è®²è§£ï¼š åŸºæœ¬æ¨¡æ¿Sumæ¥å—ä¸€ä¸ªæ•´æ•°å‚æ•°åŒ…Ns...ã€‚ ç‰¹åŒ–æ¨¡æ¿Sum&lt;&gt;å®šä¹‰é€’å½’ç»ˆæ­¢æ¡ä»¶ï¼Œvalueä¸º0ã€‚ é€’å½’å®šä¹‰Sum&lt;N, Ns...&gt;å°†ç¬¬ä¸€ä¸ªå‚æ•°Nä¸å‰©ä½™å‚æ•°çš„å’Œç›¸åŠ ã€‚ åœ¨mainå‡½æ•°ä¸­ï¼Œé€šè¿‡Sum&lt;1, 2, 3, 4, 5&gt;::valueè®¡ç®—1+2+3+4+5&#x3D;15ã€‚ ç±»å‹åˆ—è¡¨ï¼ˆType Listsï¼‰ï¼šé€šè¿‡æ¨¡æ¿å‚æ•°åŒ…ç®¡ç†ç±»å‹çš„é›†åˆã€‚ ç¤ºä¾‹ï¼šç±»å‹åˆ—è¡¨å’Œå…ƒç´ è®¿é—®1234567891011121314151617181920212223242526#include &lt;iostream&gt;#include &lt;typeinfo&gt;template &lt;typename... Types&gt;struct TypeList &#123;&#125;;template &lt;typename List, unsigned N&gt;struct TypeAt;template &lt;typename Head, typename... Tail&gt;struct TypeAt&lt;TypeList&lt;Head, Tail...&gt;, 0&gt; &#123; using type = Head;&#125;;template &lt;typename Head, typename... Tail, unsigned N&gt;struct TypeAt&lt;TypeList&lt;Head, Tail...&gt;, N&gt; &#123; using type = typename TypeAt&lt;TypeList&lt;Tail...&gt;, N - 1&gt;::type;&#125;;int main() &#123; using list = TypeList&lt;int, double, char&gt;; using third_type = TypeAt&lt;list, 2&gt;::type; std::cout &lt;&lt; &quot;Third type: &quot; &lt;&lt; typeid(third_type).name() &lt;&lt; std::endl; return 0;&#125; è®²è§£ï¼š TypeListï¼šå®šä¹‰ä¸€ä¸ªåŒ…å«å¤šä¸ªç±»å‹çš„ç±»å‹åˆ—è¡¨ã€‚ TypeAtï¼šé€šè¿‡é€’å½’æ¨¡æ¿ï¼Œä»TypeListä¸­è·å–ç¬¬Nä¸ªç±»å‹ã€‚ å½“Nä¸º0æ—¶ï¼Œç±»å‹ä¸ºHeadã€‚ å¦åˆ™ï¼Œé€’å½’è·å–Tail...ä¸­ç¬¬N-1ä¸ªç±»å‹ã€‚ ä½¿ç”¨ï¼šå®šä¹‰listä¸ºTypeList&lt;int, double, char&gt;ï¼Œthird_typeä¸ºç¬¬2ä¸ªç±»å‹ï¼Œå³charã€‚ å®é™…åº”ç”¨æ¡ˆä¾‹æ¡ˆä¾‹1ï¼šé™æ€æ–­è¨€ä¸ç±»å‹æ£€æŸ¥1234567891011121314#include &lt;type_traits&gt;template &lt;typename T&gt;void process(T value) &#123; static_assert(std::is_arithmetic&lt;T&gt;::value, &quot;T must be arithmetic type&quot;); // å¤„ç†é€»è¾‘&#125;int main() &#123; process(42); // OK process(3.14); // OK // process(&quot;hello&quot;); // ç¼–è¯‘é”™è¯¯ï¼šé™æ€æ–­è¨€å¤±è´¥ return 0;&#125; æ¡ˆä¾‹2ï¼šç¼–è¯‘æœŸå­—ç¬¦ä¸²123456789101112131415#include &lt;iostream&gt;template &lt;char... Cs&gt;struct String &#123; static const char value[sizeof...(Cs) + 1];&#125;;template &lt;char... Cs&gt;const char String&lt;Cs...&gt;::value[sizeof...(Cs) + 1] = &#123;Cs..., &#x27;\\0&#x27;&#125;;int main() &#123; using Hello = String&lt;&#x27;H&#x27;, &#x27;e&#x27;, &#x27;l&#x27;, &#x27;l&#x27;, &#x27;o&#x27;&gt;; std::cout &lt;&lt; Hello::value &lt;&lt; std::endl; // è¾“å‡ºï¼šHello return 0;&#125; ä¸ºä»€ä¹ˆéœ€è¦å¤–éƒ¨å®šä¹‰ valueåœ¨ C++ ä¸­ï¼Œé™æ€æˆå‘˜å˜é‡ä¸ç±»çš„å®ä¾‹æ— å…³ï¼Œå®ƒä»¬å­˜åœ¨äºå…¨å±€å‘½åç©ºé—´ä¸­ã€‚ç„¶è€Œï¼Œé™æ€æˆå‘˜å˜é‡çš„å£°æ˜å’Œå®šä¹‰æ˜¯ä¸åŒçš„ï¼š å£°æ˜ï¼šå‘Šè¯‰ç¼–è¯‘å™¨ç±»ä¸­å­˜åœ¨è¿™ä¸ªå˜é‡ã€‚ å®šä¹‰ï¼šä¸ºè¿™ä¸ªå˜é‡åˆ†é…å­˜å‚¨ç©ºé—´ã€‚ å¯¹äºé inline çš„é™æ€æˆå‘˜å˜é‡ï¼Œå³ä½¿æ˜¯ constexprï¼Œéƒ½éœ€è¦åœ¨ç±»å¤–éƒ¨è¿›è¡Œå®šä¹‰ã€‚å¦åˆ™ï¼Œé“¾æ¥å™¨åœ¨å¤„ç†å¤šä¸ªç¿»è¯‘å•å…ƒæ—¶ä¼šå› ä¸ºæ‰¾ä¸åˆ°å˜é‡çš„å®šä¹‰è€ŒæŠ¥é”™ã€‚ å…·ä½“åŸå›  æ¨¡æ¿ç±»çš„é™æ€æˆå‘˜å˜é‡ï¼š æ¯å½“æ¨¡æ¿å®ä¾‹åŒ–æ—¶ï¼Œéƒ½ä¼šäº§ç”Ÿä¸€ä¸ªæ–°çš„ç±»ç±»å‹ï¼Œæ¯ä¸ªç±»ç±»å‹éƒ½æœ‰è‡ªå·±çš„ä¸€ç»„é™æ€æˆå‘˜å˜é‡ã€‚ å› æ­¤ï¼Œç¼–è¯‘å™¨éœ€è¦çŸ¥é“è¿™äº›é™æ€æˆå‘˜å˜é‡åœ¨æ‰€æœ‰ç¿»è¯‘å•å…ƒä¸­éƒ½å”¯ä¸€å¯¹åº”ä¸€ä¸ªå®šä¹‰ã€‚ constexpr é™æ€æˆå‘˜å˜é‡ï¼š ä» C++17 å¼€å§‹ï¼Œinline å…³é”®å­—å¼•å…¥ï¼Œä½¿å¾— constexpr é™æ€æˆå‘˜å˜é‡å¯ä»¥åœ¨ç±»å†…å®šä¹‰ï¼Œå¹¶ä¸”éšå¼åœ°å…·æœ‰ inline å±æ€§ã€‚è¿™æ„å‘³ç€ä¸éœ€è¦åœ¨ç±»å¤–å®šä¹‰å®ƒä»¬ï¼Œå› ä¸º inline ç¡®ä¿äº†åœ¨å¤šä¸ªç¿»è¯‘å•å…ƒä¸­æœ‰åŒä¸€ä»½å®šä¹‰ã€‚ ä½†åœ¨ C++17 ä¹‹å‰æˆ–ä¸ä½¿ç”¨ inline çš„æƒ…å†µä¸‹ï¼Œå³ä½¿æ˜¯ constexprï¼Œä»éœ€åœ¨ç±»å¤–å®šä¹‰ã€‚ ç±»å†…å£°æ˜ï¼šstatic constexpr char value[...] å£°æ˜äº† value å¹¶ç»™äºˆäº†åˆå§‹å€¼ã€‚ ç±»å¤–å®šä¹‰ï¼šconstexpr char String&lt;Cs...&gt;::value[...] ä¸º value åˆ†é…äº†å­˜å‚¨ç©ºé—´ã€‚ å¦‚æœçœç•¥ç±»å¤–å®šä¹‰ï¼Œç¼–è¯‘å™¨ä¼šåœ¨é“¾æ¥é˜¶æ®µæ‰¾ä¸åˆ° value çš„å®šä¹‰ï¼Œå¯¼è‡´é“¾æ¥é”™è¯¯ã€‚è¿™å°¤å…¶é€‚ç”¨äº C++14 åŠæ›´æ—©ç‰ˆæœ¬ï¼Œä»¥åŠ C++17 ä¸­æœªä½¿ç”¨ inline çš„æƒ…å½¢ã€‚ å¦‚ä½•é¿å…å¤–éƒ¨å®šä¹‰å¦‚æœä½ ä½¿ç”¨çš„æ˜¯ C++17 æˆ–æ›´é«˜ç‰ˆæœ¬ï¼Œå¯ä»¥é€šè¿‡ inline å…³é”®å­—å°†é™æ€æˆå‘˜å˜é‡å£°æ˜ä¸º inlineï¼Œä»è€Œåœ¨ç±»å†…å®Œæˆå®šä¹‰ï¼Œæ— éœ€å†åœ¨å¤–éƒ¨å®šä¹‰ã€‚ä¾‹å¦‚ï¼š 1234template &lt;char... Cs&gt;struct String &#123; static inline const char value[sizeof...(Cs) + 1] = &#123;Cs..., &#x27;\\0&#x27;&#125;;&#125;; åœ¨è¿™ä¸ªç‰ˆæœ¬ä¸­ï¼Œinline å…³é”®å­—å‘Šè¯‰ç¼–è¯‘å™¨è¿™æ˜¯ä¸€ä¸ªå†…è”å˜é‡ï¼Œå…è®¸åœ¨å¤šä¸ªç¿»è¯‘å•å…ƒä¸­å­˜åœ¨åŒä¸€ä»½å®šä¹‰ï¼Œè€Œä¸ä¼šå¯¼è‡´é‡å¤å®šä¹‰é”™è¯¯ã€‚å› æ­¤ï¼Œæ— éœ€åœ¨ç±»å¤–å†æ¬¡å®šä¹‰ valueã€‚ å®Œæ•´ç¤ºä¾‹å¯¹æ¯”ä¸ä½¿ç”¨ inlineï¼ˆéœ€è¦ç±»å¤–å®šä¹‰ï¼‰12345678// C++14 åŠæ›´æ—©ç‰ˆæœ¬template &lt;char... Cs&gt;struct String &#123; static const char value[sizeof...(Cs) + 1];&#125;;template &lt;char... Cs&gt;const char String&lt;Cs...&gt;::value[sizeof...(Cs) + 1] = &#123;Cs..., &#x27;\\0&#x27;&#125;; ä½¿ç”¨ inlineï¼ˆæ— éœ€ç±»å¤–å®šä¹‰ï¼ŒC++17 èµ·ï¼‰12345// C++17 åŠæ›´é«˜ç‰ˆæœ¬template &lt;char... Cs&gt;struct String &#123; static inline const char value[sizeof...(Cs) + 1] = &#123;Cs..., &#x27;\\0&#x27;&#125;;&#125;; C++20 ConceptsC++20 å¼•å…¥äº† Conceptsï¼Œå®ƒä»¬ä¸ºæ¨¡æ¿å‚æ•°æä¾›äº†æ›´å¼ºçš„çº¦æŸå’Œè¡¨è¾¾èƒ½åŠ›ï¼Œä½¿æ¨¡æ¿çš„ä½¿ç”¨æ›´ç®€æ´ã€é”™è¯¯ä¿¡æ¯æ›´å‹å¥½ã€‚ å®šä¹‰ä¸ä½¿ç”¨å®šä¹‰ä¸€ä¸ª ConceptConcepts ä½¿ç”¨ concept å…³é”®å­—å®šä¹‰ï¼Œå¹¶ä½œä¸ºå‡½æ•°æˆ–ç±»æ¨¡æ¿çš„çº¦æŸã€‚ 1234#include &lt;concepts&gt;template &lt;typename T&gt;concept Arithmetic = std::integral&lt;T&gt; || std::floating_point&lt;T&gt;; ä½¿ç”¨ Concept çº¦æŸæ¨¡æ¿1234567891011template &lt;Arithmetic T&gt;T add(T a, T b) &#123; return a + b;&#125;// æˆ–è€…ä½¿ç”¨ requires å­å¥template &lt;typename T&gt;requires Arithmetic&lt;T&gt;T multiply(T a, T b) &#123; return a * b;&#125; é™åˆ¶ä¸çº¦æŸConcepts å…è®¸ä¸ºæ¨¡æ¿å‚æ•°å®šä¹‰å¤æ‚çš„çº¦æŸï¼Œä½¿å¾—æ¨¡æ¿æ›´å…·è¡¨è¾¾æ€§ï¼ŒåŒæ—¶æå‡ç¼–è¯‘å™¨é”™è¯¯ä¿¡æ¯çš„å¯ç†è§£æ€§ã€‚ ç¤ºä¾‹ï¼šæ’åºå‡½æ•°ä¸­çš„ Concepts12345678910111213141516171819202122232425262728#include &lt;iostream&gt;#include &lt;vector&gt;#include &lt;algorithm&gt;#include &lt;concepts&gt;template &lt;typename T&gt;concept Sortable = requires(T a, T b) &#123; &#123; a &lt; b &#125; -&gt; std::convertible_to&lt;bool&gt;;&#125;;template &lt;Sortable T&gt;void sortAndPrint(std::vector&lt;T&gt;&amp; vec) &#123; std::sort(vec.begin(), vec.end()); for (const auto&amp; item : vec) &#123; std::cout &lt;&lt; item &lt;&lt; &quot; &quot;; &#125; std::cout &lt;&lt; std::endl;&#125;int main() &#123; std::vector&lt;int&gt; numbers = &#123;3, 1, 4, 1, 5&#125;; sortAndPrint(numbers); // std::vector&lt;std::vector&lt;int&gt;&gt; nested; // ä¸ä¼šæ»¡è¶³ Sortable æ¦‚å¿µ // sortAndPrint(nested); // ç¼–è¯‘é”™è¯¯ return 0;&#125; è¾“å‡ºï¼š 11 1 3 4 5 è¦ç‚¹ï¼š Concepts æä¾›äº†æ¨¡æ¿å‚æ•°çš„è¯­ä¹‰çº¦æŸã€‚ ä½¿ç”¨ Concepts æé«˜æ¨¡æ¿çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚ ç”Ÿæˆæ›´å‹å¥½çš„ç¼–è¯‘é”™è¯¯ä¿¡æ¯ï¼Œæ˜“äºè°ƒè¯•ã€‚ æ¨¡æ¿å®ä¾‹åŒ–ä¸ç¼–è¯‘å™¨è¡Œä¸ºç†è§£æ¨¡æ¿å®ä¾‹åŒ–çš„è¿‡ç¨‹æœ‰åŠ©äºè¿›è¡Œæœ‰æ•ˆçš„æ¨¡æ¿è®¾è®¡ä¸ä¼˜åŒ–ï¼Œå°¤å…¶æ˜¯åœ¨æ¶‰åŠé“¾æ¥å’Œç¼–è¯‘æ—¶é—´æ—¶ã€‚ æ˜¾å¼å®ä¾‹åŒ–ï¼ˆExplicit Instantiationï¼‰æ˜¾å¼å®ä¾‹åŒ–å‘Šè¯‰ç¼–è¯‘å™¨ç”Ÿæˆç‰¹å®šç±»å‹ä¸‹çš„æ¨¡æ¿ä»£ç ï¼Œä¸»è¦ç”¨äºåˆ†ç¦»æ¨¡æ¿çš„å£°æ˜ä¸å®šä¹‰ï¼Œå‡å°‘ç¼–è¯‘æ—¶é—´ã€‚ è¯­æ³•ï¼š12template class ClassName&lt;Type&gt;; // ç±»æ¨¡æ¿æ˜¾å¼å®ä¾‹åŒ–template returnType functionName&lt;Type&gt;(parameters); // å‡½æ•°æ¨¡æ¿æ˜¾å¼å®ä¾‹åŒ– ç¤ºä¾‹ï¼šåˆ†ç¦»ç±»æ¨¡æ¿çš„å£°æ˜ä¸å®šä¹‰MyClass.h 12345678template &lt;typename T&gt;class MyClass &#123;private: T value;public: MyClass(T v); void print();&#125;; MyClass.cpp 1234567891011121314#include &quot;MyClass.h&quot;#include &lt;iostream&gt;template &lt;typename T&gt;MyClass&lt;T&gt;::MyClass(T v) : value(v) &#123;&#125;template &lt;typename T&gt;void MyClass&lt;T&gt;::print() &#123; std::cout &lt;&lt; &quot;Value: &quot; &lt;&lt; value &lt;&lt; std::endl;&#125;// æ˜¾å¼å®ä¾‹åŒ–template class MyClass&lt;int&gt;;template class MyClass&lt;double&gt;; main.cpp 1234567891011#include &quot;MyClass.h&quot;int main() &#123; MyClass&lt;int&gt; obj1(42); MyClass&lt;double&gt; obj2(3.14); obj1.print(); obj2.print(); return 0;&#125; è¾“å‡ºï¼š 12Value: 42Value: 3.14 æ³¨æ„äº‹é¡¹ï¼š æ˜¾å¼å®ä¾‹åŒ–éœ€è¦åœ¨æ¨¡æ¿å®šä¹‰åè¿›è¡Œã€‚ åªæœ‰æ˜¾å¼å®ä¾‹åŒ–çš„ç±»å‹åœ¨æœªå®ä¾‹åŒ–æ—¶å¯ç”¨äºæ¨¡æ¿åˆ†ç¦»ã€‚ æœªæ˜¾å¼å®ä¾‹åŒ–çš„ç±»å‹å¯èƒ½å¯¼è‡´é“¾æ¥é”™è¯¯ã€‚ éšå¼å®ä¾‹åŒ–ï¼ˆImplicit Instantiationï¼‰éšå¼å®ä¾‹åŒ–æ˜¯ç¼–è¯‘å™¨åœ¨æ¨¡æ¿è¢«å®é™…ä½¿ç”¨æ—¶è‡ªåŠ¨ç”Ÿæˆå¯¹åº”å®ä¾‹ä»£ç çš„è¿‡ç¨‹ã€‚é€šå¸¸ï¼Œæ¨¡æ¿å®šä¹‰ä¸ä½¿ç”¨éƒ½åœ¨å¤´æ–‡ä»¶ä¸­å®Œæˆã€‚ ç¤ºä¾‹ï¼šMyClass.h 1234567891011template &lt;typename T&gt;class MyClass &#123;private: T value;public: MyClass(T v) : value(v) &#123;&#125; void print() &#123; std::cout &lt;&lt; &quot;Value: &quot; &lt;&lt; value &lt;&lt; std::endl; &#125;&#125;; main.cpp 1234567891011#include &quot;MyClass.h&quot;int main() &#123; MyClass&lt;int&gt; obj1(42); MyClass&lt;double&gt; obj2(3.14); obj1.print(); obj2.print(); return 0;&#125; è¾“å‡ºï¼š 12Value: 42Value: 3.14 è¦ç‚¹ï¼š éšå¼å®ä¾‹åŒ–ä¸éœ€è¦æ˜¾å¼å£°æ˜æˆ–å®šä¹‰ã€‚ æ¨¡æ¿å®šä¹‰å¿…é¡»åœ¨ä½¿ç”¨å‰å¯è§ï¼Œé€šå¸¸é€šè¿‡å¤´æ–‡ä»¶å®ç°ã€‚ å®¹æ˜“å¯¼è‡´ç¼–è¯‘æ—¶é—´å¢åŠ ï¼Œå°¤å…¶æ˜¯å¤§å‹æ¨¡æ¿åº“ã€‚ é“¾æ¥æ—¶é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆç”±äºæ¨¡æ¿æ˜¯åœ¨ä½¿ç”¨æ—¶è¢«å®ä¾‹åŒ–ï¼Œè·¨æºæ–‡ä»¶ä½¿ç”¨æ¨¡æ¿å¯èƒ½å¯¼è‡´é“¾æ¥æ—¶é—®é¢˜ï¼Œå¦‚é‡å¤å®šä¹‰æˆ–æœªå®šä¹‰å¼•ç”¨ã€‚ è§£å†³æ–¹æ¡ˆï¼š å†…è”å®ç°ï¼šå°†æ¨¡æ¿çš„å®šä¹‰ä¸å£°æ˜ä¸€èµ·æ”¾åœ¨å¤´æ–‡ä»¶ä¸­ï¼Œé¿å…é“¾æ¥æ—¶é‡å¤å®šä¹‰ã€‚ æ˜¾å¼å®ä¾‹åŒ–ï¼šå°†å¸¸ç”¨çš„æ¨¡æ¿å®ä¾‹åŒ–æ”¾åœ¨æºæ–‡ä»¶ä¸­ï¼Œå…¶ä»–æºæ–‡ä»¶é€šè¿‡ extern æˆ–å¤´æ–‡ä»¶å¼•ç”¨å·²æœ‰å®ä¾‹ã€‚ ä½¿ç”¨ extern templateï¼šå‘ŠçŸ¥ç¼–è¯‘å™¨æŸäº›æ¨¡æ¿å®ä¾‹å·²åœ¨å…¶ä»–æºæ–‡ä»¶ä¸­æ˜¾å¼å®ä¾‹åŒ–ã€‚ ç¤ºä¾‹ï¼šä½¿ç”¨ extern templateMyClass.h 12345678template &lt;typename T&gt;class MyClass &#123; // ... å£°æ˜&#125;;// å£°æ˜å¤–éƒ¨å®ä¾‹åŒ–extern template class MyClass&lt;int&gt;;extern template class MyClass&lt;double&gt;; MyClass.cpp 12345#include &quot;MyClass.h&quot;// å®šä¹‰ï¼ˆå®ä¾‹åŒ–ï¼‰template class MyClass&lt;int&gt;;template class MyClass&lt;double&gt;; main.cpp 12345678#include &quot;MyClass.h&quot;int main() &#123; MyClass&lt;int&gt; obj1(42); // ä½¿ç”¨å¤–éƒ¨å®ä¾‹åŒ– MyClass&lt;double&gt; obj2(3.14); // ä½¿ç”¨å¤–éƒ¨å®ä¾‹åŒ– return 0;&#125; è¦ç‚¹ï¼š ä½¿ç”¨ extern template å£°æ˜å·²åœ¨å…¶ä»–æºæ–‡ä»¶ä¸­å®ä¾‹åŒ–çš„æ¨¡æ¿ã€‚ å‡å°‘ç¼–è¯‘æ—¶é—´å’Œé“¾æ¥å¤§å°ï¼Œé˜²æ­¢é‡å¤å®šä¹‰ã€‚ æœ€ä½³å®è·µä¸æ³¨æ„äº‹é¡¹æŒæ¡æ¨¡æ¿çš„æœ€ä½³å®è·µæœ‰åŠ©äºç¼–å†™é«˜æ•ˆã€å¯ç»´æŠ¤çš„ä»£ç ï¼ŒåŒæ—¶é¿å…å¸¸è§çš„é™·é˜±å’Œé—®é¢˜ã€‚ æ¨¡æ¿å®šä¹‰ä¸å®ç°åˆ†ç¦»å¯¹äºç±»æ¨¡æ¿ï¼Œé€šå¸¸å°†æ¨¡æ¿çš„å£°æ˜å’Œå®šä¹‰æ”¾åœ¨åŒä¸€å¤´æ–‡ä»¶ä¸­ï¼Œä»¥ç¡®ä¿ç¼–è¯‘å™¨åœ¨å®ä¾‹åŒ–æ¨¡æ¿æ—¶èƒ½å¤Ÿçœ‹åˆ°å®Œæ•´çš„å®šä¹‰ã€‚å°½ç®¡å¯ä»¥å°è¯•å°†æ¨¡æ¿å®šä¹‰åˆ†ç¦»åˆ°æºæ–‡ä»¶ï¼Œä½†éœ€è¦ç»“åˆæ˜¾å¼å®ä¾‹åŒ–ï¼Œè¿™ä¼šå¢åŠ å¤æ‚æ€§ï¼Œä¸”ä¸é€‚ç”¨äºå¹¿æ³›ä½¿ç”¨çš„æ¨¡æ¿ã€‚ æ¨èåšæ³•ï¼š ç±»æ¨¡æ¿ï¼šå°†å£°æ˜å’Œå®ç°ç»Ÿä¸€åœ¨å¤´æ–‡ä»¶ä¸­ã€‚ å‡½æ•°æ¨¡æ¿ï¼šåŒæ ·å°†å£°æ˜å’Œå®ç°ç»Ÿä¸€åœ¨å¤´æ–‡ä»¶ä¸­ï¼Œæˆ–ä½¿ç”¨æ˜¾å¼å®ä¾‹åŒ–ã€‚ é¿å…è¿‡åº¦æ¨¡æ¿åŒ–è™½ç„¶æ¨¡æ¿æä¾›äº†æå¤§çš„çµæ´»æ€§ï¼Œä½†è¿‡åº¦å¤æ‚çš„æ¨¡æ¿ä¼šå¯¼è‡´ä»£ç éš¾ä»¥ç†è§£ã€ç»´æŠ¤å’Œç¼–è¯‘æ—¶é—´å¢åŠ ã€‚ å»ºè®®ï¼š åªåœ¨å¿…è¦æ—¶ä½¿ç”¨æ¨¡æ¿ã€‚ ä¿æŒæ¨¡æ¿çš„ç®€å•æ€§å’Œå¯è¯»æ€§ï¼Œé¿å…è¿‡åº¦åµŒå¥—å’Œå¤æ‚çš„ç‰¹åŒ–ã€‚ åˆç†ä½¿ç”¨ç±»å‹ç‰¹æ€§å’Œ Concepts è¿›è¡Œçº¦æŸã€‚ æé«˜ç¼–è¯‘é€Ÿåº¦çš„æ–¹æ³•æ¨¡æ¿çš„å¹¿æ³›ä½¿ç”¨å¯èƒ½å¯¼è‡´ç¼–è¯‘æ—¶é—´æ˜¾è‘—å¢åŠ ã€‚ä»¥ä¸‹æ–¹æ³•æœ‰åŠ©äºä¼˜åŒ–ç¼–è¯‘é€Ÿåº¦ï¼š é¢„ç¼–è¯‘å¤´æ–‡ä»¶ï¼ˆPrecompiled Headersï¼‰ï¼šå°†é¢‘ç¹ä½¿ç”¨çš„æ¨¡æ¿åº“æ”¾å…¥é¢„ç¼–è¯‘å¤´ä¸­ï¼ŒåŠ é€Ÿç¼–è¯‘ã€‚ æ˜¾å¼å®ä¾‹åŒ–ï¼šé€šè¿‡æ˜¾å¼å®ä¾‹åŒ–å‡å°‘æ¨¡æ¿çš„é‡å¤ç¼–è¯‘ã€‚ æ¨¡å—åŒ–ç¼–ç¨‹ï¼ˆC++20 Modulesï¼‰ï¼šåˆ©ç”¨æ¨¡å—åŒ–å°†æ¨¡æ¿åº“è¿›è¡Œç¼–è¯‘å’Œé“¾æ¥ï¼Œå‡å°‘ç¼–è¯‘æ—¶é—´ã€‚ åˆç†åˆ†å‰²å¤´æ–‡ä»¶ï¼šé¿å…å¤´æ–‡ä»¶ä¸­çš„æ¨¡æ¿å®šä¹‰è¿‡å¤§ï¼Œåˆ†å‰²æˆè¾ƒå°çš„æ¨¡å—ã€‚ ä»£ç å¤ç”¨ä¸åº“è®¾è®¡æ¨¡æ¿æ˜¯å®ç°é«˜åº¦å¤ç”¨åº“ç»„ä»¶çš„æœ‰æ•ˆæ‰‹æ®µï¼Œå¦‚æ ‡å‡†åº“ï¼ˆstd::vectorã€std::map ç­‰ï¼‰å¹¿æ³›ä½¿ç”¨æ¨¡æ¿ã€‚è®¾è®¡æ¨¡æ¿åº“æ—¶ï¼Œéœ€è€ƒè™‘ä»¥ä¸‹å› ç´ ï¼š æ¥å£çš„ä¸€è‡´æ€§ï¼šä¿æŒæ¨¡æ¿åº“çš„æ¥å£ç®€æ´ã€ä¸€è‡´ï¼Œä¾¿äºä½¿ç”¨è€…ç†è§£å’Œä½¿ç”¨ã€‚ æ–‡æ¡£ä¸ç¤ºä¾‹ï¼šæä¾›è¯¦ç»†çš„æ–‡æ¡£å’Œç¤ºä¾‹ä»£ç ï¼Œå¸®åŠ©ä½¿ç”¨è€…ç†è§£æ¨¡æ¿åº“çš„ç”¨æ³•ã€‚ é”™è¯¯ä¿¡æ¯å‹å¥½ï¼šé€šè¿‡ Conceptsã€SFINAE ç­‰æœºåˆ¶æä¾›æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯ï¼Œé™ä½ä½¿ç”¨é—¨æ§›ã€‚ æ€§èƒ½ä¼˜åŒ–ï¼šåˆ©ç”¨æ¨¡æ¿çš„ç¼–è¯‘æœŸè®¡ç®—å’Œå†…è”ç­‰ç‰¹æ€§ï¼Œæé«˜åº“ç»„ä»¶çš„æ€§èƒ½ã€‚ é¿å…æ¨¡æ¿é”™è¯¯çš„å›°æƒ‘æ¨¡æ¿é”™è¯¯é€šå¸¸å¤æ‚ä¸”éš¾ä»¥ç†è§£ï¼Œä»¥ä¸‹æ–¹æ³•æœ‰åŠ©äºå‡å°‘æ¨¡æ¿é”™è¯¯çš„å›°æƒ‘ï¼š é€æ­¥è°ƒè¯•ï¼šä»ç®€å•çš„æ¨¡æ¿å¼€å§‹ï¼Œé€æ­¥å¢åŠ å¤æ‚æ€§ï¼Œä¾¿äºå®šä½é”™è¯¯ã€‚ ä½¿ç”¨ç¼–è¯‘å™¨è­¦å‘Šä¸å·¥å…·ï¼šå¼€å¯ç¼–è¯‘å™¨çš„è­¦å‘Šé€‰é¡¹ï¼Œä½¿ç”¨é™æ€åˆ†æå·¥å…·æ£€æµ‹æ¨¡æ¿ä»£ç ä¸­çš„é—®é¢˜ã€‚ ä»£ç æ³¨é‡Šä¸æ–‡æ¡£ï¼šè¯¦ç»†æ³¨é‡Šå¤æ‚çš„æ¨¡æ¿ä»£ç ï¼Œæä¾›æ–‡æ¡£è¯´æ˜å…¶è®¾è®¡å’Œç”¨é€”ã€‚ æ€»ç»“C++ æ¨¡æ¿æœºåˆ¶æ˜¯å®ç°æ³›å‹ç¼–ç¨‹çš„æ ¸å¿ƒå·¥å…·ï¼Œé€šè¿‡ç±»å‹å‚æ•°åŒ–å’Œç¼–è¯‘æœŸè®¡ç®—ï¼Œæå¤§åœ°æå‡äº†ä»£ç çš„å¤ç”¨æ€§ã€çµæ´»æ€§å’Œæ€§èƒ½ã€‚ä»åŸºç¡€çš„å‡½æ•°æ¨¡æ¿å’Œç±»æ¨¡æ¿ï¼Œåˆ°é«˜çº§çš„æ¨¡æ¿ç‰¹åŒ–ã€å˜å‚æ¨¡æ¿ã€æ¨¡æ¿å…ƒç¼–ç¨‹ã€SFINAE å’Œ Conceptsï¼ŒæŒæ¡æ¨¡æ¿çš„å„ä¸ªæ–¹é¢èƒ½å¤Ÿå¸®åŠ©å¼€å‘è€…ç¼–å†™æ›´é«˜æ•ˆã€æ›´åŠ é€šç”¨çš„ C++ ä»£ç ã€‚ åœ¨å®é™…åº”ç”¨ä¸­ï¼Œåˆç†è¿ç”¨æ¨¡æ¿ä¸ä»…å¯ä»¥ç®€åŒ–ä»£ç ç»“æ„ï¼Œè¿˜å¯ä»¥æé«˜ä»£ç çš„å¯ç»´æŠ¤æ€§å’Œå¯æ‰©å±•æ€§ã€‚ç„¶è€Œï¼Œæ¨¡æ¿çš„å¤æ‚æ€§ä¹Ÿè¦æ±‚å¼€å‘è€…å…·å¤‡æ‰å®çš„ C++ åŸºç¡€å’Œè‰¯å¥½çš„ç¼–ç¨‹ä¹ æƒ¯ï¼Œä»¥é¿å…è¿‡åº¦å¤æ‚åŒ–å’Œéš¾ä»¥è°ƒè¯•çš„é—®é¢˜ã€‚ é€šè¿‡æœ¬æ•™æ¡ˆçš„ç³»ç»Ÿå­¦ä¹ ï¼Œç›¸ä¿¡æ‚¨å·²ç»å…·å¤‡äº†å…¨é¢ç†è§£å’Œè¿ç”¨ C++ æ¨¡æ¿çš„èƒ½åŠ›ï¼Œèƒ½å¤Ÿåœ¨å®é™…é¡¹ç›®ä¸­é«˜æ•ˆåœ°åˆ©ç”¨æ¨¡æ¿ç‰¹æ€§ï¼Œç¼–å†™å‡ºæ›´ä¸ºä¼˜ç§€çš„ä»£ç ã€‚ ç»ƒä¹ ä¸ä¹ é¢˜ç»ƒä¹  1ï¼šå®ç°ä¸€ä¸ªé€šç”¨çš„ Swap å‡½æ•°æ¨¡æ¿è¦æ±‚ï¼š ç¼–å†™ä¸€ä¸ªå‡½æ•°æ¨¡æ¿ swapValuesï¼Œå¯ä»¥äº¤æ¢ä»»æ„ç±»å‹çš„ä¸¤ä¸ªå˜é‡ã€‚ åœ¨ main å‡½æ•°ä¸­æµ‹è¯• intã€doubleã€std::string ç±»å‹çš„äº¤æ¢ã€‚ æç¤ºï¼š 1234template &lt;typename T&gt;void swapValues(T&amp; a, T&amp; b) &#123; // å®ç°äº¤æ¢é€»è¾‘&#125; ç»ƒä¹  2ï¼šå®ç°ä¸€ä¸ªæ¨¡æ¿ç±» Tripleï¼Œå­˜å‚¨ä¸‰ä¸ªç›¸åŒç±»å‹çš„å€¼ï¼Œå¹¶æä¾›è·å–å„ä¸ªæˆå‘˜çš„å‡½æ•°ã€‚è¦æ±‚ï¼š æ¨¡æ¿å‚æ•°ä¸ºç±»å‹ Tã€‚ æä¾›æ„é€ å‡½æ•°ã€æˆå‘˜å˜é‡åŠè®¿é—®å‡½æ•°ã€‚ åœ¨ main ä¸­å®ä¾‹åŒ– Triple&lt;int&gt; å’Œ Triple&lt;std::string&gt;ï¼Œè¿›è¡Œæµ‹è¯•ã€‚ ç»ƒä¹  3ï¼šä½¿ç”¨æ¨¡æ¿ç‰¹åŒ–ï¼Œä¸ºç±»æ¨¡æ¿ Printer æä¾›é’ˆå¯¹ bool ç±»å‹çš„å…¨ç‰¹åŒ–ï¼Œå®ç°ä¸“é—¨çš„è¾“å‡ºæ ¼å¼ã€‚è¦æ±‚ï¼š é€šç”¨æ¨¡æ¿ç±» Printerï¼Œå…·æœ‰ print å‡½æ•°ï¼Œè¾“å‡º â€œGeneral Printer: valueâ€ã€‚ å…¨ç‰¹åŒ– Printer&lt;bool&gt;ï¼Œè¾“å‡º â€œBoolean Printer: trueâ€ æˆ– â€œBoolean Printer: falseâ€ã€‚ ç»ƒä¹  4ï¼šå®ç°ä¸€ä¸ªå˜å‚æ¨¡æ¿å‡½æ•° logMessagesï¼Œå¯ä»¥æ¥å—ä»»æ„æ•°é‡å’Œç±»å‹çš„å‚æ•°ï¼Œå¹¶ä¾æ¬¡æ‰“å°å®ƒä»¬ã€‚è¦æ±‚ï¼š ä½¿ç”¨é€’å½’æ–¹æ³•å®ç°ã€‚ åœ¨ main ä¸­æµ‹è¯•ä¸åŒå‚æ•°ç»„åˆçš„è°ƒç”¨ã€‚ ç»ƒä¹  5ï¼šç¼–å†™æ¨¡æ¿å…ƒç¼–ç¨‹ç»“æ„ IsPointer, ç”¨äºåœ¨ç¼–è¯‘æœŸåˆ¤æ–­ä¸€ä¸ªç±»å‹æ˜¯å¦ä¸ºæŒ‡é’ˆç±»å‹ã€‚è¦æ±‚ï¼š å®šä¹‰ IsPointer&lt;T&gt;ï¼ŒåŒ…å« value é™æ€å¸¸é‡æˆå‘˜ï¼Œå€¼ä¸º true æˆ– falseã€‚ ä½¿ç”¨ç‰¹åŒ–è¿›è¡Œå®ç°ã€‚ åœ¨ main ä¸­ä½¿ç”¨ static_assert è¿›è¡Œæµ‹è¯•ã€‚ ç¤ºä¾‹ï¼š 12static_assert(IsPointer&lt;int*&gt;::value, &quot;int* should be a pointer&quot;);static_assert(!IsPointer&lt;int&gt;::value, &quot;int should not be a pointer&quot;); ç»ƒä¹  6ï¼šä½¿ç”¨ SFINAEï¼Œç¼–å†™ä¸€ä¸ªå‡½æ•°æ¨¡æ¿ enableIfExampleï¼Œåªæœ‰å½“ç±»å‹ T å…·æœ‰ size() æˆå‘˜å‡½æ•°æ—¶æ‰å¯ç”¨ã€‚è¦æ±‚ï¼š ä½¿ç”¨ std::enable_if å’Œç±»å‹ç‰¹æ€§æ£€æµ‹ size() æˆå‘˜ã€‚ åœ¨ main ä¸­æµ‹è¯• std::vectorï¼ˆåº”å¯ç”¨ï¼‰å’Œ intï¼ˆä¸åº”å¯ç”¨ï¼‰ã€‚ æç¤ºï¼š 12345template &lt;typename T&gt;typename std::enable_if&lt;has_size&lt;T&gt;::value&gt;::typeenableIfExample(const T&amp; container) &#123; std::cout &lt;&lt; &quot;Size: &quot; &lt;&lt; container.size() &lt;&lt; std::endl;&#125; ç»ƒä¹  7ï¼šä½¿ç”¨ C++20 Conceptsï¼Œå®šä¹‰ä¸€ä¸ª Concept Integralï¼Œè¦æ±‚ç±»å‹å¿…é¡»æ˜¯æ•´å‹ï¼Œå¹¶ä½¿ç”¨è¯¥ Concept çº¦æŸä¸€ä¸ªå‡½æ•°æ¨¡æ¿ isEvenï¼Œåˆ¤æ–­ä¼ å…¥çš„æ•´æ•°æ˜¯å¦ä¸ºå¶æ•°ã€‚è¦æ±‚ï¼š å®šä¹‰ Integral Conceptã€‚ ç¼–å†™å‡½æ•°æ¨¡æ¿ isEven(u)ï¼Œä»…æ¥å—æ»¡è¶³ Integral çš„ç±»å‹ã€‚ åœ¨ main ä¸­æµ‹è¯•ä¸åŒç±»å‹çš„è°ƒç”¨ã€‚ ç¤ºä¾‹ï¼š 1234template &lt;Integral T&gt;bool isEven(T value) &#123; return value % 2 == 0;&#125; ç»ƒä¹  8ï¼šå®ç°ä¸€ä¸ªå›ºå®šå¤§å°çš„æ ˆï¼ˆFixedStackï¼‰ç±»æ¨¡æ¿ï¼Œæ”¯æŒå¤šç§æ•°æ®ç±»å‹å’ŒæŒ‡å®šå¤§å°ã€‚ä½¿ç”¨éç±»å‹æ¨¡æ¿å‚æ•°æŒ‡å®šæ ˆçš„å¤§å°ã€‚è¦æ±‚ï¼š æ¨¡æ¿å‚æ•°ä¸ºç±»å‹ T å’Œ std::size_t Nã€‚ æä¾› push, pop, top ç­‰æˆå‘˜å‡½æ•°ã€‚ åœ¨ main ä¸­æµ‹è¯• FixedStack&lt;int, 5&gt; å’Œ FixedStack&lt;std::string, 3&gt;ã€‚ ç»ƒä¹  9ï¼šå®ç°ä¸€ä¸ªæ¨¡æ¿ç±» TypeIdentityï¼Œå…¶æˆå‘˜ç±»å‹ type ç­‰åŒäºæ¨¡æ¿å‚æ•° Tã€‚å¹¶ä½¿ç”¨ static_assert æ£€æŸ¥ç±»å‹å…³ç³»ã€‚è¦æ±‚ï¼š å®šä¹‰ TypeIdentity&lt;T&gt;ï¼ŒåŒ…å«ç±»å‹æˆå‘˜ typeã€‚ ä½¿ç”¨ std::is_same ä¸ static_assert éªŒè¯ã€‚ ç¤ºä¾‹ï¼š 1static_assert(std::is_same&lt;TypeIdentity&lt;int&gt;::type, int&gt;::value, &quot;TypeIdentity&lt;int&gt; should be int&quot;); ç»ƒä¹  10ï¼šç¼–å†™ä¸€ä¸ªæ¨¡æ¿å…ƒç¼–ç¨‹ç»“æ„ LengthOf, ç”¨äºåœ¨ç¼–è¯‘æœŸè®¡ç®—ç±»å‹åˆ—è¡¨çš„é•¿åº¦ã€‚è¦æ±‚ï¼š ä½¿ç”¨ TypeList æ¨¡æ¿å®šä¹‰ç±»å‹åˆ—è¡¨ã€‚ å®šä¹‰ LengthOf&lt;TypeList&lt;...&gt;&gt;::value è¡¨ç¤ºç±»å‹åˆ—è¡¨çš„é•¿åº¦ã€‚ åœ¨ main ä¸­ä½¿ç”¨ static_assert è¿›è¡Œæµ‹è¯•ã€‚ æç¤ºï¼š 12345678910template &lt;typename... Types&gt;struct TypeList &#123;&#125;;template &lt;typename List&gt;struct LengthOf;template &lt;typename... Types&gt;struct LengthOf&lt;TypeList&lt;Types...&gt;&gt; &#123; static constexpr std::size_t value = sizeof...(Types);&#125;; é€šè¿‡ä¸Šè¿°å†…å®¹åŠç»ƒä¹ ï¼Œç›¸ä¿¡æ‚¨å·²å…¨é¢æŒæ¡äº† C++ æ¨¡æ¿çš„å„ä¸ªæ–¹é¢ã€‚ä»åŸºç¡€æ¦‚å¿µåˆ°é«˜çº§æŠ€æœ¯ï¼Œæ¨¡æ¿ä¸º C++ ç¼–ç¨‹æä¾›äº†å¼ºå¤§çš„å·¥å…·ã€‚æŒç»­ç»ƒä¹ ä¸åº”ç”¨ï¼Œå°†è¿›ä¸€æ­¥å·©å›ºæ‚¨çš„æ¨¡æ¿ç¼–ç¨‹èƒ½åŠ›ã€‚","link":"","tags":[]},{"title":"C++ æ™ºèƒ½æŒ‡é’ˆè¯¦è§£ï¼šshared_ptr, auto_ptr å’Œ weak_ptr","date":"2025-09-23T02:44:23.000Z","path":"2025/09/23/C-æ™ºèƒ½æŒ‡é’ˆè¯¦è§£ï¼šshared-ptr-auto-ptr-å’Œ-weak-ptr/","text":"C++ æ™ºèƒ½æŒ‡é’ˆè¯¦è§£ï¼šshared_ptr, auto_ptr å’Œ weak_ptr1. shared_ptrï¼šå…±äº«æ‰€æœ‰æƒæ™ºèƒ½æŒ‡é’ˆ1.1 æ ¸å¿ƒæ¦‚å¿µä¸å®šä¹‰1.1.1 ä»€ä¹ˆæ˜¯ shared_ptrstd::shared_ptr æ˜¯ C++11 å¼•å…¥çš„å…±äº«æ‰€æœ‰æƒæ™ºèƒ½æŒ‡é’ˆï¼Œå®ƒé€šè¿‡å¼•ç”¨è®¡æ•°ï¼ˆReference Countingï¼‰ æœºåˆ¶å®ç°å¤šä¸ªæ™ºèƒ½æŒ‡é’ˆå…±äº«åŒä¸€ä¸ªå¯¹è±¡çš„æ‰€æœ‰æƒã€‚ä¸ unique_ptr çš„ç‹¬å æ‰€æœ‰æƒä¸åŒï¼Œshared_ptr å…è®¸å¤šä¸ªæŒ‡é’ˆå®ä¾‹å…±åŒç®¡ç†åŒä¸€ä¸ªåŠ¨æ€åˆ†é…çš„å¯¹è±¡ã€‚ &#x3D;ã€ã€ã€ã€ã€ã€ã€ã€ã€ã€ã€ã€ã€ã€ã€ã€ã€ã€ã€ã€ã€ã€ã€ã€ã€ã€ã€ã€ã€ã€ã€ã€ã€ã€ã€ã€ã€å½“æœ€åä¸€ä¸ªæŒ‡å‘å¯¹è±¡çš„ shared_ptr è¢«é”€æ¯æˆ–é‡ç½®æ—¶ï¼Œå¯¹è±¡æ‰ä¼šè¢«è‡ªåŠ¨åˆ é™¤ã€‚è¿™ç§æœºåˆ¶ä½¿å¾— shared_ptr åœ¨éœ€è¦å…±äº«èµ„æºçš„åœºæ™¯ä¸‹éå¸¸æœ‰ç”¨ã€‚ 1.1.2 å…±äº«æ‰€æœ‰æƒè¯­ä¹‰shared_ptr çš„æ ¸å¿ƒæ˜¯å…±äº«æ‰€æœ‰æƒæ¨¡å‹ã€‚å¤šä¸ª shared_ptr å®ä¾‹å¯ä»¥æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡ï¼Œå®ƒä»¬é€šè¿‡å†…éƒ¨çš„å¼•ç”¨è®¡æ•°å™¨æ¥è·Ÿè¸ªæœ‰å¤šå°‘ä¸ª shared_ptr æ­£åœ¨å…±äº«è¯¥å¯¹è±¡ã€‚ 1234std::shared_ptr&lt;int&gt; ptr1(new int(42));std::shared_ptr&lt;int&gt; ptr2 = ptr1; // å¼•ç”¨è®¡æ•°å˜ä¸º 2std::shared_ptr&lt;int&gt; ptr3 = ptr2; // å¼•ç”¨è®¡æ•°å˜ä¸º 3// å½“ ptr1, ptr2, ptr3 éƒ½è¢«é”€æ¯æ—¶ï¼Œå¯¹è±¡æ‰ä¼šè¢«åˆ é™¤ 1.1.3 å¼•ç”¨è®¡æ•°æœºåˆ¶å¼•ç”¨è®¡æ•°æ˜¯ shared_ptr çš„æ ¸å¿ƒå®ç°æœºåˆ¶ï¼š å½“æ–°çš„ shared_ptr æŒ‡å‘ç°æœ‰å¯¹è±¡æ—¶ï¼Œå¼•ç”¨è®¡æ•°å¢åŠ  å½“ shared_ptr è¢«é”€æ¯æˆ–æŒ‡å‘æ–°å¯¹è±¡æ—¶ï¼Œå¼•ç”¨è®¡æ•°å‡å°‘ å½“å¼•ç”¨è®¡æ•°é™ä¸º 0 æ—¶ï¼Œå¯¹è±¡è¢«è‡ªåŠ¨åˆ é™¤ 1.2 å†…éƒ¨å®ç°ä¸æ§åˆ¶å—1.2.1 æ§åˆ¶å—ï¼ˆControl Blockï¼‰ç»“æ„shared_ptr çš„å†…éƒ¨å®ç°æ¯” unique_ptr å¤æ‚ï¼Œå®ƒåŒ…å«ä¸¤ä¸ªæŒ‡é’ˆï¼š æŒ‡å‘ç®¡ç†å¯¹è±¡çš„æŒ‡é’ˆ æŒ‡å‘æ§åˆ¶å—çš„æŒ‡é’ˆ æ§åˆ¶å—åŒ…å«ï¼š å¼•ç”¨è®¡æ•°å™¨ï¼ˆuse countï¼‰ å¼±å¼•ç”¨è®¡æ•°å™¨ï¼ˆweak countï¼‰ åˆ é™¤å™¨ï¼ˆdeleterï¼‰ åˆ†é…å™¨ï¼ˆallocatorï¼‰ 1234567template&lt;typename T&gt;struct control_block &#123; std::atomic&lt;long&gt; use_count; std::atomic&lt;long&gt; weak_count; void(*deleter)(T*); T* managed_object;&#125;; 1.2.2 å¼•ç”¨è®¡æ•°çš„åŸå­æ“ä½œä¸ºäº†ä¿è¯çº¿ç¨‹å®‰å…¨ï¼Œshared_ptr çš„å¼•ç”¨è®¡æ•°æ“ä½œå¿…é¡»æ˜¯åŸå­çš„ï¼š 123456789101112131415// è¿‘ä¼¼å®ç°void increment_ref_count() &#123; use_count.fetch_add(1, std::memory_order_relaxed);&#125;void decrement_ref_count() &#123; if (use_count.fetch_sub(1, std::memory_order_acq_rel) == 1) &#123; // æœ€åä¸€ä¸ª shared_ptrï¼Œåˆ é™¤å¯¹è±¡ deleter(managed_object); // å¦‚æœ weak_count ä¹Ÿä¸º 0ï¼Œåˆ é™¤æ§åˆ¶å— if (weak_count.load() == 0) &#123; delete this; &#125; &#125;&#125; 1.3 å¸¸ç”¨æ¥å£ä¸ç”¨æ³•1.3.1 æ„é€ ä¸ææ„1234567891011// å¤šç§æ„é€ æ–¹å¼std::shared_ptr&lt;int&gt; p1(new int(42));std::shared_ptr&lt;int&gt; p2 = std::make_shared&lt;int&gt;(42); // æ¨èæ–¹å¼std::shared_ptr&lt;int&gt; p3 = p1; // æ‹·è´æ„é€ ï¼Œå¼•ç”¨è®¡æ•°+1// è‡ªå®šä¹‰åˆ é™¤å™¨auto deleter = [](int* p) &#123; std::cout &lt;&lt; &quot;Deleting int\\n&quot;; delete p; &#125;;std::shared_ptr&lt;int&gt; p4(new int(42), deleter); 1.3.2 æ‰€æœ‰æƒç®¡ç†æ¥å£123456789101112131415std::shared_ptr&lt;MyClass&gt; ptr = std::make_shared&lt;MyClass&gt;();// è·å–åŸå§‹æŒ‡é’ˆï¼ˆä¸å¢åŠ å¼•ç”¨è®¡æ•°ï¼‰MyClass* raw_ptr = ptr.get();// é‡ç½®æŒ‡é’ˆptr.reset(new MyClass()); // åŸå¯¹è±¡å¼•ç”¨è®¡æ•°-1ï¼Œç®¡ç†æ–°å¯¹è±¡ptr.reset(); // å˜ä¸ºç©ºæŒ‡é’ˆ// äº¤æ¢ä¸¤ä¸ª shared_ptrstd::shared_ptr&lt;MyClass&gt; ptr2 = std::make_shared&lt;MyClass&gt;();ptr.swap(ptr2);// è·å–å¼•ç”¨è®¡æ•°long count = ptr.use_count(); // æ³¨æ„ï¼šå¤šçº¿ç¨‹ç¯å¢ƒä¸‹ä»…ä¾›å‚è€ƒ 1.3.3 æ“ä½œç¬¦é‡è½½123456789101112131415std::shared_ptr&lt;MyClass&gt; ptr = std::make_shared&lt;MyClass&gt;();// è§£å¼•ç”¨æ“ä½œ(*ptr).member_function();ptr-&gt;member_function();// å¸ƒå°”è½¬æ¢if (ptr) &#123; // ptr ä¸ä¸ºç©º&#125;// æ¯”è¾ƒæ“ä½œif (ptr == ptr2) &#123; // æŒ‡å‘åŒä¸€å¯¹è±¡&#125; 1.4 æ€§èƒ½ç‰¹ç‚¹ä¸å¼€é”€1.4.1 å†…å­˜å¼€é”€ æ§åˆ¶å—å¼€é”€ï¼šæ¯ä¸ªè¢«ç®¡ç†çš„å¯¹è±¡éƒ½æœ‰ä¸€ä¸ªæ§åˆ¶å— æŒ‡é’ˆå¼€é”€ï¼šshared_ptr æœ¬èº«åŒ…å«ä¸¤ä¸ªæŒ‡é’ˆï¼ˆå¯¹è±¡æŒ‡é’ˆå’Œæ§åˆ¶å—æŒ‡é’ˆï¼‰ æ€»å¤§å°ï¼šé€šå¸¸æ˜¯åŸå§‹æŒ‡é’ˆçš„ä¸¤å€å¤§å° 1.4.2 è¿è¡Œæ—¶å¼€é”€ åŸå­æ“ä½œï¼šå¼•ç”¨è®¡æ•°çš„å¢å‡éœ€è¦åŸå­æ“ä½œï¼Œæœ‰æ€§èƒ½å¼€é”€ æ§åˆ¶å—åˆ†é…ï¼šéœ€è¦é¢å¤–çš„å†…å­˜åˆ†é…ï¼ˆé™¤éä½¿ç”¨ make_sharedï¼‰ 1.4.3 make_shared çš„ä¼˜åŠ¿12345// ä¼ ç»Ÿæ–¹å¼ï¼šä¸¤æ¬¡å†…å­˜åˆ†é…ï¼ˆå¯¹è±¡ + æ§åˆ¶å—ï¼‰std::shared_ptr&lt;MyClass&gt; p1(new MyClass());// make_sharedï¼šä¸€æ¬¡å†…å­˜åˆ†é…ï¼ˆå¯¹è±¡å’Œæ§åˆ¶å—åœ¨ä¸€èµ·ï¼‰std::shared_ptr&lt;MyClass&gt; p2 = std::make_shared&lt;MyClass&gt;(); make_shared å°†å¯¹è±¡å’Œæ§åˆ¶å—åˆ†é…åœ¨è¿ç»­å†…å­˜ä¸­ï¼Œæé«˜äº†ç¼“å­˜å±€éƒ¨æ€§å¹¶å‡å°‘äº†ä¸€æ¬¡å†…å­˜åˆ†é…ã€‚ 1.5 å®é™…åº”ç”¨åœºæ™¯1.5.1 å…±äº«èµ„æºç®¡ç†1234567891011121314151617class Resource &#123;public: void use() &#123; std::cout &lt;&lt; &quot;Using resource\\n&quot;; &#125;&#125;;class User &#123;private: std::shared_ptr&lt;Resource&gt; resource_;public: User(std::shared_ptr&lt;Resource&gt; res) : resource_(res) &#123;&#125; void doWork() &#123; resource_-&gt;use(); &#125;&#125;;// å¤šä¸ªç”¨æˆ·å…±äº«åŒä¸€èµ„æºauto resource = std::make_shared&lt;Resource&gt;();User user1(resource);User user2(resource); // å…±äº«åŒä¸€èµ„æº 1.5.2 ç¼“å­˜ç³»ç»Ÿ12345678910111213141516class Cache &#123;private: std::unordered_map&lt;std::string, std::shared_ptr&lt;Data&gt;&gt; cache_;public: std::shared_ptr&lt;Data&gt; get(const std::string&amp; key) &#123; auto it = cache_.find(key); if (it != cache_.end()) &#123; return it-&gt;second; // è¿”å›å…±äº«æŒ‡é’ˆï¼Œå»¶é•¿ç”Ÿå‘½å‘¨æœŸ &#125; return nullptr; &#125; void put(const std::string&amp; key, std::shared_ptr&lt;Data&gt; data) &#123; cache_[key] = data; &#125;&#125;; 2. weak_ptrï¼šå¼±å¼•ç”¨æ™ºèƒ½æŒ‡é’ˆ2.1 æ ¸å¿ƒæ¦‚å¿µä¸å®šä¹‰2.1.1 ä»€ä¹ˆæ˜¯ weak_ptrstd::weak_ptr æ˜¯ä¸€ç§ä¸æ§åˆ¶å¯¹è±¡ç”Ÿå‘½å‘¨æœŸçš„æ™ºèƒ½æŒ‡é’ˆï¼Œå®ƒæ˜¯å¯¹ç”± shared_ptr ç®¡ç†çš„å¯¹è±¡çš„å¼±å¼•ç”¨ã€‚weak_ptr ä¸ä¼šå¢åŠ å¯¹è±¡çš„å¼•ç”¨è®¡æ•°ï¼Œå› æ­¤ä¸ä¼šé˜»æ­¢å¯¹è±¡çš„é”€æ¯ã€‚ 2.1.2 å¼±å¼•ç”¨è¯­ä¹‰weak_ptr çš„ä¸»è¦ç”¨é€”æ˜¯æ‰“ç ´ shared_ptr çš„å¾ªç¯å¼•ç”¨é—®é¢˜ã€‚å®ƒå…è®¸è§‚å¯Ÿä¸€ä¸ªå¯¹è±¡è€Œä¸å½±å“å…¶ç”Ÿå‘½å‘¨æœŸã€‚ 12345678std::shared_ptr&lt;MyClass&gt; shared = std::make_shared&lt;MyClass&gt;();std::weak_ptr&lt;MyClass&gt; weak = shared; // ä¸å¢åŠ å¼•ç”¨è®¡æ•°// å¯¹è±¡å¯èƒ½å·²è¢«é”€æ¯ï¼Œéœ€è¦æ£€æŸ¥if (auto locked = weak.lock()) &#123; // å¯¹è±¡è¿˜å­˜åœ¨ï¼Œå¯ä»¥å®‰å…¨ä½¿ç”¨ locked-&gt;doSomething();&#125; 2.2 å†…éƒ¨å®ç°æœºåˆ¶2.2.1 ä¸æ§åˆ¶å—çš„äº¤äº’weak_ptr å†…éƒ¨ä¹ŸåŒ…å«æŒ‡å‘æ§åˆ¶å—çš„æŒ‡é’ˆï¼Œä½†å®ƒåªæ“ä½œå¼±å¼•ç”¨è®¡æ•°ï¼š 123456789101112131415161718192021222324template&lt;typename T&gt;class weak_ptr &#123;private: T* ptr_; control_block* cb_; public: // æ„é€ æ—¶å¢åŠ å¼±å¼•ç”¨è®¡æ•° weak_ptr(const shared_ptr&lt;T&gt;&amp; other) : ptr_(other.ptr_), cb_(other.cb_) &#123; if (cb_) cb_-&gt;weak_count.fetch_add(1); &#125; // ææ„æ—¶å‡å°‘å¼±å¼•ç”¨è®¡æ•° ~weak_ptr() &#123; if (cb_) &#123; if (cb_-&gt;weak_count.fetch_sub(1) == 1) &#123; // å¼±å¼•ç”¨è®¡æ•°ä¸º0ï¼Œä½†å¼ºå¼•ç”¨è®¡æ•°å¯èƒ½ä¸ä¸º0 if (cb_-&gt;use_count.load() == 0) &#123; delete cb_; // å¼ºå¼•ç”¨å’Œå¼±å¼•ç”¨éƒ½ä¸º0ï¼Œåˆ é™¤æ§åˆ¶å— &#125; &#125; &#125; &#125;&#125;; 2.3 å¸¸ç”¨æ¥å£ä¸ç”¨æ³•2.3.1 åŸºæœ¬æ“ä½œ12345678910111213141516std::shared_ptr&lt;MyClass&gt; shared = std::make_shared&lt;MyClass&gt;();std::weak_ptr&lt;MyClass&gt; weak = shared;// æ£€æŸ¥å¯¹è±¡æ˜¯å¦è¿˜å­˜åœ¨if (!weak.expired()) &#123; // å°è¯•è·å– shared_ptr if (auto locked = weak.lock()) &#123; locked-&gt;doSomething(); &#125;&#125;// ç›´æ¥è·å– shared_ptrï¼ˆå¦‚æœå¯¹è±¡å·²é”€æ¯åˆ™è¿”å›ç©ºï¼‰std::shared_ptr&lt;MyClass&gt; locked = weak.lock();if (locked) &#123; // å®‰å…¨ä½¿ç”¨&#125; 2.3.2 è§£å†³å¾ªç¯å¼•ç”¨é—®é¢˜123456789101112131415161718class Node &#123;public: std::string name; // ä½¿ç”¨ weak_ptr é¿å…å¾ªç¯å¼•ç”¨ std::weak_ptr&lt;Node&gt; parent; std::vector&lt;std::shared_ptr&lt;Node&gt;&gt; children; Node(const std::string&amp; n) : name(n) &#123;&#125; void addChild(std::shared_ptr&lt;Node&gt; child) &#123; children.push_back(child); child-&gt;parent = weak_from_this(); // C++17 æ–°å¢ &#125;&#125;;auto node1 = std::make_shared&lt;Node&gt;(&quot;parent&quot;);auto node2 = std::make_shared&lt;Node&gt;(&quot;child&quot;);node1-&gt;addChild(node2); // ä¸ä¼šé€ æˆå¾ªç¯å¼•ç”¨ 2.4 å®é™…åº”ç”¨åœºæ™¯2.4.1 è§‚å¯Ÿè€…æ¨¡å¼12345678910111213141516171819202122232425262728class Subject;class Observer &#123;public: virtual void update(std::weak_ptr&lt;Subject&gt; subject) = 0; virtual ~Observer() = default;&#125;;class Subject &#123;private: std::vector&lt;std::weak_ptr&lt;Observer&gt;&gt; observers_;public: void attach(std::weak_ptr&lt;Observer&gt; observer) &#123; observers_.push_back(observer); &#125; void notify() &#123; for (auto it = observers_.begin(); it != observers_.end();) &#123; if (auto observer = it-&gt;lock()) &#123; observer-&gt;update(weak_from_this()); ++it; &#125; else &#123; // è§‚å¯Ÿè€…å·²è¢«é”€æ¯ï¼Œç§»é™¤ it = observers_.erase(it); &#125; &#125; &#125;&#125;; 2.4.2 ç¼“å­˜ç³»ç»Ÿä¼˜åŒ–12345678910111213141516171819class CacheWithWeakPtr &#123;private: std::unordered_map&lt;std::string, std::weak_ptr&lt;Data&gt;&gt; cache_; mutable std::mutex mutex_; public: std::shared_ptr&lt;Data&gt; get(const std::string&amp; key) &#123; std::lock_guard&lt;std::mutex&gt; lock(mutex_); auto it = cache_.find(key); if (it != cache_.end()) &#123; if (auto data = it-&gt;second.lock()) &#123; return data; // å¯¹è±¡è¿˜å­˜åœ¨ &#125; else &#123; cache_.erase(it); // å¯¹è±¡å·²è¢«é”€æ¯ï¼Œæ¸…ç†ç¼“å­˜ &#125; &#125; return nullptr; &#125;&#125;; 3. auto_ptrï¼šå·²åºŸå¼ƒçš„æ™ºèƒ½æŒ‡é’ˆ3.1 å†å²èƒŒæ™¯ä¸è®¾è®¡ç¼ºé™·3.1.1 auto_ptr çš„èµ·æºstd::auto_ptr æ˜¯ C++98 æ ‡å‡†ä¸­å¼•å…¥çš„ç¬¬ä¸€ä¸ªæ™ºèƒ½æŒ‡é’ˆï¼Œæ—¨åœ¨æä¾›åŸºæœ¬çš„è‡ªåŠ¨å†…å­˜ç®¡ç†åŠŸèƒ½ã€‚å®ƒåœ¨å½“æ—¶æ˜¯ä¸€ä¸ªé‡è¦çš„åˆ›æ–°ï¼Œä½†åæ¥è¢«å‘ç°å­˜åœ¨ä¸¥é‡çš„è®¾è®¡ç¼ºé™·ã€‚ 3.1.2 ä¸»è¦è®¾è®¡ç¼ºé™· æœ‰é—®é¢˜çš„æ‹·è´è¯­ä¹‰ï¼šauto_ptr çš„æ‹·è´æ“ä½œä¼šè½¬ç§»æ‰€æœ‰æƒ ä¸é€‚ç”¨äºæ ‡å‡†åº“å®¹å™¨ï¼šç”±äºéå¸¸è§„çš„æ‹·è´è¯­ä¹‰ï¼Œä¸èƒ½å®‰å…¨åœ°åœ¨ STL å®¹å™¨ä¸­ä½¿ç”¨ ç¼ºä¹ç§»åŠ¨è¯­ä¹‰æ”¯æŒï¼šåœ¨ C++11 ä¹‹å‰ï¼Œæ²¡æœ‰ç§»åŠ¨è¯­ä¹‰ï¼Œå¯¼è‡´ awkward çš„æ‰€æœ‰æƒè½¬ç§» 3.2 é—®é¢˜ç¤ºä¾‹ä¸ç¼ºé™·åˆ†æ3.2.1 å±é™©çš„æ‰€æœ‰æƒè½¬ç§»12345678// C++98/03 ä¸­çš„ auto_ptrï¼ˆå·²åºŸå¼ƒï¼‰std::auto_ptr&lt;int&gt; p1(new int(42));std::auto_ptr&lt;int&gt; p2 = p1; // p1 å˜ä¸ºç©ºï¼Œæ‰€æœ‰æƒè½¬ç§»åˆ° p2// æ„å¤–è¡Œä¸ºï¼šp1 ç°åœ¨ä¸ºç©ºï¼Œä½†ä»£ç å¯èƒ½ç»§ç»­ä½¿ç”¨å®ƒif (p1.get()) &#123; // è¿™ä¸ªæ¡ä»¶ä¸º false *p1 = 100; // æœªå®šä¹‰è¡Œä¸ºï¼&#125; 3.2.2 ä¸ STL å®¹å™¨çš„ä¸å…¼å®¹123456789std::vector&lt;std::auto_ptr&lt;int&gt;&gt; vec; // å±é™©çš„ç”¨æ³•ï¼std::auto_ptr&lt;int&gt; p(new int(42));vec.push_back(p); // p çš„æ‰€æœ‰æƒè½¬ç§»åˆ° vector ä¸­// ç°åœ¨ p ä¸ºç©ºï¼Œä½†ä»£ç å¯èƒ½ä¸çŸ¥é“if (p.get()) &#123; // false // æ°¸è¿œä¸ä¼šæ‰§è¡Œ&#125; 3.3 ä» auto_ptr åˆ° unique_ptr çš„æ¼”è¿›3.3.1 ä¸ºä»€ä¹ˆ unique_ptr æ›´å¥½12345678// unique_ptr çš„æ˜ç¡®è¯­ä¹‰std::unique_ptr&lt;int&gt; p1(new int(42));// std::unique_ptr&lt;int&gt; p2 = p1; // ç¼–è¯‘é”™è¯¯ï¼é˜²æ­¢æ„å¤–æ‹·è´std::unique_ptr&lt;int&gt; p2 = std::move(p1); // æ˜ç¡®çš„ç§»åŠ¨è¯­ä¹‰// å¯ä»¥å®‰å…¨åœ°åœ¨å®¹å™¨ä¸­ä½¿ç”¨std::vector&lt;std::unique_ptr&lt;int&gt;&gt; vec;vec.push_back(std::make_unique&lt;int&gt;(42)); // å¿…é¡»æ˜¾å¼ç§»åŠ¨ 3.3.2 è¿ç§»æŒ‡å—å¦‚æœé‡åˆ°æ—§çš„ auto_ptr ä»£ç ï¼Œåº”è¯¥è¿ç§»åˆ° unique_ptrï¼š 1234567891011121314// æ—§çš„ auto_ptr ä»£ç std::auto_ptr&lt;MyClass&gt; old_ptr(new MyClass());// è¿ç§»åˆ° unique_ptrstd::unique_ptr&lt;MyClass&gt; new_ptr(new MyClass());// å¯¹äºå‡½æ•°å‚æ•°å’Œè¿”å›å€¼std::auto_ptr&lt;MyClass&gt; create_old() &#123; return std::auto_ptr&lt;MyClass&gt;(new MyClass());&#125;std::unique_ptr&lt;MyClass&gt; create_new() &#123; return std::make_unique&lt;MyClass&gt;();&#125; 3.4 ç°ä»£æ›¿ä»£æ–¹æ¡ˆæ€»ç»“ ç‰¹æ€§ auto_ptr (å·²åºŸå¼ƒ) unique_ptr shared_ptr weak_ptr æ‰€æœ‰æƒæ¨¡å‹ è½¬ç§»æ‰€æœ‰æƒ ç‹¬å æ‰€æœ‰æƒ å…±äº«æ‰€æœ‰æƒ å¼±å¼•ç”¨ æ‹·è´è¯­ä¹‰ è½¬ç§»æ‰€æœ‰æƒï¼ˆå±é™©ï¼‰ ç¦æ­¢æ‹·è´ å…±äº«æ‰€æœ‰æƒ ä¸å¢åŠ å¼•ç”¨è®¡æ•° ç§»åŠ¨è¯­ä¹‰ æ— ï¼ˆC++98ï¼‰ æ”¯æŒç§»åŠ¨ æ”¯æŒç§»åŠ¨ æ”¯æŒç§»åŠ¨ å®¹å™¨å…¼å®¹æ€§ ä¸å…¼å®¹ å…¼å®¹ï¼ˆéœ€ç§»åŠ¨ï¼‰ å…¼å®¹ å…¼å®¹ çº¿ç¨‹å®‰å…¨ æ—  æ— ï¼ˆä½†å¯å•ç‹¬ä¿æŠ¤ï¼‰ å¼•ç”¨è®¡æ•°åŸå­æ“ä½œ åŸå­æ“ä½œ æ¨èä½¿ç”¨ ä¸åº”ä½¿ç”¨ ç‹¬å èµ„æº å…±äº«èµ„æº æ‰“ç ´å¾ªç¯å¼•ç”¨ 4. æ™ºèƒ½æŒ‡é’ˆçš„æœ€ä½³å®è·µä¸é™·é˜±4.1 é€‰æ‹©æ­£ç¡®çš„æ™ºèƒ½æŒ‡é’ˆ4.1.1 å†³ç­–æµç¨‹ æ˜¯å¦éœ€è¦å…±äº«æ‰€æœ‰æƒï¼Ÿ å¦ â†’ ä½¿ç”¨ unique_ptr æ˜¯ â†’ ä½¿ç”¨ shared_ptr æ˜¯å¦éœ€è¦è§‚å¯Ÿè€Œä¸æ‹¥æœ‰ï¼Ÿ æ˜¯ â†’ é…åˆä½¿ç”¨ weak_ptr æ˜¯å¦æœ‰å¾ªç¯å¼•ç”¨é£é™©ï¼Ÿ æ˜¯ â†’ ä½¿ç”¨ weak_ptr æ‰“ç ´å¾ªç¯ 4.1.2 ä½¿ç”¨åœºæ™¯æ€»ç»“1234567891011// 1. ç‹¬å èµ„æº - unique_ptrstd::unique_ptr&lt;File&gt; file = openFile(&quot;data.txt&quot;);// 2. å…±äº«èµ„æº - shared_ptrstd::shared_ptr&lt;Database&gt; db = std::make_shared&lt;Database&gt;();auto user1 = User(db);auto user2 = User(db); // å…±äº«æ•°æ®åº“è¿æ¥// 3. è§‚å¯Ÿèµ„æº - weak_ptrstd::shared_ptr&lt;Subject&gt; subject = std::make_shared&lt;Subject&gt;();std::weak_ptr&lt;Subject&gt; observer = subject; 4.2 å¸¸è§é™·é˜±ä¸è§£å†³æ–¹æ¡ˆ4.2.1 å¾ªç¯å¼•ç”¨é—®é¢˜1234567891011// é”™è¯¯ç¤ºä¾‹ï¼šå¾ªç¯å¼•ç”¨å¯¼è‡´å†…å­˜æ³„æ¼class BadNode &#123; std::shared_ptr&lt;BadNode&gt; parent; // åº”è¯¥ä½¿ç”¨ weak_ptr std::shared_ptr&lt;BadNode&gt; child;&#125;;// æ­£ç¡®è§£å†³æ–¹æ¡ˆclass GoodNode &#123; std::weak_ptr&lt;GoodNode&gt; parent; // ä½¿ç”¨ weak_ptr æ‰“ç ´å¾ªç¯ std::shared_ptr&lt;GoodNode&gt; child;&#125;; 4.2.2 é¿å…åŸå§‹æŒ‡é’ˆä¸æ™ºèƒ½æŒ‡é’ˆæ··ç”¨12345678// å±é™©çš„åšæ³•MyClass* raw_ptr = new MyClass();std::shared_ptr&lt;MyClass&gt; ptr1(raw_ptr);// std::shared_ptr&lt;MyClass&gt; ptr2(raw_ptr); // ç¾éš¾ï¼åŒé‡åˆ é™¤// å®‰å…¨çš„åšæ³•std::shared_ptr&lt;MyClass&gt; ptr1 = std::make_shared&lt;MyClass&gt;();std::shared_ptr&lt;MyClass&gt; ptr2 = ptr1; // å…±äº«æ‰€æœ‰æƒ 4.2.3 this æŒ‡é’ˆé—®é¢˜12345678910111213class MyClass : public std::enable_shared_from_this&lt;MyClass&gt; &#123;public: std::shared_ptr&lt;MyClass&gt; get_shared() &#123; return shared_from_this(); // å®‰å…¨åœ°è·å– shared_ptr &#125;&#125;;// é”™è¯¯ï¼šç›´æ¥ä» this åˆ›å»º shared_ptr// std::shared_ptr&lt;MyClass&gt; bad_ptr(this);// æ­£ç¡®ï¼šä½¿ç”¨ enable_shared_from_thisauto obj = std::make_shared&lt;MyClass&gt;();auto good_ptr = obj-&gt;get_shared(); 4.3 æ€§èƒ½ä¼˜åŒ–å»ºè®®4.3.1 ä¼˜å…ˆä½¿ç”¨ make_shared å’Œ make_unique123456// ä¸æ¨èï¼šä¸¤æ¬¡å†…å­˜åˆ†é…std::shared_ptr&lt;MyClass&gt; p1(new MyClass());// æ¨èï¼šä¸€æ¬¡å†…å­˜åˆ†é…ï¼Œæ›´å¥½çš„æ€§èƒ½std::shared_ptr&lt;MyClass&gt; p2 = std::make_shared&lt;MyClass&gt;();std::unique_ptr&lt;MyClass&gt; p3 = std::make_unique&lt;MyClass&gt;(); 4.3.2 é¿å…ä¸å¿…è¦çš„ shared_ptr æ‹·è´1234567891011121314// ä¸å¥½çš„åšæ³•ï¼šä¸å¿…è¦çš„æ‹·è´void process(const std::shared_ptr&lt;Data&gt;&amp; data) &#123; // å¦‚æœä¸éœ€è¦å…±äº«æ‰€æœ‰æƒï¼Œåº”è¯¥ä¼ å¼•ç”¨ data-&gt;process();&#125;// æ›´å¥½çš„åšæ³•ï¼šæ ¹æ®éœ€æ±‚é€‰æ‹©å‚æ•°ç±»å‹void process_by_ref(Data&amp; data) &#123; // ä¸éœ€è¦æ‰€æœ‰æƒ data.process();&#125;void process_by_shared(std::shared_ptr&lt;Data&gt; data) &#123; // éœ€è¦å…±äº«æ‰€æœ‰æƒ data-&gt;process();&#125; é€šè¿‡ç†è§£å’Œæ­£ç¡®åº”ç”¨è¿™äº›æ™ºèƒ½æŒ‡é’ˆï¼Œå¯ä»¥ç¼–å†™å‡ºæ›´å®‰å…¨ã€æ›´é«˜æ•ˆçš„ C++ ä»£ç ï¼Œé¿å…å¸¸è§çš„å†…å­˜ç®¡ç†é”™è¯¯ã€‚","link":"","tags":[{"name":"C++","slug":"C","permalink":"https://lyroom.github.io/tags/C/"},{"name":"æ™ºèƒ½æŒ‡é’ˆ","slug":"æ™ºèƒ½æŒ‡é’ˆ","permalink":"https://lyroom.github.io/tags/%E6%99%BA%E8%83%BD%E6%8C%87%E9%92%88/"},{"name":"shared_ptr","slug":"shared-ptr","permalink":"https://lyroom.github.io/tags/shared-ptr/"},{"name":"auto_ptr","slug":"auto-ptr","permalink":"https://lyroom.github.io/tags/auto-ptr/"},{"name":"weak_ptr","slug":"weak-ptr","permalink":"https://lyroom.github.io/tags/weak-ptr/"}]},{"title":"è¯¦è§£ C++ unique_ptrï¼šç‹¬å å¼æ™ºèƒ½æŒ‡é’ˆ","date":"2025-09-23T00:18:46.000Z","path":"2025/09/23/è¯¦è§£-C-unique-ptrï¼šç‹¬å å¼æ™ºèƒ½æŒ‡é’ˆ/","text":"è¯¦è§£ C++ unique_ptrï¼šç‹¬å å¼æ™ºèƒ½æŒ‡é’ˆ1. unique_ptr çš„æ ¸å¿ƒæ¦‚å¿µä¸å®šä¹‰1.1 ä»€ä¹ˆæ˜¯ unique_ptrstd::unique_ptr æ˜¯ C++11 æ ‡å‡†åº“ä¸­å¼•å…¥çš„ä¸€ç§æ™ºèƒ½æŒ‡é’ˆï¼Œå…¶æ ¸å¿ƒè®¾è®¡ç›®æ ‡æ˜¯æä¾›ä¸€ç§å¯¹åŠ¨æ€åˆ†é…å¯¹è±¡çš„ç‹¬å æ‰€æœ‰æƒï¼ˆExclusive Ownershipï¼‰ ç®¡ç†æœºåˆ¶ã€‚ ä¸åŸå§‹æŒ‡é’ˆï¼ˆraw pointerï¼‰ä¸åŒï¼Œunique_ptr éµå¾ª RAIIï¼ˆResource Acquisition Is Initializationï¼Œèµ„æºè·å–å³åˆå§‹åŒ–ï¼‰ åŸåˆ™ï¼Œç¡®ä¿å…¶ç®¡ç†çš„å†…å­˜åœ¨å…¶ç”Ÿå‘½å‘¨æœŸç»“æŸæ—¶èƒ½å¤Ÿè¢«è‡ªåŠ¨ã€å¯é åœ°é‡Šæ”¾ï¼Œä»è€Œæœ‰æ•ˆé˜²æ­¢äº†å†…å­˜æ³„æ¼ã€æ‚¬ç©ºæŒ‡é’ˆç­‰å¸¸è§çš„å†…å­˜ç®¡ç†é”™è¯¯ã€‚ unique_ptr å¯¹è±¡æœ¬èº«æ˜¯ä¸€ä¸ªè½»é‡çº§çš„å°è£…ï¼Œå®ƒåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ä¸åŸå§‹æŒ‡é’ˆå…·æœ‰ç›¸åŒçš„æ€§èƒ½å¼€é”€ï¼Œä½†æä¾›äº†æ›´å¼ºçš„å®‰å…¨ä¿éšœå’Œæ›´æ¸…æ™°çš„è¯­ä¹‰ã€‚å®ƒé€šè¿‡ç¦æ­¢æ‹·è´æ“ä½œï¼Œåªå…è®¸ç§»åŠ¨æ“ä½œï¼Œæ¥å¼ºåˆ¶å®ç°æ‰€æœ‰æƒçš„å”¯ä¸€æ€§ï¼Œå³åœ¨ä»»ä½•æ—¶åˆ»ï¼Œåªæœ‰ä¸€ä¸ª unique_ptr å¯ä»¥æ‹¥æœ‰å¹¶è´Ÿè´£é‡Šæ”¾ä¸€ä¸ªç‰¹å®šçš„å¯¹è±¡ã€‚ 1.1.1 ç‹¬å æ‰€æœ‰æƒè¯­ä¹‰unique_ptr çš„â€ç‹¬å æ‰€æœ‰æƒâ€æ˜¯å…¶æœ€æ ¸å¿ƒçš„ç‰¹æ€§ã€‚è¿™æ„å‘³ç€ä¸€ä¸ª unique_ptr å¯¹è±¡å¯¹å…¶æ‰€æŒ‡å‘çš„èµ„æºæ‹¥æœ‰å”¯ä¸€çš„æ§åˆ¶æƒã€‚å½“ unique_ptr è¢«é”€æ¯æ—¶ï¼ˆä¾‹å¦‚ï¼Œç¦»å¼€å…¶ä½œç”¨åŸŸï¼‰ï¼Œå®ƒæ‰€ç®¡ç†çš„å¯¹è±¡ä¹Ÿä¼šè¢«è‡ªåŠ¨é”€æ¯ã€‚ è¿™ç§æœºåˆ¶ç¡®ä¿äº†èµ„æºçš„é‡Šæ”¾æ˜¯ç¡®å®šæ€§çš„ï¼Œå¹¶ä¸”ä¸ unique_ptr çš„ç”Ÿå‘½å‘¨æœŸç´§å¯†ç»‘å®šã€‚ä¸ºäº†å®ç°è¿™ç§ç‹¬å æ€§ï¼Œunique_ptr æ˜ç¡®ç¦æ­¢äº†æ‹·è´æ„é€ å‡½æ•°å’Œæ‹·è´èµ‹å€¼è¿ç®—ç¬¦ã€‚ä»»ä½•è¯•å›¾å¤åˆ¶ä¸€ä¸ª unique_ptr çš„æ“ä½œéƒ½ä¼šå¯¼è‡´ç¼–è¯‘é”™è¯¯ã€‚ ç„¶è€Œï¼Œæ‰€æœ‰æƒæ˜¯å¯ä»¥è¢«è½¬ç§»ï¼ˆTransferï¼‰ çš„ã€‚C++11 å¼•å…¥çš„ç§»åŠ¨è¯­ä¹‰ï¼ˆMove Semanticsï¼‰ ä¸º unique_ptr æä¾›äº†å®Œç¾çš„æ”¯æŒã€‚é€šè¿‡ std::move()ï¼Œå¯ä»¥å°†ä¸€ä¸ª unique_ptr çš„æ‰€æœ‰æƒè½¬ç§»ç»™å¦ä¸€ä¸ª unique_ptrï¼Œè€ŒåŸæŒ‡é’ˆåˆ™ä¼šè¢«ç½®ä¸ºç©ºï¼ˆnullptrï¼‰ï¼Œä¸å†æ‹¥æœ‰ä»»ä½•èµ„æºã€‚ 1234std::unique_ptr&lt;int&gt; ptr1(new int(42));// std::unique_ptr&lt;int&gt; ptr2 = ptr1; // é”™è¯¯ï¼šæ‹·è´æ„é€ å‡½æ•°è¢«åˆ é™¤std::unique_ptr&lt;int&gt; ptr2 = std::move(ptr1); // åˆæ³•ï¼šæ‰€æœ‰æƒä» ptr1 è½¬ç§»åˆ° ptr2// æ­¤æ—¶ ptr1 ä¸º nullptrï¼Œptr2 æ‹¥æœ‰å¯¹ int(42) çš„æ‰€æœ‰æƒ è¿™ç§æ‰€æœ‰æƒçš„è½¬ç§»æœºåˆ¶ï¼Œä½¿å¾— unique_ptr åœ¨å‡½æ•°å‚æ•°ä¼ é€’å’Œè¿”å›å€¼ä¸­éå¸¸æœ‰ç”¨ï¼Œå¯ä»¥æ¸…æ™°åœ°è¡¨è¾¾æ‰€æœ‰æƒçš„è½¬ç§»æ„å›¾ã€‚ 1.1.2 RAIIï¼ˆèµ„æºè·å–å³åˆå§‹åŒ–ï¼‰åŸåˆ™çš„ä½“ç°unique_ptr æ˜¯ RAIIï¼ˆResource Acquisition Is Initializationï¼‰ åŸåˆ™çš„ç»ä½³èŒƒä¾‹ã€‚RAII æ˜¯ä¸€ç§ç¼–ç¨‹èŒƒå¼ï¼Œå®ƒå°†èµ„æºçš„ç”Ÿå‘½å‘¨æœŸä¸å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸç»‘å®šã€‚ èµ„æºï¼ˆå¦‚å†…å­˜ã€æ–‡ä»¶å¥æŸ„ã€é”ç­‰ï¼‰åœ¨å¯¹è±¡çš„æ„é€ å‡½æ•°ä¸­è·å–ï¼Œå¹¶åœ¨å¯¹è±¡çš„ææ„å‡½æ•°ä¸­é‡Šæ”¾ã€‚unique_ptr å®Œç¾åœ°éµå¾ªäº†è¿™ä¸€åŸåˆ™ï¼šå½“é€šè¿‡ new åˆ›å»ºä¸€ä¸ªå¯¹è±¡å¹¶ç”¨å…¶åˆå§‹åŒ– unique_ptr æ—¶ï¼Œèµ„æºè¢«è·å–ï¼›å½“ unique_ptr å¯¹è±¡ç¦»å¼€å…¶ä½œç”¨åŸŸå¹¶è¢«é”€æ¯æ—¶ï¼Œå…¶ææ„å‡½æ•°ä¼šè‡ªåŠ¨è°ƒç”¨ï¼Œä»è€Œé‡Šæ”¾æ‰€ç®¡ç†çš„èµ„æºã€‚ è¿™ç§æœºåˆ¶æå¤§åœ°ç®€åŒ–äº†èµ„æºç®¡ç†ï¼Œå°¤å…¶æ˜¯åœ¨å¤„ç†å¼‚å¸¸æ—¶ã€‚å³ä½¿åœ¨å‡½æ•°æ‰§è¡Œè¿‡ç¨‹ä¸­æŠ›å‡ºå¼‚å¸¸ï¼Œå¯¼è‡´å‡½æ•°æå‰é€€å‡ºï¼Œå±€éƒ¨ä½œç”¨åŸŸä¸­çš„ unique_ptr å¯¹è±¡ä¾ç„¶ä¼šè¢«æ­£ç¡®é”€æ¯ï¼Œå…¶ç®¡ç†çš„èµ„æºä¹Ÿä¼šè¢«å®‰å…¨é‡Šæ”¾ï¼Œä»è€Œé¿å…äº†å› å¼‚å¸¸å¤„ç†ä¸å½“è€Œå¯¼è‡´çš„èµ„æºæ³„æ¼ã€‚ 1.1.3 ä¸åŸå§‹æŒ‡é’ˆçš„åŒºåˆ«ä¸ä¼˜åŠ¿ä¸åŸå§‹æŒ‡é’ˆç›¸æ¯”ï¼Œunique_ptr æä¾›äº†æ˜¾è‘—çš„ä¼˜åŠ¿ï¼š å®‰å…¨æ€§ï¼šåŸå§‹æŒ‡é’ˆéœ€è¦ç¨‹åºå‘˜æ‰‹åŠ¨è°ƒç”¨ delete æ¥é‡Šæ”¾å†…å­˜ï¼Œè¿™ææ˜“å‡ºé”™ï¼Œå®¹æ˜“å¯¼è‡´å†…å­˜æ³„æ¼ï¼ˆå¿˜è®° deleteï¼‰æˆ–æ‚¬ç©ºæŒ‡é’ˆï¼ˆdelete åç»§ç»­ä½¿ç”¨ï¼‰ã€‚unique_ptr é€šè¿‡è‡ªåŠ¨ç®¡ç†å†…å­˜ï¼Œä»æ ¹æœ¬ä¸Šæ¶ˆé™¤äº†è¿™ç±»é—®é¢˜ã€‚ æ¸…æ™°çš„è¯­ä¹‰ï¼šé€šè¿‡å…¶ç‹¬å æ‰€æœ‰æƒçš„ç‰¹æ€§ï¼Œä»£ç çš„æ„å›¾å˜å¾—æ›´åŠ æ˜ç¡®ï¼šä¸€ä¸ª unique_ptr æ˜ç¡®è¡¨ç¤ºå®ƒæ‹¥æœ‰å¹¶è´Ÿè´£é‡Šæ”¾è¯¥å¯¹è±¡ã€‚è¿™ä½¿å¾—ä»£ç æ›´æ˜“äºç†è§£å’Œç»´æŠ¤ã€‚ æ‰©å±•æ€§ï¼šunique_ptr è¿˜æ”¯æŒè‡ªå®šä¹‰åˆ é™¤å™¨ï¼Œä½¿å…¶èƒ½å¤Ÿç®¡ç†ä¸ä»…ä»…æ˜¯é€šè¿‡ new åˆ†é…çš„èµ„æºï¼Œä¾‹å¦‚æ–‡ä»¶å¥æŸ„ã€ç½‘ç»œè¿æ¥ç­‰ï¼Œè¿›ä¸€æ­¥æ‰©å±•äº†å…¶åº”ç”¨èŒƒå›´ã€‚ æ€§èƒ½ï¼šå°½ç®¡ unique_ptr æä¾›äº†è¿™äº›é¢å¤–çš„åŠŸèƒ½ï¼Œä½†å…¶æ€§èƒ½å¼€é”€æå°ï¼Œåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ä¸åŸå§‹æŒ‡é’ˆç›¸å½“ã€‚ ç‰¹æ€§ åŸå§‹æŒ‡é’ˆ (T*) std::unique_ptr æ‰€æœ‰æƒ ä¸æ˜ç¡®ï¼Œéœ€è¦ç¨‹åºå‘˜æ‰‹åŠ¨ç®¡ç† ç‹¬å æ‰€æœ‰æƒï¼Œé€šè¿‡ç§»åŠ¨è¯­ä¹‰è½¬ç§» ç”Ÿå‘½å‘¨æœŸ ä¸æ˜ç¡®ï¼Œéœ€è¦æ‰‹åŠ¨ delete ä¸ unique_ptr å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸç»‘å®šï¼Œè‡ªåŠ¨é‡Šæ”¾ å†…å­˜æ³„æ¼é£é™© é«˜ï¼Œå®¹æ˜“å¿˜è®° delete æ— ï¼Œè‡ªåŠ¨é‡Šæ”¾ æ‚¬å‚æŒ‡é’ˆé£é™© é«˜ï¼Œdelete åæŒ‡é’ˆä»æœ‰æ•ˆ ä½ï¼Œé‡Šæ”¾å unique_ptr å˜ä¸º nullptr é‡å¤é‡Šæ”¾é£é™© é«˜ï¼Œå¯èƒ½å¤šæ¬¡ delete åŒä¸€æŒ‡é’ˆ æ— ï¼Œæ‰€æœ‰æƒå”¯ä¸€ æ‹·è´ æ”¯æŒæµ…æ‹·è´ï¼Œå¯èƒ½å¯¼è‡´å¤šä¸ªæŒ‡é’ˆæŒ‡å‘åŒä¸€èµ„æº ä¸æ”¯æŒæ‹·è´ï¼Œä»…æ”¯æŒç§»åŠ¨ å¤§å° ä¸å¹³å°æŒ‡é’ˆå¤§å°ç›¸åŒ é€šå¸¸ä¸åŸå§‹æŒ‡é’ˆå¤§å°ç›¸åŒï¼ˆå¾—ç›Šäºç©ºåŸºç±»ä¼˜åŒ–ï¼‰ è‡ªå®šä¹‰åˆ é™¤å™¨ éœ€è¦æ‰‹åŠ¨è°ƒç”¨ æ”¯æŒåœ¨æ¨¡æ¿å‚æ•°ä¸­æŒ‡å®š 1.2 æ¨¡æ¿ç±»å®šä¹‰ä¸å‚æ•°std::unique_ptr æ˜¯ä¸€ä¸ªç±»æ¨¡æ¿ï¼Œå…¶å®šä¹‰ä½äº &lt;memory&gt; å¤´æ–‡ä»¶ä¸­ã€‚å®ƒæœ‰ä¸¤ç§å½¢å¼ï¼šä¸€ç§ç”¨äºç®¡ç†å•ä¸ªå¯¹è±¡ï¼Œå¦ä¸€ç§ç”¨äºç®¡ç†åŠ¨æ€åˆ†é…çš„æ•°ç»„ã€‚ 1.2.1 æ¨¡æ¿å‚æ•° Tï¼šè¢«ç®¡ç†çš„å¯¹è±¡ç±»å‹ç¬¬ä¸€ä¸ªæ¨¡æ¿å‚æ•° T æŒ‡å®šäº† unique_ptr æ‰€ç®¡ç†çš„å¯¹è±¡çš„ç±»å‹ã€‚ä¾‹å¦‚ï¼Œstd::unique_ptr&lt;int&gt; ç®¡ç†ä¸€ä¸ª int ç±»å‹çš„å¯¹è±¡ï¼Œè€Œ std::unique_ptr&lt;MyClass&gt; åˆ™ç®¡ç†ä¸€ä¸ª MyClass ç±»å‹çš„å¯¹è±¡ã€‚ åœ¨ unique_ptr çš„å†…éƒ¨ï¼Œè¿™ä¸ªç±»å‹è¢«åˆ«åä¸º element_typeã€‚å¯¹äºæ•°ç»„ç‰¹åŒ–ç‰ˆæœ¬ unique_ptr&lt;T[]&gt;ï¼ŒT è¡¨ç¤ºæ•°ç»„å…ƒç´ çš„ç±»å‹ã€‚ éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœ T æ˜¯ä¸€ä¸ªå¼•ç”¨ç±»å‹ï¼Œé‚£ä¹ˆå®ä¾‹åŒ– unique_ptr&lt;T&gt; çš„ç¨‹åºæ˜¯æ ¼å¼é”™è¯¯çš„ã€‚ 1.2.2 æ¨¡æ¿å‚æ•° Deleterï¼šè‡ªå®šä¹‰åˆ é™¤å™¨ç±»å‹ç¬¬äºŒä¸ªæ¨¡æ¿å‚æ•° Deleter æ˜¯ä¸€ä¸ªå¯é€‰å‚æ•°ï¼Œç”¨äºæŒ‡å®šä¸€ä¸ªå¯è°ƒç”¨å¯¹è±¡ï¼ˆå‡½æ•°å¯¹è±¡æˆ–å‡½æ•°æŒ‡é’ˆï¼‰ï¼Œè¯¥å¯¹è±¡å®šä¹‰äº†å¦‚ä½•é”€æ¯è¢«ç®¡ç†çš„èµ„æºã€‚è¿™ä¸ªç±»å‹åœ¨ unique_ptr å†…éƒ¨è¢«åˆ«åä¸º deleter_typeã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼ŒDeleter æ˜¯ std::default_delete&lt;T&gt;ï¼Œå®ƒç®€å•åœ°è°ƒç”¨ delete æ¥é‡Šæ”¾å†…å­˜ã€‚ç„¶è€Œï¼Œé€šè¿‡æä¾›è‡ªå®šä¹‰çš„åˆ é™¤å™¨ï¼Œunique_ptr å¯ä»¥ç®¡ç†ä»»ä½•éœ€è¦ç‰¹æ®Šæ¸…ç†é€»è¾‘çš„èµ„æºã€‚ Deleter å¿…é¡»æ˜¯ä¸€ä¸ªå¯è°ƒç”¨å¯¹è±¡ï¼Œèƒ½å¤Ÿæ¥å—ä¸€ä¸ª unique_ptr::pointer ç±»å‹çš„å‚æ•°ã€‚å°† Deleter ä½œä¸ºæ¨¡æ¿å‚æ•°æ˜¯å®ç°é›¶å¼€é”€æŠ½è±¡çš„å…³é”®ï¼Œå› ä¸ºå®ƒå…è®¸ç¼–è¯‘å™¨åœ¨ç¼–è¯‘æ—¶å†…è”åˆ é™¤å™¨çš„è°ƒç”¨ï¼Œä»è€Œé¿å…äº†è¿è¡Œæ—¶çš„é¢å¤–å¼€é”€ã€‚ 1.2.3 é»˜è®¤åˆ é™¤å™¨ std::default_deletestd::default_delete&lt;T&gt; æ˜¯ unique_ptr çš„é»˜è®¤åˆ é™¤å™¨ã€‚å®ƒæ˜¯ä¸€ä¸ªæ— çŠ¶æ€çš„å‡½æ•°å¯¹è±¡ï¼ˆfunctorï¼‰ï¼Œå…¶ operator() ç®€å•åœ°è°ƒç”¨ delete æ¥é”€æ¯å…¶ç®¡ç†çš„å¯¹è±¡ã€‚ å¯¹äºæ•°ç»„ç‰¹åŒ–ç‰ˆæœ¬ unique_ptr&lt;T[]&gt;ï¼Œdefault_delete&lt;T[]&gt; ä¼šè°ƒç”¨ delete[] æ¥é‡Šæ”¾æ•°ç»„ã€‚ default_delete çš„è®¾è®¡éå¸¸é«˜æ•ˆï¼Œå› ä¸ºå®ƒæ˜¯ä¸€ä¸ªç©ºç±»ï¼ˆempty classï¼‰ï¼Œä¸åŒ…å«ä»»ä½•æ•°æ®æˆå‘˜ã€‚è¿™ä½¿å¾— unique_ptr å¯ä»¥åˆ©ç”¨ç©ºåŸºç±»ä¼˜åŒ–ï¼ˆEBOï¼‰ æŠ€æœ¯ï¼Œåœ¨ä¸å¢åŠ é¢å¤–å†…å­˜å¼€é”€çš„æƒ…å†µä¸‹å­˜å‚¨åˆ é™¤å™¨ã€‚ å½“ä½¿ç”¨é»˜è®¤åˆ é™¤å™¨æ—¶ï¼Œunique_ptr çš„å¤§å°é€šå¸¸ä¸åŸå§‹æŒ‡é’ˆç›¸åŒï¼Œä¿è¯äº†å…¶è½»é‡çº§çš„ç‰¹æ€§ã€‚ éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœä½¿ç”¨ default_deleteï¼Œè¢«ç®¡ç†çš„ç±»å‹ T åœ¨ unique_ptr çš„ææ„å‡½æ•°ã€ç§»åŠ¨èµ‹å€¼è¿ç®—ç¬¦å’Œ reset æˆå‘˜å‡½æ•°è¢«å®ä¾‹åŒ–çš„åœ°æ–¹å¿…é¡»æ˜¯å®Œæ•´ç±»å‹ï¼ˆcomplete typeï¼‰ã€‚ 1.3 å†…éƒ¨ç±»å‹å®šä¹‰ä¸ºäº†æ–¹ä¾¿ä½¿ç”¨å’Œæé«˜ä»£ç çš„å¯è¯»æ€§ï¼Œunique_ptr å®šä¹‰äº†å‡ ä¸ªå†…éƒ¨ç±»å‹åˆ«åã€‚ 1.3.1 element_typeï¼šè¢«ç®¡ç†å¯¹è±¡çš„ç±»å‹åˆ«åelement_type æ˜¯æ¨¡æ¿å‚æ•° T çš„åˆ«åã€‚å®ƒä»£è¡¨äº† unique_ptr æ‰€ç®¡ç†çš„å¯¹è±¡çš„ç±»å‹ã€‚ä¾‹å¦‚ï¼Œåœ¨ std::unique_ptr&lt;int&gt; ä¸­ï¼Œelement_type å°±æ˜¯ intã€‚ è¿™ä¸ªåˆ«ååœ¨ç¼–å†™æ³›å‹ä»£ç æ—¶éå¸¸æœ‰ç”¨ï¼Œå› ä¸ºå®ƒå…è®¸åœ¨ä¸æ˜ç¡®çŸ¥é“ T çš„å…·ä½“ç±»å‹çš„æƒ…å†µä¸‹ï¼Œå¼•ç”¨è¢«ç®¡ç†å¯¹è±¡çš„ç±»å‹ã€‚ 1.3.2 deleter_typeï¼šåˆ é™¤å™¨çš„ç±»å‹åˆ«ådeleter_type æ˜¯æ¨¡æ¿å‚æ•° Deleter çš„åˆ«åã€‚å®ƒä»£è¡¨äº†ç”¨äºé”€æ¯è¢«ç®¡ç†å¯¹è±¡çš„åˆ é™¤å™¨çš„ç±»å‹ã€‚ä¾‹å¦‚ï¼Œåœ¨ std::unique_ptr&lt;int, MyDeleter&gt; ä¸­ï¼Œdeleter_type å°±æ˜¯ MyDeleterã€‚ è¿™ä¸ªåˆ«ååŒæ ·æœ‰åŠ©äºç¼–å†™æ³›å‹ä»£ç ï¼Œä½¿å¾—ä»£ç å¯ä»¥çµæ´»åœ°å¤„ç†ä¸åŒç±»å‹çš„åˆ é™¤å™¨ã€‚ 1.3.3 pointerï¼šæŒ‡é’ˆç±»å‹åˆ«åpointer æ˜¯ä¸€ä¸ªæ›´å¤æ‚çš„ç±»å‹åˆ«åï¼Œå®ƒå®šä¹‰äº† unique_ptr å†…éƒ¨ä½¿ç”¨çš„æŒ‡é’ˆç±»å‹ã€‚å®ƒçš„å®šä¹‰å¦‚ä¸‹ï¼š å¦‚æœ Deleter ç±»å‹ï¼ˆå»é™¤å¼•ç”¨åï¼‰æœ‰ä¸€ä¸ªåä¸º pointer çš„å†…éƒ¨ç±»å‹ï¼Œé‚£ä¹ˆ unique_ptr::pointer å°±æ˜¯è¿™ä¸ªç±»å‹ã€‚ å¦åˆ™ï¼Œpointer å°±æ˜¯ T*ã€‚ è¿™ä¸ªè®¾è®¡å…è®¸ Deleter æŒ‡å®šä¸€ä¸ªâ€æ™ºèƒ½â€æŒ‡é’ˆç±»å‹ï¼ˆä¾‹å¦‚ï¼Œä¸€ä¸ªç”¨äºå…±äº«å†…å­˜çš„åç§»æŒ‡é’ˆï¼‰ï¼Œè€Œä¸ä»…ä»…æ˜¯æ™®é€šçš„ T*ã€‚è¿™ä½¿å¾— unique_ptr èƒ½å¤Ÿä¸æ›´å¹¿æ³›çš„èµ„æºç®¡ç†æ–¹æ¡ˆé›†æˆã€‚ pointer ç±»å‹å¿…é¡»æ»¡è¶³ NullablePointer çš„è¦æ±‚ï¼Œè¿™æ„å‘³ç€å®ƒå¯ä»¥è¢«é»˜è®¤æ„é€ ã€ä¸ nullptr è¿›è¡Œæ¯”è¾ƒï¼Œå¹¶ä¸”å¯ä»¥åƒåŸå§‹æŒ‡é’ˆä¸€æ ·ä½¿ç”¨ã€‚ 2. unique_ptr çš„å¸¸ç”¨æ¥å£ä¸ç”¨æ³•unique_ptr æä¾›äº†ä¸€å¥—ä¸°å¯Œçš„æ¥å£ï¼Œç”¨äºç®¡ç†å…¶ç”Ÿå‘½å‘¨æœŸå’Œæ‰€æœ‰æƒã€‚è¿™äº›æ¥å£çš„è®¾è®¡æ—¨åœ¨æä¾›å®‰å…¨ã€é«˜æ•ˆä¸”ç›´è§‚çš„èµ„æºç®¡ç†æ–¹å¼ã€‚ 2.1 æ„é€ ä¸ææ„unique_ptr çš„æ„é€ å‡½æ•°å’Œææ„å‡½æ•°æ˜¯å…¶èµ„æºç®¡ç†åŠŸèƒ½çš„æ ¸å¿ƒã€‚ 2.1.1 é»˜è®¤æ„é€ å‡½æ•°ï¼šåˆ›å»ºç©ºçš„ unique_ptrunique_ptr çš„é»˜è®¤æ„é€ å‡½æ•°åˆ›å»ºä¸€ä¸ªä¸æ‹¥æœ‰ä»»ä½•å¯¹è±¡çš„ unique_ptrï¼Œå…¶å†…éƒ¨æŒ‡é’ˆè¢«åˆå§‹åŒ–ä¸º nullptrã€‚ 1std::unique_ptr&lt;int&gt; ptr; // ptr ä¸ç®¡ç†ä»»ä½•å¯¹è±¡ï¼Œget() è¿”å› nullptr è¿™ä¸ªæ„é€ å‡½æ•°æ˜¯ noexcept çš„ï¼Œå¹¶ä¸”è¦æ±‚åˆ é™¤å™¨ç±»å‹ Deleter æ˜¯å¯é»˜è®¤æ„é€ çš„ï¼Œä¸”å…¶æ„é€ è¿‡ç¨‹ä¸æŠ›å‡ºå¼‚å¸¸ã€‚ æ­¤å¤–ï¼Œunique_ptr è¿˜æœ‰ä¸€ä¸ªæ¥å— std::nullptr_t çš„æ„é€ å‡½æ•°ï¼Œå…¶æ•ˆæœä¸é»˜è®¤æ„é€ å‡½æ•°ç›¸åŒï¼Œè¿™ä½¿å¾— unique_ptr å¯ä»¥è¢«æ˜¾å¼åœ°åˆå§‹åŒ–ä¸º nullptrã€‚ 2.1.2 å¸¦æŒ‡é’ˆçš„æ„é€ å‡½æ•°ï¼šæ¥ç®¡åŸå§‹æŒ‡é’ˆunique_ptr æä¾›äº†ä¸€ä¸ªæ˜¾å¼çš„æ„é€ å‡½æ•°ï¼Œç”¨äºä»ä¸€ä¸ªåŸå§‹æŒ‡é’ˆæ¥ç®¡æ‰€æœ‰æƒã€‚ 1std::unique_ptr&lt;int&gt; ptr(new int(42)); // ptr ç°åœ¨æ‹¥æœ‰è¿™ä¸ª int å¯¹è±¡ è¿™ä¸ªæ„é€ å‡½æ•°å°†ä¼ å…¥çš„æŒ‡é’ˆå­˜å‚¨åœ¨ unique_ptr å†…éƒ¨ï¼Œå¹¶è´Ÿè´£åœ¨ææ„æ—¶é‡Šæ”¾å®ƒã€‚è¿™ä¸ªæ„é€ å‡½æ•°ä¹Ÿæ˜¯ noexcept çš„ï¼Œå¹¶ä¸”è¦æ±‚åˆ é™¤å™¨æ˜¯å¯é»˜è®¤æ„é€ çš„ã€‚ éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸€æ—¦å°†ä¸€ä¸ªåŸå§‹æŒ‡é’ˆäº¤ç»™ unique_ptr ç®¡ç†ï¼Œå°±ä¸åº”è¯¥å†æ‰‹åŠ¨ delete å®ƒï¼Œä¹Ÿä¸åº”è¯¥å†ä½¿ç”¨è¿™ä¸ªåŸå§‹æŒ‡é’ˆï¼Œå› ä¸º unique_ptr ä¼šåœ¨å…¶ç”Ÿå‘½å‘¨æœŸç»“æŸæ—¶è‡ªåŠ¨å¤„ç†é‡Šæ”¾ã€‚ 2.1.3 ç§»åŠ¨æ„é€ å‡½æ•°ï¼šè½¬ç§»æ‰€æœ‰æƒunique_ptr çš„æ ¸å¿ƒç‰¹æ€§ä¹‹ä¸€æ˜¯å…¶ç§»åŠ¨è¯­ä¹‰ã€‚å®ƒæä¾›äº†ç§»åŠ¨æ„é€ å‡½æ•°ï¼Œå…è®¸å°†æ‰€æœ‰æƒä»ä¸€ä¸ª unique_ptr è½¬ç§»ç»™å¦ä¸€ä¸ªã€‚ 123std::unique_ptr&lt;int&gt; ptr1(new int(42));std::unique_ptr&lt;int&gt; ptr2(std::move(ptr1)); // æ‰€æœ‰æƒä» ptr1 è½¬ç§»åˆ° ptr2// ç°åœ¨ ptr1 ä¸º nullptrï¼Œptr2 æ‹¥æœ‰è¯¥å¯¹è±¡ ç§»åŠ¨æ„é€ å‡½æ•°æ˜¯ noexcept çš„ï¼Œå¹¶ä¸”è¦æ±‚åˆ é™¤å™¨æ˜¯å¯ç§»åŠ¨æ„é€ çš„ï¼ˆå¦‚æœ Deleter ä¸æ˜¯å¼•ç”¨ç±»å‹ï¼‰ã€‚ æ­¤å¤–ï¼Œunique_ptr è¿˜æ”¯æŒä»ä¸€ä¸ªä¸åŒç±»å‹çš„ unique_ptr è¿›è¡Œç§»åŠ¨æ„é€ ï¼Œåªè¦æºæŒ‡é’ˆç±»å‹å¯ä»¥éšå¼è½¬æ¢ä¸ºç›®æ ‡æŒ‡é’ˆç±»å‹ï¼Œå¹¶ä¸”æºåˆ é™¤å™¨ç±»å‹å¯ä»¥è½¬æ¢ä¸ºç›®æ ‡åˆ é™¤å™¨ç±»å‹ã€‚è¿™ç§è·¨ç±»å‹çš„ç§»åŠ¨æ„é€ åœ¨å¤„ç†ç»§æ‰¿å±‚æ¬¡ç»“æ„æ—¶éå¸¸æœ‰ç”¨ã€‚ 2.1.4 ææ„å‡½æ•°ï¼šè‡ªåŠ¨é‡Šæ”¾èµ„æºunique_ptr çš„ææ„å‡½æ•°æ˜¯å…¶ RAII æœºåˆ¶çš„å…³é”®ã€‚å½“ä¸€ä¸ª unique_ptr å¯¹è±¡è¢«é”€æ¯æ—¶ï¼Œå…¶ææ„å‡½æ•°ä¼šæ£€æŸ¥å®ƒæ˜¯å¦æ‹¥æœ‰ä¸€ä¸ªå¯¹è±¡ã€‚å¦‚æœæ‹¥æœ‰ï¼Œææ„å‡½æ•°ä¼šè°ƒç”¨å…¶å­˜å‚¨çš„åˆ é™¤å™¨æ¥é”€æ¯è¯¥å¯¹è±¡ã€‚ ä¾‹å¦‚ï¼Œå¯¹äºé»˜è®¤åˆ é™¤å™¨ï¼Œå®ƒä¼šè°ƒç”¨ deleteã€‚ææ„å‡½æ•°è¦æ±‚ get_deleter()(get()) è¿™ä¸ªè¡¨è¾¾å¼æ˜¯åˆæ³•çš„ï¼Œå¹¶ä¸”ä¸ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚ è¿™ç§è‡ªåŠ¨é‡Šæ”¾æœºåˆ¶ç¡®ä¿äº†å³ä½¿åœ¨å‘ç”Ÿå¼‚å¸¸çš„æƒ…å†µä¸‹ï¼Œèµ„æºä¹Ÿèƒ½è¢«æ­£ç¡®æ¸…ç†ï¼Œä»è€Œæå¤§åœ°æé«˜äº†ä»£ç çš„å¥å£®æ€§ã€‚ 2.2 æ‰€æœ‰æƒç®¡ç†æ ¸å¿ƒæ¥å£unique_ptr æä¾›äº†ä¸€ç»„æ ¸å¿ƒæ¥å£ï¼Œç”¨äºåœ¨ä¸è½¬ç§»æ‰€æœ‰æƒçš„æƒ…å†µä¸‹è§‚å¯Ÿå’Œæ“ä½œå…¶ç®¡ç†çš„å¯¹è±¡ã€‚ 2.2.1 get()ï¼šè·å–åŸå§‹æŒ‡é’ˆï¼ˆä¸è½¬ç§»æ‰€æœ‰æƒï¼‰get() æˆå‘˜å‡½æ•°è¿”å› unique_ptr å†…éƒ¨å­˜å‚¨çš„åŸå§‹æŒ‡é’ˆï¼Œä½†ä¸ä¼šè½¬ç§»æ‰€æœ‰æƒã€‚è°ƒç”¨ get() åï¼Œunique_ptr ä»ç„¶æ‹¥æœ‰è¯¥å¯¹è±¡ï¼Œå¹¶å°†åœ¨å…¶ææ„æ—¶è´Ÿè´£é‡Šæ”¾å®ƒã€‚ è¿™ä¸ªå‡½æ•°é€šå¸¸ç”¨äºéœ€è¦ä¸åªæ¥å—åŸå§‹æŒ‡é’ˆçš„æ—§ç‰ˆ API è¿›è¡Œäº¤äº’çš„åœºæ™¯ã€‚ 123std::unique_ptr&lt;int&gt; ptr(new int(42));int* raw_ptr = ptr.get(); // raw_ptr æŒ‡å‘è¯¥å¯¹è±¡ï¼Œä½† ptr ä»ç„¶æ‹¥æœ‰å®ƒ// ä¸è¦å¯¹ raw_ptr è°ƒç”¨ delete get() æ˜¯ noexcept çš„ï¼Œå¹¶ä¸”è¿”å›çš„æŒ‡é’ˆç±»å‹æ˜¯ unique_ptr::pointerã€‚ 2.2.2 release()ï¼šé‡Šæ”¾æ‰€æœ‰æƒå¹¶è¿”å›åŸå§‹æŒ‡é’ˆrelease() æˆå‘˜å‡½æ•°ä¼šæ–­å¼€ unique_ptr ä¸å…¶ç®¡ç†å¯¹è±¡ä¹‹é—´çš„å…³è”ï¼Œå¹¶è¿”å›è¯¥å¯¹è±¡çš„åŸå§‹æŒ‡é’ˆã€‚è°ƒç”¨ release() åï¼Œunique_ptr å˜ä¸ºç©ºï¼ˆget() == nullptrï¼‰ï¼Œè€Œè°ƒç”¨è€…åˆ™è·å¾—äº†è¯¥å¯¹è±¡çš„æ‰€æœ‰æƒï¼Œå¹¶éœ€è¦è´Ÿè´£åœ¨é€‚å½“çš„æ—¶å€™æ‰‹åŠ¨é‡Šæ”¾å®ƒã€‚ 123std::unique_ptr&lt;int&gt; ptr(new int(42));int* raw_ptr = ptr.release(); // ptr å˜ä¸ºç©ºï¼Œraw_ptr ç°åœ¨æ‹¥æœ‰è¯¥å¯¹è±¡// ç°åœ¨å¿…é¡»å¯¹ raw_ptr è°ƒç”¨ delete: delete raw_ptr; release() æ˜¯ noexcept çš„ï¼Œå®ƒé¦–å…ˆå°†å†…éƒ¨æŒ‡é’ˆè®¾ç½®ä¸º nullptrï¼Œç„¶åè¿”å›å…¶å…ˆå‰çš„å€¼ã€‚ è¿™ä¸ªå‡½æ•°åœ¨éœ€è¦å°†æ‰€æœ‰æƒè½¬ç§»ç»™ä¸€ä¸ªä¸æ¥å— unique_ptr çš„å‡½æ•°æˆ– API æ—¶éå¸¸æœ‰ç”¨ã€‚ 2.2.3 reset()ï¼šé‡ç½®ç®¡ç†çš„å¯¹è±¡reset() æˆå‘˜å‡½æ•°ç”¨äºæ›¿æ¢ unique_ptr å½“å‰ç®¡ç†çš„å¯¹è±¡ã€‚å®ƒé¦–å…ˆä¼šé”€æ¯å½“å‰ç®¡ç†çš„å¯¹è±¡ï¼ˆå¦‚æœå­˜åœ¨ï¼‰ï¼Œç„¶åæ¥ç®¡æ–°ä¼ å…¥çš„æŒ‡é’ˆçš„æ‰€æœ‰æƒã€‚ 123std::unique_ptr&lt;int&gt; ptr(new int(42));ptr.reset(new int(100)); // é”€æ¯æ—§çš„ int(42)ï¼Œå¹¶ç®¡ç†æ–°çš„ int(100)ptr.reset(); // é”€æ¯ int(100)ï¼Œå¹¶ä½¿ ptr å˜ä¸ºç©º reset() å¯ä»¥æ¥å—ä¸€ä¸ªåŸå§‹æŒ‡é’ˆå‚æ•°ï¼Œä¹Ÿå¯ä»¥ä¸å¸¦å‚æ•°ï¼ˆé»˜è®¤ä¸º nullptrï¼‰ã€‚å¦‚æœä¼ å…¥çš„æŒ‡é’ˆä¸å½“å‰ç®¡ç†çš„æŒ‡é’ˆç›¸åŒï¼Œreset() ä¼šå…ˆå­˜å‚¨æ–°æŒ‡é’ˆï¼Œç„¶ååˆ é™¤æ—§æŒ‡é’ˆï¼Œè¿™å¯èƒ½å¯¼è‡´ä¼ å…¥çš„æŒ‡é’ˆè¢«ç«‹å³åˆ é™¤ã€‚ reset() æ˜¯ noexcept çš„ï¼Œå¹¶ä¸”è¦æ±‚åˆ é™¤å™¨çš„è°ƒç”¨ä¸æŠ›å‡ºå¼‚å¸¸ã€‚ 2.2.4 swap()ï¼šäº¤æ¢ä¸¤ä¸ª unique_ptr çš„ç®¡ç†å¯¹è±¡swap() æˆå‘˜å‡½æ•°ç”¨äºäº¤æ¢ä¸¤ä¸ª unique_ptr å¯¹è±¡çš„å†…å®¹ï¼ŒåŒ…æ‹¬å®ƒä»¬ç®¡ç†çš„æŒ‡é’ˆå’Œåˆ é™¤å™¨ã€‚ 123std::unique_ptr&lt;int&gt; ptr1(new int(42));std::unique_ptr&lt;int&gt; ptr2(new int(100));ptr1.swap(ptr2); // ç°åœ¨ ptr1 ç®¡ç† int(100)ï¼Œptr2 ç®¡ç† int(42) swap() æ˜¯ noexcept çš„ï¼Œå¹¶ä¸”é€šå¸¸å…·æœ‰å¸¸æ•°æ—¶é—´å¤æ‚åº¦ã€‚ æ­¤å¤–ï¼Œæ ‡å‡†åº“è¿˜æä¾›äº†ä¸€ä¸ªéæˆå‘˜çš„ swap å‡½æ•°æ¨¡æ¿ï¼Œä¸“é—¨ç”¨äº unique_ptrï¼Œå®ƒä¹Ÿä¼šè°ƒç”¨æˆå‘˜ swap å‡½æ•°ã€‚ 2.3 å…¶ä»–é‡è¦æ“ä½œç¬¦ä¸å‡½æ•°é™¤äº†ä¸Šè¿°æ ¸å¿ƒæ¥å£ï¼Œunique_ptr è¿˜æä¾›äº†ä¸€äº›æ“ä½œç¬¦å’Œè¾…åŠ©å‡½æ•°ï¼Œä½¿å…¶ä½¿ç”¨èµ·æ¥æ›´åƒä¸€ä¸ªåŸå§‹æŒ‡é’ˆã€‚ 2.3.1 operator&#x3D;ï¼šç§»åŠ¨èµ‹å€¼è¿ç®—ç¬¦unique_ptr æä¾›äº†ç§»åŠ¨èµ‹å€¼è¿ç®—ç¬¦ï¼Œå…è®¸å°†ä¸€ä¸ª unique_ptr çš„æ‰€æœ‰æƒè½¬ç§»ç»™å¦ä¸€ä¸ªã€‚ä¸ç§»åŠ¨æ„é€ å‡½æ•°ç±»ä¼¼ï¼Œå®ƒä¼šé”€æ¯å·¦ä¾§ unique_ptr å½“å‰ç®¡ç†çš„å¯¹è±¡ï¼Œç„¶åæ¥ç®¡å³ä¾§ unique_ptr çš„æ‰€æœ‰æƒã€‚ 1234std::unique_ptr&lt;int&gt; ptr1(new int(42));std::unique_ptr&lt;int&gt; ptr2;ptr2 = std::move(ptr1); // æ‰€æœ‰æƒä» ptr1 è½¬ç§»åˆ° ptr2// ç°åœ¨ ptr1 ä¸º nullptrï¼Œptr2 æ‹¥æœ‰è¯¥å¯¹è±¡ ç§»åŠ¨èµ‹å€¼è¿ç®—ç¬¦æ˜¯ noexcept çš„ï¼Œå¹¶ä¸”è¦æ±‚åˆ é™¤å™¨æ˜¯å¯ç§»åŠ¨èµ‹å€¼çš„ï¼ˆå¦‚æœ Deleter ä¸æ˜¯å¼•ç”¨ç±»å‹ï¼‰ã€‚ å®ƒè¿˜æ”¯æŒä»ä¸€ä¸ªä¸åŒç±»å‹çš„ unique_ptr è¿›è¡Œç§»åŠ¨èµ‹å€¼ï¼Œåªè¦æ»¡è¶³ç›¸åº”çš„ç±»å‹è½¬æ¢è¦æ±‚ã€‚ 2.3.2 operator* ä¸ operator-&gt;ï¼šè§£å¼•ç”¨æ“ä½œå¯¹äºéæ•°ç»„ç‰ˆæœ¬çš„ unique_ptrï¼Œæä¾›äº† operator* å’Œ operator-&gt;ï¼Œä½¿å…¶å¯ä»¥åƒåŸå§‹æŒ‡é’ˆä¸€æ ·è¿›è¡Œè§£å¼•ç”¨ã€‚ operator* è¿”å›å¯¹æ‰€ç®¡ç†å¯¹è±¡çš„å¼•ç”¨ã€‚ operator-&gt; è¿”å›å†…éƒ¨å­˜å‚¨çš„åŸå§‹æŒ‡é’ˆï¼Œå…è®¸è®¿é—®å¯¹è±¡çš„æˆå‘˜ã€‚ 123std::unique_ptr&lt;MyClass&gt; ptr(new MyClass());ptr-&gt;doSomething(); // è°ƒç”¨ MyClass çš„æˆå‘˜å‡½æ•°(*ptr).doSomething(); // ç­‰ä»·äºä¸Šä¸€è¡Œ è¿™äº›æ“ä½œç¬¦ä½¿å¾— unique_ptr çš„ä½¿ç”¨ä½“éªŒä¸åŸå§‹æŒ‡é’ˆéå¸¸ç›¸ä¼¼ï¼Œä½†æä¾›äº†é¢å¤–çš„å®‰å…¨ä¿éšœã€‚ 2.3.3 operator boolï¼šæ£€æŸ¥æ˜¯å¦ç®¡ç†å¯¹è±¡unique_ptr æä¾›äº†ä¸€ä¸ªè½¬æ¢åˆ° bool ç±»å‹çš„æ“ä½œç¬¦ï¼Œç”¨äºæ£€æŸ¥å…¶æ˜¯å¦ç®¡ç†ä¸€ä¸ªå¯¹è±¡ã€‚å¦‚æœ unique_ptr ä¸ä¸ºç©ºï¼ˆå³ get() != nullptrï¼‰ï¼Œåˆ™è¿”å› trueï¼›å¦åˆ™è¿”å› falseã€‚ 1234std::unique_ptr&lt;int&gt; ptr(new int(42));if (ptr) &#123; // ptr ç®¡ç†ä¸€ä¸ªå¯¹è±¡&#125; è¿™ä¸ªæ“ä½œç¬¦ä½¿å¾—æ£€æŸ¥ unique_ptr çš„çŠ¶æ€å˜å¾—éå¸¸ç›´è§‚å’Œæ–¹ä¾¿ã€‚ 2.3.4 get_deleter()ï¼šè·å–åˆ é™¤å™¨get_deleter() æˆå‘˜å‡½æ•°è¿”å›ä¸€ä¸ªå¯¹ unique_ptr å†…éƒ¨å­˜å‚¨çš„åˆ é™¤å™¨çš„å¼•ç”¨ã€‚è¿™å…è®¸åœ¨è¿è¡Œæ—¶è®¿é—®å’Œä¿®æ”¹åˆ é™¤å™¨çš„çŠ¶æ€ï¼ˆå¦‚æœåˆ é™¤å™¨ä¸æ˜¯æ— çŠ¶æ€çš„ï¼‰ã€‚ 123auto deleter = [](int* p) &#123; std::cout &lt;&lt; &quot;Deleting int\\n&quot;; delete p; &#125;;std::unique_ptr&lt;int, decltype(deleter)&gt; ptr(new int(42), deleter);ptr.get_deleter()(new int(100)); // æ‰‹åŠ¨è°ƒç”¨åˆ é™¤å™¨ get_deleter() æœ‰ä¸¤ä¸ªé‡è½½ç‰ˆæœ¬ï¼Œä¸€ä¸ªè¿”å›éå¸¸é‡å¼•ç”¨ï¼Œå¦ä¸€ä¸ªè¿”å›å¸¸é‡å¼•ç”¨ã€‚ 3. unique_ptr çš„å†…éƒ¨å®ç°é€»è¾‘unique_ptr çš„é«˜æ•ˆæ€§å’Œå¼ºå¤§åŠŸèƒ½æºäºå…¶ç²¾å·§çš„å†…éƒ¨å®ç°ï¼Œç‰¹åˆ«æ˜¯å…¶å¯¹ç©ºåŸºç±»ä¼˜åŒ–ï¼ˆEBOï¼‰çš„åˆ©ç”¨ã€‚ 3.1 æ ¸å¿ƒæ•°æ®ç»“æ„unique_ptr çš„å†…éƒ¨å®ç°ä¸»è¦å›´ç»•ä¸¤ä¸ªæ ¸å¿ƒæ•°æ®æˆå‘˜ï¼šä¸€ä¸ªç”¨äºå­˜å‚¨è¢«ç®¡ç†å¯¹è±¡çš„åŸå§‹æŒ‡é’ˆï¼Œå¦ä¸€ä¸ªç”¨äºå­˜å‚¨åˆ é™¤å™¨ã€‚ 3.1.1 å­˜å‚¨åŸå§‹æŒ‡é’ˆunique_ptr å¿…é¡»å­˜å‚¨ä¸€ä¸ªæŒ‡å‘å…¶ç®¡ç†å¯¹è±¡çš„åŸå§‹æŒ‡é’ˆã€‚è¿™ä¸ªæŒ‡é’ˆçš„ç±»å‹ç”± unique_ptr::pointer å®šä¹‰ï¼Œé€šå¸¸æ˜¯ T*ï¼Œä½†åœ¨ä½¿ç”¨è‡ªå®šä¹‰åˆ é™¤å™¨æ—¶å¯èƒ½æ˜¯å…¶ä»–ç±»å‹ã€‚ è¿™ä¸ªæŒ‡é’ˆæ˜¯ unique_ptr çš„æ ¸å¿ƒï¼Œæ‰€æœ‰å¯¹ç®¡ç†å¯¹è±¡çš„è®¿é—®éƒ½é€šè¿‡è¿™ä¸ªæŒ‡é’ˆè¿›è¡Œã€‚ 3.1.2 å­˜å‚¨åˆ é™¤å™¨unique_ptr è¿˜éœ€è¦å­˜å‚¨å…¶åˆ é™¤å™¨ã€‚åˆ é™¤å™¨çš„ç±»å‹æ˜¯ Deleterï¼Œå®ƒå¯ä»¥æ˜¯ä»»ä½•å¯è°ƒç”¨å¯¹è±¡ã€‚ å°†åˆ é™¤å™¨ä½œä¸º unique_ptr çš„ä¸€éƒ¨åˆ†ï¼Œä½¿å¾— unique_ptr èƒ½å¤Ÿçµæ´»åœ°ç®¡ç†å„ç§éœ€è¦ç‰¹æ®Šæ¸…ç†é€»è¾‘çš„èµ„æºã€‚ç„¶è€Œï¼Œå¦‚æœåˆ é™¤å™¨æ˜¯ä¸€ä¸ªæœ‰çŠ¶æ€çš„ã€éç©ºçš„å¯¹è±¡ï¼Œç›´æ¥å°†å…¶ä½œä¸º unique_ptr çš„æˆå‘˜ä¼šå¢åŠ  unique_ptr çš„å¤§å°ï¼Œä»è€Œå¼•å…¥é¢å¤–çš„å†…å­˜å¼€é”€ã€‚ ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œunique_ptr é‡‡ç”¨äº†ç©ºåŸºç±»ä¼˜åŒ–æŠ€æœ¯ã€‚ 3.2 ç©ºåŸºç±»ä¼˜åŒ–ï¼ˆEBOï¼‰ç©ºåŸºç±»ä¼˜åŒ–ï¼ˆEmpty Base Optimization, EBOï¼‰ æ˜¯ C++ ä¸­ä¸€é¡¹é‡è¦çš„ä¼˜åŒ–æŠ€æœ¯ï¼Œå®ƒå…è®¸ä¸€ä¸ªç©ºç±»ï¼ˆå³æ²¡æœ‰éé™æ€æ•°æ®æˆå‘˜çš„ç±»ï¼‰ä½œä¸ºåŸºç±»æ—¶ï¼Œä¸å ç”¨ä»»ä½•é¢å¤–çš„å†…å­˜ç©ºé—´ã€‚unique_ptr åˆ©ç”¨ EBO æ¥ä¼˜åŒ–å…¶å†…éƒ¨å­˜å‚¨ï¼Œç‰¹åˆ«æ˜¯å½“ä½¿ç”¨é»˜è®¤çš„æ— çŠ¶æ€åˆ é™¤å™¨æ—¶ã€‚ 3.2.1 å‹ç¼©ç©ºæŒ‡é’ˆï¼ˆCompressed Pairï¼‰æŠ€æœ¯ä¸ºäº†å®ç° EBOï¼Œunique_ptr çš„å®ç°é€šå¸¸ä¾èµ–äºä¸€ä¸ªåä¸º compressed_pairï¼ˆæˆ–ç±»ä¼¼åç§°ï¼‰çš„å†…éƒ¨è¾…åŠ©ç±»ã€‚è¿™ä¸ªç±»æ¨¡æ¿æ—¨åœ¨å­˜å‚¨ä¸¤ä¸ªå¯¹è±¡ï¼Œå¹¶åˆ©ç”¨ EBO æ¥æ¶ˆé™¤å…¶ä¸­ä¸€ä¸ªå¯¹è±¡ï¼ˆå¦‚æœå®ƒæ˜¯ç©ºçš„ï¼‰çš„å­˜å‚¨å¼€é”€ã€‚ compressed_pair çš„å®ç°é€šå¸¸æ¶‰åŠæ¨¡æ¿ç‰¹åŒ–å’Œç»§æ‰¿ã€‚å®ƒä¼šæ£€æŸ¥ä¸¤ä¸ªæ¨¡æ¿å‚æ•°çš„ç±»å‹ï¼Œå¦‚æœå…¶ä¸­ä¸€ä¸ªç±»å‹æ˜¯ç©ºçš„ä¸”ä¸æ˜¯ final çš„ï¼Œå®ƒå°±ä¼šå°†è¯¥ç±»å‹ä½œä¸ºåŸºç±»ï¼Œè€Œå¦ä¸€ä¸ªç±»å‹ä½œä¸ºæˆå‘˜å˜é‡ã€‚è¿™æ ·ï¼Œå¦‚æœåˆ é™¤å™¨æ˜¯ä¸€ä¸ªç©ºç±»ï¼ˆå¦‚ default_deleteï¼‰ï¼Œå®ƒå°±ä¸ä¼šå ç”¨ä»»ä½•é¢å¤–çš„å†…å­˜ç©ºé—´ã€‚ 3.2.2 ä¼˜åŒ–ç©ºåˆ é™¤å™¨çš„å­˜å‚¨å¼€é”€åœ¨ unique_ptr çš„å…¸å‹å®ç°ä¸­ï¼Œå…¶å”¯ä¸€çš„æˆå‘˜å˜é‡æ˜¯ä¸€ä¸ª compressed_pair&lt;pointer, deleter_type&gt;ã€‚å½“ä½¿ç”¨é»˜è®¤çš„ default_delete&lt;T&gt; æ—¶ï¼Œdeleter_type æ˜¯ä¸€ä¸ªç©ºç±»ã€‚compressed_pair ä¼šæ£€æµ‹åˆ°è¿™ä¸€ç‚¹ï¼Œå¹¶å°† deleter_type ä½œä¸ºå…¶åŸºç±»ã€‚ç”±äº EBOï¼Œè¿™ä¸ªåŸºç±»ä¸ä¼šå¢åŠ  compressed_pair çš„å¤§å°ã€‚ å› æ­¤ï¼Œunique_ptr çš„æœ€ç»ˆå¤§å°å°±åªæœ‰ä¸€ä¸ªæŒ‡é’ˆçš„å¤§å°ï¼Œä¸åŸå§‹æŒ‡é’ˆå®Œå…¨ç›¸åŒï¼Œå®ç°äº†é›¶å¼€é”€æŠ½è±¡ã€‚ è¿™ç§ä¼˜åŒ–æ˜¯ unique_ptr å°† Deleter ä½œä¸ºæ¨¡æ¿å‚æ•°è€Œéæ„é€ å‡½æ•°å‚æ•°çš„å…³é”®åŸå› ï¼Œä¹Ÿæ˜¯å…¶æ€§èƒ½ä¼˜äº shared_ptr çš„é‡è¦å› ç´ ä¹‹ä¸€ã€‚ 3.3 ç§»åŠ¨è¯­ä¹‰çš„å®ç°unique_ptr çš„ç‹¬å æ‰€æœ‰æƒè¯­ä¹‰æ˜¯é€šè¿‡ç¦ç”¨æ‹·è´æ“ä½œå¹¶å¯ç”¨ç§»åŠ¨æ“ä½œæ¥å®ç°çš„ã€‚ 3.3.1 åˆ é™¤æ‹·è´æ„é€ å‡½æ•°å’Œæ‹·è´èµ‹å€¼è¿ç®—ç¬¦ä¸ºäº†ç¡®ä¿æ‰€æœ‰æƒçš„å”¯ä¸€æ€§ï¼Œunique_ptr æ˜ç¡®åœ°å°†æ‹·è´æ„é€ å‡½æ•°å’Œæ‹·è´èµ‹å€¼è¿ç®—ç¬¦å£°æ˜ä¸º deleteã€‚è¿™æ„å‘³ç€ä»»ä½•è¯•å›¾å¤åˆ¶ unique_ptr çš„ä»£ç éƒ½ä¼šåœ¨ç¼–è¯‘æ—¶å¤±è´¥ï¼Œä»è€Œä»æ ¹æœ¬ä¸Šé˜²æ­¢äº†æ‰€æœ‰æƒçš„å…±äº«ã€‚ 3.3.2 å®ç°ç§»åŠ¨æ„é€ å‡½æ•°å’Œç§»åŠ¨èµ‹å€¼è¿ç®—ç¬¦unique_ptr æä¾›äº†ç§»åŠ¨æ„é€ å‡½æ•°å’Œç§»åŠ¨èµ‹å€¼è¿ç®—ç¬¦ï¼Œå®ƒä»¬å…è®¸å°†æ‰€æœ‰æƒä»ä¸€ä¸ª unique_ptr è½¬ç§»ç»™å¦ä¸€ä¸ªã€‚è¿™äº›å‡½æ•°çš„å®ç°é€šå¸¸æ¶‰åŠä»¥ä¸‹æ­¥éª¤ï¼š ä»æº unique_ptr ä¸­è·å–åŸå§‹æŒ‡é’ˆï¼ˆé€šè¿‡ release()ï¼‰ã€‚ å°†è·å–çš„æŒ‡é’ˆå­˜å‚¨åˆ°ç›®æ ‡ unique_ptr ä¸­ã€‚ å°†æº unique_ptr çš„åˆ é™¤å™¨ç§»åŠ¨æˆ–å¤åˆ¶åˆ°ç›®æ ‡ unique_ptr ä¸­ã€‚ ç¡®ä¿æº unique_ptr åœ¨æ“ä½œåå˜ä¸ºç©ºï¼ˆget() == nullptrï¼‰ã€‚ é€šè¿‡è¿™ç§æ–¹å¼ï¼Œunique_ptr å®ç°äº†æ‰€æœ‰æƒçš„æ˜ç¡®è½¬ç§»ï¼Œä¿è¯äº†åœ¨ä»»ä½•æ—¶å€™éƒ½åªæœ‰ä¸€ä¸ª unique_ptr å®ä¾‹è´Ÿè´£ç®¡ç†ä¸€ä¸ªç‰¹å®šçš„èµ„æºã€‚ 4. unique_ptr ä¸ shared_ptr çš„åŒºåˆ«unique_ptr å’Œ shared_ptr æ˜¯ C++ æ ‡å‡†åº“ä¸­ä¸¤ç§ä¸»è¦çš„æ™ºèƒ½æŒ‡é’ˆï¼Œå®ƒä»¬éƒ½ç”¨äºè‡ªåŠ¨ç®¡ç†åŠ¨æ€åˆ†é…çš„èµ„æºï¼Œä½†å…¶åº•å±‚æ‰€æœ‰æƒæ¨¡å‹ã€æ€§èƒ½å’Œé€‚ç”¨åœºæ™¯æœ‰æ˜¾è‘—ä¸åŒã€‚ 4.1 æ‰€æœ‰æƒæ¨¡å‹å¯¹æ¯”æ‰€æœ‰æƒæ¨¡å‹æ˜¯ unique_ptr å’Œ shared_ptr æœ€æ ¹æœ¬çš„åŒºåˆ«ã€‚ 4.1.1 unique_ptr çš„ç‹¬å æ‰€æœ‰æƒunique_ptr éµå¾ªç‹¬å æ‰€æœ‰æƒæ¨¡å‹ã€‚åœ¨ä»»ä½•ç»™å®šæ—¶åˆ»ï¼Œåªæœ‰ä¸€ä¸ª unique_ptr å®ä¾‹å¯ä»¥æ‹¥æœ‰ä¸€ä¸ªç‰¹å®šçš„å¯¹è±¡ã€‚å½“è¿™ä¸ª unique_ptr è¢«é”€æ¯æ—¶ï¼Œå®ƒæ‰€æ‹¥æœ‰çš„å¯¹è±¡ä¹Ÿä¼šè¢«é”€æ¯ã€‚ è¿™ç§æ¨¡å‹ä¿è¯äº†èµ„æºé‡Šæ”¾çš„ç¡®å®šæ€§å’Œå³æ—¶æ€§ã€‚æ‰€æœ‰æƒçš„è½¬ç§»åªèƒ½é€šè¿‡ç§»åŠ¨è¯­ä¹‰ï¼ˆstd::moveï¼‰æ¥å®Œæˆï¼Œè¿™ä½¿å¾—æ‰€æœ‰æƒçš„è½¬ç§»åœ¨ä»£ç ä¸­éå¸¸æ˜ç¡®ã€‚ 4.1.2 shared_ptr çš„å…±äº«æ‰€æœ‰æƒä¸å¼•ç”¨è®¡æ•°shared_ptr éµå¾ªå…±äº«æ‰€æœ‰æƒæ¨¡å‹ã€‚å¤šä¸ª shared_ptr å®ä¾‹å¯ä»¥åŒæ—¶æ‹¥æœ‰åŒä¸€ä¸ªå¯¹è±¡ã€‚ä¸ºäº†è·Ÿè¸ªæœ‰å¤šå°‘ä¸ª shared_ptr æ­£åœ¨å…±äº«ä¸€ä¸ªå¯¹è±¡ï¼Œshared_ptr å†…éƒ¨ä½¿ç”¨äº†ä¸€ä¸ªå¼•ç”¨è®¡æ•°å™¨ã€‚ æ¯å½“ä¸€ä¸ªæ–°çš„ shared_ptr è¢«åˆ›å»ºå¹¶æŒ‡å‘è¯¥å¯¹è±¡æ—¶ï¼Œå¼•ç”¨è®¡æ•°åŠ ä¸€ï¼›æ¯å½“ä¸€ä¸ª shared_ptr è¢«é”€æ¯æˆ–é‡ç½®æ—¶ï¼Œå¼•ç”¨è®¡æ•°å‡ä¸€ã€‚å½“å¼•ç”¨è®¡æ•°å˜ä¸ºé›¶æ—¶ï¼Œæ„å‘³ç€æ²¡æœ‰ shared_ptr å†æ‹¥æœ‰è¯¥å¯¹è±¡ï¼Œæ­¤æ—¶å¯¹è±¡ä¼šè¢«è‡ªåŠ¨é”€æ¯ã€‚ è¿™ç§æ¨¡å‹æä¾›äº†æ›´å¤§çš„çµæ´»æ€§ï¼Œä½†ä¹Ÿå¼•å…¥äº†é¢å¤–çš„å¼€é”€å’Œæ½œåœ¨çš„å¾ªç¯å¼•ç”¨é—®é¢˜ã€‚ 4.2 å¤åˆ¶ä¸ç§»åŠ¨è¯­ä¹‰å¯¹æ¯”æ‰€æœ‰æƒæ¨¡å‹çš„å·®å¼‚ç›´æ¥å¯¼è‡´äº†ä¸¤è€…åœ¨å¤åˆ¶å’Œç§»åŠ¨è¯­ä¹‰ä¸Šçš„ä¸åŒã€‚ 4.2.1 unique_ptr ä»…æ”¯æŒç§»åŠ¨unique_ptr æ˜ç¡®ç¦æ­¢æ‹·è´ï¼Œåªæ”¯æŒç§»åŠ¨ã€‚æ‹·è´æ„é€ å‡½æ•°å’Œæ‹·è´èµ‹å€¼è¿ç®—ç¬¦è¢«å£°æ˜ä¸º deleteï¼Œä»¥é˜²æ­¢æ‰€æœ‰æƒçš„æ„å¤–å…±äº«ã€‚ç§»åŠ¨æ“ä½œåˆ™é«˜æ•ˆåœ°è½¬ç§»æ‰€æœ‰æƒï¼Œæº unique_ptr åœ¨æ“ä½œåä¼šå˜ä¸ºç©ºã€‚ 4.2.2 shared_ptr æ”¯æŒå¤åˆ¶å’Œç§»åŠ¨shared_ptr æ—¢æ”¯æŒæ‹·è´ä¹Ÿæ”¯æŒç§»åŠ¨ã€‚ æ‹·è´ï¼šå½“ä¸€ä¸ª shared_ptr è¢«æ‹·è´æ—¶ï¼Œæ–°çš„ shared_ptr ä¼šä¸åŸ shared_ptr å…±äº«åŒä¸€ä¸ªå¯¹è±¡ï¼Œå¹¶ä¸”å¼•ç”¨è®¡æ•°ä¼šåŠ ä¸€ã€‚ ç§»åŠ¨ï¼šå½“ä¸€ä¸ª shared_ptr è¢«ç§»åŠ¨æ—¶ï¼Œæ‰€æœ‰æƒä¼šä»æº shared_ptr è½¬ç§»åˆ°ç›®æ ‡ shared_ptrï¼Œæº shared_ptr ä¼šå˜ä¸ºç©ºã€‚ä¸æ‹·è´ä¸åŒï¼Œç§»åŠ¨æ“ä½œä¸ä¼šä¿®æ”¹å¼•ç”¨è®¡æ•°ï¼Œå› æ­¤æ€§èƒ½æ›´é«˜ã€‚ 4.3 æ€§èƒ½ä¸å¼€é”€å¯¹æ¯”æ€§èƒ½å’Œå¼€é”€æ˜¯é€‰æ‹© unique_ptr è¿˜æ˜¯ shared_ptr æ—¶éœ€è¦è€ƒè™‘çš„é‡è¦å› ç´ ã€‚ 4.3.1 unique_ptr çš„è½»é‡çº§ç‰¹æ€§unique_ptr æ˜¯ä¸€ä¸ªéå¸¸è½»é‡çº§çš„æ™ºèƒ½æŒ‡é’ˆã€‚åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œå®ƒçš„å¤§å°ä¸åŸå§‹æŒ‡é’ˆç›¸åŒï¼Œå› ä¸ºå®ƒåˆ©ç”¨äº†ç©ºåŸºç±»ä¼˜åŒ–æ¥æ¶ˆé™¤æ— çŠ¶æ€åˆ é™¤å™¨çš„å­˜å‚¨å¼€é”€ã€‚ å®ƒçš„æ“ä½œï¼ˆå¦‚æ„é€ ã€ææ„ã€ç§»åŠ¨ï¼‰é€šå¸¸ä¸åŸå§‹æŒ‡é’ˆçš„æ“ä½œä¸€æ ·é«˜æ•ˆï¼Œæ²¡æœ‰é¢å¤–çš„è¿è¡Œæ—¶å¼€é”€ã€‚ 4.3.2 shared_ptr çš„å¼•ç”¨è®¡æ•°å¼€é”€shared_ptr çš„æ€§èƒ½å¼€é”€ç›¸å¯¹è¾ƒå¤§ã€‚è¿™ä¸»è¦æºäºå…¶å†…éƒ¨çš„å¼•ç”¨è®¡æ•°æœºåˆ¶ã€‚ å†…å­˜å¼€é”€ï¼šshared_ptr éœ€è¦ä¸ºæ¯ä¸ªç®¡ç†çš„å¯¹è±¡åˆ†é…ä¸€ä¸ªé¢å¤–çš„æ§åˆ¶å—ï¼ˆcontrol blockï¼‰æ¥å­˜å‚¨å¼•ç”¨è®¡æ•°å’Œå¼±å¼•ç”¨è®¡æ•°ã€‚è¿™ä½¿å¾— shared_ptr æœ¬èº«çš„å¤§å°é€šå¸¸æ˜¯åŸå§‹æŒ‡é’ˆçš„ä¸¤å€ï¼ˆä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘å¯¹è±¡ï¼Œä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘æ§åˆ¶å—ï¼‰ã€‚ è¿è¡Œæ—¶å¼€é”€ï¼šå¼•ç”¨è®¡æ•°çš„å¢å‡å¿…é¡»æ˜¯åŸå­æ“ä½œï¼Œä»¥ä¿è¯çº¿ç¨‹å®‰å…¨ã€‚è¿™äº›åŸå­æ“ä½œä¼šå¸¦æ¥ä¸€å®šçš„æ€§èƒ½å¼€é”€ï¼Œå°¤å…¶æ˜¯åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹é¢‘ç¹åˆ›å»ºå’Œé”€æ¯ shared_ptr æ—¶ã€‚ ç‰¹æ€§ std::unique_ptr std::shared_ptr æ‰€æœ‰æƒæ¨¡å‹ ç‹¬å æ‰€æœ‰æƒ å…±äº«æ‰€æœ‰æƒ å¤åˆ¶è¯­ä¹‰ ä¸æ”¯æŒï¼ˆè¢«åˆ é™¤ï¼‰ æ”¯æŒï¼ˆå¢åŠ å¼•ç”¨è®¡æ•°ï¼‰ ç§»åŠ¨è¯­ä¹‰ æ”¯æŒï¼ˆè½¬ç§»æ‰€æœ‰æƒï¼‰ æ”¯æŒï¼ˆè½¬ç§»æ‰€æœ‰æƒï¼Œä¸å¢åŠ è®¡æ•°ï¼‰ å†…å­˜å¼€é”€ ä¸€ä¸ªæŒ‡é’ˆå¤§å°ï¼ˆè½»é‡çº§ï¼‰ ä¸¤ä¸ªæŒ‡é’ˆå¤§å° + æ§åˆ¶å—ï¼ˆè¾ƒé‡ï¼‰ æ€§èƒ½å¼€é”€ æå° å¼•ç”¨è®¡æ•°çš„åŸå­æ“ä½œå¼€é”€ å¾ªç¯å¼•ç”¨ ä¸å­˜åœ¨ å¯èƒ½å¯¼è‡´å†…å­˜æ³„æ¼ï¼ˆéœ€é…åˆ weak_ptrï¼‰ é€‚ç”¨åœºæ™¯ ç‹¬å èµ„æºã€æ€§èƒ½æ•æ„Ÿã€å·¥å‚å‡½æ•° å…±äº«èµ„æºã€å¤æ‚æ•°æ®ç»“æ„ã€å¼‚æ­¥æ“ä½œ 4.4 é€‚ç”¨åœºæ™¯å¯¹æ¯”åŸºäºä»¥ä¸ŠåŒºåˆ«ï¼Œunique_ptr å’Œ shared_ptr é€‚ç”¨äºä¸åŒçš„åœºæ™¯ã€‚ 4.4.1 ä½•æ—¶é€‰æ‹© unique_ptr ç‹¬å æ‰€æœ‰æƒï¼šå½“èµ„æºçš„ç”Ÿå‘½å‘¨æœŸåº”è¯¥ç”±å•ä¸ªæ‰€æœ‰è€…æ˜ç¡®ç®¡ç†æ—¶ï¼Œåº”é¦–é€‰ unique_ptrã€‚ä¾‹å¦‚ï¼Œåœ¨å·¥å‚å‡½æ•°ä¸­åˆ›å»ºå¹¶è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œæˆ–è€…åœ¨ç±»ä¸­ä½œä¸ºæˆå‘˜å˜é‡ç®¡ç†ä¸€ä¸ªåŠ¨æ€åˆ†é…çš„å­å¯¹è±¡ã€‚ æ€§èƒ½æ•æ„Ÿï¼šåœ¨å¯¹æ€§èƒ½è¦æ±‚è¾ƒé«˜çš„åœºæ™¯ä¸‹ï¼Œåº”ä¼˜å…ˆä½¿ç”¨ unique_ptrï¼Œå› ä¸ºå®ƒæ²¡æœ‰å¼•ç”¨è®¡æ•°çš„å¼€é”€ã€‚ RAII å°è£…ï¼šå½“éœ€è¦å°è£…ä»»ä½•éœ€è¦ç‰¹æ®Šæ¸…ç†é€»è¾‘çš„èµ„æºï¼ˆå¦‚æ–‡ä»¶å¥æŸ„ã€æ•°æ®åº“è¿æ¥ç­‰ï¼‰æ—¶ï¼Œunique_ptr é…åˆè‡ªå®šä¹‰åˆ é™¤å™¨æ˜¯ä¸€ä¸ªéå¸¸å¥½çš„é€‰æ‹©ã€‚ 4.4.2 ä½•æ—¶é€‰æ‹© shared_ptr å…±äº«æ‰€æœ‰æƒï¼šå½“å¤šä¸ªå¯¹è±¡éœ€è¦å…±äº«åŒä¸€ä¸ªèµ„æºï¼Œå¹¶ä¸”èµ„æºçš„ç”Ÿå‘½å‘¨æœŸåº”è¯¥ç”±æœ€åä¸€ä¸ªä½¿ç”¨è€…å†³å®šæ—¶ï¼Œåº”ä½¿ç”¨ shared_ptrã€‚ä¾‹å¦‚ï¼Œåœ¨å¤æ‚çš„å¯¹è±¡å…³ç³»å›¾ä¸­ï¼Œæˆ–è€…åœ¨ç¼“å­˜ç³»ç»Ÿä¸­ã€‚ éœ€è¦å¤åˆ¶ï¼šå½“éœ€è¦å°†ä¸€ä¸ªæŒ‡é’ˆä¼ é€’ç»™å¤šä¸ªæ¥æ”¶è€…ï¼Œå¹¶ä¸”æ¯ä¸ªæ¥æ”¶è€…éƒ½å¯èƒ½å»¶é•¿è¯¥å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸæ—¶ï¼Œshared_ptr çš„æ‹·è´è¯­ä¹‰éå¸¸æœ‰ç”¨ã€‚ ä¸ weak_ptr é…åˆä½¿ç”¨ï¼šå½“éœ€è¦æ‰“ç ´å¾ªç¯å¼•ç”¨ï¼Œæˆ–è€…éœ€è¦è§‚å¯Ÿä¸€ä¸ªå¯¹è±¡ä½†ä¸æƒ³å½±å“å…¶ç”Ÿå‘½å‘¨æœŸæ—¶ï¼Œshared_ptr å¯ä»¥ä¸ weak_ptr é…åˆä½¿ç”¨ã€‚ 5. unique_ptr çš„å®é™…åº”ç”¨åœºæ™¯unique_ptr å‡­å€Ÿå…¶é«˜æ•ˆã€å®‰å…¨å’Œè¯­ä¹‰æ¸…æ™°çš„ç‰¹æ€§ï¼Œåœ¨ç°ä»£ C++ ç¼–ç¨‹ä¸­æœ‰ç€å¹¿æ³›çš„åº”ç”¨ã€‚ 5.1 ç®¡ç†åŠ¨æ€åˆ†é…çš„å¯¹è±¡unique_ptr æœ€å¸¸è§çš„ç”¨é€”æ˜¯ç®¡ç†é€šè¿‡ new åŠ¨æ€åˆ†é…çš„å¯¹è±¡ï¼Œç¡®ä¿å…¶å†…å­˜èƒ½å¤Ÿè¢«è‡ªåŠ¨é‡Šæ”¾ã€‚ 5.1.1 ä½œä¸ºç±»æˆå‘˜å˜é‡ï¼ˆpImpl æƒ¯ç”¨æ³•ï¼‰åœ¨ç±»è®¾è®¡ä¸­ï¼Œå°† unique_ptr ä½œä¸ºæˆå‘˜å˜é‡æ˜¯å®ç° pImplï¼ˆPointer to Implementationï¼‰ æƒ¯ç”¨æ³•çš„ç†æƒ³é€‰æ‹©ã€‚pImpl æƒ¯ç”¨æ³•é€šè¿‡å°†å®ç°ç»†èŠ‚éšè—åœ¨ä¸€ä¸ªä¸é€æ˜çš„æŒ‡é’ˆåé¢ï¼Œæ¥å‡å°‘ç¼–è¯‘ä¾èµ–å’Œæ¥å£çš„ç¨³å®šæ€§ã€‚ ä½¿ç”¨ unique_ptr ä½œä¸ºè¿™ä¸ªæŒ‡é’ˆï¼Œå¯ä»¥è‡ªåŠ¨ç®¡ç†å®ç°å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸï¼Œæ— éœ€åœ¨ç±»çš„ææ„å‡½æ•°ä¸­æ‰‹åŠ¨ deleteã€‚ 1234567891011121314151617181920// MyClass.hclass MyClass &#123;public: MyClass(); ~MyClass(); void doSomething();private: class Impl; // å‰å‘å£°æ˜ std::unique_ptr&lt;Impl&gt; pImpl;&#125;;// MyClass.cppclass MyClass::Impl &#123;public: void doSomething() &#123; /* ... */ &#125;&#125;;MyClass::MyClass() : pImpl(std::make_unique&lt;Impl&gt;()) &#123;&#125;MyClass::~MyClass() = default; // è‡ªåŠ¨ç”Ÿæˆï¼Œä¼šè°ƒç”¨ unique_ptr çš„ææ„å‡½æ•°void MyClass::doSomething() &#123; pImpl-&gt;doSomething(); &#125; è¿™ç§æ–¹å¼ä¸ä»…ç®€åŒ–äº†ä»£ç ï¼Œè¿˜æä¾›äº†å¼ºå¤§çš„å¼‚å¸¸å®‰å…¨ä¿éšœã€‚ 5.1.2 åœ¨å‡½æ•°ä¸­ä¼ é€’å’Œè¿”å›æ‰€æœ‰æƒunique_ptr éå¸¸é€‚åˆåœ¨å‡½æ•°ä¹‹é—´ä¼ é€’å’Œè¿”å›åŠ¨æ€åˆ†é…å¯¹è±¡çš„æ‰€æœ‰æƒã€‚ ä½œä¸ºè¿”å›å€¼ï¼šå·¥å‚å‡½æ•°å¯ä»¥è¿”å›ä¸€ä¸ª unique_ptrï¼Œå°†æ–°åˆ›å»ºå¯¹è±¡çš„æ‰€æœ‰æƒè½¬ç§»ç»™è°ƒç”¨è€…ã€‚ 123std::unique_ptr&lt;MyClass&gt; createMyClass() &#123; return std::make_unique&lt;MyClass&gt;();&#125; ä½œä¸ºå‚æ•°ï¼šå‡½æ•°å¯ä»¥é€šè¿‡å€¼æˆ–å³å€¼å¼•ç”¨çš„æ–¹å¼æ¥æ”¶ unique_ptrï¼Œä»¥æ¥ç®¡æ‰€æœ‰æƒã€‚ 123void processMyClass(std::unique_ptr&lt;MyClass&gt; ptr) &#123; // ptr ç°åœ¨æ‹¥æœ‰è¯¥å¯¹è±¡&#125; // ptr ç¦»å¼€ä½œç”¨åŸŸï¼Œå¯¹è±¡è¢«é”€æ¯ è¿™ç§æ–¹å¼ä½¿å¾—æ‰€æœ‰æƒçš„è½¬ç§»åœ¨ä»£ç ä¸­éå¸¸æ˜ç¡®ï¼Œé¿å…äº†æ‰€æœ‰æƒçš„æ··æ·†ã€‚ 5.2 ç®¡ç†åŠ¨æ€æ•°ç»„unique_ptr æä¾›äº†å¯¹åŠ¨æ€æ•°ç»„çš„ç‰¹åŒ–ç‰ˆæœ¬ unique_ptr&lt;T[]&gt;ï¼Œç”¨äºç®¡ç†é€šè¿‡ new[] åˆ†é…çš„æ•°ç»„ã€‚ 5.2.1 ä½¿ç”¨ unique_ptr&lt;T[]&gt;unique_ptr&lt;T[]&gt; çš„ç‰¹åŒ–ç‰ˆæœ¬é‡è½½äº† operator[]ï¼Œå¹¶ç¡®ä¿åœ¨ææ„æ—¶è°ƒç”¨ delete[] è€Œä¸æ˜¯ deleteã€‚ 1std::unique_ptr&lt;int[]&gt; arr(new int[10]); è¿™ä½¿å¾—ç®¡ç†åŠ¨æ€æ•°ç»„å˜å¾—åƒç®¡ç†å•ä¸ªå¯¹è±¡ä¸€æ ·ç®€å•å’Œå®‰å…¨ã€‚ 5.2.2 è®¿é—®æ•°ç»„å…ƒç´ å¯¹äº unique_ptr&lt;T[]&gt;ï¼Œå¯ä»¥ä½¿ç”¨ operator[] æ¥è®¿é—®æ•°ç»„çš„å…ƒç´ ï¼Œå°±åƒä½¿ç”¨æ™®é€šæ•°ç»„ä¸€æ ·ã€‚ 123std::unique_ptr&lt;int[]&gt; arr(new int[10]);arr[0] = 42;std::cout &lt;&lt; arr[0] &lt;&lt; std::endl; è¿™ç§æ–¹å¼æ¯”ä½¿ç”¨ std::vector æ›´è½»é‡ï¼Œä½†åŠŸèƒ½ä¹Ÿæ›´æœ‰é™ï¼Œå› ä¸ºå®ƒä¸æ”¯æŒåŠ¨æ€è°ƒæ•´å¤§å°ã€‚ 5.3 ä¸æ ‡å‡†åº“å®¹å™¨ç»“åˆä½¿ç”¨unique_ptr å¯ä»¥ä½œä¸ºæ ‡å‡†åº“å®¹å™¨ï¼ˆå¦‚ std::vectorï¼‰çš„å…ƒç´ ç±»å‹ï¼Œç”¨äºåˆ›å»ºå¤šæ€å¯¹è±¡å®¹å™¨ã€‚ 5.3.1 åœ¨ vector ä¸­å­˜å‚¨ unique_ptrç”±äº unique_ptr ä¸å¯æ‹·è´ï¼Œä½†å¯ç§»åŠ¨ï¼Œå› æ­¤å¯ä»¥å°†å…¶å­˜å‚¨åœ¨ std::vector ä¸­ã€‚è¿™ä½¿å¾—å¯ä»¥åˆ›å»ºä¸€ä¸ªæ‹¥æœ‰å…¶å…ƒç´ çš„å®¹å™¨ã€‚ 123std::vector&lt;std::unique_ptr&lt;MyClass&gt;&gt; vec;vec.push_back(std::make_unique&lt;MyClass&gt;());vec.push_back(std::make_unique&lt;MyClass&gt;()); å½“ vec è¢«é”€æ¯æ—¶ï¼Œå…¶æ‰€æœ‰å…ƒç´ ï¼ˆå³ unique_ptr å¯¹è±¡ï¼‰ä¹Ÿä¼šè¢«é”€æ¯ï¼Œä»è€Œè‡ªåŠ¨é‡Šæ”¾æ‰€æœ‰ç®¡ç†çš„ MyClass å¯¹è±¡ã€‚ 5.3.2 å®ç°å¤šæ€å®¹å™¨é€šè¿‡å°†åŸºç±»çš„ unique_ptr å­˜å‚¨åœ¨å®¹å™¨ä¸­ï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ªå¤šæ€å®¹å™¨ï¼Œç”¨äºå­˜å‚¨ä¸åŒæ´¾ç”Ÿç±»çš„å¯¹è±¡ã€‚ 123std::vector&lt;std::unique_ptr&lt;Base&gt;&gt; poly_vec;poly_vec.push_back(std::make_unique&lt;Derived1&gt;());poly_vec.push_back(std::make_unique&lt;Derived2&gt;()); å½“ poly_vec è¢«é”€æ¯æ—¶ï¼Œæ‰€æœ‰ Derived1 å’Œ Derived2 å¯¹è±¡éƒ½ä¼šè¢«è‡ªåŠ¨æ­£ç¡®åœ°é”€æ¯ã€‚ éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœé€šè¿‡åŸºç±» unique_ptr åˆ é™¤æ´¾ç”Ÿç±»å¯¹è±¡ï¼ŒåŸºç±»çš„ææ„å‡½æ•°å¿…é¡»æ˜¯è™šå‡½æ•°ï¼ˆvirtualï¼‰ï¼Œå¦åˆ™ä¼šå¯¼è‡´æœªå®šä¹‰è¡Œä¸ºã€‚ 5.4 è‡ªå®šä¹‰åˆ é™¤å™¨çš„åº”ç”¨unique_ptr çš„ç¬¬äºŒä¸ªæ¨¡æ¿å‚æ•° Deleter ä½¿å…¶èƒ½å¤Ÿç®¡ç†ä»»ä½•éœ€è¦ç‰¹æ®Šæ¸…ç†é€»è¾‘çš„èµ„æºï¼Œè€Œä¸ä»…ä»…æ˜¯é€šè¿‡ new åˆ†é…çš„å†…å­˜ã€‚ 5.4.1 ç®¡ç†æ–‡ä»¶å¥æŸ„ï¼ˆFILE*ï¼‰è¿™æ˜¯ä¸€ä¸ªç»å…¸çš„è‡ªå®šä¹‰åˆ é™¤å™¨åº”ç”¨åœºæ™¯ã€‚C æ ‡å‡†åº“ä¸­çš„æ–‡ä»¶æ“ä½œä½¿ç”¨ FILE* å¥æŸ„ï¼Œéœ€è¦é€šè¿‡ fclose æ¥å…³é—­ã€‚ 12345678910111213141516// å®šä¹‰ä¸€ä¸ªè‡ªå®šä¹‰åˆ é™¤å™¨auto file_deleter = [](std::FILE* fp) &#123; if (fp) &#123; std::fclose(fp); std::cout &lt;&lt; &quot;File closed.&quot; &lt;&lt; std::endl; &#125;&#125;;// åˆ›å»ºä¸€ä¸ª unique_ptr æ¥ç®¡ç† FILE*using unique_file_ptr = std::unique_ptr&lt;std::FILE, decltype(file_deleter)&gt;;unique_file_ptr file(std::fopen(&quot;example.txt&quot;, &quot;r&quot;), file_deleter);if (file) &#123; // ä½¿ç”¨æ–‡ä»¶...&#125;// å½“ file ç¦»å¼€ä½œç”¨åŸŸæ—¶ï¼Œfile_deleter ä¼šè¢«è‡ªåŠ¨è°ƒç”¨ï¼Œå…³é—­æ–‡ä»¶ 5.4.2 ç®¡ç†å…¶ä»–éœ€è¦ç‰¹æ®Šæ¸…ç†çš„èµ„æºé™¤äº†æ–‡ä»¶å¥æŸ„ï¼Œè‡ªå®šä¹‰åˆ é™¤å™¨è¿˜å¯ä»¥ç”¨äºç®¡ç†å„ç§å…¶ä»–èµ„æºï¼Œä¾‹å¦‚ï¼š ç½‘ç»œå¥—æ¥å­—ï¼šåˆ é™¤å™¨å¯ä»¥è°ƒç”¨ close æˆ– closesocket æ¥å…³é—­å¥—æ¥å­—ã€‚ æ•°æ®åº“è¿æ¥ï¼šåˆ é™¤å™¨å¯ä»¥è°ƒç”¨ç›¸åº”çš„ API æ¥æ–­å¼€æ•°æ®åº“è¿æ¥ã€‚ äº’æ–¥é”ï¼šåˆ é™¤å™¨å¯ä»¥è°ƒç”¨ unlock æ¥é‡Šæ”¾é”ï¼Œç¡®ä¿å³ä½¿åœ¨å¼‚å¸¸æƒ…å†µä¸‹é”ä¹Ÿèƒ½è¢«æ­£ç¡®é‡Šæ”¾ã€‚ å…±äº«å†…å­˜ï¼šåˆ é™¤å™¨å¯ä»¥è°ƒç”¨ shm_unlink æˆ–ç±»ä¼¼çš„å‡½æ•°æ¥æ¸…ç†å…±äº«å†…å­˜æ®µã€‚ é€šè¿‡è¿™ç§æ–¹å¼ï¼Œunique_ptr æˆä¸ºäº†ä¸€ä¸ªé€šç”¨çš„ RAII åŒ…è£…å™¨ï¼Œå¯ä»¥ç”¨äºç®¡ç†ä»»ä½•éœ€è¦æ˜¾å¼æ¸…ç†çš„èµ„æºï¼Œæå¤§åœ°æé«˜äº†ä»£ç çš„å¥å£®æ€§å’Œå®‰å…¨æ€§ã€‚","link":"","tags":[{"name":"C++","slug":"C","permalink":"https://lyroom.github.io/tags/C/"},{"name":"æ™ºèƒ½æŒ‡é’ˆ","slug":"æ™ºèƒ½æŒ‡é’ˆ","permalink":"https://lyroom.github.io/tags/%E6%99%BA%E8%83%BD%E6%8C%87%E9%92%88/"},{"name":"unique_ptr","slug":"unique-ptr","permalink":"https://lyroom.github.io/tags/unique-ptr/"}]},{"title":"C++æœèŠ±å¤•æ‹¾-assertå®ç”¨æ³•","date":"2025-09-22T13:40:37.000Z","path":"2025/09/22/C-æœèŠ±å¤•æ‹¾-assertå®ç”¨æ³•/","text":"åˆšå­¦äº† C++ çš„ å¼‚å¸¸æœºåˆ¶ï¼ˆthrow &#x2F; try &#x2F; catchï¼‰ï¼Œç°åœ¨é—®åˆ° assert â€”â€” å®ƒå’Œå¼‚å¸¸çœ‹ä¼¼éƒ½æ˜¯â€œæŠ¥é”™â€ï¼Œä½†ç”¨é€”ã€æ—¶æœºã€è¡Œä¸ºå®Œå…¨ä¸åŒï¼ ğŸ§© C++ ä¸­çš„ assert â€”â€” é€šä¿—æ˜“æ‡‚ + è¯¦ç»†å¯¹æ¯”å¼‚å¸¸æœºåˆ¶ âœ… ä¸€å¥è¯æ€»ç»“ï¼šassert æ˜¯â€œè°ƒè¯•æ–­è¨€â€ï¼Œç”¨äºå¼€å‘é˜¶æ®µæ•æ‰â€œç»ä¸åº”è¯¥å‘ç”Ÿâ€çš„ç¨‹åºé”™è¯¯ï¼›è€Œ å¼‚å¸¸ æ˜¯â€œè¿è¡Œæ—¶é”™è¯¯å¤„ç†â€ï¼Œç”¨äºå¤„ç†â€œå¯èƒ½å‘ç”Ÿâ€çš„æ„å¤–æƒ…å†µã€‚ ğŸ“Œ ä¸€ã€ä»€ä¹ˆæ˜¯ assertï¼Ÿassert æ˜¯ä¸€ä¸ªå®ï¼ˆmacroï¼‰ï¼Œå®šä¹‰åœ¨å¤´æ–‡ä»¶ &lt;cassert&gt; ä¸­ï¼ˆC è¯­è¨€æ˜¯ &lt;assert.h&gt;ï¼‰ã€‚ å®ƒçš„ä½œç”¨æ˜¯ï¼š â€œå¦‚æœæ¡ä»¶ä¸ºå‡ï¼ˆfalseï¼‰ï¼Œç¨‹åºç«‹å³ç»ˆæ­¢ï¼Œå¹¶è¾“å‡ºé”™è¯¯ä¿¡æ¯â€ ğŸ§ª åŸºæœ¬è¯­æ³•ï¼š123#include &lt;cassert&gt;assert(æ¡ä»¶è¡¨è¾¾å¼); ğŸ¯ äºŒã€assert çš„å…¸å‹ç”¨æ³•ï¼ˆè°ƒè¯•ç¥å™¨ï¼ï¼‰âœ… 1. æ£€æŸ¥å‡½æ•°å‚æ•°ï¼ˆå‰ç½®æ¡ä»¶ï¼‰12345678910111213#include &lt;cassert&gt;#include &lt;iostream&gt;using namespace std;double divide(double a, double b) &#123; assert(b != 0.0); // å¼€å‘æ—¶ç¡®ä¿è°ƒç”¨è€…ä¸ä¼šä¼  0 return a / b;&#125;int main() &#123; cout &lt;&lt; divide(10.0, 2.0) &lt;&lt; endl; // âœ… æ­£å¸¸ cout &lt;&lt; divide(10.0, 0.0) &lt;&lt; endl; // âŒ ç¨‹åºå´©æºƒï¼è¾“å‡ºé”™è¯¯ä½ç½®&#125; ğŸ’¥ å¦‚æœ b == 0.0ï¼Œç¨‹åºä¼šç«‹å³ç»ˆæ­¢ï¼Œå¹¶è¾“å‡ºç±»ä¼¼ï¼š 1Assertion failed: b != 0.0, file test.cpp, line 6 âœ… 2. æ£€æŸ¥å‡½æ•°è¿”å›å€¼æˆ–ä¸­é—´çŠ¶æ€ï¼ˆä¸å˜å¼ï¼‰12345678910int factorial(int n) &#123; assert(n &gt;= 0); // é˜¶ä¹˜ä¸èƒ½å¯¹è´Ÿæ•°è®¡ç®—ï¼ int result = 1; for (int i = 1; i &lt;= n; ++i) &#123; result *= i; assert(result &gt; 0); // é˜²æ­¢æ•´æ•°æº¢å‡ºï¼ˆè°ƒè¯•ç”¨ï¼‰ &#125; return result;&#125; âœ… 3. æ£€æŸ¥æŒ‡é’ˆä¸ä¸ºç©ºï¼ˆé˜²å´©æºƒï¼‰1234void printLength(const char* str) &#123; assert(str != nullptr); // ç¡®ä¿è°ƒç”¨è€…æ²¡ä¼ ç©ºæŒ‡é’ˆ cout &lt;&lt; &quot;é•¿åº¦: &quot; &lt;&lt; strlen(str) &lt;&lt; endl;&#125; âš™ï¸ ä¸‰ã€assert çš„åº•å±‚æœºåˆ¶ï¼ˆé‡ç‚¹ï¼ï¼‰assert æ˜¯ä¸€ä¸ªé¢„å¤„ç†å®ï¼Œå®ƒçš„è¡Œä¸ºå–å†³äºæ˜¯å¦å®šä¹‰äº† NDEBUG å®ï¼š ç¼–è¯‘æ¨¡å¼ NDEBUG æ˜¯å¦å®šä¹‰ assert è¡Œä¸º Debug æ¨¡å¼ âŒ æœªå®šä¹‰ âœ… æ£€æŸ¥æ¡ä»¶ï¼Œå¤±è´¥åˆ™ç»ˆæ­¢ Release æ¨¡å¼ âœ… å·²å®šä¹‰ âŒ è¢«å®Œå…¨ç§»é™¤ï¼Œæ— å¼€é”€ ğŸ” ä¸¾ä¸ªä¾‹å­ï¼š12345678910111213// ç¼–è¯‘æ—¶ï¼š// Debug: g++ -g -o test test.cpp// Release: g++ -DNDEBUG -O2 -o test test.cpp#include &lt;cassert&gt;#include &lt;iostream&gt;using namespace std;int main() &#123; int x = -1; assert(x &gt;= 0); // Debug æ¨¡å¼ä¸‹ä¼šå´©æºƒï¼ŒRelease æ¨¡å¼ä¸‹è¿™è¡Œä»£ç ä¸å­˜åœ¨ï¼ cout &lt;&lt; &quot;x = &quot; &lt;&lt; x &lt;&lt; endl;&#125; âœ… è®¾è®¡å“²å­¦ï¼šassert åªç”¨äºå¼€å‘è°ƒè¯•é˜¶æ®µï¼Œæ•æ‰ç¨‹åºå‘˜çš„é€»è¾‘é”™è¯¯ï¼›å‘å¸ƒç‰ˆæœ¬ä¸­å®Œå…¨æ¶ˆå¤±ï¼Œä¸å½±å“æ€§èƒ½ï¼ ğŸ†š å››ã€assert vs å¼‚å¸¸ â€”â€” æ ¸å¿ƒåŒºåˆ«è¡¨ ç‰¹æ€§ assert å¼‚å¸¸ (throw/catch) ç”¨é€” æ•æ‰â€œç¨‹åºå‘˜é”™è¯¯â€ï¼ˆä¸è¯¥å‘ç”Ÿçš„ï¼‰ å¤„ç†â€œè¿è¡Œæ—¶é”™è¯¯â€ï¼ˆå¯èƒ½å‘ç”Ÿçš„ï¼‰ æ˜¯å¦å¯æ¢å¤ âŒ ç¨‹åºç›´æ¥ç»ˆæ­¢ âœ… å¯æ•è·å¹¶æ¢å¤ æ˜¯å¦å½±å“å‘å¸ƒç‰ˆ âŒ Release æ¨¡å¼ä¸‹è¢«ç§»é™¤ âœ… å§‹ç»ˆå­˜åœ¨ æ€§èƒ½å¼€é”€ âŒ Debug æœ‰å¼€é”€ï¼ŒRelease æ— å¼€é”€ âœ… æ— å¼‚å¸¸æ—¶å¼€é”€æå°ï¼ŒæŠ›å¼‚å¸¸æ—¶è¾ƒå¤§ é€‚ç”¨é˜¶æ®µ å¼€å‘è°ƒè¯•é˜¶æ®µ å¼€å‘ + å‘å¸ƒé˜¶æ®µ å…¸å‹åœºæ™¯ å‚æ•°æ£€æŸ¥ã€ä¸å˜å¼ã€å†…éƒ¨é€»è¾‘é”™è¯¯ æ–‡ä»¶æ‰“ä¸å¼€ã€ç½‘ç»œæ–­å¼€ã€ç”¨æˆ·è¾“å…¥é”™è¯¯ èƒ½å¦è¢«å¿½ç•¥ âŒ ä¸èƒ½ï¼ˆç›´æ¥ crashï¼‰ âœ… èƒ½ï¼ˆä½†ä¸æ¨èï¼‰ ğŸš« äº”ã€ä»€ä¹ˆæ—¶å€™ä¸è¯¥ç”¨ assertï¼ŸâŒ 1. æ£€æŸ¥ç”¨æˆ·è¾“å…¥123int age;cin &gt;&gt; age;assert(age &gt;= 0); // âŒ é”™è¯¯ï¼ç”¨æˆ·å¯èƒ½è¾“å…¥è´Ÿæ•°ï¼Œè¿™æ˜¯â€œå¯é¢„æœŸé”™è¯¯â€ âœ… åº”è¯¥ç”¨å¼‚å¸¸æˆ–é”™è¯¯ç ï¼š 123if (age &lt; 0) &#123; throw invalid_argument(&quot;å¹´é¾„ä¸èƒ½ä¸ºè´Ÿæ•°ï¼&quot;);&#125; âŒ 2. æ£€æŸ¥æ–‡ä»¶&#x2F;ç½‘ç»œç­‰å¤–éƒ¨èµ„æº12FILE* f = fopen(&quot;data.txt&quot;, &quot;r&quot;);assert(f != nullptr); // âŒ é”™è¯¯ï¼æ–‡ä»¶å¯èƒ½ä¸å­˜åœ¨ï¼Œè¿™æ˜¯â€œè¿è¡Œæ—¶å¼‚å¸¸â€ âœ… åº”è¯¥ç”¨å¼‚å¸¸ï¼š 123if (!f) &#123; throw runtime_error(&quot;æ— æ³•æ‰“å¼€æ–‡ä»¶ data.txt&quot;);&#125; âŒ 3. åœ¨ææ„å‡½æ•°ä¸­ä½¿ç”¨ï¼ˆå±é™©ï¼ï¼‰123~MyClass() &#123; assert(ptr != nullptr); // âŒ å¦‚æœ assert å¤±è´¥ â†’ ç¨‹åºç»ˆæ­¢ï¼Œå¯èƒ½æ©ç›–æ›´ä¸¥é‡é—®é¢˜&#125; âœ… åº”è®°å½•æ—¥å¿—æˆ–é™é»˜å¤„ç†ã€‚ âœ… å…­ã€ä»€ä¹ˆæ—¶å€™è¯¥ç”¨ assertï¼Ÿ åœºæ™¯ ç¤ºä¾‹ å‡½æ•°å‰ç½®æ¡ä»¶ assert(index &gt;= 0 &amp;&amp; index &lt; size); å¾ªç¯ä¸å˜å¼ assert(total &gt;= 0); æŒ‡é’ˆæœ‰æ•ˆæ€§ assert(p != nullptr); ç®—æ³•å†…éƒ¨çŠ¶æ€ assert(sorted == true); æµ‹è¯•é©±åŠ¨å¼€å‘ assert(result == expected); ğŸ¯ é»„é‡‘æ³•åˆ™ï¼šâ€œå¦‚æœè¿™ä¸ªæ¡ä»¶ä¸ºå‡ï¼Œè¯´æ˜æˆ‘çš„ä»£ç æœ‰ bug â€”â€” ç”¨ assertâ€â€œå¦‚æœè¿™ä¸ªæ¡ä»¶ä¸ºå‡ï¼Œæ˜¯ç”¨æˆ·&#x2F;ç¯å¢ƒçš„é—®é¢˜ â€”â€” ç”¨å¼‚å¸¸â€ ğŸ§° ä¸ƒã€è‡ªå®šä¹‰æ–­è¨€ï¼ˆé«˜çº§æŠ€å·§ï¼‰ä½ å¯ä»¥å®šä¹‰è‡ªå·±çš„æ–­è¨€å®ï¼Œæ·»åŠ æ›´å¤šä¿¡æ¯ï¼š 1234567891011121314151617#include &lt;iostream&gt;#include &lt;cstdlib&gt;#define MY_ASSERT(expr, msg) \\ do &#123; \\ if (!(expr)) &#123; \\ std::cerr &lt;&lt; &quot;Assertion failed: &quot; &lt;&lt; #expr \\ &lt;&lt; &quot; (&quot; &lt;&lt; msg &lt;&lt; &quot;) &quot; \\ &lt;&lt; &quot;in &quot; &lt;&lt; __FILE__ &lt;&lt; &quot;:&quot; &lt;&lt; __LINE__ &lt;&lt; std::endl; \\ std::abort(); \\ &#125; \\ &#125; while(0)void test() &#123; int x = -1; MY_ASSERT(x &gt;= 0, &quot;x åº”è¯¥æ˜¯éè´Ÿæ•°&quot;); &#125; ğŸ–¨ï¸ è¾“å‡ºï¼š 1Assertion failed: x &gt;= 0 (x åº”è¯¥æ˜¯éè´Ÿæ•°) in test.cpp:15 ğŸ“Š å…«ã€assert åœ¨å¤§å‹é¡¹ç›®ä¸­çš„ä½¿ç”¨ï¼ˆGoogle &#x2F; Microsoft é£æ ¼ï¼‰ Google C++ Style Guideï¼šé¼“åŠ±ä½¿ç”¨ assert æ£€æŸ¥å†…éƒ¨ä¸å˜å¼ Microsoftï¼šåœ¨ Windows å†…æ ¸å¼€å‘ä¸­å¤§é‡ä½¿ç”¨ NT_ASSERT æ¸¸æˆå¼•æ“ï¼ˆå¦‚ Unrealï¼‰ï¼šcheck() å®ï¼ˆç±»ä¼¼ assertï¼‰ âœ… åŸåˆ™ï¼šâ€œFail Fastâ€ â€”â€” å°½æ—©å´©æºƒï¼Œæ¯”éšè— bug å¯¼è‡´åç»­ç¾éš¾è¦å¥½ï¼ ğŸ§  ä¹ã€è€ƒè€ƒä½ ï¼ä¸‹é¢ä»£ç åœ¨ Debug å’Œ Release æ¨¡å¼ä¸‹åˆ†åˆ«è¾“å‡ºä»€ä¹ˆï¼Ÿ 1234567891011121314#include &lt;cassert&gt;#include &lt;iostream&gt;using namespace std;int getValue() &#123; cout &lt;&lt; &quot;getValue è¢«è°ƒç”¨äº†ï¼&quot; &lt;&lt; endl; return -1;&#125;int main() &#123; assert(getValue() &gt;= 0); cout &lt;&lt; &quot;ç¨‹åºç»§ç»­...&quot; &lt;&lt; endl; return 0;&#125; âœ… Debug æ¨¡å¼ï¼š 123getValue è¢«è°ƒç”¨äº†ï¼Assertion failed: getValue() &gt;= 0, file test.cpp, line 10ğŸ’¥ ç¨‹åºç»ˆæ­¢ï¼Œä¸ä¼šè¾“å‡ºâ€œç¨‹åºç»§ç»­...â€ âœ… Release æ¨¡å¼ï¼š 1ç¨‹åºç»§ç»­... ğŸŒŸ è§£é‡Šï¼šRelease æ¨¡å¼ä¸‹ assert(...) æ•´è¡Œè¢«é¢„å¤„ç†å™¨åˆ é™¤ï¼ŒgetValue() æ ¹æœ¬ä¸ä¼šè¢«è°ƒç”¨ï¼ ğŸ§© åã€static_assert â€”â€” ç¼–è¯‘æœŸæ–­è¨€ï¼ˆC++11ï¼‰é™¤äº†è¿è¡Œæ—¶ assertï¼ŒC++11 å¼•å…¥äº† ç¼–è¯‘æœŸæ–­è¨€ï¼š 1static_assert(sizeof(int) == 4, &quot;int å¿…é¡»æ˜¯ 4 å­—èŠ‚ï¼&quot;); åœ¨ç¼–è¯‘æ—¶æ£€æŸ¥æ¡ä»¶ å¤±è´¥åˆ™ç¼–è¯‘æŠ¥é”™ å¸¸ç”¨äºæ¨¡æ¿å…ƒç¼–ç¨‹ã€ç±»å‹æ£€æŸ¥ 12345template&lt;typename T&gt;void process() &#123; static_assert(std::is_integral_v&lt;T&gt;, &quot;T å¿…é¡»æ˜¯æ•´æ•°ç±»å‹ï¼&quot;); // ...&#125; ğŸ“Œ æ€»ç»“ï¼šassert ä½¿ç”¨å£è¯€ âœ… ç”¨ assertï¼š æ£€æŸ¥â€œç¨‹åºå‘˜çš„é”™â€ è°ƒè¯•é˜¶æ®µæ•æ‰ bug å†…éƒ¨é€»è¾‘ã€ä¸å˜å¼ã€å‰ç½®æ¡ä»¶ â€œFail Fastâ€ åŸåˆ™ âŒ ä¸ç”¨ assertï¼š ç”¨æˆ·è¾“å…¥ã€å¤–éƒ¨èµ„æºã€å¯æ¢å¤é”™è¯¯ å‘å¸ƒç‰ˆæœ¬ä¸­éœ€è¦å¤„ç†çš„é”™è¯¯ ææ„å‡½æ•°ä¸­ ğŸ”„ ç”¨å¼‚å¸¸ï¼š å¤„ç†â€œå¯èƒ½å‘ç”Ÿâ€çš„è¿è¡Œæ—¶é”™è¯¯ éœ€è¦æ¢å¤æˆ–é€šçŸ¥ç”¨æˆ·çš„åœºæ™¯ åº“å‡½æ•°ã€API è®¾è®¡ ğŸ¯ ç»ˆæå»ºè®®ï¼š æŠŠ assert å½“ä½œä½ çš„â€œä»£ç ä¿é•–â€ï¼Œåœ¨å¼€å‘é˜¶æ®µå¸®ä½ æªå‡ºéšè—çš„é€»è¾‘é”™è¯¯ï¼›æŠŠ å¼‚å¸¸ å½“ä½œä½ çš„â€œé”™è¯¯å¤„ç†ä¸“å®¶â€ï¼Œåœ¨è¿è¡Œæ—¶ä¼˜é›…åº”å¯¹å„ç§æ„å¤–æƒ…å†µã€‚ ä¸¤è€…é…åˆï¼Œè®©ä½ çš„ C++ ç¨‹åºæ—¢å¥å£®åˆå®‰å…¨ï¼","link":"","tags":[{"name":"C++","slug":"C","permalink":"https://lyroom.github.io/tags/C/"},{"name":"æœèŠ±å¤•æ‹¾","slug":"æœèŠ±å¤•æ‹¾","permalink":"https://lyroom.github.io/tags/%E6%9C%9D%E8%8A%B1%E5%A4%95%E6%8B%BE/"},{"name":"assert","slug":"assert","permalink":"https://lyroom.github.io/tags/assert/"},{"name":"æ–­è¨€","slug":"æ–­è¨€","permalink":"https://lyroom.github.io/tags/%E6%96%AD%E8%A8%80/"}]},{"title":"C++æœèŠ±å¤•æ‹¾-å¼‚å¸¸æœºåˆ¶","date":"2025-09-22T12:49:47.000Z","path":"2025/09/22/C-æœèŠ±å¤•æ‹¾-å¼‚å¸¸æœºåˆ¶/","text":"ğŸš¨ C++ å¼‚å¸¸æœºåˆ¶ â€”â€” ä»é›¶åˆ°ç²¾é€š ğŸ’¡ ä¸€å¥è¯æ€»ç»“ï¼šâ€œå¼‚å¸¸ &#x3D; ç¨‹åºè¿è¡Œæ—¶å‘ç”Ÿçš„â€˜æ„å¤–æƒ…å†µâ€™ï¼ŒC++ ç”¨ throw, try, catch ä¸‰å‰‘å®¢æ¥å¤„ç†å®ƒï¼Œè®©ç¨‹åºä¸å´©æºƒã€èƒ½æ¢å¤ã€æœ‰å°Šä¸¥åœ°æŠ¥é”™ã€‚â€ ğŸ¯ ä¸€ã€ä¸ºä»€ä¹ˆè¦å­¦å¼‚å¸¸ï¼Ÿâ€”â€” å…ˆçœ‹â€œæ²¡æœ‰å¼‚å¸¸â€çš„ç—›è‹¦ğŸ‘¶ ä¼ ç»Ÿé”™è¯¯å¤„ç†æ–¹å¼ï¼šè¿”å›é”™è¯¯ç ï¼ˆreturn -1, NULL, falseâ€¦ï¼‰123456789101112131415int divide(int a, int b) &#123; if (b == 0) &#123; return -1; // ç”¨ -1 è¡¨ç¤ºâ€œé™¤é›¶é”™è¯¯â€ &#125; return a / b;&#125;int main() &#123; int result = divide(10, 0); if (result == -1) &#123; cout &lt;&lt; &quot;é”™è¯¯ï¼šé™¤æ•°ä¸èƒ½ä¸º0ï¼&quot; &lt;&lt; endl; &#125; else &#123; cout &lt;&lt; &quot;ç»“æœæ˜¯ï¼š&quot; &lt;&lt; result &lt;&lt; endl; &#125;&#125; â— é—®é¢˜æ¥äº†ï¼š å¦‚æœå¿˜è®°æ£€æŸ¥è¿”å›å€¼ï¼Ÿâ†’ ç¨‹åºé€»è¾‘é”™ä¹±ï¼ å¦‚æœå‡½æ•°è¦è¿”å›â€œæ­£å¸¸å€¼â€å’Œâ€œé”™è¯¯ç â€ï¼Ÿâ†’ è®¾è®¡æ··ä¹±ï¼ å¦‚æœé”™è¯¯å‘ç”Ÿåœ¨â€œæ·±å±‚è°ƒç”¨â€ä¸­ï¼Ÿâ†’ ä¸€å±‚å±‚å¾€ä¸Šä¼ ï¼Œä»£ç è‡ƒè‚¿ï¼ ğŸŒŸ äºŒã€å¼‚å¸¸æœºåˆ¶ç™»åœº â€”â€” throw, try, catchC++ å¼‚å¸¸æœºåˆ¶ä¸‰å¤§å…³é”®å­—ï¼š å…³é”®å­— ä½œç”¨ throw æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ï¼ˆç›¸å½“äºâ€œæŠ¥è­¦â€ï¼‰ try åŒ…è£¹å¯èƒ½å‡ºé”™çš„ä»£ç ï¼ˆâ€œç›‘æ§åŒºâ€ï¼‰ catch æ•è·å¹¶å¤„ç†å¼‚å¸¸ï¼ˆâ€œæ¥è­¦å¤„ç†â€ï¼‰ ğŸ¬ ç”Ÿæ´»åŒ–æ¯”å–»ï¼šé¤å…ç‚¹é¤ ä½ ç‚¹äº†ä¸€ä»½â€œç‰›æ’â€ â†’ try &#123; ç‚¹é¤(); &#125; å¨æˆ¿å‘ç°â€œç‰›è‚‰å–å®Œäº†â€ â†’ throw &quot;æ²¡ç‰›è‚‰äº†ï¼&quot;; æœåŠ¡å‘˜æ¥åˆ°é€šçŸ¥ â†’ catch (string msg) &#123; å‘Šè¯‰é¡¾å®¢ + æ¨èåˆ«çš„èœ &#125; é¡¾å®¢ä¸ä¼šå› ä¸ºâ€œæ²¡ç‰›è‚‰â€æ€æ¡Œå­ï¼ˆç¨‹åºä¸å´©æºƒï¼‰ï¼Œè€Œæ˜¯ä¼˜é›…æ¢èœ ğŸ˜Š ğŸ§© ä¸‰ã€åŸºæœ¬è¯­æ³• + ç¤ºä¾‹âœ… 1. æŠ›å‡ºå¼‚å¸¸ï¼šthrow è¡¨è¾¾å¼;123456789void checkAge(int age) &#123; if (age &lt; 0) &#123; throw &quot;å¹´é¾„ä¸èƒ½ä¸ºè´Ÿæ•°ï¼&quot;; // æŠ›å‡ºå­—ç¬¦ä¸²å¼‚å¸¸ &#125; if (age &gt; 150) &#123; throw 999; // æŠ›å‡ºæ•´æ•°å¼‚å¸¸ï¼ˆä¸æ¨èï¼Œä½†åˆæ³•ï¼‰ &#125; cout &lt;&lt; &quot;å¹´é¾„åˆæ³•ï¼š&quot; &lt;&lt; age &lt;&lt; endl;&#125; ğŸ’¡ throw å¯ä»¥æŠ›å‡º ä»»ä½•ç±»å‹ï¼šint, string, char*, è‡ªå®šä¹‰ç±»å¯¹è±¡ç­‰âœ… æ¨èæŠ›å‡º å¼‚å¸¸ç±»å¯¹è±¡ï¼ˆåæ–‡è®²ï¼‰ âœ… 2. æ•è·å¼‚å¸¸ï¼štry &#123; ... &#125; catch (...) &#123; ... &#125;123456789101112int main() &#123; try &#123; checkAge(-5); // å¯èƒ½æŠ›å¼‚å¸¸ &#125; catch (const char* msg) &#123; // æ•è· char* ç±»å‹å¼‚å¸¸ cout &lt;&lt; &quot;æ•è·åˆ°å¼‚å¸¸ï¼š&quot; &lt;&lt; msg &lt;&lt; endl; &#125; catch (int code) &#123; // æ•è· int ç±»å‹å¼‚å¸¸ cout &lt;&lt; &quot;é”™è¯¯ä»£ç ï¼š&quot; &lt;&lt; code &lt;&lt; endl; &#125; cout &lt;&lt; &quot;ç¨‹åºç»§ç»­è¿è¡Œ...&quot; &lt;&lt; endl; return 0;&#125; ğŸ–¨ï¸ è¾“å‡ºï¼š 12æ•è·åˆ°å¼‚å¸¸ï¼šå¹´é¾„ä¸èƒ½ä¸ºè´Ÿæ•°ï¼ç¨‹åºç»§ç»­è¿è¡Œ... ğŸ§± å››ã€å¼‚å¸¸çš„ä¼ æ’­ï¼ˆæ ˆå±•å¼€ â€”â€” Stack Unwindingï¼‰â“ é—®é¢˜ï¼šå¦‚æœå¼‚å¸¸å‘ç”Ÿåœ¨â€œå‡½æ•°è°ƒç”¨æ·±å¤„â€ï¼Œæ€ä¹ˆåŠï¼Ÿ1234567891011121314151617181920void func3() &#123; throw &quot;func3 å‡ºé”™äº†ï¼&quot;;&#125;void func2() &#123; func3(); // func3 æŠ›å¼‚å¸¸ cout &lt;&lt; &quot;è¿™è¡Œä¸ä¼šæ‰§è¡Œï¼&quot; &lt;&lt; endl;&#125;void func1() &#123; func2();&#125;int main() &#123; try &#123; func1(); // å¼‚å¸¸ä» func3 ä¸€è·¯â€œå†’æ³¡â€åˆ° main &#125; catch (const char* msg) &#123; cout &lt;&lt; &quot;main æ•è·ï¼š&quot; &lt;&lt; msg &lt;&lt; endl; &#125;&#125; ğŸ”„ æ ˆå±•å¼€è¿‡ç¨‹ï¼š func3() æŠ›å¼‚å¸¸ func3() ç«‹åˆ»é€€å‡º â†’ ææ„å±€éƒ¨å¯¹è±¡ func2() é€€å‡º â†’ ææ„å±€éƒ¨å¯¹è±¡ func1() é€€å‡º â†’ ææ„å±€éƒ¨å¯¹è±¡ main() çš„ catch æ•è·å¼‚å¸¸ â†’ ç¨‹åºç»§ç»­ âœ… å…³é”®ç‚¹ï¼šå¼‚å¸¸ä¼šæ²¿ç€è°ƒç”¨æ ˆâ€œå‘ä¸Šä¼ æ’­â€ï¼Œç›´åˆ°è¢«æ•è·ï¼Œä¸­é—´å‡½æ•°å…¨éƒ¨é€€å‡ºï¼ˆå±€éƒ¨å¯¹è±¡è¢«ææ„ï¼‰ï¼ ğŸ§° äº”ã€æ ‡å‡†å¼‚å¸¸ç±»ï¼ˆæ¨èä½¿ç”¨ï¼ï¼‰C++ æ ‡å‡†åº“æä¾›äº†ä¸€å¥—å¼‚å¸¸ç±»ï¼ˆåœ¨ &lt;stdexcept&gt; ä¸­ï¼‰ï¼Œå»ºè®®ä¼˜å…ˆä½¿ç”¨ï¼š å¼‚å¸¸ç±» ç”¨é€” std::runtime_error è¿è¡Œæ—¶é”™è¯¯ï¼ˆå¦‚æ–‡ä»¶æ‰“ä¸å¼€ï¼‰ std::logic_error é€»è¾‘é”™è¯¯ï¼ˆå¦‚ä¼ å‚é”™è¯¯ï¼‰ std::invalid_argument æ— æ•ˆå‚æ•° std::out_of_range è¶Šç•Œè®¿é—®ï¼ˆå¦‚ vectorï¼‰ âœ… ç¤ºä¾‹ï¼šä½¿ç”¨æ ‡å‡†å¼‚å¸¸12345678910111213141516171819202122#include &lt;stdexcept&gt;#include &lt;iostream&gt;using namespace std;double divide(double a, double b) &#123; if (b == 0.0) &#123; throw invalid_argument(&quot;é™¤æ•°ä¸èƒ½ä¸ºé›¶ï¼&quot;); &#125; return a / b;&#125;int main() &#123; try &#123; cout &lt;&lt; divide(10.0, 0.0) &lt;&lt; endl; &#125; catch (const invalid_argument&amp; e) &#123; cout &lt;&lt; &quot;å‚æ•°é”™è¯¯ï¼š&quot; &lt;&lt; e.what() &lt;&lt; endl; &#125; catch (const exception&amp; e) &#123; // åŸºç±»ï¼Œæ•è·æ‰€æœ‰æ ‡å‡†å¼‚å¸¸ cout &lt;&lt; &quot;æ ‡å‡†å¼‚å¸¸ï¼š&quot; &lt;&lt; e.what() &lt;&lt; endl; &#125; return 0;&#125; ğŸ“Œ .what() æ˜¯ std::exception çš„è™šå‡½æ•°ï¼Œè¿”å›é”™è¯¯æè¿°å­—ç¬¦ä¸²ã€‚ ğŸ› ï¸ å…­ã€è‡ªå®šä¹‰å¼‚å¸¸ç±»ï¼ˆé«˜çº§ç”¨æ³•ï¼‰ä½ å¯ä»¥ç»§æ‰¿ std::exception æˆ–å…¶å­ç±»ï¼Œåˆ›å»ºè‡ªå·±çš„å¼‚å¸¸ï¼š 123456789101112131415161718192021class MyException : public std::exception &#123;private: string msg;public: MyException(const string&amp; m) : msg(m) &#123;&#125; const char* what() const noexcept override &#123; return msg.c_str(); &#125;&#125;;void riskyFunction() &#123; throw MyException(&quot;æˆ‘çš„è‡ªå®šä¹‰å¼‚å¸¸ï¼&quot;);&#125;int main() &#123; try &#123; riskyFunction(); &#125; catch (const MyException&amp; e) &#123; cout &lt;&lt; &quot;æ•è·è‡ªå®šä¹‰å¼‚å¸¸ï¼š&quot; &lt;&lt; e.what() &lt;&lt; endl; &#125;&#125; âœ… è‡ªå®šä¹‰å¼‚å¸¸ &#x3D; æ›´ç²¾ç¡®çš„é”™è¯¯åˆ†ç±» + æ›´ä¸°å¯Œçš„é”™è¯¯ä¿¡æ¯ï¼ âš ï¸ ä¸ƒã€å¼‚å¸¸è§„èŒƒï¼ˆC++11 èµ·å·²åºŸå¼ƒï¼Œäº†è§£å³å¯ï¼‰è€ç‰ˆæœ¬ C++ æ”¯æŒå¼‚å¸¸è§„èŒƒï¼š 12void func() throw(int); // åªå…è®¸æŠ› int å¼‚å¸¸ï¼ˆå·²åºŸå¼ƒï¼‰void func() throw(); // ä¸å…è®¸æŠ›ä»»ä½•å¼‚å¸¸ï¼ˆå·²åºŸå¼ƒï¼‰ ğŸš« C++11 èµ·åºŸå¼ƒï¼Œæ”¹ç”¨ noexceptï¼š 123void safeFunc() noexcept &#123; // æ‰¿è¯ºä¸æŠ›å¼‚å¸¸ // å¦‚æœè¿™é‡Œ throw äº† â†’ std::terminate() ç¨‹åºç»ˆæ­¢ï¼&#125; ğŸ”„ å…«ã€é‡æ–°æŠ›å‡ºå¼‚å¸¸ï¼ˆthrow;ï¼‰åœ¨ catch å—ä¸­ï¼Œä½ å¯ä»¥â€œå¤„ç†ä¸€éƒ¨åˆ†ï¼Œå†æŠ›å‡ºå»â€ï¼š 12345678910111213141516void handlePartially() &#123; try &#123; riskyOperation(); &#125; catch (...) &#123; cout &lt;&lt; &quot;è®°å½•æ—¥å¿—ï¼šå‘ç”Ÿå¼‚å¸¸ï¼&quot; &lt;&lt; endl; throw; // é‡æ–°æŠ›å‡ºå½“å‰å¼‚å¸¸ï¼ˆä¸æ”¹å˜ç±»å‹ï¼ï¼‰ &#125;&#125;int main() &#123; try &#123; handlePartially(); &#125; catch (const char* msg) &#123; cout &lt;&lt; &quot;æœ€ç»ˆå¤„ç†ï¼š&quot; &lt;&lt; msg &lt;&lt; endl; &#125;&#125; âœ… ç”¨é€”ï¼šæ—¥å¿—è®°å½•ã€èµ„æºæ¸…ç†ã€éƒ¨åˆ†å¤„ç†åäº¤ç»™ä¸Šå±‚ã€‚ ğŸ§¹ ä¹ã€å¼‚å¸¸å®‰å…¨ä¸ RAIIï¼ˆé‡è¦ï¼ï¼‰â— å¼‚å¸¸å¯èƒ½å¯¼è‡´èµ„æºæ³„æ¼ï¼12345void badExample() &#123; int* p = new int[1000]; riskyFunction(); // å¦‚æœè¿™é‡ŒæŠ›å¼‚å¸¸ â†’ p æ°¸è¿œä¸ä¼š deleteï¼ delete[] p;&#125; âœ… è§£å†³æ–¹æ¡ˆï¼šRAII + æ™ºèƒ½æŒ‡é’ˆ123456#include &lt;memory&gt;void goodExample() &#123; auto p = std::make_unique&lt;int[]&gt;(1000); // æ™ºèƒ½æŒ‡é’ˆ riskyFunction(); // å³ä½¿æŠ›å¼‚å¸¸ï¼Œp ä¹Ÿä¼šè‡ªåŠ¨ææ„ï¼ // ä¸ç”¨æ‰‹åŠ¨ delete&#125; ğŸŒŸ RAII åŸåˆ™ï¼šèµ„æºè·å–å³åˆå§‹åŒ–ï¼Œç»‘å®šå¯¹è±¡ç”Ÿå‘½å‘¨æœŸ â†’ å¼‚å¸¸æ—¶è‡ªåŠ¨é‡Šæ”¾ï¼ ğŸš« åã€ä¸è¦åœ¨ææ„å‡½æ•°ä¸­æŠ›å¼‚å¸¸ï¼123456class BadClass &#123;public: ~BadClass() &#123; throw &quot;ææ„å‡½æ•°æŠ›å¼‚å¸¸ï¼&quot;; // âŒ å±é™©ï¼ &#125;&#125;; ğŸ’¥ å¦‚æœææ„å‡½æ•°æŠ›å¼‚å¸¸ï¼Œä¸”å½“å‰æ­£åœ¨å¤„ç†å¦ä¸€ä¸ªå¼‚å¸¸ â†’ std::terminate() ç¨‹åºç›´æ¥ç»ˆæ­¢ï¼ âœ… æ­£ç¡®åšæ³•ï¼šåœ¨ææ„å‡½æ•°ä¸­ç”¨ try-catch åæ‰å¼‚å¸¸ï¼Œæˆ–è®°å½•æ—¥å¿—ã€‚ ğŸ“Š åä¸€ã€å¼‚å¸¸çš„æ€§èƒ½å¼€é”€ æ— å¼‚å¸¸æ—¶ï¼šç°ä»£ç¼–è¯‘å™¨ä¼˜åŒ–å¾—å¾ˆå¥½ï¼Œå‡ ä¹æ— å¼€é”€ æŠ›å¼‚å¸¸æ—¶ï¼šæ ˆå±•å¼€ã€æŸ¥æ‰¾ catch å— â†’ å¼€é”€è¾ƒå¤§ï¼ˆæ¯” if-else æ…¢å¾ˆå¤šï¼‰ âœ… å»ºè®®ï¼šå¼‚å¸¸ç”¨äºâ€œçœŸæ­£å¼‚å¸¸â€çš„æƒ…å†µï¼ˆå¦‚æ–‡ä»¶æ‰“ä¸å¼€ã€ç½‘ç»œæ–­å¼€ï¼‰ï¼Œä¸è¦ç”¨äºæ§åˆ¶æµç¨‹ï¼ ğŸ§  åäºŒã€å¼‚å¸¸ vs é”™è¯¯ç  â€”â€” å¦‚ä½•é€‰æ‹©ï¼Ÿ åœºæ™¯ æ¨èæ–¹å¼ é¢‘ç¹å‘ç”Ÿçš„â€œå¯é¢„æœŸâ€é”™è¯¯ï¼ˆå¦‚ç”¨æˆ·è¾“é”™ï¼‰ âœ… é”™è¯¯ç  ç½•è§ã€ä¸¥é‡ã€ä¸å¯æ¢å¤çš„é”™è¯¯ï¼ˆå¦‚å†…å­˜ä¸è¶³ã€æ–‡ä»¶æŸåï¼‰ âœ… å¼‚å¸¸ åº“å‡½æ•°ã€API è®¾è®¡ âœ… å¼‚å¸¸ï¼ˆæ›´å®‰å…¨ã€ä¸æ˜“å¿½ç•¥ï¼‰ æ€§èƒ½æ•æ„Ÿä»£ç ï¼ˆæ¸¸æˆå¾ªç¯ã€é«˜é¢‘äº¤æ˜“ï¼‰ âœ… é”™è¯¯ç  ğŸ“ åä¸‰ã€å®Œæ•´å®æˆ˜ç¤ºä¾‹123456789101112131415161718192021222324252627282930313233343536373839404142#include &lt;iostream&gt;#include &lt;fstream&gt;#include &lt;string&gt;#include &lt;stdexcept&gt;using namespace std;class ConfigFile &#123; string filename;public: ConfigFile(const string&amp; fname) : filename(fname) &#123;&#125; string load() &#123; ifstream file(filename); if (!file.is_open()) &#123; throw runtime_error(&quot;æ— æ³•æ‰“å¼€é…ç½®æ–‡ä»¶: &quot; + filename); &#125; string content, line; while (getline(file, line)) &#123; content += line + &quot;\\n&quot;; &#125; return content; &#125;&#125;;int main() &#123; ConfigFile cfg(&quot;config.txt&quot;); try &#123; string data = cfg.load(); cout &lt;&lt; &quot;é…ç½®å†…å®¹ï¼š\\n&quot; &lt;&lt; data &lt;&lt; endl; &#125; catch (const runtime_error&amp; e) &#123; cerr &lt;&lt; &quot;åŠ è½½å¤±è´¥ï¼š&quot; &lt;&lt; e.what() &lt;&lt; endl; return 1; &#125; catch (...) &#123; cerr &lt;&lt; &quot;æœªçŸ¥é”™è¯¯ï¼&quot; &lt;&lt; endl; return 2; &#125; cout &lt;&lt; &quot;ç¨‹åºæ­£å¸¸ç»“æŸã€‚&quot; &lt;&lt; endl; return 0;&#125; ğŸ“Œ æ€»ç»“ï¼šC++ å¼‚å¸¸æœºåˆ¶æ ¸å¿ƒè¦ç‚¹ æ¦‚å¿µ è¯´æ˜ throw æŠ›å‡ºå¼‚å¸¸ï¼Œä¸­æ–­å½“å‰å‡½æ•° try-catch æ•è·å¹¶å¤„ç†å¼‚å¸¸ï¼Œé˜²æ­¢ç¨‹åºå´©æºƒ æ ˆå±•å¼€ å¼‚å¸¸å‘ä¸Šä¼ æ’­ï¼Œä¸­é—´å‡½æ•°é€€å‡ºï¼Œå±€éƒ¨å¯¹è±¡ææ„ æ ‡å‡†å¼‚å¸¸ ä¼˜å…ˆä½¿ç”¨ std::exception åŠå…¶å­ç±» è‡ªå®šä¹‰å¼‚å¸¸ ç»§æ‰¿ std::exceptionï¼Œé‡å†™ what() noexcept å£°æ˜å‡½æ•°ä¸æŠ›å¼‚å¸¸ï¼ˆC++11ï¼‰ throw; é‡æ–°æŠ›å‡ºå½“å‰å¼‚å¸¸ RAII ç”¨å¯¹è±¡ç®¡ç†èµ„æºï¼Œç¡®ä¿å¼‚å¸¸æ—¶è‡ªåŠ¨é‡Šæ”¾ ææ„å‡½æ•° ç»å¯¹ä¸è¦æŠ›å¼‚å¸¸ï¼ æ€§èƒ½ å¼‚å¸¸ç”¨äºâ€œçœŸå¼‚å¸¸â€ï¼Œä¸è¦æ»¥ç”¨ ğŸ§© è€ƒè€ƒä½ ï¼ä¸‹é¢ä»£ç ä¼šè¾“å‡ºä»€ä¹ˆï¼Ÿ 12345678910111213141516171819202122#include &lt;iostream&gt;using namespace std;struct A &#123; A() &#123; cout &lt;&lt; &quot;A æ„é€ &quot; &lt;&lt; endl; &#125; ~A() &#123; cout &lt;&lt; &quot;A ææ„&quot; &lt;&lt; endl; &#125;&#125;;void func() &#123; A a; throw &quot;å‡ºé”™äº†ï¼&quot;; cout &lt;&lt; &quot;è¿™è¡Œä¸ä¼šæ‰§è¡Œ&quot; &lt;&lt; endl;&#125;int main() &#123; try &#123; func(); &#125; catch (const char* msg) &#123; cout &lt;&lt; &quot;æ•è·ï¼š&quot; &lt;&lt; msg &lt;&lt; endl; &#125; return 0;&#125; âœ… ç­”æ¡ˆï¼š 123A æ„é€ A ææ„æ•è·ï¼šå‡ºé”™äº†ï¼ ğŸŒŸ è§£é‡Šï¼šå³ä½¿ throw ä¸­æ–­äº† func()ï¼Œå±€éƒ¨å¯¹è±¡ a ä»ä¼šææ„ï¼è¿™å°±æ˜¯ æ ˆå±•å¼€ + RAII çš„å¨åŠ›ï¼","link":"","tags":[{"name":"C++","slug":"C","permalink":"https://lyroom.github.io/tags/C/"},{"name":"æœèŠ±å¤•æ‹¾","slug":"æœèŠ±å¤•æ‹¾","permalink":"https://lyroom.github.io/tags/%E6%9C%9D%E8%8A%B1%E5%A4%95%E6%8B%BE/"}]},{"title":"C++æœèŠ±å¤•æ‹¾-ğŸŒŠ æµ…æ‹·è´ vs ğŸ—ï¸ æ·±æ‹·è´","date":"2025-09-22T07:36:25.000Z","path":"2025/09/22/C-æœèŠ±å¤•æ‹¾-ğŸŒŠ-æµ…æ‹·è´-vs-ğŸ—ï¸-æ·±æ‹·è´/","text":"ğŸŒŠ æµ…æ‹·è´ vs ğŸ—ï¸ æ·±æ‹·è´ â€”â€” ä¸€æ–‡çœ‹æ‡‚ï¼ ğŸ§â€â™‚ï¸ ä¸¾ä¸ªç”Ÿæ´»ä¾‹å­ï¼šå¤å°é’¥åŒ™æƒ³è±¡ä½ æœ‰ä¸€æŠŠå®¶é—¨é’¥åŒ™ğŸ”‘ï¼Œä½ æŠŠå®ƒâ€œæ‹·è´â€ç»™æœ‹å‹ï¼š æµ…æ‹·è´ &#x3D; ä½ ç›´æ¥æŠŠåŸé’¥åŒ™ç»™äº†æœ‹å‹ â†’ ä½ ä»¬ä¿©ç”¨çš„æ˜¯åŒä¸€æŠŠé’¥åŒ™ğŸ‘‰ ä»–ä¸¢äº†é’¥åŒ™ï¼Œä½ ä¹Ÿè¿›ä¸äº†é—¨ï¼ğŸ‘‰ ä»–é…äº†ä¸€æŠŠæ–°é’¥åŒ™ï¼Œä½ ä¹Ÿå¤šäº†ä¸€æŠŠï¼ æ·±æ‹·è´ &#x3D; ä½ å»é…äº†ä¸€æŠŠå…¨æ–°çš„ã€ç‹¬ç«‹çš„é’¥åŒ™ç»™æœ‹å‹ â†’ ä½ ä»¬å„æœ‰å„çš„é’¥åŒ™ğŸ‘‰ ä»–ä¸¢äº†ï¼Œä¸å½±å“ä½ ğŸ‘‰ ä»–æ¢é”äº†ï¼Œä½ å®¶é—¨è¿˜æ˜¯åŸæ ·ï¼ ğŸ’¡ åœ¨ C++ ä¸­ï¼Œè¿™â€œé’¥åŒ™â€å°±æ˜¯â€”â€”æŒ‡é’ˆæŒ‡å‘çš„å †å†…å­˜å½“ä½ æœ‰ä¸€ä¸ªç±»ï¼Œé‡Œé¢åŒ…å«æŒ‡é’ˆæˆå‘˜ï¼ˆæ¯”å¦‚ int* p;ï¼‰ï¼Œæ‹·è´å¯¹è±¡æ—¶ï¼š æµ…æ‹·è´ï¼šåªå¤åˆ¶æŒ‡é’ˆçš„å€¼ï¼ˆåœ°å€ï¼‰â†’ ä¸¤ä¸ªå¯¹è±¡æŒ‡å‘åŒä¸€å—å†…å­˜ æ·±æ‹·è´ï¼šå¤åˆ¶æŒ‡é’ˆæŒ‡å‘çš„å†…å®¹ â†’ ä¸¤ä¸ªå¯¹è±¡å„è‡ªæ‹¥æœ‰ç‹¬ç«‹çš„å†…å­˜ ğŸ“œ é»˜è®¤æ‹·è´æ˜¯â€œæµ…æ‹·è´â€C++ ç¼–è¯‘å™¨é»˜è®¤æä¾›çš„æ‹·è´æ„é€ å‡½æ•°å’Œèµ‹å€¼è¿ç®—ç¬¦ï¼Œéƒ½æ˜¯æµ…æ‹·è´ï¼ ğŸ‘‡ çœ‹ä¸ªæµ…æ‹·è´å‡ºé—®é¢˜çš„ä¾‹å­ï¼š123456789101112131415161718192021222324class Student &#123;public: int* score; // æŒ‡å‘å †å†…å­˜çš„æŒ‡é’ˆ Student(int s) &#123; score = new int(s); // åœ¨å †ä¸Šåˆ†é…å†…å­˜ &#125; // ç¼–è¯‘å™¨é»˜è®¤ç”Ÿæˆæµ…æ‹·è´æ„é€ å‡½æ•°ï¼š // Student(const Student&amp; other) &#123; // score = other.score; // åªå¤åˆ¶åœ°å€ï¼ // &#125; ~Student() &#123; delete score; // é‡Šæ”¾å†…å­˜ &#125;&#125;;int main() &#123; Student s1(90); Student s2 = s1; // æµ…æ‹·è´ï¼s2.score å’Œ s1.score æŒ‡å‘åŒä¸€å—å†…å­˜ // å½“ s1 å’Œ s2 ææ„æ—¶...&#125; // ğŸ’¥ ç¨‹åºå´©æºƒï¼åŒä¸€å—å†…å­˜è¢« delete äº†ä¸¤æ¬¡ï¼ ğŸ’¥ è¿™å°±æ˜¯â€œæµ…æ‹·è´é™·é˜±â€â€”â€”é‡å¤é‡Šæ”¾å†…å­˜ï¼Œç¨‹åºå´©æºƒï¼ âœ… æ·±æ‹·è´ï¼šè‡ªå·±åŠ¨æ‰‹ï¼Œä¸°è¡£è¶³é£Ÿï¼æˆ‘ä»¬æ‰‹åŠ¨å†™æ‹·è´æ„é€ å‡½æ•°å’Œèµ‹å€¼è¿ç®—ç¬¦ï¼Œå®ç°æ·±æ‹·è´ï¼š 123456789101112131415161718192021222324252627282930313233343536class Student &#123;public: int* score; Student(int s) &#123; score = new int(s); &#125; // ğŸ‘‡ æ·±æ‹·è´æ„é€ å‡½æ•° Student(const Student&amp; other) &#123; score = new int(*other.score); // åˆ†é…æ–°å†…å­˜ï¼Œå¤åˆ¶å†…å®¹ &#125; // ğŸ‘‡ æ·±æ‹·è´èµ‹å€¼è¿ç®—ç¬¦ Student&amp; operator=(const Student&amp; other) &#123; if (this == &amp;other) return *this; // è‡ªæˆ‘èµ‹å€¼æ£€æŸ¥ delete score; // å…ˆé‡Šæ”¾æ—§å†…å­˜ score = new int(*other.score); // å†æ·±æ‹·è´ return *this; &#125; ~Student() &#123; delete score; &#125;&#125;;int main() &#123; Student s1(90); Student s2 = s1; // æ·±æ‹·è´ï¼å„è‡ªæœ‰ç‹¬ç«‹å†…å­˜ // ä¿®æ”¹ s2 ä¸å½±å“ s1 *s2.score = 100; cout &lt;&lt; *s1.score &lt;&lt; endl; // è¾“å‡º 90 âœ… cout &lt;&lt; *s2.score &lt;&lt; endl; // è¾“å‡º 100 âœ…&#125; // ææ„æ—¶å„è‡ªé‡Šæ”¾è‡ªå·±çš„å†…å­˜ï¼Œå®‰å…¨ï¼âœ… ğŸ§© ä¸€å¥è¯æ€»ç»“ æµ…æ‹·è´ &#x3D; å¤å°åœ°å€ï¼ˆå…±äº«èµ„æºï¼Œå±é™©ï¼ï¼‰æ·±æ‹·è´ &#x3D; å¤å°å†…å®¹ï¼ˆç‹¬ç«‹èµ„æºï¼Œå®‰å…¨ï¼ï¼‰ ğŸš¨ ä»€ä¹ˆæ—¶å€™éœ€è¦æ·±æ‹·è´ï¼Ÿâœ… å½“ä½ çš„ç±»ä¸­åŒ…å«ï¼š æŒ‡é’ˆæˆå‘˜ï¼ˆint*, char*, MyClass* ç­‰ï¼‰ åŠ¨æ€åˆ†é…çš„èµ„æºï¼ˆnew, malloc, æ–‡ä»¶å¥æŸ„ç­‰ï¼‰ ä»»ä½•â€œç‹¬å èµ„æºâ€ â€”â€” ä¸èƒ½å…±äº«çš„ä¸œè¥¿ï¼ ğŸ“Œ å£è¯€ï¼šâ€œä¸‰äº”æ³•åˆ™â€å¦‚æœä½ éœ€è¦è‡ªå®šä¹‰ææ„å‡½æ•°ã€æ‹·è´æ„é€ ã€èµ‹å€¼è¿ç®—ç¬¦ä¸­çš„ä»»ä½•ä¸€ä¸ªï¼Œå¾ˆå¯èƒ½ä¸‰ä¸ªéƒ½éœ€è¦å†™ï¼ ğŸ é¢å¤–å°è´´å£«ï¼šç°ä»£ C++ æ›´æ¨èç”¨â€œæ™ºèƒ½æŒ‡é’ˆâ€æˆ–â€œå€¼è¯­ä¹‰â€æ¯”å¦‚ï¼š 123456class Student &#123;public: std::unique_ptr&lt;int&gt; score; // è‡ªåŠ¨ç®¡ç†å†…å­˜ï¼Œæ‹·è´æ—¶ç¼–è¯‘å™¨ä¼šæŠ¥é”™ï¼ˆä¸å¯æ‹·è´ï¼‰ // æˆ–è€… int score; // ç›´æ¥å­˜å€¼ï¼Œæ ¹æœ¬ä¸éœ€è¦æŒ‡é’ˆ â†’ é»˜è®¤æ‹·è´å°±æ˜¯â€œæ·±æ‹·è´â€&#125;; âœ… ä¼˜å…ˆä½¿ç”¨ std::string, std::vector, std::unique_ptr ç­‰ RAII ç±»å‹ï¼Œé¿å…æ‰‹åŠ¨ç®¡ç†å†…å­˜ï¼ ğŸ§  è€ƒè€ƒä½ ï¼ä¸‹é¢ä»£ç ä¼šå‡ºé—®é¢˜å—ï¼Ÿ 12345678910class Cat &#123;public: std::string name; Cat(std::string n) : name(n) &#123;&#125;&#125;;int main() &#123; Cat c1(&quot;Tom&quot;); Cat c2 = c1; // æµ…æ‹·è´è¿˜æ˜¯æ·±æ‹·è´ï¼Ÿ&#125; âœ… ç­”æ¡ˆï¼šæ·±æ‹·è´ï¼å› ä¸º std::string å†…éƒ¨å·²ç»å¸®ä½ å®ç°äº†æ·±æ‹·è´ï¼ˆæˆ–å†™æ—¶å¤åˆ¶ï¼‰ï¼Œä½ æ— éœ€æ“å¿ƒï¼","link":"","tags":[{"name":"C++","slug":"C","permalink":"https://lyroom.github.io/tags/C/"},{"name":"æœèŠ±å¤•æ‹¾","slug":"æœèŠ±å¤•æ‹¾","permalink":"https://lyroom.github.io/tags/%E6%9C%9D%E8%8A%B1%E5%A4%95%E6%8B%BE/"},{"name":"æµ…æ‹·è´","slug":"æµ…æ‹·è´","permalink":"https://lyroom.github.io/tags/%E6%B5%85%E6%8B%B7%E8%B4%9D/"},{"name":"æ·±æ‹·è´","slug":"æ·±æ‹·è´","permalink":"https://lyroom.github.io/tags/%E6%B7%B1%E6%8B%B7%E8%B4%9D/"}]},{"title":"C++æœèŠ±å¤•æ‹¾-usingå…³é”®å­—","date":"2025-09-22T07:12:49.000Z","path":"2025/09/22/C-æœèŠ±å¤•æ‹¾-usingå…³é”®å­—/","text":"ğŸ“˜ C++ ä¸­ using å…³é”®å­—çš„ç”¨æ³•è¯¦è§£åœ¨ C++ ä¸­ï¼Œusing å…³é”®å­—åŠŸèƒ½å¼ºå¤§ä¸”ç”¨é€”å¤šæ ·ï¼Œä» C++11 å¼€å§‹æ›´æ˜¯å¾—åˆ°äº†æ˜¾è‘—å¢å¼ºã€‚å®ƒä¸»è¦ç”¨äºç®€åŒ–ä»£ç ã€æé«˜å¯è¯»æ€§ã€è§£å†³ç»§æ‰¿ä¸­çš„å‡½æ•°éšè—é—®é¢˜ç­‰ã€‚ä»¥ä¸‹æ˜¯ using åœ¨ C++ ä¸­çš„ä¸»è¦ç”¨æ³•è¯¦è§£ï¼š 1ï¸âƒ£ å¼•å…¥å‘½åç©ºé—´æˆå‘˜ï¼ˆNamespace Membersï¼‰1.1 å¼•å…¥å•ä¸ªæˆå‘˜123456789101112#include &lt;iostream&gt;#include &lt;vector&gt;using std::cout;using std::endl;using std::vector;int main() &#123; vector&lt;int&gt; v = &#123;1, 2, 3&#125;; cout &lt;&lt; v[0] &lt;&lt; endl; // ä¸ç”¨å†™ std:: return 0;&#125; âœ… æ¨èï¼šæ¯” using namespace std; æ›´å®‰å…¨ï¼Œé¿å…å‘½åæ±¡æŸ“ã€‚ 1.2 å¼•å…¥æ•´ä¸ªå‘½åç©ºé—´ï¼ˆè°¨æ…ä½¿ç”¨ï¼‰1234567using namespace std;int main() &#123; cout &lt;&lt; &quot;Hello&quot; &lt;&lt; endl; vector&lt;int&gt; v; // ...&#125; âš ï¸ è­¦å‘Šï¼šä¸è¦åœ¨å¤´æ–‡ä»¶æˆ–å¤§å‹é¡¹ç›®ä¸­ä½¿ç”¨ï¼Œå®¹æ˜“å¼•èµ·å‘½åå†²çªï¼ 2ï¸âƒ£ å®šä¹‰ç±»å‹åˆ«åï¼ˆType Aliasï¼‰â€” æ›¿ä»£ typedefC++11 èµ·ï¼Œusing å¯ç”¨äºå®šä¹‰ç±»å‹åˆ«åï¼Œè¯­æ³•æ›´ç›´è§‚ï¼ŒåŠŸèƒ½æ›´å¼ºã€‚ 2.1 åŸºæœ¬ç±»å‹åˆ«å123using IntPtr = int*;using String = std::string;using Callback = void(*)(int); ç­‰ä»·äºï¼š 123typedef int* IntPtr;typedef std::string String;typedef void(*Callback)(int); âœ… using è¯­æ³•æ›´ç¬¦åˆâ€œèµ‹å€¼â€è¯­ä¹‰ï¼šåˆ«å = åŸç±»å‹ 2.2 æ¨¡æ¿åˆ«åï¼ˆtypedef æ— æ³•åšåˆ°ï¼ï¼‰12345678910template&lt;typename T&gt;using Vec = std::vector&lt;T&gt;;Vec&lt;int&gt; v1; // std::vector&lt;int&gt;Vec&lt;std::string&gt; v2; // std::vector&lt;std::string&gt;template&lt;typename T&gt;using MapString = std::map&lt;std::string, T&gt;;MapString&lt;int&gt; m; // std::map&lt;std::string, int&gt; ğŸŒŸ è¿™æ˜¯ using æœ€å¼ºå¤§çš„ä¼˜åŠ¿ä¹‹ä¸€ â€”â€” æ”¯æŒæ¨¡æ¿åˆ«åï¼ 3ï¸âƒ£ åœ¨æ´¾ç”Ÿç±»ä¸­å¼•å…¥åŸºç±»æˆå‘˜ï¼ˆè§£å†³å‡½æ•°éšè—ï¼‰å½“æ´¾ç”Ÿç±»å®šä¹‰äº†ä¸åŸºç±»åŒåçš„å‡½æ•°æ—¶ï¼ŒåŸºç±»æ‰€æœ‰é‡è½½ç‰ˆæœ¬éƒ½ä¼šè¢«éšè—ã€‚ä½¿ç”¨ using å¯æ˜¾å¼å¼•å…¥ã€‚ 12345678910111213141516171819class Base &#123;public: void func(int x) &#123; cout &lt;&lt; &quot;Base::func(int)&quot; &lt;&lt; endl; &#125; void func(double x) &#123; cout &lt;&lt; &quot;Base::func(double)&quot; &lt;&lt; endl; &#125;&#125;;class Derived : public Base &#123;public: using Base::func; // å¼•å…¥æ‰€æœ‰é‡è½½ç‰ˆæœ¬ âœ… void func(char x) &#123; cout &lt;&lt; &quot;Derived::func(char)&quot; &lt;&lt; endl; &#125;&#125;;int main() &#123; Derived d; d.func(10); // Base::func(int) d.func(3.14); // Base::func(double) d.func(&#x27;a&#x27;); // Derived::func(char)&#125; âŒ å¦‚æœæ²¡æœ‰ using Base::func;ï¼Œåˆ™ d.func(10) ä¼šæŠ¥é”™ â€”â€” å› ä¸ºåŸºç±»å‡½æ•°è¢«éšè—äº†ï¼ 4ï¸âƒ£ æ”¹å˜ç»§æ‰¿æˆå‘˜çš„è®¿é—®æƒé™ï¼ˆC++11ï¼‰åœ¨æ´¾ç”Ÿç±»ä¸­ï¼Œå¯ä»¥ç”¨ using æå‡æˆ–æ”¹å˜ä»åŸºç±»ç»§æ‰¿çš„æˆå‘˜çš„è®¿é—®çº§åˆ«ã€‚ 123456789101112131415161718class Base &#123;protected: void protectedFunc() &#123; cout &lt;&lt; &quot;Protected&quot; &lt;&lt; endl; &#125;public: void publicFunc() &#123; cout &lt;&lt; &quot;Public&quot; &lt;&lt; endl; &#125;&#125;;class Derived : private Base &#123; // ç§æœ‰ç»§æ‰¿public: using Base::publicFunc; // ä¿æŒ public using Base::protectedFunc; // æå‡ä¸º public âœ…&#125;;int main() &#123; Derived d; d.publicFunc(); // âœ… d.protectedFunc(); // âœ… ç°åœ¨å¯ä»¥è®¿é—®äº†ï¼&#125; ğŸ“Œ æ³¨æ„ï¼šä¸èƒ½ç”¨ using é™ä½è®¿é—®æƒé™ï¼ˆæ¯”å¦‚ public â†’ privateï¼‰ï¼Œåªèƒ½æå‡æˆ–ä¿æŒã€‚ 5ï¸âƒ£ åœ¨æ¨¡æ¿ä¸­å¼•å…¥ä¾èµ–åŸºç±»æˆå‘˜ï¼ˆè§£å†³ç¼–è¯‘é”™è¯¯ï¼‰åœ¨æ¨¡æ¿æ´¾ç”Ÿç±»ä¸­è®¿é—®åŸºç±»æˆå‘˜æ—¶ï¼Œæœ‰æ—¶ç¼–è¯‘å™¨æ— æ³•è¯†åˆ«ï¼Œéœ€ç”¨ using æˆ– this-&gt; æ˜¾å¼å£°æ˜ã€‚ 123456789101112131415template&lt;typename T&gt;class Base &#123;protected: T value;&#125;;template&lt;typename T&gt;class Derived : public Base&lt;T&gt; &#123;public: using Base&lt;T&gt;::value; // âœ… æ˜¾å¼å¼•å…¥ä¾èµ–åŸºç±»æˆå‘˜ void print() &#123; std::cout &lt;&lt; value &lt;&lt; std::endl; // ç°åœ¨å¯ä»¥è®¿é—® &#125;&#125;; ğŸ’¡ åŸå› ï¼šåœ¨æ¨¡æ¿ä¸­ï¼ŒåŸºç±»æ˜¯ä¾èµ–åç§°ï¼ˆdependent nameï¼‰ï¼Œç¼–è¯‘å™¨é»˜è®¤ä¸æŸ¥æ‰¾åŸºç±»ä½œç”¨åŸŸã€‚ ğŸ“‹ æ€»ç»“ï¼šusing çš„äº”å¤§ç”¨é€” ç”¨é€” ç¤ºä¾‹ è¯´æ˜ 1ï¸âƒ£ å¼•å…¥å‘½åç©ºé—´æˆå‘˜ using std::cout; é¿å…å†™ std::ï¼Œæ›´å®‰å…¨ 2ï¸âƒ£ å®šä¹‰ç±»å‹åˆ«å using IntVec = std::vector&lt;int&gt;; æ›¿ä»£ typedefï¼Œæ”¯æŒæ¨¡æ¿ 3ï¸âƒ£ å¼•å…¥åŸºç±»å‡½æ•° using Base::func; è§£å†³æ´¾ç”Ÿç±»å‡½æ•°éšè—é—®é¢˜ 4ï¸âƒ£ æ”¹å˜è®¿é—®æƒé™ using Base::func;ï¼ˆåœ¨ public ä¸‹ï¼‰ æå‡ç»§æ‰¿æˆå‘˜è®¿é—®çº§åˆ« 5ï¸âƒ£ æ¨¡æ¿ä¸­å¼•å…¥åŸºç±»æˆå‘˜ using Base&lt;T&gt;::member; è§£å†³ä¾èµ–åç§°æŸ¥æ‰¾é—®é¢˜ ğŸ’¡ æœ€ä½³å®è·µå»ºè®® âœ… ä¼˜å…ˆä½¿ç”¨ using å®šä¹‰ç±»å‹åˆ«åï¼ˆç‰¹åˆ«æ˜¯æ¨¡æ¿åˆ«åï¼‰ âœ… åœ¨ç±»ä¸­ä½¿ç”¨ using è§£å†³å‡½æ•°é‡è½½éšè—é—®é¢˜ âœ… åœ¨ .cpp æ–‡ä»¶ä¸­å±€éƒ¨ä½¿ç”¨ using namespace xxx;ï¼Œé¿å…åœ¨å¤´æ–‡ä»¶ä¸­ä½¿ç”¨ âœ… åœ¨æ¨¡æ¿æ´¾ç”Ÿç±»ä¸­ï¼Œå¯¹åŸºç±»æˆå‘˜ä½¿ç”¨ using æˆ– this-&gt; é¿å…ç¼–è¯‘é”™è¯¯ âŒ ä¸è¦ç”¨ using é™ä½è®¿é—®æƒé™ï¼ˆè¯­æ³•ä¸å…è®¸ï¼‰ ğŸ§  å°æµ‹éªŒä¸‹é¢ä»£ç èƒ½å¦ç¼–è¯‘é€šè¿‡ï¼Ÿ 1234567891011121314class A &#123;public: void foo(int);&#125;;class B : public A &#123;public: void foo(double);&#125;;int main() &#123; B b; b.foo(5); // â“ ä¼šè°ƒç”¨å“ªä¸ªï¼Ÿ&#125; âŒ ç¼–è¯‘é”™è¯¯ï¼A::foo(int) è¢« B::foo(double) éšè—äº†ã€‚âœ… è§£å†³æ–¹æ¡ˆï¼šåœ¨ B ä¸­æ·»åŠ  using A::foo;","link":"","tags":[{"name":"c++","slug":"c","permalink":"https://lyroom.github.io/tags/c/"},{"name":"æœèŠ±å¤•æ‹¾","slug":"æœèŠ±å¤•æ‹¾","permalink":"https://lyroom.github.io/tags/%E6%9C%9D%E8%8A%B1%E5%A4%95%E6%8B%BE/"}]},{"title":"C++æœèŠ±å¤•æ‹¾-ç¼ºçœ","date":"2025-09-19T09:51:05.000Z","path":"2025/09/19/C-æœèŠ±å¤•æ‹¾-ç¼ºçœ/","text":"ğŸ“˜ c++æœèŠ±å¤•æ‹¾-ç¼ºçœ åœ¨C++ä¸­ï¼Œâ€œç¼ºçœâ€ï¼ˆDefaultï¼‰æ˜¯ä¸€ä¸ªæ ¸å¿ƒæ¦‚å¿µï¼Œä¸»è¦æŒ‡ç³»ç»Ÿã€ç¼–è¯‘å™¨æˆ–ç¨‹åºå‘˜é¢„å…ˆè®¾å®šçš„é»˜è®¤å€¼æˆ–è¡Œä¸ºï¼Œå½“ç”¨æˆ·æœªæ˜¾å¼æä¾›å…·ä½“å€¼æˆ–æŒ‡ä»¤æ—¶ï¼Œç¨‹åºå°†è‡ªåŠ¨é‡‡ç”¨è¿™äº›é¢„è®¾å€¼ã€‚ä»¥ä¸‹ä»å¤šä¸ªç»´åº¦ç³»ç»Ÿè§£æâ€œç¼ºçœâ€çš„å«ä¹‰ã€åº”ç”¨åœºæ™¯åŠæ³¨æ„äº‹é¡¹ï¼š ğŸ”‘ 1. ç¼ºçœçš„æ ¸å¿ƒå«ä¹‰ æœ¬è´¨ï¼šç¼ºçœæ˜¯â€œé¢„è®¾çš„é»˜è®¤çŠ¶æ€â€ï¼Œç”¨äºç®€åŒ–ä»£ç ç¼–å†™ã€å‡å°‘å†—ä½™å‚æ•°ä¼ é€’ï¼ŒåŒæ—¶ä¿æŒçµæ´»æ€§ï¼Œç”šè‡³ä»¥ä¸‹å¯ä»¥æŠŠâ€œç¼ºçœâ€ä¸¤ä¸ªå­—æ”¹æˆâ€œé»˜è®¤â€ä¹Ÿä¸å½±å“é€»è¾‘ã€‚ å…³é”®ç‰¹æ€§ï¼š å¯è¦†ç›–æ€§ï¼šç”¨æˆ·å¯æ˜¾å¼æä¾›å€¼è¦†ç›–ç¼ºçœè®¾ç½®ã€‚ ä¸Šä¸‹æ–‡ä¾èµ–æ€§ï¼šç¼ºçœè¡Œä¸ºå¯èƒ½å› ç¼–è¯‘å™¨ã€æ ‡å‡†ç‰ˆæœ¬æˆ–ä»£ç ä¸Šä¸‹æ–‡è€Œå¼‚ã€‚ éšå¼ç”Ÿæ•ˆï¼šåœ¨æœªæ˜ç¡®æŒ‡å®šæ—¶è‡ªåŠ¨æ¿€æ´»ï¼Œæ— éœ€é¢å¤–ä»£ç ã€‚ ğŸ§© 2. ä¸»è¦åº”ç”¨åœºæ™¯ï¼ˆ1ï¼‰å‡½æ•°é»˜è®¤å‚æ•° å®šä¹‰ï¼šåœ¨å‡½æ•°å£°æ˜æˆ–å®šä¹‰æ—¶ä¸ºå‚æ•°æŒ‡å®šé»˜è®¤å€¼ï¼Œè°ƒç”¨æ—¶å¯çœç•¥è¯¥å‚æ•°ã€‚ è§„åˆ™ï¼š é»˜è®¤å‚æ•°éœ€ä»å³å‘å·¦è¿ç»­æŒ‡å®šï¼ˆå¦‚void func(int a, int b=2, int c=3)åˆæ³•ï¼Œä½†void func(int a=1, int b, int c=3)éæ³•ï¼‰ã€‚ é»˜è®¤å‚æ•°é€šå¸¸åœ¨å‡½æ•°å£°æ˜ä¸­æŒ‡å®šï¼ˆè€Œéå®šä¹‰ï¼‰ï¼Œä»¥é¿å…å¤šé‡å®šä¹‰å†²çªã€‚ ç¤ºä¾‹ï¼š1234567void print(int value = 42) &#123; // ç¼ºçœå‚æ•° value=42 std::cout &lt;&lt; value;&#125;int main() &#123; print(); // è¾“å‡º 42ï¼ˆä½¿ç”¨ç¼ºçœå€¼ï¼‰ print(100); // è¾“å‡º 100ï¼ˆè¦†ç›–ç¼ºçœå€¼ï¼‰&#125; ï¼ˆ2ï¼‰ç±»ä¸ç»“æ„ä½“çš„é»˜è®¤æˆå‘˜åˆå§‹åŒ– C++11åŠä»¥ä¸Šï¼šå¯åœ¨ç±»&#x2F;ç»“æ„ä½“ä¸­ç›´æ¥ä¸ºæˆå‘˜å˜é‡æŒ‡å®šé»˜è®¤å€¼ã€‚ ä¼˜åŠ¿ï¼šé¿å…æœªåˆå§‹åŒ–å¯¼è‡´çš„æœªå®šä¹‰è¡Œä¸ºï¼Œç®€åŒ–æ„é€ å‡½æ•°ã€‚ ç¤ºä¾‹ï¼š123456struct Point &#123; int x = 0; // ç¼ºçœå€¼ 0 int y = 0; // ç¼ºçœå€¼ 0&#125;;Point p1; // p1.x=0, p1.y=0Point p2&#123;5&#125;; // p2.x=5, p2.y=0ï¼ˆè¦†ç›– x çš„ç¼ºçœå€¼ï¼‰ ï¼ˆ3ï¼‰æ¨¡æ¿å‚æ•°çš„é»˜è®¤ç±»å‹ å®šä¹‰ï¼šæ¨¡æ¿å‚æ•°å¯æŒ‡å®šé»˜è®¤ç±»å‹ï¼Œä½¿æ¨¡æ¿å®ä¾‹åŒ–æ—¶æ— éœ€æ˜¾å¼æä¾›ç±»å‹ã€‚ è§„åˆ™ï¼šé»˜è®¤ç±»å‹éœ€ç¬¦åˆæ¨¡æ¿çš„è¯­ä¹‰è¦æ±‚ï¼ˆå¦‚å¯å¤åˆ¶ã€å¯æ¯”è¾ƒç­‰ï¼‰ã€‚ ç¤ºä¾‹ï¼š12345678template &lt;typename T = int&gt; // ç¼ºçœæ¨¡æ¿å‚æ•° T=intclass Box &#123; T data;public: T getValue() const &#123; return data; &#125;&#125;;Box&lt;&gt; b1; // ç­‰ä»·äº Box&lt;int&gt; b1;Box&lt;double&gt; b2; // è¦†ç›–ç¼ºçœç±»å‹ ï¼ˆ4ï¼‰æ„é€ å‡½æ•°ä¸ç‰¹æ®Šæˆå‘˜å‡½æ•°çš„é»˜è®¤ç”Ÿæˆ **= default**ï¼šæ˜¾å¼è¦æ±‚ç¼–è¯‘å™¨ç”Ÿæˆé»˜è®¤çš„æ„é€ å‡½æ•°ã€ææ„å‡½æ•°ã€æ‹·è´æ„é€ å‡½æ•°ã€æ‹·è´èµ‹å€¼è¿ç®—ç¬¦ç­‰ã€‚ é€‚ç”¨åœºæ™¯ï¼šå½“ç±»éœ€è¦é»˜è®¤è¡Œä¸ºï¼ˆå¦‚æµ…æ‹·è´ï¼‰ä½†æœªæ˜¾å¼å®šä¹‰æ—¶ã€‚ ç¤ºä¾‹ï¼š12345class MyClass &#123;public: MyClass() = default; // ç¼ºçœæ„é€ å‡½æ•° ~MyClass() = default; // ç¼ºçœææ„å‡½æ•°&#125;; ï¼ˆ5ï¼‰æ ‡å‡†åº“å®¹å™¨çš„é»˜è®¤è¡Œä¸º å®¹å™¨åˆå§‹åŒ–ï¼šå¦‚std::vector&lt;int&gt; v;é»˜è®¤æ„é€ ç©ºå‘é‡ï¼Œstd::map&lt;int, std::string&gt; m;é»˜è®¤æ„é€ ç©ºæ˜ å°„ã€‚ ç®—æ³•é»˜è®¤å‚æ•°ï¼šå¦‚std::sort(v.begin(), v.end())é»˜è®¤ä½¿ç”¨&lt;æ¯”è¾ƒå…ƒç´ ã€‚ âš ï¸ 3. ç¼ºçœå€¼çš„æ½œåœ¨é£é™©ä¸æ³¨æ„äº‹é¡¹ï¼ˆ1ï¼‰å‡½æ•°é‡è½½æ­§ä¹‰ å½“å¤šä¸ªå‡½æ•°å…·æœ‰ç›¸åŒå‚æ•°æ•°é‡ä½†ä¸åŒé»˜è®¤å‚æ•°æ—¶ï¼Œè°ƒç”¨å¯èƒ½å› é»˜è®¤å‚æ•°å¯¼è‡´æ­§ä¹‰ã€‚ ç¤ºä¾‹ï¼š123void log(int level);void log(int level, const std::string &amp;message = &quot;&quot;);log(1); // ç¼–è¯‘é”™è¯¯ï¼šè°ƒç”¨å­˜åœ¨æ­§ä¹‰ï¼ˆåŒ¹é…ç¬¬ä¸€ä¸ªè¿˜æ˜¯ç¬¬äºŒä¸ªï¼Ÿï¼‰ ï¼ˆ2ï¼‰é»˜è®¤å€¼å˜æ›´çš„å½±å“ ä¿®æ”¹å‡½æ•°çš„é»˜è®¤å‚æ•°å€¼å¯èƒ½ç ´åç°æœ‰ä»£ç ï¼ˆå¦‚ä»func(int a=1)æ”¹ä¸ºfunc(int a=2)ï¼‰ã€‚ éœ€è°¨æ…å¯¹å¾…å…¬å…±APIçš„é»˜è®¤å‚æ•°ï¼Œé¿å…é¢‘ç¹å˜æ›´ã€‚ ï¼ˆ3ï¼‰æ€§èƒ½ä¸å¯è¯»æ€§æƒè¡¡ è¿‡åº¦ä½¿ç”¨é»˜è®¤å‚æ•°å¯èƒ½éšè—å‡½æ•°ä¾èµ–å…³ç³»ï¼Œé™ä½ä»£ç å¯è¯»æ€§ã€‚ å¯¹äºå¤§å‹å¯¹è±¡ï¼Œé»˜è®¤å‚æ•°å¯èƒ½å¯¼è‡´ä¸å¿…è¦çš„æ‹·è´ï¼ˆéœ€ç»“åˆå¼•ç”¨ä¼ é€’ä¼˜åŒ–ï¼‰ã€‚12void process(const std::string&amp; name = &quot;default&quot;); // âœ… æ¨èvoid process(std::string name = &quot;default&quot;); // âŒ å¯èƒ½æ‹·è´ ï¼ˆ4ï¼‰ä¸constçš„äº¤äº’ é»˜è®¤å‚æ•°ä¸èƒ½æ˜¯å±€éƒ¨å˜é‡æˆ–éœ€è¦è®¡ç®—çš„è¡¨è¾¾å¼ï¼ˆéœ€ä¸ºç¼–è¯‘æ—¶å¸¸é‡æˆ–å¯æ±‚å€¼è¡¨è¾¾å¼ï¼‰ã€‚ ç¤ºä¾‹ï¼š12int calc();void func(int x = calc()); // é”™è¯¯ï¼šé»˜è®¤å‚æ•°éœ€ä¸ºå¸¸é‡è¡¨è¾¾å¼ (5) é»˜è®¤å‚æ•°ä¸å¤´æ–‡ä»¶ç®¡ç† é»˜è®¤å‚æ•°å†™åœ¨å¤´æ–‡ä»¶å£°æ˜ä¸­ï¼Œè€Œé .cpp å®ç°æ–‡ä»¶ å¦åˆ™ä¸åŒç¼–è¯‘å•å…ƒçœ‹åˆ°ä¸åŒé»˜è®¤å€¼ â†’ é“¾æ¥é”™è¯¯æˆ–è¡Œä¸ºä¸ä¸€è‡´ ğŸ“ˆ 4. ç¼ºçœä¸C++æ ‡å‡†çš„æ¼”å˜ C++98&#x2F;03ï¼šæ”¯æŒå‡½æ•°é»˜è®¤å‚æ•°ã€ç±»æˆå‘˜é»˜è®¤åˆå§‹åŒ–ï¼ˆéœ€åœ¨æ„é€ å‡½æ•°ä¸­å®Œæˆï¼‰ã€‚ C++11ï¼šå¼•å…¥ç±»æˆå‘˜ç›´æ¥é»˜è®¤åˆå§‹åŒ–ï¼ˆå¦‚int x=0;ï¼‰ã€= defaultè¯­æ³•ã€æ¨¡æ¿é»˜è®¤å‚æ•°ã€‚ C++17&#x2F;20ï¼šè¿›ä¸€æ­¥å¼ºåŒ–å¸¸é‡è¡¨è¾¾å¼ã€ç»“æ„åŒ–ç»‘å®šç­‰ç‰¹æ€§ï¼Œä½¿ç¼ºçœå€¼æ›´å®‰å…¨ã€çµæ´»ã€‚ ğŸ¯ 5. å®é™…åº”ç”¨ä¸­çš„æœ€ä½³å®è·µ æ˜ç¡®æ€§ä¼˜å…ˆï¼šåœ¨å…³é”®å‡½æ•°æˆ–å…¬å…±æ¥å£ä¸­ï¼Œé¿å…è¿‡åº¦ä¾èµ–é»˜è®¤å‚æ•°ï¼Œå¯é€šè¿‡é‡è½½æä¾›æ›´æ¸…æ™°çš„æ¥å£ã€‚ æ–‡æ¡£åŒ–ï¼šå¯¹é»˜è®¤å‚æ•°çš„è¡Œä¸ºè¿›è¡Œæ–‡æ¡£è¯´æ˜ï¼Œå°¤å…¶æ˜¯éç›´è§‚çš„é€»è¾‘ã€‚ æµ‹è¯•è¦†ç›–ï¼šç¡®ä¿é»˜è®¤å‚æ•°è·¯å¾„è¢«å•å…ƒæµ‹è¯•è¦†ç›–ï¼Œé¿å…å› ç¼ºçœå€¼å¯¼è‡´é€»è¾‘é”™è¯¯ã€‚ é¿å…å…¨å±€çŠ¶æ€ï¼šé»˜è®¤å‚æ•°ä¸åº”ä¾èµ–å…¨å±€å˜é‡æˆ–å¯å˜çŠ¶æ€ï¼Œä»¥å…å¼•å‘éš¾ä»¥è¿½è¸ªçš„bugã€‚ âœ… æ€»ç»“C++ä¸­çš„â€œç¼ºçœâ€æ˜¯é¢„è®¾é»˜è®¤å€¼æˆ–è¡Œä¸ºçš„æœºåˆ¶ï¼Œå¹¿æ³›åº”ç”¨äºå‡½æ•°å‚æ•°ã€ç±»æˆå‘˜åˆå§‹åŒ–ã€æ¨¡æ¿å®ä¾‹åŒ–ç­‰åœºæ™¯ã€‚å®ƒé€šè¿‡å‡å°‘å†—ä½™ä»£ç æå‡å¼€å‘æ•ˆç‡ï¼Œä½†éœ€æ³¨æ„æ½œåœ¨é£é™©ï¼ˆå¦‚é‡è½½æ­§ä¹‰ã€æ€§èƒ½å½±å“ï¼‰ã€‚åˆç†ä½¿ç”¨ç¼ºçœæœºåˆ¶éœ€ç»“åˆå…·ä½“åœºæ™¯ï¼Œæƒè¡¡çµæ´»æ€§ã€å¯è¯»æ€§ä¸ç»´æŠ¤æˆæœ¬ï¼ŒåŒæ—¶éµå¾ªC++æ ‡å‡†çš„æ¼”è¿›æ–¹å‘ï¼Œç¡®ä¿ä»£ç çš„å¥å£®æ€§ä¸å¯æ‰©å±•æ€§ã€‚","link":"","tags":[{"name":"c++","slug":"c","permalink":"https://lyroom.github.io/tags/c/"},{"name":"æœèŠ±å¤•æ‹¾","slug":"æœèŠ±å¤•æ‹¾","permalink":"https://lyroom.github.io/tags/%E6%9C%9D%E8%8A%B1%E5%A4%95%E6%8B%BE/"}]},{"title":"C++æœèŠ±å¤•æ‹¾-å½¢å‚VSå®å‚","date":"2025-09-19T09:33:13.000Z","path":"2025/09/19/C-æœèŠ±å¤•æ‹¾-å½¢å‚VSå®å‚/","text":"ğŸ“˜ c++æœèŠ±å¤•æ‹¾-å½¢å‚VSå®å‚åœ¨C++ä¸­ï¼Œå½¢å‚ï¼ˆå½¢å¼å‚æ•°ï¼‰å’Œå®å‚ï¼ˆå®é™…å‚æ•°ï¼‰æ˜¯å‡½æ•°è°ƒç”¨æœºåˆ¶çš„æ ¸å¿ƒæ¦‚å¿µï¼ŒäºŒè€…çš„åŒºåˆ«åŠä½¿ç”¨åœºæ™¯éœ€ç»“åˆC++çš„è¯­æ³•ç‰¹æ€§ï¼ˆå¦‚å€¼ä¼ é€’ã€å¼•ç”¨ä¼ é€’ã€æŒ‡é’ˆä¼ é€’ç­‰ï¼‰æ·±å…¥ç†è§£ã€‚ä»¥ä¸‹ä»å®šä¹‰ã€åŒºåˆ«ã€ä½¿ç”¨åœºæ™¯åŠç‰¹æ®Šæ¡ˆä¾‹å››æ–¹é¢ç³»ç»Ÿè§£æï¼š 1. å®šä¹‰ä¸æœ¬è´¨ å½¢å‚ï¼ˆå½¢å¼å‚æ•°ï¼‰åœ¨å‡½æ•°å®šä¹‰æ—¶å£°æ˜çš„å‚æ•°ï¼Œæ˜¯å‡½æ•°æ¥å£çš„â€œå ä½ç¬¦â€ï¼Œç”¨äºæè¿°å‡½æ•°éœ€è¦æ¥æ”¶çš„æ•°æ®ç±»å‹ã€ç»“æ„åŠæ•°é‡ã€‚ç¤ºä¾‹ï¼š 123void printSum(int a, int b) &#123; // aã€b æ˜¯å½¢å‚ std::cout &lt;&lt; a + b;&#125; å®å‚ï¼ˆå®é™…å‚æ•°ï¼‰åœ¨å‡½æ•°è°ƒç”¨æ—¶å®é™…ä¼ é€’ç»™å‡½æ•°çš„å€¼æˆ–å˜é‡ï¼Œæ˜¯å…·ä½“çš„æ•°æ®ï¼Œç”¨äºæ›¿æ¢å½¢å‚æ‰§è¡Œå‡½æ•°é€»è¾‘ã€‚ç¤ºä¾‹ï¼š 123printSum(3, 5); // 3 å’Œ 5 æ˜¯å®å‚int x = 10, y = 20;printSum(x, y); // x å’Œ y æ˜¯å®å‚ 2. æ ¸å¿ƒåŒºåˆ« å¯¹æ¯”ç»´åº¦ å½¢å‚ å®å‚ å­˜åœ¨é˜¶æ®µ å‡½æ•°å®šä¹‰æ—¶å£°æ˜ï¼ˆç¼–è¯‘æœŸç¡®å®šï¼‰ å‡½æ•°è°ƒç”¨æ—¶ä¼ é€’ï¼ˆè¿è¡Œæ—¶ç¡®å®šï¼‰ ä½œç”¨èŒƒå›´ ä»…åœ¨å‡½æ•°å†…éƒ¨æœ‰æ•ˆï¼ˆå±€éƒ¨ä½œç”¨åŸŸï¼‰ ç”±å¤–éƒ¨ä½œç”¨åŸŸå†³å®šï¼ˆå¦‚å…¨å±€å˜é‡ã€å±€éƒ¨å˜é‡ï¼‰ ç”Ÿå‘½å‘¨æœŸ å‡½æ•°è°ƒç”¨æ—¶åˆ›å»ºï¼Œè°ƒç”¨ç»“æŸé”€æ¯ ç”±å¤–éƒ¨ä½œç”¨åŸŸå†³å®šï¼ˆå¦‚å…¨å±€å˜é‡æŒç»­å­˜åœ¨ï¼‰ å†…å­˜å ç”¨ ä¸å ç”¨å®é™…å†…å­˜ï¼ˆç¬¦å·å¼•ç”¨ï¼‰ å ç”¨å…·ä½“å†…å­˜ï¼ˆå­˜å‚¨å®é™…å€¼æˆ–åœ°å€ï¼‰ ä¿®æ”¹å½±å“ ä¿®æ”¹å½¢å‚ä»…å½±å“å‡½æ•°å†…éƒ¨é€»è¾‘ ä¿®æ”¹å®å‚å¯èƒ½å½±å“å¤–éƒ¨æ•°æ®ï¼ˆéœ€çœ‹ä¼ é€’æ–¹å¼ï¼‰ ç±»å‹è¦æ±‚ éœ€æ˜ç¡®æŒ‡å®šç±»å‹ï¼ˆå¦‚intã€floatï¼‰ éœ€ä¸å½¢å‚ç±»å‹å…¼å®¹ï¼ˆæˆ–å¯éšå¼è½¬æ¢ï¼‰ 3. ä¼ é€’æ–¹å¼ä¸å½±å“C++ä¸­å‚æ•°ä¼ é€’çš„æœ¬è´¨æ˜¯æ•°æ®å¤åˆ¶æˆ–åœ°å€ä¼ é€’ï¼Œå…·ä½“åˆ†ä¸ºä»¥ä¸‹ä¸‰ç§æ–¹å¼ï¼š ï¼ˆ1ï¼‰å€¼ä¼ é€’ï¼ˆPass by Valueï¼‰ æœºåˆ¶ï¼šå®å‚å°†å€¼å¤åˆ¶ç»™å½¢å‚ï¼Œå‡½æ•°å†…ä¿®æ”¹å½¢å‚ä¸å½±å“å¤–éƒ¨å®å‚ã€‚ é€‚ç”¨åœºæ™¯ï¼šä¸å¯å˜ç±»å‹ï¼ˆå¦‚intã€doubleã€structï¼‰æˆ–éœ€ä¿æŠ¤å®å‚ä¸è¢«ä¿®æ”¹çš„åœºæ™¯ã€‚ ç¤ºä¾‹ï¼š 12345678void changeValue(int num) &#123; num = 100; // ä¿®æ”¹å½¢å‚ï¼Œä¸å½±å“å¤–éƒ¨å®å‚&#125;int main() &#123; int x = 5; changeValue(x); std::cout &lt;&lt; x; // è¾“å‡º 5ï¼ˆx æœªè¢«ä¿®æ”¹ï¼‰&#125; ï¼ˆ2ï¼‰å¼•ç”¨ä¼ é€’ï¼ˆPass by Referenceï¼‰ æœºåˆ¶ï¼šå®å‚å°†å¼•ç”¨ï¼ˆåœ°å€ï¼‰ä¼ é€’ç»™å½¢å‚ï¼Œå‡½æ•°å†…ä¿®æ”¹å½¢å‚ä¼šç›´æ¥å½±å“å¤–éƒ¨å®å‚ã€‚ é€‚ç”¨åœºæ™¯ï¼šå¯å˜ç±»å‹ï¼ˆå¦‚æ•°ç»„ã€ç±»å¯¹è±¡ï¼‰æˆ–éœ€åœ¨å‡½æ•°å†…ä¿®æ”¹å¤–éƒ¨æ•°æ®çš„åœºæ™¯ï¼ˆå¦‚äº¤æ¢ä¸¤ä¸ªå˜é‡ï¼‰ã€‚ ç¤ºä¾‹ï¼š 12345678910void swap(int &amp;a, int &amp;b) &#123; // aã€b æ˜¯å¼•ç”¨å½¢å‚ int temp = a; a = b; b = temp;&#125;int main() &#123; int x = 5, y = 10; swap(x, y); // ä¼ é€’å˜é‡å¼•ç”¨ std::cout &lt;&lt; x &lt;&lt; &quot; &quot; &lt;&lt; y; // è¾“å‡º 10 5ï¼ˆxã€y è¢«äº¤æ¢ï¼‰&#125; ï¼ˆ3ï¼‰æŒ‡é’ˆä¼ é€’ï¼ˆPass by Pointerï¼‰ æœºåˆ¶ï¼šå®å‚å°†æŒ‡é’ˆï¼ˆåœ°å€ï¼‰ä¼ é€’ç»™å½¢å‚ï¼Œå‡½æ•°å†…é€šè¿‡æŒ‡é’ˆä¿®æ”¹æŒ‡å‘çš„å†…å­˜ã€‚ é€‚ç”¨åœºæ™¯ï¼šéœ€åŠ¨æ€å†…å­˜æ“ä½œã€æ•°ç»„éå†æˆ–å…¼å®¹Cè¯­è¨€æ¥å£çš„åœºæ™¯ã€‚ ç¤ºä¾‹ï¼š 12345678910void modifyArray(int *arr, int size) &#123; for (int i = 0; i &lt; size; i++) &#123; arr[i] *= 2; // é€šè¿‡æŒ‡é’ˆä¿®æ”¹å¤–éƒ¨æ•°ç»„ &#125;&#125;int main() &#123; int arr[3] = &#123;1, 2, 3&#125;; modifyArray(arr, 3); // ä¼ é€’æ•°ç»„é¦–åœ°å€ // arr å˜ä¸º &#123;2, 4, 6&#125;&#125; 4. ä½¿ç”¨åœºæ™¯ä¸æœ€ä½³å®è·µ ä½¿ç”¨å½¢å‚çš„åœºæ™¯ å®šä¹‰å‡½æ•°æ¥å£æ—¶ï¼Œæ˜ç¡®éœ€è¦å“ªäº›è¾“å…¥ï¼ˆå¦‚double calculateArea(double length, double width)ï¼‰ã€‚ è®¾ç½®é»˜è®¤å€¼ï¼ˆC++11èµ·æ”¯æŒ= defaultæˆ–æ˜¾å¼é»˜è®¤å€¼ï¼‰ï¼Œä½¿å‚æ•°å¯çœç•¥ï¼ˆå¦‚void greet(const std::string &amp;name = &quot;æ¸¸å®¢&quot;)ï¼‰ã€‚ é™åˆ¶å‚æ•°ç±»å‹ï¼ˆé€šè¿‡ç±»å‹æç¤ºï¼‰æˆ–ä½¿ç”¨constä¿æŠ¤å½¢å‚ä¸è¢«ä¿®æ”¹ï¼ˆå¦‚void process(const std::vector&lt;int&gt; &amp;data)ï¼‰ã€‚ å®ç°å‡½æ•°é‡è½½ï¼ˆé€šè¿‡å½¢å‚ç±»å‹ã€æ•°é‡æˆ–é¡ºåºåŒºåˆ†åŒåå‡½æ•°ï¼‰ã€‚ ä½¿ç”¨å®å‚çš„åœºæ™¯ è°ƒç”¨å‡½æ•°æ—¶ï¼Œä¼ é€’å…·ä½“å€¼ï¼ˆå¦‚calculateArea(5.0, 3.0)ï¼‰ã€‚ ä¼ é€’å˜é‡ã€è¡¨è¾¾å¼æˆ–å‡½æ•°ç»“æœï¼ˆå¦‚calculateArea(a+b, c*2)ï¼‰ã€‚ ä¼ é€’å¯å˜å¯¹è±¡ï¼ˆå¦‚æ•°ç»„ã€ç±»å¯¹è±¡ï¼‰ä»¥ä¿®æ”¹å¤–éƒ¨æ•°æ®ï¼ˆéœ€ä½¿ç”¨å¼•ç”¨æˆ–æŒ‡é’ˆï¼‰ã€‚ ä¼ é€’åŠ¨æ€å†…å­˜åœ°å€ï¼ˆå¦‚int *ptr = new int[10]; modifyArray(ptr, 10)ï¼‰ã€‚ 5. ç‰¹æ®Šæ¡ˆä¾‹ä¸æ³¨æ„äº‹é¡¹ å½¢å‚ä¸å®å‚çš„â€œé”™ä½â€ æ•°é‡ä¸åŒ¹é…ï¼šè°ƒç”¨æ—¶å®å‚æ•°é‡å°‘äºå½¢å‚ä¼šæŠ¥é”™ï¼ˆå¦‚error: too few arguments to functionï¼‰ï¼›è¿‡å¤šåˆ™å¯èƒ½è¢«å¿½ç•¥æˆ–éœ€ä½¿ç”¨å¯å˜å‚æ•°ï¼ˆå¦‚...ï¼‰ã€‚ ç±»å‹ä¸åŒ¹é…ï¼šå¦‚å½¢å‚è¦æ±‚intï¼Œä½†å®å‚ä¼ é€’floatï¼Œå¯èƒ½è§¦å‘éšå¼è½¬æ¢æˆ–ç¼–è¯‘é”™è¯¯ï¼ˆéœ€çœ‹å…·ä½“ç±»å‹å…¼å®¹æ€§ï¼‰ã€‚ å¼•ç”¨ä¸æŒ‡é’ˆçš„é™·é˜±ï¼šè‹¥å½¢å‚ä¸ºå¼•ç”¨ç±»å‹ï¼ˆå¦‚int &amp;aï¼‰ï¼Œå®å‚å¿…é¡»æ˜¯å¯ä¿®æ”¹çš„å·¦å€¼ï¼ˆå¦‚å˜é‡ï¼‰ï¼Œä¸èƒ½æ˜¯å¸¸é‡æˆ–ä¸´æ—¶å€¼ï¼ˆå¦‚changeValue(10)ä¼šæŠ¥é”™ï¼‰ã€‚ constå½¢å‚ä¸å®å‚ ä½¿ç”¨constä¿®é¥°å½¢å‚å¯é˜²æ­¢å‡½æ•°å†…æ„å¤–ä¿®æ”¹å‚æ•°ï¼ˆå¦‚void print(const std::string &amp;str)ï¼‰ã€‚ å®å‚ä¸ºconstå˜é‡æ—¶ï¼Œéœ€ç¡®ä¿å½¢å‚ä¹Ÿä¸ºconstï¼ˆå¦‚const int x = 5; print(x)éœ€å½¢å‚ä¸ºconst intï¼‰ã€‚ å‡½æ•°é‡è½½ä¸å½¢å‚C++æ”¯æŒé€šè¿‡å½¢å‚ç±»å‹ã€æ•°é‡æˆ–é¡ºåºå®ç°å‡½æ•°é‡è½½ï¼ˆå¦‚void log(int); void log(double);ï¼‰ï¼Œä½†éœ€æ³¨æ„é‡è½½è§£æè§„åˆ™ï¼ˆå¦‚ç±»å‹æå‡ã€å¼•ç”¨æŠ˜å ï¼‰ã€‚ æ€»ç»“å½¢å‚æ˜¯å‡½æ•°æ¥å£çš„â€œè®¾è®¡å›¾â€ï¼Œå®šä¹‰äº†å‡½æ•°éœ€è¦çš„æ•°æ®ç»“æ„ï¼›å®å‚æ˜¯â€œå®é™…ææ–™â€ï¼Œåœ¨è°ƒç”¨æ—¶å¡«å……å½¢å‚çš„å ä½ç¬¦ã€‚äºŒè€…é€šè¿‡ä¼ é€’æ–¹å¼ï¼ˆå€¼ã€å¼•ç”¨ã€æŒ‡é’ˆï¼‰å…³è”ï¼Œå½±å“æ•°æ®çš„å¤åˆ¶ã€ä¿®æ”¹åŠå†…å­˜å ç”¨ã€‚åœ¨C++ä¸­ï¼Œåˆç†é€‰æ‹©ä¼ é€’æ–¹å¼ï¼ˆå¦‚å¯¹å¤§å‹å¯¹è±¡ä½¿ç”¨å¼•ç”¨ä¼ é€’é¿å…æ‹·è´ï¼‰ã€åˆ©ç”¨constä¿æŠ¤æ•°æ®ã€é€šè¿‡å‡½æ•°é‡è½½è®¾è®¡çµæ´»æ¥å£ï¼Œæ˜¯é«˜æ•ˆç¼–ç¨‹çš„å…³é”®ã€‚","link":"","tags":[{"name":"c++","slug":"c","permalink":"https://lyroom.github.io/tags/c/"},{"name":"æœèŠ±å¤•æ‹¾","slug":"æœèŠ±å¤•æ‹¾","permalink":"https://lyroom.github.io/tags/%E6%9C%9D%E8%8A%B1%E5%A4%95%E6%8B%BE/"}]},{"title":"æ™ºèƒ½æŒ‡é’ˆ","date":"2025-09-19T04:53:17.000Z","path":"2025/09/19/æ™ºèƒ½æŒ‡é’ˆ/","text":"å“ˆå“ˆå“ˆ","link":"","tags":[{"name":"æ™ºèƒ½æŒ‡é’ˆ","slug":"æ™ºèƒ½æŒ‡é’ˆ","permalink":"https://lyroom.github.io/tags/%E6%99%BA%E8%83%BD%E6%8C%87%E9%92%88/"},{"name":"c++","slug":"c","permalink":"https://lyroom.github.io/tags/c/"},{"name":"æœèŠ±å¤•æ‹¾","slug":"æœèŠ±å¤•æ‹¾","permalink":"https://lyroom.github.io/tags/%E6%9C%9D%E8%8A%B1%E5%A4%95%E6%8B%BE/"},{"name":"æŒ‡é’ˆ","slug":"æŒ‡é’ˆ","permalink":"https://lyroom.github.io/tags/%E6%8C%87%E9%92%88/"}]},{"title":"C++ ç¨‹åºè¿è¡Œæ—¶å†…å­˜å¸ƒå±€","date":"2025-09-19T04:26:31.000Z","path":"2025/09/19/C-ç¨‹åºè¿è¡Œæ—¶å†…å­˜å¸ƒå±€/","text":"ğŸ§  C++ ç¨‹åºè¿è¡Œæ—¶å†…å­˜å¸ƒå±€ ğŸ“Œ é€‚ç”¨äºç†è§£å…¨å±€å˜é‡ã€æ ˆã€å †ã€é™æ€åŒºã€ä»£ç æ®µçš„å­˜å‚¨ä½ç½®ä¸ç”Ÿå‘½å‘¨æœŸã€‚ æœ¬æ–‡æˆ‘ä»¬ä¸»è¦ä»‹ç» C++ ç¨‹åºè¿è¡Œæ—¶å†…å­˜å¸ƒå±€ï¼Œä»¥åŠå˜é‡å­˜å‚¨ä½ç½®ï¼ŒåŒ…æ‹¬æ ˆã€å †ã€é™æ€å­˜å‚¨åŒºç­‰ï¼Œå¹¶é™„ä¸Š ASCII å›¾è§£ã€‚ ğŸ–¼ï¸ å†…å­˜å¸ƒå±€ç¤ºæ„å›¾ï¼ˆASCII å›¾ï¼‰1234567891011121314151617181920212223242526é«˜åœ°å€â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â† æ ˆé¡¶ï¼ˆå‘ä½åœ°å€å¢é•¿ï¼‰â”‚ Stack (æ ˆ) â”‚â”‚ - å±€éƒ¨å˜é‡ â”‚â”‚ - å‡½æ•°å‚æ•° â”‚â”‚ - è¿”å›åœ°å€ â”‚â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”‚ â”‚ â† æœªä½¿ç”¨å†…å­˜ï¼ˆç©ºé—²åŒºï¼‰â”‚ ï¼ˆFree Memoryï¼‰ â”‚â”‚ â”‚â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”‚ Heap (å †) â”‚ â† å †åº•ï¼ˆå‘é«˜åœ°å€å¢é•¿ï¼‰â”‚ - new / malloc åˆ†é…çš„å¯¹è±¡ â”‚â”‚ - åŠ¨æ€æ•°æ®ç»“æ„ â”‚â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”‚ .bss æ®µ â”‚â”‚ - æœªåˆå§‹åŒ–çš„å…¨å±€/é™æ€å˜é‡ â”‚ â†’ int global_uninit;â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”‚ .data æ®µ â”‚â”‚ - å·²åˆå§‹åŒ–çš„å…¨å±€/é™æ€å˜é‡ â”‚ â†’ int global_init = 100;â”‚ - static å˜é‡ â”‚â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”‚ .text æ®µï¼ˆä»£ç æ®µï¼‰ â”‚â”‚ - å‡½æ•°æœºå™¨æŒ‡ä»¤ â”‚ â†’ main(), func() ç­‰â”‚ - åªè¯» â”‚â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â† ä½åœ°å€ ğŸ” å„å†…å­˜åŒºåŸŸè¯¦è§£1ï¸âƒ£ æ ˆï¼ˆStackï¼‰ ä½ç½®ï¼šé«˜åœ°å€ â†’ å‘ä½åœ°å€å¢é•¿ å†…å®¹ï¼š å±€éƒ¨å˜é‡ å‡½æ•°å‚æ•° è¿”å›åœ°å€ ç®¡ç†æ–¹å¼ï¼šç¼–è¯‘å™¨è‡ªåŠ¨åˆ†é…&#x2F;é‡Šæ”¾ ç”Ÿå‘½å‘¨æœŸï¼šå‡½æ•°ä½œç”¨åŸŸï¼Œç¦»å¼€å‡½æ•°åè‡ªåŠ¨é‡Šæ”¾å†…å­˜ ç‰¹ç‚¹ï¼šå¿«ã€å®‰å…¨ã€å®¹é‡å°ï¼ˆé€šå¸¸å‡  MBï¼‰ 123void func(int a) &#123; //å‡½æ•°å‚æ•° â† å­˜åœ¨æ ˆä¸Š int x = 10; // å±€éƒ¨å˜é‡ â† å­˜åœ¨æ ˆä¸Š&#125; ğŸ“Œ æˆ‘ä»¬å¸¸è¯´æ ˆå†…å­˜æ˜¯å‡½æ•°è°ƒç”¨æ ˆï¼Œå‡½æ•°è°ƒç”¨æ—¶ï¼Œå‚æ•°ã€å±€éƒ¨å˜é‡ä¼šå‹å…¥æ ˆä¸­ï¼Œå‡½æ•°è¿”å›æ—¶ï¼Œå‚æ•°ã€å±€éƒ¨å˜é‡ä¼šä»æ ˆä¸­å¼¹å‡ºã€‚ 2ï¸âƒ£ å †ï¼ˆHeapï¼‰ ä½ç½®ï¼šé™æ€åŒºä¹‹ä¸Šï¼Œæ ˆä¹‹ä¸‹ â†’ å‘é«˜åœ°å€å¢é•¿ å†…å®¹ï¼š new &#x2F; malloc åˆ†é…çš„å¯¹è±¡ åŠ¨æ€æ•°ç»„ã€å¯¹è±¡ã€å®¹å™¨åº•å±‚å­˜å‚¨ç­‰ ç®¡ç†æ–¹å¼ï¼šæ‰‹åŠ¨ delete &#x2F; free æˆ–ä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆï¼ˆæ¨èï¼‰ ç”Ÿå‘½å‘¨æœŸï¼šç”±ç¨‹åºå‘˜æ§åˆ¶ ç‰¹ç‚¹ï¼šæ…¢ã€çµæ´»ã€å®¹é‡å¤§ 1int* p = new int(42); // â† pæŒ‡å‘å¯¹è±¡åœ¨å †ï¼Œp æŒ‡é’ˆå˜é‡åœ¨æ ˆ 3ï¸âƒ£ é™æ€å­˜å‚¨åŒºï¼ˆData Segmentï¼‰â¤ .data æ®µ å­˜æ”¾å·²åˆå§‹åŒ–çš„å…¨å±€å˜é‡å’Œé™æ€å˜é‡ ç¤ºä¾‹ï¼š 12int global_var = 999; // â† .datastatic int s = 100; // â† .data â¤ .bss æ®µ å­˜æ”¾æœªåˆå§‹åŒ–æˆ–åˆå§‹åŒ–ä¸º 0 çš„å…¨å±€&#x2F;é™æ€å˜é‡ ç¤ºä¾‹ï¼š 12int uninit_global; // â† .bssï¼ˆé»˜è®¤=0ï¼‰static int zero_static = 0; // â† é€šå¸¸ä¼˜åŒ–è¿› .bss ğŸ’¡ ä¸ºä»€ä¹ˆåˆ† .data å’Œ .bssï¼Ÿ.data éœ€ä¿å­˜åˆå§‹å€¼ â†’ å ç”¨å¯æ‰§è¡Œæ–‡ä»¶ç©ºé—´ï¼›.bss åªéœ€è®°å½•å¤§å° â†’ åŠ è½½æ—¶æ¸…é›¶ â†’ èŠ‚çœç£ç›˜ç©ºé—´ã€‚ 4ï¸âƒ£ ä»£ç æ®µï¼ˆ.textï¼‰ å†…å®¹ï¼šç¨‹åºçš„æœºå™¨æŒ‡ä»¤ï¼ˆå‡½æ•°ä½“ï¼‰ å±æ€§ï¼šåªè¯»ã€ä¸å¯ä¿®æ”¹ ç¤ºä¾‹ï¼š 1int main() &#123; return 0; &#125; // â† å‡½æ•°ä»£ç å­˜åœ¨ .text æ®µ ğŸ§­ åœ°å€å¢é•¿æ–¹å‘ç¤ºæ„1234567891011é«˜åœ°å€ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â†“ æ ˆå‘ä¸‹å¢é•¿ï¼ˆå‡½æ•°è°ƒç”¨å‹æ ˆï¼‰ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ Stack â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ (Free) â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ Heap â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â†‘ å †å‘ä¸Šå¢é•¿ï¼ˆnew åˆ†é…å†…å­˜ï¼‰ä½åœ°å€ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ âš ï¸ å®é™…åœ°å€åˆ†å¸ƒå¯èƒ½å› æ“ä½œç³»ç»Ÿã€ç¼–è¯‘å™¨ã€æ¶æ„ç•¥æœ‰ä¸åŒï¼Œä½†â€œæ ˆå‘ä¸‹ã€å †å‘ä¸Šâ€æ˜¯å¸¸è§æ¨¡å‹ã€‚ ğŸ§ª ç¤ºä¾‹ä»£ç  + åœ°å€è¾“å‡ºç¤ºæ„1234567891011121314151617181920#include &lt;iostream&gt;using namespace std;int global_data = 100; // â†’ .dataint global_bss; // â†’ .bssint main() &#123; int local_stack = 200; // â†’ æ ˆ static int local_static = 300; // â†’ .dataï¼ˆé™æ€å±€éƒ¨å˜é‡ï¼‰ int* heap_ptr = new int(400); // â†’ å †å¯¹è±¡ï¼ŒæŒ‡é’ˆå˜é‡åœ¨æ ˆ cout &lt;&lt; &quot;global_data (.data): &quot; &lt;&lt; &amp;global_data &lt;&lt; endl; cout &lt;&lt; &quot;global_bss (.bss) : &quot; &lt;&lt; &amp;global_bss &lt;&lt; endl; cout &lt;&lt; &quot;local_static(.data): &quot; &lt;&lt; &amp;local_static &lt;&lt; endl; cout &lt;&lt; &quot;local_stack (stack): &quot; &lt;&lt; &amp;local_stack &lt;&lt; endl; cout &lt;&lt; &quot;heap object (heap) : &quot; &lt;&lt; heap_ptr &lt;&lt; endl; delete heap_ptr; return 0;&#125; ğŸ“Œ å…¸å‹è¾“å‡ºåœ°å€é¡ºåºï¼ˆ64ä½ Linux ç¤ºä¾‹ï¼‰ï¼š 12345global_data: 0x555555558010 â† .dataï¼ˆä½åœ°å€åŒºï¼‰global_bss: 0x555555558014 â† .bssï¼ˆç´§é‚» .dataï¼‰local_static: 0x555555558018 â† é™æ€åŒºlocal_stack: 0x7fffffffdc8c â† æ ˆï¼ˆé«˜åœ°å€ï¼‰heap object: 0x555555579eb0 â† å †ï¼ˆä¸­é—´åœ°å€ï¼‰ âœ… æ€»ç»“å£è¯€ â€œä»£ç å«åº•ï¼Œæ•°æ®å±…ä¸­ï¼Œå †å¾€ä¸Šçˆ¬ï¼Œæ ˆå¾€ä¸‹é™ï¼Œå…¨å±€é™æ€ç¨³å¦‚æ³°å±±ã€‚â€ ğŸ“š é™„ï¼šå˜é‡å­˜å‚¨ä½ç½®é€ŸæŸ¥è¡¨ å˜é‡ç±»å‹ å­˜å‚¨ä½ç½® ç”Ÿå‘½å‘¨æœŸ æ˜¯å¦éœ€è¦æ‰‹åŠ¨ç®¡ç† å…¨å±€å˜é‡ é™æ€åŒºï¼ˆ.data&#x2F;.bssï¼‰ æ•´ä¸ªç¨‹åºè¿è¡ŒæœŸ âŒ å¦ é™æ€å±€éƒ¨å˜é‡ é™æ€åŒº æ•´ä¸ªç¨‹åºè¿è¡ŒæœŸ âŒ å¦ å±€éƒ¨å˜é‡ æ ˆ å‡½æ•°ä½œç”¨åŸŸ âŒ è‡ªåŠ¨ç®¡ç† new &#x2F; malloc å¯¹è±¡ å † æ‰‹åŠ¨æ§åˆ¶ âœ… æ˜¯ï¼ˆæˆ–æ™ºèƒ½æŒ‡é’ˆï¼‰ å‡½æ•°ä»£ç  ä»£ç æ®µï¼ˆ.textï¼‰ æ•´ä¸ªç¨‹åºè¿è¡ŒæœŸ âŒ åªè¯»ä¸å¯ä¿®æ”¹ ğŸ“Œ å­¦ä¹ å»ºè®®ï¼šé…åˆè°ƒè¯•å™¨ï¼ˆå¦‚ GDBï¼‰æˆ–æ‰“å°å˜é‡åœ°å€ï¼Œäº²è‡ªè§‚å¯Ÿå†…å­˜åˆ†å¸ƒï¼Œç†è§£æ›´æ·±åˆ»ï¼","link":"","tags":[{"name":"C++","slug":"C","permalink":"https://lyroom.github.io/tags/C/"},{"name":"å†…å­˜","slug":"å†…å­˜","permalink":"https://lyroom.github.io/tags/%E5%86%85%E5%AD%98/"}]},{"title":"topå‘½ä»¤è§£æ","date":"2025-09-16T04:16:44.000Z","path":"2025/09/16/topå‘½ä»¤è§£æ/","text":"ğŸ§ Linux å‘½ä»¤è§£æï¼ˆæ‚è®°ï¼‰â€”â€” top å‘½ä»¤è¯¦è§£ top æ˜¯ Linux ç³»ç»Ÿä¸­æœ€å¸¸ç”¨çš„å®æ—¶æ€§èƒ½ç›‘æ§å·¥å…·ï¼Œç”¨äºåŠ¨æ€æŸ¥çœ‹ç³»ç»Ÿèµ„æºä½¿ç”¨æƒ…å†µå’Œè¿›ç¨‹çŠ¶æ€ã€‚æœ¬æ–‡å°†ç»“åˆçœŸå®è¾“å‡ºç¤ºä¾‹ï¼Œé€è¡Œé€åˆ—è§£æå…¶å«ä¹‰ï¼Œå¹¶æä¾›å®ç”¨è¯Šæ–­æŠ€å·§ã€‚ ğŸ“Š ä¸€ã€å®æˆ˜ç¤ºä¾‹ï¼štop å®Œæ•´è¾“å‡º123456789101112131415root@armbian:~# toptop - 12:20:30 up 2:23, 1 user, load average: 0.00, 0.01, 0.00Tasks: 236 total, 1 running, 235 sleeping, 0 stopped, 0 zombie%Cpu(s): 0.5 us, 0.9 sy, 0.0 ni, 98.6 id, 0.0 wa, 0.0 hi, 0.0 si, 0.0 st MiB Mem : 1801.0 total, 132.6 free, 928.2 used, 892.1 buff/cache MiB Swap: 0.0 total, 0.0 free, 0.0 used. 872.8 avail Mem PID USER PR NI VIRT RES SHR S %CPU %MEM TIME+ COMMAND 2472 1000 20 0 1299292 49084 32056 S 1.0 2.7 1:25.30 kernel 43581 root 20 0 11628 4768 2884 R 1.0 0.3 0:00.16 top 310 root rt 0 0 0 0 S 0.7 0.0 0:48.36 sugov:0 643 root -2 0 0 0 0 S 0.3 0.0 0:33.40 ksdioirqd/mmc0 1452 root 20 0 3445756 57160 33332 S 0.3 3.1 0:10.08 dockerd 2438 root 20 0 1668 1100 820 S 0.3 0.1 0:25.89 procd 2629 root 20 0 85704 22124 9184 S 0.3 1.2 0:24.84 clouddrive ğŸ§­ äºŒã€å…¨å±€ç³»ç»Ÿä¿¡æ¯è¯¦è§£ï¼ˆå‰5è¡Œï¼‰ğŸ”¹ ç¬¬1è¡Œï¼šç³»ç»Ÿè¿è¡Œæ—¶é—´ &amp; è´Ÿè½½å¹³å‡å€¼1top - 12:20:30 up 2:23, 1 user, load average: 0.00, 0.01, 0.00 å½“å‰æ—¶é—´ï¼š12:20:30 è¿è¡Œæ—¶é—´ï¼š2å°æ—¶23åˆ†é’Ÿï¼ˆæ–°å¯åŠ¨ç³»ç»Ÿï¼‰ ç™»å½•ç”¨æˆ·ï¼š1 ä¸ªç”¨æˆ·ï¼ˆrootï¼‰ è´Ÿè½½å¹³å‡å€¼ï¼š 1åˆ†é’Ÿï¼š0.00 â†’ å‡ ä¹æ— è´Ÿè½½ 5åˆ†é’Ÿï¼š0.01 â†’ æè½»è´Ÿè½½ 15åˆ†é’Ÿï¼š0.00 â†’ éå¸¸ç©ºé—² âœ… ç³»ç»Ÿéå¸¸å¥åº·ï¼Œæ— è¿‡è½½é£é™©ï¼ˆå³ä½¿å•æ ¸ CPU ä¹Ÿè¿œæœªæ»¡è½½ï¼‰ ğŸ”¹ ç¬¬2è¡Œï¼šä»»åŠ¡ï¼ˆè¿›ç¨‹ï¼‰ç»Ÿè®¡1Tasks: 236 total, 1 running, 235 sleeping, 0 stopped, 0 zombie æ€»è¿›ç¨‹æ•°ï¼š236 è¿è¡Œä¸­ï¼š1 ä¸ªï¼ˆå°±æ˜¯ top è‡ªå·±ï¼‰ ç¡çœ ä¸­ï¼š235 ä¸ªï¼ˆæ­£å¸¸ï¼Œå¤§éƒ¨åˆ†åå°æœåŠ¡éƒ½åœ¨ç­‰å¾…ï¼‰ åƒµå°¸è¿›ç¨‹ï¼š0 â†’ âœ… å¥åº·ï¼ ğŸ”¹ ç¬¬3è¡Œï¼šCPU ä½¿ç”¨æƒ…å†µ1%Cpu(s): 0.5 us, 0.9 sy, 0.0 ni, 98.6 id, 0.0 wa, 0.0 hi, 0.0 si, 0.0 st ç”¨æˆ·ç©ºé—´ï¼ˆusï¼‰ï¼š0.5% â†’ ç”¨æˆ·ç¨‹åºå ç”¨æä½ å†…æ ¸ç©ºé—´ï¼ˆsyï¼‰ï¼š0.9% â†’ ç³»ç»Ÿè°ƒç”¨&#x2F;é©±åŠ¨å ç”¨ä¹Ÿå¾ˆä½ ç©ºé—²ï¼ˆidï¼‰ï¼š98.6% â†’ CPU å‡ ä¹å®Œå…¨ç©ºé—² I&#x2F;O ç­‰å¾…ï¼ˆwaï¼‰ï¼š0.0% â†’ æ— ç£ç›˜&#x2F;ç½‘ç»œç“¶é¢ˆ è™šæ‹Ÿæœºå·å–ï¼ˆstï¼‰ï¼š0.0% â†’ ä¸æ˜¯è™šæ‹Ÿæœºæˆ–æœªè¢«æŠ¢å  âœ… CPU èµ„æºå……è¶³ï¼Œæ— ä»»ä½•ç“¶é¢ˆ ğŸ”¹ ç¬¬4è¡Œï¼šç‰©ç†å†…å­˜ï¼ˆRAMï¼‰ä½¿ç”¨æƒ…å†µ1MiB Mem : 1801.0 total, 132.6 free, 928.2 used, 892.1 buff/cache æ€»å†…å­˜ï¼š1801 MiB â‰ˆ 1.76 GB ç©ºé—²å†…å­˜ï¼š132.6 MiBï¼ˆâš ï¸ Linux ä¼šç¼“å­˜ï¼Œæ­¤å€¼å°æ˜¯æ­£å¸¸çš„ï¼‰ å·²ä½¿ç”¨ï¼š928.2 MiBï¼ˆå«ç¼“å­˜ï¼‰ ç¼“å†²&#x2F;ç¼“å­˜ï¼š892.1 MiB â†’ å¯è¢«å¿«é€Ÿå›æ”¶ä¾›ç¨‹åºä½¿ç”¨ ğŸ”¹ ç¬¬5è¡Œï¼šSwap ä¸å¯ç”¨å†…å­˜1MiB Swap: 0.0 total, 0.0 free, 0.0 used. 872.8 avail Mem äº¤æ¢åˆ†åŒºï¼šæœªé…ç½®ï¼ˆtotal&#x3D;0ï¼‰â†’ åµŒå…¥å¼&#x2F;è½»é‡ç³»ç»Ÿå¸¸è§ å¯ç”¨å†…å­˜ï¼ˆavail Memï¼‰ï¼š872.8 MiB â†’ âœ… å†…å­˜å……è¶³ï¼ ğŸ’¡ å°½ç®¡ used=928.2 MiBï¼Œä½† avail Mem=872.8 MiBï¼Œè¯´æ˜ç³»ç»Ÿä»æœ‰è¿‘ä¸€åŠå†…å­˜å¯ç«‹å³åˆ†é…ç»™æ–°è¿›ç¨‹ï¼Œæ— å†…å­˜å‹åŠ›ã€‚ ğŸ“‹ ä¸‰ã€è¿›ç¨‹åˆ—è¡¨å„åˆ—è¯¦è§£ï¼ˆç»“åˆç¤ºä¾‹ï¼‰ åˆ—å å«ä¹‰è¯´æ˜ ç¤ºä¾‹è§£æï¼ˆæ¥è‡ªä¸Šæ–¹è¾“å‡ºï¼‰ PID è¿›ç¨‹ ID 43581 æ˜¯å½“å‰è¿è¡Œçš„ top è¿›ç¨‹ USER è¿›ç¨‹æ‰€æœ‰è€… root æˆ– 1000ï¼ˆæ™®é€šç”¨æˆ·ï¼‰ PR è°ƒåº¦ä¼˜å…ˆçº§ã€‚rt &#x3D; å®æ—¶ä¼˜å…ˆçº§ sugov:0 çš„ PR=rtï¼Œæ˜¯å†…æ ¸è°ƒåº¦å™¨çº¿ç¨‹ NI Nice å€¼ï¼ˆ-20~19ï¼‰ï¼Œå½±å“ä¼˜å…ˆçº§ å¤šæ•°ä¸º 0ï¼Œksdioirqd/mmc0 ä¸º -2ï¼ˆé«˜ä¼˜å…ˆçº§ï¼‰ VIRT è™šæ‹Ÿå†…å­˜æ€»é‡ï¼ˆKiBï¼‰ kernel è¿›ç¨‹ï¼š1,299,292 KiB â‰ˆ 1.3 GB RES å¸¸é©»ç‰©ç†å†…å­˜ï¼ˆKiBï¼‰ï¼ŒçœŸå®å ç”¨ dockerd å ç”¨ 57,160 KiB â‰ˆ 57 MB SHR å…±äº«å†…å­˜éƒ¨åˆ† clouddrive çš„ 9,184 KiB æ˜¯å…±äº«åº“å†…å­˜ S è¿›ç¨‹çŠ¶æ€ï¼šâ€¢ R&#x3D;è¿è¡Œä¸­â€¢ S&#x3D;ç¡çœ â€¢ Z&#x3D;åƒµå°¸ç­‰ top æ˜¯ Rï¼Œå…¶ä½™å¤§å¤šæ˜¯ Sï¼ˆæ­£å¸¸ï¼‰ %CPU CPU ä½¿ç”¨ç‡ï¼ˆå¤šæ ¸å¯ &gt;100%ï¼‰ top å’Œ kernel å„å  1.0%ï¼Œæä½ %MEM ç‰©ç†å†…å­˜å ç”¨ç™¾åˆ†æ¯”ï¼ˆåŸºäº RESï¼‰ dockerd å  3.1%ï¼Œæ˜¯å½“å‰å†…å­˜å ç”¨æœ€é«˜çš„è¿›ç¨‹ TIME+ ç´¯è®¡ CPU æ—¶é—´ï¼ˆåˆ†:ç§’.ç™¾åˆ†ç§’ï¼‰ kernel å·²ç´¯è®¡ä½¿ç”¨ 1åˆ†25ç§’ CPU æ—¶é—´ COMMAND å¯åŠ¨å‘½ä»¤å clouddrive, dockerd, procd ç­‰ ğŸ› ï¸ å››ã€å®ç”¨æŠ€å·§ä¸è¯Šæ–­å»ºè®®ğŸ” å¿«é€Ÿå®šä½é—®é¢˜ CPU é«˜ï¼Ÿ â†’ çœ‹ %CPU åˆ—ï¼ŒæŒ‰ P æ’åº å†…å­˜é«˜ï¼Ÿ â†’ çœ‹ %MEM æˆ– RESï¼ŒæŒ‰ M æ’åº I&#x2F;O å¡ï¼Ÿ â†’ çœ‹å…¨å±€ wa æ˜¯å¦ &gt; 5% åƒµå°¸è¿›ç¨‹ï¼Ÿ â†’ çœ‹ Tasks è¡Œ zombie æ˜¯å¦ &gt; 0 ğŸ¯ äº¤äº’æ“ä½œï¼ˆåœ¨ top ç•Œé¢ä¸­ï¼‰ æŒ‰é”® åŠŸèƒ½ P æŒ‰ CPU ä½¿ç”¨ç‡æ’åº M æŒ‰å†…å­˜ä½¿ç”¨ç‡æ’åº T æŒ‰è¿è¡Œæ—¶é—´æ’åº c æ˜¾ç¤ºå®Œæ•´å‘½ä»¤è¡Œ e &#x2F; E åˆ‡æ¢å†…å­˜å•ä½ï¼ˆè¿›ç¨‹åŒº&#x2F;å…¨å±€ï¼‰ 1 æ˜¾ç¤ºæ¯ä¸ª CPU æ ¸å¿ƒä½¿ç”¨æƒ…å†µ k æ€æ­»æŒ‡å®š PID è¿›ç¨‹ q é€€å‡º top âš ï¸ å¼‚å¸¸å…³æ³¨ç‚¹ï¼ˆæœ¬ä¾‹ä¸­å‡æ— ï¼‰ åƒµå°¸è¿›ç¨‹ â†’ Tasks è¡Œæ˜¾ç¤º 0 zombie âœ… é«˜ I&#x2F;O ç­‰å¾… â†’ wa=0.0 âœ… Swap ä½¿ç”¨ â†’ Swap used=0.0 âœ… è´Ÿè½½è¿‡é«˜ â†’ load average å…¨éƒ¨ &lt; 0.02 âœ… ğŸ§µ æŸ¥çœ‹çº¿ç¨‹ï¼ˆè¿›é˜¶ï¼‰1top -Hp &lt;PID&gt; ä¾‹å¦‚ï¼š 1top -Hp 2472 # æŸ¥çœ‹ PID=2472ï¼ˆkernelï¼‰çš„æ‰€æœ‰çº¿ç¨‹ ç”¨äºå®šä½å…·ä½“å“ªä¸ªçº¿ç¨‹å ç”¨è¿‡é«˜ã€‚ ğŸ§© äº”ã€ç»“åˆç¤ºä¾‹çš„è¯Šæ–­ç»“è®º ğŸ’¡ ç³»ç»Ÿæ•´ä½“çŠ¶æ€å¥åº·ï¼Œèµ„æºå……è¶³ï¼Œæ— æ€§èƒ½ç“¶é¢ˆã€‚ CPUï¼š98.6% ç©ºé—²ï¼Œæ— å‹åŠ› å†…å­˜ï¼šå¯ç”¨ 872 MiBï¼Œæ—  Swap ä½¿ç”¨ï¼Œæ— æ³„æ¼ è´Ÿè½½ï¼šæ¥è¿‘ 0ï¼Œç³»ç»Ÿæä¸ºç©ºé—² è¿›ç¨‹ï¼šæ— åƒµå°¸ï¼Œæ— å¼‚å¸¸çŠ¶æ€ çƒ­ç‚¹è¿›ç¨‹ï¼š dockerd å†…å­˜å ç”¨æœ€é«˜ï¼ˆ3.1%ï¼‰ kernel å’Œ top æ˜¯å½“å‰å”¯äºŒè½»å¾®ä½¿ç”¨ CPU çš„è¿›ç¨‹ï¼ˆå„ 1.0%ï¼‰ ğŸ“Œ å…­ã€é™„å½•ï¼šé€ŸæŸ¥è¡¨ é¡¹ç›® æ­£å¸¸èŒƒå›´ æœ¬ä¾‹çŠ¶æ€ æ˜¯å¦å¥åº· Load Average &lt; CPU æ ¸æ•° 0.00~0.01 âœ… %CPU idle &gt; 20% 98.6% âœ… I&#x2F;O Wait (wa) &lt; 5% 0.0% âœ… Zombie è¿›ç¨‹ 0 0 âœ… Swap Used 0ï¼ˆæˆ–æå°ï¼‰ 0.0 âœ… Avail Mem &gt; æ€»å†…å­˜ 20% 872.8 &#x2F; 1801 â‰ˆ 48% âœ… âœ… æ€»ç»“é€šè¿‡ top å‘½ä»¤ï¼Œæˆ‘ä»¬å¯ä»¥ï¼š 5ç§’å†…åˆ¤æ–­ç³»ç»Ÿæ•´ä½“å¥åº·åº¦ï¼ˆé€šè¿‡å‰5è¡Œå…¨å±€ä¿¡æ¯ï¼‰ ç²¾å‡†å®šä½èµ„æºå ç”¨å¤§æˆ·ï¼ˆé€šè¿‡è¿›ç¨‹åˆ—è¡¨ + æ’åºï¼‰ å‘ç°æ½œåœ¨é—®é¢˜ï¼ˆåƒµå°¸ã€I&#x2F;Oç“¶é¢ˆã€å†…å­˜æ³„æ¼ç­‰ï¼‰","link":"","tags":[{"name":"linux","slug":"linux","permalink":"https://lyroom.github.io/tags/linux/"},{"name":"top","slug":"top","permalink":"https://lyroom.github.io/tags/top/"}]},{"title":"markdownå­¦ä¹ ","date":"2025-09-16T02:03:49.511Z","path":"2025/09/16/markdownå­¦ä¹ /","text":"ğŸ“˜ Markdown å­¦ä¹ ç¬”è®°ç¨‹åºå‘˜å¿…é¡»è¦ä¼šçš„MarkDownè¯­æ³•ï¼Œè¿™æ˜¯å†™åšå®¢çš„åŸºçŸ³ï¼Œä¸‹é¢æˆ‘ä»¬æ¥ç®€çŸ­çš„å­¦ä¹ ä¸€ä¸‹è¯­æ³•ã€‚ 1ï¸âƒ£ æ ‡é¢˜è¾“å…¥æ ¼å¼ï¼š #ï¼ˆ*nï¼‰+ ç©ºæ ¼ + æ ‡é¢˜å†…å®¹ 1234- `#` ä¸€çº§æ ‡é¢˜ - `##` äºŒçº§æ ‡é¢˜ - `###` ä¸‰çº§æ ‡é¢˜ - `####` å››çº§æ ‡é¢˜ ç¤ºä¾‹ï¼š 123# ä¸€çº§æ ‡é¢˜## äºŒçº§æ ‡é¢˜### ä¸‰çº§æ ‡é¢˜ 2ï¸âƒ£ å­—ä½“ æ–œä½“ï¼š*æ–‡æœ¬* â†’ Hello World åŠ ç²—ï¼š**æ–‡æœ¬** â†’ Hello World æ–œä½“åŠ ç²—ï¼š***æ–‡æœ¬*** â†’ Hello World åˆ é™¤çº¿ï¼š~~æ–‡æœ¬~~ â†’ Hello World 3ï¸âƒ£ å¼•ç”¨1&gt; è¿™æ˜¯ä¸€æ®µå¼•ç”¨ æ•ˆæœï¼š å®‡å®™å¾ˆå¤§ï¼Œç”Ÿæ´»æ›´å¤§ 4ï¸âƒ£ åˆ†å‰²çº¿12--- *** æ•ˆæœï¼š 5ï¸âƒ£ å›¾ç‰‡è¯­æ³•ï¼š 1{% asset_img \"span>\" \"å›¾ç‰‡æè¿°\" %} ç¤ºä¾‹ï¼š 1![dilireba](markdownå­¦ä¹ /dilirebal.jpg) 6ï¸âƒ£ è¶…é“¾æ¥1[ç‚¹å‡»è·³è½¬åˆ° Henry çš„åšå®¢](https://lyroom.github.io/) æ•ˆæœï¼š ç‚¹å‡»è·³è½¬åˆ° Henry çš„åšå®¢ 7ï¸âƒ£ åˆ—è¡¨æœ‰åºåˆ—è¡¨ï¼š 1231. A2. B3. C æ— åºåˆ—è¡¨ï¼š 123- A- B- C æ•ˆæœï¼š A B C A B C ä»»åŠ¡åˆ—è¡¨ï¼š 123- [x] å·²å®Œæˆçš„ä»»åŠ¡ä¸€- [ ] æœªå®Œæˆçš„ä»»åŠ¡äºŒ- [ ] æœªå®Œæˆçš„ä»»åŠ¡ä¸‰ æ•ˆæœï¼š å·²å®Œæˆçš„ä»»åŠ¡ä¸€ æœªå®Œæˆçš„ä»»åŠ¡äºŒ æœªå®Œæˆçš„ä»»åŠ¡ä¸‰ 8ï¸âƒ£ è¡¨æ ¼1234| åå­— | æ€§åˆ« | ç”Ÿæ—¥ || ---- | ---- | ---- || å¼ ä¸‰ | ç”· | 2000 || æå›› | å¥³ | 2001 | æ•ˆæœï¼š åå­— æ€§åˆ« ç”Ÿæ—¥ å¼ ä¸‰ ç”· 2000 æå›› å¥³ 2001 9ï¸âƒ£ ä»£ç å—è¯­æ³•ï¼š 123```è¯­è¨€ä»£ç å†…å®¹``` ç¤ºä¾‹ï¼š 12345public class Hello &#123; public static void main(String []args)&#123; System.out.print(&quot;Hello World&quot;); &#125;&#125; ğŸ”Ÿ æ–‡ç« æˆªæ–­æœ‰äº›åšå®¢ç³»ç»Ÿæ”¯æŒ &lt;!--more--&gt; æ¥æˆªæ–­æ­£æ–‡ã€‚ 1&lt;!--more--&gt; 1ï¸âƒ£1ï¸âƒ£ é«˜äº®æ–‡æœ¬è¯­æ³•ï¼ˆéƒ¨åˆ† Markdown æ¸²æŸ“å™¨æ”¯æŒï¼Œå¦‚ Typoraï¼‰ï¼š 12==é«˜äº®æ–‡æœ¬==&lt;mark&gt;é«˜äº®æ–‡æœ¬&lt;/mark&gt; æ•ˆæœï¼š &#x3D;&#x3D;è¿™å°±æ˜¯æ•ˆæœ&#x3D;&#x3D; è¿™ä¹Ÿæ˜¯æ•ˆæœ 1ï¸âƒ£2ï¸âƒ£ è¡Œå†…ä»£ç è¯­æ³•ï¼š 1è¿™é‡Œæœ‰ä¸€æ®µ `ä»£ç ` åœ¨è¡Œå†…ã€‚ æ•ˆæœï¼š è¿™é‡Œæœ‰ä¸€æ®µ ä»£ç  åœ¨è¡Œå†…ã€‚ 1ï¸âƒ£3ï¸âƒ£ æ¢è¡Œè¯­æ³•ï¼š 1231.è¡Œå°¾åŠ ä¸¤ä¸ªç©ºæ ¼[space][space]2.è¡Œå°¾åŠ &lt;br&gt;3.è¡Œå°¾åŠ åæ–œæ \\ æ•ˆæœï¼šç¬¬ä¸€è¡Œç¬¬äºŒè¡Œç¬¬ä¸‰è¡Œ\\1ï¸âƒ£4ï¸âƒ£ è„šæ³¨è¯­æ³•ï¼š 1[è„šæ³¨å†…å®¹](#è„šæ³¨ &quot;æ ‡é¢˜&quot;) æ•ˆæœï¼š è„šæ³¨å†…å®¹ 1ï¸âƒ£5ï¸âƒ£ æ•°å­¦å…¬å¼è¯­æ³•ï¼š 123$$å…¬å¼å†…å®¹$$ æ•ˆæœï¼š $$å…¬å¼å†…å®¹$$ 1ï¸âƒ£6ï¸âƒ£ æµç¨‹å›¾è¯­æ³•ï¼š 1ï¸âƒ£3ï¸âƒ£ å¸¸ç”¨ç¬¦å· &amp; EmojiğŸ”¹ åˆ—è¡¨ç¬¦å·123456789- ğŸ”¹ è“è‰²å°ç‚¹- ğŸ”¸ æ©™è‰²å°ç‚¹- ğŸ”º çº¢è‰²ä¸‰è§’- ğŸ”» è“è‰²ä¸‰è§’- â–¶ ç®­å¤´- â¡ å³ç®­å¤´- â¬… å·¦ç®­å¤´- â¬† ä¸Šç®­å¤´- â¬‡ ä¸‹ç®­å¤´ æ•ˆæœï¼š ğŸ”¹ è“è‰²å°ç‚¹ ğŸ”¸ æ©™è‰²å°ç‚¹ ğŸ”º çº¢è‰²ä¸‰è§’ ğŸ”» è“è‰²ä¸‰è§’ â–¶ ç®­å¤´ â¡ å³ç®­å¤´ â¬… å·¦ç®­å¤´ â¬† ä¸Šç®­å¤´ â¬‡ ä¸‹ç®­å¤´ âœ… çŠ¶æ€ç¬¦å·12345âœ… æˆåŠŸâŒ å¤±è´¥âš ï¸ è­¦å‘Šâ„¹ï¸ ä¿¡æ¯â“ ç–‘é—® æ•ˆæœï¼š âœ… æˆåŠŸ âŒ å¤±è´¥ âš ï¸ è­¦å‘Š â„¹ï¸ ä¿¡æ¯ â“ ç–‘é—® â­ é‡ç‚¹&#x2F;è£…é¥°123456789â­ æ˜Ÿæ ‡âœ¨ é—ªå…‰ğŸ”¥ ç«ç„°ğŸ’¡ æƒ³æ³•ğŸ“Œ å›¾é’‰ğŸ“ å›å½¢é’ˆğŸ“ è®°äº‹ğŸ“‚ æ–‡ä»¶å¤¹ğŸ“¦ åŒ…è£¹ æ•ˆæœï¼š â­ æ˜Ÿæ ‡ âœ¨ é—ªå…‰ ğŸ”¥ ç«ç„° ğŸ’¡ æƒ³æ³• ğŸ“Œ å›¾é’‰ ğŸ“ å›å½¢é’ˆ ğŸ“ è®°äº‹ ğŸ“‚ æ–‡ä»¶å¤¹ ğŸ“¦ åŒ…è£¹ â° æ—¶é—´&#x2F;è¿›åº¦1234â° æ—¶é’ŸâŒ› æ²™æ¼ğŸ”„ å¾ªç¯ğŸš€ ç«ç®­ æ•ˆæœï¼š â° æ—¶é’Ÿ âŒ› æ²™æ¼ ğŸ”„ å¾ªç¯ ğŸš€ ç«ç®­ ğŸ”— å¸¸ç”¨å›¾æ ‡12345678ğŸ’» ç”µè„‘ğŸ“± æ‰‹æœºğŸŒ åœ°çƒğŸ”‘ é’¥åŒ™ğŸ”’ é”ğŸ”“ è§£é”âš™ï¸ é½¿è½®ğŸ–¥ï¸ æ˜¾ç¤ºå™¨ æ•ˆæœï¼š ğŸ’» ç”µè„‘ ğŸ“± æ‰‹æœº ğŸŒ åœ°çƒ ğŸ”‘ é’¥åŒ™ ğŸ”’ é” ğŸ”“ è§£é” âš™ï¸ é½¿è½® ğŸ–¥ï¸ æ˜¾ç¤ºå™¨ ğŸ“Œ å°æŠ€å·§ åœ¨ Markdown é‡Œç›´æ¥å¤åˆ¶ç²˜è´´ Emoji å³å¯ä½¿ç”¨ã€‚ å¯ä¸ - æˆ– * æ­é…ï¼Œåšæˆæ¼‚äº®çš„åˆ—è¡¨ã€‚ åœ¨æ ‡é¢˜é‡Œç”¨ Emojiï¼Œè®©å±‚æ¬¡æ›´æ¸…æ™°ï¼š 1234## ğŸš€ å¿«é€Ÿå¼€å§‹## âš™ï¸ é…ç½®æ–¹æ³•## ğŸ“ ä½¿ç”¨ç¤ºä¾‹## â“ å¸¸è§é—®é¢˜ å‚è€ƒé“¾æ¥èœé¸Ÿmarkdown","link":"","tags":[{"name":"Markdown","slug":"Markdown","permalink":"https://lyroom.github.io/tags/Markdown/"}]},{"title":"linuxç¦»çº¿å®‰è£…è½¯ä»¶æ–¹æ³•","date":"2025-09-15T16:02:05.000Z","path":"2025/09/16/linuxç¦»çº¿å®‰è£…è½¯ä»¶æ–¹æ³•/","text":"ğŸ§ Linuxç¦»çº¿å®‰è£…è½¯ä»¶æ–¹æ³•åœ¨ç¦»çº¿ç¯å¢ƒä¸‹å®‰è£…è½¯ä»¶æ—¶ï¼Œä¸ä»…éœ€è¦ä¸‹è½½ä¸»åŒ…ï¼Œè¿˜è¦æŠŠä¾èµ–åŒ…ä¸€å¹¶ä¸‹è½½ã€‚è¿™é‡Œæä¾›ä¸¤ç§æƒ…å†µçš„å¤„ç†æ–¹æ³•ã€‚ è·¨æ¶æ„å®‰è£…è½¯ä»¶æ–¹æ³•ï¼ˆä¾‹å¦‚åœ¨ x86 ä¸Šä¸‹è½½ arm64 åŒ…ï¼‰1234567891011121314151617181920# å…ˆæŸ¥çœ‹å‘è¡Œç‰ˆæœ¬é‡Œé¢æœ‰æ²¡æœ‰å¯¹åº”çš„æ¶æ„å’Œç‰ˆæœ¬apt list -a top# æˆ–è€…apt-cache policy &lt;åŒ…å&gt;# 1. æ·»åŠ ç›®æ ‡æ¶æ„æ”¯æŒsudo dpkg --add-architecture arm64# 2. å®‰è£…ä¾èµ–åˆ†æå·¥å…·sudo apt install apt-rdepends# 3. æŸ¥çœ‹å¯¹åº”åŒ…çš„ä¾èµ–apt-rdepends &lt;åŒ…å&gt;:arm64# 4. å»ºç«‹ç›®å½•å¹¶è¿›å…¥mkdir dependsdep &amp;&amp; cd dependsdep# 5. æ‰¹é‡ä¸‹è½½ä¾èµ–åŒ…apt-rdepends &lt;åŒ…å&gt;:arm64 | grep -E -v &#x27;^ &#x27; | xargs -I&#123;&#125; apt download &#123;&#125;:arm64 ğŸ“Œsudo dpkg --add-architecture arm64è¿™æ¡å‘½ä»¤æ˜¯æ°¸ä¹…åˆ‡æ¢è½¯ä»¶åŒ…ä¸‹è½½å—ä¸æ˜¯çš„ï¼Œä¸æ˜¯æ°¸ä¹… åˆ‡æ¢ï¼Œè€Œæ˜¯æ°¸ä¹… å¢åŠ  ä¸€ç§æ¶æ„æ”¯æŒã€‚ ğŸ”¹è§£é‡Šä¸€ä¸‹ dpkg --print-architecture æ˜¾ç¤ºç³»ç»Ÿçš„ã€Œä¸»æ¶æ„ã€ï¼ˆé€šå¸¸æ˜¯ amd64ï¼‰ã€‚ dpkg --print-foreign-architectures æ˜¾ç¤ºç³»ç»Ÿé¢å¤–æ”¯æŒçš„ã€Œå¤–éƒ¨æ¶æ„ã€ã€‚ å½“ä½ æ‰§è¡Œï¼š 1sudo dpkg --add-architecture arm64 ç³»ç»Ÿä¼šåœ¨ /var/lib/dpkg/arch é‡Œè®°å½• arm64ã€‚ ä»¥å apt update æ—¶ï¼Œå°±ä¼šåŒæ—¶è·å– amd64 å’Œ arm64 çš„è½¯ä»¶åŒ…ä¿¡æ¯ã€‚ è¿™æ ·ä½ å°±å¯ä»¥å®‰è£… :arm64 åç¼€çš„åŒ…ï¼ˆå¦‚æœæºé‡Œæœ‰ï¼‰ã€‚ ğŸ”¹æ˜¯å¦â€œæ°¸ä¹…â€ï¼Ÿ âœ… æ°¸ä¹…æœ‰æ•ˆï¼ˆé™¤éä½ æ‰‹åŠ¨åˆ é™¤ï¼‰ã€‚ âŒ ä¸æ˜¯åˆ‡æ¢ä¸»æ¶æ„ï¼Œä¸»æ¶æ„ä»ç„¶æ˜¯ amd64ã€‚ ä½ å¯ä»¥éšæ—¶åˆ é™¤ï¼š 1sudo dpkg --remove-architecture arm64 ğŸ”¹ä¸¾ä¸ªä¾‹å­ é»˜è®¤æƒ…å†µï¼š 12345dpkg --print-architecture# amd64dpkg --print-foreign-architectures# ï¼ˆç©ºï¼‰ åŠ äº† arm64ï¼š 12345678sudo dpkg --add-architecture arm64sudo apt updatedpkg --print-architecture# amd64dpkg --print-foreign-architectures# arm64 åŒæ¶æ„å®‰è£…è½¯ä»¶æ–¹æ³•ï¼ˆä¾‹å¦‚ x86 ä¸Šä¸‹è½½ x86 åŒ…ï¼‰123456789101112131415# 1. å®‰è£…ä¾èµ–åˆ†æå·¥å…·sudo apt install apt-rdepends# 2. æŸ¥çœ‹åŒ…çš„ä¾èµ–apt-rdepends &lt;åŒ…å&gt;# 3. å»ºç«‹ç›®å½•å¹¶è¿›å…¥mkdir dependsdep &amp;&amp; cd dependsdep# 4. æ‰¹é‡ä¸‹è½½ä¾èµ–åŒ…apt-rdepends &lt;åŒ…å&gt; | grep -E -v &#x27;^ &#x27; | xargs -I&#123;&#125; apt download &#123;&#125;# 5. å®‰è£…ç›®æ ‡åŒ…ï¼ˆå‡è®¾åŒ…å·²ç»ä¸‹è½½åˆ°ä¸Šä¸€çº§ç›®å½•ï¼‰sudo dpkg -i ../&lt;åŒ…å&gt;*.deb","link":"","tags":[{"name":"linux","slug":"linux","permalink":"https://lyroom.github.io/tags/linux/"}]},{"title":"æ„å»ºå·¥å…·é“¾æ·±åº¦è§£æï¼šGCCã€G++ã€CMakeã€Makeã€QMake å’Œ CMakeLists.txt","date":"2025-09-05T03:35:00.000Z","path":"2025/09/05/æ„å»ºå·¥å…·é“¾æ·±åº¦è§£æï¼šGCCã€G-ã€CMakeã€Makeã€QMake-å’Œ-CMakeLists-txt/","text":"GCCã€G++ã€CMakeã€Makeã€QMake å’Œ CMakeLists.txtè¿™ä¸€ç³»åˆ—çš„åè¯å¯¹äºåˆå­¦c++çš„å­¦è€…æ¥è¯´æ˜¯ä¸æ˜¯å¬èµ·æ¥å¾ˆè¿·èŒ«ï¼Œä½†æ˜¯åˆåœ¨å¾ˆå¤šçš„é¡¹ç›®ä¸­é‡åˆ°è¿‡ï¼Ÿä»Šå¤©æˆ‘ä»¬æ¥ç®€çŸ­çš„ä»‹ç»ä¸€ä¸‹è¿™äº›ä¸“æœ‰åè¯ï¼Œå¹¶ä¸”ææ‡‚ä»–ä»¬ä¹‹é—´çš„å…³è”ã€‚ 1. GCC (GNU Compiler Collection) æœ¬è´¨ï¼šç¼–è¯‘å™¨ ä½œç”¨ï¼š å°†æºä»£ç ï¼ˆ.c&#x2F;.cppï¼‰è½¬æ¢ä¸ºæœºå™¨å¯æ‰§è¡Œæ–‡ä»¶ å¤„ç†ç¼–è¯‘è¿‡ç¨‹çš„4ä¸ªé˜¶æ®µï¼š é¢„å¤„ç†ï¼ˆå®å±•å¼€ã€å¤´æ–‡ä»¶åŒ…å«ï¼‰ ç¼–è¯‘ï¼ˆæºä»£ç  â†’ æ±‡ç¼–ä»£ç ï¼‰ æ±‡ç¼–ï¼ˆæ±‡ç¼–ä»£ç  â†’ æœºå™¨ç ï¼‰ é“¾æ¥ï¼ˆåˆå¹¶å¤šä¸ªç›®æ ‡æ–‡ä»¶å’Œåº“ï¼‰ ç‰¹ç‚¹ï¼š æ”¯æŒå¤šç§è¯­è¨€ï¼ˆC, C++, Objective-C, Fortranç­‰ï¼‰ è·¨å¹³å°ï¼ˆLinux&#x2F;Windows&#x2F;macOSï¼‰ æä¾›ä¸°å¯Œçš„ç¼–è¯‘é€‰é¡¹ï¼ˆä¼˜åŒ–çº§åˆ«ã€è­¦å‘Šæ§åˆ¶ç­‰ï¼‰ ä½¿ç”¨ç¤ºä¾‹ï¼š 12gcc -c main.c -o main.o # ç¼–è¯‘Cæ–‡ä»¶g++ -Wall -O2 app.cpp -o app # ç¼–è¯‘C++æ–‡ä»¶å¹¶ä¼˜åŒ– 2. G++ æœ¬è´¨ï¼šC++å‰ç«¯ç¼–è¯‘å™¨ ä½œç”¨ï¼š GCCçš„C++ç‰¹å®šç‰ˆæœ¬ è‡ªåŠ¨é“¾æ¥C++æ ‡å‡†åº“ï¼ˆlibstdc++ï¼‰ å¤„ç†C++ç‰¹æœ‰çš„ç¼–è¯‘ç‰¹æ€§ï¼ˆæ¨¡æ¿ã€å¼‚å¸¸å¤„ç†ç­‰ï¼‰ ä¸GCCçš„å…³ç³»ï¼š G++æ˜¯GCCçš„ä¸€éƒ¨åˆ†ï¼Œä¸“æ³¨äºC++ç¼–è¯‘ ç›¸å½“äºgcc -lstdc++çš„å¿«æ·æ–¹å¼ ä½¿ç”¨ç¤ºä¾‹ï¼š 1g++ -std=c++17 main.cpp utils.cpp -o app 3. Make æœ¬è´¨ï¼šæ„å»ºè‡ªåŠ¨åŒ–å·¥å…· ä½œç”¨ï¼š æ ¹æ®Makefileè§„åˆ™ç®¡ç†æ„å»ºè¿‡ç¨‹ è‡ªåŠ¨æ£€æµ‹éœ€è¦é‡æ–°ç¼–è¯‘çš„æ–‡ä»¶ï¼ˆå¢é‡ç¼–è¯‘ï¼‰ æ‰§è¡Œç¼–è¯‘å‘½ä»¤ï¼ˆè°ƒç”¨gcc&#x2F;g++ï¼‰ æ ¸å¿ƒæ¦‚å¿µï¼š ç›®æ ‡ï¼ˆtargetsï¼‰ ä¾èµ–ï¼ˆdependenciesï¼‰ å‘½ä»¤ï¼ˆcommandsï¼‰ Makefileç¤ºä¾‹ï¼š 1234567891011app: main.o utils.o g++ main.o utils.o -o app main.o: main.cpp g++ -c main.cpp utils.o: utils.cpp utils.h g++ -c utils.cpp clean: rm -f *.o app ç‰¹ç‚¹ï¼š ç®€å•ç›´æ¥ éœ€è¦æ‰‹åŠ¨ç®¡ç†ä¾èµ–å…³ç³» è·¨å¹³å°æ€§æœ‰é™ 4. QMake æœ¬è´¨ï¼šQtä¸“ç”¨çš„æ„å»ºç³»ç»Ÿç”Ÿæˆå™¨ ä½œç”¨ï¼š è§£æ.proæ–‡ä»¶ ç”Ÿæˆå¹³å°ç‰¹å®šçš„æ„å»ºæ–‡ä»¶ï¼ˆMakefileæˆ–IDEé¡¹ç›®æ–‡ä»¶ï¼‰ è‡ªåŠ¨å¤„ç†Qtç‰¹æœ‰çš„æ„å»ºæ­¥éª¤ï¼ˆmoc, uic, rccï¼‰ .proæ–‡ä»¶ç¤ºä¾‹ï¼š 12345QT += widgetsTARGET = myappSOURCES += main.cpp widget.cppHEADERS += widget.hRESOURCES += app.qrc ç‰¹ç‚¹ï¼š QtåŸç”Ÿæ”¯æŒ ç®€å•æ˜“å­¦ è·¨å¹³å°ï¼ˆç”Ÿæˆä¸åŒå¹³å°çš„æ„å»ºæ–‡ä»¶ï¼‰ åŠŸèƒ½ç›¸å¯¹æœ‰é™ï¼ˆç›¸æ¯”CMakeï¼‰ 5. CMake æœ¬è´¨ï¼šè·¨å¹³å°æ„å»ºç³»ç»Ÿç”Ÿæˆå™¨ ä½œç”¨ï¼š è§£æCMakeLists.txtæ–‡ä»¶ ç”Ÿæˆå¹³å°ç‰¹å®šçš„æ„å»ºç³»ç»Ÿæ–‡ä»¶ï¼š Linux&#x2F;macOS â†’ Makefile Windows â†’ Visual Studioè§£å†³æ–¹æ¡ˆ(.sln) Ninja â†’ build.ninja è‡ªåŠ¨æ£€æµ‹ç³»ç»Ÿç¯å¢ƒå’Œä¾èµ–åº“ æ ¸å¿ƒä¼˜åŠ¿ï¼š â€œWrite once, build everywhereâ€ æ”¯æŒå¤æ‚é¡¹ç›®ç»“æ„ å¼ºå¤§çš„ä¾èµ–ç®¡ç† æ¨¡å—åŒ–ç³»ç»Ÿ ä½¿ç”¨æµç¨‹ï¼š 123mkdir build &amp;&amp; cd buildcmake .. # ç”Ÿæˆæ„å»ºç³»ç»Ÿmake # æ‰§è¡Œæ„å»º 6. CMakeLists.txt æœ¬è´¨ï¼šCMakeçš„é…ç½®æ–‡ä»¶ ä½œç”¨ï¼š æè¿°é¡¹ç›®ç»“æ„å’Œæ„å»ºè§„åˆ™ å®šä¹‰ç¼–è¯‘ç›®æ ‡ï¼ˆå¯æ‰§è¡Œæ–‡ä»¶ã€åº“ï¼‰ æŒ‡å®šä¾èµ–å…³ç³»å’Œé“¾æ¥é€‰é¡¹ ç¤ºä¾‹ï¼š 123456789101112cmake_minimum_required(VERSION 3.10)project(MyApp)add_executable(myapp main.cpp)find_package(Qt5 COMPONENTS Widgets REQUIRED)target_link_libraries(myapp PRIVATE Qt5::Widgets)set_target_properties(myapp PROPERTIES CXX_STANDARD 17 CXX_STANDARD_REQUIRED ON) å·¥å…·é“¾å¯¹æ¯”åˆ†æå±‚çº§å…³ç³»12345[æºä»£ç ] â”œâ”€â”€ [GCC/G++] â†’ ç›´æ¥ç¼–è¯‘ï¼ˆç®€å•é¡¹ç›®ï¼‰ â”œâ”€â”€ [Makefile] â†’ [make] â†’ è°ƒç”¨[GCC/G++] â”œâ”€â”€ [.pro] â†’ [qmake] â†’ ç”Ÿæˆ[Makefile] â†’ [make] â†’ [GCC/G++] â””â”€â”€ [CMakeLists.txt] â†’ [cmake] â†’ ç”Ÿæˆ[Makefile/VSé¡¹ç›®ç­‰] â†’ [make/MSBuild] â†’ [GCC/G++/MSVC] åŠŸèƒ½å¯¹æ¯”è¡¨ å·¥å…·&#x2F;æ–‡ä»¶ ä¸»è¦ä½œç”¨ è¾“å…¥ è¾“å‡º è·¨å¹³å°æ€§ å¤æ‚åº¦ é€‚ç”¨åœºæ™¯ GCC&#x2F;G++ ç¼–è¯‘æºä»£ç  æºä»£ç æ–‡ä»¶ ç›®æ ‡æ–‡ä»¶&#x2F;å¯æ‰§è¡Œæ–‡ä»¶ é«˜ ä½ ç®€å•ç¨‹åºã€å•æ–‡ä»¶ç¼–è¯‘ Make æ‰§è¡Œæ„å»ºè§„åˆ™ Makefile æ„å»ºäº§ç‰© ä¸­ ä¸­ ä¸­å°å‹é¡¹ç›® QMake ç”ŸæˆQté¡¹ç›®æ„å»ºç³»ç»Ÿ .proæ–‡ä»¶ Makefile&#x2F;é¡¹ç›®æ–‡ä»¶ é«˜ ä¸­ Qté¡¹ç›® CMake ç”Ÿæˆè·¨å¹³å°æ„å»ºç³»ç»Ÿ CMakeLists.txt æ„å»ºç³»ç»Ÿæ–‡ä»¶ æé«˜ é«˜ å¤§å‹è·¨å¹³å°é¡¹ç›® CMakeLists.txt æè¿°é¡¹ç›®æ„å»ºè§„åˆ™ æ—  æ—  æé«˜ é«˜ æ‰€æœ‰CMakeé¡¹ç›® å·¥ä½œæµç¨‹å¯¹æ¯”ç®€å•é¡¹ç›®ï¼š 1main.cpp â†’ g++ â†’ a.out Makeé¡¹ç›®ï¼š 1main.cpp + utils.cpp + Makefile â†’ make â†’ (g++) â†’ app QMakeé¡¹ç›®ï¼š 1main.cpp + widget.cpp + app.pro â†’ qmake â†’ Makefile â†’ make â†’ (g++) â†’ app CMakeé¡¹ç›®ï¼š 1main.cpp + utils.cpp + CMakeLists.txt â†’ cmake â†’ Makefile â†’ make â†’ (g++) â†’ app ç°ä»£C++é¡¹ç›®æ¨èå·¥ä½œæµå¯¹äºQté¡¹ç›® å…³é”®é…ç½®ç¤ºä¾‹Qté¡¹ç›®çš„CMakeLists.txtï¼š 1234567891011121314151617181920212223242526272829cmake_minimum_required(VERSION 3.16)project(MyQtApp)# æŸ¥æ‰¾Qtåº“find_package(Qt6 COMPONENTS Widgets Network REQUIRED)# åˆ›å»ºå¯æ‰§è¡Œæ–‡ä»¶add_executable(myapp main.cpp mainwindow.cpp resources.qrc)# é“¾æ¥Qtåº“target_link_libraries(myapp PRIVATE Qt6::Widgets Qt6::Network)# è‡ªåŠ¨å¤„ç†Qtå…ƒå¯¹è±¡ç³»ç»Ÿset_target_properties(myapp PROPERTIES AUTOMOC ON AUTOUIC ON AUTORCC ON CXX_STANDARD 17)# å®‰è£…è§„åˆ™install(TARGETS myapp DESTINATION bin) å¦‚ä½•é€‰æ‹©æ„å»ºå·¥å…·ï¼Ÿ å°å‹å·¥å…·&#x2F;å¿«é€ŸåŸå‹ï¼š ç›´æ¥ä½¿ç”¨G++ç¼–è¯‘ æˆ–ç®€å•Makefile Qtä¸“ç”¨é¡¹ç›®ï¼š ä¼ ç»Ÿï¼šQMake + .proæ–‡ä»¶ ç°ä»£ï¼šCMakeï¼ˆQtå®˜æ–¹æ¨èï¼‰ è·¨å¹³å°C++åº“&#x2F;åº”ç”¨ï¼š CMakeï¼ˆè¡Œä¸šæ ‡å‡†ï¼‰ å¤§å‹å¤æ‚ç³»ç»Ÿï¼š CMake + ç°ä»£æ„å»ºç³»ç»Ÿï¼ˆå¦‚Ninjaï¼‰ å¸¸è§é—®é¢˜è§£ç­”Qï¼šCMakeèƒ½å®Œå…¨æ›¿ä»£Makeå—ï¼ŸAï¼šä¸å®Œå…¨ã€‚CMakeç”ŸæˆMakefileï¼Œç„¶åMakeæ‰§è¡Œæ„å»ºã€‚CMakeæ˜¯æ„å»ºç³»ç»Ÿç”Ÿæˆå™¨ï¼ŒMakeæ˜¯æ„å»ºæ‰§è¡Œå™¨ã€‚ Qï¼šQMakeä¼šè¢«æ·˜æ±°å—ï¼ŸAï¼šQtå®˜æ–¹å·²è½¬å‘CMakeä½œä¸ºé¦–é€‰æ„å»ºç³»ç»Ÿï¼Œä½†QMakeä»è¢«å¹¿æ³›ä½¿ç”¨ï¼Œç‰¹åˆ«æ˜¯ç»´æŠ¤æ—§é¡¹ç›®æ—¶ã€‚ Qï¼šä¸ºä»€ä¹ˆéœ€è¦æ„å»ºç³»ç»Ÿï¼ŸAï¼šå½“é¡¹ç›®å…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹æ—¶ï¼š å¤šä¸ªæºæ–‡ä»¶ å¤æ‚çš„ä¾èµ–å…³ç³» éœ€è¦è·¨å¹³å°æ„å»º åŒ…å«èµ„æºæ–‡ä»¶å’Œä»£ç ç”Ÿæˆ éœ€è¦å®‰è£…è§„åˆ™å’Œæ‰“åŒ… Qï¼šGCCå’ŒClangçš„åŒºåˆ«ï¼ŸAï¼šä¸¤è€…éƒ½æ˜¯ç¼–è¯‘å™¨ï¼ŒGCCæ˜¯GNUé¡¹ç›®ï¼ŒClangæ˜¯LLVMé¡¹ç›®ã€‚Clangæœ‰æ›´å‹å¥½çš„é”™è¯¯ä¿¡æ¯ï¼Œæ›´å¿«çš„ç¼–è¯‘é€Ÿåº¦ï¼Œæ›´å¥½çš„C++æ ‡å‡†æ”¯æŒã€‚ æ€»ç»“ ç¼–è¯‘å™¨å±‚ï¼šGCC&#x2F;G++ è´Ÿè´£å°†æºä»£ç è½¬æ¢ä¸ºæœºå™¨ç  æ„å»ºæ‰§è¡Œå±‚ï¼šMake è´Ÿè´£æ‰§è¡Œæ„å»ºè§„åˆ™ æ„å»ºç³»ç»Ÿç”Ÿæˆå±‚ï¼š QMakeï¼šä¸“ä¸ºQtä¼˜åŒ–çš„æ„å»ºç³»ç»Ÿç”Ÿæˆå™¨ CMakeï¼šé€šç”¨è·¨å¹³å°æ„å»ºç³»ç»Ÿç”Ÿæˆå™¨ é…ç½®æ–‡ä»¶ï¼š .proï¼šQMakeçš„é…ç½®æ–‡ä»¶ CMakeLists.txtï¼šCMakeçš„é…ç½®æ–‡ä»¶ ç°ä»£C++å¼€å‘ä¸­ï¼ŒCMake + GCC&#x2F;Clang + Ninja å·²æˆä¸ºä¸»æµç»„åˆï¼Œæä¾›æœ€é«˜æ•ˆã€æœ€çµæ´»çš„æ„å»ºè§£å†³æ–¹æ¡ˆã€‚å¯¹äºQté¡¹ç›®ï¼Œè™½ç„¶QMakeä»å¯ç”¨ï¼Œä½†CMakeå·²æˆä¸ºå®˜æ–¹æ¨èçš„é€‰æ‹©ï¼Œç‰¹åˆ«æ˜¯æ–°é¡¹ç›®ã€‚","link":"","tags":[{"name":"c/c++","slug":"c-c","permalink":"https://lyroom.github.io/tags/c-c/"},{"name":"GCC/G++","slug":"GCC-G","permalink":"https://lyroom.github.io/tags/GCC-G/"},{"name":"Make","slug":"Make","permalink":"https://lyroom.github.io/tags/Make/"},{"name":"QMake","slug":"QMake","permalink":"https://lyroom.github.io/tags/QMake/"},{"name":"CMake","slug":"CMake","permalink":"https://lyroom.github.io/tags/CMake/"},{"name":"CMakeLists","slug":"CMakeLists","permalink":"https://lyroom.github.io/tags/CMakeLists/"}]},{"title":"ubuntuè™šæ‹Ÿæœºå®‰è£…vmtoolsé‡åˆ°çš„é—®é¢˜","date":"2025-09-03T20:02:02.000Z","path":"2025/09/04/ubuntuè™šæ‹Ÿæœºå®‰è£…vmtoolsé‡åˆ°çš„é—®é¢˜/","text":"123sudo apt-get autoremove open-vm-toolssudo apt-get install open-vm-toolssudo apt-get install open-vm-tools-desktop done!","link":"","tags":[{"name":"VMware","slug":"VMware","permalink":"https://lyroom.github.io/tags/VMware/"},{"name":"Ubuntu","slug":"Ubuntu","permalink":"https://lyroom.github.io/tags/Ubuntu/"}]},{"title":"c++ç»§æ‰¿ä¸­çš„çˆ¶å­çº è‘›","date":"2024-10-23T14:42:31.000Z","path":"2024/10/23/c-ç»§æ‰¿ä¸­çš„çˆ¶å­çº è‘›/","text":"æƒ³å¿…å„ä½å¯¹äºé¢å‘å¯¹è±¡éƒ½å·²äº†ç„¶äºèƒ¸äº†å§ï¼Œä»Šå¤©æˆ‘å¶ç„¶é—´é‡åˆ°äº†ä¸€ä¸ªé¢è¯•é¢˜ï¼Œæ˜¯å…³äºç»§æ‰¿æ–¹é¢çš„ï¼Œè›®æœ‰ä¸é”™çš„ï¼Œé‚€è¯·å„ä½æ¥æ¢è®¨ä¸€ä¸‹ã€‚ å…ˆçœ‹ä¸‹é¢ä¸€æ®µä»£ç ï¼š 12345678910111213141516171819202122232425#include &lt;iostream&gt;class Base &#123;public: int a = 1; virtual void print(int n = 2) &#123; &#125;&#125;;class Derive:public Base&#123; public: int b=3; virtual void print(int n = 10)override &#123; std::cout &lt;&lt; &quot;Derive :&quot;&lt;&lt;b + n &lt;&lt; std::endl; &#125;&#125;; int main()&#123; Base *arr = new Derive[10]; arr[7].print(); delete[] arr; Base *ptr = new Derive(); ptr-&gt;print(); delete ptr;&#125; ä½ å¯ä»¥å°è¯•åˆ†æä¸€ä¸‹ï¼Œè¿™æ®µä»£ç çš„ç»“æœå—ï¼Ÿæˆ‘ä»¬å¯ä»¥å›é¡¾ä¸€ä¸‹ç»§æ‰¿çš„æ¦‚å¿µè¿è¡Œè¿™æ®µä»£ç ä¹‹åæˆ‘ä»¬å‘ç°ï¼Œç»“æœå¦‚ä¸‹ï¼š 12345mingw64ï¼š Derive :5 Derive :5mingw32ï¼š exited with code -1073741819 ä¸ºä»€ä¹ˆä¼šå‡ºç°è¿™ç§æƒ…å†µå‘¢ï¼Ÿæˆ‘ä»¬ä¸€æ­¥æ­¥æ¥åˆ†æã€‚ ä»£ç å…³é”®ç‚¹è§£é‡Š ç±»ç»“æ„ï¼š Baseç±»ï¼šåŒ…å«æˆå‘˜å˜é‡a = 1ï¼Œä»¥åŠè™šå‡½æ•°print(int n = 2)ï¼Œé»˜è®¤å‚æ•°ä¸º2ã€‚å‡½æ•°è¾“å‡º&quot;Base:&quot; &lt;&lt; a + nã€‚ Deriveç±»ï¼šç»§æ‰¿è‡ªBaseï¼Œæ·»åŠ æˆå‘˜å˜é‡b = 3ï¼Œå¹¶è¦†ç›–è™šå‡½æ•°print(int n = 10)ï¼Œé»˜è®¤å‚æ•°æ”¹ä¸º10ã€‚å‡½æ•°è¾“å‡º&quot;Derive:&quot; &lt;&lt; b + nã€‚ è™šå‡½æ•°ï¼ˆvirtualï¼‰æ”¯æŒè¿è¡Œæ—¶å¤šæ€ï¼šé€šè¿‡åŸºç±»æŒ‡é’ˆè°ƒç”¨æ—¶ï¼Œå®é™…æ‰§è¡Œæ´¾ç”Ÿç±»çš„è¦†ç›–å‡½æ•°ï¼ˆåŠ¨æ€ç»‘å®šï¼‰ã€‚ ç»“æ„ä½“ï¼ˆç±»ï¼‰åœ¨å†…å­˜ä¸­çš„å­˜æ”¾è§„åˆ™ â€‹ ä¸ºäº†æ›´æ–¹ä¾¿çš„è®¿é—®ç»“æ„ä½“å¯¹è±¡ä¸­çš„æˆå‘˜å˜é‡ï¼Œé€šå¸¸éœ€è¦åœ¨å†…å­˜ä¸­å¯¹é½å­˜å‚¨ï¼Œæ‰€ä»¥é€šå¸¸éœ€è¦ç©ºä¸€æ®µå†…å­˜ï¼Œè¿™ä¾¿æ˜¯å¡«å……ã€‚æ‰€ä»¥ä¸€ä¸ªç»“æ„ä½“å¯¹è±¡åœ¨å†…å­˜ä¸­çš„å­˜å‚¨åŸåˆ™æ˜¯ï¼š ç»“æ„ä½“çš„èµ·å§‹åœ°å€ &#x3D; æœ€å¤§æˆå‘˜å¯¹é½å€¼çš„æ•´æ•°å€ æ¯ä¸ªæˆå‘˜çš„èµ·å§‹åœ°å€èƒ½å¤Ÿè¢«è¯¥æˆå‘˜å¤§å°æ•´é™¤ ç»“æ„ä½“çš„å¤§å° &#x3D; æœ€å¤§æˆå‘˜çš„æ•´æ•°å€ åœ¨64ä½ç³»ç»Ÿä¸­ï¼Œæ¯ä¸ªå†…å­˜å•å…ƒçš„å¤§å°é€šå¸¸ä¸º64bå³8Bï¼Œæ‰€ä»¥ä¸€èˆ¬æŒ‰ç…§8Bå¯¹é½ï¼ŒæŒ‡é’ˆå¤§å°é€šå¸¸ä¹Ÿä¸º8B åœ¨32ä½ç³»ç»Ÿä¸­ï¼Œæ¯ä¸ªå†…å­˜å•å…ƒçš„å¤§å°é€šå¸¸æ—¶32bå³4Bï¼Œæ‰€ä»¥ä¸€èˆ¬æŒ‰ç…§4Bå¯¹é½ï¼ŒæŒ‡é’ˆå¤§å°é€šå¸¸ä¹Ÿä¸º4B â€‹ æŒ‰ç…§ä¸Šé¢çš„åŸåˆ™ï¼Œå¯ä»¥çŸ¥é“ä¸Šè¿°çˆ¶å­ç±»å¯¹è±¡åœ¨ä¸åŒç³»ç»Ÿä¸­ï¼Œå†…å­˜çš„å­˜å‚¨æ–¹å¼ï¼š é»˜è®¤å‚æ•°çš„ç»‘å®šè§„åˆ™ï¼š é»˜è®¤å‚æ•°æ˜¯é™æ€ç»‘å®šï¼ˆåœ¨ç¼–è¯‘æ—¶åŸºäºæŒ‡é’ˆæˆ–å¼•ç”¨ç±»å‹ç¡®å®šï¼‰ï¼Œè€ŒéåŠ¨æ€ç»‘å®šã€‚ å½“é€šè¿‡åŸºç±»æŒ‡é’ˆè°ƒç”¨è™šå‡½æ•°æ—¶ï¼š å‡½æ•°å®ç°ï¼ˆå‡½æ•°ä½“ï¼‰ä½¿ç”¨æ´¾ç”Ÿç±»çš„ç‰ˆæœ¬ï¼ˆåŠ¨æ€ç»‘å®šï¼‰ã€‚ é»˜è®¤å‚æ•°å€¼ä½¿ç”¨åŸºç±»å®šä¹‰çš„é»˜è®¤å€¼ï¼ˆé™æ€ç»‘å®šï¼‰ï¼Œå¿½ç•¥æ´¾ç”Ÿç±»çš„é»˜è®¤å€¼ï¼Œæ‰€ä»¥è¿ç®—æ—¶nçš„å€¼å§‹ç»ˆä¸º2ã€‚ æ•°ç»„åˆ†é…é—®é¢˜ï¼š Base* arr = new Derive[10]ï¼šè¿™é‡Œåˆ†é…äº†ä¸€ä¸ªåŒ…å«10ä¸ªDeriveå¯¹è±¡çš„æ•°ç»„ï¼Œä½†ç”¨Base*æŒ‡é’ˆæŒ‡å‘å®ƒã€‚ æˆ‘ä»¬å¸Œæœ›æƒ…å†µå¦‚ä¸‹ï¼š ä½†å®é™…ä¸Šå‘¢ï¼Ÿï¼Ÿï¼Ÿ è¾“å‡ºç»“æœåˆ†æ1. ç¬¬ä¸€æ¬¡è°ƒç”¨ï¼šarr[7].print() è¾“å‡ºç»“æœï¼š mingw64æ„å»ºè¿è¡Œæ—¶ï¼š 1Derive :5 mingw32æ„å»ºè¿è¡Œæ—¶: 1exited with code -1073741819 ä¸¤ä¸ªç¼–è¯‘å™¨ä¸ºå•¥è¾“å‡ºç»“æœä¸åŒï¼Ÿï¼š â€‹ å…³é”®åœ¨äºarr[7] æœ‰æ²¡æœ‰æŒ‡å‘[Derive7] mingw64æ„å»ºæ—¶ï¼š è™½ç„¶Baseå’ŒDeriveå¤§å°ä¸åŒï¼Œä½†æ˜¯ç”±äºå†…å­˜å¯¹é½ä½¿å¾—Baseçš„å¤§å°å’ŒDeriveå¤§å°ç›¸åŒï¼Œé˜´å·®é˜³é”™çš„ä½¿å¾—arr[7]æŒ‡å‘äº†Derive[7]çš„ä½ç½®ï¼Œä½¿å¾—å¯ä»¥è°ƒç”¨Deriveçš„printå‡½æ•°ï¼Œè¾“å‡ºä¸º5ï¼› mingw32æ„å»ºæ—¶ï¼š æŒ‡é’ˆç®—æœ¯é”™è¯¯ï¼šarræŒ‡å‘Derive[10]æ•°ç»„ï¼Œä½†arr[7]åŸºäºsizeof(Base)è®¡ç®—åœ°å€ï¼ˆä¾‹å¦‚ï¼Œåœ¨32ä½ç³»ç»Ÿä¸­ï¼Œarr + 7 * 8 = arr + 56ï¼‰ã€‚å®é™…ç¬¬7ä¸ªDeriveå¯¹è±¡ä½äºarr + 7 * 12 = arr + 84ï¼ˆå‡è®¾sizeof(Derive)=12ï¼‰ã€‚å› æ­¤ï¼Œarr[7]æŒ‡å‘æ— æ•ˆå†…å­˜ã€‚æ‰€ä»¥è¾“å‡ºé”™è¯¯å€¼ã€‚ ä¸ºä»€ä¹ˆä¸æ˜¯å¤šæ€è¾“å‡ºï¼Ÿ å³ä½¿å¿½ç•¥æŒ‡é’ˆé”™è¯¯ï¼Œç†è®ºä¸Šï¼š å‡½æ•°è°ƒç”¨åº”ä½¿ç”¨Derive::printå®ç°ï¼ˆè™šå‡½æ•°åŠ¨æ€ç»‘å®šï¼‰ã€‚ ä½†é»˜è®¤å‚æ•°é™æ€ç»‘å®šä¸ºBase::printçš„n=2ï¼ˆå› ä¸ºarrç±»å‹æ˜¯Base*ï¼‰ã€‚ è¾“å‡ºåº”ä¸º&quot;Derive:&quot; &lt;&lt; b + 2ï¼ˆå³Derive:5ï¼‰ï¼Œä½†ç”±äºå¯¹è±¡åœ°å€é”™è¯¯ï¼Œbçš„å€¼å¯èƒ½æ— æ•ˆæˆ–å–è‡ªé”™è¯¯å†…å­˜ã€‚ 2. ç¬¬äºŒæ¬¡è°ƒç”¨ï¼šptr-&gt;print() è¾“å‡ºç»“æœï¼šDerive:5 åŸå› ï¼š ptræŒ‡å‘ä¸€ä¸ªæœ‰æ•ˆçš„Deriveå¯¹è±¡ï¼ˆnew Derive()ï¼‰ï¼Œå¤šæ€æ­£ç¡®ï¼šptrç±»å‹æ˜¯Base*ï¼Œä½†å¯¹è±¡æ˜¯Deriveï¼Œå› æ­¤è™šå‡½æ•°è°ƒç”¨Derive::printå®ç°ï¼ˆåŠ¨æ€ç»‘å®šï¼‰ã€‚ é»˜è®¤å‚æ•°é™æ€ç»‘å®šï¼šè°ƒç”¨ptr-&gt;print()æœªæä¾›å‚æ•°ï¼Œç¼–è¯‘å™¨åŸºäºptrçš„é™æ€ç±»å‹ï¼ˆBase*ï¼‰ä½¿ç”¨Base::printçš„é»˜è®¤å€¼n=2ï¼ˆå¿½ç•¥Derive::printçš„n=10ï¼‰ã€‚ å› æ­¤ï¼Œå®é™…è°ƒç”¨Derive::print(2)ï¼š b + n = 3 + 2 = 5ã€‚ è¾“å‡ºï¼š&quot;Derive:5&quot;ã€‚ å…³é”®åŸç†ï¼šé»˜è®¤å‚æ•°åœ¨ç¼–è¯‘æ—¶ç¡®å®šï¼ŒåŸºäºæŒ‡é’ˆç±»å‹ï¼ˆBase*ï¼‰ï¼Œè€Œå‡½æ•°ä½“åœ¨è¿è¡Œæ—¶ç¡®å®šï¼ŒåŸºäºå¯¹è±¡ç±»å‹ï¼ˆDeriveï¼‰ã€‚","link":"","tags":[{"name":"c++","slug":"c","permalink":"https://lyroom.github.io/tags/c/"},{"name":"ç»§æ‰¿","slug":"ç»§æ‰¿","permalink":"https://lyroom.github.io/tags/%E7%BB%A7%E6%89%BF/"},{"name":"å¤šæ€","slug":"å¤šæ€","permalink":"https://lyroom.github.io/tags/%E5%A4%9A%E6%80%81/"},{"name":"è™šå‡½æ•°","slug":"è™šå‡½æ•°","permalink":"https://lyroom.github.io/tags/%E8%99%9A%E5%87%BD%E6%95%B0/"},{"name":"è™šå‡½æ•°è¡¨","slug":"è™šå‡½æ•°è¡¨","permalink":"https://lyroom.github.io/tags/%E8%99%9A%E5%87%BD%E6%95%B0%E8%A1%A8/"},{"name":"è™šå‡½æ•°æŒ‡é’ˆ","slug":"è™šå‡½æ•°æŒ‡é’ˆ","permalink":"https://lyroom.github.io/tags/%E8%99%9A%E5%87%BD%E6%95%B0%E6%8C%87%E9%92%88/"}]},{"title":"C++æ ¸å¿ƒç¼–ç¨‹","date":"2024-10-16T03:56:40.000Z","path":"2024/10/16/C-æ ¸å¿ƒç¼–ç¨‹/","text":"æœ¬é˜¶æ®µä¸»è¦é’ˆå¯¹C++ , é¢å‘å¯¹è±¡ , ç¼–ç¨‹æŠ€æœ¯åšè¯¦ç»†è®²è§£ï¼Œæ¢è®¨C++ä¸­çš„æ ¸å¿ƒå’Œç²¾é«“ã€‚ 1 å†…å­˜åˆ†åŒºæ¨¡å‹C++ç¨‹åºåœ¨æ‰§è¡Œæ—¶ï¼Œå°†å†…å­˜å¤§æ–¹å‘åˆ’åˆ†ä¸º4ä¸ªåŒºåŸŸ ä»£ç åŒºï¼šå­˜æ”¾å‡½æ•°ä½“çš„äºŒè¿›åˆ¶ä»£ç ï¼Œç”±æ“ä½œç³»ç»Ÿè¿›è¡Œç®¡ç†çš„ å…¨å±€åŒºï¼šå­˜æ”¾å…¨å±€å˜é‡å’Œé™æ€å˜é‡ä»¥åŠå¸¸é‡ æ ˆåŒºï¼šç”±ç¼–è¯‘å™¨è‡ªåŠ¨åˆ†é…é‡Šæ”¾, å­˜æ”¾å‡½æ•°çš„å‚æ•°å€¼,å±€éƒ¨å˜é‡ç­‰ å †åŒºï¼šç”±ç¨‹åºå‘˜åˆ†é…å’Œé‡Šæ”¾,è‹¥ç¨‹åºå‘˜ä¸é‡Šæ”¾,ç¨‹åºç»“æŸæ—¶ç”±æ“ä½œç³»ç»Ÿå›æ”¶ å†…å­˜å››åŒºæ„ä¹‰ï¼š ä¸åŒåŒºåŸŸå­˜æ”¾çš„æ•°æ®ï¼Œèµ‹äºˆä¸åŒçš„ç”Ÿå‘½å‘¨æœŸ, ç»™æˆ‘ä»¬æ›´å¤§çš„çµæ´»ç¼–ç¨‹ 1.1 ç¨‹åºè¿è¡Œå‰â€‹ åœ¨ç¨‹åºç¼–è¯‘åï¼Œç”Ÿæˆäº†exeå¯æ‰§è¡Œç¨‹åºï¼Œæœªæ‰§è¡Œè¯¥ç¨‹åºå‰åˆ†ä¸ºä¸¤ä¸ªåŒºåŸŸ â€‹ ä»£ç åŒºï¼š â€‹ å­˜æ”¾ CPU æ‰§è¡Œçš„æœºå™¨æŒ‡ä»¤ â€‹ ä»£ç åŒºæ˜¯å…±äº«çš„ï¼Œå…±äº«çš„ç›®çš„æ˜¯å¯¹äºé¢‘ç¹è¢«æ‰§è¡Œçš„ç¨‹åºï¼Œåªéœ€è¦åœ¨å†…å­˜ä¸­æœ‰ä¸€ä»½ä»£ç å³å¯ â€‹ ä»£ç åŒºæ˜¯åªè¯»çš„ï¼Œä½¿å…¶åªè¯»çš„åŸå› æ˜¯é˜²æ­¢ç¨‹åºæ„å¤–åœ°ä¿®æ”¹äº†å®ƒçš„æŒ‡ä»¤ â€‹ å…¨å±€åŒºï¼š â€‹ å…¨å±€å˜é‡å’Œé™æ€å˜é‡å­˜æ”¾åœ¨æ­¤. â€‹ å…¨å±€åŒºè¿˜åŒ…å«äº†å¸¸é‡åŒº, å­—ç¬¦ä¸²å¸¸é‡å’Œå…¶ä»–å¸¸é‡ä¹Ÿå­˜æ”¾åœ¨æ­¤. â€‹ &#x3D;&#x3D;è¯¥åŒºåŸŸçš„æ•°æ®åœ¨ç¨‹åºç»“æŸåç”±æ“ä½œç³»ç»Ÿé‡Šæ”¾&#x3D;&#x3D;. ç¤ºä¾‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243//å…¨å±€å˜é‡int g_a = 10;int g_b = 10;//å…¨å±€å¸¸é‡const int c_g_a = 10;const int c_g_b = 10;int main() &#123; //å±€éƒ¨å˜é‡ int a = 10; int b = 10; //æ‰“å°åœ°å€ cout &lt;&lt; &quot;å±€éƒ¨å˜é‡aåœ°å€ä¸ºï¼š &quot; &lt;&lt; (int)&amp;a &lt;&lt; endl; cout &lt;&lt; &quot;å±€éƒ¨å˜é‡båœ°å€ä¸ºï¼š &quot; &lt;&lt; (int)&amp;b &lt;&lt; endl; cout &lt;&lt; &quot;å…¨å±€å˜é‡g_aåœ°å€ä¸ºï¼š &quot; &lt;&lt; (int)&amp;g_a &lt;&lt; endl; cout &lt;&lt; &quot;å…¨å±€å˜é‡g_båœ°å€ä¸ºï¼š &quot; &lt;&lt; (int)&amp;g_b &lt;&lt; endl; //é™æ€å˜é‡ static int s_a = 10; static int s_b = 10; cout &lt;&lt; &quot;é™æ€å˜é‡s_aåœ°å€ä¸ºï¼š &quot; &lt;&lt; (int)&amp;s_a &lt;&lt; endl; cout &lt;&lt; &quot;é™æ€å˜é‡s_båœ°å€ä¸ºï¼š &quot; &lt;&lt; (int)&amp;s_b &lt;&lt; endl; cout &lt;&lt; &quot;å­—ç¬¦ä¸²å¸¸é‡åœ°å€ä¸ºï¼š &quot; &lt;&lt; (int)&amp;&quot;hello world&quot; &lt;&lt; endl; cout &lt;&lt; &quot;å­—ç¬¦ä¸²å¸¸é‡åœ°å€ä¸ºï¼š &quot; &lt;&lt; (int)&amp;&quot;hello world1&quot; &lt;&lt; endl; cout &lt;&lt; &quot;å…¨å±€å¸¸é‡c_g_aåœ°å€ä¸ºï¼š &quot; &lt;&lt; (int)&amp;c_g_a &lt;&lt; endl; cout &lt;&lt; &quot;å…¨å±€å¸¸é‡c_g_båœ°å€ä¸ºï¼š &quot; &lt;&lt; (int)&amp;c_g_b &lt;&lt; endl; const int c_l_a = 10; const int c_l_b = 10; cout &lt;&lt; &quot;å±€éƒ¨å¸¸é‡c_l_aåœ°å€ä¸ºï¼š &quot; &lt;&lt; (int)&amp;c_l_a &lt;&lt; endl; cout &lt;&lt; &quot;å±€éƒ¨å¸¸é‡c_l_båœ°å€ä¸ºï¼š &quot; &lt;&lt; (int)&amp;c_l_b &lt;&lt; endl; system(&quot;pause&quot;); return 0;&#125; æ‰“å°ç»“æœï¼š æ€»ç»“ï¼š C++ä¸­åœ¨ç¨‹åºè¿è¡Œå‰åˆ†ä¸ºå…¨å±€åŒºå’Œä»£ç åŒº ä»£ç åŒºç‰¹ç‚¹æ˜¯å…±äº«å’Œåªè¯» å…¨å±€åŒºä¸­å­˜æ”¾å…¨å±€å˜é‡ã€é™æ€å˜é‡ã€å¸¸é‡ å¸¸é‡åŒºä¸­å­˜æ”¾ constä¿®é¥°çš„å…¨å±€å¸¸é‡ å’Œ å­—ç¬¦ä¸²å¸¸é‡ 1.2 ç¨‹åºè¿è¡Œåâ€‹ æ ˆåŒºï¼š â€‹ ç”±ç¼–è¯‘å™¨è‡ªåŠ¨åˆ†é…é‡Šæ”¾, å­˜æ”¾å‡½æ•°çš„å‚æ•°å€¼,å±€éƒ¨å˜é‡ç­‰ â€‹ æ³¨æ„äº‹é¡¹ï¼šä¸è¦è¿”å›å±€éƒ¨å˜é‡çš„åœ°å€ï¼Œæ ˆåŒºå¼€è¾Ÿçš„æ•°æ®ç”±ç¼–è¯‘å™¨è‡ªåŠ¨é‡Šæ”¾ ç¤ºä¾‹ï¼š 1234567891011121314151617int * func()&#123; int a = 10; return &amp;a;&#125;int main() &#123; int *p = func(); cout &lt;&lt; *p &lt;&lt; endl; cout &lt;&lt; *p &lt;&lt; endl; system(&quot;pause&quot;); return 0;&#125; â€‹ å †åŒºï¼š â€‹ ç”±ç¨‹åºå‘˜åˆ†é…é‡Šæ”¾,è‹¥ç¨‹åºå‘˜ä¸é‡Šæ”¾,ç¨‹åºç»“æŸæ—¶ç”±æ“ä½œç³»ç»Ÿå›æ”¶ â€‹ åœ¨C++ä¸­ä¸»è¦åˆ©ç”¨newåœ¨å †åŒºå¼€è¾Ÿå†…å­˜ ç¤ºä¾‹ï¼š 1234567891011121314151617int* func()&#123; int* a = new int(10); return a;&#125;int main() &#123; int *p = func(); cout &lt;&lt; *p &lt;&lt; endl; cout &lt;&lt; *p &lt;&lt; endl; system(&quot;pause&quot;); return 0;&#125; æ€»ç»“ï¼š å †åŒºæ•°æ®ç”±ç¨‹åºå‘˜ç®¡ç†å¼€è¾Ÿå’Œé‡Šæ”¾ å †åŒºæ•°æ®åˆ©ç”¨newå…³é”®å­—è¿›è¡Œå¼€è¾Ÿå†…å­˜ 1.3 newæ“ä½œç¬¦â€‹ C++ä¸­åˆ©ç”¨&#x3D;&#x3D;new&#x3D;&#x3D;æ“ä½œç¬¦åœ¨å †åŒºå¼€è¾Ÿæ•°æ® â€‹ å †åŒºå¼€è¾Ÿçš„æ•°æ®ï¼Œç”±ç¨‹åºå‘˜æ‰‹åŠ¨å¼€è¾Ÿï¼Œæ‰‹åŠ¨é‡Šæ”¾ï¼Œé‡Šæ”¾åˆ©ç”¨æ“ä½œç¬¦ &#x3D;&#x3D;delete&#x3D;&#x3D; â€‹ è¯­æ³•ï¼š new æ•°æ®ç±»å‹ â€‹ åˆ©ç”¨newåˆ›å»ºçš„æ•°æ®ï¼Œä¼šè¿”å›è¯¥æ•°æ®å¯¹åº”çš„ç±»å‹çš„æŒ‡é’ˆ ç¤ºä¾‹1ï¼š åŸºæœ¬è¯­æ³• 12345678910111213141516171819202122int* func()&#123; int* a = new int(10); return a;&#125;int main() &#123; int *p = func(); cout &lt;&lt; *p &lt;&lt; endl; cout &lt;&lt; *p &lt;&lt; endl; //åˆ©ç”¨deleteé‡Šæ”¾å †åŒºæ•°æ® delete p; //cout &lt;&lt; *p &lt;&lt; endl; //æŠ¥é”™ï¼Œé‡Šæ”¾çš„ç©ºé—´ä¸å¯è®¿é—® system(&quot;pause&quot;); return 0;&#125; ç¤ºä¾‹2ï¼šå¼€è¾Ÿæ•°ç»„ 12345678910111213141516171819202122//å †åŒºå¼€è¾Ÿæ•°ç»„int main() &#123; int* arr = new int[10]; for (int i = 0; i &lt; 10; i++) &#123; arr[i] = i + 100; &#125; for (int i = 0; i &lt; 10; i++) &#123; cout &lt;&lt; arr[i] &lt;&lt; endl; &#125; //é‡Šæ”¾æ•°ç»„ delete ååŠ  [] delete[] arr; system(&quot;pause&quot;); return 0;&#125; 2 å¼•ç”¨2.1 å¼•ç”¨çš„åŸºæœ¬ä½¿ç”¨**ä½œç”¨ï¼š **ç»™å˜é‡èµ·åˆ«å è¯­æ³•ï¼š æ•°æ®ç±»å‹ &amp;åˆ«å = åŸå ç¤ºä¾‹ï¼š 1234567891011121314151617int main() &#123; int a = 10; int &amp;b = a; cout &lt;&lt; &quot;a = &quot; &lt;&lt; a &lt;&lt; endl; cout &lt;&lt; &quot;b = &quot; &lt;&lt; b &lt;&lt; endl; b = 100; cout &lt;&lt; &quot;a = &quot; &lt;&lt; a &lt;&lt; endl; cout &lt;&lt; &quot;b = &quot; &lt;&lt; b &lt;&lt; endl; system(&quot;pause&quot;); return 0;&#125; 2.2 å¼•ç”¨æ³¨æ„äº‹é¡¹ å¼•ç”¨å¿…é¡»åˆå§‹åŒ– å¼•ç”¨åœ¨åˆå§‹åŒ–åï¼Œä¸å¯ä»¥æ”¹å˜ ç¤ºä¾‹ï¼š 12345678910111213141516int main() &#123; int a = 10; int b = 20; //int &amp;c; //é”™è¯¯ï¼Œå¼•ç”¨å¿…é¡»åˆå§‹åŒ– int &amp;c = a; //ä¸€æ—¦åˆå§‹åŒ–åï¼Œå°±ä¸å¯ä»¥æ›´æ”¹ c = b; //è¿™æ˜¯èµ‹å€¼æ“ä½œï¼Œä¸æ˜¯æ›´æ”¹å¼•ç”¨ cout &lt;&lt; &quot;a = &quot; &lt;&lt; a &lt;&lt; endl; cout &lt;&lt; &quot;b = &quot; &lt;&lt; b &lt;&lt; endl; cout &lt;&lt; &quot;c = &quot; &lt;&lt; c &lt;&lt; endl; system(&quot;pause&quot;); return 0;&#125; 2.3 å¼•ç”¨åšå‡½æ•°å‚æ•°ä½œç”¨ï¼šå‡½æ•°ä¼ å‚æ—¶ï¼Œå¯ä»¥åˆ©ç”¨å¼•ç”¨çš„æŠ€æœ¯è®©å½¢å‚ä¿®é¥°å®å‚ ä¼˜ç‚¹ï¼šå¯ä»¥ç®€åŒ–æŒ‡é’ˆä¿®æ”¹å®å‚ ç¤ºä¾‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940//1. å€¼ä¼ é€’void mySwap01(int a, int b) &#123; int temp = a; a = b; b = temp;&#125;//2. åœ°å€ä¼ é€’void mySwap02(int* a, int* b) &#123; int temp = *a; *a = *b; *b = temp;&#125;//3. å¼•ç”¨ä¼ é€’void mySwap03(int&amp; a, int&amp; b) &#123; int temp = a; a = b; b = temp;&#125;int main() &#123; int a = 10; int b = 20; mySwap01(a, b); cout &lt;&lt; &quot;a:&quot; &lt;&lt; a &lt;&lt; &quot; b:&quot; &lt;&lt; b &lt;&lt; endl; mySwap02(&amp;a, &amp;b); cout &lt;&lt; &quot;a:&quot; &lt;&lt; a &lt;&lt; &quot; b:&quot; &lt;&lt; b &lt;&lt; endl; mySwap03(a, b); cout &lt;&lt; &quot;a:&quot; &lt;&lt; a &lt;&lt; &quot; b:&quot; &lt;&lt; b &lt;&lt; endl; system(&quot;pause&quot;); return 0;&#125; æ€»ç»“ï¼šé€šè¿‡å¼•ç”¨å‚æ•°äº§ç”Ÿçš„æ•ˆæœåŒæŒ‰åœ°å€ä¼ é€’æ˜¯ä¸€æ ·çš„ã€‚å¼•ç”¨çš„è¯­æ³•æ›´æ¸…æ¥šç®€å• 2.4 å¼•ç”¨åšå‡½æ•°è¿”å›å€¼ä½œç”¨ï¼šå¼•ç”¨æ˜¯å¯ä»¥ä½œä¸ºå‡½æ•°çš„è¿”å›å€¼å­˜åœ¨çš„ æ³¨æ„ï¼šä¸è¦è¿”å›å±€éƒ¨å˜é‡å¼•ç”¨ ç”¨æ³•ï¼šå‡½æ•°è°ƒç”¨ä½œä¸ºå·¦å€¼ ç¤ºä¾‹ï¼š 123456789101112131415161718192021222324252627282930313233//è¿”å›å±€éƒ¨å˜é‡å¼•ç”¨int&amp; test01() &#123; int a = 10; //å±€éƒ¨å˜é‡ return a;&#125;//è¿”å›é™æ€å˜é‡å¼•ç”¨int&amp; test02() &#123; static int a = 20; return a;&#125;int main() &#123; //ä¸èƒ½è¿”å›å±€éƒ¨å˜é‡çš„å¼•ç”¨ int&amp; ref = test01(); cout &lt;&lt; &quot;ref = &quot; &lt;&lt; ref &lt;&lt; endl; cout &lt;&lt; &quot;ref = &quot; &lt;&lt; ref &lt;&lt; endl; //å¦‚æœå‡½æ•°åšå·¦å€¼ï¼Œé‚£ä¹ˆå¿…é¡»è¿”å›å¼•ç”¨ int&amp; ref2 = test02(); cout &lt;&lt; &quot;ref2 = &quot; &lt;&lt; ref2 &lt;&lt; endl; cout &lt;&lt; &quot;ref2 = &quot; &lt;&lt; ref2 &lt;&lt; endl; test02() = 1000; cout &lt;&lt; &quot;ref2 = &quot; &lt;&lt; ref2 &lt;&lt; endl; cout &lt;&lt; &quot;ref2 = &quot; &lt;&lt; ref2 &lt;&lt; endl; system(&quot;pause&quot;); return 0;&#125; â€‹ 2.5 å¼•ç”¨çš„æœ¬è´¨æœ¬è´¨ï¼šå¼•ç”¨çš„æœ¬è´¨åœ¨c++å†…éƒ¨å®ç°æ˜¯ä¸€ä¸ªæŒ‡é’ˆå¸¸é‡. è®²è§£ç¤ºä¾‹ï¼š 1234567891011121314151617//å‘ç°æ˜¯å¼•ç”¨ï¼Œè½¬æ¢ä¸º int* const ref = &amp;a;void func(int&amp; ref)&#123; ref = 100; // refæ˜¯å¼•ç”¨ï¼Œè½¬æ¢ä¸º*ref = 100&#125;int main()&#123; int a = 10; //è‡ªåŠ¨è½¬æ¢ä¸º int* const ref = &amp;a; æŒ‡é’ˆå¸¸é‡æ˜¯æŒ‡é’ˆæŒ‡å‘ä¸å¯æ”¹ï¼Œä¹Ÿè¯´æ˜ä¸ºä»€ä¹ˆå¼•ç”¨ä¸å¯æ›´æ”¹ int&amp; ref = a; ref = 20; //å†…éƒ¨å‘ç°refæ˜¯å¼•ç”¨ï¼Œè‡ªåŠ¨å¸®æˆ‘ä»¬è½¬æ¢ä¸º: *ref = 20; cout &lt;&lt; &quot;a:&quot; &lt;&lt; a &lt;&lt; endl; cout &lt;&lt; &quot;ref:&quot; &lt;&lt; ref &lt;&lt; endl; func(a); return 0;&#125; ç»“è®ºï¼šC++æ¨èç”¨å¼•ç”¨æŠ€æœ¯ï¼Œå› ä¸ºè¯­æ³•æ–¹ä¾¿ï¼Œå¼•ç”¨æœ¬è´¨æ˜¯æŒ‡é’ˆå¸¸é‡ï¼Œä½†æ˜¯æ‰€æœ‰çš„æŒ‡é’ˆæ“ä½œç¼–è¯‘å™¨éƒ½å¸®æˆ‘ä»¬åšäº† 2.6 å¸¸é‡å¼•ç”¨ä½œç”¨ï¼šå¸¸é‡å¼•ç”¨ä¸»è¦ç”¨æ¥ä¿®é¥°å½¢å‚ï¼Œé˜²æ­¢è¯¯æ“ä½œ åœ¨å‡½æ•°å½¢å‚åˆ—è¡¨ä¸­ï¼Œå¯ä»¥åŠ &#x3D;&#x3D;constä¿®é¥°å½¢å‚&#x3D;&#x3D;ï¼Œé˜²æ­¢å½¢å‚æ”¹å˜å®å‚ ç¤ºä¾‹ï¼š 1234567891011121314151617181920212223//å¼•ç”¨ä½¿ç”¨çš„åœºæ™¯ï¼Œé€šå¸¸ç”¨æ¥ä¿®é¥°å½¢å‚void showValue(const int&amp; v) &#123; //v += 10; cout &lt;&lt; v &lt;&lt; endl;&#125;int main() &#123; //int&amp; ref = 10; å¼•ç”¨æœ¬èº«éœ€è¦ä¸€ä¸ªåˆæ³•çš„å†…å­˜ç©ºé—´ï¼Œå› æ­¤è¿™è¡Œé”™è¯¯ //åŠ å…¥constå°±å¯ä»¥äº†ï¼Œç¼–è¯‘å™¨ä¼˜åŒ–ä»£ç ï¼Œint temp = 10; const int&amp; ref = temp; const int&amp; ref = 10; //ref = 100; //åŠ å…¥conståä¸å¯ä»¥ä¿®æ”¹å˜é‡ cout &lt;&lt; ref &lt;&lt; endl; //å‡½æ•°ä¸­åˆ©ç”¨å¸¸é‡å¼•ç”¨é˜²æ­¢è¯¯æ“ä½œä¿®æ”¹å®å‚ int a = 10; showValue(a); system(&quot;pause&quot;); return 0;&#125; 3 å‡½æ•°æé«˜3.1 å‡½æ•°é»˜è®¤å‚æ•°åœ¨C++ä¸­ï¼Œå‡½æ•°çš„å½¢å‚åˆ—è¡¨ä¸­çš„å½¢å‚æ˜¯å¯ä»¥æœ‰é»˜è®¤å€¼çš„ã€‚ è¯­æ³•ï¼š è¿”å›å€¼ç±»å‹ å‡½æ•°å ï¼ˆå‚æ•°= é»˜è®¤å€¼ï¼‰&#123;&#125; ç¤ºä¾‹ï¼š 1234567891011121314151617181920int func(int a, int b = 10, int c = 10) &#123; return a + b + c;&#125;//1. å¦‚æœæŸä¸ªä½ç½®å‚æ•°æœ‰é»˜è®¤å€¼ï¼Œé‚£ä¹ˆä»è¿™ä¸ªä½ç½®å¾€åï¼Œä»å·¦å‘å³ï¼Œå¿…é¡»éƒ½è¦æœ‰é»˜è®¤å€¼//2. å¦‚æœå‡½æ•°å£°æ˜æœ‰é»˜è®¤å€¼ï¼Œå‡½æ•°å®ç°çš„æ—¶å€™å°±ä¸èƒ½æœ‰é»˜è®¤å‚æ•°int func2(int a = 10, int b = 10);int func2(int a, int b) &#123; return a + b;&#125;int main() &#123; cout &lt;&lt; &quot;ret = &quot; &lt;&lt; func(20, 20) &lt;&lt; endl; cout &lt;&lt; &quot;ret = &quot; &lt;&lt; func(100) &lt;&lt; endl; system(&quot;pause&quot;); return 0;&#125; 3.2 å‡½æ•°å ä½å‚æ•°C++ä¸­å‡½æ•°çš„å½¢å‚åˆ—è¡¨é‡Œå¯ä»¥æœ‰å ä½å‚æ•°ï¼Œç”¨æ¥åšå ä½ï¼Œè°ƒç”¨å‡½æ•°æ—¶å¿…é¡»å¡«è¡¥è¯¥ä½ç½® è¯­æ³•ï¼š è¿”å›å€¼ç±»å‹ å‡½æ•°å (æ•°æ®ç±»å‹)&#123;&#125; åœ¨ç°é˜¶æ®µå‡½æ•°çš„å ä½å‚æ•°å­˜åœ¨æ„ä¹‰ä¸å¤§ï¼Œä½†æ˜¯åé¢çš„è¯¾ç¨‹ä¸­ä¼šç”¨åˆ°è¯¥æŠ€æœ¯ ç¤ºä¾‹ï¼š 12345678910111213//å‡½æ•°å ä½å‚æ•° ï¼Œå ä½å‚æ•°ä¹Ÿå¯ä»¥æœ‰é»˜è®¤å‚æ•°void func(int a, int) &#123; cout &lt;&lt; &quot;this is func&quot; &lt;&lt; endl;&#125;int main() &#123; func(10,10); //å ä½å‚æ•°å¿…é¡»å¡«è¡¥ system(&quot;pause&quot;); return 0;&#125; 3.3 å‡½æ•°é‡è½½3.3.1 å‡½æ•°é‡è½½æ¦‚è¿°ä½œç”¨ï¼šå‡½æ•°åå¯ä»¥ç›¸åŒï¼Œæé«˜å¤ç”¨æ€§ å‡½æ•°é‡è½½æ»¡è¶³æ¡ä»¶ï¼š åŒä¸€ä¸ªä½œç”¨åŸŸä¸‹ å‡½æ•°åç§°ç›¸åŒ å‡½æ•°å‚æ•°ç±»å‹ä¸åŒ æˆ–è€… ä¸ªæ•°ä¸åŒ æˆ–è€… é¡ºåºä¸åŒ æ³¨æ„: å‡½æ•°çš„è¿”å›å€¼ä¸å¯ä»¥ä½œä¸ºå‡½æ•°é‡è½½çš„æ¡ä»¶ ç¤ºä¾‹ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041//å‡½æ•°é‡è½½éœ€è¦å‡½æ•°éƒ½åœ¨åŒä¸€ä¸ªä½œç”¨åŸŸä¸‹void func()&#123; cout &lt;&lt; &quot;func çš„è°ƒç”¨ï¼&quot; &lt;&lt; endl;&#125;void func(int a)&#123; cout &lt;&lt; &quot;func (int a) çš„è°ƒç”¨ï¼&quot; &lt;&lt; endl;&#125;void func(double a)&#123; cout &lt;&lt; &quot;func (double a)çš„è°ƒç”¨ï¼&quot; &lt;&lt; endl;&#125;void func(int a ,double b)&#123; cout &lt;&lt; &quot;func (int a ,double b) çš„è°ƒç”¨ï¼&quot; &lt;&lt; endl;&#125;void func(double a ,int b)&#123; cout &lt;&lt; &quot;func (double a ,int b)çš„è°ƒç”¨ï¼&quot; &lt;&lt; endl;&#125;//å‡½æ•°è¿”å›å€¼ä¸å¯ä»¥ä½œä¸ºå‡½æ•°é‡è½½æ¡ä»¶//int func(double a, int b)//&#123;// cout &lt;&lt; &quot;func (double a ,int b)çš„è°ƒç”¨ï¼&quot; &lt;&lt; endl;//&#125;int main() &#123; func(); func(10); func(3.14); func(10,3.14); func(3.14 , 10); system(&quot;pause&quot;); return 0;&#125; 3.3.2 å‡½æ•°é‡è½½æ³¨æ„äº‹é¡¹ å¼•ç”¨ä½œä¸ºé‡è½½æ¡ä»¶ å‡½æ•°é‡è½½ç¢°åˆ°å‡½æ•°é»˜è®¤å‚æ•° ç¤ºä¾‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839//å‡½æ•°é‡è½½æ³¨æ„äº‹é¡¹//1ã€å¼•ç”¨ä½œä¸ºé‡è½½æ¡ä»¶void func(int &amp;a)&#123; cout &lt;&lt; &quot;func (int &amp;a) è°ƒç”¨ &quot; &lt;&lt; endl;&#125;void func(const int &amp;a)&#123; cout &lt;&lt; &quot;func (const int &amp;a) è°ƒç”¨ &quot; &lt;&lt; endl;&#125;//2ã€å‡½æ•°é‡è½½ç¢°åˆ°å‡½æ•°é»˜è®¤å‚æ•°void func2(int a, int b = 10)&#123; cout &lt;&lt; &quot;func2(int a, int b = 10) è°ƒç”¨&quot; &lt;&lt; endl;&#125;void func2(int a)&#123; cout &lt;&lt; &quot;func2(int a) è°ƒç”¨&quot; &lt;&lt; endl;&#125;int main() &#123; int a = 10; func(a); //è°ƒç”¨æ— const func(10);//è°ƒç”¨æœ‰const //func2(10); //ç¢°åˆ°é»˜è®¤å‚æ•°äº§ç”Ÿæ­§ä¹‰ï¼Œéœ€è¦é¿å… system(&quot;pause&quot;); return 0;&#125; 4 ç±»å’Œå¯¹è±¡C++é¢å‘å¯¹è±¡çš„ä¸‰å¤§ç‰¹æ€§ä¸ºï¼š&#x3D;&#x3D;å°è£…ã€ç»§æ‰¿ã€å¤šæ€&#x3D;&#x3D; C++è®¤ä¸º&#x3D;&#x3D;ä¸‡äº‹ä¸‡ç‰©éƒ½çš†ä¸ºå¯¹è±¡&#x3D;&#x3D;ï¼Œå¯¹è±¡ä¸Šæœ‰å…¶å±æ€§å’Œè¡Œä¸º ä¾‹å¦‚ï¼š â€‹ äººå¯ä»¥ä½œä¸ºå¯¹è±¡ï¼Œå±æ€§æœ‰å§“åã€å¹´é¾„ã€èº«é«˜ã€ä½“é‡â€¦ï¼Œè¡Œä¸ºæœ‰èµ°ã€è·‘ã€è·³ã€åƒé¥­ã€å”±æ­Œâ€¦ â€‹ è½¦ä¹Ÿå¯ä»¥ä½œä¸ºå¯¹è±¡ï¼Œå±æ€§æœ‰è½®èƒã€æ–¹å‘ç›˜ã€è½¦ç¯â€¦,è¡Œä¸ºæœ‰è½½äººã€æ”¾éŸ³ä¹ã€æ”¾ç©ºè°ƒâ€¦ â€‹ å…·æœ‰ç›¸åŒæ€§è´¨çš„&#x3D;&#x3D;å¯¹è±¡&#x3D;&#x3D;ï¼Œæˆ‘ä»¬å¯ä»¥æŠ½è±¡ç§°ä¸º&#x3D;&#x3D;ç±»&#x3D;&#x3D;ï¼Œäººå±äºäººç±»ï¼Œè½¦å±äºè½¦ç±» 4.1 å°è£…4.1.1 å°è£…çš„æ„ä¹‰å°è£…æ˜¯C++é¢å‘å¯¹è±¡ä¸‰å¤§ç‰¹æ€§ä¹‹ä¸€ å°è£…çš„æ„ä¹‰ï¼š å°†å±æ€§å’Œè¡Œä¸ºä½œä¸ºä¸€ä¸ªæ•´ä½“ï¼Œè¡¨ç°ç”Ÿæ´»ä¸­çš„äº‹ç‰© å°†å±æ€§å’Œè¡Œä¸ºåŠ ä»¥æƒé™æ§åˆ¶ å°è£…æ„ä¹‰ä¸€ï¼š â€‹ åœ¨è®¾è®¡ç±»çš„æ—¶å€™ï¼Œå±æ€§å’Œè¡Œä¸ºå†™åœ¨ä¸€èµ·ï¼Œè¡¨ç°äº‹ç‰© è¯­æ³•ï¼š class ç±»å&#123; è®¿é—®æƒé™ï¼š å±æ€§ / è¡Œä¸º &#125;; ç¤ºä¾‹1ï¼šè®¾è®¡ä¸€ä¸ªåœ†ç±»ï¼Œæ±‚åœ†çš„å‘¨é•¿ ç¤ºä¾‹ä»£ç ï¼š 123456789101112131415161718192021222324252627282930313233343536373839//åœ†å‘¨ç‡const double PI = 3.14;//1ã€å°è£…çš„æ„ä¹‰//å°†å±æ€§å’Œè¡Œä¸ºä½œä¸ºä¸€ä¸ªæ•´ä½“ï¼Œç”¨æ¥è¡¨ç°ç”Ÿæ´»ä¸­çš„äº‹ç‰©//å°è£…ä¸€ä¸ªåœ†ç±»ï¼Œæ±‚åœ†çš„å‘¨é•¿//classä»£è¡¨è®¾è®¡ä¸€ä¸ªç±»ï¼Œåé¢è·Ÿç€çš„æ˜¯ç±»åclass Circle&#123;public: //è®¿é—®æƒé™ å…¬å…±çš„æƒé™ //å±æ€§ int m_r;//åŠå¾„ //è¡Œä¸º //è·å–åˆ°åœ†çš„å‘¨é•¿ double calculateZC() &#123; //2 * pi * r //è·å–åœ†çš„å‘¨é•¿ return 2 * PI * m_r; &#125;&#125;;int main() &#123; //é€šè¿‡åœ†ç±»ï¼Œåˆ›å»ºåœ†çš„å¯¹è±¡ // c1å°±æ˜¯ä¸€ä¸ªå…·ä½“çš„åœ† Circle c1; c1.m_r = 10; //ç»™åœ†å¯¹è±¡çš„åŠå¾„ è¿›è¡Œèµ‹å€¼æ“ä½œ //2 * pi * 10 = = 62.8 cout &lt;&lt; &quot;åœ†çš„å‘¨é•¿ä¸ºï¼š &quot; &lt;&lt; c1.calculateZC() &lt;&lt; endl; system(&quot;pause&quot;); return 0;&#125; ç¤ºä¾‹2ï¼šè®¾è®¡ä¸€ä¸ªå­¦ç”Ÿç±»ï¼Œå±æ€§æœ‰å§“åå’Œå­¦å·ï¼Œå¯ä»¥ç»™å§“åå’Œå­¦å·èµ‹å€¼ï¼Œå¯ä»¥æ˜¾ç¤ºå­¦ç”Ÿçš„å§“åå’Œå­¦å· ç¤ºä¾‹2ä»£ç ï¼š 123456789101112131415161718192021222324252627282930//å­¦ç”Ÿç±»class Student &#123;public: void setName(string name) &#123; m_name = name; &#125; void setID(int id) &#123; m_id = id; &#125; void showStudent() &#123; cout &lt;&lt; &quot;name:&quot; &lt;&lt; m_name &lt;&lt; &quot; ID:&quot; &lt;&lt; m_id &lt;&lt; endl; &#125;public: string m_name; int m_id;&#125;;int main() &#123; Student stu; stu.setName(&quot;å¾·ç›è¥¿äºš&quot;); stu.setID(250); stu.showStudent(); system(&quot;pause&quot;); return 0;&#125; å°è£…æ„ä¹‰äºŒï¼š ç±»åœ¨è®¾è®¡æ—¶ï¼Œå¯ä»¥æŠŠå±æ€§å’Œè¡Œä¸ºæ”¾åœ¨ä¸åŒçš„æƒé™ä¸‹ï¼ŒåŠ ä»¥æ§åˆ¶ è®¿é—®æƒé™æœ‰ä¸‰ç§ï¼š public å…¬å…±æƒé™ protected ä¿æŠ¤æƒé™ private ç§æœ‰æƒé™ ç¤ºä¾‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839//ä¸‰ç§æƒé™//å…¬å…±æƒé™ public ç±»å†…å¯ä»¥è®¿é—® ç±»å¤–å¯ä»¥è®¿é—®//ä¿æŠ¤æƒé™ protected ç±»å†…å¯ä»¥è®¿é—® ç±»å¤–ä¸å¯ä»¥è®¿é—®//ç§æœ‰æƒé™ private ç±»å†…å¯ä»¥è®¿é—® ç±»å¤–ä¸å¯ä»¥è®¿é—®class Person&#123; //å§“å å…¬å…±æƒé™public: string m_Name; //æ±½è½¦ ä¿æŠ¤æƒé™protected: string m_Car; //é“¶è¡Œå¡å¯†ç  ç§æœ‰æƒé™private: int m_Password;public: void func() &#123; m_Name = &quot;å¼ ä¸‰&quot;; m_Car = &quot;æ‹–æ‹‰æœº&quot;; m_Password = 123456; &#125;&#125;;int main() &#123; Person p; p.m_Name = &quot;æå››&quot;; //p.m_Car = &quot;å¥”é©°&quot;; //ä¿æŠ¤æƒé™ç±»å¤–è®¿é—®ä¸åˆ° //p.m_Password = 123; //ç§æœ‰æƒé™ç±»å¤–è®¿é—®ä¸åˆ° system(&quot;pause&quot;); return 0;&#125; 4.1.2 structå’ŒclassåŒºåˆ«åœ¨C++ä¸­ structå’Œclasså”¯ä¸€çš„åŒºåˆ«å°±åœ¨äº é»˜è®¤çš„è®¿é—®æƒé™ä¸åŒ åŒºåˆ«ï¼š struct é»˜è®¤æƒé™ä¸ºå…¬å…± class é»˜è®¤æƒé™ä¸ºç§æœ‰ 12345678910111213141516171819202122class C1&#123; int m_A; //é»˜è®¤æ˜¯ç§æœ‰æƒé™&#125;;struct C2&#123; int m_A; //é»˜è®¤æ˜¯å…¬å…±æƒé™&#125;;int main() &#123; C1 c1; c1.m_A = 10; //é”™è¯¯ï¼Œè®¿é—®æƒé™æ˜¯ç§æœ‰ C2 c2; c2.m_A = 10; //æ­£ç¡®ï¼Œè®¿é—®æƒé™æ˜¯å…¬å…± system(&quot;pause&quot;); return 0;&#125; 4.1.3 æˆå‘˜å±æ€§è®¾ç½®ä¸ºç§æœ‰ä¼˜ç‚¹1ï¼šå°†æ‰€æœ‰æˆå‘˜å±æ€§è®¾ç½®ä¸ºç§æœ‰ï¼Œå¯ä»¥è‡ªå·±æ§åˆ¶è¯»å†™æƒé™ ä¼˜ç‚¹2ï¼šå¯¹äºå†™æƒé™ï¼Œæˆ‘ä»¬å¯ä»¥æ£€æµ‹æ•°æ®çš„æœ‰æ•ˆæ€§ ç¤ºä¾‹ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859class Person &#123;public: //å§“åè®¾ç½®å¯è¯»å¯å†™ void setName(string name) &#123; m_Name = name; &#125; string getName() &#123; return m_Name; &#125; //è·å–å¹´é¾„ int getAge() &#123; return m_Age; &#125; //è®¾ç½®å¹´é¾„ void setAge(int age) &#123; if (age &lt; 0 || age &gt; 150) &#123; cout &lt;&lt; &quot;ä½ ä¸ªè€å¦–ç²¾!&quot; &lt;&lt; endl; return; &#125; m_Age = age; &#125; //æƒ…äººè®¾ç½®ä¸ºåªå†™ void setLover(string lover) &#123; m_Lover = lover; &#125;private: string m_Name; //å¯è¯»å¯å†™ å§“å int m_Age; //åªè¯» å¹´é¾„ string m_Lover; //åªå†™ æƒ…äºº&#125;;int main() &#123; Person p; //å§“åè®¾ç½® p.setName(&quot;å¼ ä¸‰&quot;); cout &lt;&lt; &quot;å§“åï¼š &quot; &lt;&lt; p.getName() &lt;&lt; endl; //å¹´é¾„è®¾ç½® p.setAge(50); cout &lt;&lt; &quot;å¹´é¾„ï¼š &quot; &lt;&lt; p.getAge() &lt;&lt; endl; //æƒ…äººè®¾ç½® p.setLover(&quot;è‹äº•&quot;); //cout &lt;&lt; &quot;æƒ…äººï¼š &quot; &lt;&lt; p.m_Lover &lt;&lt; endl; //åªå†™å±æ€§ï¼Œä¸å¯ä»¥è¯»å– system(&quot;pause&quot;); return 0;&#125; ç»ƒä¹ æ¡ˆä¾‹1ï¼šè®¾è®¡ç«‹æ–¹ä½“ç±» è®¾è®¡ç«‹æ–¹ä½“ç±»(Cube) æ±‚å‡ºç«‹æ–¹ä½“çš„é¢ç§¯å’Œä½“ç§¯ åˆ†åˆ«ç”¨å…¨å±€å‡½æ•°å’Œæˆå‘˜å‡½æ•°åˆ¤æ–­ä¸¤ä¸ªç«‹æ–¹ä½“æ˜¯å¦ç›¸ç­‰ã€‚ ç»ƒä¹ æ¡ˆä¾‹2ï¼šç‚¹å’Œåœ†çš„å…³ç³» è®¾è®¡ä¸€ä¸ªåœ†å½¢ç±»ï¼ˆCircleï¼‰ï¼Œå’Œä¸€ä¸ªç‚¹ç±»ï¼ˆPointï¼‰ï¼Œè®¡ç®—ç‚¹å’Œåœ†çš„å…³ç³»ã€‚ 4.2 å¯¹è±¡çš„åˆå§‹åŒ–å’Œæ¸…ç† ç”Ÿæ´»ä¸­æˆ‘ä»¬ä¹°çš„ç”µå­äº§å“éƒ½åŸºæœ¬ä¼šæœ‰å‡ºå‚è®¾ç½®ï¼Œåœ¨æŸä¸€å¤©æˆ‘ä»¬ä¸ç”¨æ—¶å€™ä¹Ÿä¼šåˆ é™¤ä¸€äº›è‡ªå·±ä¿¡æ¯æ•°æ®ä¿è¯å®‰å…¨ C++ä¸­çš„é¢å‘å¯¹è±¡æ¥æºäºç”Ÿæ´»ï¼Œæ¯ä¸ªå¯¹è±¡ä¹Ÿéƒ½ä¼šæœ‰åˆå§‹è®¾ç½®ä»¥åŠ å¯¹è±¡é”€æ¯å‰çš„æ¸…ç†æ•°æ®çš„è®¾ç½®ã€‚ 4.2.1 æ„é€ å‡½æ•°å’Œææ„å‡½æ•°å¯¹è±¡çš„åˆå§‹åŒ–å’Œæ¸…ç†ä¹Ÿæ˜¯ä¸¤ä¸ªéå¸¸é‡è¦çš„å®‰å…¨é—®é¢˜ â€‹ ä¸€ä¸ªå¯¹è±¡æˆ–è€…å˜é‡æ²¡æœ‰åˆå§‹çŠ¶æ€ï¼Œå¯¹å…¶ä½¿ç”¨åæœæ˜¯æœªçŸ¥ â€‹ åŒæ ·çš„ä½¿ç”¨å®Œä¸€ä¸ªå¯¹è±¡æˆ–å˜é‡ï¼Œæ²¡æœ‰åŠæ—¶æ¸…ç†ï¼Œä¹Ÿä¼šé€ æˆä¸€å®šçš„å®‰å…¨é—®é¢˜ c++åˆ©ç”¨äº†æ„é€ å‡½æ•°å’Œææ„å‡½æ•°è§£å†³ä¸Šè¿°é—®é¢˜ï¼Œè¿™ä¸¤ä¸ªå‡½æ•°å°†ä¼šè¢«ç¼–è¯‘å™¨è‡ªåŠ¨è°ƒç”¨ï¼Œå®Œæˆå¯¹è±¡åˆå§‹åŒ–å’Œæ¸…ç†å·¥ä½œã€‚ å¯¹è±¡çš„åˆå§‹åŒ–å’Œæ¸…ç†å·¥ä½œæ˜¯ç¼–è¯‘å™¨å¼ºåˆ¶è¦æˆ‘ä»¬åšçš„äº‹æƒ…ï¼Œå› æ­¤å¦‚æœæˆ‘ä»¬ä¸æä¾›æ„é€ å’Œææ„ï¼Œç¼–è¯‘å™¨ä¼šæä¾› ç¼–è¯‘å™¨æä¾›çš„æ„é€ å‡½æ•°å’Œææ„å‡½æ•°æ˜¯ç©ºå®ç°ã€‚ æ„é€ å‡½æ•°ï¼šä¸»è¦ä½œç”¨åœ¨äºåˆ›å»ºå¯¹è±¡æ—¶ä¸ºå¯¹è±¡çš„æˆå‘˜å±æ€§èµ‹å€¼ï¼Œæ„é€ å‡½æ•°ç”±ç¼–è¯‘å™¨è‡ªåŠ¨è°ƒç”¨ï¼Œæ— é¡»æ‰‹åŠ¨è°ƒç”¨ã€‚ ææ„å‡½æ•°ï¼šä¸»è¦ä½œç”¨åœ¨äºå¯¹è±¡é”€æ¯å‰ç³»ç»Ÿè‡ªåŠ¨è°ƒç”¨ï¼Œæ‰§è¡Œä¸€äº›æ¸…ç†å·¥ä½œã€‚ æ„é€ å‡½æ•°è¯­æ³•ï¼šç±»å()&#123;&#125; æ„é€ å‡½æ•°ï¼Œæ²¡æœ‰è¿”å›å€¼ä¹Ÿä¸å†™void å‡½æ•°åç§°ä¸ç±»åç›¸åŒ æ„é€ å‡½æ•°å¯ä»¥æœ‰å‚æ•°ï¼Œå› æ­¤å¯ä»¥å‘ç”Ÿé‡è½½ ç¨‹åºåœ¨è°ƒç”¨å¯¹è±¡æ—¶å€™ä¼šè‡ªåŠ¨è°ƒç”¨æ„é€ ï¼Œæ— é¡»æ‰‹åŠ¨è°ƒç”¨,è€Œä¸”åªä¼šè°ƒç”¨ä¸€æ¬¡ ææ„å‡½æ•°è¯­æ³•ï¼š ~ç±»å()&#123;&#125; ææ„å‡½æ•°ï¼Œæ²¡æœ‰è¿”å›å€¼ä¹Ÿä¸å†™void å‡½æ•°åç§°ä¸ç±»åç›¸åŒ,åœ¨åç§°å‰åŠ ä¸Šç¬¦å· ~ ææ„å‡½æ•°ä¸å¯ä»¥æœ‰å‚æ•°ï¼Œå› æ­¤ä¸å¯ä»¥å‘ç”Ÿé‡è½½ ç¨‹åºåœ¨å¯¹è±¡é”€æ¯å‰ä¼šè‡ªåŠ¨è°ƒç”¨ææ„ï¼Œæ— é¡»æ‰‹åŠ¨è°ƒç”¨,è€Œä¸”åªä¼šè°ƒç”¨ä¸€æ¬¡ 1234567891011121314151617181920212223242526272829class Person&#123;public: //æ„é€ å‡½æ•° Person() &#123; cout &lt;&lt; &quot;Personçš„æ„é€ å‡½æ•°è°ƒç”¨&quot; &lt;&lt; endl; &#125; //ææ„å‡½æ•° ~Person() &#123; cout &lt;&lt; &quot;Personçš„ææ„å‡½æ•°è°ƒç”¨&quot; &lt;&lt; endl; &#125;&#125;;void test01()&#123; Person p;&#125;int main() &#123; test01(); system(&quot;pause&quot;); return 0;&#125; 4.2.2 æ„é€ å‡½æ•°çš„åˆ†ç±»åŠè°ƒç”¨ä¸¤ç§åˆ†ç±»æ–¹å¼ï¼š â€‹ æŒ‰å‚æ•°åˆ†ä¸ºï¼š æœ‰å‚æ„é€ å’Œæ— å‚æ„é€  â€‹ æŒ‰ç±»å‹åˆ†ä¸ºï¼š æ™®é€šæ„é€ å’Œæ‹·è´æ„é€  ä¸‰ç§è°ƒç”¨æ–¹å¼ï¼š â€‹ æ‹¬å·æ³• â€‹ æ˜¾ç¤ºæ³• â€‹ éšå¼è½¬æ¢æ³• ç¤ºä¾‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364//1ã€æ„é€ å‡½æ•°åˆ†ç±»// æŒ‰ç…§å‚æ•°åˆ†ç±»åˆ†ä¸º æœ‰å‚å’Œæ— å‚æ„é€  æ— å‚åˆç§°ä¸ºé»˜è®¤æ„é€ å‡½æ•°// æŒ‰ç…§ç±»å‹åˆ†ç±»åˆ†ä¸º æ™®é€šæ„é€ å’Œæ‹·è´æ„é€ class Person &#123;public: //æ— å‚ï¼ˆé»˜è®¤ï¼‰æ„é€ å‡½æ•° Person() &#123; cout &lt;&lt; &quot;æ— å‚æ„é€ å‡½æ•°!&quot; &lt;&lt; endl; &#125; //æœ‰å‚æ„é€ å‡½æ•° Person(int a) &#123; age = a; cout &lt;&lt; &quot;æœ‰å‚æ„é€ å‡½æ•°!&quot; &lt;&lt; endl; &#125; //æ‹·è´æ„é€ å‡½æ•° Person(const Person&amp; p) &#123; age = p.age; cout &lt;&lt; &quot;æ‹·è´æ„é€ å‡½æ•°!&quot; &lt;&lt; endl; &#125; //ææ„å‡½æ•° ~Person() &#123; cout &lt;&lt; &quot;ææ„å‡½æ•°!&quot; &lt;&lt; endl; &#125;public: int age;&#125;;//2ã€æ„é€ å‡½æ•°çš„è°ƒç”¨//è°ƒç”¨æ— å‚æ„é€ å‡½æ•°void test01() &#123; Person p; //è°ƒç”¨æ— å‚æ„é€ å‡½æ•°&#125;//è°ƒç”¨æœ‰å‚çš„æ„é€ å‡½æ•°void test02() &#123; //2.1 æ‹¬å·æ³•ï¼Œå¸¸ç”¨ Person p1(10); //æ³¨æ„1ï¼šè°ƒç”¨æ— å‚æ„é€ å‡½æ•°ä¸èƒ½åŠ æ‹¬å·ï¼Œå¦‚æœåŠ äº†ç¼–è¯‘å™¨è®¤ä¸ºè¿™æ˜¯ä¸€ä¸ªå‡½æ•°å£°æ˜ //Person p2(); //2.2 æ˜¾å¼æ³• Person p2 = Person(10); Person p3 = Person(p2); //Person(10)å•ç‹¬å†™å°±æ˜¯åŒ¿åå¯¹è±¡ å½“å‰è¡Œç»“æŸä¹‹åï¼Œé©¬ä¸Šææ„ //2.3 éšå¼è½¬æ¢æ³• Person p4 = 10; // Person p4 = Person(10); Person p5 = p4; // Person p5 = Person(p4); //æ³¨æ„2ï¼šä¸èƒ½åˆ©ç”¨ æ‹·è´æ„é€ å‡½æ•° åˆå§‹åŒ–åŒ¿åå¯¹è±¡ ç¼–è¯‘å™¨è®¤ä¸ºæ˜¯å¯¹è±¡å£°æ˜ //Person p5(p4);&#125;int main() &#123; test01(); //test02(); system(&quot;pause&quot;); return 0;&#125; 4.2.3 æ‹·è´æ„é€ å‡½æ•°è°ƒç”¨æ—¶æœºC++ä¸­æ‹·è´æ„é€ å‡½æ•°è°ƒç”¨æ—¶æœºé€šå¸¸æœ‰ä¸‰ç§æƒ…å†µ ä½¿ç”¨ä¸€ä¸ªå·²ç»åˆ›å»ºå®Œæ¯•çš„å¯¹è±¡æ¥åˆå§‹åŒ–ä¸€ä¸ªæ–°å¯¹è±¡ å€¼ä¼ é€’çš„æ–¹å¼ç»™å‡½æ•°å‚æ•°ä¼ å€¼ ä»¥å€¼æ–¹å¼è¿”å›å±€éƒ¨å¯¹è±¡ ç¤ºä¾‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566class Person &#123;public: Person() &#123; cout &lt;&lt; &quot;æ— å‚æ„é€ å‡½æ•°!&quot; &lt;&lt; endl; mAge = 0; &#125; Person(int age) &#123; cout &lt;&lt; &quot;æœ‰å‚æ„é€ å‡½æ•°!&quot; &lt;&lt; endl; mAge = age; &#125; Person(const Person&amp; p) &#123; cout &lt;&lt; &quot;æ‹·è´æ„é€ å‡½æ•°!&quot; &lt;&lt; endl; mAge = p.mAge; &#125; //ææ„å‡½æ•°åœ¨é‡Šæ”¾å†…å­˜ä¹‹å‰è°ƒç”¨ ~Person() &#123; cout &lt;&lt; &quot;ææ„å‡½æ•°!&quot; &lt;&lt; endl; &#125;public: int mAge;&#125;;//1. ä½¿ç”¨ä¸€ä¸ªå·²ç»åˆ›å»ºå®Œæ¯•çš„å¯¹è±¡æ¥åˆå§‹åŒ–ä¸€ä¸ªæ–°å¯¹è±¡void test01() &#123; Person man(100); //på¯¹è±¡å·²ç»åˆ›å»ºå®Œæ¯• Person newman(man); //è°ƒç”¨æ‹·è´æ„é€ å‡½æ•° Person newman2 = man; //æ‹·è´æ„é€  //Person newman3; //newman3 = man; //ä¸æ˜¯è°ƒç”¨æ‹·è´æ„é€ å‡½æ•°ï¼Œèµ‹å€¼æ“ä½œ&#125;//2. å€¼ä¼ é€’çš„æ–¹å¼ç»™å‡½æ•°å‚æ•°ä¼ å€¼//ç›¸å½“äºPerson p1 = p;void doWork(Person p1) &#123;&#125;void test02() &#123; Person p; //æ— å‚æ„é€ å‡½æ•° doWork(p);&#125;//3. ä»¥å€¼æ–¹å¼è¿”å›å±€éƒ¨å¯¹è±¡Person doWork2()&#123; Person p1; cout &lt;&lt; (int *)&amp;p1 &lt;&lt; endl; return p1;&#125;void test03()&#123; Person p = doWork2(); cout &lt;&lt; (int *)&amp;p &lt;&lt; endl;&#125;int main() &#123; //test01(); //test02(); test03(); system(&quot;pause&quot;); return 0;&#125; 4.2.4 æ„é€ å‡½æ•°è°ƒç”¨è§„åˆ™é»˜è®¤æƒ…å†µä¸‹ï¼Œc++ç¼–è¯‘å™¨è‡³å°‘ç»™ä¸€ä¸ªç±»æ·»åŠ 3ä¸ªå‡½æ•° 1ï¼é»˜è®¤æ„é€ å‡½æ•°(æ— å‚ï¼Œå‡½æ•°ä½“ä¸ºç©º) 2ï¼é»˜è®¤ææ„å‡½æ•°(æ— å‚ï¼Œå‡½æ•°ä½“ä¸ºç©º) 3ï¼é»˜è®¤æ‹·è´æ„é€ å‡½æ•°ï¼Œå¯¹å±æ€§è¿›è¡Œå€¼æ‹·è´ æ„é€ å‡½æ•°è°ƒç”¨è§„åˆ™å¦‚ä¸‹ï¼š å¦‚æœç”¨æˆ·å®šä¹‰æœ‰å‚æ„é€ å‡½æ•°ï¼Œc++ä¸åœ¨æä¾›é»˜è®¤æ— å‚æ„é€ ï¼Œä½†æ˜¯ä¼šæä¾›é»˜è®¤æ‹·è´æ„é€  å¦‚æœç”¨æˆ·å®šä¹‰æ‹·è´æ„é€ å‡½æ•°ï¼Œc++ä¸ä¼šå†æä¾›å…¶ä»–æ„é€ å‡½æ•° ç¤ºä¾‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354class Person &#123;public: //æ— å‚ï¼ˆé»˜è®¤ï¼‰æ„é€ å‡½æ•° Person() &#123; cout &lt;&lt; &quot;æ— å‚æ„é€ å‡½æ•°!&quot; &lt;&lt; endl; &#125; //æœ‰å‚æ„é€ å‡½æ•° Person(int a) &#123; age = a; cout &lt;&lt; &quot;æœ‰å‚æ„é€ å‡½æ•°!&quot; &lt;&lt; endl; &#125; //æ‹·è´æ„é€ å‡½æ•° Person(const Person&amp; p) &#123; age = p.age; cout &lt;&lt; &quot;æ‹·è´æ„é€ å‡½æ•°!&quot; &lt;&lt; endl; &#125; //ææ„å‡½æ•° ~Person() &#123; cout &lt;&lt; &quot;ææ„å‡½æ•°!&quot; &lt;&lt; endl; &#125;public: int age;&#125;;void test01()&#123; Person p1(18); //å¦‚æœä¸å†™æ‹·è´æ„é€ ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨æ·»åŠ æ‹·è´æ„é€ ï¼Œå¹¶ä¸”åšæµ…æ‹·è´æ“ä½œ Person p2(p1); cout &lt;&lt; &quot;p2çš„å¹´é¾„ä¸ºï¼š &quot; &lt;&lt; p2.age &lt;&lt; endl;&#125;void test02()&#123; //å¦‚æœç”¨æˆ·æä¾›æœ‰å‚æ„é€ ï¼Œç¼–è¯‘å™¨ä¸ä¼šæä¾›é»˜è®¤æ„é€ ï¼Œä¼šæä¾›æ‹·è´æ„é€  Person p1; //æ­¤æ—¶å¦‚æœç”¨æˆ·è‡ªå·±æ²¡æœ‰æä¾›é»˜è®¤æ„é€ ï¼Œä¼šå‡ºé”™ Person p2(10); //ç”¨æˆ·æä¾›çš„æœ‰å‚ Person p3(p2); //æ­¤æ—¶å¦‚æœç”¨æˆ·æ²¡æœ‰æä¾›æ‹·è´æ„é€ ï¼Œç¼–è¯‘å™¨ä¼šæä¾› //å¦‚æœç”¨æˆ·æä¾›æ‹·è´æ„é€ ï¼Œç¼–è¯‘å™¨ä¸ä¼šæä¾›å…¶ä»–æ„é€ å‡½æ•° Person p4; //æ­¤æ—¶å¦‚æœç”¨æˆ·è‡ªå·±æ²¡æœ‰æä¾›é»˜è®¤æ„é€ ï¼Œä¼šå‡ºé”™ Person p5(10); //æ­¤æ—¶å¦‚æœç”¨æˆ·è‡ªå·±æ²¡æœ‰æä¾›æœ‰å‚ï¼Œä¼šå‡ºé”™ Person p6(p5); //ç”¨æˆ·è‡ªå·±æä¾›æ‹·è´æ„é€ &#125;int main() &#123; test01(); system(&quot;pause&quot;); return 0;&#125; 4.2.5 æ·±æ‹·è´ä¸æµ…æ‹·è´æ·±æµ…æ‹·è´æ˜¯é¢è¯•ç»å…¸é—®é¢˜ï¼Œä¹Ÿæ˜¯å¸¸è§çš„ä¸€ä¸ªå‘ æµ…æ‹·è´ï¼šç®€å•çš„èµ‹å€¼æ‹·è´æ“ä½œ æ·±æ‹·è´ï¼šåœ¨å †åŒºé‡æ–°ç”³è¯·ç©ºé—´ï¼Œè¿›è¡Œæ‹·è´æ“ä½œ ç¤ºä¾‹ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556class Person &#123;public: //æ— å‚ï¼ˆé»˜è®¤ï¼‰æ„é€ å‡½æ•° Person() &#123; cout &lt;&lt; &quot;æ— å‚æ„é€ å‡½æ•°!&quot; &lt;&lt; endl; &#125; //æœ‰å‚æ„é€ å‡½æ•° Person(int age ,int height) &#123; cout &lt;&lt; &quot;æœ‰å‚æ„é€ å‡½æ•°!&quot; &lt;&lt; endl; m_age = age; m_height = new int(height); &#125; //æ‹·è´æ„é€ å‡½æ•° Person(const Person&amp; p) &#123; cout &lt;&lt; &quot;æ‹·è´æ„é€ å‡½æ•°!&quot; &lt;&lt; endl; //å¦‚æœä¸åˆ©ç”¨æ·±æ‹·è´åœ¨å †åŒºåˆ›å»ºæ–°å†…å­˜ï¼Œä¼šå¯¼è‡´æµ…æ‹·è´å¸¦æ¥çš„é‡å¤é‡Šæ”¾å †åŒºé—®é¢˜ m_age = p.m_age; m_height = new int(*p.m_height); &#125; //ææ„å‡½æ•° ~Person() &#123; cout &lt;&lt; &quot;ææ„å‡½æ•°!&quot; &lt;&lt; endl; if (m_height != NULL) &#123; delete m_height; &#125; &#125;public: int m_age; int* m_height;&#125;;void test01()&#123; Person p1(18, 180); Person p2(p1); cout &lt;&lt; &quot;p1çš„å¹´é¾„ï¼š &quot; &lt;&lt; p1.m_age &lt;&lt; &quot; èº«é«˜ï¼š &quot; &lt;&lt; *p1.m_height &lt;&lt; endl; cout &lt;&lt; &quot;p2çš„å¹´é¾„ï¼š &quot; &lt;&lt; p2.m_age &lt;&lt; &quot; èº«é«˜ï¼š &quot; &lt;&lt; *p2.m_height &lt;&lt; endl;&#125;int main() &#123; test01(); system(&quot;pause&quot;); return 0;&#125; æ€»ç»“ï¼šå¦‚æœå±æ€§æœ‰åœ¨å †åŒºå¼€è¾Ÿçš„ï¼Œä¸€å®šè¦è‡ªå·±æä¾›æ‹·è´æ„é€ å‡½æ•°ï¼Œé˜²æ­¢æµ…æ‹·è´å¸¦æ¥çš„é—®é¢˜ 4.2.6 åˆå§‹åŒ–åˆ—è¡¨ä½œç”¨ï¼š C++æä¾›äº†åˆå§‹åŒ–åˆ—è¡¨è¯­æ³•ï¼Œç”¨æ¥åˆå§‹åŒ–å±æ€§ è¯­æ³•ï¼šæ„é€ å‡½æ•°()ï¼šå±æ€§1(å€¼1),å±æ€§2ï¼ˆå€¼2ï¼‰... &#123;&#125; ç¤ºä¾‹ï¼š 123456789101112131415161718192021222324252627282930313233class Person &#123;public: ////ä¼ ç»Ÿæ–¹å¼åˆå§‹åŒ– //Person(int a, int b, int c) &#123; // m_A = a; // m_B = b; // m_C = c; //&#125; //åˆå§‹åŒ–åˆ—è¡¨æ–¹å¼åˆå§‹åŒ– Person(int a, int b, int c) :m_A(a), m_B(b), m_C(c) &#123;&#125; void PrintPerson() &#123; cout &lt;&lt; &quot;mA:&quot; &lt;&lt; m_A &lt;&lt; endl; cout &lt;&lt; &quot;mB:&quot; &lt;&lt; m_B &lt;&lt; endl; cout &lt;&lt; &quot;mC:&quot; &lt;&lt; m_C &lt;&lt; endl; &#125;private: int m_A; int m_B; int m_C;&#125;;int main() &#123; Person p(1, 2, 3); p.PrintPerson(); system(&quot;pause&quot;); return 0;&#125; 4.2.7 ç±»å¯¹è±¡ä½œä¸ºç±»æˆå‘˜C++ç±»ä¸­çš„æˆå‘˜å¯ä»¥æ˜¯å¦ä¸€ä¸ªç±»çš„å¯¹è±¡ï¼Œæˆ‘ä»¬ç§°è¯¥æˆå‘˜ä¸º å¯¹è±¡æˆå‘˜ ä¾‹å¦‚ï¼š 12345class A &#123;&#125;class B&#123; A aï¼›&#125; Bç±»ä¸­æœ‰å¯¹è±¡Aä½œä¸ºæˆå‘˜ï¼ŒAä¸ºå¯¹è±¡æˆå‘˜ é‚£ä¹ˆå½“åˆ›å»ºBå¯¹è±¡æ—¶ï¼ŒAä¸Bçš„æ„é€ å’Œææ„çš„é¡ºåºæ˜¯è°å…ˆè°åï¼Ÿ ç¤ºä¾‹ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162class Phone&#123;public: Phone(string name) &#123; m_PhoneName = name; cout &lt;&lt; &quot;Phoneæ„é€ &quot; &lt;&lt; endl; &#125; ~Phone() &#123; cout &lt;&lt; &quot;Phoneææ„&quot; &lt;&lt; endl; &#125; string m_PhoneName;&#125;;class Person&#123;public: //åˆå§‹åŒ–åˆ—è¡¨å¯ä»¥å‘Šè¯‰ç¼–è¯‘å™¨è°ƒç”¨å“ªä¸€ä¸ªæ„é€ å‡½æ•° Person(string name, string pName) :m_Name(name), m_Phone(pName) &#123; cout &lt;&lt; &quot;Personæ„é€ &quot; &lt;&lt; endl; &#125; ~Person() &#123; cout &lt;&lt; &quot;Personææ„&quot; &lt;&lt; endl; &#125; void playGame() &#123; cout &lt;&lt; m_Name &lt;&lt; &quot; ä½¿ç”¨&quot; &lt;&lt; m_Phone.m_PhoneName &lt;&lt; &quot; ç‰Œæ‰‹æœº! &quot; &lt;&lt; endl; &#125; string m_Name; Phone m_Phone;&#125;;void test01()&#123; //å½“ç±»ä¸­æˆå‘˜æ˜¯å…¶ä»–ç±»å¯¹è±¡æ—¶ï¼Œæˆ‘ä»¬ç§°è¯¥æˆå‘˜ä¸º å¯¹è±¡æˆå‘˜ //æ„é€ çš„é¡ºåºæ˜¯ ï¼šå…ˆè°ƒç”¨å¯¹è±¡æˆå‘˜çš„æ„é€ ï¼Œå†è°ƒç”¨æœ¬ç±»æ„é€  //ææ„é¡ºåºä¸æ„é€ ç›¸å Person p(&quot;å¼ ä¸‰&quot; , &quot;è‹¹æœX&quot;); p.playGame();&#125;int main() &#123; test01(); system(&quot;pause&quot;); return 0;&#125; 4.2.8 é™æ€æˆå‘˜é™æ€æˆå‘˜å°±æ˜¯åœ¨æˆå‘˜å˜é‡å’Œæˆå‘˜å‡½æ•°å‰åŠ ä¸Šå…³é”®å­—staticï¼Œç§°ä¸ºé™æ€æˆå‘˜ é™æ€æˆå‘˜åˆ†ä¸ºï¼š é™æ€æˆå‘˜å˜é‡ æ‰€æœ‰å¯¹è±¡å…±äº«åŒä¸€ä»½æ•°æ® åœ¨ç¼–è¯‘é˜¶æ®µåˆ†é…å†…å­˜ ç±»å†…å£°æ˜ï¼Œç±»å¤–åˆå§‹åŒ– é™æ€æˆå‘˜å‡½æ•° æ‰€æœ‰å¯¹è±¡å…±äº«åŒä¸€ä¸ªå‡½æ•° é™æ€æˆå‘˜å‡½æ•°åªèƒ½è®¿é—®é™æ€æˆå‘˜å˜é‡ ç¤ºä¾‹1 ï¼šé™æ€æˆå‘˜å˜é‡ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647class Person&#123; public: static int m_A; //é™æ€æˆå‘˜å˜é‡ //é™æ€æˆå‘˜å˜é‡ç‰¹ç‚¹ï¼š //1 åœ¨ç¼–è¯‘é˜¶æ®µåˆ†é…å†…å­˜ //2 ç±»å†…å£°æ˜ï¼Œç±»å¤–åˆå§‹åŒ– //3 æ‰€æœ‰å¯¹è±¡å…±äº«åŒä¸€ä»½æ•°æ®private: static int m_B; //é™æ€æˆå‘˜å˜é‡ä¹Ÿæ˜¯æœ‰è®¿é—®æƒé™çš„&#125;;int Person::m_A = 10;int Person::m_B = 10;void test01()&#123; //é™æ€æˆå‘˜å˜é‡ä¸¤ç§è®¿é—®æ–¹å¼ //1ã€é€šè¿‡å¯¹è±¡ Person p1; p1.m_A = 100; cout &lt;&lt; &quot;p1.m_A = &quot; &lt;&lt; p1.m_A &lt;&lt; endl; Person p2; p2.m_A = 200; cout &lt;&lt; &quot;p1.m_A = &quot; &lt;&lt; p1.m_A &lt;&lt; endl; //å…±äº«åŒä¸€ä»½æ•°æ® cout &lt;&lt; &quot;p2.m_A = &quot; &lt;&lt; p2.m_A &lt;&lt; endl; //2ã€é€šè¿‡ç±»å cout &lt;&lt; &quot;m_A = &quot; &lt;&lt; Person::m_A &lt;&lt; endl; //cout &lt;&lt; &quot;m_B = &quot; &lt;&lt; Person::m_B &lt;&lt; endl; //ç§æœ‰æƒé™è®¿é—®ä¸åˆ°&#125;int main() &#123; test01(); system(&quot;pause&quot;); return 0;&#125; ç¤ºä¾‹2ï¼šé™æ€æˆå‘˜å‡½æ•° 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152class Person&#123;public: //é™æ€æˆå‘˜å‡½æ•°ç‰¹ç‚¹ï¼š //1 ç¨‹åºå…±äº«ä¸€ä¸ªå‡½æ•° //2 é™æ€æˆå‘˜å‡½æ•°åªèƒ½è®¿é—®é™æ€æˆå‘˜å˜é‡ static void func() &#123; cout &lt;&lt; &quot;funcè°ƒç”¨&quot; &lt;&lt; endl; m_A = 100; //m_B = 100; //é”™è¯¯ï¼Œä¸å¯ä»¥è®¿é—®éé™æ€æˆå‘˜å˜é‡ &#125; static int m_A; //é™æ€æˆå‘˜å˜é‡ int m_B; // private: //é™æ€æˆå‘˜å‡½æ•°ä¹Ÿæ˜¯æœ‰è®¿é—®æƒé™çš„ static void func2() &#123; cout &lt;&lt; &quot;func2è°ƒç”¨&quot; &lt;&lt; endl; &#125;&#125;;int Person::m_A = 10;void test01()&#123; //é™æ€æˆå‘˜å˜é‡ä¸¤ç§è®¿é—®æ–¹å¼ //1ã€é€šè¿‡å¯¹è±¡ Person p1; p1.func(); //2ã€é€šè¿‡ç±»å Person::func(); //Person::func2(); //ç§æœ‰æƒé™è®¿é—®ä¸åˆ°&#125;int main() &#123; test01(); system(&quot;pause&quot;); return 0;&#125; 4.3 C++å¯¹è±¡æ¨¡å‹å’ŒthisæŒ‡é’ˆ4.3.1 æˆå‘˜å˜é‡å’Œæˆå‘˜å‡½æ•°åˆ†å¼€å­˜å‚¨åœ¨C++ä¸­ï¼Œç±»å†…çš„æˆå‘˜å˜é‡å’Œæˆå‘˜å‡½æ•°åˆ†å¼€å­˜å‚¨ åªæœ‰éé™æ€æˆå‘˜å˜é‡æ‰å±äºç±»çš„å¯¹è±¡ä¸Š 1234567891011121314151617181920212223242526class Person &#123;public: Person() &#123; mA = 0; &#125; //éé™æ€æˆå‘˜å˜é‡å å¯¹è±¡ç©ºé—´ int mA; //é™æ€æˆå‘˜å˜é‡ä¸å å¯¹è±¡ç©ºé—´ static int mB; //å‡½æ•°ä¹Ÿä¸å å¯¹è±¡ç©ºé—´ï¼Œæ‰€æœ‰å‡½æ•°å…±äº«ä¸€ä¸ªå‡½æ•°å®ä¾‹ void func() &#123; cout &lt;&lt; &quot;mA:&quot; &lt;&lt; this-&gt;mA &lt;&lt; endl; &#125; //é™æ€æˆå‘˜å‡½æ•°ä¹Ÿä¸å å¯¹è±¡ç©ºé—´ static void sfunc() &#123; &#125;&#125;;int main() &#123; cout &lt;&lt; sizeof(Person) &lt;&lt; endl; system(&quot;pause&quot;); return 0;&#125; 4.3.2 thisæŒ‡é’ˆæ¦‚å¿µé€šè¿‡4.3.1æˆ‘ä»¬çŸ¥é“åœ¨C++ä¸­æˆå‘˜å˜é‡å’Œæˆå‘˜å‡½æ•°æ˜¯åˆ†å¼€å­˜å‚¨çš„ æ¯ä¸€ä¸ªéé™æ€æˆå‘˜å‡½æ•°åªä¼šè¯ç”Ÿä¸€ä»½å‡½æ•°å®ä¾‹ï¼Œä¹Ÿå°±æ˜¯è¯´å¤šä¸ªåŒç±»å‹çš„å¯¹è±¡ä¼šå…±ç”¨ä¸€å—ä»£ç  é‚£ä¹ˆé—®é¢˜æ˜¯ï¼šè¿™ä¸€å—ä»£ç æ˜¯å¦‚ä½•åŒºåˆ†é‚£ä¸ªå¯¹è±¡è°ƒç”¨è‡ªå·±çš„å‘¢ï¼Ÿ c++é€šè¿‡æä¾›ç‰¹æ®Šçš„å¯¹è±¡æŒ‡é’ˆï¼ŒthisæŒ‡é’ˆï¼Œè§£å†³ä¸Šè¿°é—®é¢˜ã€‚thisæŒ‡é’ˆæŒ‡å‘è¢«è°ƒç”¨çš„æˆå‘˜å‡½æ•°æ‰€å±çš„å¯¹è±¡ thisæŒ‡é’ˆæ˜¯éšå«æ¯ä¸€ä¸ªéé™æ€æˆå‘˜å‡½æ•°å†…çš„ä¸€ç§æŒ‡é’ˆ thisæŒ‡é’ˆä¸éœ€è¦å®šä¹‰ï¼Œç›´æ¥ä½¿ç”¨å³å¯ thisæŒ‡é’ˆçš„ç”¨é€”ï¼š å½“å½¢å‚å’Œæˆå‘˜å˜é‡åŒåæ—¶ï¼Œå¯ç”¨thisæŒ‡é’ˆæ¥åŒºåˆ† åœ¨ç±»çš„éé™æ€æˆå‘˜å‡½æ•°ä¸­è¿”å›å¯¹è±¡æœ¬èº«ï¼Œå¯ä½¿ç”¨return *this 1234567891011121314151617181920212223242526272829303132333435363738class Person&#123;public: Person(int age) &#123; //1ã€å½“å½¢å‚å’Œæˆå‘˜å˜é‡åŒåæ—¶ï¼Œå¯ç”¨thisæŒ‡é’ˆæ¥åŒºåˆ† this-&gt;age = age; &#125; Person&amp; PersonAddPerson(Person p) &#123; this-&gt;age += p.age; //è¿”å›å¯¹è±¡æœ¬èº« return *this; &#125; int age;&#125;;void test01()&#123; Person p1(10); cout &lt;&lt; &quot;p1.age = &quot; &lt;&lt; p1.age &lt;&lt; endl; Person p2(10); p2.PersonAddPerson(p1).PersonAddPerson(p1).PersonAddPerson(p1); cout &lt;&lt; &quot;p2.age = &quot; &lt;&lt; p2.age &lt;&lt; endl;&#125;int main() &#123; test01(); system(&quot;pause&quot;); return 0;&#125; 4.3.3 ç©ºæŒ‡é’ˆè®¿é—®æˆå‘˜å‡½æ•°C++ä¸­ç©ºæŒ‡é’ˆä¹Ÿæ˜¯å¯ä»¥è°ƒç”¨æˆå‘˜å‡½æ•°çš„ï¼Œä½†æ˜¯ä¹Ÿè¦æ³¨æ„æœ‰æ²¡æœ‰ç”¨åˆ°thisæŒ‡é’ˆ å¦‚æœç”¨åˆ°thisæŒ‡é’ˆï¼Œéœ€è¦åŠ ä»¥åˆ¤æ–­ä¿è¯ä»£ç çš„å¥å£®æ€§ ç¤ºä¾‹ï¼š 12345678910111213141516171819202122232425262728293031323334//ç©ºæŒ‡é’ˆè®¿é—®æˆå‘˜å‡½æ•°class Person &#123;public: void ShowClassName() &#123; cout &lt;&lt; &quot;æˆ‘æ˜¯Personç±»!&quot; &lt;&lt; endl; &#125; void ShowPerson() &#123; if (this == NULL) &#123; return; &#125; cout &lt;&lt; mAge &lt;&lt; endl; &#125;public: int mAge;&#125;;void test01()&#123; Person * p = NULL; p-&gt;ShowClassName(); //ç©ºæŒ‡é’ˆï¼Œå¯ä»¥è°ƒç”¨æˆå‘˜å‡½æ•° p-&gt;ShowPerson(); //ä½†æ˜¯å¦‚æœæˆå‘˜å‡½æ•°ä¸­ç”¨åˆ°äº†thisæŒ‡é’ˆï¼Œå°±ä¸å¯ä»¥äº†&#125;int main() &#123; test01(); system(&quot;pause&quot;); return 0;&#125; 4.3.4 constä¿®é¥°æˆå‘˜å‡½æ•°å¸¸å‡½æ•°ï¼š æˆå‘˜å‡½æ•°ååŠ conståæˆ‘ä»¬ç§°ä¸ºè¿™ä¸ªå‡½æ•°ä¸ºå¸¸å‡½æ•° å¸¸å‡½æ•°å†…ä¸å¯ä»¥ä¿®æ”¹æˆå‘˜å±æ€§ æˆå‘˜å±æ€§å£°æ˜æ—¶åŠ å…³é”®å­—mutableåï¼Œåœ¨å¸¸å‡½æ•°ä¸­ä¾ç„¶å¯ä»¥ä¿®æ”¹ å¸¸å¯¹è±¡ï¼š å£°æ˜å¯¹è±¡å‰åŠ constç§°è¯¥å¯¹è±¡ä¸ºå¸¸å¯¹è±¡ å¸¸å¯¹è±¡åªèƒ½è°ƒç”¨å¸¸å‡½æ•° ç¤ºä¾‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849class Person &#123;public: Person() &#123; m_A = 0; m_B = 0; &#125; //thisæŒ‡é’ˆçš„æœ¬è´¨æ˜¯ä¸€ä¸ªæŒ‡é’ˆå¸¸é‡ï¼ŒæŒ‡é’ˆçš„æŒ‡å‘ä¸å¯ä¿®æ”¹ //å¦‚æœæƒ³è®©æŒ‡é’ˆæŒ‡å‘çš„å€¼ä¹Ÿä¸å¯ä»¥ä¿®æ”¹ï¼Œéœ€è¦å£°æ˜å¸¸å‡½æ•° void ShowPerson() const &#123; //const Type* const pointer; //this = NULL; //ä¸èƒ½ä¿®æ”¹æŒ‡é’ˆçš„æŒ‡å‘ Person* const this; //this-&gt;mA = 100; //ä½†æ˜¯thisæŒ‡é’ˆæŒ‡å‘çš„å¯¹è±¡çš„æ•°æ®æ˜¯å¯ä»¥ä¿®æ”¹çš„ //constä¿®é¥°æˆå‘˜å‡½æ•°ï¼Œè¡¨ç¤ºæŒ‡é’ˆæŒ‡å‘çš„å†…å­˜ç©ºé—´çš„æ•°æ®ä¸èƒ½ä¿®æ”¹ï¼Œé™¤äº†mutableä¿®é¥°çš„å˜é‡ this-&gt;m_B = 100; &#125; void MyFunc() const &#123; //mA = 10000; &#125;public: int m_A; mutable int m_B; //å¯ä¿®æ”¹ å¯å˜çš„&#125;;//constä¿®é¥°å¯¹è±¡ å¸¸å¯¹è±¡void test01() &#123; const Person person; //å¸¸é‡å¯¹è±¡ cout &lt;&lt; person.m_A &lt;&lt; endl; //person.mA = 100; //å¸¸å¯¹è±¡ä¸èƒ½ä¿®æ”¹æˆå‘˜å˜é‡çš„å€¼,ä½†æ˜¯å¯ä»¥è®¿é—® person.m_B = 100; //ä½†æ˜¯å¸¸å¯¹è±¡å¯ä»¥ä¿®æ”¹mutableä¿®é¥°æˆå‘˜å˜é‡ //å¸¸å¯¹è±¡è®¿é—®æˆå‘˜å‡½æ•° person.MyFunc(); //å¸¸å¯¹è±¡ä¸èƒ½è°ƒç”¨constçš„å‡½æ•°&#125;int main() &#123; test01(); system(&quot;pause&quot;); return 0;&#125; 4.4 å‹å…ƒç”Ÿæ´»ä¸­ä½ çš„å®¶æœ‰å®¢å…(Public)ï¼Œæœ‰ä½ çš„å§å®¤(Private) å®¢å…æ‰€æœ‰æ¥çš„å®¢äººéƒ½å¯ä»¥è¿›å»ï¼Œä½†æ˜¯ä½ çš„å§å®¤æ˜¯ç§æœ‰çš„ï¼Œä¹Ÿå°±æ˜¯è¯´åªæœ‰ä½ èƒ½è¿›å» ä½†æ˜¯å‘¢ï¼Œä½ ä¹Ÿå¯ä»¥å…è®¸ä½ çš„å¥½é—ºèœœå¥½åŸºå‹è¿›å»ã€‚ åœ¨ç¨‹åºé‡Œï¼Œæœ‰äº›ç§æœ‰å±æ€§ ä¹Ÿæƒ³è®©ç±»å¤–ç‰¹æ®Šçš„ä¸€äº›å‡½æ•°æˆ–è€…ç±»è¿›è¡Œè®¿é—®ï¼Œå°±éœ€è¦ç”¨åˆ°å‹å…ƒçš„æŠ€æœ¯ å‹å…ƒçš„ç›®çš„å°±æ˜¯è®©ä¸€ä¸ªå‡½æ•°æˆ–è€…ç±» è®¿é—®å¦ä¸€ä¸ªç±»ä¸­ç§æœ‰æˆå‘˜ å‹å…ƒçš„å…³é”®å­—ä¸º &#x3D;&#x3D;friend&#x3D;&#x3D; å‹å…ƒçš„ä¸‰ç§å®ç° å…¨å±€å‡½æ•°åšå‹å…ƒ ç±»åšå‹å…ƒ æˆå‘˜å‡½æ•°åšå‹å…ƒ 4.4.1 å…¨å±€å‡½æ•°åšå‹å…ƒ123456789101112131415161718192021222324252627282930313233343536373839404142class Building&#123; //å‘Šè¯‰ç¼–è¯‘å™¨ goodGayå…¨å±€å‡½æ•° æ˜¯ Buildingç±»çš„å¥½æœ‹å‹ï¼Œå¯ä»¥è®¿é—®ç±»ä¸­çš„ç§æœ‰å†…å®¹ friend void goodGay(Building * building);public: Building() &#123; this-&gt;m_SittingRoom = &quot;å®¢å…&quot;; this-&gt;m_BedRoom = &quot;å§å®¤&quot;; &#125;public: string m_SittingRoom; //å®¢å…private: string m_BedRoom; //å§å®¤&#125;;void goodGay(Building * building)&#123; cout &lt;&lt; &quot;å¥½åŸºå‹æ­£åœ¨è®¿é—®ï¼š &quot; &lt;&lt; building-&gt;m_SittingRoom &lt;&lt; endl; cout &lt;&lt; &quot;å¥½åŸºå‹æ­£åœ¨è®¿é—®ï¼š &quot; &lt;&lt; building-&gt;m_BedRoom &lt;&lt; endl;&#125;void test01()&#123; Building b; goodGay(&amp;b);&#125;int main()&#123; test01(); system(&quot;pause&quot;); return 0;&#125; 4.4.2 ç±»åšå‹å…ƒ12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758class Building;class goodGay&#123;public: goodGay(); void visit();private: Building *building;&#125;;class Building&#123; //å‘Šè¯‰ç¼–è¯‘å™¨ goodGayç±»æ˜¯Buildingç±»çš„å¥½æœ‹å‹ï¼Œå¯ä»¥è®¿é—®åˆ°Buildingç±»ä¸­ç§æœ‰å†…å®¹ friend class goodGay;public: Building();public: string m_SittingRoom; //å®¢å…private: string m_BedRoom;//å§å®¤&#125;;Building::Building()&#123; this-&gt;m_SittingRoom = &quot;å®¢å…&quot;; this-&gt;m_BedRoom = &quot;å§å®¤&quot;;&#125;goodGay::goodGay()&#123; building = new Building;&#125;void goodGay::visit()&#123; cout &lt;&lt; &quot;å¥½åŸºå‹æ­£åœ¨è®¿é—®&quot; &lt;&lt; building-&gt;m_SittingRoom &lt;&lt; endl; cout &lt;&lt; &quot;å¥½åŸºå‹æ­£åœ¨è®¿é—®&quot; &lt;&lt; building-&gt;m_BedRoom &lt;&lt; endl;&#125;void test01()&#123; goodGay gg; gg.visit();&#125;int main()&#123; test01(); system(&quot;pause&quot;); return 0;&#125; 4.4.3 æˆå‘˜å‡½æ•°åšå‹å…ƒ1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465class Building;class goodGay&#123;public: goodGay(); void visit(); //åªè®©visitå‡½æ•°ä½œä¸ºBuildingçš„å¥½æœ‹å‹ï¼Œå¯ä»¥å‘è®¿é—®Buildingä¸­ç§æœ‰å†…å®¹ void visit2(); private: Building *building;&#125;;class Building&#123; //å‘Šè¯‰ç¼–è¯‘å™¨ goodGayç±»ä¸­çš„visitæˆå‘˜å‡½æ•° æ˜¯Buildingå¥½æœ‹å‹ï¼Œå¯ä»¥è®¿é—®ç§æœ‰å†…å®¹ friend void goodGay::visit();public: Building();public: string m_SittingRoom; //å®¢å…private: string m_BedRoom;//å§å®¤&#125;;Building::Building()&#123; this-&gt;m_SittingRoom = &quot;å®¢å…&quot;; this-&gt;m_BedRoom = &quot;å§å®¤&quot;;&#125;goodGay::goodGay()&#123; building = new Building;&#125;void goodGay::visit()&#123; cout &lt;&lt; &quot;å¥½åŸºå‹æ­£åœ¨è®¿é—®&quot; &lt;&lt; building-&gt;m_SittingRoom &lt;&lt; endl; cout &lt;&lt; &quot;å¥½åŸºå‹æ­£åœ¨è®¿é—®&quot; &lt;&lt; building-&gt;m_BedRoom &lt;&lt; endl;&#125;void goodGay::visit2()&#123; cout &lt;&lt; &quot;å¥½åŸºå‹æ­£åœ¨è®¿é—®&quot; &lt;&lt; building-&gt;m_SittingRoom &lt;&lt; endl; //cout &lt;&lt; &quot;å¥½åŸºå‹æ­£åœ¨è®¿é—®&quot; &lt;&lt; building-&gt;m_BedRoom &lt;&lt; endl;&#125;void test01()&#123; goodGay gg; gg.visit();&#125;int main()&#123; test01(); system(&quot;pause&quot;); return 0;&#125; 4.5 è¿ç®—ç¬¦é‡è½½è¿ç®—ç¬¦é‡è½½æ¦‚å¿µï¼šå¯¹å·²æœ‰çš„è¿ç®—ç¬¦é‡æ–°è¿›è¡Œå®šä¹‰ï¼Œèµ‹äºˆå…¶å¦ä¸€ç§åŠŸèƒ½ï¼Œä»¥é€‚åº”ä¸åŒçš„æ•°æ®ç±»å‹ 4.5.1 åŠ å·è¿ç®—ç¬¦é‡è½½ä½œç”¨ï¼šå®ç°ä¸¤ä¸ªè‡ªå®šä¹‰æ•°æ®ç±»å‹ç›¸åŠ çš„è¿ç®— 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162class Person &#123;public: Person() &#123;&#125;; Person(int a, int b) &#123; this-&gt;m_A = a; this-&gt;m_B = b; &#125; //æˆå‘˜å‡½æ•°å®ç° + å·è¿ç®—ç¬¦é‡è½½ Person operator+(const Person&amp; p) &#123; Person temp; temp.m_A = this-&gt;m_A + p.m_A; temp.m_B = this-&gt;m_B + p.m_B; return temp; &#125;public: int m_A; int m_B;&#125;;//å…¨å±€å‡½æ•°å®ç° + å·è¿ç®—ç¬¦é‡è½½//Person operator+(const Person&amp; p1, const Person&amp; p2) &#123;// Person temp(0, 0);// temp.m_A = p1.m_A + p2.m_A;// temp.m_B = p1.m_B + p2.m_B;// return temp;//&#125;//è¿ç®—ç¬¦é‡è½½ å¯ä»¥å‘ç”Ÿå‡½æ•°é‡è½½ Person operator+(const Person&amp; p2, int val) &#123; Person temp; temp.m_A = p2.m_A + val; temp.m_B = p2.m_B + val; return temp;&#125;void test() &#123; Person p1(10, 10); Person p2(20, 20); //æˆå‘˜å‡½æ•°æ–¹å¼ Person p3 = p2 + p1; //ç›¸å½“äº p2.operaor+(p1) cout &lt;&lt; &quot;mA:&quot; &lt;&lt; p3.m_A &lt;&lt; &quot; mB:&quot; &lt;&lt; p3.m_B &lt;&lt; endl; Person p4 = p3 + 10; //ç›¸å½“äº operator+(p3,10) cout &lt;&lt; &quot;mA:&quot; &lt;&lt; p4.m_A &lt;&lt; &quot; mB:&quot; &lt;&lt; p4.m_B &lt;&lt; endl;&#125;int main() &#123; test(); system(&quot;pause&quot;); return 0;&#125; æ€»ç»“1ï¼šå¯¹äºå†…ç½®çš„æ•°æ®ç±»å‹çš„è¡¨è¾¾å¼çš„çš„è¿ç®—ç¬¦æ˜¯ä¸å¯èƒ½æ”¹å˜çš„ æ€»ç»“2ï¼šä¸è¦æ»¥ç”¨è¿ç®—ç¬¦é‡è½½ 4.5.2 å·¦ç§»è¿ç®—ç¬¦é‡è½½ä½œç”¨ï¼šå¯ä»¥è¾“å‡ºè‡ªå®šä¹‰æ•°æ®ç±»å‹ 123456789101112131415161718192021222324252627282930313233343536373839404142class Person &#123; friend ostream&amp; operator&lt;&lt;(ostream&amp; out, Person&amp; p);public: Person(int a, int b) &#123; this-&gt;m_A = a; this-&gt;m_B = b; &#125; //æˆå‘˜å‡½æ•° å®ç°ä¸äº† p &lt;&lt; cout ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„æ•ˆæœ //void operator&lt;&lt;(Person&amp; p)&#123; //&#125;private: int m_A; int m_B;&#125;;//å…¨å±€å‡½æ•°å®ç°å·¦ç§»é‡è½½//ostreamå¯¹è±¡åªèƒ½æœ‰ä¸€ä¸ªostream&amp; operator&lt;&lt;(ostream&amp; out, Person&amp; p) &#123; out &lt;&lt; &quot;a:&quot; &lt;&lt; p.m_A &lt;&lt; &quot; b:&quot; &lt;&lt; p.m_B; return out;&#125;void test() &#123; Person p1(10, 20); cout &lt;&lt; p1 &lt;&lt; &quot;hello world&quot; &lt;&lt; endl; //é“¾å¼ç¼–ç¨‹&#125;int main() &#123; test(); system(&quot;pause&quot;); return 0;&#125; æ€»ç»“ï¼šé‡è½½å·¦ç§»è¿ç®—ç¬¦é…åˆå‹å…ƒå¯ä»¥å®ç°è¾“å‡ºè‡ªå®šä¹‰æ•°æ®ç±»å‹ 4.5.3 é€’å¢è¿ç®—ç¬¦é‡è½½ä½œç”¨ï¼š é€šè¿‡é‡è½½é€’å¢è¿ç®—ç¬¦ï¼Œå®ç°è‡ªå·±çš„æ•´å‹æ•°æ® 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859class MyInteger &#123; friend ostream&amp; operator&lt;&lt;(ostream&amp; out, MyInteger myint);public: MyInteger() &#123; m_Num = 0; &#125; //å‰ç½®++ MyInteger&amp; operator++() &#123; //å…ˆ++ m_Num++; //å†è¿”å› return *this; &#125; //åç½®++ MyInteger operator++(int) &#123; //å…ˆè¿”å› MyInteger temp = *this; //è®°å½•å½“å‰æœ¬èº«çš„å€¼ï¼Œç„¶åè®©æœ¬èº«çš„å€¼åŠ 1ï¼Œä½†æ˜¯è¿”å›çš„æ˜¯ä»¥å‰çš„å€¼ï¼Œè¾¾åˆ°å…ˆè¿”å›å++ï¼› m_Num++; return temp; &#125;private: int m_Num;&#125;;ostream&amp; operator&lt;&lt;(ostream&amp; out, MyInteger myint) &#123; out &lt;&lt; myint.m_Num; return out;&#125;//å‰ç½®++ å…ˆ++ å†è¿”å›void test01() &#123; MyInteger myInt; cout &lt;&lt; ++myInt &lt;&lt; endl; cout &lt;&lt; myInt &lt;&lt; endl;&#125;//åç½®++ å…ˆè¿”å› å†++void test02() &#123; MyInteger myInt; cout &lt;&lt; myInt++ &lt;&lt; endl; cout &lt;&lt; myInt &lt;&lt; endl;&#125;int main() &#123; test01(); //test02(); system(&quot;pause&quot;); return 0;&#125; æ€»ç»“ï¼š å‰ç½®é€’å¢è¿”å›å¼•ç”¨ï¼Œåç½®é€’å¢è¿”å›å€¼ 4.5.4 èµ‹å€¼è¿ç®—ç¬¦é‡è½½c++ç¼–è¯‘å™¨è‡³å°‘ç»™ä¸€ä¸ªç±»æ·»åŠ 4ä¸ªå‡½æ•° é»˜è®¤æ„é€ å‡½æ•°(æ— å‚ï¼Œå‡½æ•°ä½“ä¸ºç©º) é»˜è®¤ææ„å‡½æ•°(æ— å‚ï¼Œå‡½æ•°ä½“ä¸ºç©º) é»˜è®¤æ‹·è´æ„é€ å‡½æ•°ï¼Œå¯¹å±æ€§è¿›è¡Œå€¼æ‹·è´ èµ‹å€¼è¿ç®—ç¬¦ operator&#x3D;, å¯¹å±æ€§è¿›è¡Œå€¼æ‹·è´ å¦‚æœç±»ä¸­æœ‰å±æ€§æŒ‡å‘å †åŒºï¼Œåšèµ‹å€¼æ“ä½œæ—¶ä¹Ÿä¼šå‡ºç°æ·±æµ…æ‹·è´é—®é¢˜ ç¤ºä¾‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778class Person&#123;public: Person(int age) &#123; //å°†å¹´é¾„æ•°æ®å¼€è¾Ÿåˆ°å †åŒº m_Age = new int(age); &#125; //é‡è½½èµ‹å€¼è¿ç®—ç¬¦ Person&amp; operator=(Person &amp;p) &#123; if (m_Age != NULL) &#123; delete m_Age; m_Age = NULL; &#125; //ç¼–è¯‘å™¨æä¾›çš„ä»£ç æ˜¯æµ…æ‹·è´ //m_Age = p.m_Age; //æä¾›æ·±æ‹·è´ è§£å†³æµ…æ‹·è´çš„é—®é¢˜ m_Age = new int(*p.m_Age); //è¿”å›è‡ªèº« return *this; &#125; ~Person() &#123; if (m_Age != NULL) &#123; delete m_Age; m_Age = NULL; &#125; &#125; //å¹´é¾„çš„æŒ‡é’ˆ int *m_Age;&#125;;void test01()&#123; Person p1(18); Person p2(20); Person p3(30); p3 = p2 = p1; //èµ‹å€¼æ“ä½œ cout &lt;&lt; &quot;p1çš„å¹´é¾„ä¸ºï¼š&quot; &lt;&lt; *p1.m_Age &lt;&lt; endl; cout &lt;&lt; &quot;p2çš„å¹´é¾„ä¸ºï¼š&quot; &lt;&lt; *p2.m_Age &lt;&lt; endl; cout &lt;&lt; &quot;p3çš„å¹´é¾„ä¸ºï¼š&quot; &lt;&lt; *p3.m_Age &lt;&lt; endl;&#125;int main() &#123; test01(); //int a = 10; //int b = 20; //int c = 30; //c = b = a; //cout &lt;&lt; &quot;a = &quot; &lt;&lt; a &lt;&lt; endl; //cout &lt;&lt; &quot;b = &quot; &lt;&lt; b &lt;&lt; endl; //cout &lt;&lt; &quot;c = &quot; &lt;&lt; c &lt;&lt; endl; system(&quot;pause&quot;); return 0;&#125; 4.5.5 å…³ç³»è¿ç®—ç¬¦é‡è½½ä½œç”¨ï¼šé‡è½½å…³ç³»è¿ç®—ç¬¦ï¼Œå¯ä»¥è®©ä¸¤ä¸ªè‡ªå®šä¹‰ç±»å‹å¯¹è±¡è¿›è¡Œå¯¹æ¯”æ“ä½œ ç¤ºä¾‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273class Person&#123;public: Person(string name, int age) &#123; this-&gt;m_Name = name; this-&gt;m_Age = age; &#125;; bool operator==(Person &amp; p) &#123; if (this-&gt;m_Name == p.m_Name &amp;&amp; this-&gt;m_Age == p.m_Age) &#123; return true; &#125; else &#123; return false; &#125; &#125; bool operator!=(Person &amp; p) &#123; if (this-&gt;m_Name == p.m_Name &amp;&amp; this-&gt;m_Age == p.m_Age) &#123; return false; &#125; else &#123; return true; &#125; &#125; string m_Name; int m_Age;&#125;;void test01()&#123; //int a = 0; //int b = 0; Person a(&quot;å­™æ‚Ÿç©º&quot;, 18); Person b(&quot;å­™æ‚Ÿç©º&quot;, 18); if (a == b) &#123; cout &lt;&lt; &quot;aå’Œbç›¸ç­‰&quot; &lt;&lt; endl; &#125; else &#123; cout &lt;&lt; &quot;aå’Œbä¸ç›¸ç­‰&quot; &lt;&lt; endl; &#125; if (a != b) &#123; cout &lt;&lt; &quot;aå’Œbä¸ç›¸ç­‰&quot; &lt;&lt; endl; &#125; else &#123; cout &lt;&lt; &quot;aå’Œbç›¸ç­‰&quot; &lt;&lt; endl; &#125;&#125;int main() &#123; test01(); system(&quot;pause&quot;); return 0;&#125; 4.5.6 å‡½æ•°è°ƒç”¨è¿ç®—ç¬¦é‡è½½ å‡½æ•°è°ƒç”¨è¿ç®—ç¬¦ () ä¹Ÿå¯ä»¥é‡è½½ ç”±äºé‡è½½åä½¿ç”¨çš„æ–¹å¼éå¸¸åƒå‡½æ•°çš„è°ƒç”¨ï¼Œå› æ­¤ç§°ä¸ºä»¿å‡½æ•° ä»¿å‡½æ•°æ²¡æœ‰å›ºå®šå†™æ³•ï¼Œéå¸¸çµæ´» ç¤ºä¾‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445class MyPrint&#123;public: void operator()(string text) &#123; cout &lt;&lt; text &lt;&lt; endl; &#125;&#125;;void test01()&#123; //é‡è½½çš„ï¼ˆï¼‰æ“ä½œç¬¦ ä¹Ÿç§°ä¸ºä»¿å‡½æ•° MyPrint myFunc; myFunc(&quot;hello world&quot;);&#125;class MyAdd&#123;public: int operator()(int v1, int v2) &#123; return v1 + v2; &#125;&#125;;void test02()&#123; MyAdd add; int ret = add(10, 10); cout &lt;&lt; &quot;ret = &quot; &lt;&lt; ret &lt;&lt; endl; //åŒ¿åå¯¹è±¡è°ƒç”¨ cout &lt;&lt; &quot;MyAdd()(100,100) = &quot; &lt;&lt; MyAdd()(100, 100) &lt;&lt; endl;&#125;int main() &#123; test01(); test02(); system(&quot;pause&quot;); return 0;&#125; 4.6 ç»§æ‰¿ç»§æ‰¿æ˜¯é¢å‘å¯¹è±¡ä¸‰å¤§ç‰¹æ€§ä¹‹ä¸€ æœ‰äº›ç±»ä¸ç±»ä¹‹é—´å­˜åœ¨ç‰¹æ®Šçš„å…³ç³»ï¼Œä¾‹å¦‚ä¸‹å›¾ä¸­ï¼š æˆ‘ä»¬å‘ç°ï¼Œå®šä¹‰è¿™äº›ç±»æ—¶ï¼Œä¸‹çº§åˆ«çš„æˆå‘˜é™¤äº†æ‹¥æœ‰ä¸Šä¸€çº§çš„å…±æ€§ï¼Œè¿˜æœ‰è‡ªå·±çš„ç‰¹æ€§ã€‚ è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±å¯ä»¥è€ƒè™‘åˆ©ç”¨ç»§æ‰¿çš„æŠ€æœ¯ï¼Œå‡å°‘é‡å¤ä»£ç  4.6.1 ç»§æ‰¿çš„åŸºæœ¬è¯­æ³•ä¾‹å¦‚æˆ‘ä»¬çœ‹åˆ°å¾ˆå¤šç½‘ç«™ä¸­ï¼Œéƒ½æœ‰å…¬å…±çš„å¤´éƒ¨ï¼Œå…¬å…±çš„åº•éƒ¨ï¼Œç”šè‡³å…¬å…±çš„å·¦ä¾§åˆ—è¡¨ï¼Œåªæœ‰ä¸­å¿ƒå†…å®¹ä¸åŒ æ¥ä¸‹æ¥æˆ‘ä»¬åˆ†åˆ«åˆ©ç”¨æ™®é€šå†™æ³•å’Œç»§æ‰¿çš„å†™æ³•æ¥å®ç°ç½‘é¡µä¸­çš„å†…å®¹ï¼Œçœ‹ä¸€ä¸‹ç»§æ‰¿å­˜åœ¨çš„æ„ä¹‰ä»¥åŠå¥½å¤„ æ™®é€šå®ç°ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102//Javaé¡µé¢class Java &#123;public: void header() &#123; cout &lt;&lt; &quot;é¦–é¡µã€å…¬å¼€è¯¾ã€ç™»å½•ã€æ³¨å†Œ...ï¼ˆå…¬å…±å¤´éƒ¨ï¼‰&quot; &lt;&lt; endl; &#125; void footer() &#123; cout &lt;&lt; &quot;å¸®åŠ©ä¸­å¿ƒã€äº¤æµåˆä½œã€ç«™å†…åœ°å›¾...(å…¬å…±åº•éƒ¨)&quot; &lt;&lt; endl; &#125; void left() &#123; cout &lt;&lt; &quot;Java,Python,C++...(å…¬å…±åˆ†ç±»åˆ—è¡¨)&quot; &lt;&lt; endl; &#125; void content() &#123; cout &lt;&lt; &quot;JAVAå­¦ç§‘è§†é¢‘&quot; &lt;&lt; endl; &#125;&#125;;//Pythoné¡µé¢class Python&#123;public: void header() &#123; cout &lt;&lt; &quot;é¦–é¡µã€å…¬å¼€è¯¾ã€ç™»å½•ã€æ³¨å†Œ...ï¼ˆå…¬å…±å¤´éƒ¨ï¼‰&quot; &lt;&lt; endl; &#125; void footer() &#123; cout &lt;&lt; &quot;å¸®åŠ©ä¸­å¿ƒã€äº¤æµåˆä½œã€ç«™å†…åœ°å›¾...(å…¬å…±åº•éƒ¨)&quot; &lt;&lt; endl; &#125; void left() &#123; cout &lt;&lt; &quot;Java,Python,C++...(å…¬å…±åˆ†ç±»åˆ—è¡¨)&quot; &lt;&lt; endl; &#125; void content() &#123; cout &lt;&lt; &quot;Pythonå­¦ç§‘è§†é¢‘&quot; &lt;&lt; endl; &#125;&#125;;//C++é¡µé¢class CPP &#123;public: void header() &#123; cout &lt;&lt; &quot;é¦–é¡µã€å…¬å¼€è¯¾ã€ç™»å½•ã€æ³¨å†Œ...ï¼ˆå…¬å…±å¤´éƒ¨ï¼‰&quot; &lt;&lt; endl; &#125; void footer() &#123; cout &lt;&lt; &quot;å¸®åŠ©ä¸­å¿ƒã€äº¤æµåˆä½œã€ç«™å†…åœ°å›¾...(å…¬å…±åº•éƒ¨)&quot; &lt;&lt; endl; &#125; void left() &#123; cout &lt;&lt; &quot;Java,Python,C++...(å…¬å…±åˆ†ç±»åˆ—è¡¨)&quot; &lt;&lt; endl; &#125; void content() &#123; cout &lt;&lt; &quot;C++å­¦ç§‘è§†é¢‘&quot; &lt;&lt; endl; &#125;&#125;;void test01()&#123; //Javaé¡µé¢ cout &lt;&lt; &quot;Javaä¸‹è½½è§†é¢‘é¡µé¢å¦‚ä¸‹ï¼š &quot; &lt;&lt; endl; Java ja; ja.header(); ja.footer(); ja.left(); ja.content(); cout &lt;&lt; &quot;--------------------&quot; &lt;&lt; endl; //Pythoné¡µé¢ cout &lt;&lt; &quot;Pythonä¸‹è½½è§†é¢‘é¡µé¢å¦‚ä¸‹ï¼š &quot; &lt;&lt; endl; Python py; py.header(); py.footer(); py.left(); py.content(); cout &lt;&lt; &quot;--------------------&quot; &lt;&lt; endl; //C++é¡µé¢ cout &lt;&lt; &quot;C++ä¸‹è½½è§†é¢‘é¡µé¢å¦‚ä¸‹ï¼š &quot; &lt;&lt; endl; CPP cp; cp.header(); cp.footer(); cp.left(); cp.content();&#125;int main() &#123; test01(); system(&quot;pause&quot;); return 0;&#125; ç»§æ‰¿å®ç°ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687//å…¬å…±é¡µé¢class BasePage&#123;public: void header() &#123; cout &lt;&lt; &quot;é¦–é¡µã€å…¬å¼€è¯¾ã€ç™»å½•ã€æ³¨å†Œ...ï¼ˆå…¬å…±å¤´éƒ¨ï¼‰&quot; &lt;&lt; endl; &#125; void footer() &#123; cout &lt;&lt; &quot;å¸®åŠ©ä¸­å¿ƒã€äº¤æµåˆä½œã€ç«™å†…åœ°å›¾...(å…¬å…±åº•éƒ¨)&quot; &lt;&lt; endl; &#125; void left() &#123; cout &lt;&lt; &quot;Java,Python,C++...(å…¬å…±åˆ†ç±»åˆ—è¡¨)&quot; &lt;&lt; endl; &#125;&#125;;//Javaé¡µé¢class Java : public BasePage&#123;public: void content() &#123; cout &lt;&lt; &quot;JAVAå­¦ç§‘è§†é¢‘&quot; &lt;&lt; endl; &#125;&#125;;//Pythoné¡µé¢class Python : public BasePage&#123;public: void content() &#123; cout &lt;&lt; &quot;Pythonå­¦ç§‘è§†é¢‘&quot; &lt;&lt; endl; &#125;&#125;;//C++é¡µé¢class CPP : public BasePage&#123;public: void content() &#123; cout &lt;&lt; &quot;C++å­¦ç§‘è§†é¢‘&quot; &lt;&lt; endl; &#125;&#125;;void test01()&#123; //Javaé¡µé¢ cout &lt;&lt; &quot;Javaä¸‹è½½è§†é¢‘é¡µé¢å¦‚ä¸‹ï¼š &quot; &lt;&lt; endl; Java ja; ja.header(); ja.footer(); ja.left(); ja.content(); cout &lt;&lt; &quot;--------------------&quot; &lt;&lt; endl; //Pythoné¡µé¢ cout &lt;&lt; &quot;Pythonä¸‹è½½è§†é¢‘é¡µé¢å¦‚ä¸‹ï¼š &quot; &lt;&lt; endl; Python py; py.header(); py.footer(); py.left(); py.content(); cout &lt;&lt; &quot;--------------------&quot; &lt;&lt; endl; //C++é¡µé¢ cout &lt;&lt; &quot;C++ä¸‹è½½è§†é¢‘é¡µé¢å¦‚ä¸‹ï¼š &quot; &lt;&lt; endl; CPP cp; cp.header(); cp.footer(); cp.left(); cp.content();&#125;int main() &#123; test01(); system(&quot;pause&quot;); return 0;&#125; æ€»ç»“ï¼š ç»§æ‰¿çš„å¥½å¤„ï¼š&#x3D;&#x3D;å¯ä»¥å‡å°‘é‡å¤çš„ä»£ç &#x3D;&#x3D; class A : public B; A ç±»ç§°ä¸ºå­ç±» æˆ– æ´¾ç”Ÿç±» B ç±»ç§°ä¸ºçˆ¶ç±» æˆ– åŸºç±» æ´¾ç”Ÿç±»ä¸­çš„æˆå‘˜ï¼ŒåŒ…å«ä¸¤å¤§éƒ¨åˆ†ï¼š ä¸€ç±»æ˜¯ä»åŸºç±»ç»§æ‰¿è¿‡æ¥çš„ï¼Œä¸€ç±»æ˜¯è‡ªå·±å¢åŠ çš„æˆå‘˜ã€‚ ä»åŸºç±»ç»§æ‰¿è¿‡è¿‡æ¥çš„è¡¨ç°å…¶å…±æ€§ï¼Œè€Œæ–°å¢çš„æˆå‘˜ä½“ç°äº†å…¶ä¸ªæ€§ã€‚ 4.6.2 ç»§æ‰¿æ–¹å¼ç»§æ‰¿çš„è¯­æ³•ï¼šclass å­ç±» : ç»§æ‰¿æ–¹å¼ çˆ¶ç±» ç»§æ‰¿æ–¹å¼ä¸€å…±æœ‰ä¸‰ç§ï¼š å…¬å…±ç»§æ‰¿ ä¿æŠ¤ç»§æ‰¿ ç§æœ‰ç»§æ‰¿ ç¤ºä¾‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485class Base1&#123;public: int m_A;protected: int m_B;private: int m_C;&#125;;//å…¬å…±ç»§æ‰¿class Son1 :public Base1&#123;public: void func() &#123; m_A; //å¯è®¿é—® publicæƒé™ m_B; //å¯è®¿é—® protectedæƒé™ //m_C; //ä¸å¯è®¿é—® &#125;&#125;;void myClass()&#123; Son1 s1; s1.m_A; //å…¶ä»–ç±»åªèƒ½è®¿é—®åˆ°å…¬å…±æƒé™&#125;//ä¿æŠ¤ç»§æ‰¿class Base2&#123;public: int m_A;protected: int m_B;private: int m_C;&#125;;class Son2:protected Base2&#123;public: void func() &#123; m_A; //å¯è®¿é—® protectedæƒé™ m_B; //å¯è®¿é—® protectedæƒé™ //m_C; //ä¸å¯è®¿é—® &#125;&#125;;void myClass2()&#123; Son2 s; //s.m_A; //ä¸å¯è®¿é—®&#125;//ç§æœ‰ç»§æ‰¿class Base3&#123;public: int m_A;protected: int m_B;private: int m_C;&#125;;class Son3:private Base3&#123;public: void func() &#123; m_A; //å¯è®¿é—® privateæƒé™ m_B; //å¯è®¿é—® privateæƒé™ //m_C; //ä¸å¯è®¿é—® &#125;&#125;;class GrandSon3 :public Son3&#123;public: void func() &#123; //Son3æ˜¯ç§æœ‰ç»§æ‰¿ï¼Œæ‰€ä»¥ç»§æ‰¿Son3çš„å±æ€§åœ¨GrandSon3ä¸­éƒ½æ— æ³•è®¿é—®åˆ° //m_A; //m_B; //m_C; &#125;&#125;; 4.6.3 ç»§æ‰¿ä¸­çš„å¯¹è±¡æ¨¡å‹é—®é¢˜ï¼šä»çˆ¶ç±»ç»§æ‰¿è¿‡æ¥çš„æˆå‘˜ï¼Œå“ªäº›å±äºå­ç±»å¯¹è±¡ä¸­ï¼Ÿ ç¤ºä¾‹ï¼š 123456789101112131415161718192021222324252627282930class Base&#123;public: int m_A;protected: int m_B;private: int m_C; //ç§æœ‰æˆå‘˜åªæ˜¯è¢«éšè—äº†ï¼Œä½†æ˜¯è¿˜æ˜¯ä¼šç»§æ‰¿ä¸‹å»&#125;;//å…¬å…±ç»§æ‰¿class Son :public Base&#123;public: int m_D;&#125;;void test01()&#123; cout &lt;&lt; &quot;sizeof Son = &quot; &lt;&lt; sizeof(Son) &lt;&lt; endl;&#125;int main() &#123; test01(); system(&quot;pause&quot;); return 0;&#125; åˆ©ç”¨å·¥å…·æŸ¥çœ‹ï¼š æ‰“å¼€å·¥å…·çª—å£åï¼Œå®šä½åˆ°å½“å‰CPPæ–‡ä»¶çš„ç›˜ç¬¦ ç„¶åè¾“å…¥ï¼š cl &#x2F;d1 reportSingleClassLayoutæŸ¥çœ‹çš„ç±»å æ‰€å±æ–‡ä»¶å æ•ˆæœå¦‚ä¸‹å›¾ï¼š ç»“è®ºï¼š çˆ¶ç±»ä¸­ç§æœ‰æˆå‘˜ä¹Ÿæ˜¯è¢«å­ç±»ç»§æ‰¿ä¸‹å»äº†ï¼Œåªæ˜¯ç”±ç¼–è¯‘å™¨ç»™éšè—åè®¿é—®ä¸åˆ° 4.6.4 ç»§æ‰¿ä¸­æ„é€ å’Œææ„é¡ºåºå­ç±»ç»§æ‰¿çˆ¶ç±»åï¼Œå½“åˆ›å»ºå­ç±»å¯¹è±¡ï¼Œä¹Ÿä¼šè°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•° é—®é¢˜ï¼šçˆ¶ç±»å’Œå­ç±»çš„æ„é€ å’Œææ„é¡ºåºæ˜¯è°å…ˆè°åï¼Ÿ ç¤ºä¾‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142class Base &#123;public: Base() &#123; cout &lt;&lt; &quot;Baseæ„é€ å‡½æ•°!&quot; &lt;&lt; endl; &#125; ~Base() &#123; cout &lt;&lt; &quot;Baseææ„å‡½æ•°!&quot; &lt;&lt; endl; &#125;&#125;;class Son : public Base&#123;public: Son() &#123; cout &lt;&lt; &quot;Sonæ„é€ å‡½æ•°!&quot; &lt;&lt; endl; &#125; ~Son() &#123; cout &lt;&lt; &quot;Sonææ„å‡½æ•°!&quot; &lt;&lt; endl; &#125;&#125;;void test01()&#123; //ç»§æ‰¿ä¸­ å…ˆè°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°ï¼Œå†è°ƒç”¨å­ç±»æ„é€ å‡½æ•°ï¼Œææ„é¡ºåºä¸æ„é€ ç›¸å Son s;&#125;int main() &#123; test01(); system(&quot;pause&quot;); return 0;&#125; æ€»ç»“ï¼šç»§æ‰¿ä¸­ å…ˆè°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°ï¼Œå†è°ƒç”¨å­ç±»æ„é€ å‡½æ•°ï¼Œææ„é¡ºåºä¸æ„é€ ç›¸å 4.6.5 ç»§æ‰¿åŒåæˆå‘˜å¤„ç†æ–¹å¼é—®é¢˜ï¼šå½“å­ç±»ä¸çˆ¶ç±»å‡ºç°åŒåçš„æˆå‘˜ï¼Œå¦‚ä½•é€šè¿‡å­ç±»å¯¹è±¡ï¼Œè®¿é—®åˆ°å­ç±»æˆ–çˆ¶ç±»ä¸­åŒåçš„æ•°æ®å‘¢ï¼Ÿ è®¿é—®å­ç±»åŒåæˆå‘˜ ç›´æ¥è®¿é—®å³å¯ è®¿é—®çˆ¶ç±»åŒåæˆå‘˜ éœ€è¦åŠ ä½œç”¨åŸŸ ç¤ºä¾‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758class Base &#123;public: Base() &#123; m_A = 100; &#125; void func() &#123; cout &lt;&lt; &quot;Base - func()è°ƒç”¨&quot; &lt;&lt; endl; &#125; void func(int a) &#123; cout &lt;&lt; &quot;Base - func(int a)è°ƒç”¨&quot; &lt;&lt; endl; &#125;public: int m_A;&#125;;class Son : public Base &#123;public: Son() &#123; m_A = 200; &#125; //å½“å­ç±»ä¸çˆ¶ç±»æ‹¥æœ‰åŒåçš„æˆå‘˜å‡½æ•°ï¼Œå­ç±»ä¼šéšè—çˆ¶ç±»ä¸­æ‰€æœ‰ç‰ˆæœ¬çš„åŒåæˆå‘˜å‡½æ•° //å¦‚æœæƒ³è®¿é—®çˆ¶ç±»ä¸­è¢«éšè—çš„åŒåæˆå‘˜å‡½æ•°ï¼Œéœ€è¦åŠ çˆ¶ç±»çš„ä½œç”¨åŸŸ void func() &#123; cout &lt;&lt; &quot;Son - func()è°ƒç”¨&quot; &lt;&lt; endl; &#125;public: int m_A;&#125;;void test01()&#123; Son s; cout &lt;&lt; &quot;Sonä¸‹çš„m_A = &quot; &lt;&lt; s.m_A &lt;&lt; endl; cout &lt;&lt; &quot;Baseä¸‹çš„m_A = &quot; &lt;&lt; s.Base::m_A &lt;&lt; endl; s.func(); s.Base::func(); s.Base::func(10);&#125;int main() &#123; test01(); system(&quot;pause&quot;); return EXIT_SUCCESS;&#125; æ€»ç»“ï¼š å­ç±»å¯¹è±¡å¯ä»¥ç›´æ¥è®¿é—®åˆ°å­ç±»ä¸­åŒåæˆå‘˜ å­ç±»å¯¹è±¡åŠ ä½œç”¨åŸŸå¯ä»¥è®¿é—®åˆ°çˆ¶ç±»åŒåæˆå‘˜ å½“å­ç±»ä¸çˆ¶ç±»æ‹¥æœ‰åŒåçš„æˆå‘˜å‡½æ•°ï¼Œå­ç±»ä¼šéšè—çˆ¶ç±»ä¸­åŒåæˆå‘˜å‡½æ•°ï¼ŒåŠ ä½œç”¨åŸŸå¯ä»¥è®¿é—®åˆ°çˆ¶ç±»ä¸­åŒåå‡½æ•° 4.6.6 ç»§æ‰¿åŒåé™æ€æˆå‘˜å¤„ç†æ–¹å¼é—®é¢˜ï¼šç»§æ‰¿ä¸­åŒåçš„é™æ€æˆå‘˜åœ¨å­ç±»å¯¹è±¡ä¸Šå¦‚ä½•è¿›è¡Œè®¿é—®ï¼Ÿ é™æ€æˆå‘˜å’Œéé™æ€æˆå‘˜å‡ºç°åŒåï¼Œå¤„ç†æ–¹å¼ä¸€è‡´ è®¿é—®å­ç±»åŒåæˆå‘˜ ç›´æ¥è®¿é—®å³å¯ è®¿é—®çˆ¶ç±»åŒåæˆå‘˜ éœ€è¦åŠ ä½œç”¨åŸŸ ç¤ºä¾‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566class Base &#123;public: static void func() &#123; cout &lt;&lt; &quot;Base - static void func()&quot; &lt;&lt; endl; &#125; static void func(int a) &#123; cout &lt;&lt; &quot;Base - static void func(int a)&quot; &lt;&lt; endl; &#125; static int m_A;&#125;;int Base::m_A = 100;class Son : public Base &#123;public: static void func() &#123; cout &lt;&lt; &quot;Son - static void func()&quot; &lt;&lt; endl; &#125; static int m_A;&#125;;int Son::m_A = 200;//åŒåæˆå‘˜å±æ€§void test01()&#123; //é€šè¿‡å¯¹è±¡è®¿é—® cout &lt;&lt; &quot;é€šè¿‡å¯¹è±¡è®¿é—®ï¼š &quot; &lt;&lt; endl; Son s; cout &lt;&lt; &quot;Son ä¸‹ m_A = &quot; &lt;&lt; s.m_A &lt;&lt; endl; cout &lt;&lt; &quot;Base ä¸‹ m_A = &quot; &lt;&lt; s.Base::m_A &lt;&lt; endl; //é€šè¿‡ç±»åè®¿é—® cout &lt;&lt; &quot;é€šè¿‡ç±»åè®¿é—®ï¼š &quot; &lt;&lt; endl; cout &lt;&lt; &quot;Son ä¸‹ m_A = &quot; &lt;&lt; Son::m_A &lt;&lt; endl; cout &lt;&lt; &quot;Base ä¸‹ m_A = &quot; &lt;&lt; Son::Base::m_A &lt;&lt; endl;&#125;//åŒåæˆå‘˜å‡½æ•°void test02()&#123; //é€šè¿‡å¯¹è±¡è®¿é—® cout &lt;&lt; &quot;é€šè¿‡å¯¹è±¡è®¿é—®ï¼š &quot; &lt;&lt; endl; Son s; s.func(); s.Base::func(); cout &lt;&lt; &quot;é€šè¿‡ç±»åè®¿é—®ï¼š &quot; &lt;&lt; endl; Son::func(); Son::Base::func(); //å‡ºç°åŒåï¼Œå­ç±»ä¼šéšè—æ‰çˆ¶ç±»ä¸­æ‰€æœ‰åŒåæˆå‘˜å‡½æ•°ï¼Œéœ€è¦åŠ ä½œä½œç”¨åŸŸè®¿é—® Son::Base::func(100);&#125;int main() &#123; //test01(); test02(); system(&quot;pause&quot;); return 0;&#125; æ€»ç»“ï¼šåŒåé™æ€æˆå‘˜å¤„ç†æ–¹å¼å’Œéé™æ€å¤„ç†æ–¹å¼ä¸€æ ·ï¼Œåªä¸è¿‡æœ‰ä¸¤ç§è®¿é—®çš„æ–¹å¼ï¼ˆé€šè¿‡å¯¹è±¡ å’Œ é€šè¿‡ç±»åï¼‰ 4.6.7 å¤šç»§æ‰¿è¯­æ³•C++å…è®¸ä¸€ä¸ªç±»ç»§æ‰¿å¤šä¸ªç±» è¯­æ³•ï¼š class å­ç±» ï¼šç»§æ‰¿æ–¹å¼ çˆ¶ç±»1 ï¼Œ ç»§æ‰¿æ–¹å¼ çˆ¶ç±»2... å¤šç»§æ‰¿å¯èƒ½ä¼šå¼•å‘çˆ¶ç±»ä¸­æœ‰åŒåæˆå‘˜å‡ºç°ï¼Œéœ€è¦åŠ ä½œç”¨åŸŸåŒºåˆ† C++å®é™…å¼€å‘ä¸­ä¸å»ºè®®ç”¨å¤šç»§æ‰¿ ç¤ºä¾‹ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253class Base1 &#123;public: Base1() &#123; m_A = 100; &#125;public: int m_A;&#125;;class Base2 &#123;public: Base2() &#123; m_A = 200; //å¼€å§‹æ˜¯m_B ä¸ä¼šå‡ºé—®é¢˜ï¼Œä½†æ˜¯æ”¹ä¸ºmAå°±ä¼šå‡ºç°ä¸æ˜ç¡® &#125;public: int m_A;&#125;;//è¯­æ³•ï¼šclass å­ç±»ï¼šç»§æ‰¿æ–¹å¼ çˆ¶ç±»1 ï¼Œç»§æ‰¿æ–¹å¼ çˆ¶ç±»2 class Son : public Base2, public Base1 &#123;public: Son() &#123; m_C = 300; m_D = 400; &#125;public: int m_C; int m_D;&#125;;//å¤šç»§æ‰¿å®¹æ˜“äº§ç”Ÿæˆå‘˜åŒåçš„æƒ…å†µ//é€šè¿‡ä½¿ç”¨ç±»åä½œç”¨åŸŸå¯ä»¥åŒºåˆ†è°ƒç”¨å“ªä¸€ä¸ªåŸºç±»çš„æˆå‘˜void test01()&#123; Son s; cout &lt;&lt; &quot;sizeof Son = &quot; &lt;&lt; sizeof(s) &lt;&lt; endl; cout &lt;&lt; s.Base1::m_A &lt;&lt; endl; cout &lt;&lt; s.Base2::m_A &lt;&lt; endl;&#125;int main() &#123; test01(); system(&quot;pause&quot;); return 0;&#125; æ€»ç»“ï¼š å¤šç»§æ‰¿ä¸­å¦‚æœçˆ¶ç±»ä¸­å‡ºç°äº†åŒåæƒ…å†µï¼Œå­ç±»ä½¿ç”¨æ—¶å€™è¦åŠ ä½œç”¨åŸŸ 4.6.8 è±å½¢ç»§æ‰¿è±å½¢ç»§æ‰¿æ¦‚å¿µï¼š â€‹ ä¸¤ä¸ªæ´¾ç”Ÿç±»ç»§æ‰¿åŒä¸€ä¸ªåŸºç±» â€‹ åˆæœ‰æŸä¸ªç±»åŒæ—¶ç»§æ‰¿è€…ä¸¤ä¸ªæ´¾ç”Ÿç±» â€‹ è¿™ç§ç»§æ‰¿è¢«ç§°ä¸ºè±å½¢ç»§æ‰¿ï¼Œæˆ–è€…é’»çŸ³ç»§æ‰¿ å…¸å‹çš„è±å½¢ç»§æ‰¿æ¡ˆä¾‹ï¼š è±å½¢ç»§æ‰¿é—®é¢˜ï¼š ç¾Šç»§æ‰¿äº†åŠ¨ç‰©çš„æ•°æ®ï¼Œé©¼åŒæ ·ç»§æ‰¿äº†åŠ¨ç‰©çš„æ•°æ®ï¼Œå½“è‰æ³¥é©¬ä½¿ç”¨æ•°æ®æ—¶ï¼Œå°±ä¼šäº§ç”ŸäºŒä¹‰æ€§ã€‚ è‰æ³¥é©¬ç»§æ‰¿è‡ªåŠ¨ç‰©çš„æ•°æ®ç»§æ‰¿äº†ä¸¤ä»½ï¼Œå…¶å®æˆ‘ä»¬åº”è¯¥æ¸…æ¥šï¼Œè¿™ä»½æ•°æ®æˆ‘ä»¬åªéœ€è¦ä¸€ä»½å°±å¯ä»¥ã€‚ ç¤ºä¾‹ï¼š 1234567891011121314151617181920212223242526272829303132class Animal&#123;public: int m_Age;&#125;;//ç»§æ‰¿å‰åŠ virtualå…³é”®å­—åï¼Œå˜ä¸ºè™šç»§æ‰¿//æ­¤æ—¶å…¬å…±çš„çˆ¶ç±»Animalç§°ä¸ºè™šåŸºç±»class Sheep : virtual public Animal &#123;&#125;;class Tuo : virtual public Animal &#123;&#125;;class SheepTuo : public Sheep, public Tuo &#123;&#125;;void test01()&#123; SheepTuo st; st.Sheep::m_Age = 100; st.Tuo::m_Age = 200; cout &lt;&lt; &quot;st.Sheep::m_Age = &quot; &lt;&lt; st.Sheep::m_Age &lt;&lt; endl; cout &lt;&lt; &quot;st.Tuo::m_Age = &quot; &lt;&lt; st.Tuo::m_Age &lt;&lt; endl; cout &lt;&lt; &quot;st.m_Age = &quot; &lt;&lt; st.m_Age &lt;&lt; endl;&#125;int main() &#123; test01(); system(&quot;pause&quot;); return 0;&#125; è±å½¢ç»§æ‰¿ï¼š 12345678910class A &#123; public: int data; &#125;;class B : public A &#123;&#125;;class C : public A &#123;&#125;;class D : public B, public C &#123;&#125;;int main() &#123; D d; d.data = 10; // é”™è¯¯ï¼äºŒä¹‰æ€§ï¼šä¸çŸ¥é“è®¿é—® B::data è¿˜æ˜¯ C::data d.B::data = 10; // éœ€æ˜¾å¼æŒ‡å®šè·¯å¾„ï¼ˆä»æœ‰é‡å¤å†…å­˜ï¼‰&#125; è§£å†³æ–¹æ¡ˆï¼šè™šç»§æ‰¿ 123456789101112131415//åˆ©ç”¨è™šç»§æ‰¿åclass A &#123; public: int data; &#125;;// å…³é”®ï¼šä½¿ç”¨ virtual ç»§æ‰¿class B : virtual public A &#123;&#125;; // è™šç»§æ‰¿class C : virtual public A &#123;&#125;; // è™šç»§æ‰¿class D : public B, public C &#123;&#125;;int main() &#123; D d; d.data = 10; // âœ… æ­£ç¡®ï¼ä¸å†æœ‰äºŒä¹‰æ€§ d.B::data = 20; // âœ… ä¿®æ”¹çš„æ˜¯åŒä¸€ä»½æ•°æ® d.C::data = 30; // âœ… å€¼å˜ä¸º30ï¼ˆå…±äº«åŒä¸€ä»½ï¼‰&#125; å†…å­˜å¯¹æ¯”ï¼š 123456789101112æ™®é€šç»§æ‰¿ï¼šD &#123; B &#123; A &#123; data &#125; &#125; C &#123; A &#123; data &#125; &#125; // æ¯ä¸ªæ´¾ç”Ÿç±»å¯¹è±¡éƒ½ä¿ç•™äº†çˆ¶ç±»çš„æˆå‘˜ï¼Œäº§ç”Ÿäº†é‡å¤å‰¯æœ¬ï¼&#125;è™šç»§æ‰¿ï¼šD &#123; B &#123; ... &#125; C &#123; ... &#125; å…±äº«çš„ A &#123; data &#125; // å”¯ä¸€å‰¯æœ¬&#125; è±å½¢ç»§æ‰¿å¸¦æ¥çš„ä¸»è¦é—®é¢˜æ˜¯å­ç±»ç»§æ‰¿ä¸¤ä»½ç›¸åŒçš„æ•°æ®ï¼Œå¯¼è‡´èµ„æºæµªè´¹ä»¥åŠæ¯«æ— æ„ä¹‰ åˆ©ç”¨è™šç»§æ‰¿å¯ä»¥è§£å†³è±å½¢ç»§æ‰¿é—®é¢˜ 4.7 å¤šæ€4.7.1 å¤šæ€çš„åŸºæœ¬æ¦‚å¿µå¤šæ€æ˜¯C++é¢å‘å¯¹è±¡ä¸‰å¤§ç‰¹æ€§ä¹‹ä¸€ å¤šæ€åˆ†ä¸ºä¸¤ç±» é™æ€å¤šæ€: å‡½æ•°é‡è½½ å’Œ è¿ç®—ç¬¦é‡è½½å±äºé™æ€å¤šæ€ï¼Œå¤ç”¨å‡½æ•°å åŠ¨æ€å¤šæ€: æ´¾ç”Ÿç±»å’Œè™šå‡½æ•°å®ç°è¿è¡Œæ—¶å¤šæ€ é™æ€å¤šæ€å’ŒåŠ¨æ€å¤šæ€åŒºåˆ«ï¼š é™æ€å¤šæ€çš„å‡½æ•°åœ°å€æ—©ç»‘å®š - ç¼–è¯‘é˜¶æ®µç¡®å®šå‡½æ•°åœ°å€ åŠ¨æ€å¤šæ€çš„å‡½æ•°åœ°å€æ™šç»‘å®š - è¿è¡Œé˜¶æ®µç¡®å®šå‡½æ•°åœ°å€ ä¸‹é¢é€šè¿‡æ¡ˆä¾‹è¿›è¡Œè®²è§£å¤šæ€ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364class Animal&#123;public: //Speakå‡½æ•°å°±æ˜¯è™šå‡½æ•° //å‡½æ•°å‰é¢åŠ ä¸Švirtualå…³é”®å­—ï¼Œå˜æˆè™šå‡½æ•°ï¼Œé‚£ä¹ˆç¼–è¯‘å™¨åœ¨ç¼–è¯‘çš„æ—¶å€™å°±ä¸èƒ½ç¡®å®šå‡½æ•°è°ƒç”¨äº†ã€‚ virtual void speak() &#123; cout &lt;&lt; &quot;åŠ¨ç‰©åœ¨è¯´è¯&quot; &lt;&lt; endl; &#125;&#125;;class Cat :public Animal&#123;public: void speak() &#123; cout &lt;&lt; &quot;å°çŒ«åœ¨è¯´è¯&quot; &lt;&lt; endl; &#125;&#125;;class Dog :public Animal&#123;public: void speak() &#123; cout &lt;&lt; &quot;å°ç‹—åœ¨è¯´è¯&quot; &lt;&lt; endl; &#125;&#125;;//æˆ‘ä»¬å¸Œæœ›ä¼ å…¥ä»€ä¹ˆå¯¹è±¡ï¼Œé‚£ä¹ˆå°±è°ƒç”¨ä»€ä¹ˆå¯¹è±¡çš„å‡½æ•°//å¦‚æœå‡½æ•°åœ°å€åœ¨ç¼–è¯‘é˜¶æ®µå°±èƒ½ç¡®å®šï¼Œé‚£ä¹ˆé™æ€è”ç¼–//å¦‚æœå‡½æ•°åœ°å€åœ¨è¿è¡Œé˜¶æ®µæ‰èƒ½ç¡®å®šï¼Œå°±æ˜¯åŠ¨æ€è”ç¼–void DoSpeak(Animal &amp; animal)&#123; animal.speak();&#125;////å¤šæ€æ»¡è¶³æ¡ä»¶ï¼š //1ã€æœ‰ç»§æ‰¿å…³ç³»//2ã€å­ç±»é‡å†™çˆ¶ç±»ä¸­çš„è™šå‡½æ•°//å¤šæ€ä½¿ç”¨ï¼š//çˆ¶ç±»æŒ‡é’ˆæˆ–å¼•ç”¨æŒ‡å‘å­ç±»å¯¹è±¡void test01()&#123; Cat cat; DoSpeak(cat); Dog dog; DoSpeak(dog);&#125;int main() &#123; test01(); system(&quot;pause&quot;); return 0;&#125; æ€»ç»“ï¼š å¤šæ€æ»¡è¶³æ¡ä»¶ æœ‰ç»§æ‰¿å…³ç³» å­ç±»é‡å†™çˆ¶ç±»ä¸­çš„è™šå‡½æ•° å¤šæ€ä½¿ç”¨æ¡ä»¶ çˆ¶ç±»æŒ‡é’ˆæˆ–å¼•ç”¨æŒ‡å‘å­ç±»å¯¹è±¡ é‡å†™ï¼šå‡½æ•°è¿”å›å€¼ç±»å‹ å‡½æ•°å å‚æ•°åˆ—è¡¨ å®Œå…¨ä¸€è‡´ç§°ä¸ºé‡å†™ 4.7.2 å¤šæ€æ¡ˆä¾‹ä¸€-è®¡ç®—å™¨ç±»æ¡ˆä¾‹æè¿°ï¼š åˆ†åˆ«åˆ©ç”¨æ™®é€šå†™æ³•å’Œå¤šæ€æŠ€æœ¯ï¼Œè®¾è®¡å®ç°ä¸¤ä¸ªæ“ä½œæ•°è¿›è¡Œè¿ç®—çš„è®¡ç®—å™¨ç±» å¤šæ€çš„ä¼˜ç‚¹ï¼š ä»£ç ç»„ç»‡ç»“æ„æ¸…æ™° å¯è¯»æ€§å¼º åˆ©äºå‰æœŸå’ŒåæœŸçš„æ‰©å±•ä»¥åŠç»´æŠ¤ ç¤ºä¾‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117//æ™®é€šå®ç°class Calculator &#123;public: int getResult(string oper) &#123; if (oper == &quot;+&quot;) &#123; return m_Num1 + m_Num2; &#125; else if (oper == &quot;-&quot;) &#123; return m_Num1 - m_Num2; &#125; else if (oper == &quot;*&quot;) &#123; return m_Num1 * m_Num2; &#125; //å¦‚æœè¦æä¾›æ–°çš„è¿ç®—ï¼Œéœ€è¦ä¿®æ”¹æºç  &#125;public: int m_Num1; int m_Num2;&#125;;void test01()&#123; //æ™®é€šå®ç°æµ‹è¯• Calculator c; c.m_Num1 = 10; c.m_Num2 = 10; cout &lt;&lt; c.m_Num1 &lt;&lt; &quot; + &quot; &lt;&lt; c.m_Num2 &lt;&lt; &quot; = &quot; &lt;&lt; c.getResult(&quot;+&quot;) &lt;&lt; endl; cout &lt;&lt; c.m_Num1 &lt;&lt; &quot; - &quot; &lt;&lt; c.m_Num2 &lt;&lt; &quot; = &quot; &lt;&lt; c.getResult(&quot;-&quot;) &lt;&lt; endl; cout &lt;&lt; c.m_Num1 &lt;&lt; &quot; * &quot; &lt;&lt; c.m_Num2 &lt;&lt; &quot; = &quot; &lt;&lt; c.getResult(&quot;*&quot;) &lt;&lt; endl;&#125;//å¤šæ€å®ç°//æŠ½è±¡è®¡ç®—å™¨ç±»//å¤šæ€ä¼˜ç‚¹ï¼šä»£ç ç»„ç»‡ç»“æ„æ¸…æ™°ï¼Œå¯è¯»æ€§å¼ºï¼Œåˆ©äºå‰æœŸå’ŒåæœŸçš„æ‰©å±•ä»¥åŠç»´æŠ¤class AbstractCalculator&#123;public : virtual int getResult() &#123; return 0; &#125; int m_Num1; int m_Num2;&#125;;//åŠ æ³•è®¡ç®—å™¨class AddCalculator :public AbstractCalculator&#123;public: int getResult() &#123; return m_Num1 + m_Num2; &#125;&#125;;//å‡æ³•è®¡ç®—å™¨class SubCalculator :public AbstractCalculator&#123;public: int getResult() &#123; return m_Num1 - m_Num2; &#125;&#125;;//ä¹˜æ³•è®¡ç®—å™¨class MulCalculator :public AbstractCalculator&#123;public: int getResult() &#123; return m_Num1 * m_Num2; &#125;&#125;;void test02()&#123; //åˆ›å»ºåŠ æ³•è®¡ç®—å™¨ AbstractCalculator *abc = new AddCalculator; abc-&gt;m_Num1 = 10; abc-&gt;m_Num2 = 10; cout &lt;&lt; abc-&gt;m_Num1 &lt;&lt; &quot; + &quot; &lt;&lt; abc-&gt;m_Num2 &lt;&lt; &quot; = &quot; &lt;&lt; abc-&gt;getResult() &lt;&lt; endl; delete abc; //ç”¨å®Œäº†è®°å¾—é”€æ¯ //åˆ›å»ºå‡æ³•è®¡ç®—å™¨ abc = new SubCalculator; abc-&gt;m_Num1 = 10; abc-&gt;m_Num2 = 10; cout &lt;&lt; abc-&gt;m_Num1 &lt;&lt; &quot; - &quot; &lt;&lt; abc-&gt;m_Num2 &lt;&lt; &quot; = &quot; &lt;&lt; abc-&gt;getResult() &lt;&lt; endl; delete abc; //åˆ›å»ºä¹˜æ³•è®¡ç®—å™¨ abc = new MulCalculator; abc-&gt;m_Num1 = 10; abc-&gt;m_Num2 = 10; cout &lt;&lt; abc-&gt;m_Num1 &lt;&lt; &quot; * &quot; &lt;&lt; abc-&gt;m_Num2 &lt;&lt; &quot; = &quot; &lt;&lt; abc-&gt;getResult() &lt;&lt; endl; delete abc;&#125;int main() &#123; //test01(); test02(); system(&quot;pause&quot;); return 0;&#125; æ€»ç»“ï¼šC++å¼€å‘æå€¡åˆ©ç”¨å¤šæ€è®¾è®¡ç¨‹åºæ¶æ„ï¼Œå› ä¸ºå¤šæ€ä¼˜ç‚¹å¾ˆå¤š 4.7.3 çº¯è™šå‡½æ•°å’ŒæŠ½è±¡ç±»åœ¨å¤šæ€ä¸­ï¼Œé€šå¸¸çˆ¶ç±»ä¸­è™šå‡½æ•°çš„å®ç°æ˜¯æ¯«æ— æ„ä¹‰çš„ï¼Œä¸»è¦éƒ½æ˜¯è°ƒç”¨å­ç±»é‡å†™çš„å†…å®¹ å› æ­¤å¯ä»¥å°†è™šå‡½æ•°æ”¹ä¸ºçº¯è™šå‡½æ•° çº¯è™šå‡½æ•°è¯­æ³•ï¼švirtual è¿”å›å€¼ç±»å‹ å‡½æ•°å ï¼ˆå‚æ•°åˆ—è¡¨ï¼‰= 0 ; å½“ç±»ä¸­æœ‰äº†çº¯è™šå‡½æ•°ï¼Œè¿™ä¸ªç±»ä¹Ÿç§°ä¸º&#x3D;&#x3D;æŠ½è±¡ç±»&#x3D;&#x3D; æŠ½è±¡ç±»ç‰¹ç‚¹ï¼š æ— æ³•å®ä¾‹åŒ–å¯¹è±¡ å­ç±»å¿…é¡»é‡å†™æŠ½è±¡ç±»ä¸­çš„çº¯è™šå‡½æ•°ï¼Œå¦åˆ™ä¹Ÿå±äºæŠ½è±¡ç±» ç¤ºä¾‹ï¼š 123456789101112131415161718192021222324252627282930313233343536class Base&#123;public: //çº¯è™šå‡½æ•° //ç±»ä¸­åªè¦æœ‰ä¸€ä¸ªçº¯è™šå‡½æ•°å°±ç§°ä¸ºæŠ½è±¡ç±» //æŠ½è±¡ç±»æ— æ³•å®ä¾‹åŒ–å¯¹è±¡ //å­ç±»å¿…é¡»é‡å†™çˆ¶ç±»ä¸­çš„çº¯è™šå‡½æ•°ï¼Œå¦åˆ™ä¹Ÿå±äºæŠ½è±¡ç±» virtual void func() = 0;&#125;;class Son :public Base&#123;public: virtual void func() &#123; cout &lt;&lt; &quot;funcè°ƒç”¨&quot; &lt;&lt; endl; &#125;;&#125;;void test01()&#123; Base * base = NULL; //base = new Base; // é”™è¯¯ï¼ŒæŠ½è±¡ç±»æ— æ³•å®ä¾‹åŒ–å¯¹è±¡ base = new Son; base-&gt;func(); delete base;//è®°å¾—é”€æ¯&#125;int main() &#123; test01(); system(&quot;pause&quot;); return 0;&#125; 4.7.4 å¤šæ€æ¡ˆä¾‹äºŒ-åˆ¶ä½œé¥®å“æ¡ˆä¾‹æè¿°ï¼š åˆ¶ä½œé¥®å“çš„å¤§è‡´æµç¨‹ä¸ºï¼šç…®æ°´ - å†²æ³¡ - å€’å…¥æ¯ä¸­ - åŠ å…¥è¾…æ–™ åˆ©ç”¨å¤šæ€æŠ€æœ¯å®ç°æœ¬æ¡ˆä¾‹ï¼Œæä¾›æŠ½è±¡åˆ¶ä½œé¥®å“åŸºç±»ï¼Œæä¾›å­ç±»åˆ¶ä½œå’–å•¡å’ŒèŒ¶å¶ ç¤ºä¾‹ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283//æŠ½è±¡åˆ¶ä½œé¥®å“class AbstractDrinking &#123;public: //çƒ§æ°´ virtual void Boil() = 0; //å†²æ³¡ virtual void Brew() = 0; //å€’å…¥æ¯ä¸­ virtual void PourInCup() = 0; //åŠ å…¥è¾…æ–™ virtual void PutSomething() = 0; //è§„å®šæµç¨‹ void MakeDrink() &#123; Boil(); Brew(); PourInCup(); PutSomething(); &#125;&#125;;//åˆ¶ä½œå’–å•¡class Coffee : public AbstractDrinking &#123;public: //çƒ§æ°´ virtual void Boil() &#123; cout &lt;&lt; &quot;ç…®å†œå¤«å±±æ³‰!&quot; &lt;&lt; endl; &#125; //å†²æ³¡ virtual void Brew() &#123; cout &lt;&lt; &quot;å†²æ³¡å’–å•¡!&quot; &lt;&lt; endl; &#125; //å€’å…¥æ¯ä¸­ virtual void PourInCup() &#123; cout &lt;&lt; &quot;å°†å’–å•¡å€’å…¥æ¯ä¸­!&quot; &lt;&lt; endl; &#125; //åŠ å…¥è¾…æ–™ virtual void PutSomething() &#123; cout &lt;&lt; &quot;åŠ å…¥ç‰›å¥¶!&quot; &lt;&lt; endl; &#125;&#125;;//åˆ¶ä½œèŒ¶æ°´class Tea : public AbstractDrinking &#123;public: //çƒ§æ°´ virtual void Boil() &#123; cout &lt;&lt; &quot;ç…®è‡ªæ¥æ°´!&quot; &lt;&lt; endl; &#125; //å†²æ³¡ virtual void Brew() &#123; cout &lt;&lt; &quot;å†²æ³¡èŒ¶å¶!&quot; &lt;&lt; endl; &#125; //å€’å…¥æ¯ä¸­ virtual void PourInCup() &#123; cout &lt;&lt; &quot;å°†èŒ¶æ°´å€’å…¥æ¯ä¸­!&quot; &lt;&lt; endl; &#125; //åŠ å…¥è¾…æ–™ virtual void PutSomething() &#123; cout &lt;&lt; &quot;åŠ å…¥æ¸æ!&quot; &lt;&lt; endl; &#125;&#125;;//ä¸šåŠ¡å‡½æ•°void DoWork(AbstractDrinking* drink) &#123; drink-&gt;MakeDrink(); delete drink;&#125;void test01() &#123; DoWork(new Coffee); cout &lt;&lt; &quot;--------------&quot; &lt;&lt; endl; DoWork(new Tea);&#125;int main() &#123; test01(); system(&quot;pause&quot;); return 0;&#125; 4.7.5 è™šææ„å’Œçº¯è™šææ„å¤šæ€ä½¿ç”¨æ—¶ï¼Œå¦‚æœå­ç±»ä¸­æœ‰å±æ€§å¼€è¾Ÿåˆ°å †åŒºï¼Œé‚£ä¹ˆçˆ¶ç±»æŒ‡é’ˆåœ¨é‡Šæ”¾æ—¶æ— æ³•è°ƒç”¨åˆ°å­ç±»çš„ææ„ä»£ç  è§£å†³æ–¹å¼ï¼šå°†çˆ¶ç±»ä¸­çš„ææ„å‡½æ•°æ”¹ä¸ºè™šææ„æˆ–è€…çº¯è™šææ„ è™šææ„å’Œçº¯è™šææ„å…±æ€§ï¼š å¯ä»¥è§£å†³çˆ¶ç±»æŒ‡é’ˆé‡Šæ”¾å­ç±»å¯¹è±¡ éƒ½éœ€è¦æœ‰å…·ä½“çš„å‡½æ•°å®ç° è™šææ„å’Œçº¯è™šææ„åŒºåˆ«ï¼š å¦‚æœæ˜¯çº¯è™šææ„ï¼Œè¯¥ç±»å±äºæŠ½è±¡ç±»ï¼Œæ— æ³•å®ä¾‹åŒ–å¯¹è±¡ è™šææ„è¯­æ³•ï¼š virtual ~ç±»å()&#123;&#125; çº¯è™šææ„è¯­æ³•ï¼š virtual ~ç±»å() = 0; ç±»å::~ç±»å()&#123;&#125; ç¤ºä¾‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869class Animal &#123;public: Animal() &#123; cout &lt;&lt; &quot;Animal æ„é€ å‡½æ•°è°ƒç”¨ï¼&quot; &lt;&lt; endl; &#125; virtual void Speak() = 0; //ææ„å‡½æ•°åŠ ä¸Švirtualå…³é”®å­—ï¼Œå˜æˆè™šææ„å‡½æ•° //virtual ~Animal() //&#123; // cout &lt;&lt; &quot;Animalè™šææ„å‡½æ•°è°ƒç”¨ï¼&quot; &lt;&lt; endl; //&#125; virtual ~Animal() = 0;&#125;;Animal::~Animal()&#123; cout &lt;&lt; &quot;Animal çº¯è™šææ„å‡½æ•°è°ƒç”¨ï¼&quot; &lt;&lt; endl;&#125;//å’ŒåŒ…å«æ™®é€šçº¯è™šå‡½æ•°çš„ç±»ä¸€æ ·ï¼ŒåŒ…å«äº†çº¯è™šææ„å‡½æ•°çš„ç±»ä¹Ÿæ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ã€‚ä¸èƒ½å¤Ÿè¢«å®ä¾‹åŒ–ã€‚class Cat : public Animal &#123;public: Cat(string name) &#123; cout &lt;&lt; &quot;Catæ„é€ å‡½æ•°è°ƒç”¨ï¼&quot; &lt;&lt; endl; m_Name = new string(name); &#125; virtual void Speak() &#123; cout &lt;&lt; *m_Name &lt;&lt; &quot;å°çŒ«åœ¨è¯´è¯!&quot; &lt;&lt; endl; &#125; ~Cat() &#123; cout &lt;&lt; &quot;Catææ„å‡½æ•°è°ƒç”¨!&quot; &lt;&lt; endl; if (this-&gt;m_Name != NULL) &#123; delete m_Name; m_Name = NULL; &#125; &#125;public: string *m_Name;&#125;;void test01()&#123; Animal *animal = new Cat(&quot;Tom&quot;); animal-&gt;Speak(); //é€šè¿‡çˆ¶ç±»æŒ‡é’ˆå»é‡Šæ”¾ï¼Œä¼šå¯¼è‡´å­ç±»å¯¹è±¡å¯èƒ½æ¸…ç†ä¸å¹²å‡€ï¼Œé€ æˆå†…å­˜æ³„æ¼ //æ€ä¹ˆè§£å†³ï¼Ÿç»™åŸºç±»å¢åŠ ä¸€ä¸ªè™šææ„å‡½æ•° //è™šææ„å‡½æ•°å°±æ˜¯ç”¨æ¥è§£å†³é€šè¿‡çˆ¶ç±»æŒ‡é’ˆé‡Šæ”¾å­ç±»å¯¹è±¡ delete animal;&#125;int main() &#123; test01(); system(&quot;pause&quot;); return 0;&#125; æ€»ç»“ï¼š â€‹ 1. è™šææ„æˆ–çº¯è™šææ„å°±æ˜¯ç”¨æ¥è§£å†³é€šè¿‡çˆ¶ç±»æŒ‡é’ˆé‡Šæ”¾å­ç±»å¯¹è±¡ â€‹ 2. å¦‚æœå­ç±»ä¸­æ²¡æœ‰å †åŒºæ•°æ®ï¼Œå¯ä»¥ä¸å†™ä¸ºè™šææ„æˆ–çº¯è™šææ„ â€‹ 3. æ‹¥æœ‰çº¯è™šææ„å‡½æ•°çš„ç±»ä¹Ÿå±äºæŠ½è±¡ç±» 4.7.6 å¤šæ€æ¡ˆä¾‹ä¸‰-ç”µè„‘ç»„è£…æ¡ˆä¾‹æè¿°ï¼š ç”µè„‘ä¸»è¦ç»„æˆéƒ¨ä»¶ä¸º CPUï¼ˆç”¨äºè®¡ç®—ï¼‰ï¼Œæ˜¾å¡ï¼ˆç”¨äºæ˜¾ç¤ºï¼‰ï¼Œå†…å­˜æ¡ï¼ˆç”¨äºå­˜å‚¨ï¼‰ å°†æ¯ä¸ªé›¶ä»¶å°è£…å‡ºæŠ½è±¡åŸºç±»ï¼Œå¹¶ä¸”æä¾›ä¸åŒçš„å‚å•†ç”Ÿäº§ä¸åŒçš„é›¶ä»¶ï¼Œä¾‹å¦‚Intelå‚å•†å’ŒLenovoå‚å•† åˆ›å»ºç”µè„‘ç±»æä¾›è®©ç”µè„‘å·¥ä½œçš„å‡½æ•°ï¼Œå¹¶ä¸”è°ƒç”¨æ¯ä¸ªé›¶ä»¶å·¥ä½œçš„æ¥å£ æµ‹è¯•æ—¶ç»„è£…ä¸‰å°ä¸åŒçš„ç”µè„‘è¿›è¡Œå·¥ä½œ ç¤ºä¾‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168#include&lt;iostream&gt;using namespace std;//æŠ½è±¡CPUç±»class CPU&#123;public: //æŠ½è±¡çš„è®¡ç®—å‡½æ•° virtual void calculate() = 0;&#125;;//æŠ½è±¡æ˜¾å¡ç±»class VideoCard&#123;public: //æŠ½è±¡çš„æ˜¾ç¤ºå‡½æ•° virtual void display() = 0;&#125;;//æŠ½è±¡å†…å­˜æ¡ç±»class Memory&#123;public: //æŠ½è±¡çš„å­˜å‚¨å‡½æ•° virtual void storage() = 0;&#125;;//ç”µè„‘ç±»class Computer&#123;public: Computer(CPU * cpu, VideoCard * vc, Memory * mem) &#123; m_cpu = cpu; m_vc = vc; m_mem = mem; &#125; //æä¾›å·¥ä½œçš„å‡½æ•° void work() &#123; //è®©é›¶ä»¶å·¥ä½œèµ·æ¥ï¼Œè°ƒç”¨æ¥å£ m_cpu-&gt;calculate(); m_vc-&gt;display(); m_mem-&gt;storage(); &#125; //æä¾›ææ„å‡½æ•° é‡Šæ”¾3ä¸ªç”µè„‘é›¶ä»¶ ~Computer() &#123; //é‡Šæ”¾CPUé›¶ä»¶ if (m_cpu != NULL) &#123; delete m_cpu; m_cpu = NULL; &#125; //é‡Šæ”¾æ˜¾å¡é›¶ä»¶ if (m_vc != NULL) &#123; delete m_vc; m_vc = NULL; &#125; //é‡Šæ”¾å†…å­˜æ¡é›¶ä»¶ if (m_mem != NULL) &#123; delete m_mem; m_mem = NULL; &#125; &#125;private: CPU * m_cpu; //CPUçš„é›¶ä»¶æŒ‡é’ˆ VideoCard * m_vc; //æ˜¾å¡é›¶ä»¶æŒ‡é’ˆ Memory * m_mem; //å†…å­˜æ¡é›¶ä»¶æŒ‡é’ˆ&#125;;//å…·ä½“å‚å•†//Intelå‚å•†class IntelCPU :public CPU&#123;public: virtual void calculate() &#123; cout &lt;&lt; &quot;Intelçš„CPUå¼€å§‹è®¡ç®—äº†ï¼&quot; &lt;&lt; endl; &#125;&#125;;class IntelVideoCard :public VideoCard&#123;public: virtual void display() &#123; cout &lt;&lt; &quot;Intelçš„æ˜¾å¡å¼€å§‹æ˜¾ç¤ºäº†ï¼&quot; &lt;&lt; endl; &#125;&#125;;class IntelMemory :public Memory&#123;public: virtual void storage() &#123; cout &lt;&lt; &quot;Intelçš„å†…å­˜æ¡å¼€å§‹å­˜å‚¨äº†ï¼&quot; &lt;&lt; endl; &#125;&#125;;//Lenovoå‚å•†class LenovoCPU :public CPU&#123;public: virtual void calculate() &#123; cout &lt;&lt; &quot;Lenovoçš„CPUå¼€å§‹è®¡ç®—äº†ï¼&quot; &lt;&lt; endl; &#125;&#125;;class LenovoVideoCard :public VideoCard&#123;public: virtual void display() &#123; cout &lt;&lt; &quot;Lenovoçš„æ˜¾å¡å¼€å§‹æ˜¾ç¤ºäº†ï¼&quot; &lt;&lt; endl; &#125;&#125;;class LenovoMemory :public Memory&#123;public: virtual void storage() &#123; cout &lt;&lt; &quot;Lenovoçš„å†…å­˜æ¡å¼€å§‹å­˜å‚¨äº†ï¼&quot; &lt;&lt; endl; &#125;&#125;;void test01()&#123; //ç¬¬ä¸€å°ç”µè„‘é›¶ä»¶ CPU * intelCpu = new IntelCPU; VideoCard * intelCard = new IntelVideoCard; Memory * intelMem = new IntelMemory; cout &lt;&lt; &quot;ç¬¬ä¸€å°ç”µè„‘å¼€å§‹å·¥ä½œï¼š&quot; &lt;&lt; endl; //åˆ›å»ºç¬¬ä¸€å°ç”µè„‘ Computer * computer1 = new Computer(intelCpu, intelCard, intelMem); computer1-&gt;work(); delete computer1; cout &lt;&lt; &quot;-----------------------&quot; &lt;&lt; endl; cout &lt;&lt; &quot;ç¬¬äºŒå°ç”µè„‘å¼€å§‹å·¥ä½œï¼š&quot; &lt;&lt; endl; //ç¬¬äºŒå°ç”µè„‘ç»„è£… Computer * computer2 = new Computer(new LenovoCPU, new LenovoVideoCard, new LenovoMemory);; computer2-&gt;work(); delete computer2; cout &lt;&lt; &quot;-----------------------&quot; &lt;&lt; endl; cout &lt;&lt; &quot;ç¬¬ä¸‰å°ç”µè„‘å¼€å§‹å·¥ä½œï¼š&quot; &lt;&lt; endl; //ç¬¬ä¸‰å°ç”µè„‘ç»„è£… Computer * computer3 = new Computer(new LenovoCPU, new IntelVideoCard, new LenovoMemory);; computer3-&gt;work(); delete computer3;&#125; 5 æ–‡ä»¶æ“ä½œç¨‹åºè¿è¡Œæ—¶äº§ç”Ÿçš„æ•°æ®éƒ½å±äºä¸´æ—¶æ•°æ®ï¼Œç¨‹åºä¸€æ—¦è¿è¡Œç»“æŸéƒ½ä¼šè¢«é‡Šæ”¾ é€šè¿‡æ–‡ä»¶å¯ä»¥å°†æ•°æ®æŒä¹…åŒ– C++ä¸­å¯¹æ–‡ä»¶æ“ä½œéœ€è¦åŒ…å«å¤´æ–‡ä»¶ &#x3D;&#x3D;&lt; fstream &gt;&#x3D;&#x3D; æ–‡ä»¶ç±»å‹åˆ†ä¸ºä¸¤ç§ï¼š æ–‡æœ¬æ–‡ä»¶ - æ–‡ä»¶ä»¥æ–‡æœ¬çš„ASCIIç å½¢å¼å­˜å‚¨åœ¨è®¡ç®—æœºä¸­ äºŒè¿›åˆ¶æ–‡ä»¶ - æ–‡ä»¶ä»¥æ–‡æœ¬çš„äºŒè¿›åˆ¶å½¢å¼å­˜å‚¨åœ¨è®¡ç®—æœºä¸­ï¼Œç”¨æˆ·ä¸€èˆ¬ä¸èƒ½ç›´æ¥è¯»æ‡‚å®ƒä»¬ æ“ä½œæ–‡ä»¶çš„ä¸‰å¤§ç±»: ofstreamï¼šå†™æ“ä½œ ifstreamï¼š è¯»æ“ä½œ fstream ï¼š è¯»å†™æ“ä½œ 5.1æ–‡æœ¬æ–‡ä»¶5.1.1å†™æ–‡ä»¶ å†™æ–‡ä»¶æ­¥éª¤å¦‚ä¸‹ï¼š åŒ…å«å¤´æ–‡ä»¶ #include &lt;fstream&gt; åˆ›å»ºæµå¯¹è±¡ ofstream ofs; æ‰“å¼€æ–‡ä»¶ ofs.open(â€œæ–‡ä»¶è·¯å¾„â€,æ‰“å¼€æ–¹å¼); å†™æ•°æ® ofs &lt;&lt; â€œå†™å…¥çš„æ•°æ®â€; å…³é—­æ–‡ä»¶ ofs.close(); æ–‡ä»¶æ‰“å¼€æ–¹å¼ï¼š æ‰“å¼€æ–¹å¼ è§£é‡Š ios::in ä¸ºè¯»æ–‡ä»¶è€Œæ‰“å¼€æ–‡ä»¶ ios::out ä¸ºå†™æ–‡ä»¶è€Œæ‰“å¼€æ–‡ä»¶ ios::ate åˆå§‹ä½ç½®ï¼šæ–‡ä»¶å°¾ ios::app è¿½åŠ æ–¹å¼å†™æ–‡ä»¶ ios::trunc å¦‚æœæ–‡ä»¶å­˜åœ¨å…ˆåˆ é™¤ï¼Œå†åˆ›å»º ios::binary äºŒè¿›åˆ¶æ–¹å¼ æ³¨æ„ï¼š æ–‡ä»¶æ‰“å¼€æ–¹å¼å¯ä»¥é…åˆä½¿ç”¨ï¼Œåˆ©ç”¨|æ“ä½œç¬¦ ä¾‹å¦‚ï¼šç”¨äºŒè¿›åˆ¶æ–¹å¼å†™æ–‡ä»¶ ios::binary | ios:: out ç¤ºä¾‹ï¼š 12345678910111213141516171819202122#include &lt;fstream&gt;void test01()&#123; ofstream ofs; ofs.open(&quot;test.txt&quot;, ios::out); ofs &lt;&lt; &quot;å§“åï¼šå¼ ä¸‰&quot; &lt;&lt; endl; ofs &lt;&lt; &quot;æ€§åˆ«ï¼šç”·&quot; &lt;&lt; endl; ofs &lt;&lt; &quot;å¹´é¾„ï¼š18&quot; &lt;&lt; endl; ofs.close();&#125;int main() &#123; test01(); system(&quot;pause&quot;); return 0;&#125; æ€»ç»“ï¼š æ–‡ä»¶æ“ä½œå¿…é¡»åŒ…å«å¤´æ–‡ä»¶ fstream è¯»æ–‡ä»¶å¯ä»¥åˆ©ç”¨ ofstream ï¼Œæˆ–è€…fstreamç±» æ‰“å¼€æ–‡ä»¶æ—¶å€™éœ€è¦æŒ‡å®šæ“ä½œæ–‡ä»¶çš„è·¯å¾„ï¼Œä»¥åŠæ‰“å¼€æ–¹å¼ åˆ©ç”¨&lt;&lt;å¯ä»¥å‘æ–‡ä»¶ä¸­å†™æ•°æ® æ“ä½œå®Œæ¯•ï¼Œè¦å…³é—­æ–‡ä»¶ 5.1.2è¯»æ–‡ä»¶è¯»æ–‡ä»¶ä¸å†™æ–‡ä»¶æ­¥éª¤ç›¸ä¼¼ï¼Œä½†æ˜¯è¯»å–æ–¹å¼ç›¸å¯¹äºæ¯”è¾ƒå¤š è¯»æ–‡ä»¶æ­¥éª¤å¦‚ä¸‹ï¼š åŒ…å«å¤´æ–‡ä»¶ #include &lt;fstream&gt; åˆ›å»ºæµå¯¹è±¡ ifstream ifs; æ‰“å¼€æ–‡ä»¶å¹¶åˆ¤æ–­æ–‡ä»¶æ˜¯å¦æ‰“å¼€æˆåŠŸ ifs.open(â€œæ–‡ä»¶è·¯å¾„â€,æ‰“å¼€æ–¹å¼); è¯»æ•°æ® å››ç§æ–¹å¼è¯»å– å…³é—­æ–‡ä»¶ ifs.close(); ç¤ºä¾‹ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253#include &lt;fstream&gt;#include &lt;string&gt;void test01()&#123; ifstream ifs; ifs.open(&quot;test.txt&quot;, ios::in); if (!ifs.is_open()) &#123; cout &lt;&lt; &quot;æ–‡ä»¶æ‰“å¼€å¤±è´¥&quot; &lt;&lt; endl; return; &#125; //ç¬¬ä¸€ç§æ–¹å¼ //char buf[1024] = &#123; 0 &#125;; //while (ifs &gt;&gt; buf) //&#123; // cout &lt;&lt; buf &lt;&lt; endl; //&#125; //ç¬¬äºŒç§ //char buf[1024] = &#123; 0 &#125;; //while (ifs.getline(buf,sizeof(buf))) //&#123; // cout &lt;&lt; buf &lt;&lt; endl; //&#125; //ç¬¬ä¸‰ç§ //string buf; //while (getline(ifs, buf)) //&#123; // cout &lt;&lt; buf &lt;&lt; endl; //&#125; char c; while ((c = ifs.get()) != EOF) &#123; cout &lt;&lt; c; &#125; ifs.close();&#125;int main() &#123; test01(); system(&quot;pause&quot;); return 0;&#125; æ€»ç»“ï¼š è¯»æ–‡ä»¶å¯ä»¥åˆ©ç”¨ ifstream ï¼Œæˆ–è€…fstreamç±» åˆ©ç”¨is_openå‡½æ•°å¯ä»¥åˆ¤æ–­æ–‡ä»¶æ˜¯å¦æ‰“å¼€æˆåŠŸ close å…³é—­æ–‡ä»¶ 5.2 äºŒè¿›åˆ¶æ–‡ä»¶ä»¥äºŒè¿›åˆ¶çš„æ–¹å¼å¯¹æ–‡ä»¶è¿›è¡Œè¯»å†™æ“ä½œ æ‰“å¼€æ–¹å¼è¦æŒ‡å®šä¸º &#x3D;&#x3D;ios::binary&#x3D;&#x3D; 5.2.1 å†™æ–‡ä»¶äºŒè¿›åˆ¶æ–¹å¼å†™æ–‡ä»¶ä¸»è¦åˆ©ç”¨æµå¯¹è±¡è°ƒç”¨æˆå‘˜å‡½æ•°write å‡½æ•°åŸå‹ ï¼šostream&amp; write(const char * buffer,int len); å‚æ•°è§£é‡Šï¼šå­—ç¬¦æŒ‡é’ˆbufferæŒ‡å‘å†…å­˜ä¸­ä¸€æ®µå­˜å‚¨ç©ºé—´ã€‚lenæ˜¯è¯»å†™çš„å­—èŠ‚æ•° ç¤ºä¾‹ï¼š 1234567891011121314151617181920212223242526272829303132333435363738#include &lt;fstream&gt;#include &lt;string&gt;class Person&#123;public: char m_Name[64]; int m_Age;&#125;;//äºŒè¿›åˆ¶æ–‡ä»¶ å†™æ–‡ä»¶void test01()&#123; //1ã€åŒ…å«å¤´æ–‡ä»¶ //2ã€åˆ›å»ºè¾“å‡ºæµå¯¹è±¡ ofstream ofs(&quot;person.txt&quot;, ios::out | ios::binary); //3ã€æ‰“å¼€æ–‡ä»¶ //ofs.open(&quot;person.txt&quot;, ios::out | ios::binary); Person p = &#123;&quot;å¼ ä¸‰&quot; , 18&#125;; //4ã€å†™æ–‡ä»¶ ofs.write((const char *)&amp;p, sizeof(p)); //5ã€å…³é—­æ–‡ä»¶ ofs.close();&#125;int main() &#123; test01(); system(&quot;pause&quot;); return 0;&#125; æ€»ç»“ï¼š æ–‡ä»¶è¾“å‡ºæµå¯¹è±¡ å¯ä»¥é€šè¿‡writeå‡½æ•°ï¼Œä»¥äºŒè¿›åˆ¶æ–¹å¼å†™æ•°æ® 5.2.2 è¯»æ–‡ä»¶äºŒè¿›åˆ¶æ–¹å¼è¯»æ–‡ä»¶ä¸»è¦åˆ©ç”¨æµå¯¹è±¡è°ƒç”¨æˆå‘˜å‡½æ•°read å‡½æ•°åŸå‹ï¼šistream&amp; read(char *buffer,int len); å‚æ•°è§£é‡Šï¼šå­—ç¬¦æŒ‡é’ˆbufferæŒ‡å‘å†…å­˜ä¸­ä¸€æ®µå­˜å‚¨ç©ºé—´ã€‚lenæ˜¯è¯»å†™çš„å­—èŠ‚æ•° ç¤ºä¾‹ï¼š 1234567891011121314151617181920212223242526272829303132#include &lt;fstream&gt;#include &lt;string&gt;class Person&#123;public: char m_Name[64]; int m_Age;&#125;;void test01()&#123; ifstream ifs(&quot;person.txt&quot;, ios::in | ios::binary); if (!ifs.is_open()) &#123; cout &lt;&lt; &quot;æ–‡ä»¶æ‰“å¼€å¤±è´¥&quot; &lt;&lt; endl; &#125; Person p; ifs.read((char *)&amp;p, sizeof(p)); cout &lt;&lt; &quot;å§“åï¼š &quot; &lt;&lt; p.m_Name &lt;&lt; &quot; å¹´é¾„ï¼š &quot; &lt;&lt; p.m_Age &lt;&lt; endl;&#125;int main() &#123; test01(); system(&quot;pause&quot;); return 0;&#125; æ–‡ä»¶è¾“å…¥æµå¯¹è±¡ å¯ä»¥é€šè¿‡readå‡½æ•°ï¼Œä»¥äºŒè¿›åˆ¶æ–¹å¼è¯»æ•°æ®","link":"","tags":[{"name":"C++","slug":"C","permalink":"https://lyroom.github.io/tags/C/"},{"name":"é¢å‘å¯¹è±¡","slug":"é¢å‘å¯¹è±¡","permalink":"https://lyroom.github.io/tags/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/"},{"name":"ç¼–ç¨‹æŠ€æœ¯","slug":"ç¼–ç¨‹æŠ€æœ¯","permalink":"https://lyroom.github.io/tags/%E7%BC%96%E7%A8%8B%E6%8A%80%E6%9C%AF/"}]},{"title":"shellå°å·¥å…·æ¨èâ€”â€”tldr","date":"2024-10-14T06:27:55.000Z","path":"2024/10/14/shellå°å·¥å…·æ¨èâ€”â€”tldr/","text":"tldrä½¿ç”¨æ•ˆæœä»Šå¤©å¶ç„¶å‘ç°äº†ä¸€ä¸ªå®è—shellå·¥å…·ï¼Œæ¨èlinuxï¼Œmacosç”¨æˆ·ä½¿ç”¨ï¼štldr åœ¨ä½¿ç”¨manæ‰‹å†ŒæŸ¥è¯¢å‘½ä»¤çš„åŠŸèƒ½æ—¶å€™ï¼Œå¾€å¾€ä¼šå‡ºç°ä¸€å¤§å †å‚æ•°ï¼Œå¦‚ä¸‹: 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950$ man lsLS(1) User Commands LS(1)NAME ls - list directory contentsSYNOPSIS ls [OPTION]... [FILE]...DESCRIPTION List information about the FILEs (the current directory by default). Sort entries alphabetically if none of -cftuvSUX nor --sort is speciâ€ fied. Mandatory arguments to long options are mandatory for short options too. -a, --all do not ignore entries starting with . -A, --almost-all do not list implied . and .. --author with -l, print the author of each file -b, --escape print C-style escapes for nongraphic characters --block-size=SIZE with -l, scale sizes by SIZE when printing them; e.g., &#x27;--block-size=M&#x27;; see SIZE format below -B, --ignore-backups do not list implied entries ending with ~ -c with -lt: sort by, and show, ctime (time of last modification of file status information); with -l: show ctime and sort by name; otherwise: sort by ctime, newest first -C list entries by columns --color[=WHEN] colorize the output; WHEN can be &#x27;always&#x27; (default if omitted), &#x27;auto&#x27;, or &#x27;never&#x27;; more info below -d, --directory æˆ‘ä»¬æœ‰æ—¶å€™éœ€è¦å¿«é€Ÿçš„ä½¿ç”¨è¿™ä¸ªå‘½ä»¤ï¼Œè€Œä¸å¸Œæœ›éœ€è¦æŸ¥é˜…è¿™ä¹ˆå¤šçš„èµ„æ–™ï¼Œè¿™æ—¶å€™tldrå·¥å…·å°±æ¥äº†ï¼Œä½¿ç”¨æ•ˆæœå¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031$ tldr lsls åˆ—å‡ºç›®å½•ä¸­çš„å†…å®¹ã€‚ æ›´å¤šä¿¡æ¯ï¼šhttps://www.gnu.org/software/coreutils/ls. - åˆ—å‡ºç›®å½•ä¸­çš„æ–‡ä»¶ï¼Œæ¯ä¸ªæ–‡ä»¶å ä¸€è¡Œï¼š ls -1 - åˆ—å‡ºåŒ…å«éšè—æ–‡ä»¶çš„æ‰€æœ‰æ–‡ä»¶ï¼š ls -a - åˆ—å‡ºæ‰€æœ‰æ–‡ä»¶ï¼Œå¦‚æœæ˜¯ç›®å½•ï¼Œåˆ™åœ¨ç›®å½•ååé¢åŠ ä¸Šã€Œ/ã€ï¼š ls -F - åˆ—å‡ºåŒ…å«éšè—æ–‡ä»¶çš„æ‰€æœ‰æ–‡ä»¶ä¿¡æ¯ï¼ŒåŒ…æ‹¬æƒé™ï¼Œæ‰€æœ‰è€…ï¼Œå¤§å°å’Œä¿®æ”¹æ—¥æœŸï¼š ls -la - åˆ—å‡ºæ‰€æœ‰æ–‡ä»¶ä¿¡æ¯ï¼Œå¤§å°ç”¨äººç±»å¯è¯»çš„å•ä½è¡¨ç¤ºï¼ˆKiB, MiB, GiBï¼‰ï¼š ls -lh - åˆ—å‡ºæ‰€æœ‰æ–‡ä»¶ä¿¡æ¯ï¼ŒæŒ‰å¤§å°é™åºæ’åºï¼š ls -lSR - åˆ—å‡ºæ‰€æœ‰æ–‡ä»¶ä¿¡æ¯ï¼ŒæŒ‰ä¿®æ”¹æ—¥æœŸä»æ—§åˆ°æ–°æ’åºï¼š ls -ltr - åªåˆ—å‡ºç›®å½•ï¼š ls -d */ tldr+å‘½ä»¤å¯ä»¥å¿«é€Ÿä¸”ç®€çŸ­çš„ç»™å‡ºä½¿ç”¨è¯´æ˜ï¼Œå¾ˆèŠ‚çœæ—¶é—´ã€‚ tldrå®‰è£…tldrï¼šå…¨ç§°æ˜¯ï¼štoo longï¼Œdon&#96;t read,å°±æ˜¯ä¸ºäº†ç®€çŸ­çš„æ˜¾ç¤ºå‘½ä»¤çš„ä½¿ç”¨æ–¹å¼ï¼Œä»¥ä¸‹æ˜¯ubuntuä¸‹çš„å®‰è£…æ–¹æ³•ã€‚ sudo apt install tldr ä»¥ä¸Šæ–¹æ³•è¢«èˆå¼ƒçš„åŸå› æ˜¯æ›´æ–°å¤ªéº»çƒ¦äº†ï¼Œtldr --updateç»å¸¸å¡ä½ï¼Œæ‰€ä»¥æˆ‘ä»¬é€‰æ‹©ä¸€ç§æ–°çš„æ–¹æ³•å®‰è£…ã€‚ tealdeerä»£æ›¿node.jså®‰è£…12345# å¸è½½npmå®‰è£…çš„tldrnpm uninstall -g tldr# å®‰è£…tealdeersudo apt updatesudo apt install tealdeer æ‰‹åŠ¨é…ç½®é…ç½®æ–‡ä»¶éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨åˆ›å»ºé…ç½®æ–‡ä»¶ 1234# åˆ›å»ºæ–°çš„ç›®å½•mkdir -p ~/.config/tealdeer# åˆ›å»ºé…ç½®æ–‡ä»¶touch ~/.config/tealdeer/config.toml é…ç½®æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š 12345678910111213141516171819202122# tealdeer é…ç½®æ–‡ä»¶ (~/.config/tealdeer/config.toml)[display]# è®¾ç½®æ˜¾ç¤ºè¯­è¨€ä¸ºä¸­æ–‡language = &quot;zh&quot;# å¯ç”¨å½©è‰²è¾“å‡ºï¼ˆauto = æ ¹æ®ç»ˆç«¯è‡ªåŠ¨åˆ¤æ–­ï¼Œalways = æ€»æ˜¯å½©è‰²ï¼Œnever = ç¦ç”¨å½©è‰²ï¼‰use_color = &quot;auto&quot;# æ˜¯å¦æ˜¾ç¤ºå‘½ä»¤ç¤ºä¾‹å‰çš„æ ‡é¢˜ï¼ˆæ¯”å¦‚ &quot;Examples&quot;ï¼‰show_headers = true# æ˜¯å¦æ˜¾ç¤ºè¶…é“¾æ¥ï¼ˆæœ‰çš„å‘½ä»¤ä¼šå¸¦å‚è€ƒé“¾æ¥ï¼‰hyperlinks = true[updates]# è‡ªåŠ¨æ›´æ–°å¯ç”¨auto_update = true# è‡ªåŠ¨æ›´æ–°çš„æ—¶é—´é—´éš”ï¼ˆå•ä½ï¼šå°æ—¶ï¼‰# è¿™é‡Œè®¾ç½®ä¸º 168 å°æ—¶ = 7 å¤©auto_update_interval_hours = 168 æ±‰åŒ–å‰ææ˜¯ä½ å®‰è£…äº†nodejså’Œnpm,å®‰è£…tldrå®¢æˆ·ç«¯sudo npm install -g tldrè®¾ç½®è¯­è¨€ç¯å¢ƒä¸ºä¸­æ–‡ï¼Œä¿®æ”¹ç³»ç»Ÿå˜é‡ é¦–å…ˆæŸ¥çœ‹ç»ˆç«¯è¯­è¨€ç¯å¢ƒå’Œç³»ç»Ÿé»˜è®¤è¯­è¨€ç¯å¢ƒï¼š 12localeecho $LANG å¦‚æœæ˜¾ç¤ºå¦‚ä¸‹ 12345678910111213141516171819localeLANG=en_US.UTF-8LANGUAGE=en_US.UTF-8LC_CTYPE=&quot;en_US.UTF-8&quot;LC_NUMERIC=&quot;en_US.UTF-8&quot;LC_TIME=&quot;en_US.UTF-8&quot;LC_COLLATE=&quot;en_US.UTF-8&quot;LC_MONETARY=&quot;en_US.UTF-8&quot;LC_MESSAGES=&quot;en_US.UTF-8&quot;LC_PAPER=&quot;en_US.UTF-8&quot;LC_NAME=&quot;en_US.UTF-8&quot;LC_ADDRESS=&quot;en_US.UTF-8&quot;LC_TELEPHONE=&quot;en_US.UTF-8&quot;LC_MEASUREMENT=&quot;en_US.UTF-8&quot;LC_IDENTIFICATION=&quot;en_US.UTF-8&quot;LC_ALL=en_US.UTF-8echo $LANGen_US.UTF-8 åˆ™è¡¨æ˜ç»ˆç«¯è¯­è¨€ç¯å¢ƒï¼ˆLANGï¼‰å’Œç³»ç»Ÿè¯­è¨€ç¯å¢ƒï¼ˆLC_ALLï¼‰å‡ä¸ºè‹±æ–‡ï¼Œæˆ‘ä»¬éœ€è¦ä¿®æ”¹ç»ˆç«¯è¯­è¨€ç¯å¢ƒå¦‚ä¸‹ï¼š 1vim ~/.bashrc åœ¨æ–‡ä»¶æœ«å°¾æ·»åŠ ï¼š 123456export TLDR_LANG=zhexport TLDR_LANGUAGE=zh_Hansexport LANG=zh_CN.UTF-8export TEALDEER_LANGUAGE=zhexport LANGUAGE=zh_CN:zhunset LC_All #ä»…ä»…ä¿®æ”¹ç»ˆç«¯è®©å…¶ä¸ç”Ÿæ•ˆ æœ€åæ›´æ–°ä¸€ä¸‹æ˜¯æ›´æ”¹ç”Ÿæ•ˆï¼š 1source ~/.bashrc æ›´æ–°tldrç¼“å­˜12tldr --updatetldr ls # æŸ¥çœ‹ä¸€ä¸‹æˆæœå§ æ¥ä¸‹æ¥å°±å¯ä»¥æ„‰å¿«ä½¿ç”¨å•¦ï¼","link":"","tags":[{"name":"linux","slug":"linux","permalink":"https://lyroom.github.io/tags/linux/"},{"name":"shell","slug":"shell","permalink":"https://lyroom.github.io/tags/shell/"},{"name":"shellå·¥å…·æ¨è","slug":"shellå·¥å…·æ¨è","permalink":"https://lyroom.github.io/tags/shell%E5%B7%A5%E5%85%B7%E6%8E%A8%E8%8D%90/"}]},{"title":"githubå­¦ä¹ ","date":"2024-10-11T09:05:12.000Z","path":"2024/10/11/githubå­¦ä¹ /","text":"æœ¬æ–‡ä¼šè¾ƒä¸ºè¯¦ç»†çš„å­¦ä¹ githubçš„ä¸€äº›æ“ä½œï¼Œä»¥ä¸‹æ˜¯å…·ä½“çš„æ­¥éª¤ã€‚ å®‰è£…ä¸é…ç½®gitå®‰è£…gitçš„ç¯å¢ƒï¼Œåœ¨è¿™é‡Œæœ‰è¯¦ç»†çš„è§£ç­”,ä¾¿ä¸è¿‡å¤šèµ˜è¿°äº†ã€‚ gitå­¦ä¹ è¿™æ˜¯gitæ“ä½œçš„åŸºæœ¬æµç¨‹ Repository,index,workspaceï¼Œéƒ½å­˜å‚¨åœ¨æœ¬åœ° ä¸€. gitçš„åŸºæœ¬æ“ä½œï¼ˆè¿™éƒ¨åˆ†ç”±masterå®Œæˆï¼‰git init-åˆå§‹åŒ–ä¸€ä¸ªæœ¬åœ°ä»“åº“1$ git init #åˆå§‹åŒ–äº†ä¸€ä¸ªæœ¬åœ°ä»“åº“ï¼Œå»ºç«‹äº†ä¸€ä¸ª.gitæ–‡ä»¶å¤¹ è¿™æ˜¯git initåå½“å‰æ–‡ä»¶å¤¹çš„ç›®å½•ç»“æ„å›¾ï¼Œå°†ä»“åº“ï¼Œæš‚å­˜åŒºå’Œå·¥ä½œæ ‘ï¼ˆé¡¹ç›®æœ¬åœ°ç›®å½•ï¼‰éƒ½ç¡®å®šä¸‹æ¥äº†ã€‚ 12345678910111213141516githublearning â”œâ”€â”€ .git â”‚ â”œâ”€â”€ branches â”‚ â”œâ”€â”€ COMMIT_EDITMSG â”‚ â”œâ”€â”€ config â”‚ â”œâ”€â”€ description â”‚ â”œâ”€â”€ HEAD â”‚ â”œâ”€â”€ hooks â”‚ â”œâ”€â”€ index â”‚ â”œâ”€â”€ info â”‚ â”œâ”€â”€ logs â”‚ â”œâ”€â”€ objects â”‚ â””â”€â”€ refs â”œâ”€â”€ gitå­¦ä¹ .md â”œâ”€â”€ GitHub.webp â””â”€â”€ README.md å·¥ä½œæ ‘ï¼š.gitæ‰€åœ¨çš„ç›®å½•ï¼Œå°±æ˜¯workplaceã€‚æœ¬ä¾‹ä¸­å°±æ˜¯githublearningæ–‡ä»¶å¤¹ï¼Œè¯¥æ–‡ä»¶å¤¹å†…çš„å†…å®¹å°±æ˜¯éœ€è¦ç‰ˆæœ¬æ§åˆ¶çš„æ–‡ä»¶ æš‚å­˜åŒºï¼š.gitä¸‹çš„indexçš„æ–‡ä»¶ ä»“åº“ï¼š.gitæ–‡ä»¶å¤¹å°±æ˜¯ä»“åº“ â€‹ **HEAD**ï¼šè¿™æ˜¯ä¸€ä¸ªæŒ‡å‘å½“å‰æ´»åŠ¨åˆ†æ”¯çš„å¼•ç”¨ï¼Œå®ƒå‘Šè¯‰ Git ä½ å½“å‰å¤„åœ¨å“ªä¸ªåˆ†æ”¯ä¸Šã€‚ â€‹ **config**ï¼šå­˜å‚¨ä»“åº“çº§åˆ«çš„é…ç½®ä¿¡æ¯ï¼Œå¦‚ç”¨æˆ·ä¿¡æ¯ã€è¿œç¨‹ä»“åº“åœ°å€ç­‰ã€‚ â€‹ **refs**ï¼šå­˜å‚¨åˆ†æ”¯ï¼ˆrefs/heads/ï¼‰ã€æ ‡ç­¾ï¼ˆrefs/tags/ï¼‰ç­‰å¼•ç”¨ã€‚æ¯ä¸ªåˆ†æ”¯å’Œæ ‡ç­¾éƒ½æŒ‡å‘ç‰¹å®šçš„æäº¤å¯¹è±¡ã€‚ â€‹ **objects**ï¼šå­˜å‚¨ Git å¯¹è±¡ï¼ˆæäº¤ã€æ ‘ã€æ–‡ä»¶ blobï¼‰çš„æ•°æ®åº“ã€‚Git æ˜¯é€šè¿‡å“ˆå¸Œï¼ˆSHA-1 å€¼ï¼‰æ¥å­˜å‚¨æ¯ä¸ªå¯¹è±¡çš„ï¼Œç¡®ä¿äº†å†…å®¹çš„å”¯ä¸€æ€§å’Œå®Œæ•´æ€§ã€‚ â€‹ **index**ï¼šå³æš‚å­˜åŒºï¼Œç”¨äºå­˜å‚¨é‚£äº›ä½ å·²ç»ç”¨ git add å‘½ä»¤æš‚å­˜çš„æ›´æ”¹ï¼Œå‡†å¤‡æäº¤æ—¶ä»è¿™é‡Œå–æ•°æ®ã€‚ â€‹ **logs**ï¼šä¿å­˜å¼•ç”¨çš„å†å²ï¼Œè®°å½•äº†æ¯ä¸ªåˆ†æ”¯æˆ–å¼•ç”¨çš„å˜æ›´æ—¥å¿—ï¼Œä¾¿äºè¿½è¸ªã€‚ 12345678$ git status #è®°å½•ç€å½“å‰å¤„äºmasterè¿˜æ˜¯branchåˆ†æ”¯ï¼Œæœ‰æ— éœ€è¦commitçš„æ–‡ä»¶ç­‰##ä»¥ä¸‹æ˜¯çŠ¶æ€ä½äºåˆ†æ”¯ masterè¦æäº¤çš„å˜æ›´ï¼š ï¼ˆä½¿ç”¨ &quot;git restore --staged &lt;æ–‡ä»¶&gt;...&quot; ä»¥å–æ¶ˆæš‚å­˜ï¼‰ ä¿®æ”¹ï¼š &quot;git\\345\\255\\246\\344\\271\\240.md&quot; gid add-å‘æš‚å­˜åŒºæ·»åŠ æ–‡ä»¶123git add xxx.cpp #ä¸Šä¼ ä¸€ä¸ªxxx.cppæ–‡ä»¶git add -A #ä¸Šä¼ å½“å‰æ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰æ–‡ä»¶git add . #åŒä¸Š git commit-æäº¤åˆ°æœ¬åœ°ä»“åº“12$ git commit -m â€œæœ¬æ¬¡æäº¤çš„å¤‡æ³¨â€ #ä¸Šä¼ åˆ°masteråˆ†æ”¯ï¼Œå¹¶æ‰“ä¸Šå¤‡æ³¨$ git commit #å¯ä»¥ç›´æ¥commitï¼Œä¹‹åå†è¯¦ç»†ç¼–è¾‘å¤‡æ³¨ git log-æŸ¥çœ‹æäº¤æ—¥å¿—æŸ¥çœ‹å…¨éƒ¨æ—¥å¿— 123456789101112131415161718$ git log##ä»¥ä¸‹æ˜¯æ—¥å¿—å†…å®¹commit b3f611dafea403f51c52a04491a23e1e4e059190 (HEAD -&gt; master)Author: lyroom &lt;codingfish@outlook.com&gt;Date: Sat Oct 12 13:07:04 2024 +0800 è¿™æ˜¯æˆ‘çš„ç¬¬äºŒæ¬¡è¯¦ç»†ä¿®æ”¹ xxxxxxxxxxxxxxxxxxxxxxxxxxxxcommit d1f94f3bb752ad1fc2551cd9ccb06c8eee5a39c8Author: lyroom &lt;codingfish@outlook.com&gt;Date: Sat Oct 12 13:04:45 2024 +0800 ç¬¬ä¸€æ¬¡æäº¤ æŸ¥çœ‹æ—¥å¿—å¸¸ç”¨å¿«æ·é”®ï¼šå’Œmanæ“ä½œï¼Œlessæ“ä½œåŸºæœ¬ä¸€æ ·fï¼šå¾€åç¿»ä¸€é¡µbï¼šå¾€å‰ç¿»ä¸€é¡µ ä¹Ÿå¯ä»¥ç®€çŸ­ä¸€è¡Œçš„è¾“å‡ºæ¯æ¬¡æäº¤çš„ä¿®æ”¹ 12345678910111213141516$ git log --pretty=short##ä»¥ä¸‹æ˜¯æ—¥å¿—å†…å®¹commit b3f611dafea403f51c52a04491a23e1e4e059190 (HEAD -&gt; master)Author: lyroom &lt;codingfish@outlook.com&gt;Date: Sat Oct 12 13:07:04 2024 +0800 è¿™æ˜¯æˆ‘çš„ç¬¬äºŒæ¬¡è¯¦ç»†ä¿®æ”¹commit d1f94f3bb752ad1fc2551cd9ccb06c8eee5a39c8Author: lyroom &lt;codingfish@outlook.com&gt;Date: Sat Oct 12 13:04:45 2024 +0800 ç¬¬ä¸€æ¬¡æäº¤ ä¹Ÿå¯ä»¥æŸ¥çœ‹æ–‡ä»¶å‰åä¿®æ”¹çš„å¯¹æ¯” 123456789101112131415$ git log -p README.md##ä»¥ä¸‹æ˜¯å¯¹æ¯”å†…å®¹Author: lyroom &lt;codingfish@outlook.com&gt;Date: Sat Oct 12 15:33:31 2024 +0800 è¿™æ˜¯ç¬¬ä¸ƒæ¬¡ä¿®æ”¹diff --git a/README.md b/README.mdindex 5f9894b..ffbea86 100644--- a/README.md+++ b/README.md@@ -1 +1,2 @@ ç¬¬å…­æ¬¡ä¿®æ”¹+ç¬¬ä¸ƒæ¬¡ä¿®æ”¹ ä¹Ÿå¯ä»¥ä»¥å›¾å½¢çš„æ–¹å¼æŸ¥çœ‹æäº¤å†å² 1$ git log --graph git diff-æŸ¥çœ‹æ›´æ”¹å‰åçš„åŒºåˆ«git diffå‘½ä»¤å¯ä»¥æŸ¥çœ‹å·¥ä½œæ ‘ã€æš‚å­˜åŒºã€ä»“åº“æœ€æ–°æäº¤ä¹‹é—´çš„å·®åˆ«ã€‚ æŸ¥çœ‹å·¥ä½œæ ‘å’Œæš‚å­˜åŒºçš„åŒºåˆ«1$ git diff vscodeé…åˆgitlensæ’ä»¶å¯ä»¥æ¸…æ¥šçœ‹åˆ°æœ¬åœ°å·¥ä½œç›®å½•ï¼ˆå·¦è¾¹ï¼‰å’Œæš‚å­˜åŒºï¼ˆå³è¾¹ï¼‰çš„åŒºåˆ«ï¼Œçº¢è‰²è¡¨ç¤ºåˆ é™¤ï¼Œç»¿è‰²è¡¨ç¤ºæ–°æ·»åŠ çš„å†…å®¹ å½“ç„¶ä½¿ç”¨git diffå‘½ä»¤ä¹Ÿèƒ½æ˜æ˜¾çš„çœ‹å‡ºåŒºåˆ«ï¼Œå¦‚ä¸‹,+ä»£è¡¨æ·»åŠ æˆ–è€…ä¿®æ”¹ï¼Œ-ä»£è¡¨åˆ é™¤å†…å®¹ï¼šè¿™ä¸¤ç§æ–¹æ³•éƒ½å¯ä»¥çœ‹å‡ºå·¥ä½œæ ‘å’Œæš‚å­˜åŒºçš„åŒºåˆ«å½“æˆ‘git add -Aåï¼Œgit diffå°±æ— ä»»ä½•è¾“å‡ºäº† æŸ¥çœ‹å·¥ä½œæ ‘å’Œæœ¬åœ°ä»“åº“æœ€æ–°æäº¤çš„å·®åˆ«1$ git diff HEAD ç”±äºæœ¬åœ°å·¥ä½œæ ‘å’Œæš‚å­˜åŒºå†…å®¹æ˜¯ä¸€æ ·çš„ï¼Œ è¿™ä¸ªå‘½ä»¤æ¯”è¾ƒçš„å°±æ˜¯ä»“åº“çš„æœ€æ–°æäº¤å’Œå·¥ä½œæ ‘çš„åŒºåˆ«ï¼Œæ¯”è¾ƒçš„ç»“æœå½¢å¼å’Œä¸Šé¢çš„æ¯”è¾ƒæ˜¯ä¸€æ ·çš„ï¼Œå°±ä¸è´´å›¾äº† äºŒ. åˆ†æ”¯æ“ä½œï¼ˆæœ¬éƒ¨åˆ†ç”±åˆ†æ”¯1å®Œæˆï¼‰é€šå¸¸ä¸€ä¸ªå¤§å‹çš„é¡¹ç›®è§†éœ€è¦å¤šäººåˆä½œå®Œæˆçš„ï¼Œæ¯ä¸ªäººè´Ÿè´£ä¸åŒçš„æ¨¡å—å’ŒåŠŸèƒ½ï¼Œè¿™é€šå¸¸æ˜¯å¹¶è¡Œè¿›è¡Œçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦åˆ†æ”¯è¿›è¡Œï¼Œåœ¨å„è‡ªçš„åŠŸèƒ½æ²¡æœ‰å®Œå…¨ä¸Šçº¿ï¼Œå„ä¸ªåˆ†æ”¯å’Œå·²ç»ä¸Šçº¿çš„ç¨‹åºmasteråº”äº’ä¸å¹²æ‰°ï¼åˆ†æ”¯1å®Œæˆåï¼Œéœ€è¦ä¸masteråˆå¹¶ git branch-æ˜¾ç¤ºæ‰€æœ‰çš„åˆ†æ”¯12$ git branch* master å½“å‰åªæœ‰ä¸€ä¸ªmasteråˆ†æ”¯ï¼Œ*æŒ‡å‘äº†masteråˆ†æ”¯ï¼Œè¡¨ç¤ºå½“å‰å¤„äºmasteråˆ†æ”¯ä¸‹ git checkout -b-åˆ›å»ºåˆ‡æ¢åˆ†æ”¯åˆ›å»ºåˆ‡æ¢åˆ†æ”¯1åˆ›å»ºä¸€ä¸ªåå­—ä¸ºåˆ†æ”¯1çš„åˆ†æ”¯ï¼Œå¹¶åˆ‡æ¢åˆ°åˆ†æ”¯1ä¸‹ï¼š 1$ git checkout -b åˆ†æ”¯1 æŸ¥çœ‹ç»“æœï¼š 123$ git branch master* åˆ†æ”¯1 ç­‰ä»·æ“ä½œï¼š 12git branch åˆ†æ”¯1 #åˆ›å»ºä¸€ä¸ªåä¸ºåˆ†æ”¯1çš„åˆ†æ”¯git checkout åˆ†æ”¯1 #åˆ‡æ¢åˆ°åˆ†æ”¯1ä¸‹ æäº¤ä¿®æ”¹ï¼š 12git add -Agit commit -m &quot;åˆ†æ”¯1çš„ç¬¬ä¸€æ¬¡æäº¤&quot; åˆ‡æ¢åˆ°åˆ°masteråˆ†æ”¯1git checkout master #åˆ‡æ¢åˆ°ä¸»åˆ†æ”¯ ç»§ç»­æŸ¥çœ‹å½“å‰æ–‡ä»¶å¤§çº²ï¼Œå‘ç°masteråˆ†æ”¯çš„å¤§çº²å¹¶æ²¡æœ‰åˆ†æ”¯1çš„è¿™éƒ¨åˆ†çš„æ–‡å­—ï¼Œå¦‚ä¸‹å›¾ï¼š è€Œåœ¨åˆ†æ”¯1çš„å¤§çº²æ˜¯è¿™æ ·çš„ï¼š åˆ‡æ¢åˆ°ä¸Šä¸€ä¸ªåˆ†æ”¯1git checkout - åˆ†æ”¯çš„åˆ é™¤1234git branch -d åˆ†æ”¯å$ git branch -d åˆ†æ”¯1å·²åˆ é™¤åˆ†æ”¯ åˆ†æ”¯1ï¼ˆæ›¾ä¸º 6dfa1e7ï¼‰ã€‚ åˆ†æ”¯çš„åˆ†ç±»åœ¨ GitHub æˆ– Git ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿä¸­ï¼Œç‰¹æ€§åˆ†æ”¯ï¼ˆfeature branchï¼‰å’Œä¸»å¹²åˆ†æ”¯ï¼ˆé€šå¸¸æ˜¯ main æˆ– master åˆ†æ”¯ï¼‰æ˜¯ä¸¤ç§å¸¸è§çš„åˆ†æ”¯ç±»å‹ï¼Œå®ƒä»¬ç”¨äºä¸åŒçš„å¼€å‘ç›®çš„ï¼š 1. ä¸»å¹²åˆ†æ”¯ï¼ˆMain&#x2F;Master Branchï¼‰ ä½œç”¨ï¼šä¸»å¹²åˆ†æ”¯æ˜¯é¡¹ç›®çš„ç¨³å®šç‰ˆæœ¬ï¼Œé€šå¸¸åŒ…å«å¯éƒ¨ç½²çš„ä»£ç ã€‚å®ƒæ˜¯å›¢é˜Ÿåä½œæ—¶çš„ä¸»åˆ†æ”¯ï¼Œä»£è¡¨é¡¹ç›®å½“å‰çš„ç”Ÿäº§ç¯å¢ƒä»£ç ã€‚ ç‰¹ç‚¹ï¼š ä»£ç é€šå¸¸æ˜¯ç¨³å®šçš„ã€ç»è¿‡æµ‹è¯•çš„ç‰ˆæœ¬ã€‚ é¡¹ç›®çš„å‘å¸ƒç‰ˆæœ¬å¾€å¾€åŸºäºä¸»å¹²åˆ†æ”¯ã€‚ åªæœ‰å½“ä»£ç ç»è¿‡å……åˆ†æµ‹è¯•ã€ä»£ç å®¡æ ¸é€šè¿‡åï¼Œæ‰ä¼šåˆå¹¶åˆ°ä¸»å¹²åˆ†æ”¯ã€‚ 2. ç‰¹æ€§åˆ†æ”¯ï¼ˆFeature Branchï¼‰ ä½œç”¨ï¼šç‰¹æ€§åˆ†æ”¯ç”¨äºå¼€å‘æŸä¸ªç‰¹å®šçš„åŠŸèƒ½æˆ–ä¿®å¤æŸä¸ª bugã€‚æ¯ä¸ªæ–°åŠŸèƒ½ã€æ”¹è¿›æˆ–é—®é¢˜ä¿®å¤é€šå¸¸ä¼šåˆ›å»ºä¸€ä¸ªå•ç‹¬çš„ç‰¹æ€§åˆ†æ”¯ï¼Œä»¥ä¾¿ä¸ä¸»å¹²åˆ†æ”¯ä¿æŒéš”ç¦»ï¼Œç¡®ä¿ä¸»å¹²åˆ†æ”¯çš„ç¨³å®šæ€§ã€‚ ç‰¹ç‚¹ï¼š æ¯ä¸ªç‰¹æ€§åˆ†æ”¯çš„å‘½åé€šå¸¸ä¸å¼€å‘çš„åŠŸèƒ½ç›¸å…³ï¼Œå¦‚ feature/login-system æˆ– feature/add-profile-pageã€‚ å¼€å‘äººå‘˜å¯ä»¥è‡ªç”±åœ°åœ¨ç‰¹æ€§åˆ†æ”¯ä¸Šè¿›è¡Œå®éªŒï¼Œè€Œä¸ä¼šå½±å“åˆ°å…¶ä»–å¼€å‘è€…çš„å·¥ä½œæˆ–ä¸»å¹²åˆ†æ”¯çš„ç¨³å®šæ€§ã€‚ å¼€å‘å®Œæˆåï¼Œç‰¹æ€§åˆ†æ”¯ä¼šé€šè¿‡ Pull Request è¿›è¡Œä»£ç å®¡æ ¸ï¼Œæµ‹è¯•é€šè¿‡åæ‰åˆå¹¶åˆ°ä¸»å¹²åˆ†æ”¯ã€‚æµç¨‹ï¼š ä»ä¸»å¹²åˆ†æ”¯æ‹‰å–æœ€æ–°ä»£ç ï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„ç‰¹æ€§åˆ†æ”¯ã€‚ åœ¨ç‰¹æ€§åˆ†æ”¯ä¸Šå¼€å‘å’Œæµ‹è¯•åŠŸèƒ½ã€‚ å¼€å‘å®Œæˆåï¼Œæäº¤ Pull Request ä»¥è¯·æ±‚å°†ç‰¹æ€§åˆ†æ”¯çš„ä»£ç åˆå¹¶åˆ°ä¸»å¹²åˆ†æ”¯ã€‚ ç»è¿‡ä»£ç å®¡æ ¸å’Œæµ‹è¯•ï¼Œç¡®è®¤æ— é—®é¢˜ååˆå¹¶åˆ°ä¸»å¹²åˆ†æ”¯ã€‚ è¿™ç§åˆ†æ”¯æ¨¡å‹èƒ½å¤Ÿå¸®åŠ©å›¢é˜Ÿå¹¶è¡Œå¼€å‘ä¸åŒåŠŸèƒ½ï¼ŒåŒæ—¶ç¡®ä¿ä¸»å¹²åˆ†æ”¯å§‹ç»ˆä¿æŒåœ¨ä¸€ä¸ªç¨³å®šçš„çŠ¶æ€ã€‚ git merge-åˆ†æ”¯çš„åˆå¹¶åˆå¹¶åˆ†æ”¯åˆ†æ”¯1å·²ç»å®Œæˆäº†å½“å‰çš„åŠŸèƒ½ï¼Œéœ€è¦ä¸masteråˆå¹¶1.åˆ‡æ¢å›ä¸»å¹²åˆ†æ”¯ 1git checkout master 2.åˆå¹¶åˆ†æ”¯ 1git merge --no-ff åˆ†æ”¯1 å†²çªè§£å†³æ¯æ¬¡çš„åˆå¹¶å¹¶éƒ½ä¸æ˜¯ä¸€å¸†é£é¡ºçš„ï¼Œå¦‚æœåˆ†æ”¯ä¿®æ”¹äº†ç›¸åŒçš„æ–‡ä»¶ï¼Œå°±ä¼šäº§ç”Ÿå†²çªï¼Œéœ€è¦æ‰‹åŠ¨è§£å†³å†²çªä»¥ä¸‹æ˜¯åˆå¹¶åçš„æŠ¥é”™ï¼Œæç¤ºæœ‰å†²çªï¼š 123456$ git merge --no-ff åˆ†æ”¯1è‡ªåŠ¨åˆå¹¶ gitå­¦ä¹ .mdå†²çªï¼ˆå†…å®¹ï¼‰ï¼šåˆå¹¶å†²çªäº gitå­¦ä¹ .mdè‡ªåŠ¨åˆå¹¶å¤±è´¥ï¼Œä¿®æ­£å†²çªç„¶åæäº¤ä¿®æ­£çš„ç»“æœã€‚ è§£å†³åŠæ³•ï¼š 1.æŸ¥çœ‹åˆå¹¶çš„çŠ¶æ€ï¼Œæ‰¾åˆ°å†²çªçš„æ–‡ä»¶12345678910111213141516git statusä½äºåˆ†æ”¯ masteræ‚¨çš„åˆ†æ”¯é¢†å…ˆ &#x27;origin/master&#x27; å…± 20 ä¸ªæäº¤ã€‚ ï¼ˆä½¿ç”¨ &quot;git push&quot; æ¥å‘å¸ƒæ‚¨çš„æœ¬åœ°æäº¤ï¼‰æ‚¨æœ‰å°šæœªåˆå¹¶çš„è·¯å¾„ã€‚ ï¼ˆè§£å†³å†²çªå¹¶è¿è¡Œ &quot;git commit&quot;ï¼‰ ï¼ˆä½¿ç”¨ &quot;git merge --abort&quot; ç»ˆæ­¢åˆå¹¶ï¼‰æœªåˆå¹¶çš„è·¯å¾„ï¼š ï¼ˆä½¿ç”¨ &quot;git add &lt;æ–‡ä»¶&gt;...&quot; æ ‡è®°è§£å†³æ–¹æ¡ˆï¼‰ åŒæ–¹ä¿®æ”¹ï¼š README.mdä¿®æ”¹å°šæœªåŠ å…¥æäº¤ï¼ˆä½¿ç”¨ &quot;git add&quot; å’Œ/æˆ– &quot;git commit -a&quot;ï¼‰ 2.æ‰“å¼€å†²çªçš„æ–‡ä»¶ï¼ˆREADME.mdï¼‰ï¼Œè§£å†³å†²çªæ‰“å¼€æ–‡ä»¶ï¼Œä¼šå‘ç°æ–‡ä»¶ä¸­æœ‰ä»¥ä¸‹çš„æ ‡æ³¨ï¼Œå¦‚ä¸‹ï¼š 12345&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEADï¼ˆå½“å‰åˆ†æ”¯çš„å†…å®¹ï¼‰è¿™æ˜¯å½“å‰åˆ†æ”¯çš„å†…å®¹======= # åˆ†å‰²çº¿ï¼Œä¸Šé¢çš„æ˜¯masterå†…å®¹ï¼Œä¸‹é¢æ˜¯åˆ†æ”¯1çš„å†…å®¹è¿™æ˜¯branchä¿®æ”¹çš„çš„å†…å®¹&gt;&gt;&gt;&gt;&gt;&gt;&gt; branchï¼ˆä¼ å…¥åˆå¹¶åˆ†æ”¯çš„å†…å®¹ï¼‰ å¯ä»¥æ‰‹åŠ¨çš„é€‰æ‹©è¦ä¿ç•™çš„å†…å®¹ï¼Œä¿ç•™åï¼Œåˆ é™¤â€™&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEADâ€™ï¼Œâ€™&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D; â€˜ï¼Œâ€™&gt;&gt;&gt;&gt;&gt;&gt;&gt; branchâ€™ï¼Œç­‰æ ‡æ³¨ï¼Œä¿å­˜æ–‡ä»¶å³å¯ã€‚ 3.æäº¤è§£å†³å†²çªåçš„æ–‡ä»¶12git add README.mdgit commit -m &quot;è§£å†³å†²çª&quot; 4.åˆå¹¶å®Œæˆ1git merge åˆ†æ”¯1 git log-ä»¥å›¾è¡¨çš„å½¢å¼æŸ¥çœ‹åˆ†æ”¯å¯ä»¥ä»¥å›¾å½¢çš„æ–¹å¼æŸ¥çœ‹åˆ†æ”¯çš„åˆå¹¶æƒ…å†µï¼Œå¹¶ä¸”çœ‹åˆ°åˆ†æ”¯çš„æäº¤è®°å½• 1234567891011121314151617181920212223242526272829303132333435363738git log --graph* commit 307375175df620d5a6e9e913a0c92a61c5af91a7 (HEAD -&gt; master)|\\ Merge: 788c7a9 c4687fb| | Author: lyroom &lt;codingfish@outlook.com&gt;| | Date: Tue Oct 15 09:32:29 2024 +0800| | | | Merge branch &#x27;åˆ†æ”¯1&#x27;| | | * commit c4687fbd37f633b82b74ad6048daf356610b4c03 (åˆ†æ”¯1)| | Author: lyroom &lt;codingfish@outlook.com&gt;| | Date: Tue Oct 15 09:31:23 2024 +0800| | | | è¿™æ˜¯åˆ†æ”¯ä¸€çš„ç¬¬äº”æ¬¡ä¿®æ”¹| | * | commit 788c7a90543f684b062e3b514db4adcbdd52cf99| | Author: lyroom &lt;codingfish@outlook.com&gt;| | Date: Tue Oct 15 09:27:33 2024 +0800| | | | master mergeåçš„ç¬¬ä¸€æ¬¡æäº¤| | * | commit c9cc7dcb6d5283b0dfd4fc149d067c70940a867f| | Author: lyroom &lt;codingfish@outlook.com&gt;| | Date: Tue Oct 15 09:23:37 2024 +0800| | | | real mergegit add -A!| | * | commit ac08a828e2279d605a40a6a3d674ec78b7cdf949|\\| Merge: 9c20e8d 3aa2344| | Author: lyroom &lt;codingfish@outlook.com&gt;| | Date: Tue Oct 15 09:16:17 2024 +0800| | | | ç¬¬ä¸€æ¬¡åˆå¹¶åçš„æäº¤| | | * commit 3aa23441ddb6cdf4ff390d191b69850395fd2e6c| | Author: lyroom &lt;codingfish@outlook.com&gt;...... ä¸‰. æ›´æ”¹æäº¤çš„æ“ä½œgit reset-å›æº¯å†å²ç‰ˆæœ¬ä¸ºäº†æœ‰åŠ©äºå­¦ä¹ ï¼Œæˆ‘ä»¬å…ˆå›åˆ°åˆ›å»ºåˆ†æ”¯1çš„æ—¶å€™ï¼Œç„¶ååˆ›å»ºä¸€ä¸ªfixâ€”Bçš„ç‰¹æ€§åˆ†æ”¯ å›åˆ°åˆ†æ”¯1åˆ›å»ºå‰1git reset --hard hashå€¼ #è¿™ä¸ªhashå€¼å°±æ˜¯æ¯æ¬¡commitåçš„hashå€¼ å¦‚æœä½ æ²¡æœ‰åšå¥½æ ‡è®°å¯»æ‰¾åˆ›å»ºåˆ†æ”¯å‰çš„hashå€¼çš„æŠ€å·§ï¼šgit log â€“graph ,æ‰¾åˆ°åˆ†å‰å‰çš„ä¸€ä¸ªæäº¤çš„hashå€¼!ï¼Œå¦‚ä¸‹å°±æ˜¯ç¬¬8æ¬¡ä¿®æ”¹çš„hashå€¼ | | Author: lyroom &#x63;&#x6f;&#100;&#105;&#x6e;&#103;&#102;&#105;&#115;&#104;&#x40;&#111;&#x75;&#x74;&#x6c;&#111;&#111;&#x6b;&#46;&#99;&#x6f;&#x6d; | | Date: Mon Oct 14 16:59:48 2024 +0800 | | | | masterçš„ç¬¬10æ¬¡æäº¤ | | * | commit 7362bced26a2648153fac6779e4c5d2067eab42b |&#x2F; Author: lyroom &#x63;&#x6f;&#100;&#x69;&#x6e;&#x67;&#102;&#105;&#x73;&#104;&#x40;&#111;&#x75;&#x74;&#x6c;&#111;&#111;&#x6b;&#46;&#99;&#x6f;&#x6d; | Date: Mon Oct 14 16:57:45 2024 +0800 | | masterä¸‹çš„ç¬¬ä¹æ¬¡ä¿®æ”¹ | * commit 61126b34e2330bad3945c616374df80de7346be1 | Author: lyroom &#x63;&#111;&#100;&#x69;&#x6e;&#103;&#102;&#x69;&#115;&#x68;&#x40;&#x6f;&#x75;&#116;&#x6c;&#111;&#111;&#107;&#x2e;&#x63;&#111;&#x6d; | Date: Mon Oct 14 16:17:33 2024 +0800 | | ç¬¬8æ¬¡ä¿®æ”¹ | * commit ce7d1ccfd971bed9e79a3ececcdb67df97428692 | Author: lyroom &#99;&#x6f;&#100;&#x69;&#x6e;&#103;&#x66;&#105;&#115;&#x68;&#x40;&#111;&#117;&#x74;&#x6c;&#111;&#111;&#107;&#x2e;&#x63;&#111;&#x6d; | Date: Mon Oct 14 16:15:19 2024 +0800 åˆ›å»ºåˆ†æ”¯fix-Bå½“å‰çŠ¶æ€ï¼šfix-Bçš„ä¸‹ä¸€ä¸ªç›®æ ‡ï¼š å›æº¯åˆ°åˆ†æ”¯1åˆå¹¶åçš„çŠ¶æ€git reflog-æŸ¥çœ‹å½“å‰ä»“åº“çš„æ“ä½œæ—¥å¿—ä½¿ç”¨git reflogæŸ¥çœ‹å½“å‰ä»“åº“çš„æ“ä½œæ—¥å¿—ï¼Œæ‰¾åˆ°å›æº¯ä¹‹å‰çš„hashå€¼ 1234567891011$ git reflogd261a61 (HEAD -&gt; åˆ†æ”¯1) HEAD@&#123;0&#125;: commit: æ¥è‡ªåˆ†æ”¯1çš„ä¿®æ”¹65f7981 HEAD@&#123;1&#125;: checkout: moving from fix-B to åˆ†æ”¯1083f020 (fix-B) HEAD@&#123;2&#125;: commit: åˆ›å»ºfix-B61126b3 (master) HEAD@&#123;3&#125;: checkout: moving from master to fix-B61126b3 (master) HEAD@&#123;4&#125;: checkout: moving from åˆ†æ”¯1 to master65f7981 HEAD@&#123;5&#125;: commit: åˆ†æ”¯1çš„ä¿®æ”¹3574200 HEAD@&#123;6&#125;: checkout: moving from master to åˆ†æ”¯161126b3 (master) HEAD@&#123;7&#125;: reset: moving to 61126b34e2330bad3945c616374df80de7346be1f77bdd9 HEAD@&#123;8&#125;: checkout: moving from åˆ†æ”¯1 to master å›æº¯ï¼š 1$ git reset --hard f77bdd9 ç›®å‰çŠ¶æ€å¦‚ä¸‹ï¼šåˆå¹¶fix-Båˆ°master: 1$ git merge --no-ff fix-B æ¶ˆé™¤å†²çªåï¼Œè¾¾åˆ°æœ€ç»ˆçŠ¶æ€ï¼š git commit â€“amend-ä¿®æ”¹æœ€æ–°çš„ä¸€æ¬¡commitä¿¡æ¯æŸ¥çœ‹git log: 123456commit b8c8f1ba295a524f8b85593aa2cde9c233900e61 (HEAD -&gt; master)Merge: ac54cd9 083f020Author: lyroom &lt;codingfish@outlook.com&gt;Date: Tue Oct 15 13:36:28 2024 +0800 masterå’Œfix-Bå†²çªæ¶ˆé™¤ ä¸Šæ¬¡åœ¨æ¶ˆé™¤å†²çªåï¼Œmasteråˆcommitä¸€æ¬¡ï¼Œè¿™æ¬¡æäº¤æœ¬è´¨æ˜¯æ— æ„ä¹‰çš„ï¼Œå› ä¸ºæ²¡æœ‰å†²çªï¼Œå°±ä¸éœ€è¦æäº¤äº†ï¼Œå› æ­¤éœ€è¦ä¿®æ”¹æäº¤å¤‡æ³¨ä¿¡æ¯ï¼š 1$ git commit --amend ä¿®æ”¹æäº¤ä¿¡æ¯ä¸ºï¼šåˆå¹¶masterå’Œfix-Bï¼š 123456commit 9441272bca5d390e54cfd05ba8b6ead3412c72b7 (HEAD -&gt; master)Merge: ac54cd9 083f020Author: lyroom &lt;codingfish@outlook.com&gt;Date: Tue Oct 15 13:36:28 2024 +0800 åˆå¹¶masterå’Œfix-B è¿™æ ·å°±ä¿®æ”¹æˆåŠŸäº†ï¼Œé™¤äº†å¤‡æ³¨ä¸ä¸€æ ·ï¼Œå…¶ä»–ä¿¡æ¯éƒ½ä¸€æ ·ã€‚ git rebase -i-ä¿®æ”¹å†å²æäº¤ä¿¡æ¯å½“æˆ‘ä»¬æäº¤äº†å¤šæ¬¡ï¼Œä½†æ˜¯å‘ç°è¿™äº›æäº¤å·¥ä½œæ ‘çš„å†…å®¹éƒ½ä¸€æ ·ï¼Œæˆ–è€…æ— å…³ç´§è¦çš„å¥½å‡ æ¬¡commitã€‚å¦‚ä¸‹ï¼š 1234567891011121314151617181920$ git logcommit 2979c94b8b6269cfb16c01a730098d6b2ec6ad4a (HEAD -&gt; master)Author: lyroom &lt;codingfish@outlook.com&gt;Date: Tue Oct 15 14:02:40 2024 +0800 åˆæ·»åŠ äº†å‡ ä¸ªç©ºæ ¼,ä¿®æ”¹3æ¬¡commit d81aa63d0f933bf1b0d49cb98a197eb55eb26c55Author: lyroom &lt;codingfish@outlook.com&gt;Date: Tue Oct 15 13:56:44 2024 +0800 åˆ é™¤äº†å‡ ä¸ªå¤šä½™å­—æ¯,ä¿®æ”¹2æ¬¡commit d63d466638457b1923c83d79b908e327e5fe56e7Author: lyroom &lt;codingfish@outlook.com&gt;Date: Tue Oct 15 13:56:03 2024 +0800 åˆ é™¤äº†å‡ ä¸ªç©ºæ ¼,ä¿®æ”¹1æ¬¡ è¿™äº›ä»…ä»…éƒ½æ˜¯äº›å¾®çš„ä¿®æ”¹ï¼Œä½†æ˜¯æäº¤äº†å¤šæ¬¡ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨git rebase -iå‘½ä»¤ï¼Œä¿®æ”¹åˆå¹¶è¿™äº›æäº¤ä¿¡æ¯ã€‚å¦‚ä¸‹ï¼š 1$ git rebase -i HEAD~3 # ä¿®æ”¹æœ€è¿‘3æ¬¡æäº¤ä¿¡æ¯ åˆå¹¶åçš„commitçš„hashå€¼ï¼Œæ—¶é—´å’Œæœ€æ–°çš„ä¸€è‡´ï¼Œä½†æ˜¯æäº¤ä¿¡æ¯å·²ç»ä¿®æ”¹äº† 12345678$ git logcommit 2979c94b8b6269cfb16c01a730098d6b2ec6ad4a (HEAD -&gt; master)Author: lyroom &lt;codingfish@outlook.com&gt;Date: Tue Oct 15 14:02:40 2024 +0800 åˆå¹¶å¤‡æ³¨ä¿¡æ¯ è™½ç„¶â€™git rebase -iâ€™ å’Œ â€˜git commit â€“amendâ€™ éƒ½èƒ½ä¿®æ”¹commitçš„å¤‡æ³¨ä¿¡æ¯ï¼Œä½†æ˜¯â€˜git rebase -iâ€™ å¯ä»¥åˆå¹¶å¤šæ¬¡æäº¤ï¼Œâ€˜git commit â€“amendâ€™ åªèƒ½ä¿®æ”¹æœ€è¿‘ä¸€æ¬¡æäº¤çš„å¤‡æ³¨ä¿¡æ¯ã€‚ å››. æ¨é€è‡³è¿œç¨‹ä»“åº“å‰é¢çš„æ‰€æœ‰æ“ä½œéƒ½æ˜¯åŸºäºæœ¬åœ°çš„æ“ä½œï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬è¦è¿›è¡Œçš„æ˜¯è¿œç¨‹ä»“åº“çš„æ“ä½œã€‚ å½“ç„¶å‰ææ˜¯ä½ éœ€è¦åœ¨githubåˆ›å»ºä¸€ä¸ªä»“åº“ï¼Œå¦‚æœæœ¬åœ°å†™äº†README.mdå°±ä¸è¦å‹¾é€‰åˆ›å»ºREADME.mdæ–‡æ¡£äº† 1. git remote add-æ·»åŠ è¿œç¨‹ä»“åº“12git remote add &lt;è¿œç¨‹åç§°&gt; &lt;è¿œç¨‹ä»“åº“URL&gt; # æ·»åŠ è¿œç¨‹ä»“åº“å‘½ä»¤æ ¼å¼git remote add origin https://github.com/yourusername/your-repo.git # httpsæ–¹å¼æ·»åŠ ä»“åº“ &lt;è¿œç¨‹åç§°&gt;ï¼šä¸ºè¿œç¨‹ä»“åº“æŒ‡å®šçš„åˆ«åï¼Œå¸¸ç”¨çš„æ˜¯ originï¼Œä½†æ‚¨å¯ä»¥æ ¹æ®éœ€è¦è‡ªå®šä¹‰åç§°ã€‚ &lt;è¿œç¨‹ä»“åº“URL&gt;ï¼šè¿œç¨‹ä»“åº“çš„å®é™…åœ°å€ã€‚å®ƒå¯ä»¥æ˜¯ HTTPS æˆ– SSH çš„ URLï¼Œæ ¼å¼å¦‚ä¸‹ï¼š HTTPS: https://github.com/user/repo.git SSH: git@github.com:user/repo.git 12345$ git remote add origin https://github.com/lyroom/githublearning.git #ç”¨æˆ·åï¼šlyroom,ä»“åº“åå­—ï¼šgithublearning$ git remote -v #æŸ¥çœ‹è¿œç¨‹ä»“åº“å’Œurlorigin https://github.com/lyroom/githublearning.git (fetch)origin https://github.com/lyroom/githublearning.git (push) 2.git push-æ¨é€æœ¬åœ°ä»“åº“åˆ°è¿œç¨‹ä»“åº“æ¨é€è‡³è¿œç¨‹ä»“åº“masteråˆ†æ”¯1234567891011121314$ git push -u origin master #æ¨é€æœ¬åœ°ä»“åº“åˆ°è¿œç¨‹ä»“åº“ u:upstreamä¸Šæ¸¸çš„ç¼©å†™ï¼Œ # -u :å°†oringè®¾ç½®ä¸ºä¸Šæ¸¸ä»“åº“æšä¸¾å¯¹è±¡ä¸­: 111, å®Œæˆ.å¯¹è±¡è®¡æ•°ä¸­: 100% (111/111), å®Œæˆ.ä½¿ç”¨ 20 ä¸ªçº¿ç¨‹è¿›è¡Œå‹ç¼©å‹ç¼©å¯¹è±¡ä¸­: 100% (102/102), å®Œæˆ.å†™å…¥å¯¹è±¡ä¸­: 100% (108/108), 1.18 MiB | 28.73 MiB/s, å®Œæˆ.æ€»å…± 108ï¼ˆå·®å¼‚ 51ï¼‰ï¼Œå¤ç”¨ 0ï¼ˆå·®å¼‚ 0ï¼‰ï¼ŒåŒ…å¤ç”¨ 0remote: Resolving deltas: 100% (51/51), done.To https://github.com/lyroom/githublearning.git e362a53..99a3c4e master -&gt; masteråˆ†æ”¯ &#x27;master&#x27; è®¾ç½®ä¸ºè·Ÿè¸ªæ¥è‡ª &#x27;origin&#x27; çš„è¿œç¨‹åˆ†æ”¯ &#x27;master&#x27;ã€‚ æ¨é€è‡³è¿œç¨‹ä»“åº“masterä»¥å¤–åˆ†æ”¯12$ git checkout fix-B #åˆ‡æ¢åˆ°fix-Båˆ†æ”¯$ git push -u origin fix-B #æ¨é€æœ¬åœ°åˆ†æ”¯fix-Båˆ°è¿œç¨‹ä»“åº“ äº”.ä»è¿œç¨‹ä»“åº“è·å–1.git clone-å…‹éš†è¿œç¨‹ä»“åº“åˆ°æœ¬åœ°è·å–è¿œç¨‹ä»“åº“ï¼ˆmasterï¼‰ é¦–å…ˆæˆ‘ä»¬åˆ‡æ¢åˆ°å…¶ä»–ç›®å½•ä¸‹ 12345678910$ git clone https://github.com/lyroom/githublearning.git #å…‹éš†è¿œç¨‹ä»“åº“åˆ°æœ¬åœ°æ­£å…‹éš†åˆ° &#x27;githublearning&#x27;...remote: Enumerating objects: 132, done.remote: Counting objects: 100% (132/132), done.remote: Compressing objects: 100% (62/62), done.remote: Total 132 (delta 58), reused 131 (delta 57), pack-reused 0 (from 0)æ¥æ”¶å¯¹è±¡ä¸­: 100% (132/132), 1.18 MiB | 3.06 MiB/s, å®Œæˆ.å¤„ç† delta ä¸­: 100% (58/58), å®Œæˆ. æ‰§è¡Œå®Œæˆä¹‹åæˆ‘ä»¬é»˜è®¤å¤„äºmasteråˆ†æ”¯ä¸‹ï¼Œå¹¶ä¸”å’Œè¿œç¨‹ä»“åº“master&#x2F;mainåˆ†æ”¯çš„å†…å®¹æ˜¯ä¸€æ ·çš„ 12$ git branch * master è·å–è¿œç¨‹ä»“åº“ï¼ˆémasterï¼‰git branch -a-æŸ¥çœ‹è¿œç¨‹åˆ†æ”¯æˆ‘ä»¬å¯ä»¥ä½¿ç”¨git branch -aæŸ¥çœ‹è¿œç¨‹å’Œæœ¬åœ°çš„åˆ†æ”¯ 12345$ git branch -a* master remotes/origin/HEAD -&gt; origin/master remotes/origin/fix-B remotes/origin/master å¯ä»¥çœ‹åˆ°æœ¬åœ°åªæœ‰masteråˆ†æ”¯ï¼Œè¿œç¨‹æœ‰masterå’Œfix-Båˆ†æ”¯ æ³¨æ„ï¼šæˆ‘ä»¬å·²ç»åˆ‡æ¢äº†æ–‡ä»¶å¤¹(gitlearningâ€”&gt;githublearning)ï¼Œæ‰€ä»¥ä¹‹å‰æœ¬åœ°ä»“åº“åªä¸Šä¼ äº†masterå’Œfix-Båˆ†æ”¯,ä¸è¦å’Œä¹‹å‰çš„ä»“åº“ææ··äº† git checkout -b-å…‹éš†è¿œç¨‹ä»“åº“çš„fix-Båˆ†æ”¯åˆ°æœ¬åœ°12$ git checkout -b fix-B origin/fix-B #å…‹éš†è¿œç¨‹ä»“åº“çš„fix-Båˆ†æ”¯åˆ°æœ¬åœ° #-bï¼šåˆ›å»ºåˆ†æ”¯å¹¶åˆ‡æ¢åˆ°fix-Båˆ†æ”¯ å‘æœ¬åœ°çš„fix-Båˆ†æ”¯æäº¤æ›´æ”¹1$ git commit -am &quot;å‘æœ¬åœ°çš„fix-Bæ·»åŠ äº†å†…å®¹&quot; #å‘æœ¬åœ°çš„fix-Båˆ†æ”¯æäº¤æ›´æ”¹ æ¨é€fix-Båˆ†æ”¯åˆ°è¿œç¨‹ä»“åº“12345678910111213$ git push #æ¨é€æœ¬åœ°çš„fix-Båˆ†æ”¯åˆ°è¿œç¨‹ä»“åº“æšä¸¾å¯¹è±¡ä¸­: 5, å®Œæˆ.å¯¹è±¡è®¡æ•°ä¸­: 100% (5/5), å®Œæˆ.ä½¿ç”¨ 20 ä¸ªçº¿ç¨‹è¿›è¡Œå‹ç¼©å‹ç¼©å¯¹è±¡ä¸­: 100% (3/3), å®Œæˆ.å†™å…¥å¯¹è±¡ä¸­: 100% (3/3), 367 å­—èŠ‚ | 367.00 KiB/s, å®Œæˆ.æ€»å…± 3ï¼ˆå·®å¼‚ 1ï¼‰ï¼Œå¤ç”¨ 0ï¼ˆå·®å¼‚ 0ï¼‰ï¼ŒåŒ…å¤ç”¨ 0remote: Resolving deltas: 100% (1/1), completed with 1 local object.To https://github.com/lyroom/githublearning.git 083f020..bfde7fb fix-B -&gt; fix-B 2.git pull-æ‹‰å–è¿œç¨‹ä»“åº“åˆ°æœ¬åœ°ä»“åº“åˆšåˆšåœ¨githublearningçš„ä»“åº“ä¸­ä¿®æ”¹äº†fix-Båˆ†æ”¯çš„å†…å®¹å¹¶ä¸”ä¸Šä¼ åˆ°äº†githubï¼Œä½†æ˜¯æˆ‘ä»¬gitlearngingä»“åº“ä¸­çš„fix-Båˆ†æ”¯å¹¶æ²¡æœ‰æ›´æ–°ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦æ‹‰å–è¿œç¨‹ä»“åº“çš„fix-Båˆ†æ”¯åˆ°æœ¬åœ°ä»“åº“ æ³¨æ„è¦åˆ‡æ¢åˆ°æœ€å¼€å§‹çš„é¡¹ç›®ç›®å½•(githublearningâ€”&gt;gitlearning) 12$ git checkout fix-B #åˆ‡æ¢åˆ°fix-Båˆ†æ”¯$ git pull origin fix-B #æ‹‰å–è¿œç¨‹ä»“åº“çš„masteråˆ†æ”¯åˆ°æœ¬åœ°ä»“åº“ å‚è€ƒèµ„æ–™GitHub å…¥é—¨ä¸å®è·µæœ¬é¡¹ç›®githubåœ°å€","link":"","tags":[{"name":"github","slug":"github","permalink":"https://lyroom.github.io/tags/github/"},{"name":"git","slug":"git","permalink":"https://lyroom.github.io/tags/git/"}]},{"title":"æ­£åˆ™è¡¨è¾¾å¼å­¦ä¹ ","date":"2024-10-11T05:37:38.000Z","path":"2024/10/11/æ­£åˆ™è¡¨è¾¾å¼å­¦ä¹ /","text":"æ­£åˆ™è¡¨è¾¾å¼è¯­æ³•æœ‰ç‚¹å¤æ‚ï¼Œè€Œä¸”ä¸åŒçš„å·¥å…·ä½¿ç”¨çš„è¯­æ³•è¿˜ä¸å°½ç›¸åŒã€‚ä¸‹é¢æˆ‘ä»¬ä»‹ç»ä¸€äº›å¸¸ç”¨çš„æ­£åˆ™è¡¨è¾¾å¼è¯­æ³•è§„åˆ™ã€‚ åŸºæœ¬å•ä½åŸºæœ¬å•ä½ä¸»è¦åŒ…å«ï¼šå­—ç¬¦ï¼Œè½¬ä¹‰å­—ç¬¦(å¦‚\\nï¼Œ\\d)ï¼Œ.(åŒ¹é…ä»»æ„å­—ç¬¦)ï¼Œé›†åˆï¼ˆå¦‚[abc],[^abc]:é›†åˆ[abc]å–åï¼‰,(ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼) åŸºæœ¬æ“ä½œåŸºæœ¬æ“ä½œçš„å¯¹è±¡æ˜¯åŸºæœ¬å•ä½ï¼Œä¸»è¦åŒ…å«ä¸¤ä¸ªåŸºæœ¬æ“ä½œï¼šè¿æ¥å’Œé‡å¤ è¿æ¥å°†ä¸¤ä¸ªæˆ–å¤šä¸ªå­—ç¬¦æˆ–å­æ¨¡å¼ç›´æ¥æ‹¼æ¥åœ¨ä¸€èµ·è¿›è¡ŒåŒ¹é…ã€‚æ¯ä¸ªå­æ¨¡å¼æŒ‰é¡ºåºä¾æ¬¡åŒ¹é…å­—ç¬¦ä¸²ä¸­çš„ç›¸åº”éƒ¨åˆ†ã€‚ ç®€å•å­—ç¬¦è¿æ¥ æ­£åˆ™è¡¨è¾¾å¼ï¼š&quot;abc&quot;åŒ¹é…ï¼šå­—ç¬¦ä¸²ä¸­çš„ â€œabcâ€ ç‰‡æ®µã€‚ä¾‹å­ï¼š&quot;abc&quot;, â€œ123abc456â€ éƒ½ä¼šåŒ¹é…ï¼›è€Œ â€œabâ€, â€œabcdâ€ ä¸ä¼šå®Œå…¨åŒ¹é…ã€‚ å¸¦æœ‰è½¬ä¹‰å­—ç¬¦çš„è¿æ¥ æ­£åˆ™è¡¨è¾¾å¼ï¼š&quot;\\.txt&quot;è§£é‡Šï¼šâ€.â€œä»£è¡¨åŒ¹é…æ‰€æœ‰çš„å•ä¸ªå­—ç¬¦ï¼Œè€Œâ€\\.â€œè¡¨ç¤ºè½¬ä¹‰å­—ç¬¦ï¼ŒåŒ¹é…æ‰€æœ‰çš„å­—ç¬¦ä¸²åŒ¹é…ï¼šâ€file.txtâ€,â€document.txtâ€ç­‰æ‰€æœ‰çš„ txt æ–‡ä»¶ï¼Œè€Œâ€file.pdfâ€æ— æ³•åŒ¹é… å­—ç¬¦ç±»è¿æ¥ æ­£åˆ™è¡¨è¾¾å¼ï¼š&quot;[A-Z][0-9]&quot;è§£é‡Šï¼šç¬¬ä¸€ä¸ªå­—ç¬¦æ˜¯å¤§å†™å­—æ¯ï¼Œç¬¬äºŒä¸ªå­—ç¬¦æ˜¯æ•°å­—ã€‚åŒ¹é…ï¼šåƒ â€œA1â€, â€œZ9â€ è¿™æ ·çš„å­—ç¬¦ä¸²ã€‚ å¸¦æœ‰é‡è¯çš„è¿æ¥ æ­£åˆ™è¡¨è¾¾å¼ï¼š&quot;a&#123;2&#125;b&#123;3&#125;&quot;è§£é‡Šï¼šè¡¨ç¤ºæœ‰ä¸¤ä¸ª â€œaâ€ å’Œä¸‰ä¸ª â€œbâ€ è¿åœ¨ä¸€èµ·ã€‚åŒ¹é…ï¼šâ€aabbbâ€ã€‚ å¤æ‚å­æ¨¡å¼è¿æ¥ æ­£åˆ™è¡¨è¾¾å¼ï¼š&quot;(\\d&#123;3&#125;)-(\\d&#123;2&#125;)-(\\d&#123;4&#125;)&quot;è§£é‡Šï¼šåŒ¹é…å½¢å¦‚ â€œ123-45-6789â€ çš„å­—ç¬¦ä¸²ï¼Œ\\d è¡¨ç¤ºæ•°å­—ï¼Œ{3} å’Œ {2} æŒ‡å®šæ•°å­—çš„ä¸ªæ•°ã€‚åŒ¹é…ï¼šåƒ â€œ123-45-6789â€ è¿™æ ·çš„å­—ç¬¦ä¸²ã€‚ é‡å¤ç”¨äºåŒ¹é…ä¸€ä¸ªæ¨¡å¼çš„å¤šæ¬¡é‡å¤ï¼Œé€šå¸¸ä½¿ç”¨é‡è¯æ¥æ§åˆ¶é‡å¤çš„æ¬¡æ•°ã€‚ä»¥ä¸‹æ˜¯å¸¸ç”¨çš„é‡å¤æ“ä½œç¬¦å’Œå®ƒä»¬çš„å«ä¹‰ï¼šå¸¸ç”¨é‡è¯ï¼š *ï¼ˆæ˜Ÿå·ï¼‰ï¼šåŒ¹é…å‰é¢çš„æ¨¡å¼ &gt;&#x3D; 0 æ¬¡ã€‚ ä¾‹å­ï¼ša* å¯ä»¥åŒ¹é… â€œaâ€ é‡å¤ 0 æ¬¡æˆ–å¤šæ¬¡ï¼Œå› æ­¤ä¼šåŒ¹é… â€œâ€ï¼ˆç©ºå­—ç¬¦ä¸²ï¼‰ï¼Œâ€aâ€ï¼Œâ€aaâ€ï¼Œâ€aaaâ€ ç­‰ã€‚[abc]*å¯ä»¥åŒ¹é… é›¶ä¸ªæˆ–å¤šä¸ª ç”± å­—æ¯ aã€bã€c ç»„æˆçš„å­—ç¬¦åºåˆ—,å¦‚â€â€ï¼Œâ€aâ€,â€bâ€,â€bacabcâ€ç­‰.*å¯ä»¥åŒ¹é…æ‰€æœ‰çš„å¥å­åŒ…å«ç©ºæ ¼ç­‰å­—ç¬¦ +ï¼ˆåŠ å·ï¼‰ï¼šåŒ¹é…å‰é¢çš„æ¨¡å¼ 1 æ¬¡æˆ–å¤šæ¬¡ã€‚ ä¾‹å­ï¼ša+ åŒ¹é…è‡³å°‘ä¸€ä¸ª â€œaâ€ï¼Œæ‰€ä»¥ä¼šåŒ¹é… â€œaâ€ï¼Œâ€aaâ€ï¼Œâ€aaaâ€ ç­‰ï¼Œä½†ä¸ä¼šåŒ¹é…ç©ºå­—ç¬¦ä¸²ã€‚[abc]+å¯ä»¥åŒ¹é…ä»»æ„é•¿åº¦çš„ç”± abc ç»„æˆçš„å­—ç¬¦ä¸² ?ï¼ˆé—®å·ï¼‰ï¼šåŒ¹é…å‰é¢çš„æ¨¡å¼ 0 æ¬¡æˆ– 1 æ¬¡ã€‚ ä¾‹å­ï¼ša? åŒ¹é…ä¸€ä¸ª â€œaâ€ æˆ–æ²¡æœ‰ â€œaâ€ï¼Œæ‰€ä»¥ä¼šåŒ¹é… â€œâ€ æˆ– â€œaâ€ã€‚[abc]?ä»¥åŒ¹é… é›¶æ¬¡æˆ–ä¸€æ¬¡å‡ºç°çš„ å­—æ¯ aã€b æˆ– cï¼Œå¦‚ï¼šâ€â€,â€aâ€,â€bâ€,â€câ€,æ— æ³•åŒ¹é…â€abâ€ &#123;n&#125;ï¼šåŒ¹é…å‰é¢çš„æ¨¡å¼æ°å¥½ n æ¬¡ã€‚ ä¾‹å­ï¼ša&#123;3&#125; åªä¼šåŒ¹é… â€œaaaâ€ï¼Œå› ä¸ºå®ƒè¦æ±‚ â€œaâ€ æ°å¥½å‡ºç° 3 æ¬¡ã€‚ &#123;n,&#125;ï¼šåŒ¹é…å‰é¢çš„æ¨¡å¼è‡³å°‘ n æ¬¡ã€‚ ä¾‹å­ï¼ša&#123;2,&#125; åŒ¹é… â€œaâ€ è‡³å°‘å‡ºç° 2 æ¬¡çš„æƒ…å†µï¼Œå› æ­¤ä¼šåŒ¹é… â€œaaâ€ï¼Œâ€aaaâ€ï¼Œâ€aaaaâ€ ç­‰ã€‚ &#123;n,m&#125;ï¼šåŒ¹é…å‰é¢çš„æ¨¡å¼è‡³å°‘ n æ¬¡ï¼Œæœ€å¤š m æ¬¡ã€‚ ä¾‹å­ï¼ša&#123;2,4&#125; ä¼šåŒ¹é… â€œaâ€ å‡ºç° 2 æ¬¡åˆ° 4 æ¬¡çš„æƒ…å†µï¼Œå› æ­¤ä¼šåŒ¹é… â€œaaâ€ï¼Œâ€aaaâ€ï¼Œâ€aaaaâ€ã€‚ æŒ‡å®šåŸºæœ¬å•ä½å‡ºç°çš„ä½ç½® ^ï¼šè¡Œé¦–ï¼Œæ¯”å¦‚^1 åŒ¹é…è¡Œé¦–å¿…é¡»ä»¥ 1 å¼€å§‹ $è¡Œå°¾ï¼Œæ¯”å¦‚xyz$åŒ¹é…è¡Œå°¾å¿…é¡»ä»¥ xyz ç»“å°¾ \\&lt;ï¼šè¯é¦–ï¼Œæ¯”å¦‚&lt;f åŒ¹é…è¯é¦–å¿…é¡»ä»¥ f ä¸ºå¼€å¤´ \\&gt;ï¼šè¯å°¾ï¼Œæ¯”å¦‚ xyz&gt; åŒ¹é…è¯å°¾å¿…é¡»ä»¥ xyz ä¸ºç»“å°¾ å®æˆ˜æ¼”ä¹ å°ä¾‹å­ï¼šä¸­å›½ç”µè¯å·ç æ­£åˆ™è¡¨è¾¾å¼è¦æ±‚ï¼š 1.ç¬¬ä¸€ä½å¿…é¡»æ˜¯ 1ï¼› 2.ç¬¬äºŒä½æ˜¯ 3-9 ä¹‹é—´çš„æ•°å­— 3.ä¸€å…± 11 ä½æ•°å­— 1^1[3-9]\\d&#123;9&#125;$ è§£é‡Šï¼š ^ï¼šè¡¨ç¤ºå­—ç¬¦ä¸²çš„å¼€å§‹ï¼Œç¡®ä¿ä»å¼€å¤´åŒ¹é…ã€‚ 1ï¼šä¸­å›½æ‰‹æœºå·ç ä»¥ 1 å¼€å¤´ã€‚ [3-9]ï¼šç¬¬äºŒä½æ•°å­—æ˜¯ 3 åˆ° 9ï¼Œå› ä¸ºä¸­å›½çš„æ‰‹æœºå·ç æ®µé€šå¸¸æ˜¯ 13x, 14x, 15x, 16x, 17x, 18x, 19x ç­‰ç­‰ã€‚ \\d&#123;9&#125;ï¼šè¡¨ç¤ºæ¥ä¸‹æ¥æœ‰ 9 ä½æ•°å­—ï¼Œ\\d è¡¨ç¤ºæ•°å­—ï¼Œ{9} è¡¨ç¤ºæ°å¥½ 9 ä½ã€‚ $ï¼šè¡¨ç¤ºå­—ç¬¦ä¸²çš„ç»“å°¾ï¼Œç¡®ä¿æ•´ä¸ªå­—ç¬¦ä¸²æ˜¯å®Œæ•´çš„ 11 ä½å·ç ã€‚ èº«ä»½è¯å·ç æ­£åˆ™è¡¨è¾¾å¼è¦æ±‚ï¼š 1.ä¸€å…± 18 ä½ 2.å‰ 6 ä½æ˜¯åœ°åŒºç  3.ä¸­é—´ 8 ä½æ˜¯å‡ºç”Ÿå¹´æœˆæ—¥ 4.æœ€å 3 ä½æ˜¯çº¯æ•°å­— 5.æœ€åä¸€ä½å¯ä»¥æ˜¯æ•°å­—ä¹Ÿå¯ä»¥æ˜¯å­—æ¯ X 1^\\d&#123;6&#125;(18|19|20)\\d&#123;2&#125;(0[1-9]|1[0-2](0[1-9]|[12]\\d|3[01])\\d&#123;3&#125;(\\d|x)$ è§£é‡Šï¼š ^ï¼šè¡¨ç¤ºå­—ç¬¦ä¸²çš„å¼€å§‹ï¼Œç¡®ä¿ä»å¼€å¤´åŒ¹é…ã€‚ \\d&#123;6&#125;ï¼šå‰ 6 ä½æ˜¯åœ°åŒºç ï¼Œç”± 6 ä½æ•°å­—ç»„æˆã€‚ (18|19|20)ï¼šæ¥ä¸‹æ¥çš„ 2 ä½æ˜¯å¹´ä»½çš„å‰ä¸¤ä½ï¼ŒåŒ¹é… 18ã€19 æˆ– 20ï¼ˆå³ 1800 å¹´ä»£ã€1900 å¹´ä»£æˆ– 2000 å¹´ä»£ï¼‰ã€‚ \\d&#123;2&#125;ï¼šåŒ¹é…å¹´ä»½çš„åä¸¤ä½æ•°å­—ï¼Œç»„æˆ 4 ä½å¹´ä»½ï¼ˆå¦‚ 1980ã€2002 ç­‰ï¼‰ã€‚ (0[1-9]|1[0-2])ï¼šåŒ¹é…æœˆä»½ï¼Œ01 åˆ° 09 è¡¨ç¤º 1 æœˆåˆ° 9 æœˆï¼Œ10 åˆ° 12 è¡¨ç¤º 10 æœˆåˆ° 12 æœˆã€‚ (0[1-9]|[12]\\d|3[01])ï¼šåŒ¹é…æ—¥æœŸï¼Œ01 åˆ° 09 è¡¨ç¤º 1 æ—¥åˆ° 9 æ—¥ï¼Œ10 åˆ° 29 è¡¨ç¤º 10 æ—¥åˆ° 29 æ—¥ï¼Œ30 å’Œ 31 è¡¨ç¤º 30 æ—¥å’Œ 31 æ—¥ã€‚ \\d&#123;3&#125;ï¼šåŒ¹é…é¡ºåºç ï¼Œç”± 3 ä½æ•°å­—ç»„æˆã€‚ (\\d|X)ï¼šæœ€åä¸€ä½æ˜¯æ ¡éªŒç ï¼Œå¯èƒ½æ˜¯æ•°å­—æˆ–å­—æ¯ Xã€‚ $ï¼šè¡¨ç¤ºå­—ç¬¦ä¸²çš„ç»“å°¾ï¼Œç¡®ä¿æ•´ä¸ªå­—ç¬¦ä¸²æ˜¯å®Œæ•´çš„ 18 ä½å·ç ã€‚ åŒ¹é…å­—ç¬¦ä¸²è¦æ±‚ï¼š 1.åŒ¹é…å•è¯ 2.å¼€å¤´ä»¥ f 3.ç»“å°¾ä¸º t 123\\&lt;f[a-z]*t\\&gt; #ä»…ä»…æ˜¯å•è¯æˆ–è€…\\&lt;f[^ \\t]*t\\&gt;#å­—ç¬¦æ•°å­—éƒ½å¯ä»¥ è§£é‡Šï¼š \\&lt;ï¼šè¡¨ç¤ºå•è¯çš„å¼€å§‹è¾¹ç•Œï¼ˆè¿™åœ¨ä¸€äº›æ­£åˆ™è¡¨è¾¾å¼å¼•æ“ä¸­æœ‰æ•ˆï¼Œå¦‚ GNU grepã€sed ç­‰ï¼‰ã€‚è¡¨ç¤ºåŒ¹é…ä¸€ä¸ªå•è¯çš„èµ·å§‹ä½ç½®ï¼Œç¡®ä¿åŒ¹é…çš„æ˜¯ç‹¬ç«‹çš„å•è¯ï¼Œè€Œä¸æ˜¯å…¶ä»–è¯ä¸­çš„ä¸€éƒ¨åˆ†ã€‚ fï¼šå­—æ¯ fï¼ŒåŒ¹é…å•è¯çš„ç¬¬ä¸€ä¸ªå­—æ¯ã€‚ [^ \\t]*ï¼š [^ \\t]ï¼šå­—ç¬¦ç±»å–åï¼Œè¡¨ç¤ºä¸èƒ½åŒ…å«ç©ºæ ¼ï¼ˆ ï¼‰æˆ–åˆ¶è¡¨ç¬¦ï¼ˆ\\tï¼‰ã€‚ *ï¼šé‡è¯ï¼Œè¡¨ç¤ºå‰é¢çš„æ¨¡å¼å¯ä»¥é‡å¤ 0 æ¬¡æˆ–å¤šæ¬¡ï¼Œå³å…è®¸åç»­ä»»æ„å¤šä¸ªéç©ºæ ¼æˆ–éåˆ¶è¡¨ç¬¦çš„å­—ç¬¦ã€‚ tï¼šå­—æ¯tï¼ŒåŒ¹é…å•è¯çš„æœ€åä¸€ä¸ªå­—æ¯ \\&gt;ï¼šè¡¨ç¤ºå•è¯çš„ç»“æŸè¾¹ç•Œï¼Œç¡®ä¿åŒ¹é…çš„ç»“æŸå¤„æ˜¯ä¸€ä¸ªå®Œæ•´çš„å•è¯ã€‚","link":"","tags":[{"name":"æ­£åˆ™è¡¨è¾¾å¼","slug":"æ­£åˆ™è¡¨è¾¾å¼","permalink":"https://lyroom.github.io/tags/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/"}]},{"title":"githubæŠ½é£","date":"2024-09-13T03:51:12.000Z","path":"2024/09/13/githubæŠ½é£/","text":"ç«¯å£ 22 æ— æ³•è®¿é—®ä»Šå¤©çªç„¶å‘ç° github å¯ä»¥è®¿é—®ï¼Œä½†æ˜¯å…‹éš†ä¸äº†é¡¹ç›®ï¼Œé—®é¢˜å¦‚ä½•ä¸‹ï¼š è¸©å‘ ä¿®æ”¹ hosts æ–‡ä»¶ å¼€å¯ clash verge ä»£ç† ä¿®æ”¹ dnsä»¥ä¸Šä¸‰ç§æ–¹æ³•å‡å¤±è´¥ è§£å†³åŠæ³•å…ˆç”¨ 443 ç«¯å£ ssh è®¿é—®è¯•è¯•ï¼š 1ssh -T -p 443 git@ssh.github.com å¦‚æœå¯ä»¥è®¿é—®åˆ™ä¿®æ”¹é…ç½®æ–‡ä»¶ å®Œæˆï¼","link":"","tags":[{"name":"bug","slug":"bug","permalink":"https://lyroom.github.io/tags/bug/"},{"name":"github","slug":"github","permalink":"https://lyroom.github.io/tags/github/"},{"name":"clashverge","slug":"clashverge","permalink":"https://lyroom.github.io/tags/clashverge/"}]},{"title":"linuxæ–‡ä»¶å­ç³»ç»Ÿ","date":"2024-09-13T01:18:02.000Z","path":"2024/09/13/linuxæ–‡ä»¶å­ç³»ç»Ÿ/","text":"ğŸ§linuxä¸‹å¸¸è§çš„å‘½ä»¤linuxä¸‹å¸¸è§çš„ç›®å½•æ¦‚è§ˆä¸åŒäº windowsï¼Œåœ¨ä¸€åˆ‡èµ„æºä¸ºæ–‡ä»¶çš„ linux ç³»ç»Ÿä¸­ï¼Œæ˜¯ä»¥æ ‘ç»“æ„æ¥ç®¡ç†æ–‡ä»¶ç³»ç»Ÿï¼Œæ ¹èŠ‚ç‚¹è¢«ç§°ä¸ºæ ¹ç›®å½•ï¼Œç”¨â€œ&#x2F;â€è¡¨ç¤º å¸¸è§ç›®å½•åŠåŠŸèƒ½ &#x2F;sys ç›®å½•è¯¦è§£ åå‘ç¡¬ä»¶å’Œåº•å±‚ï¼Œä¸“é—¨ç”¨äºæä¾›ä¸å†…æ ¸å’Œç¡¬ä»¶è®¾å¤‡çš„äº¤äº’ï¼Œæä¾›äº†å†…æ ¸å¯¹è±¡åŠå…¶å±æ€§çš„å¯è§†åŒ–ç•Œé¢ï¼Œé€šå¸¸ç”¨äºç›‘æ§å’Œç®¡ç†ç¡¬ä»¶è®¾å¤‡ã€‚ ä¾‹å¦‚æŸ¥çœ‹ cpu çš„æ ¸å¿ƒçº¿ç¨‹æ•°é‡ï¼ˆ13600kfï¼š6 å¤§æ ¸ï¼Œ4 å°æ ¸ï¼Œ20 çº¿ç¨‹ï¼‰å¯ä»¥è®¿é—®ï¼š 1cd /sys/devices/system/cpu å¯ä»¥çœ‹åˆ°ä»¥ä¸‹ä¿¡æ¯ï¼š &#x2F;proc ç›®å½•è¯¦è§£é¢å‘è¿›ç¨‹&#x2F;è¿è¡Œæ—¶ç»Ÿè®¡ä¿¡æ¯ &#x2F;bin ç›®å½•è¯¦è§£ linuxæ–‡ä»¶ç³»ç»Ÿä¸­æœ‰å¾ˆå¤šä¸ªbinç›®å½•ï¼Œå¦‚ä¸Šå›¾ï¼Œä»–ä»¬é€šå¸¸èµ·ç€ä¸åŒçš„ä½œç”¨ï¼š usr:å¹¶ä¸æ˜¯ user çš„ç¼©å†™ï¼Œè€Œæ˜¯ Unix System Resources ,ä»£è¡¨ Unix ç³»ç»Ÿèµ„æº ç›®å½• å«ä¹‰ åŒ…å« &#x2F;binï¼ˆbinaryï¼‰ å­˜æ”¾æ ¸å¿ƒ OS ç¨‹åºå’Œè„šæœ¬æ–‡ä»¶ï¼Œä¸€èˆ¬æ˜¯ç³»ç»Ÿé¢„è£…çš„ç¨‹åº cat,bash,ls,pwd ç­‰ &#x2F;user&#x2F;bin å­˜æ”¾ç”¨æˆ·ç¨‹åºçš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œä¸æ˜¯ç³»ç»Ÿè‡ªå¸¦çš„ç¨‹åºï¼Œç”¨æˆ·è‡ªå·±å®‰è£…çš„å‘è¡Œç‰ˆç¨‹åº gcc,g++,git ç­‰ &#x2F;user&#x2F;local&#x2F;bin å­˜æ”¾ç”¨æˆ·è‡ªå·±çš„å¯æ‰§è¡Œç¨‹åºï¼Œä¸ä¼šè¢«ç³»ç»Ÿå‡çº§è€Œè¦†ç›–åŒåæ–‡ä»¶ï¼Œä¾‹å¦‚ gcc ä¹‹åçš„æ–‡ä»¶ã€‚ &#x2F;sbin å­˜æ”¾ root ç”¨æˆ·æˆ–è€…ä½¿ç”¨ sudo æƒé™çš„ç”¨æˆ·æ‰èƒ½è®¿é—®çš„ç¨‹åºæˆ–è€…å‘½ä»¤ ifconfig,shutdown,mount ç­‰ å­˜æ”¾äº bin ç›®å½•ä¸‹çš„ç¨‹åºæˆ–è€…è„šæœ¬æ˜¯å¯ä»¥ç›´æ¥æ‰§è¡Œçš„ï¼Œæ‰§è¡Œçš„é¡ºåºå–å†³äºç¯å¢ƒå˜é‡ä¸­å„ä¸ªæ–‡ä»¶å¤¹çš„å‰åé¡ºåºï¼ æ ¹æ®ç¯å¢ƒå˜é‡å¯çŸ¥.å¦‚æœè¿™å‡ ä¸ª bin ç›®å½•ä¸­æœ‰åŒä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ï¼Œä»–ä»¬çš„æ‰§è¡Œé¡ºåºä¼šæ˜¯ï¼š**&#x2F;usr&#x2F;local&#x2F;bin &gt; &#x2F;sbin &gt; &#x2F;bin** &#x2F;etc ç›®å½•è¯¦è§£å­˜å‚¨ç³»ç»Ÿé…ç½®æ–‡ä»¶å’Œå…¨å±€é…ç½®æ–‡ä»¶ ç³»ç»Ÿé…ç½®æ–‡ä»¶ï¼špasswd æ–‡ä»¶å‚¨å­˜ç”¨æˆ·å¯†ç ï¼Œgroup æ–‡ä»¶å­˜å‚¨ç”¨æˆ·è‡ªå®šä¹‰ç»„ä¿¡æ¯ï¼Œhosts å®šä¹‰æœ¬åœ°ä¸»æœºåå­—å’Œ IP åœ°å€çš„æ˜ å°„ï¼Œssh å­˜å‚¨ä¸ ssh æœåŠ¡ç›¸å…³é…ç½®æ–‡ä»¶ç­‰ å…¨å±€é…ç½®æ–‡ä»¶ï¼š.bashrc æ–‡ä»¶å­˜å‚¨å…¨ç³»ç»Ÿçš„ bash é…ç½®ç­‰ &#x2F;run ç›®å½•è¯¦è§£ run ç›®å½•åœ¨ Linux ç³»ç»Ÿä¸­é€šå¸¸ä½äºæ ¹ç›®å½•ä¸‹ (/run)ã€‚è¿™ä¸ªç›®å½•ä¸»è¦ç”¨äºå­˜å‚¨ç³»ç»Ÿå’Œè¿›ç¨‹çš„è¿è¡Œæ—¶æ•°æ®ï¼Œä¾‹å¦‚ PID æ–‡ä»¶ã€å¥—æ¥å­—æ–‡ä»¶ã€é”æ–‡ä»¶ç­‰ã€‚ ä¸€äº› run ç›®å½•çš„ç‰¹ç‚¹ï¼š ä¸´æ—¶æ–‡ä»¶ç³»ç»Ÿ (tmpfs)ï¼š /run é€šå¸¸æŒ‚è½½ä¸º tmpfsï¼Œè¿™æ„å‘³ç€å®ƒåœ¨ç³»ç»Ÿå¯åŠ¨æ—¶åˆ›å»ºï¼Œå¹¶åœ¨ç³»ç»Ÿå…³é—­æˆ–é‡å¯åæ¸…ç©ºã€‚ æ—©æœŸå¯åŠ¨ï¼š ç”±äº /run æ˜¯åœ¨ç³»ç»Ÿæ—©æœŸå¯åŠ¨æ—¶åˆ›å»ºçš„ï¼Œæ‰€ä»¥å®ƒå¯ä»¥ç”¨äºå­˜å‚¨éœ€è¦åœ¨å…¶ä»–æ–‡ä»¶ç³»ç»ŸæŒ‚è½½ä¹‹å‰å¯ç”¨çš„ä¸´æ—¶æ–‡ä»¶ã€‚ æƒé™å’Œæ‰€æœ‰æƒï¼š åªæœ‰ root ç”¨æˆ·å’Œç‰¹å®šæœåŠ¡æˆ–è¿›ç¨‹å¯ä»¥åœ¨ /run ç›®å½•ä¸­åˆ›å»ºæ–‡ä»¶ã€‚ å¸¸è§çš„å­ç›®å½•å’Œæ–‡ä»¶ï¼š /run/lock/ï¼šé”æ–‡ä»¶ç›®å½•ï¼Œè¿›ç¨‹ç”¨æ¥é¿å…å¤šä¸ªå®ä¾‹åŒæ—¶è¿è¡Œã€‚ /run/user/ï¼šæ¯ä¸ªç”¨æˆ·æœ‰è‡ªå·±çš„è¿è¡Œæ—¶ç›®å½•ï¼Œç”¨äºç”¨æˆ·è¿›ç¨‹çš„ä¸´æ—¶æ–‡ä»¶ã€‚ /run/systemd/ï¼šSystemd ä½¿ç”¨çš„ä¸€äº›è¿è¡Œæ—¶æ•°æ®ã€‚ &#x2F;home ç›®å½•è¯¦è§£åœ¨ Linux ç³»ç»Ÿä¸­ï¼Œ/home ç›®å½•æ˜¯ç”¨æˆ·çš„ä¸»ç›®å½•ï¼Œå­˜æ”¾æ¯ä¸ªç”¨æˆ·çš„ä¸ªäººæ•°æ®å’Œé…ç½®æ–‡ä»¶ã€‚æ¯ä¸ªç”¨æˆ·é€šå¸¸åœ¨ /home ç›®å½•ä¸‹æœ‰ä¸€ä¸ªç‹¬ç«‹çš„å­ç›®å½•ï¼Œè¿™ä¸ªå­ç›®å½•ä»¥è¯¥ç”¨æˆ·çš„ç”¨æˆ·åå‘½åã€‚ ä¸€äº›ç‰¹ç‚¹å’Œç”¨é€”ï¼š ç”¨æˆ·æ•°æ®å­˜å‚¨ï¼šç”¨æˆ·çš„ä¸ªäººæ–‡ä»¶ã€æ–‡æ¡£ã€ä¸‹è½½ã€å›¾ç‰‡ã€éŸ³ä¹ç­‰é€šå¸¸å­˜å‚¨åœ¨ä»–ä»¬çš„ä¸»ç›®å½•ä¸‹ï¼ˆä¾‹å¦‚ /home/usernameï¼‰ã€‚ é…ç½®æ–‡ä»¶ï¼šç”¨æˆ·é…ç½®æ–‡ä»¶ï¼ˆå¦‚æ¡Œé¢ç¯å¢ƒã€åº”ç”¨ç¨‹åºçš„è®¾ç½®ï¼‰é€šå¸¸ä¿å­˜åœ¨ä¸»ç›®å½•ä¸­çš„éšè—æ–‡ä»¶å¤¹æˆ–æ–‡ä»¶ä¸­ã€‚è¿™äº›æ–‡ä»¶å¤¹å’Œæ–‡ä»¶çš„åç§°ä»¥ . å¼€å¤´ï¼Œä¾‹å¦‚ .bashrcã€.config ç­‰ã€‚ æƒé™ï¼šæ¯ä¸ªç”¨æˆ·é€šå¸¸åªå¯¹è‡ªå·±çš„ /home/username ç›®å½•æœ‰å®Œå…¨çš„è¯»å†™æƒé™ï¼Œè€Œå¯¹å…¶ä»–ç”¨æˆ·çš„ä¸»ç›®å½•æ²¡æœ‰æƒé™ï¼Œé™¤éæ˜¯ç³»ç»Ÿç®¡ç†å‘˜ï¼ˆrootï¼‰ç”¨æˆ·ã€‚ åˆ†åŒºï¼šæœ‰äº›ç³»ç»Ÿç®¡ç†å‘˜åœ¨å®‰è£…æ“ä½œç³»ç»Ÿæ—¶ä¼šå°† /home åˆ†ä¸ºä¸€ä¸ªå•ç‹¬çš„åˆ†åŒºï¼Œè¿™æ ·åœ¨ç³»ç»Ÿé‡è£…æ—¶å¯ä»¥ä¿ç•™ç”¨æˆ·çš„æ•°æ®ã€‚ ä½ å¯ä»¥é€šè¿‡ cd ~ æˆ– cd /home/username æ¥åˆ‡æ¢åˆ°å½“å‰ç”¨æˆ·çš„ä¸»ç›®å½•ã€‚ &#x2F;root ç›®å½•è¯¦è§£åœ¨ Linux ç³»ç»Ÿä¸­ï¼Œ/root æ–‡ä»¶å¤¹æ˜¯ä¸“é—¨ä¸º root ç”¨æˆ·ï¼ˆè¶…çº§ç”¨æˆ·ï¼‰è®¾ç½®çš„ä¸»ç›®å½•ã€‚ä¸æ™®é€šç”¨æˆ·çš„ä¸»ç›®å½•é€šå¸¸ä½äº /home/username ä¸åŒï¼Œroot ç”¨æˆ·çš„ä¸»ç›®å½•ä½äºç³»ç»Ÿçš„æ ¹ç›®å½•ä¸‹ï¼Œå³ /rootã€‚ å…³é”®ç‚¹ï¼š æƒé™é™åˆ¶ï¼šåªæœ‰ root ç”¨æˆ·æˆ–å…·æœ‰è¶³å¤Ÿæƒé™çš„ç”¨æˆ·æ‰èƒ½è®¿é—®å’Œä¿®æ”¹ /root ç›®å½•ä¸­çš„æ–‡ä»¶ã€‚æ™®é€šç”¨æˆ·é»˜è®¤æ— æ³•è®¿é—®è¿™ä¸ªç›®å½•ã€‚ ç”¨é€”ï¼šroot ç”¨æˆ·å¯ä»¥åœ¨ /root ç›®å½•ä¸­å­˜å‚¨è‡ªå·±çš„é…ç½®æ–‡ä»¶ã€è„šæœ¬å’Œæ•°æ®ï¼Œç±»ä¼¼äºæ™®é€šç”¨æˆ·åœ¨ä»–ä»¬çš„ä¸»ç›®å½•ä¸­ä¿å­˜ä¸ªäººæ–‡ä»¶çš„æ–¹å¼ã€‚ **ä¸è¦æ··æ·† /**ï¼š/root ç›®å½•ä¸åŒäºæ ¹ç›®å½• /ï¼Œæ ¹ç›®å½•æ˜¯æ•´ä¸ªæ–‡ä»¶ç³»ç»Ÿçš„èµ·ç‚¹ï¼Œè€Œ /root æ˜¯ root ç”¨æˆ·çš„ä¸ªäººä¸»ç›®å½•ã€‚ å‚è€ƒèµ„æ–™ linuxä¸‹ç›®å½•çš„æ“ä½œcd-åˆ‡æ¢ç›®å½•1234$ man cd cd â€” change the working directoryæ ¼å¼ï¼š cd [é€‰é¡¹] [directory] å¸¸ç”¨æ–¹å¼ï¼š 1234567$ cd # åˆ‡æ¢åˆ°ç”¨æˆ·å®¶ç›®å½•$ cd /usr/lib # åˆ‡æ¢åˆ°/usr/libç›®å½•$ cd / # åˆ‡æ¢åˆ° / ç›®å½•$ cd ~ # åˆ‡æ¢åˆ°ç”¨æˆ·å®¶ç›®å½•$ cd . # åˆ‡æ¢åˆ°å½“å‰å·¥ä½œç›®å½•ï¼ˆä¸åˆ‡æ¢ï¼‰$ cd .. # åˆ‡æ¢åˆ°çˆ¶ç›®å½•$ cd - # åˆ‡æ¢åˆ°ä¸Šä¸€æ¬¡ç›®å½• cd -ï¼šåˆ‡æ¢åˆ°ä¸Šæ¬¡çš„å·¥ä½œç›®å½•ï¼Œé€šè¿‡ env ä¸­çš„ OLDPWD å˜é‡è®°å½•ç€å·¥ä½œç›®å½•çš„åˆ‡æ¢ mkdir-åˆ›å»ºç›®å½•1234567$ man mkdirmkdir - make directoriesæ ¼å¼: mkdir [é€‰é¡¹] directory...å¸¸ç”¨é€‰é¡¹ï¼š -p, --parents å¦‚æœçˆ¶ç›®å½•ä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»ºçˆ¶ç›®å½• å¸¸ç”¨æ–¹å¼ï¼š 123$ mkdir dir$ mkdir dir1 dir2 dir3$ mkdir -p a/b/c rmdir-åˆ é™¤ç©ºç›®å½•rmdir ä¸åŒäº rm -r åªèƒ½ç”¨æ¥åˆ é™¤ç©ºç›®å½• 1234567$ man rmdir rmdir - remove empty directoriesæ ¼å¼ï¼š rmdir [é€‰é¡¹] dirctory...å¸¸ç”¨é€‰é¡¹ï¼š -p, --parents é€’å½’åˆ é™¤ç©ºç›®å½• å¸¸ç”¨æ–¹å¼ï¼š 123$ rmdir dir$ rmdir dir1 dir2 dir3$ rmdir -p a/b/c é€šé…ç¬¦é€šé…ç¬¦ï¼šä¸»è¦ç”¨äºæ–‡ä»¶ååŒ¹é…ï¼ŒåŠŸèƒ½ç®€å•ï¼Œå¸¸ç”¨äºæ“ä½œç³»ç»Ÿçš„å‘½ä»¤è¡Œï¼ˆå¦‚ lsã€cpï¼‰ã€‚å¸¸è§çš„é€šé…ç¬¦åŒ…æ‹¬ï¼š *ï¼šåŒ¹é…ä»»æ„é•¿åº¦çš„å­—ç¬¦ï¼ˆåŒ…æ‹¬é›¶ä¸ªå­—ç¬¦ï¼‰ã€‚ ?ï¼šåŒ¹é…å•ä¸ªå­—ç¬¦ã€‚ [abc]ï¼šåŒ¹é…æ‹¬å·å†…çš„ä»»æ„ä¸€ä¸ªå•å­—ç¬¦ã€‚ [!abc]:ä¸åŒ¹é…æ‹¬å·å†…çš„ä»»æ„ä¸€ä¸ªå­—ç¬¦ ç¤ºä¾‹ï¼š *.txt åŒ¹é…æ‰€æœ‰ .txt ç»“å°¾çš„æ–‡ä»¶ã€‚ file?.txt åŒ¹é… file1.txtã€file2.txt ç­‰ã€‚ å¸¸ç”¨æ–¹å¼ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445#è¿™æ˜¯å½“å‰çš„ç›®å½•ç»“æ„.â”œâ”€â”€ aâ”‚ â””â”€â”€ bâ”‚ â””â”€â”€ câ”œâ”€â”€ dirâ”œâ”€â”€ dir1â”œâ”€â”€ diraâ”œâ”€â”€ dirabâ”œâ”€â”€ dirabcâ”œâ”€â”€ dirabcdâ”œâ”€â”€ dirbâ”œâ”€â”€ diriâ”œâ”€â”€ dirjâ”œâ”€â”€ dirkâ””â”€â”€ dirrrmdir dir[ijk] #åˆ é™¤åå­—ä¸ºdiriï¼Œdirj,dirkçš„æ–‡ä»¶å¤¹.â”œâ”€â”€ aâ”‚ â””â”€â”€ bâ”‚ â””â”€â”€ câ”œâ”€â”€ dirâ”œâ”€â”€ dir1â”œâ”€â”€ diraâ”œâ”€â”€ dirabâ”œâ”€â”€ dirabcâ”œâ”€â”€ dirabcdâ”œâ”€â”€ dirbâ””â”€â”€ dirrrmdir dir? #åˆ é™¤åå­—ä¸ºdir[char]çš„ç©ºæ–‡ä»¶å¤¹.â”œâ”€â”€ aâ”‚ â””â”€â”€ bâ”‚ â””â”€â”€ câ”œâ”€â”€ dirâ”œâ”€â”€ dirabâ”œâ”€â”€ dirabcâ””â”€â”€ dirabcdrmdir dir* #åˆ é™¤åå­—ä¸ºdirxxxçš„æ–‡ä»¶å¤¹.â””â”€â”€ a â””â”€â”€ b â””â”€â”€ c ls-æŸ¥çœ‹ç›®å½•é¡¹12345678910111213$ man lsls - list directory contentsæ ¼å¼ï¼šls [é€‰é¡¹] [FILE]...å¸¸ç”¨é€‰é¡¹ï¼š-a, --allæ˜¾ç¤ºæ‰€æœ‰çš„å†…å®¹ï¼ŒåŒ…æ‹¬ä»¥.å¼€å¤´çš„æ–‡ä»¶å’Œç›®å½•-i, --inodeæ˜¾ç¤ºæ–‡ä»¶çš„inodeç¼–å·(inodeæ˜¯ç‰©ç†æ–‡ä»¶çš„æ ‡è¯†)ã€‚-lä»¥é•¿æ ¼å¼çš„å½¢å¼æ˜¾ç¤ºç›®å½•ä¸­çš„å†…å®¹-h, --human-readableå’Œ-lé€‰é¡¹ä¸€èµ·ä½¿ç”¨ï¼Œä»¥äººç±»å¯è¯»çš„æ–¹å¼æ˜¾ç¤ºæ–‡ä»¶çš„å¤§å°ã€‚ å¸¸ç”¨æ–¹å¼ï¼š 1234567$ ls # æŸ¥çœ‹å½“å‰çš„å·¥ä½œç›®å½•$ ls dir # æŸ¥çœ‹dir$ ls dir1 dir2 dir3 # æŸ¥çœ‹dir1ï¼Œdir2ï¼Œdir3$ ls -a dir # æŸ¥çœ‹dirä¸­æ‰€æœ‰çš„å†…å®¹ï¼ŒåŒ…æ‹¬ä»¥.å¼€å¤´çš„æ–‡ä»¶å’Œç›®å½•$ ls -i dir # æŸ¥çœ‹dirä¸­æ‰€æœ‰çš„å†…å®¹ï¼Œä»¥åŠæ¯ä¸ªæ–‡ä»¶æ‰€åœ¨çš„é€»è¾‘å—å·$ ls -h dir # æŸ¥çœ‹dirä¸­æ‰€æœ‰çš„å†…å®¹ï¼ŒåŒ…æ‹¬ä»¥.å¼€å¤´çš„æ–‡ä»¶å’Œç›®å½•$ ls -ilh dir # æ˜¾ç¤ºinodeç¼–å·ï¼Œæ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯ï¼Œå¹¶ä»¥äººç±»å¯è¯»çš„æ–¹å¼æ˜¾ç¤ºæ–‡ä»¶çš„å¤§å° ç›®å½•é¡¹è¯¦è§£12345$ ls -l-rw-rw-r-- 2 yong yong 11 9æœˆ 18 17:13 a.txtdrwxr-xr-x 8 yong yong 4096 9æœˆ 18 16:02 Blog-rw-rw-r-- 2 yong yong 11 9æœˆ 18 17:13 b.txt... ç¬¬ 1 åˆ—çš„ç¬¬ä¸€ä¸ªå­—æ¯ç”¨æ¥è¡¨ç¤ºæ–‡ä»¶çš„ç±»å‹ï¼š -: æ™®é€šæ–‡ä»¶d(directory): ç›®å½•c(character): å­—ç¬¦è®¾å¤‡æ–‡ä»¶(é¼ æ ‡ï¼Œé”®ç›˜ï¼Œæ˜¾ç¤ºå™¨â€¦)b(block): å—è®¾å¤‡æ–‡ä»¶(ç£ç›˜)l(symbolic link): ç¬¦å·é“¾æ¥s(socket): æœ¬åœ°å¥—æ¥å­—p(named pipe): æœ‰åç®¡é“ ç¬¬ 1 åˆ—åé¢ä¹ä¸ªå­—ç¬¦(åˆ†ä¸º 3 ç»„)è¡¨ç¤ºæƒé™ã€‚ä¾æ¬¡ä»£è¡¨æ‹¥æœ‰è€…ã€æ‹¥æœ‰ç»„å’Œå…¶ä»–ç”¨æˆ·çš„è¯»(r)ã€å†™(w)ã€æ‰§è¡Œ(x)æƒé™ã€‚å¯è¯»åˆ™æ˜¾ç¤º rï¼Œå¯å†™åˆ™æ˜¾ç¤º wï¼Œå¯æ‰§è¡Œåˆ™æ˜¾ç¤º xï¼Œ æ²¡æœ‰ç›¸å…³æƒé™åˆ™æ˜¾ç¤º-ã€‚ ç¬¬ 2 åˆ—è¡¨ç¤ºç¡¬é“¾æ¥æ•°ã€‚ ç¬¬ 3 åˆ—è¡¨ç¤ºæ‹¥æœ‰è€…ã€‚ ç¬¬ 4 åˆ—è¡¨ç¤ºæ‹¥æœ‰ç»„ã€‚ ç¬¬ 5 åˆ—è¡¨ç¤ºæ–‡ä»¶æ‰€å ç©ºé—´çš„å¤§å°ã€‚ ç¬¬ 6 åˆ—è¡¨ç¤ºæœ€è¿‘ä¿®æ”¹æ—¶é—´ã€‚ ç¬¬ 7 åˆ—ä¸ºæ–‡ä»¶å cp-å¤åˆ¶æ–‡ä»¶æˆ–ç›®å½•123456789101112$ man cpcp - copy files and directoriesæ ¼å¼ï¼šcp [é€‰é¡¹] SOURCE DESTcp [é€‰é¡¹] SOURCE... DESTå¸¸ç”¨é€‰é¡¹ï¼š-n, --no-clobberå¦‚æœæ–‡ä»¶å·²å­˜åœ¨ï¼Œåˆ™ä¸è¦†ç›–(é»˜è®¤ä¼šè¦†ç›–å·²æœ‰æ–‡ä»¶)ã€‚-i, --interactiveå¦‚æœæ–‡ä»¶å­˜åœ¨ï¼Œåˆ™ç»™ç”¨æˆ·æç¤ºä¿¡æ¯(ç”±ç”¨æˆ·å†³å®šæ˜¯å¦è¦†ç›–?)-R, -r, --recursiveé€’å½’å¤åˆ¶(ç”¨äºcopyç›®å½•) å¸¸ç”¨æ–¹å¼ï¼š 123456$ cp text1 text2 # å°†text1å¤åˆ¶åˆ°text2ä¸­ï¼›å¦‚æœtext2å­˜åœ¨ï¼Œåˆ™è¦†ç›–ã€‚$ cp text1 text2 text3 dir # å°†text1,text2,text3å¤åˆ¶åˆ°ç›®å½•dirä¸­ï¼›å¦‚æœæ–‡ä»¶å·²å­˜åœ¨ï¼Œåˆ™è¦†ç›–ã€‚$ cp -n text1 text2 # å°†text1å¤åˆ¶åˆ°text2ä¸­ï¼›å¦‚æœtext2å­˜åœ¨ï¼Œä¸è¦†ç›–ã€‚$ cp -i text1 text2 text3 dir # å°†text1,text2,text3å¤åˆ¶åˆ°ç›®å½•dirä¸­ï¼›å¦‚æœæ–‡ä»¶å·²å­˜åœ¨ï¼Œåˆ™æç¤ºç”¨æˆ·æ˜¯å¦è¦†ç›–ã€‚$ cp -r dir1 dir2 # é€’å½’åœ°å°†ç›®å½•dir1å¤åˆ¶åˆ°ç›®å½•dir2,å³å¤åˆ¶dir1çš„æ‰€æœ‰å†…å®¹åˆ°dir2ä¸­å»$ cp -r dir/* dir2 # é€’å½’åœ°å°†ç›®å½•dirä¸­çš„æ‰€æœ‰å†…å®¹å¤åˆ¶åˆ°ç›®å½•dir2ä¸­å» mv-ç§»åŠ¨æ–‡ä»¶mvï¼ˆmoveï¼‰å‘½ä»¤å¯ä»¥ç”¨æ¥ç§»åŠ¨æ–‡ä»¶å’Œç›®å½•ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ç”¨ mv å‘½ä»¤æ¥ä¸ºæ–‡ä»¶å’Œç›®å½•é‡å‘½åã€‚ 12345678910111213$ man mv mv - move (rename) filesæ ¼å¼ï¼š mv [é€‰é¡¹] SOURCE DEST mv [é€‰é¡¹] SOURCE... DIRECTORY Rename SOURCE to DEST,or move SOURCE(s) to DIRECTORY.å¸¸ç”¨é€‰é¡¹ï¼š -i, --interactive å¦‚æœæ–‡ä»¶å­˜åœ¨ï¼Œåˆ™ç»™ç”¨æˆ·æç¤ºä¿¡æ¯(ç”±ç”¨æˆ·å†³å®šæ˜¯å¦è¦†ç›–?) -f, --force å¦‚æœæ–‡ä»¶å­˜åœ¨ï¼Œåˆ™ä¸æç¤ºç”¨æˆ·ï¼Œç›´æ¥è¦†ç›– -n, --no-clobber å¦‚æœæ–‡ä»¶å­˜åœ¨ï¼Œåˆ™ä¸è¦†ç›–(é»˜è®¤æ˜¯è¦†ç›–çš„) move ä¸ºä»€ä¹ˆæ²¡æœ‰-r é€‰é¡¹ï¼Œè€Œ cp å´æœ‰ï¼Ÿç§»åŠ¨æ“ä½œï¼ˆmvï¼‰æœ¬è´¨ä¸Šåªæ˜¯æ”¹å˜æ–‡ä»¶æˆ–ç›®å½•çš„ä½ç½®æŒ‡é’ˆï¼Œè€Œä¸æ¶‰åŠå¤åˆ¶æˆ–åˆ é™¤æ–‡ä»¶å†…å®¹ã€‚å¤åˆ¶æ“ä½œï¼ˆcpï¼‰éœ€è¦å¤åˆ¶ç›®å½•ä¸­çš„æ‰€æœ‰å†…å®¹ï¼Œå› æ­¤éœ€è¦ -r é€‰é¡¹æ¥é€’å½’å¤åˆ¶ã€‚ å¸¸ç”¨æ–¹å¼ï¼š 12345$ mv text1 text2 #å°†text2é‡å‘½åä¸ºtext1ï¼›å¦‚æœtext2å­˜åœ¨åˆ™è¦†ç›–$ mv dir1 dir2 #å°†dir1é‡å‘½åä¸ºdir2$ mv -n text1 text2 #å°†text2é‡å‘½åä¸ºtext1ï¼›å¦‚æœtext2å­˜åœ¨åˆ™ä¸è¦†ç›–$ mv text1 text2 text3 dir #å°†text1,text2,text3ç§»åŠ¨åˆ°ç›®å½•dirä¸­ï¼›å¦‚æœæ–‡ä»¶å·²å­˜åœ¨ï¼Œåˆ™è¦†ç›–$ mv -i text1 text2 text3 dir #å°†text1,text2,text3ç§»åŠ¨åˆ°ç›®å½•dirä¸­ï¼›å¦‚æœæ–‡ä»¶å·²å­˜åœ¨ï¼Œåˆ™æç¤ºç”¨æˆ·æ˜¯å¦è¦†ç›– rm-åˆ é™¤æ–‡ä»¶æˆ–ç›®å½•rm(remove)å‘½ä»¤å¯ä»¥åˆ é™¤æ–‡ä»¶æˆ–ç›®å½• 1234567891011$ man rmrm - remove files or directoriesæ ¼å¼ï¼š rm [é€‰é¡¹] FILE...å¸¸ç”¨é€‰é¡¹ï¼š -f, --force åˆ é™¤æ–‡ä»¶æ—¶ï¼Œä¸æç¤ºç”¨æˆ·ç¡®è®¤ -i, --interactive åˆ é™¤æ–‡ä»¶æ—¶ï¼Œæç¤ºç”¨æˆ·ç¡®è®¤ -r, -R, --recursive é€’å½’åˆ é™¤ç›®å½•åŠå…¶å†…å®¹ å¸¸ç”¨æ–¹å¼ï¼š 123456$ rm text1 text2 text3 #åˆ é™¤text1,text2,text3$ rm -f text1 text2 text3 #åˆ é™¤text1,text2,text3ï¼Œä¸æç¤ºç”¨æˆ·ç¡®è®¤$ rm -i text1 text2 text3 #åˆ é™¤text1,text2,text3ï¼Œæç¤ºç”¨æˆ·ç¡®è®¤$ rm -r dir1 dir2 dir3 #åˆ é™¤dir1,dir2,dir3åŠå…¶å†…å®¹$ rm -rf / #åˆ é™¤æ ¹ç›®å½•åŠå…¶æ‰€æœ‰å†…å®¹ï¼Œå±é™©æ“ä½œï¼$ rm *.txt #åˆ é™¤å½“å‰ç›®å½•ä¸‹æ‰€æœ‰txtæ–‡ä»¶(ä¸åŒ…æ‹¬éšè—æ–‡ä»¶),å¯ä»¥æ­é…é€šé…ç¬¦ä½¿ç”¨ rm åˆ é™¤çš„æ–‡ä»¶æ˜¯æ— å‘æ‰¾å›çš„ï¼Œè¯·æ…é‡ä½¿ç”¨ linuxä¸‹çš„æ–‡ä»¶æ“ä½œtouch-åˆ›å»ºæ–‡ä»¶linux æœ‰å¾ˆå¤šåˆ›å»ºæ–‡ä»¶çš„æ–¹æ³•ï¼Œæœ€å¸¸è§çš„æœ‰ä»¥ä¸‹ä¸‰ç§ï¼š 123$ echo &quot;hello world!&quot; &gt; text #åˆ›å»ºæ–‡ä»¶textï¼Œå¹¶ä¸”æ–‡ä»¶ä¸­åŒ…å«å†…å®¹â€œhello worldâ€$ touch text1,text2,text3 #åˆ›å»ºæ–‡ä»¶text1ï¼Œtext2ï¼Œtext3è¦æ±‚text1ï¼Œ2ï¼Œ3ä¸å­˜åœ¨$ vim hello.cpp #ç¼–è¾‘hello.cppæ–‡ä»¶ï¼Œä½¿ç”¨wqæ¨å‡º æŸ¥æ‰¾æ–‡ä»¶which-æŸ¥æ‰¾å¯æ‰§è¡Œç¨‹åºçš„è·¯å¾„1234567$ man which which - locate a commandæ ¼å¼ï¼š which [-a] cmd...é€‰é¡¹ï¼š -a æ˜¾ç¤ºæ‰€æœ‰åŒ¹é…çš„è·¯å¾„ å¸¸ç”¨æ–¹å¼ï¼š 123$ which bash # æŸ¥çœ‹bashçš„è·¯å¾„$ which ls tree # æŸ¥çœ‹å‘½ä»¤lså’Œtreeçš„è·¯å¾„$ which -a vim # æŸ¥çœ‹vimçš„æ‰€æœ‰è·¯å¾„ which æŸ¥æ‰¾çš„ç¨‹åºè·¯å¾„æ˜¯å’Œç¯å¢ƒå˜é‡ä¸­ PATH [bin ç›®å½•çš„é¡ºåº](# &#x2F;bin ç›®å½•è¯¦è§£)æœ‰å…³çš„,æ˜¯ path ä¸­çš„ç¬¬ä¸€ä¸ªè·¯å¾„ find-å¯ä»¥åœ¨ä¸€ä¸ªç›®å½•ä¸­é€’å½’çš„æŸ¥è¯¢ç¬¦åˆæŒ‡å®šè¦æ±‚çš„æ–‡ä»¶123456789101112131415161718192021222324252627282930313233343536373839404142434445$ man find find - search for files in a directory hierarchyæ ¼å¼ï¼š find [start-point...] æŸ¥æ‰¾æ¡ä»¶ # çœç•¥start-pointï¼Œé»˜è®¤èµ·å§‹ç‚¹ä¸ºå½“å‰ç›®å½•ï¼Œå¯ä»¥æŒ‡å®šå¤šä¸ªè·¯å¾„å¸¸ç”¨é€‰é¡¹ï¼š -name pattern æŸ¥æ‰¾æ–‡ä»¶åç¬¦åˆpatternçš„æ–‡ä»¶ -type c æŸ¥æ‰¾ç±»å‹ä¸ºcçš„æ–‡ä»¶ï¼š b(block): å—è®¾å¤‡æ–‡ä»¶ c(character): å­—ç¬¦è®¾å¤‡æ–‡ä»¶ d(directory): ç›®å½• p(named pipe): æœ‰åç®¡é“ f(file): æ™®é€šæ–‡ä»¶ l(symbolic link): ç¬¦å·é“¾æ¥ s(socket): å¥—æ¥å­— -size n[cwbkMG] #[cwbkMG]:è¡¨ç¤ºå•ä½ File uses n units of space, rounding up.ï¼ˆå‘ä¸Šå–æ•´ï¼Œä¾‹å¦‚2.3Mï¼Œå‘ä¸Šå–æ•´3Mï¼‰ b: for 512-byte blocks (this is the default if no suffix is used) #å— c: for bytes #char w: for two-byte words k: for Kibibytes (KiB, units of 1024 bytes) M: for Mebibytes (MiB, units of 1024 * 1024 = 1048576 bytes) G: for Gibibytes (GiB, units of 1024 * 1024 * 1024 = 1073741824 bytes) å¯ä»¥åœ¨nå‰é¢æ·»åŠ &#x27;+&#x27;å’Œ&#x27;-&#x27;ï¼Œè¡¨ç¤ºå¤§äºå’Œå°äºã€‚ -empty æŸ¥æ‰¾ç©ºçš„æ–‡ä»¶æˆ–ç©ºçš„æ–‡ä»¶å¤¹ -user username, -uid uid æ ¹æ®ç”¨æˆ·åå’Œç”¨æˆ·idæŸ¥æ‰¾ -group groupname, -gid gid æ ¹æ®ç»„åå’Œç»„idæŸ¥æ‰¾ -perm mode æ ¹æ®æƒé™æŸ¥æ‰¾ æ ¹æ®æ—¶é—´æŸ¥æ‰¾ï¼š -amin n, -atime n, -cmin n, -ctime n, -mmin n, -mtime n a(access): æ–‡ä»¶è®¿é—®çš„æ—¶é—´ c(change): æ–‡ä»¶å±æ€§å‘ç”Ÿæ”¹å˜çš„æ—¶é—´ m(modify): æ–‡ä»¶å†…å®¹å‘ç”Ÿæ”¹å˜çš„æ—¶é—´ min: ä»¥åˆ†é’Ÿä¸ºå•ä½ time: ä»¥å¤©ä¸ºå•ä½ å¯ä»¥åœ¨nå‰é¢æ·»åŠ &#x27;+&#x27;å’Œ&#x27;-&#x27;ï¼Œè¡¨ç¤ºå¤§äºå’Œå°äºã€‚ç»„åˆæŸ¥æ‰¾ï¼š -a(and), -o(or), !(not): åˆ†åˆ«è¡¨ç¤ºä¸ã€æˆ–ã€é å¸¸ç”¨æ–¹å¼ï¼š 1$ find /usr/include/ ~/Code/filelearning/ -name &quot;stdio.h&quot; 1$ find /dev/ -type b 12345678910111213$ find . -size 66M #æ‰¾å¤§å°å‘ä¸Šå–æ•´ä¸º66Mçš„æ–‡ä»¶$ find . -size +66M #æ‰¾å¤§å°å‘ä¸Šå–æ•´å¤§äº66Mçš„æ–‡ä»¶$ find . -size -66M #æ‰¾å¤§å°å‘ä¸Šå–æ•´å°äº66Mçš„æ–‡ä»¶å½“å‰ç›®å½•å¦‚ä¸‹ï¼š-rw-rw-r-- 1 yong yong 17K 9æœˆ 11 14:43 20ä¸ªå¸¸ç”¨Linuxå‘½ä»¤.md-rw-rw-r-- 1 yong yong 166M 9æœˆ 11 17:05 app.asardrwxrwxr-x 2 yong yong 4.0K 9æœˆ 11 14:48 C++åŸºç¡€ä¸æé«˜-rw-rw-r-- 1 yong yong 4.3M 9æœˆ 11 14:47 C++åŸºç¡€ä¸æé«˜.zip---x--x--x 1 yong yong 66M 9æœˆ 10 12:42 qt-online-installer-linux-x64-4.8.0.run-rw-rw-r-- 1 yong yong 126M 9æœˆ 11 17:04 Xmind-for-Linux-amd64bit-23.08.02122-202308281754.deb-rw-rw-r-- 1 yong yong 153M 9æœˆ 11 15:41 Xmind-for-Linux-x86_64bit-24.04.10311-202405240021.rpmdrwxrwxr-x 2 yong yong 4.0K 9æœˆ 11 15:40 xmind-winmm-rw-rw-r-- 1 yong yong 5.7M 9æœˆ 11 15:40 xmind-winmm.zip 1234567891011121314$ find /usr/include -name &quot;stdio.h&quot; # åœ¨/usr/includeç›®å½•ä¸‹æŸ¥æ‰¾stdio.hæ–‡ä»¶$ find . -name &quot;*.c&quot; # åœ¨å½“å‰å·¥ä½œç›®å½•ä¸‹æŸ¥æ‰¾æ‰€æœ‰ä»¥.cç»“å°¾çš„æ–‡ä»¶$ find /dev -type b # åœ¨/devç›®å½•ä¸‹æŸ¥æ‰¾æ‰€æœ‰çš„å—è®¾å¤‡æ–‡ä»¶$ find . -size 5M # åœ¨å½“å‰å·¥ä½œç›®å½•ä¸‹æŸ¥æ‰¾æ‰€æœ‰å¤§å°ä¸º5Mçš„æ–‡ä»¶$ find . -size +5M # åœ¨å½“å‰å·¥ä½œç›®å½•ä¸‹æŸ¥æ‰¾æ‰€æœ‰å¤§äº5Mçš„æ–‡ä»¶$ find dir1 dir2 dir3 -empty # åœ¨dir1,dir2,dir3ç›®å½•ä¸‹æŸ¥æ‰¾æ‰€æœ‰ç©ºçš„æ–‡ä»¶å’Œç©ºçš„æ–‡ä»¶å¤¹$ find . -user he # åœ¨å½“å‰å·¥ä½œç›®å½•ä¸‹æŸ¥æ‰¾heç”¨æˆ·æ‹¥æœ‰çš„æ–‡ä»¶$ find . -gid 0 # åœ¨å½“å‰å·¥ä½œç›®å½•ä¸‹æŸ¥æ‰¾rootç»„(gid=0)æ‹¥æœ‰çš„æ–‡ä»¶$ find . -perm 664 # åœ¨å½“å‰å·¥ä½œç›®å½•ä¸‹æŸ¥æ‰¾æƒé™ä¸º664(rw-rw-r--)çš„æ–‡ä»¶$ find . -mtime 1 # åœ¨å½“å‰å·¥ä½œç›®å½•ä¸‹æŸ¥æ‰¾åœ¨[1, 2)å¤©å‰å†…å®¹å‘ç”Ÿä¿®æ”¹çš„æ–‡ä»¶(findä¼šçœç•¥å°æ•°éƒ¨åˆ†)$ find . -mtime +2 # åœ¨å½“å‰å·¥ä½œç›®å½•ä¸‹æŸ¥æ‰¾åœ¨[3, +âˆ)å¤©å‰å†…å®¹å‘ç”Ÿä¿®æ”¹çš„æ–‡ä»¶$ find /dev -type c -a -name &quot;tty*&quot; # åœ¨/devç›®å½•ä¸‹æŸ¥æ‰¾ä»¥ttyå¼€å¤´çš„å­—ç¬¦è®¾å¤‡æ–‡ä»¶$ find /dev -type b -o -name &quot;tty*&quot; # åœ¨/devç›®å½•ä¸‹æŸ¥æ‰¾å—è®¾å¤‡æ–‡ä»¶æˆ–è€…æ˜¯ä»¥ttyå¼€å¤´çš„æ–‡ä»¶$ find /dev -type c -a ! -name &quot;tty*&quot; # åœ¨/devç›®å½•ä¸‹æŸ¥æ‰¾ä¸ä»¥ttyå¼€å¤´çš„å­—ç¬¦è®¾å¤‡æ–‡ä»¶ æƒé™æŸ¥æ‰¾ä¸­çš„æ•°å­—å«ä¹‰ï¼š$ find . -perm 777 1234$ ls -l-rwxrw-r-- 2 yong yong 11 9æœˆ 18 17:13 a.txtdrwxr-xr-x 8 yong yong 4096 9æœˆ 18 16:02 Blog-rw-rw-r-- 2 yong yong 11 9æœˆ 18 17:13 b.txt ç¬¬ 1 åˆ—åé¢ä¹ä¸ªå­—ç¬¦(åˆ†ä¸º 3 ç»„)è¡¨ç¤ºæƒé™ã€‚ä¾æ¬¡ä»£è¡¨æ‰€å±ç”¨æˆ·ã€åŒç»„ç”¨æˆ·å’Œå…¶ä»–ç”¨æˆ·çš„è¯»(r)ã€å†™(w)ã€æ‰§è¡Œ(x)æƒé™ã€‚å¯è¯»åˆ™æ˜¾ç¤º rï¼Œå¯å†™åˆ™æ˜¾ç¤º wï¼Œå¯æ‰§è¡Œåˆ™æ˜¾ç¤º xï¼Œ æ²¡æœ‰ç›¸å…³æƒé™åˆ™æ˜¾ç¤º-ã€‚ å¯ä»¥ç”¨äºŒè¿›åˆ¶æ¥ç®€æ˜“è¡¨ç¤ºè¿™äº›ç”¨æˆ·çš„æ‰€æ‹¥æœ‰çš„æƒé™ï¼Œ1 ä»£è¡¨æœ‰è¯¥æƒé™ï¼Œ0 ä»£è¡¨æ— è¯¥æƒé™ï¼šrwx rw- râ€“ &lt;&#x3D;&#x3D;å¯å†™ä¸º&#x3D;&#x3D;&gt;111 110 100ï¼Œè€Œä¸‰ä¸ªäºŒè¿›åˆ¶çš„æ•°ç»„æˆä¸€ä¸ª 8 è¿›åˆ¶çš„æ•°ï¼Œäºæ˜¯åˆå¯ä»¥æ”¹å†™ä¸ºï¼šrwx rw- râ€“ &lt;&#x3D;&#x3D;å¯å†™ä¸º&#x3D;&#x3D;&gt;111 110 100&lt;&#x3D;&#x3D;å¯å†™ä¸º&#x3D;&#x3D;&gt;746æ‰€ä»¥ 777&lt;&#x3D;&#x3D;å¯å†™ä¸º&#x3D;&#x3D;&gt;rwxrwxrwx,å³æ‰€æœ‰ç”¨æˆ·éƒ½æœ‰è¯»å†™æ‰§è¡Œè¯¥æ–‡ä»¶çš„æƒé™ï¼Œ$ find &#x2F;dev -perm 777:æŸ¥æ‰¾å¯ä»¥è¢«æ‰€æœ‰ç”¨æˆ·è¯»å†™æ‰§è¡Œçš„æ–‡ä»¶ æŸ¥çœ‹æ–‡ä»¶cat-æŸ¥çœ‹æ–‡ä»¶æ‰€æœ‰å†…å®¹1234567$ man catcat - è¿æ¥å¤šä¸ªæ–‡ä»¶å¹¶æ‰“å°åˆ°æ ‡å‡†è¾“å‡ºã€‚æ ¼å¼ï¼š cat [é€‰é¡¹] [file]...å¸¸è§é€‰é¡¹ï¼š -n, --number å¯¹æ¯ä¸€è¡Œè¿›è¡Œç¼–å· å¸¸è§ç”¨æ³• 123$ cat /etc/passwd$ cat -n /etc/passwd$ sudo cat /etc/passwd /etc/shadow head-æŸ¥çœ‹æ–‡ä»¶çš„å‰å‡ è¡Œ1234567$ man head head - æ˜¾ç¤ºæ–‡ä»¶çš„å¼€å¤´éƒ¨åˆ†ã€‚æ ¼å¼ï¼š head [é€‰é¡¹] [file]...å¸¸è§é€‰é¡¹ï¼š -n, --lines=[-]NUM æ˜¾ç¤ºå‰NUMè¡Œï¼›è‹¥åœ¨NUMå‰é¢æ·»åŠ &#x27;-&#x27;å·ï¼Œåˆ™æ˜¾ç¤ºé™¤äº†åNUMè¡Œçš„æ‰€æœ‰è¡Œ å¸¸è§ç”¨æ³•ï¼š 1234$ head text1 #é»˜è®¤æŸ¥çœ‹text1çš„å‰10è¡Œ$ head text1 text2 text3 #æ˜¾ç¤ºtext1ï¼Œ2ï¼Œ3çš„å‰10è¡Œ$ head -n 5 text1 #æ˜¾ç¤ºtext1çš„å‰5è¡Œ$ head -n -5 text1 #æ˜¾ç¤ºtext1çš„å5è¡Œ tail-æŸ¥çœ‹æ–‡ä»¶çš„åå‡ è¡Œ123456789$ man tail tail - output the last part of filesæ ¼å¼ï¼š tail [é€‰é¡¹] [file]...å¸¸è§é€‰é¡¹ï¼š -n, --lines=[+]NUM æ˜¾ç¤ºåNUMè¡Œï¼›è‹¥åœ¨NUMå‰é¢æ·»åŠ &#x27;+&#x27;å·ï¼Œåˆ™ä»ç¬¬NUMå¼€å§‹æ˜¾ç¤º -F æ˜¾ç¤ºåé¢è¿½åŠ çš„æ•°æ®ã€‚ä¸€èˆ¬ç”¨äºæŸ¥çœ‹æ—¥å¿—æ–‡ä»¶ã€‚ å¸¸è§ç”¨æ³•ï¼š 123##å¸¸è§„ç”¨æ³•å’Œheadå·®ä¸å¤šï¼Œä¾¿ä¸èµ˜è¿°$ tail -n +5 text1 #æ˜¾ç¤ºtext1çš„å‰5è¡Œ$ tail -F server.log #èƒ½å¤Ÿå®æ—¶çš„ç›‘è§†server.logæ–‡ä»¶åå‡ è¡Œ less&#x2F;more-åˆ†å±æµè§ˆæ–‡ä»¶1234$ man more more - file perusal filter for crt viewing (è¯´äººè¯å°±æ˜¯å•é¡µæµè§ˆ)æ ¼å¼ï¼š more [é€‰é¡¹] file... less æ˜¯ more çš„å‡çº§ç‰ˆæœ¬ï¼Œæ€§èƒ½æ›´å¥½ï¼Œä¸éœ€è¦ä¸€æ¬¡æ€§åŠ è½½æ‰€æœ‰çš„æ–‡ä»¶å†…å®¹åˆ°å†…å­˜ä¸­ï¼Œæœ‰ less é€‰ less å¸¸è§ç”¨æ³•ï¼š 12$ less text1$ less text1 text2 è¿›å…¥æµè§ˆç•Œé¢åå¿«æ·é”®ï¼š å¿«æ·é”® å«ä¹‰ f(forward) å¾€åç¿»ä¸€é¡µ b(backforword) å¾€å‰ç¿»ä¸€é¡µ :n(next) æŸ¥çœ‹ä¸‹ä¸€ä¸ªæ–‡ä»¶ :p(previous) æŸ¥çœ‹ä¸Šä¸€ä¸ªæ–‡ä»¶ q(quiet) é€€å‡ºæŸ¥çœ‹æ¨¡å¼ é‡å®šå‘ç›´ç™½ç‚¹è®²å°±æ˜¯æŠŠæ–‡ä»¶ä¸­çš„å†…å®¹ä»£æ›¿é”®ç›˜è¾“å…¥åˆ°è¾“å…¥ç¼“å†²åŒºä¸­ï¼ŒæŠŠæœ¬è¯¥è¾“å‡ºåˆ°å±å¹•ä¸Šçš„è¾“å‡ºç¼“å†²åŒºçš„å†…å®¹å†™åˆ°æ–‡ä»¶ä¸­å»ã€‚ é€šå¸¸æˆ‘ä»¬å€ŸåŠ©é‡å®šå‘ç¬¦å·æ¥å®Œæˆè¿™ä¸€åŠŸèƒ½ï¼Œä»¥ä¸‹æ˜¯ç¼“å†²åŒºå’Œå…¶å¯¹åº”çš„ç¬¦å· â€œ&gt;â€,â€2&gt;â€å’Œâ€œ&gt;&gt;â€ï¼Œâ€œ&gt;&gt;â€çš„åŒºåˆ«ï¼šå•ç¬¦å·â€&gt;â€,â€2&gt;â€è¡¨ç¤ºè¦†ç›–æ–‡ä»¶ä¸­çš„å†…å®¹ï¼ŒåŒç¬¦å·â€œ&gt;&gt;â€,â€2&gt;&gt;è¡¨ç¤ºè¿½åŠ åˆ°æ–‡ä»¶ä¸­â€å»ã€‚å¸¸è§ç”¨æ³•ï¼š 1$ ./isPrimes &lt; input.txt #å°†input.txtä¸­çš„æ•°å­—ä»£æ›¿é”®ç›˜è¾“å…¥çš„æ•°å­— 1234567891011121314151617181920//è¿™æ˜¯åˆ¤æ–­ç´ æ•°çš„å‡½æ•° 1 #include &lt;cmath&gt; 2 #include &lt;iostream&gt; 3 using namespace std; 4 bool isPrime(long long n)&#123; 5 if(n == 2) return true; 6 for(int i = 2; i &lt; n; i++ )&#123; 7 if(n % i == 0) return false; 8 &#125; 9 return true; 10 &#125; 11 int main() 12 &#123; 13 long long n; 14 cin &gt;&gt; n; 15 if(isPrime(n)) cout&lt;&lt;n&lt;&lt; &quot;is Prime&quot;&lt;&lt;endl; 16 else 17 cout &lt;&lt; n &lt;&lt; &quot;is not a Prime&quot;&lt;&lt;endl; 18 return 0; 19 &#125; ç»“æœå¦‚ä¸‹ï¼š 1234yong@yongubuntu:~/æ¡Œé¢/code$ cat input.txt213yong@yongubuntu:~/æ¡Œé¢/code$ ./isPrimes &lt; input.txt213is not a Prime å…¶ä»–å¸¸ç”¨æ–¹æ³•ï¼š 12345678$ who &gt; users$ echo &quot;liu yi fei&quot; &gt;&gt; users$ cat users file1 &gt; text# å°†liu yi feiè¿½åŠ åˆ°textï¼Œå¹¶æç¤ºâ€œfile1ä¸å­˜åœ¨â€$ cat users file1 2&gt; text# ä»…å°†é”™è¯¯ä¿¡æ¯â€œfile1ä¸å­˜åœ¨â€è¦†ç›–å†™å…¥text$ cat users file1 &gt;&amp; text# å°†liu yi feiå’Œâ€œfile1ä¸å­˜åœ¨â€éƒ½è¦†ç›–å†™å…¥text grep-æœç´¢æ–‡ä»¶å†…å®¹grep(globally search for a regular expression)å‘½ä»¤å¯ä»¥ç”¨äºæœç´¢æ–‡ä»¶å†…å®¹ï¼Œå®ƒçš„åŠŸèƒ½éå¸¸å¼ºå¤§ï¼grep å‘½ä»¤ä¼šæŒ‰æ­£åˆ™è¡¨è¾¾å¼å»æœç´¢æ–‡ä»¶ï¼Œå¦‚æœæ–‡ä»¶ä¸­æŸä¸€è¡ŒåŒ¹é…æŒ‡å®šçš„æ­£åˆ™è¡¨è¾¾å¼ï¼Œgrep å‘½ä»¤åˆ™ä¼šæ˜¾ç¤ºè¿™ä¸€è¡Œã€‚ 123456789101112131415$ man grep grep - å…¨é¢æœç´¢æ­£åˆ™è¡¨è¾¾å¼å¹¶æŠŠè¡Œæ‰“å°å‡ºæ¥æ ¼å¼ï¼š grep [é€‰é¡¹] pattern [file]...å¸¸è§é€‰é¡¹ï¼š -E, --extended-regexp ä½¿ç”¨æ‰©å±•çš„æ­£åˆ™è¡¨è¾¾å¼ -i, --ignore-case å¿½ç•¥å¤§å°å†™ -v, --invert-match æ˜¾ç¤ºä¸åŒ¹é…æ­£åˆ™è¡¨è¾¾å¼çš„è¡Œ -n, --line-number æ˜¾ç¤ºè¡Œå· -c, --count ä¸æ˜¾ç¤ºåŒ¹é…çš„è¡Œï¼Œç»Ÿè®¡åŒ¹é…è¡Œçš„ä¸ªæ•° å¸¸è§ç”¨æ³•ï¼š 12$ grep -nE &quot;God&quot; Bible.txt #æ˜¾ç¤ºBible.txtä¸­åŒ…å«Godçš„è¡Œï¼Œå¹¶æ˜¾ç¤ºè¡Œå·$ grep -cvE &quot;God&quot; Bible.txt #ç»Ÿè®¡Bible.txtä¸­ä¸åŒ…å«Godçš„è¡Œçš„ä¸ªæ•° grepé€šå¸¸ä¼šæ­é…æ­£åˆ™è¡¨è¾¾å¼ä½¿ç”¨ï¼Œè¿™é‡Œæœ‰å…³äºæ­£åˆ™è¡¨è¾¾å¼çš„è®²è§£ linuxä¸‹å‘½ä»¤çš„ç»„åˆ1.å…ˆåé¡ºåºæ‰§è¡Œæ ¼å¼å¦‚ä¸‹ï¼š 12cmd1;cmd2;cmd3 å…ˆæ‰§è¡Œcmd1ï¼Œå†æ‰§è¡Œcmd2ï¼Œæœ€åæ‰§è¡Œcmd3 ç¤ºä¾‹ï¼š 1sudo mkdir dir;cd dir;touch file; 2.å‰ä¸€ä¸ªå‘½ä»¤çš„è¾“å‡ºæ˜¯ä¸‹ä¸€ä¸ªå‘½ä»¤çš„è¾“å…¥æ ¼å¼å¦‚ä¸‹ï¼š 12cmd1 | cmd2(ç®¡é“) å°†cmd1çš„è¾“å‡ºç¼“å†²åŒºï¼ˆstdoutï¼‰é‡å®šå‘åˆ°ç®¡é“ï¼Œå†ä»ç®¡é“é‡å®šå‘åˆ°cmd2çš„è¾“å…¥ç¼“å†²åŒºï¼ˆstdinï¼‰ä¸­å» ç¤ºä¾‹ï¼š 1234567$ history | tail -n 5 #æ˜¾ç¤ºæœ€è¿‘5æ¡å‘½ä»¤ 1796 which -a tldr 1797 which -a tldr | tail -n 2 1798 ls -lh 1799 ls -lh | grep -nEc &quot;9æœˆ&quot; 1800 history | tail -n 5 3.å‰ä¸€ä¸ªå‘½ä»¤çš„è¾“å‡ºæ˜¯ä¸‹ä¸€ä¸ªå‘½ä»¤çš„å‚æ•°xargs xargs:extended arguments,å¯ä»¥å°†æ ‡å‡†è¾“å…¥é‡Œé¢çš„æ¯ä¸€è¡Œè½¬æ¢æˆä¸ºå‘½ä»¤çš„å‚æ•°ï¼Œé€šå¸¸æ­é…ç®¡é“ä½¿ç”¨ ä½¿ç”¨æ–¹æ³•æ ¼å¼å¦‚ä¸‹ï¼š 12cmd1 | xargs cmd2 å…ˆæ‰§è¡Œcmd1ï¼Œå°†cmd1çš„è¾“å‡ºç¼“å†²åŒºï¼ˆstdoutï¼‰çš„æ¯ä¸€è¡Œå‡ä½œä¸ºcmd2çš„å‚æ•° ç¤ºä¾‹1ï¼š 1$ ls -lh | xargs grep -nEc &quot;9æœˆ&quot; #ç»Ÿè®¡å½“å‰ç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶ä¸­åŒ…å«â€œ9æœˆâ€çš„è¡Œæ•° ç¤ºä¾‹2ï¼šå¿«é€Ÿæ‰¾åˆ°ä¸€ä¸ªå¤§å‹é¡¹ç›®ä¸­çš„æ‰€æœ‰.cppæ–‡ä»¶ï¼Œå¹¶ä¸”æ‰¾åˆ°mainå‡½æ•°æ‰€åœ¨çš„è¡Œ 12345678$ find . -name &quot;*.cpp&quot; | xargs grep -nE &quot;\\&lt;main\\(&quot;# linux-5.17.4æºç ./tools/build/feature/test-cxx.cpp:10:int main()./tools/build/feature/test-llvm-version.cpp:6:#define pass int main() &#123;printf(&quot;%x\\n&quot;, NUM_VERSION); return 0;&#125;./tools/build/feature/test-clang.cpp:18:int main()./tools/build/feature/test-llvm.cpp:9:int main()./tools/testing/selftests/bpf/test_cpp.cpp:14:int main(int argc, char *argv[])","link":"","tags":[{"name":"linux","slug":"linux","permalink":"https://lyroom.github.io/tags/linux/"},{"name":"ç›®å½•","slug":"ç›®å½•","permalink":"https://lyroom.github.io/tags/%E7%9B%AE%E5%BD%95/"},{"name":"æ–‡ä»¶","slug":"æ–‡ä»¶","permalink":"https://lyroom.github.io/tags/%E6%96%87%E4%BB%B6/"}]},{"title":"C++å­¦ä¹ ","date":"2024-09-11T05:36:18.000Z","path":"2024/09/11/C-å­¦ä¹ /","text":"è¿™é‡Œä¸»è¦è®°å½•äº†ï¼Œæˆ‘çš„ C++å­¦ä¹ çš„ä¸€äº›ä¹¦ç±å’Œèµ„æºã€‚ c++å­¦ä¹ è·¯çº¿æ•°æ®åº“å­¦ä¹ å…¥é—¨ï¼š ä¹¦ç±ï¼š SQLå¿…çŸ¥å¿…ä¼šï¼šä¸»è¦æ˜¯SQLè¯­å¥çš„ä¹¦å†™","link":"","tags":[{"name":"book","slug":"book","permalink":"https://lyroom.github.io/tags/book/"},{"name":"C++","slug":"C","permalink":"https://lyroom.github.io/tags/C/"}]},{"title":"hexoå¦‚ä½•æ‰“é€ ä¸ªäººä¹¦åº“","date":"2024-07-22T09:48:05.000Z","path":"2024/07/22/hexoå¦‚ä½•æ‰“é€ ä¸ªäººä¹¦åº“/","text":"æœ€è¿‘å¶ç„¶å‘ç°å¯ä»¥åœ¨ hexo ä¸­æ’å…¥ pdfï¼Œå°±æƒ³ç€æŠŠè‡ªå·±çœ‹è¿‡çš„ä¹¦éƒ½æ•´ç†ä¸€ä¸‹ï¼Œåšæˆç”µå­ä¹¦åº“ã€‚æ­£å¥½æœ€è¿‘åœ¨æ•´ç†ä¹¦ç±ï¼Œå°±é¡ºä¾¿åšäº†è¿™ä¸ªäº‹æƒ…ã€‚ ä¸‹é¢æ˜¯ä¸€äº›æ­¥éª¤å’Œæ³¨æ„äº‹é¡¹ã€‚ 1. å®‰è£…æ’ä»¶1npm install hexo-pdf 2. åœ¨ hexo é…ç½®æ–‡ä»¶_config.yml ä¸­æ·»åŠ å¦‚ä¸‹é…ç½®1post_asset_folder: true 3. ä½¿ç”¨æ–¹æ³•ä¸€å…±æœ‰ä¸‰ç§æ–¹æ³•ï¼Œå¦‚ä¸‹ï¼š 123&#123;% pdf GitHubå…¥é—¨ä¸è·µ.pdf %&#125; #å±äºç›´æ¥æ’å…¥[text](GitHubå…¥é—¨ä¸è·µ.pdf) #å±äºé“¾æ¥æ–¹å¼æ’å…¥&lt;embed src=&quot;GitHubå…¥é—¨ä¸è·µ.pdf&quot; width=&quot;100%&quot; height=&quot;1000&quot; type=&quot;application/pdf&quot;&gt; #ç”¨htmlçš„æ–¹æ³•æ’å…¥ æ¨èç¬¬äºŒæ–¹å¼ï¼Œé€šè¿‡é“¾æ¥æ–¹å¼æ’å…¥ï¼Œä¸ç”¨å ç”¨å¤ªå¤šçš„é¡µé¢ç©ºé—´ 4.ç¤ºä¾‹å±•ç¤ºGitHub å…¥é—¨ä¸å®è·µ","link":"","tags":[{"name":"pdf","slug":"pdf","permalink":"https://lyroom.github.io/tags/pdf/"}]},{"title":"vim","date":"2024-07-11T09:47:27.000Z","path":"2024/07/11/vim/","text":"Vimç¼–è¾‘å™¨â€‹ Vim(Vi improved) æ˜¯ä» Vi å‘å±•å‡ºæ¥çš„ä¸€ä¸ªæ–‡æœ¬ç¼–è¾‘å™¨ã€‚Vim åœ¨ç¨‹åºå‘˜ä¸­ä½¿ç”¨åœ°éå¸¸å¹¿æ³›ï¼Œå’Œ Emacs å¹¶ç§°ä¸ºç±» Unix ç³»ç»Ÿç”¨æˆ·æœ€å–œæ¬¢çš„æ–‡æœ¬ç¼–è¾‘å™¨ã€‚äº‹å®ä¸Šï¼Œè¿™ä¸¤å¤§ç¼–è¾‘ç¥å™¨ä¹‹é—´çš„åœ£æˆ˜ä¸€ç›´æ²¡åœæ­‡è¿‡ã€‚ â€‹ åœ¨è¿™ä¸ªè”šè“è‰²çš„æ˜Ÿçƒä¸Šï¼Œæµä¼ ç€ä¸¤å¤§ç¥å™¨çš„ä¼ è¯´ï¼š æ®è¯´ Emacs æ˜¯ç¥çš„ç¼–è¾‘å™¨ï¼Œè€ŒVim æ˜¯ç¼–è¾‘å™¨ä¹‹ç¥â€¦ â€‹ å­¦ä¹  vim ä¹‹å‰ï¼Œå…ˆçŸ¥é“å…¶è®¾è®¡ç†å¿µæ˜¯å¾ˆé‡è¦çš„ï¼šä¸ä»…æœ‰åŠ©äºè®°å¿†ï¼Œè€Œä¸”è¿˜èƒ½ä¸¾ä¸€åä¸‰ã€‚ Vim çš„è®¾è®¡ç†å¿µæ˜¯ Composability ( ç»„åˆ ): â€‹ ä¾‹å¦‚åœ¨ Vim ä¸­ï¼Œâ€dâ€ è¡¨ç¤ºåˆ é™¤ï¼Œâ€jâ€ ç§»åŠ¨åˆ°ä¸‹ä¸€è¡Œï¼Œç»„åˆ â€œdjâ€ è¡¨ç¤ºåˆ é™¤å½“å‰è¡Œå’Œä¸‹ä¸€è¡Œï¼›â€^â€ ä»£è¡¨è¡Œé¦–ï¼Œæ•…ç»„åˆ â€œd^â€ è¡¨ç¤ºåˆ é™¤åˆ°è¡Œé¦–ï¼›â€$â€ ä»£è¡¨è¡Œå°¾ï¼Œâ€d$â€ è¡¨ç¤ºåˆ é™¤åˆ°è¡Œå°¾ã€‚è€Œä¸”æˆ‘ä»¬è¿˜å¯ä»¥æŒ‡å®šå‘½ä»¤é‡å¤çš„æ¬¡æ•°ï¼šâ€ddâ€ è¡¨ç¤ºåˆ é™¤å…‰æ ‡æ‰€åœ¨è¡Œï¼Œâ€2ddâ€ æˆ–â€d 2 dâ€ è¡¨ç¤ºè¿ç»­åˆ é™¤ä¸¤è¡Œï¼Œæ•ˆæœå’Œ â€œdjâ€ ä¸€è‡´ã€‚ 1 ä¸‰å¤§æ¨¡å¼ï¼ˆè§†å›¾ï¼‰â€‹ Vim æ˜¯ä¸€ç§æ¨¡å¼ç¼–è¾‘å™¨ï¼Œå®ƒä¸æˆ‘ä»¬ç†Ÿæ‚‰çš„â€æ‰€è§å³æ‰€å¾—â€çš„ç¼–è¾‘å™¨ä¸å¤ªä¸€æ ·ã€‚Vim åœ¨ä¸åŒæ¨¡å¼ä¸‹æœ‰ä¸åŒçš„åŠŸèƒ½ï¼Œè¿™ä¹Ÿæ˜¯ Vim ä¹‹æ‰€æœ‰è¿™ä¹ˆ NB çš„åŸå› ä¹‹ä¸€ã€‚ â€‹ Vim æœ‰å¤šç§æ¨¡å¼ï¼Œæœ€å¸¸ç”¨çš„æ˜¯ï¼šæ™®é€š(å‘½ä»¤)æ¨¡å¼ã€æ’å…¥(ç¼–è¾‘)æ¨¡å¼å’Œè§†è§‰æ¨¡å¼ã€‚ æ™®é€šï¼ˆå‘½ä»¤ï¼‰æ¨¡å¼ï¼ˆcommon modeï¼‰ â€‹ åˆšè¿›å…¥vimç¼–è¾‘å™¨æ—¶å€™çš„é»˜è®¤æ¨¡å¼ã€‚åœ¨æ­¤æ¨¡å¼ä¸‹èƒ½è¾“å…¥çš„vimçš„åˆæ³•æŒ‡ä»¤ï¼ˆé€šå¸¸æ˜¯ä¸€äº›å­—æ¯ï¼Œå¦‚h,j,k,lï¼‰æ¥è¿›è¡Œæ“ä½œï¼Œæ›´åƒæ˜¯é˜…è¯»æ¨¡å¼ æ’å…¥ï¼ˆç¼–è¾‘ï¼‰æ¨¡å¼(Insert mode) â€‹ æ–‡æœ¬ç¼–è¾‘æ¨¡å¼ï¼Œç›´æ¥å¯¹æ–‡æœ¬å†…å®¹è¿›è¡Œç¼–è¾‘ è§†è§‰æ¨¡å¼(Last-line mode) â€‹ ä¹Ÿå«åº•çº¿ï¼ˆæœ«è¡Œï¼‰æ¨¡å¼ï¼Œé¡¾åæ€ä¹‰ï¼Œå°±æ˜¯åœ¨è¾“å…¥çª—å£çš„æœ€ä¸‹æ–¹è¿›é¡¹çš„æ“ä½œï¼Œæ›´åå‘æ–‡ä»¶ç®¡ç†ã€‚æ¯”å¦‚æ˜¾ç¤ºè¡Œå·ç­‰ç­‰ è¿™äº›æ¨¡å¼ä¹‹é—´å¯ä»¥ç›¸äº’è½¬æ¢ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š 1.1 åŸºç¡€å‘½ä»¤&amp;å«ä¹‰â€‹ ä»¥ä¸‹æ˜¯å¸¸è§çš„vimå¿«æ·é”®çš„ä¸­æ–‡ç‰ˆé€ŸæŸ¥å›¾ï¼š æŒ‡ä»¤ å«ä¹‰ i è¿›å…¥ç¼–è¾‘æ¨¡å¼å¹¶åœ¨å…‰æ ‡å‰é¢æ’å…¥ I è¿›å…¥ç¼–è¾‘æ¨¡å¼å¹¶åœ¨è¡Œé¦–æ’å…¥ a è¿›å…¥ç¼–è¾‘æ¨¡å¼å¹¶åœ¨å…‰æ ‡åé¢æ’å…¥ A è¿›å…¥ç¼–è¾‘æ¨¡å¼å¹¶åœ¨è¡Œå°¾æ’å…¥&lt; o è¿›å…¥ç¼–è¾‘æ¨¡å¼å¹¶åœ¨ä¸‹é¢å¦èµ·ä¸€è¡Œï¼Œå¹¶åœ¨è¡Œé¦–æ’å…¥ O è¿›å…¥ç¼–è¾‘æ¨¡å¼åœ¨ä¸Šé¢å¦èµ·ä¸€è¡Œï¼Œå¹¶åœ¨è¡Œé¦–æ’å…¥ v è¿›å…¥è¡Œé€‰æ¨¡å¼ ctrl + v è¿›å…¥ç«–é€‰æ¨¡å¼ i: è¿›å…¥ç¼–è¾‘æ¨¡å¼å¹¶åœ¨å…‰æ ‡å‰é¢æ’å…¥ I: è¿›å…¥ç¼–è¾‘æ¨¡å¼å¹¶åœ¨è¡Œé¦–æ’å…¥ a: è¿›å…¥ç¼–è¾‘æ¨¡å¼å¹¶åœ¨å…‰æ ‡åé¢æ’å…¥ A: è¿›å…¥ç¼–è¾‘æ¨¡å¼å¹¶åœ¨è¡Œå°¾æ’å…¥ o: è¿›å…¥ç¼–è¾‘æ¨¡å¼å¹¶åœ¨è¡Œé¦–æ’å…¥ O:è¿›å…¥ç¼–è¾‘æ¨¡å¼åœ¨ä¸Šé¢å¦èµ·ä¸€è¡Œï¼Œå¹¶åœ¨è¡Œé¦–æ’å…¥ 1.2 æ™®é€šæ¨¡å¼æ™®é€šæ¨¡å¼åˆå«å‘½ä»¤æ¨¡å¼ï¼Œé¡¾åæ€ä¹‰ï¼Œè¿™ç§æ¨¡å¼å°±æ˜¯ç”¨æ¥æ‰§è¡Œå„ç§å‘½ä»¤çš„ã€‚å‘½ä»¤å¯ä»¥åˆ†ä¸ºé•¿å‘½ä»¤å’ŒçŸ­å‘½ä»¤ï¼š 12é•¿å‘½ä»¤ï¼šä»¥:å¼€å¤´ï¼Œä»¥[Enter]ç»“å°¾çš„å‘½ä»¤ã€‚æ¯”å¦‚ï¼Œ:wq[Enter]çŸ­å‘½ä»¤ï¼šå¦‚a,o,i... 1.2.1 ç§»åŠ¨å…‰æ ‡ å‘½ä»¤ å«ä¹‰ h å¾€å·¦ç§»åŠ¨ä¸€ä¸ªå­—ç¬¦ j å¾€ä¸‹ç§»åŠ¨ä¸€ä¸ªå­—ç¬¦ k å¾€ä¸Šç§»åŠ¨ä¸€ä¸ªå­—ç¬¦ l å¾€å³ç§»åŠ¨ä¸€ä¸ªå­—ç¬¦ [n]- å¾€ä¸Šç§»åŠ¨nè¡Œ [n]+ å¾€ä¸‹ç§»åŠ¨nè¡Œ :næˆ–è€…[n]G ç§»åŠ¨åˆ°ç¬¬nè¡Œ gg ç§»åŠ¨åˆ°æ–‡æœ¬çš„ç¬¬ä¸€è¡Œ G ç§»åŠ¨åˆ°æ–‡æœ¬çš„æœ€åä¸€è¡Œ ^ ç§»åŠ¨åˆ°è¡Œé¦– $ ç§»åŠ¨åˆ°è¡Œå°¾ w ä¸‹ä¸€ä¸ªè¯çš„è¯é¦– b ä¸Šä¸€ä¸ªè¯çš„è¯é¦– t [char] å‘åæŸ¥æ‰¾ï¼Œå°†å…‰æ ‡ç§»åŠ¨åˆ°[char]çš„å‰ä¸€ä¸ªå­—ç¬¦ T[char] å‘å‰æŸ¥æ‰¾ï¼Œå°†å…‰æ ‡ç§»åŠ¨åˆ°[char]çš„åä¸€ä¸ªå­—ç¬¦ f[char] å‘åæŸ¥æ‰¾ï¼Œå°†å…‰æ ‡ç§»åŠ¨åˆ°[char] F[char] å‘å‰æŸ¥æ‰¾ï¼Œå°†å…‰æ ‡ç§»åŠ¨åˆ°[char] h :å¾€å·¦ç§»åŠ¨ä¸€ä¸ªå­—ç¬¦ j :å¾€ä¸‹ç§»åŠ¨ä¸€ä¸ªå­—ç¬¦ k :å¾€ä¸Šç§»åŠ¨ä¸€ä¸ªå­—ç¬¦ l :å¾€å³ç§»åŠ¨ä¸€ä¸ªå­—ç¬¦ [n]- :å¾€ä¸Šç§»åŠ¨nè¡Œ [n]+ :å¾€ä¸‹ç§»åŠ¨nè¡Œ :n æˆ– [n]G ç§»åŠ¨åˆ°ç¬¬nè¡Œ gg :ç§»åŠ¨åˆ°æ–‡ä»¶çš„ç¬¬ä¸€è¡Œ G :ç§»åŠ¨åˆ°æ–‡ä»¶çš„æœ€åä¸€è¡Œ ^ :ç§»åŠ¨åˆ°åˆ°è¡Œé¦– $ :ç§»åŠ¨è¡Œå°¾ w :ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªå•è¯çš„è¯é¦–ï¼ˆä¸­æ–‡å¥å­ç›´æ¥ç®—ä¸€ä¸ªå•è¯äº†ï¼‰ b :ç§»åŠ¨åˆ°ä¸Šä¸€ä¸ªå•è¯çš„è¯é¦–ï¼ˆä¸­æ–‡å¥å­ç›´æ¥ç®—ä¸€ä¸ªå•è¯äº†ï¼‰ t[char] :å‘åæŸ¥æ‰¾ï¼Œå°†å…‰æ ‡ç§»åŠ¨åˆ°[char]çš„å‰ä¸€ä¸ªå­—ç¬¦ T[char] :å‘å‰æŸ¥æ‰¾ï¼Œå°†å…‰æ ‡ç§»åŠ¨åˆ°[char]çš„åä¸€ä¸ªå­—ç¬¦ f[char] :å‘åæŸ¥æ‰¾ï¼Œå°†å…‰æ ‡ç§»åŠ¨åˆ°[char] F[char] :å‘å‰æŸ¥æ‰¾ï¼Œå°†å…‰æ ‡ç§»åŠ¨åˆ°[char] 1.2.2 åˆ é™¤(delete)æ–‡æœ¬â€‹ vimä¸­åˆ é™¤ç±»ä¼¼windowsä¸­çš„å‰ªåˆ‡ï¼Œä¼šå°†åˆ é™¤çš„å†…å®¹å¤åˆ¶åˆ°vimçš„â€å‰ªè´´æ¿â€ä¸­ï¼Œå…¶ä¸­dt[char],df[char]ç­‰éƒ½å¯ä»¥ç±»æ¯”ä¸Šé¢çš„ç§»åŠ¨å…‰æ ‡ã€‚ å‘½ä»¤ å«ä¹‰ x åˆ é™¤ä¸€ä¸ªå­—ç¬¦ dw åˆ é™¤ä¸€ä¸ªå•è¯ [n]dw æˆ– d[n]w åˆ é™¤nä¸ªå•è¯ dd åˆ é™¤ä¸€è¡Œ [n]dd æˆ– d[n]d åˆ é™¤nè¡Œ :[m],[n]d åˆ é™¤[m,n] d^ åˆ é™¤åˆ°è¡Œé¦– d$ åˆ é™¤åˆ°è¡Œå°¾ dt[char] å‘ååˆ é™¤ï¼Œåˆ é™¤åˆ°[char] dT[char] å‘å‰åˆ é™¤ï¼Œåˆ é™¤åˆ°[char] df[char] å‘ååˆ é™¤ï¼Œåˆ é™¤åˆ°[char]çš„ä¸‹ä¸€ä¸ªå­—ç¬¦ dF[char] å‘å‰åˆ é™¤ï¼Œåˆ é™¤åˆ°[char]çš„å‰ä¸€ä¸ªå­—ç¬¦ 1.2.3 å¤åˆ¶(yank)æ–‡æœ¬ç±»æ¯”ä¸Šé¢çš„åˆ é™¤æ–‡æœ¬ï¼ŒæŠŠdæ¢æˆyå³å¯ å‘½ä»¤ å«ä¹‰ yy å¤åˆ¶å…‰æ ‡æ‰€åœ¨ä¸€è¡Œ [n]yyæˆ–è€…y[n]y å¤åˆ¶å…‰æ ‡èµ·çš„nè¡Œ :[m],[n]y å¤åˆ¶[m,n]è¡Œ yw å¤åˆ¶å…‰æ ‡æ‰€åœ¨çš„ä¸€ä¸ªå•è¯ï¼ˆå¦‚æœå…‰æ ‡åœ¨å•è¯å†…éƒ¨ï¼Œåˆ™å¤åˆ¶å…‰æ ‡æ‰€åœ¨ä½ç½®åˆ°æœ«å°¾çš„éƒ¨åˆ†ï¼Œæ±‰è¯­ä¸€ä¸ªå¥å­å½“ä¸ºä¸€ä¸ªå•è¯ï¼‰ [n]ywæˆ–y[n]w å¤åˆ¶nä¸ªå•è¯ï¼ˆåŒä¸Šï¼‰ yt[char] å‘åå¤åˆ¶ï¼Œå¤åˆ¶åˆ°[char] yT[char] å‘å‰å¤åˆ¶ï¼Œå¤åˆ¶åˆ°[char] yf[char] å‘åå¤åˆ¶ï¼Œå¤åˆ¶åˆ°[char]çš„ä¸‹ä¸€ä¸ªå­—ç¬¦ yF[char] å‘å‰å¤åˆ¶ï¼Œå¤åˆ¶åˆ°[char]çš„å‰ä¸€ä¸ªå­—ç¬¦ 1.2.4 ç²˜è´´,æ’¤é”€å’Œæ¢å¤ å‘½ä»¤ å«ä¹‰ pæˆ–è€…P(paste) ç²˜è´´ï¼ˆå°†ä¸Šé¢å¤åˆ¶çš„å†…å®¹ç²˜è´´ï¼‰ u(undo) æ’¤é”€ ctrl + r(recovery) æ¢å¤ 1.2.5 ä¿®æ”¹æ–‡æœ¬â€‹ åˆ é™¤+è¿›å…¥ç¼–è¾‘æ¨¡å¼ å‘½ä»¤ å«ä¹‰ ccæˆ–è€…S åˆ é™¤å½“å‰è¡Œå¹¶è¿›å…¥æ’å…¥ï¼ˆç¼–è¾‘ï¼‰æ¨¡å¼ [n]ccæˆ–[n]S åˆ é™¤nè¡Œï¼Œå¹¶è¿›å…¥æ’å…¥ï¼ˆç¼–è¾‘ï¼‰æ¨¡å¼ cw åˆ é™¤ä¸€ä¸ªå•è¯ï¼Œå¹¶è¿›å…¥æ’å…¥ï¼ˆç¼–è¾‘ï¼‰æ¨¡å¼ [n]cwæˆ–c[n]w åˆ é™¤nä¸ªå•è¯ï¼Œå¹¶è¿›å…¥æ’å…¥ï¼ˆç¼–è¾‘ï¼‰æ¨¡å¼ c^ åˆ é™¤åˆ°è¡Œé¦–å¹¶è¿›å…¥æ’å…¥æ¨¡å¼ c$ åˆ é™¤åˆ°è¡Œå°¾å¹¶è¿›å…¥æ’å…¥æ¨¡å¼ ct[char] å‘ååˆ é™¤ï¼Œåˆ é™¤åˆ°[char]ï¼Œå¹¶è¿›å…¥æ’å…¥æ¨¡å¼ cT[char] å‘å‰åˆ é™¤ï¼Œåˆ é™¤åˆ°[char]ï¼Œå¹¶è¿›å…¥æ’å…¥æ¨¡å¼ cf[char] å‘ååˆ é™¤ï¼Œåˆ é™¤åˆ°[char]çš„ä¸‹ä¸€ä¸ªå­—ç¬¦ï¼Œå¹¶è¿›å…¥æ’å…¥æ¨¡å¼ cF[char] å‘å‰åˆ é™¤ï¼Œåˆ é™¤åˆ°[char]çš„ä¸Šä¸€ä¸ªå­—ç¬¦ï¼Œå¹¶è¿›å…¥æ’å…¥æ¨¡å¼ c[n]G åˆ é™¤åˆ°ç¬¬nè¡Œï¼Œå¹¶è¿›å…¥æ’å…¥æ¨¡å¼ cG åˆ é™¤åˆ°æ–‡ä»¶æœ«å°¾ï¼Œå¹¶è¿›å…¥æ’å…¥æ¨¡å¼ cgg åˆ é™¤åˆ°æ–‡ä»¶é¦–è¡Œï¼Œå¹¶è¿›å…¥æ’å…¥æ¨¡å¼ 1.2.6 æŸ¥æ‰¾ å‘½ä»¤ å«ä¹‰ &#x2F;pattern ä»å…‰æ ‡çš„ä½ç½®å‘åæŸ¥æ‰¾ï¼ŒæŸ¥æ‰¾åŒ¹é…patternçš„å†…å®¹ï¼Œpatternä¸ºæ­£åˆ™è¡¨è¾¾å¼ ?pattern ä»å…‰æ ‡çš„ä½ç½®å‘å‰æŸ¥æ‰¾ï¼ŒæŸ¥æ‰¾åŒ¹é…patternçš„å†…å®¹ï¼Œpatternä¸ºæ­£åˆ™è¡¨è¾¾å¼å†…å®¹ n ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªåŒ¹é…é¡¹ N ç§»åŠ¨åˆ°ä¸Šä¸€ä¸ªåŒ¹é…é¡¹ 1.2.7 æ›¿æ¢(substitute)æ–‡æœ¬ å‘½ä»¤ å«ä¹‰ :s&#x2F;pattern&#x2F;substitute åªä¼šæ›¿æ¢å…‰æ ‡æ‰€åœ¨çš„è¡Œçš„ç¬¬ä¸€ä¸ªåŒ¹é…é¡¹ :s&#x2F;pattern&#x2F;substitute&#x2F;g æ›¿æ¢å…‰æ ‡æ‰€åœ¨è¡Œçš„æ‰€æœ‰åŒ¹é…é¡¹ :[m],[n]s&#x2F;pattern&#x2F;substitute&#x2F;g æ›¿æ¢[m,n]è¡Œçš„æ‰€æœ‰åŒ¹é…é¡¹ :%s&#x2F;pattern&#x2F;substitute&#x2F;g æ›¿æ¢å…¨æ–‡çš„æ‰€æœ‰åŒ¹é…é¡¹ 1234:w å°†bufferé‡Œé¢çš„å†…å®¹å†™å…¥æ–‡ä»¶ï¼Œå³ä¿å­˜:q é€€å‡º:q! ä¸ä¿å­˜é€€å‡º:wq ä¿å­˜é€€å‡º 1. 2 è§†å›¾æ¨¡å¼è§†å›¾æ¨¡å¼æ˜¯ç”¨æ¥é€‰æ‹©å†…å®¹çš„ã€‚é€‰æ‹©å†…å®¹ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥å¯¹å…¶è¿›è¡Œå¤åˆ¶æˆ–åˆ é™¤äº†ã€‚è¿› å…¥è§†å›¾æ¨¡å¼æœ‰ä¸¤ç§æ¨¡å¼ï¼š å¸¸è§ç”¨æ³•: æ‰¹é‡æ³¨é‡Š 12v: è¡Œé€‰æ¨¡å¼[ctrl]+v: ç«–é€‰æ¨¡å¼ 1.2.1 å¤šè¡Œæ³¨é‡Š1 ) [ctrl]+v è¿›å…¥ç«–é€‰æ¨¡å¼2 ) é€‰æ‹©èŒƒå›´3 ) è¾“å…¥I4 ) è¾“å…¥&#x2F;&#x2F;5 ) è¾“å…¥[ESC] 2 æ–‡ä»¶çš„æ“ä½œ å‘½ä»¤ å«ä¹‰ :w å°†è¾“å…¥bufferé‡Œé¢çš„å†…å®¹å†™å…¥æ–‡ä»¶ï¼Œå³ä¿å­˜ :q é€€å‡º :q! å¼ºåˆ¶ä¸ä¿å­˜é€€å‡º :wq ä¿å­˜é€€å‡º æ³¨æ„ï¼š[ctrl] + s ä¸è¡¨ç¤ºä¿å­˜ï¼Œè€Œæ˜¯è¿›å…¥åƒµæ­»çŠ¶æ€ï¼›[ctrl] + q å¯ä»¥é€€å‡ºåƒµæ­»çŠ¶æ€ã€‚ 3 çª—å£è£å‰ª å‘½ä»¤ å«ä¹‰ :split(:sp) æ–°æ–‡ä»¶å æ°´å¹³åˆ†å‰²ï¼Œå¹¶åœ¨æ–°çª—å£ä¸­æ‰“å¼€æ–°æ–‡ä»¶ :new æ–°æ–‡ä»¶å æ°´å¹³åˆ†å‰²ï¼Œå¹¶åœ¨æ–°çª—å£ä¸­æ‰“å¼€æ–°æ–‡ä»¶ :vsplit(:vsp) æ–°æ–‡ä»¶å å‚ç›´åˆ†å‰²ï¼Œå¹¶åœ¨æ–°çª—å£ä¸­æ‰“å¼€æ–°æ–‡ä»¶ :vnew æ–°æ–‡ä»¶å å‚ç›´åˆ†å‰²ï¼Œå¹¶åœ¨æ–°çª—å£ä¸­æ‰“å¼€æ–°æ–‡ä»¶ ctrl + ww åˆ‡æ¢çª—å£ :wall(:wa) ä¿å­˜æ‰€æœ‰ä¿®æ”¹è¿‡çš„çª—å£ :qall(:qa) é€€å‡ºæ‰€æœ‰çª—å£ :only(:o) ä¿ç•™å½“å‰çª—å£ï¼Œå…³é—­æ‰€æœ‰å…¶å®ƒçª—å£ 4 é…ç½®Vimæˆ‘ä»¬å¯ä»¥åœ¨ ~&#x2F;.vimrc æ–‡ä»¶ä¸­é…ç½® Vimï¼Œè®© Vim çš„ä½¿ç”¨æ›´åŠ å¾—å¿ƒåº”æ‰‹ã€‚ æ¯æ¬¡å¯åŠ¨ Vimæ—¶ï¼ŒVim éƒ½ä¼šè¯»å–è¿™ä¸ªæ–‡ä»¶ï¼Œç„¶åå°†é‡Œé¢çš„å‘½ä»¤æ‰§è¡Œä¸€éã€‚ 12341 ) rcæ˜¯&quot;running command&quot;çš„æ„æ€ã€‚æ¯æ¬¡å¯åŠ¨æ—¶ï¼Œéƒ½ä¼šæ‰§è¡Œè¿™ä¸ªæ–‡ä»¶ä¸­çš„å‘½ä»¤ã€‚2 ) å¦‚æœæ²¡æœ‰~/.vimrcæ–‡ä»¶ï¼Œä¸è¦æƒŠæ…Œï¼Œè‡ªå·±åˆ›å»ºä¸€ä¸ªå³å¯ã€‚3 ) ä½œä¸ºåˆå­¦è€…ï¼Œä¸å»ºè®®å¤§å®¶è‡ªå·±å»é…ç½®Vimã€‚æˆ‘ä»¬åªéœ€è¦å®‰è£…vimpluså°±å¥½äº†ï¼Œvimplusä¼šå¸®æˆ‘ä»¬é…ç½®å¥½Vimã€‚ 5 vimpluså®‰è£…å¯ä»¥å‚è€ƒè¿™ä¸ªè§†é¢‘ 6 ç»ƒä¹ æ‰‹å†ŒVim è´´å¿ƒåœ°ä¸ºå¤§å®¶æä¾›äº†ä¸€ä¸ªç»ƒä¹ æ‰‹å†Œ vimtutor: 12$ vimtutor$ vimtutor zh_CN # æ±‰åŒ–ç‰ˆçš„vimtutor Advice: å»ºè®®ä¸ç†Ÿç»ƒçš„åŒå­¦å¯ä»¥æ¯å¤©æŠ½å‡ºä¸€å®šçš„æ—¶é—´å»ç»ƒä¹ vimtutor","link":"","tags":[{"name":"vim","slug":"vim","permalink":"https://lyroom.github.io/tags/vim/"}]},{"title":"hexoå›¾ç‰‡æ’å…¥é—®é¢˜","date":"2024-05-11T02:57:44.000Z","path":"2024/05/11/hexoå›¾ç‰‡æ’å…¥é—®é¢˜/","text":"â€‹ ä»Šå¤©åœ¨è¿ç§»å®Œåšå®¢ä¹‹åï¼Œå‘ç°ä¹‹å‰æ’å…¥çš„å›¾ç‰‡éƒ½æ²¡äº†ï¼Œè¿™å°±å¾ˆæ¼äººäº†ï¼Œäºæ˜¯å°±å¼€å§‹äº†æˆ‘çš„bugè§£å†³ä¹‹è·¯ã€‚ ä¸€.æ™®éè§£å†³åŠæ³•å®‰è£…hexo-image-imgæ’ä»¶åœ¨bolgæ ¹éƒ¨ç›®å½•ä¸‹æ‰¾åˆ°_config.yamlæ–‡ä»¶ï¼Œå°†post_asset_folderé€‰é¡¹è®¾ç½®ä¸ºtrueï¼Œä½œç”¨å°±æ˜¯åœ¨hexo new â€œæ–‡ç« åå­—â€çš„æ—¶å€™ï¼Œåœ¨åŒä¸€ç›®å½•ä¸‹è‡ªåŠ¨ç”Ÿä¸€ä¸ªåŒåå­—çš„æ–‡ä»¶å¤¹ï¼Œç”¨äºå­˜æ”¾å½“å‰æ–‡ç« æ‰€éœ€è¦çš„å›¾ç‰‡ã€‚ åœ¨ç»ˆç«¯è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼š 1npm install hexo-asset-image --save å®‰è£…å®Œæˆä¹‹åæ¯æ¬¡æŒ‰ç…§ä»¥ä¸‹æ ¼å¼æ’å…¥å›¾ç‰‡ 1{% asset_img \"span>\" \"tittle\" %} å¯ä»¥çœ‹å‡ºè¿˜æ˜¯ä¸èƒ½æ­£å¸¸æ˜¾ç¤ºå›¾ç‰‡ï¼Œå›¾ç‰‡è¿æ¥å¦‚ä¸‹ 1http://localhost:4000/.com//dilireba.jpg è·¯å¾„å¤šäº†ä¸€ä¸ªâ€.comâ€ï¼Œè¿™å°±æ˜¯è¿™ä¸ªæ’ä»¶çš„å‘çˆ¹ä¹‹å¤„,è™½ç„¶ç½‘ä¸Šæœ‰ä¿®æ”¹çš„åŠæ³•ï¼Œä½†æ˜¯ä¸æƒ³ä¿®æ”¹æºä»£ç ï¼Œæœæ–­å¸è½½ï¼Œå†å»gitæ‰¾ä¸€ä¸ªèƒ½ç”¨çš„ 12npm uninstall hexo-asset-imagenpm install git://github.com/yiyungent/hexo-asset-img.git#main æˆåŠŸè§£å†³ï¼Œä½†æ˜¯ç›®å‰é‡åˆ°çš„é—®é¢˜æ˜¯ï¼Œè¿ªä¸½çƒ­å·´çš„å›¾å¤ªå¤§äº†ï¼Œæœ‰ä»€ä¹ˆåŠæ³•å°†å…¶ç¼©å°ä¸€ç‚¹äº†ï¼Ÿé‡äº‹ä¸å†³ï¼Œå¯é—®æ–‡æ¡£ï¼ å®˜æ–¹å›¾ç‰‡æ’å…¥æ–¹æ³•æ–¹æ³•åœ¨ å®˜æ–¹æ–‡æ¡£ä¸­æˆ‘ä»¬å¯ä»¥çŸ¥é“ä¸€ç§ä¿®æ”¹æ’å…¥å¹¶å›¾ç‰‡å¤§å°çš„æ–¹æ³•å¦‚ä¸‹ï¼š å¦‚å›¾æ‰€ç¤ºï¼Œå›¾ç‰‡å¤§å°å·²ç»ä¿®æ”¹æˆåŠŸäº†ã€‚ ç¼ºç‚¹è¿™ä¸ªæ–¹æ³•æˆ‘ä»ç„¶è§‰å¾—ä¸ç®—å¤ªæ»¡æ„ï¼Œå› ä¸ºå¯¼å…¥typoraæ–‡æ¡£æ—¶ä¸ä»…éœ€è¦ä¿®æ”¹è·¯å¾„è¿˜éœ€è¦ä¿®æ”¹æ–‡ä»¶å¤¹ï¼Œå¹¶ä¸”æ— æ³•ç­‰æ¯”ä¾‹ç¼©æ”¾å›¾ç‰‡ï¼Œåªèƒ½æ‰‹åŠ¨è·³æ•´è¿™ç‚¹æˆ‘æ˜¯ä¸æ»¡æ„çš„ã€‚ HTMLåœ¨sourceç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªimagesæ–‡ä»¶å¤¹ï¼Œimagesé‡Œé¢å­˜æ”¾éœ€è¦çš„ç…§ç‰‡,æ–‡ä»¶ç»“æ„ç›®å½•å¦‚ä¸‹ 123456source â”œâ”€images â”‚ dilireba.jpg â”‚ â””â”€_posts lystyle.md ä½¿ç”¨htmlè¯­æ³•æ¥æ’å…¥å›¾ç‰‡ï¼Œå¹¶ä½¿ç”¨zoomå…ƒç´ å¯¹å›¾ç‰‡ç¼©æ”¾ï¼Œå¦‚ä¸‹ï¼š 123&lt;center&gt;&lt;img src=&quot;images/dilireba.jpg&quot; style=&quot;zoom:50%;&quot; /&gt;&lt;/center&gt; æ•ˆæœå¦‚ä¸‹ï¼š äºŒ.æˆ‘çš„è§£å†³åŠæ³•å®‰è£…hexo-image-linkæ’ä»¶å¦‚æœä¹‹å‰å®‰è£…äº†hexo-image-imgæ’ä»¶éœ€è¦å…ˆå¸è½½ 1npm uninstall hexo-image-img å°†æ ¹ç›®å½•ä¸‹çš„_config.ymlä¸­çš„post_asset_folderç½®ä¸ºtrueï¼Œç›®çš„å°±æ˜¯åœ¨hexo new â€æ–‡æ¡£åâ€œçš„æ—¶å€™åœ¨åŒä¸€ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªåŒåæ–‡ä»¶å¤¹ 1post_asset_folder: true ä¹‹ååªè¦åœ¨åŒåæ–‡ä»¶å¤¹ï¼ˆå¯ä»¥æ‰‹åŠ¨æ–°å»ºï¼‰ä¸­ï¼Œå­˜æ”¾éœ€è¦æ’å…¥çš„å›¾ç‰‡ï¼Œä¾¿å¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œæ–‡ä»¶ç›®å½•å¦‚ä¸‹ï¼š 12345678910source â”œâ”€images â”‚ dilireba.jpg â”‚ â””â”€_posts â”‚ hello-world.md â”‚ lystyle.md â”‚ â””â”€lystyle dilireba.jpg ä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š ä¼ ç»Ÿæ’å…¥è·¯å¾„ç®€åŒ–ï¼Œæœ¬åœ°å’Œgithubéƒ½èƒ½é¢„è§ˆå›¾ç‰‡äº† 1![dilireba](lystyle/dilireba.jpg) æ•ˆæœå›¾ï¼š htmlæ–¹æ³•ï¼Œå¯ä»¥ç¼©æ”¾å›¾ç‰‡å¤§å°ï¼Œå’Œä½ç½® 1234567891011&lt;!-- ç®€çº¦ç‰ˆæœ¬ --&gt;&lt;center&gt;&lt;img src=&quot;lystyle/dilireba.jpg&quot; style=&quot;zoom:50%;&quot; /&gt;â€‹ &lt;/center&gt;&lt;!-- å¤æ‚ç‰ˆæœ¬ --&gt;&lt;center&gt;&lt;img src=&quot;lystyle/dilireba.jpg&quot; title=&quot;dilireba&quot; alt=&quot;å›¾ç‰‡å¥½åƒèµ°ä¸¢äº†&quot; style=&quot;zoom:50%&quot;&gt;&lt;!--alt:è¡¨ç¤ºå›¾ç‰‡æœªåŠ è½½æ—¶æ˜¾ç¤ºçš„æ–‡å­—--&gt;&lt;div class=&quot;img-alt is-center&quot; align=&quot;center&quot;&gt;dilireba~&lt;/div&gt; &lt;!--è¿™é‡Œå†™çš„æ˜¯å›¾æ³¨--&gt;&lt;/center&gt; æ•ˆæœå›¾ï¼š","link":"","tags":[{"name":"hexo","slug":"hexo","permalink":"https://lyroom.github.io/tags/hexo/"},{"name":"bugè§£å†³æ—¥è®°","slug":"bugè§£å†³æ—¥è®°","permalink":"https://lyroom.github.io/tags/bug%E8%A7%A3%E5%86%B3%E6%97%A5%E8%AE%B0/"}]},{"title":"hexoåšå®¢çš„è¿ç§»","date":"2024-05-10T10:17:39.000Z","path":"2024/05/10/hexoåšå®¢çš„è¿ç§»/","text":"â€‹ æœ€è¿‘é‡è£…äº†ç³»ç»Ÿï¼Œhexoç›¸å…³çš„ç¯å¢ƒéƒ½æ²¡äº†ï¼Œä½†æ˜¯è€åšå®¢çš„æ–‡ä»¶å¤¹è¿˜åœ¨ï¼Œè®°å½•ä¸€ä¸‹åšå®¢è¿ç§»çš„è¿‡ç¨‹ã€‚ ç¯å¢ƒå‡†å¤‡gitä¸€.ä¸‹è½½ å®˜ç½‘ä¸‹è½½é“¾æ¥ (ä¸æ¨èï¼Œå¤ªæ…¢äº†) é˜¿é‡Œé•œåƒæº(æ¨èï¼Œä»¥ä¸‹ä¸ºä¸‹è½½æ•™ç¨‹) â€‹ å¾€ä¸‹æ»‘ï¼Œæ‰¾åˆ°æœ€æ–°ç‰ˆå®‰è£…åŒ…ä¸‹è½½ï¼Œé€‰æ‹©64bitç‰ˆæœ¬ä¸‹è½½ äºŒ.å®‰è£…ä¸é…ç½®â€‹ å®‰è£…æ•™ç¨‹(è¿™ä¸ªæ¯”è¾ƒè¯¦ç»†ï¼Œå°±ä¸å±•å¼€è®²äº†) â€‹ é…ç½®æ•™ç¨‹(é…ç½®æ•™ç¨‹) nodeä¸€.ä¸‹è½½ä¸å®‰è£…windowsâ€‹ å®˜æ–¹é“¾æ¥ linuxä½¿ç”¨aptå®‰è£…çš„ç‰ˆæœ¬å¹¶ä¸æ˜¯æœ€æ–°ç‰ˆæœ¬ï¼Œè¿™å¯èƒ½å¯¼è‡´ä¹‹åçš„å®‰è£…ä¼šæœ‰é—®é¢˜ï¼Œæ‰€ä»¥ä¸‹é¢æ˜¯å®‰è£…æœ€æ–°node.jsçš„æ•™ç¨‹ï¼š æ·»åŠ NodeSourceä»“åº“ å¯ä»¥å…ˆå»æŸ¥çœ‹ä»¥ä¸‹nodeæœ€æ–°ç‰ˆæœ¬,ç›®å‰æœ€æ–°æ˜¯24.x12# å®‰è£…Node.js 24.xç‰ˆæœ¬curl -fsSL https://deb.nodesource.com/setup_24.x | sudo -E bash - å®‰è£…node.jså’Œnpm1sudo apt-get install -y nodejs â€‹å®‰è£…å¥½åï¼Œæ£€æŸ¥æ˜¯å¦å®‰è£…æˆåŠŸï¼Œåœ¨cmdä¸­è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼ŒæŸ¥çœ‹node.jså’Œnpmç‰ˆæœ¬ 12node -vnpm -v hexoä¸€.å®‰è£…ä¸é…ç½®12npm install -g hexo-clihexo -v è¿ç§»å·¥ä½œæ–‡ä»¶ç›®å½•è¯¦è§£æ‰“å¼€æ—§åšå®¢æ–‡ä»¶å¤¹ï¼Œç›®å½•ç»“æ„å¦‚ä¸‹ ä¿ç•™æ–‡ä»¶ï¼ˆå¤¹ï¼‰ _config.ymlï¼šç«™ç‚¹é…ç½® _config.landscape.ymlï¼šLandscape ä¸»é¢˜çš„é…ç½®æ–‡ä»¶ï¼ŒLandscape æ˜¯ Hexo çš„é»˜è®¤ä¸»é¢˜ã€‚ package.jsonï¼šè¯´æ˜ä½¿ç”¨é‚£äº›åŒ… package-lock.jsonï¼šæ–‡ä»¶æ˜¯ä¸€ä¸ªè‡ªåŠ¨ç”Ÿæˆçš„æ–‡ä»¶ï¼Œè®°å½•äº†æ•´ä¸ªé¡¹ç›®çš„å®Œæ•´ä¾èµ–æ ‘çš„å…·ä½“ç‰ˆæœ¬ä¿¡æ¯ã€‚è¿™ç¡®ä¿äº†ï¼Œä¸è®ºä½•æ—¶ã€ä½•åœ°è¿è¡Œ npm installï¼Œéƒ½å°†å®‰è£…å®Œå…¨ç›¸åŒç‰ˆæœ¬çš„ä¾èµ–ã€‚å®ƒå¸®åŠ©å¼€å‘è€…é¿å…ç”±äºä¾èµ–ç‰ˆæœ¬ä¸åŒè€Œå¯¼è‡´çš„æ½œåœ¨é—®é¢˜ã€‚ scaffoldsï¼šæ–‡ç« çš„æ¨¡æ¿ sourceï¼šè‡ªå·±å†™çš„åšå®¢æ–‡ä»¶ themesï¼šä¸»é¢˜ .gitignoreï¼šé™å®šåœ¨æäº¤çš„æ—¶å€™å“ªäº›æ–‡ä»¶å¯ä»¥å¿½ç•¥ åˆ é™¤æ–‡ä»¶ï¼ˆå¤¹ï¼‰ .gitï¼šæ— è®ºæ˜¯åœ¨ç«™ç‚¹æ ¹ç›®å½•ä¸‹ï¼Œè¿˜æ˜¯ä¸»é¢˜ç›®å½•ä¸‹çš„.gitæ–‡ä»¶ï¼Œéƒ½å¯ä»¥åˆ æ‰ã€‚ node_modulesï¼šåœ¨ç”¨npm installä¼šé‡æ–°ç”Ÿæˆ publicï¼šhexo gä¼šé‡æ–°ç”Ÿæˆ .deploy_gitï¼šåœ¨ä½¿ç”¨hexo dæ—¶ä¹Ÿä¼šé‡æ–°ç”Ÿæˆ db.jsonæ–‡ä»¶ å‚è€ƒé“¾æ¥1 å‚è€ƒé“¾æ¥2 å®‰è£…ä¾èµ–å’Œç»„ä»¶è¿›å…¥åšå®¢æ–‡ä»¶å¤¹ï¼ˆä¸Šå›¾æ‰€ç¤ºç›®å½•ï¼‰ï¼Œä¾æ¬¡è¾“å…¥ä»¥ä¸‹æŒ‡ä»¤ 1234npm installnpm install hexo-deployer-git --save # ä¸ºäº†ä½¿ç”¨hexo dæ¥éƒ¨ç½²åˆ°gitä¸Š npm install hexo-generator-feed --save # ä¸ºäº†å»ºç«‹RSSè®¢é˜…npm install hexo-generator-sitemap --save # ä¸ºäº†å»ºç«‹ç«™ç‚¹åœ°å›¾ ä½¿ç”¨å’ŒéªŒè¯123hexo cleanhexo ghexo s å…ˆæœ¬åœ°è®¿é—®çœ‹çœ‹èƒ½ä¸èƒ½æ‰“å¼€ï¼Œå¦‚æœèƒ½æ‰“å¼€ï¼Œå°±éƒ¨ç½²ä¸€ä¸‹å§ 1hexo d okäº†ï¼ï¼ï¼é‡åˆ°çš„é—®é¢˜1.unable to accessåœ¨ä½¿ç”¨hexo dæ—¶ï¼Œé‡åˆ°ä»¥ä¸‹é”™è¯¯ï¼š 1fatal: unable to access &#x27;https://github.com/lyroom/lyroom.github.io.git/&#x27;: GnuTLS recv error (-110): The TLS connection was non-properly terminated. è§£å†³æ–¹æ¡ˆï¼š 1apt-get upgrade openssh-client //å‡çº§ssh 2.fatal: unable to access â€¦ Failure when receiving data from the peerå‡çº§ä¹‹åä»ç„¶æŠ¥é”™ï¼š 12345678Username for &#x27;https://github.com&#x27;: codingfish@outlook.comPassword for &#x27;https://codingfish%40outlook.com@github.com&#x27;: fatal: unable to access &#x27;https://github.com/lyroom/lyroom.github.io.git/&#x27;: Failure when receiving data from the peerFATAL Something&#x27;s wrong. Maybe you can find the solution here: https://hexo.io/docs/troubleshooting.htmlError: Spawn failed at ChildProcess.&lt;anonymous&gt; (/root/Blog/Blog/node_modules/hexo-util/lib/spawn.js:51:21) at ChildProcess.emit (node:events:507:28) at ChildProcess._handle.onexit (node:internal/child_process:294:12) è§£å†³æ–¹æ³•ï¼šæ”¹ç”¨sshæ¥è¿œç¨‹éƒ¨ç½² ç”Ÿæˆsshå…¬é’¥ï¼Œå¹¶æ·»åŠ åˆ°githubä¸­ï¼Œä¸Šé¢æ•™ç¨‹ä¸­æœ‰æåˆ° æµ‹è¯•sshè¿æ¥ï¼š 12345# æµ‹è¯• GitHub è¿æ¥ssh -T git@github.com# åº”è¯¥çœ‹åˆ°æˆåŠŸæ¶ˆæ¯ï¼š# Hi lyroom! You&#x27;ve successfully authenticated, but GitHub does not provide shell access. ä¿®æ”¹_config.ymlæ–‡ä»¶ 1234deploy: type: git repo: git@github.com:lyroom/lyroom.github.io.git branch: master é…ç½®æœ¬åœ°Gitä»“åº“ï¼š 1234567891011121314# è¿›å…¥é¡¹ç›®ç›®å½•cd /root/Blog/Blog# åˆå§‹åŒ– Git ä»“åº“git init# è®¾ç½®è¿œç¨‹ä»“åº“åœ°å€ï¼ˆSSH æ ¼å¼ï¼‰git remote add origin git@github.com:lyroom/lyroom.github.io.git# éªŒè¯è¿œç¨‹ä»“åº“è®¾ç½®git remote -v# åº”è¯¥æ˜¾ç¤ºï¼š# origin git@github.com:lyroom/lyroom.github.io.git (fetch)# origin git@github.com:lyroom/lyroom.github.io.git (push)","link":"","tags":[{"name":"github","slug":"github","permalink":"https://lyroom.github.io/tags/github/"},{"name":"git","slug":"git","permalink":"https://lyroom.github.io/tags/git/"},{"name":"hexo","slug":"hexo","permalink":"https://lyroom.github.io/tags/hexo/"},{"name":"åšå®¢","slug":"åšå®¢","permalink":"https://lyroom.github.io/tags/%E5%8D%9A%E5%AE%A2/"},{"name":"node","slug":"node","permalink":"https://lyroom.github.io/tags/node/"},{"name":"npm","slug":"npm","permalink":"https://lyroom.github.io/tags/npm/"}]},{"title":"æ–‡ä»¶æµè¯¦è§£","date":"2024-04-11T11:23:00.000Z","path":"2024/04/11/æ–‡ä»¶è¯¦è§£/","text":"1.ä»€ä¹ˆæ˜¯æ–‡ä»¶ æ–‡ä»¶æ˜¯ä»¥ç¡¬ç›˜ä¸ºè½½ä½“çš„å­˜å‚¨åœ¨è®¡ç®—æœºä¸Šçš„ä¿¡æ¯é›†åˆ æ–‡ä»¶å¯ä»¥æ˜¯æ–‡æœ¬æ–‡æ¡£ï¼Œå›¾ç‰‡ï¼Œç¨‹åº ç”¨æˆ·è¿›è¡Œçš„è¾“å…¥è¾“å‡ºä¸­ï¼Œä»¥æ–‡ä»¶ä¸ºåŸºæœ¬å•ä½ æ–‡ä»¶åˆ†ä¸ºæœ‰ç»“æ„æ–‡ä»¶ï¼Œæ— ç»“æ„æ–‡ä»¶ 2.æ‰“å¼€å…³é—­&#x2F;æ–‡ä»¶Cè¯­è¨€é€šè¿‡æŒ‡é’ˆå¯¹æ–‡ä»¶æµè¿›è¡Œè®¿é—®ï¼ŒæŒ‡é’ˆç±»å‹ä¸ºFILE*ï¼Œåœ¨&lt;stdio.h&gt;ä¸­é»˜è®¤æä¾›äº†ä¸‰ä¸ªæ ‡å‡†æµï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ä¸ç”¨æ‰“å¼€å’Œå…³é—­ æ–‡ä»¶æŒ‡é’ˆ æµ é»˜è®¤å«ä¹‰ stdin æ ‡å‡†è¾“å…¥ é”®ç›˜ stdout æ ‡å‡†è¾“å‡º å±å¹• stderr æ ‡å‡†é”™è¯¯ å±å¹• 2.1 fopen1FILE* fopen(const char* filename, const char* mode);//ä»¥modeæ–¹å¼æ‰“å¼€è·¯å¾„ä¸ºfilenameçš„æ–‡ä»¶ filenameï¼šæ–‡ä»¶è·¯å¾„ modeï¼šæ–‡ä»¶æ‰“å¼€æ¨¡å¼ è¿”å›å€¼ï¼šå¦‚æœæ‰“å¼€æˆåŠŸï¼Œåˆ™è¿”å›æ–‡ä»¶å¥æŸ„FILEç±»å‹çš„å€¼ï¼Œå¦‚æœå¤±è´¥ï¼Œåˆ™è¿”å›EOF 2.2 fclose1int fclose(FILE* stream);//å…³é—­ç¨‹åºä¸å†ä½¿ç”¨çš„æ–‡ä»¶ï¼Œä¸€èˆ¬å’Œfopenæˆå¯¹å‡ºç° streamï¼šæ‰“å¼€å¥æŸ„æŒ‡é’ˆï¼ˆfopençš„è¿”å›å€¼ï¼‰ è¿”å›å€¼ï¼šå¦‚æœæˆåŠŸå…³é—­è¿”å›0ï¼Œå¤±è´¥è¿”å›EOF 2.3 modeåˆ†ç±»1.æ–‡æœ¬æ–‡ä»¶ï¼ˆæœ‰ç»“æ„æ–‡ä»¶ï¼‰ modeåˆ†ç±» å«ä¹‰ â€œrâ€ï¼ˆreadï¼‰ ä»¥åªè¯»çš„æ–¹å¼æ‰“å¼€æ–‡ä»¶ï¼ˆæ–‡ä»¶å¿…é¡»å­˜åœ¨ï¼Œå¦åˆ™è¿”å›EOFï¼‰ â€œwâ€ï¼ˆwriteï¼‰ æ‰“å¼€æ–‡ä»¶ç”¨äºå†™å…¥ï¼ˆæ–‡ä»¶ä¸å­˜åœ¨åˆ™åˆ›å»ºï¼‰ï¼Œæ¸…ç©ºæ–‡ä»¶å†å†™å…¥ â€œaâ€ï¼ˆappendï¼‰ æ‰“å¼€æ–‡ä»¶åœ¨æœ«å°¾è¿½åŠ ï¼ˆæ–‡ä»¶ä¸å­˜åœ¨åˆ™åˆ›å»ºï¼‰ â€œr+â€ æ‰“å¼€æ–‡ä»¶ç”¨äºè¯»å’Œå†™ï¼ˆæ–‡ä»¶å¿…é¡»å­˜åœ¨ï¼‰ï¼Œä»æ–‡ä»¶å¤´å¼€å§‹è¦†ç›– â€œw+â€ æ‰“å¼€æ–‡ä»¶ç”¨äºè¯»å’Œå†™ï¼ˆæ–‡ä»¶ä¸å­˜åœ¨åˆ™åˆ›å»ºï¼‰ï¼Œæ¸…ç©ºæ–‡ä»¶å†å†™å…¥ â€œa+â€ æ‰“å¼€æ–‡ä»¶ç”¨äºè¯»å’Œå†™ï¼ˆæ–‡ä»¶ä¸å­˜åœ¨åˆ™åˆ›å»ºï¼‰ï¼Œæœ«å°¾è¿½åŠ  2.äºŒè¿›åˆ¶æ–‡ä»¶ï¼ˆæµå¼æ–‡ä»¶ï¼‰ modeåˆ†ç±» å«ä¹‰ â€œrbâ€ï¼ˆread binaryï¼‰ ä»¥åªè¯»çš„æ–¹å¼æ‰“å¼€æ–‡ä»¶ï¼ˆæ–‡ä»¶å¿…é¡»å­˜åœ¨ï¼Œå¦åˆ™è¿”å›EOFï¼‰ â€œwbâ€ï¼ˆwrite binaryï¼‰ æ‰“å¼€æ–‡ä»¶ç”¨äºå†™å…¥ï¼ˆæ–‡ä»¶ä¸å­˜åœ¨åˆ™åˆ›å»ºï¼‰ï¼Œæ¸…ç©ºæ–‡ä»¶å†å†™å…¥ â€œabâ€ï¼ˆappend binaryï¼‰ æ‰“å¼€æ–‡ä»¶åœ¨æœ«å°¾è¿½åŠ ï¼ˆæ–‡ä»¶ä¸å­˜åœ¨åˆ™åˆ›å»ºï¼‰ â€œrb+â€&#x2F;â€œr+bâ€ æ‰“å¼€æ–‡ä»¶ç”¨äºè¯»å’Œå†™ï¼ˆæ–‡ä»¶å¿…é¡»å­˜åœ¨ï¼‰ï¼Œä»æ–‡ä»¶å¤´å¼€å§‹è¦†ç›– â€œwb+â€&#x2F;â€œw+bâ€ æ‰“å¼€æ–‡ä»¶ç”¨äºè¯»å’Œå†™ï¼ˆæ–‡ä»¶ä¸å­˜åœ¨åˆ™åˆ›å»ºï¼‰ï¼Œæ¸…ç©ºæ–‡ä»¶å†å†™å…¥ â€œab+â€&#x2F;â€œa+bâ€ æ‰“å¼€æ–‡ä»¶ç”¨äºè¯»å’Œå†™ï¼ˆæ–‡ä»¶ä¸å­˜åœ¨åˆ™åˆ›å»ºï¼‰ï¼Œæœ«å°¾è¿½åŠ  3.ç»“æœå¯¹æ¯” r1234567891011121314151617181920int main(int argc,char* argv[]) &#123; //æ‰“å¼€æ–‡ä»¶ FILE* src = fopen(argv[1], &quot;r&quot;);//ä»¥åªè¯»çš„æ–¹å¼æ‰“å¼€æ–‡ä»¶ if (src == NULL) &#123; printf(&quot;Error:open %s failed\\n&quot;, argv[1]); exit(1); &#125; //æ’å…¥å­—ç¬¦ï¼Œä¹‹åçš„æ“ä½œæ˜¯ç›¸åŒçš„ fputc(&quot;Y&quot;, src); fputc(&quot;E&quot;, src); fputc(&quot;S&quot;, src); //å…³é—­æ–‡ä»¶ fclose(src); return 0;&#125; w1FILE* src = fopen(argv[1], &quot;w&quot;);//ä»¥å…¨è¦†ç›–å†™çš„æ–¹å¼æ‰“å¼€æ–‡ä»¶ a1FILE* src = fopen(argv[1], &quot;a&quot;);//ä»¥åç¼€å†™çš„æ–¹å¼æ‰“å¼€æ–‡ä»¶ r+1FILE* src = fopen(argv[1], &quot;r+&quot;);//ä»¥ä»å¤´è¦†ç›–è¯»å’Œå†™çš„æ–¹å¼æ‰“å¼€æ–‡ä»¶,æ–‡ä»¶å¿…é¡»å­˜åœ¨ w+1FILE* src = fopen(argv[1], &quot;w+&quot;);//ä»¥å…¨éƒ¨è¦†ç›–è¯»å’Œå†™çš„æ–¹å¼æ‰“å¼€æ–‡ä»¶,æ–‡ä»¶ä¸å­˜åœ¨åˆ™åˆ›å»º a+1FILE* src = fopen(argv[1], &quot;r+&quot;);//ä»¥æœ«å°¾è¿½åŠ å†™çš„æ–¹å¼æ‰“å¼€æ–‡ä»¶,å¯è¯»å¯å†™,æ–‡ä»¶ä¸å­˜åœ¨åˆ™æ–°å»º 3.è¯»å†™æ–‡ä»¶3.1 fgetc &amp; fputc(å­—ç¬¦çº§çš„è¯»å†™)1int fgetc(FILE* stream);//ä»è¾“å…¥æµä¸­è¯»å–ä¸€ä¸ªå­—ç¬¦ streamï¼šæ–‡ä»¶å¥æŸ„æŒ‡é’ˆ è¿”å›å€¼ï¼šå¦‚æœè¯»å–æˆåŠŸè¿”å›å­—ç¬¦ï¼Œå¤±è´¥åˆ™è¿”å›EOF å’Œgetchar()çš„åŒºåˆ«ï¼šgetchar()åªèƒ½åœ¨æ ‡å‡†æµstdinä¸­è¯»å–ä¸€ä¸ªå­—ç¬¦ 1int fputc(int c,FILE* stream);//å‘è¾“å‡ºæµä¸­å†™å…¥ä¸€ä¸ªå­—ç¬¦ cï¼šå­—ç¬¦ streamï¼šæ–‡ä»¶å¥æŸ„æŒ‡é’ˆ è¿”å›å€¼ï¼šå¦‚æœå†™å…¥æˆåŠŸè¿”å›å†™å…¥å­—ç¬¦ï¼Œå¤±è´¥è¿”å›EOF 12345678910111213141516171819202122232425262728293031323334#define _CRT_SECURE_NO_WARNINGS#include &lt;iostream&gt;#include&lt;cstring&gt;using namespace std;int main() &#123; //copy The_Holy_Bible.txt to Bible.txt //æ‰“å¼€æ–‡ä»¶æµ FILE* src = fopen(&quot;The_Holy_Bible.txt&quot;, &quot;r&quot;); if (src == NULL) &#123; cout &lt;&lt; &quot;open failed!&quot;; exit(1); &#125; FILE* dst = fopen(&quot;Bible.txt&quot;, &quot;w&quot;); if (dst == NULL) &#123; fclose(src); exit(1); &#125; //å¤åˆ¶æ–‡ä»¶ char ch; while ((ch = fgetc(src)) != EOF) &#123; fputc(ch, dst); &#125; //å…³é—­æ–‡ä»¶ fclose(dst); fclose(src); cout &lt;&lt; res; return 0;&#125; ç»“æœå¦‚å›¾ï¼š å¯¹æ¯”ç»“æœï¼š 3.2 fgets &amp; fputsï¼ˆè¡Œçº§çš„è¯»å†™ï¼‰fgetsä»è¾“å…¥æµ stream ä¸­ï¼Œæœ€å¤šè¯»å– count - 1 ä¸ªå­—ç¬¦ï¼Œå¹¶æŠŠè¯»å–çš„å­—ç¬¦å­˜å…¥ str æŒ‡å‘çš„å­— ç¬¦æ•°ç»„ä¸­ã€‚ fgets é‡åˆ°æ¢è¡Œç¬¦â€™\\nâ€™ï¼Œæˆ–è€…æ–‡ä»¶çš„æœ«å°¾å°±ä¼šç»ˆæ­¢(ä¹Ÿå°±æ˜¯è¯´ï¼Œè¯»å–çš„å­—ç¬¦æ•°å¯èƒ½ä¸è¶³ count - 1 ä¸ª)ï¼Œå¹¶ä¸”ä¼šå­˜å‚¨æ¢è¡Œç¬¦â€™\\nâ€™ã€‚ fgets **ä¼šåœ¨æœ€åæ·»åŠ ç©ºå­— ç¬¦â€™\\0â€™**ã€‚ 1char* fgets(char* str, int count, FILE* stream); å‚æ•°ï¼š str: æŒ‡å‘ä¸€ä¸ªå­—ç¬¦æ•°ç»„ count: èƒ½å¤Ÿå†™å…¥çš„æœ€å¤§å­—ç¬¦æ•°é‡(é€šå¸¸æ˜¯stræŒ‡å‘å­—ç¬¦æ•°ç»„çš„é•¿åº¦) stream: è¾“å…¥æµ è¿”å›å€¼ï¼š æˆåŠŸï¼šè¿”å›str å¤±è´¥ï¼šNULL fgets æ˜¯ gets çš„é€šç”¨ç‰ˆæœ¬ï¼Œå®ƒå¯ä»¥ä»ä»»æ„è¾“å…¥æµä¸­è¯»å–æ•°æ®ï¼Œè€Œ gets åªèƒ½ä» stdin ä¸­è¯»å–æ•°æ®ã€‚ fgets ä¹Ÿæ¯” gets æ›´ä¸ºå®‰å…¨ï¼Œå› ä¸ºå®ƒé™åˆ¶äº†è¯»å–å­—ç¬¦çš„æœ€å¤§æ•°ç›® (count - 1)ã€‚æ­¤å¤–ï¼Œå¦‚æœ fgets æ˜¯å› ä¸ºè¯»å–äº†æ¢è¡Œç¬¦è€Œç»ˆæ­¢ï¼Œé‚£ä¹ˆå®ƒä¼šå­˜å‚¨æ¢è¡Œ ç¬¦â€™\\nâ€™ï¼Œè€Œ gets å‡½æ•°ä»æ¥ä¸ä¼šå­˜å‚¨æ¢è¡Œç¬¦ã€‚ fputså°† str æŒ‡å‘çš„å­—ç¬¦ä¸²ï¼Œå†™å…¥è¾“å‡ºæµ stream ä¸­ã€‚ 1int fputs(const char* str, FILE* stream); å‚æ•°ï¼š str: è¦å†™çš„å­—ç¬¦ä¸²(ä»¥â€™\\0â€™ç»“å°¾çš„å­—ç¬¦ä¸²) stream: è¾“å…¥æµ è¿”å›å€¼ï¼š æˆåŠŸï¼šè¿”å›ä¸€ä¸ªéè´Ÿå€¼ å¤±è´¥ï¼šEOF fputs æ˜¯ puts çš„é€šç”¨ç‰ˆæœ¬ï¼Œå®ƒå¯ä»¥å°†å­—ç¬¦ä¸²å†™å…¥åˆ°ä»»æ„çš„è¾“å‡ºæµä¸­ï¼Œè€Œ puts åªèƒ½ å†™å…¥åˆ° stdout ä¸­ã€‚æ­¤å¤–ï¼Œ fputs æ˜¯åŸæ ·è¾“å‡ºå­—ç¬¦ä¸²ï¼Œè€Œ puts ä¼šåœ¨å­—ç¬¦ä¸²åé¢è€Œå¤– è¾“å‡ºä¸€ä¸ªæ¢è¡Œç¬¦â€™\\nâ€™ã€‚ 12345678910111213141516171819202122232425#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;int main(int argc, char* argv[]) &#123; FILE* src = fopen(argv[1], &quot;r&quot;); if (src == NULL) &#123; printf(&quot;ERROR:open s% failed\\n&quot;, argv[1]); fclose(src); exit(1); &#125; FILE* dst = fopen(argv[2], &quot;w&quot;); if (dst == NULL) &#123; printf(&quot;ERRORï¼šopen %s failed\\n&quot;, argv[2]); fclose(src); exit(1); &#125; char buffer[1024]; while (fgets(buffer, 1024, src) != NULL) &#123; fputs(buffer, dst); &#125; fclose(src); fclose(dst); return 0;&#125; 3.3 fscanf &amp; fwrite(åºåˆ—åŒ–çš„è¯»å†™) åºåˆ—åŒ–ï¼šå°†æ•°æ®ç»“æ„æˆ–å¯¹è±¡çŠ¶æ€è½¬æ¢æˆå¯å–ç”¨æ ¼å¼ï¼ˆä¾‹å¦‚å­˜æˆæ–‡ä»¶ï¼Œå­˜äºç¼“å†²ï¼Œæˆ–ç»ç”±ç½‘ç»œä¸­å‘é€ï¼‰ï¼Œä»¥ç•™å¾…åç»­åœ¨ç›¸åŒæˆ–å¦ä¸€å°è®¡ç®—æœºç¯å¢ƒä¸­ï¼Œèƒ½æ¢å¤åŸå…ˆçŠ¶æ€çš„è¿‡ç¨‹ã€‚ ä¾ç…§åºåˆ—åŒ–æ ¼å¼é‡æ–°è·å–å­—èŠ‚çš„ç»“æœæ—¶ï¼Œå¯ä»¥åˆ©ç”¨å®ƒæ¥äº§ç”Ÿä¸åŸå§‹å¯¹è±¡ç›¸åŒè¯­ä¹‰çš„å‰¯æœ¬ã€‚ fscanffscanf å’Œ scanf ç±»ä¼¼ï¼Œæ˜¯ç”¨æ¥è¿›è¡Œæ ¼å¼åŒ–è¾“å…¥çš„ã€‚ 1int fscanf(FILE* stream, const char* format, ...) scanf æ˜¯ä»æ ‡å‡†è¾“å…¥(stdin)ä¸­è¯»å–æ•°æ®ï¼Œè€Œ fscanf å¯ä»¥ä»ä»»ä½•ä¸€ä¸ªæµä¸­è¯»å–æ•°æ®ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå½“ fscanf çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¸º stdin æ—¶ï¼Œå®ƒçš„æ•ˆæœç­‰ä»·äº scanf ã€‚é¡ºä¾¿æä¸€ä¸‹ï¼Œ sscanf å¯ä»¥ä»å­—ç¬¦ä¸²ä¸­è¯»å–æ•°æ®ã€‚ fprintffprintf å’Œ printf ç±»ä¼¼ï¼Œæ˜¯ç”¨æ¥è¿›è¡Œæ ¼å¼åŒ–è¾“å‡ºçš„ã€‚ 1int fprintf(FILE* stream, const char* format, ...); printf å§‹ç»ˆæ˜¯å‘æ ‡å‡†è¾“å‡º(stdout)å†™å…¥å†…å®¹çš„ï¼Œè€Œ fprintf å¯ä»¥å‘ä»»ä½• ä¸€ä¸ªè¾“å‡ºæµä¸­å†™å…¥å†…å®¹ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå½“ fprintf çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¸º stdout æ—¶ï¼Œå®ƒçš„æ•ˆ æœç­‰ä»·äº printf ã€‚ é¡ºä¾¿æä¸€ä¸‹ï¼Œ sprintf å¯ä»¥å°†å†…å®¹å†™å…¥åˆ°ä¸€ä¸ªå­—ç¬¦æ•°ç»„ä¸­ã€‚ æ ¼å¼åŒ–è¾“å…¥è¾“å‡ºï¼Œå¯ä»¥ç”¨äºåºåˆ—åŒ–å’Œååºåˆ—åŒ–è¿‡ç¨‹ä¸­ã€‚ ç¤ºä¾‹ 123456789101112131415161718192021222324252627282930313233343536373839404142434445#define _CRT_SECURE_NO_WARNINGS#include&lt;stdio.h&gt;#include&lt;stdlib.h&gt;typedef struct stduent_s &#123; int number; char name[25]; int chinese; int math; int english;&#125;Student;int main(void) &#123; //åºåˆ—åŒ– Student s1 = &#123; 1,&quot;lystyle&quot;,100,150,120 &#125;; FILE* fp = fopen(&quot;students.dat&quot;, &quot;a&quot;); if (fp == NULL) &#123; printf(&quot;Error: open %s failed&quot;, &quot;sudents.dat&quot;); exit(1); &#125; fprintf(fp, &quot;%d\\t%s\\t%d\\t%d\\t%d\\n&quot;, s1.number, s1.name, s1.chinese, s1.math, s1.english); //ååºåˆ—åŒ– Student s2; FILE* dst = fopen(&quot;students.dat&quot;, &quot;r&quot;); if (dst == NULL) &#123; printf(&quot;Error: open %s failed&quot;, &quot;sudents.dat&quot;); exit(1); &#125; fscanf(dst, &quot;%d%s%d%d%d&quot;, &amp;s2.number, s2.name, &amp;s2.chinese, &amp;s2.math, &amp;s2.english); fclose(fp); fclose(dst); return 0;&#125; ç»“æœ 3.4 fread &amp; fwrite(äºŒè¿›åˆ¶æ–‡ä»¶çš„è¯»å†™)fread å’Œ fwrite ä¸»è¦æ˜¯ç”¨æ¥å¤„ç†äºŒè¿›åˆ¶æ–‡ä»¶çš„ã€‚ fread fread å¯ä»¥æ¯æ¬¡è¯»å–ä¸€å¤§å—æ•°æ®ã€‚ 1size_t fread(void* buffer, size_t size, size_t count, FILE* stream); å‚æ•°ï¼š â€‹ buffer: æŒ‡å‘å­˜æ”¾æ•°æ®çš„æ•°ç»„ï¼ˆå¹¶éåªèƒ½æ˜¯æ•°ç»„ï¼Œä¹Ÿå¯ä»¥æ˜¯æŒ‡å‘ä¸€ç‰‡è¿ç»­çš„å†…å­˜ç©ºé—´çš„é¦–åœ°å€ï¼Œå¯ä»¥æ˜¯ç»“æ„ä½“ï¼‰ â€‹ size: æ¯ä¸ªå…ƒç´ çš„å¤§å°(ä»¥å­—èŠ‚ä¸ºå•ä½) â€‹ count: æœ€å¤šå¯ä»¥è¯»å–çš„å…ƒç´ ä¸ªæ•° â€‹ stream: è¾“å…¥æµ è¿”å›å€¼ï¼š â€‹ æˆåŠŸè¯»å–å…ƒç´ çš„ä¸ªæ•°ã€‚å½“è¯»åˆ°æ–‡ä»¶æœ«å°¾ï¼Œæˆ–è€…å‘ç”Ÿé”™è¯¯æ—¶ï¼Œè¿”å›å€¼å¯èƒ½å°äºcountã€‚ â€‹ æˆ‘ä»¬å¯ä»¥é€šè¿‡feofå’Œferrorå‡½æ•°æ¥åˆ¤æ–­ï¼Œåˆ°åº•æ˜¯è¯»åˆ°äº†æ–‡ä»¶æœ«å°¾ï¼Œè¿˜æ˜¯å‘ç”Ÿäº†é”™è¯¯ã€‚ fwriteå°†å­˜æ”¾åœ¨ buffer æŒ‡å‘çš„æ•°ç»„ä¸­çš„ count ä¸ªå…ƒç´ å†™å…¥åˆ°è¾“å‡ºæµ stream ä¸­ã€‚ 1size_t fwrite(const void* buffer, size_t size, size_t count, FILE*stream); å‚æ•°ï¼š buffer: æŒ‡å‘å­˜æ”¾æ•°æ®çš„æ•°ç»„ã€‚ size: æ¯ä¸ªå…ƒç´ çš„å¤§å°(ä»¥å­—èŠ‚ä¸ºå•ä½) *count: è¦å†™å…¥å…ƒç´ çš„ä¸ªæ•° * stream: è¾“å‡ºæµ è¿”å›å€¼: æˆåŠŸå†™å…¥å…ƒç´ çš„ä¸ªæ•°ã€‚å½“å‘ç”Ÿé”™è¯¯æ—¶ï¼Œè¿™ä¸ªå€¼å¯èƒ½å°äºcountã€‚ ç¤ºä¾‹ 12345678910111213141516171819202122232425262728293031#define _CRT_SECURE_NO_WARNINGS#include&lt;stdio.h&gt;#include&lt;stdlib.h&gt;int main(int argc,char* argv[]) &#123; printf(&quot;%d\\n&quot;, argc); printf(&quot;%s\\n&quot;, argv[0]); FILE* src = fopen(argv[1], &quot;rb&quot;);//dilireba.jpg if (src == NULL) &#123; printf(&quot;Error: open %s failed\\n&quot;,argv[1]); exit(1); &#125; FILE* dst = fopen(argv[2], &quot;wb&quot;);//copy_of_dilireba.jpg if (dst == NULL) &#123; printf(&quot;Error: open %s failed\\n&quot;, argv[2]); fclose(src); exit(1); &#125; char buffer[1024]; int n; while ((n = fread(buffer, 1, 10240, src)) &gt; 0) //åªè¦è¯»åˆ°äº†æ•°æ®å­—èŠ‚æ•°å¤§äº0ï¼Œå°±å†™å…¥ &#123; fwrite(buffer, 1, n, dst); &#125; fclose(src); fclose(dst); return 0;&#125; åºåˆ—åŒ–&#x2F;ååºåˆ—åŒ– 12345678910111213141516171819202122232425262728293031323334#define _CRT_SECURE_NO_WARNINGS#include&lt;stdio.h&gt;#include&lt;stdlib.h&gt;typedef struct student_s &#123; int number; char name[25]; int chinese; int math; int english;&#125;Student;int main(void) &#123; Student s = &#123; 1,&quot;lystyle&quot;,100,130,120 &#125;; FILE* src = fopen(&quot;student.info&quot;, &quot;ab&quot;); if (src == NULL) &#123; printf(&quot;open student.info failed!&quot;); exit(1); &#125; /*fwrite/freadå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°å¹¶ä¸æ˜¯ç›´æ¥è¦æ±‚æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œè€Œæ˜¯è¦æ±‚æ˜¯ä¸€ä¸ªæŒ‡å‘æ•°æ®çš„æŒ‡é’ˆã€‚ è¿™ä¸ªæ•°æ®å¯ä»¥æ˜¯ä¸€ä¸ªç®€å•çš„å˜é‡ã€æ•°ç»„ã€ç»“æ„ä½“ï¼Œç”šè‡³æ˜¯ç»“æ„ä½“æ•°ç»„ç­‰ã€‚å…³é”®åœ¨äºè¿™ä¸ªæŒ‡é’ˆå¿…é¡»æŒ‡å‘ä½ æƒ³è¦å†™å…¥æ–‡ä»¶çš„æ•°æ®çš„é¦–åœ°å€ã€‚ åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå°½ç®¡ä½¿ç”¨äº†ç»“æ„ä½“å˜é‡sï¼Œä½†é€šè¿‡&amp;sè·å–äº†è¯¥ç»“æ„ä½“å˜é‡çš„åœ°å€ä½œä¸ºfwriteçš„ç¬¬ä¸€ä¸ªå‚æ•°ã€‚ è¿™é‡Œ&amp;sä¸æ˜¯â€œä¸€ä¸ªæ•°ç»„â€ï¼Œè€Œæ˜¯ä¸€ä¸ªæŒ‡å‘æ•´ä¸ªStudentç»“æ„ä½“çš„æŒ‡é’ˆã€‚ ç»“æ„ä½“æœ¬èº«å¯ä»¥è¢«è§†ä¸ºä¸€ä¸ªè¿ç»­çš„å†…å­˜åŒºåŸŸï¼Œfwriteä¼šæ ¹æ®ä½ æä¾›çš„ç»“æ„ä½“å¤§å°ï¼ˆsizeof(s)ï¼‰ï¼Œå°†è¿™å—å†…å­˜åŒºåŸŸçš„å†…å®¹å†™å…¥æ–‡ä»¶ã€‚ ç®€è€Œè¨€ä¹‹ï¼Œfwriteçš„ç¬¬ä¸€å‚æ•°æ˜¯ä¸€ä¸ªconst void*ç±»å‹çš„æŒ‡é’ˆï¼Œè¿™æ„å‘³ç€å®ƒå¯ä»¥æ¥å—ä»»ä½•ç±»å‹æ•°æ®çš„åœ°å€ï¼Œ åªè¦åé¢æŒ‡å®šçš„sizeå’Œcountå‚æ•°èƒ½å¤Ÿæ­£ç¡®æè¿°å¦‚ä½•æ ¹æ®è¿™ä¸ªåœ°å€è¯»å–å¹¶å†™å…¥æ•°æ®ã€‚ æ‰€ä»¥ï¼Œå®ƒçµæ´»åœ°é€‚ç”¨äºå¤šç§æ•°æ®ç±»å‹å’Œæ•°æ®é›†åˆï¼ŒåŒ…æ‹¬ä½†ä¸é™äºæ•°ç»„ã€‚*/ fwrite(&amp;s, sizeof(s), 1, src); Student s1; FILE* fp = fopen(&quot;student.info&quot;, &quot;rb&quot;); fread(&amp;s1, sizeof(s1), 1, fp); return 0;&#125; ç»“æœ 4.æ–‡ä»¶å®šä½æ¯ä¸ªæµéƒ½æœ‰ç›¸å…³è”çš„æ–‡ä»¶ä½ç½®ã€‚åœ¨æ‰§è¡Œè¯»å†™æ“ä½œæ—¶ï¼Œæ–‡ä»¶ä½ç½®ä¼šè‡ªåŠ¨æ¨è¿›ï¼Œå¹¶æŒ‰ç…§é¡ºåºè®¿é—®æ–‡ä»¶ã€‚é¡ºåºè®¿é—®æ˜¯å¾ˆå¥½çš„ï¼Œä½†æ˜¯æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦è·³è·ƒåœ°è®¿é—®æ–‡ä»¶ã€‚ä¸ºæ­¤ï¼Œæä¾›äº†å‡ ä¸ªå‡½æ•°æ¥æ”¯æŒè¿™ç§èƒ½åŠ›ã€‚ 123int fseek(FILE* stream, long int offset, int whence);long int ftell(FILE* stream);void rewind(FILE* stream); fseekfseek å¯ä»¥æ”¹å˜ä¸ stream ç›¸å…³è”çš„æ–‡ä»¶ä½ç½®ã€‚ 1int fseek(FILE* stream, long int offset, int whence); å‚æ•°ï¼š streamï¼šæ–‡ä»¶æµ whenceï¼šè¡¨ç¤ºå‚ç…§ç‚¹ï¼Œå‚ç…§ç‚¹æœ‰ 3 ä¸ªé€‰æ‹©ï¼š SEEK_SETï¼šæ–‡ä»¶çš„èµ·å§‹ä½ç½®ã€‚ SEEK_CURï¼šæ–‡ä»¶çš„å½“å‰ä½ç½®ã€‚ SEEK_ENDï¼šæ–‡ä»¶çš„æœ«å°¾ä½ç½®ã€‚ â€‹ offsetï¼šè¡¨ç¤ºåç§»é‡ (å¯èƒ½ä¸ºè´Ÿ)ï¼Œå®ƒæ˜¯ä»¥å­—èŠ‚è¿›è¡Œè®¡æ•°çš„ã€‚ â€‹ ç§»åŠ¨åˆ°æ–‡ä»¶çš„èµ·å§‹ä½ç½®ï¼Œå¯ä»¥è¿™æ ·å†™ï¼šfseek(fp, 0L, SEEK_SET); â€‹ ç§»åˆ°æ–‡ä»¶çš„æœ«å°¾ï¼šfseek(fp,0L,SEEK_END); â€‹ å¾€å›ç§»åŠ¨10ä¸ªå­—èŠ‚ï¼šfseek(fp,-10L,SEEK_CUR); è¿”å›å€¼ï¼š â€‹ é€šå¸¸æƒ…å†µä¸‹ä¼šè¿”å›0ï¼Œå¦‚æœå‘ç”Ÿé”™è¯¯è¿”å›ï¼ˆå¦‚ä½ç½®ä¸å­˜åœ¨ï¼‰è¿”å›é0å€¼ ftellä»¥é•¿æ•´æ•°å½¢å¼è¿”å›å½“å‰æ–‡ä»¶ä½ç½®ï¼Œå¦‚æœå‘ç”Ÿé”™è¯¯è¿”å›-1ã€‚ 123long int filePos = ftell(fp);...fseek(fp, filePos, SEEK_SET); rewindä¼šå°†æ–‡ä»¶ä½ç½®è®¾ç½®ä¸ºèµ·å§‹ä½ç½®ï¼Œç±»ä¼¼äºè°ƒç”¨ï¼š 12rewind(fp);fseek(fp,0L,SEEK_SET); ç¤ºä¾‹ 1234567891011121314151617181920212223#define _CRT_SECURE_NO_WARNINGS#include&lt;stdio.h&gt;#include&lt;stdlib.h&gt;long textSize(char* name) &#123; FILE* src = fopen(name, &quot;r&quot;); if (src == NULL) &#123; printf(&quot;Error: open %s failed\\n&quot;, name); exit(1); &#125; fseek(src, 0L, SEEK_END);//å°†æŒ‡é’ˆæŒ‡å‘æœ«å°¾ long fileSize = ftell(src);//è·å–æœ«å°¾å¤„çš„å­—èŠ‚å·ï¼Œå³è¯¥æ–‡ä»¶å ç”¨çš„å­—èŠ‚æ•° rewind(src);//å°†æŒ‡é’ˆå›é€€åˆ°èµ·ç‚¹ fclose(src); return fileSize + 1;&#125;int main(int argc, char* argv[]) &#123; printf(&quot;%ld&quot;, textSize(argv[1])); return 0;&#125; ç»“æœ å­—æ•°ç»Ÿè®¡ 5.é”™è¯¯å¤„ç†errnoâ€‹ é”™è¯¯çš„æ£€æµ‹å’Œå¤„ç†å¹¶ä¸æ˜¯ C è¯­è¨€çš„å¼ºé¡¹ï¼ŒC è¯­è¨€æ²¡æœ‰å…¶å®ƒé«˜çº§è¯­è¨€ (C++, Java, C# ç­‰) æ‰€å…·æœ‰çš„å¼‚å¸¸å¤„ç†æœºåˆ¶ã€‚C è¯­è¨€å¾€å¾€æ˜¯é€šè¿‡å‡½æ•°çš„è¿”å›å€¼ï¼Œæˆ–è€…æ˜¯æµ‹è¯• errno å˜ é‡æ¥æ£€æµ‹é”™è¯¯çš„ï¼›å¹¶ä¸”éœ€è¦ç¨‹åºå‘˜è‡ªå·±ç¼–å†™ä»£ç æ¥å¤„ç†é”™è¯¯ã€‚ â€‹ errno æ˜¯ä¸€ä¸ª int ç±»å‹çš„å…¨å±€å˜é‡ (C11 ä¿®æ”¹ä¸ºçº¿ç¨‹æœ¬åœ°å˜é‡ï¼Œå³æ¯ä¸ªçº¿ç¨‹éƒ½æœ‰ä¸€ä¸ª ç‹¬æœ‰çš„ errno å˜é‡)ï¼Œå®ƒå®šä¹‰åœ¨å¤´æ–‡ä»¶ä¸­ã€‚æ ‡å‡†åº“ä¸­æœ‰äº›å‡½æ•° (æ¯”å¦‚ä¸æ–‡ä»¶ ç›¸å…³çš„ä¸€äº›å‡½æ•°)ï¼Œå¦‚æœåœ¨è°ƒç”¨è¿‡ç¨‹ä¸­å‘ç”Ÿäº†é”™è¯¯ï¼Œå®ƒä¼šè®¾ç½® errno çš„å€¼ï¼Œä»¥è¡¨æ˜å‘ç”Ÿ äº†ä½•ç§ç±»å‹çš„é”™è¯¯ã€‚ â€‹ ç¨‹åºå¯åŠ¨æ—¶ï¼Œä¼šå°† errno çš„å€¼è®¾ä¸º 0ï¼Œè¡¨ç¤ºæ²¡æœ‰é”™è¯¯å‘ç”Ÿã€‚å…¶å®ƒé 0 å€¼éƒ½è¡¨ç¤ºå‘ç”Ÿäº† æŸç§ç±»å‹çš„é”™è¯¯ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ perror å’Œ strerror æ¥æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯ã€‚å…¶ä¸­ï¼Œ perror å®šä¹‰åœ¨ å¤´æ–‡ä»¶ä¸­ï¼Œ strerror å®šä¹‰åœ¨ å¤´æ–‡ä»¶ä¸­ã€‚ 1234567891011121314#define _CRT_SECURE_NO_WARNINGS#include&lt;stdio.h&gt;#include&lt;string.h&gt;#include&lt;errno.h&gt;int main(void) &#123; printf(&quot;%d\\n&quot;, errno);//åˆå§‹å€¼è®¾ä¸º0 FILE* fp = fopen(&quot;NO_SUCH_FILE.txt&quot;, &quot;r&quot;); printf(&quot;%d\\n&quot;, errno);//é”™è¯¯ç±»å‹ä¸º2 printf(&quot;%s\\n&quot;,strerror(errno));//æ‰“å°é”™è¯¯ç±»å‹ if(errno != 0) perror(&quot;NO_SUCH_FILE.txt&quot;);//åŠ ä¸Šå‰ç¼€æ‰“å°é”™è¯¯ç±»å‹ return 0; ç»“æœ","link":"","tags":[{"name":"c","slug":"c","permalink":"https://lyroom.github.io/tags/c/"},{"name":"æ–‡ä»¶æ“ä½œ","slug":"æ–‡ä»¶æ“ä½œ","permalink":"https://lyroom.github.io/tags/%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C/"}]},{"title":"ç»†è¯´æµ®ç‚¹æ•°","date":"2023-01-11T18:00:38.000Z","path":"2023/01/12/ç»†è¯´æµ®ç‚¹æ•°/","text":"ä¸€.ä»€ä¹ˆæ˜¯æµ®ç‚¹æ•°â€‹ æµ®ç‚¹æ•°èƒ½å¤Ÿè¡¨ç¤ºå¸¦å°æ•°éƒ¨åˆ†çš„æ•°å­—ï¼Œå¦‚æˆ‘ä»¬å°å­¦å¸¸å®šä¹‰çš„Î å€¼3.1415926ï¼Œå®ƒä»¬æä¾›çš„å€¼èŒƒå›´ä¹Ÿæ›´å¤§ä¹Ÿæ›´ä¸ºç²¾å‡†ã€‚å½“ç„¶å¦‚æœæ•°å­—å¾ˆå¤§ï¼Œä»¥è‡³äºæ— æ³•è¡¨ç¤ºä¸ºlongç±»å‹ï¼Œå¦‚äººä½“çš„ç»†èŒæ•°ï¼ˆä¼°è®¡è¶…è¿‡100å…†ï¼‰ï¼Œåˆ™å¯ä»¥ä½¿ç”¨æµ®ç‚¹ç±»å‹æ¥è¡¨ç¤ºã€‚ â€‹ ä½¿ç”¨æµ®ç‚¹ç±»å‹å¯ä»¥è¡¨ç¤ºè¯¸å¦‚2.5ã€3.14159å’Œ122442.32è¿™æ ·çš„æ•°å­—ï¼Œå³å¸¦å°æ•°éƒ¨åˆ†çš„æ•°å­—ã€‚è®¡ç®—æœºå°†è¿™æ ·çš„å€¼åˆ†æˆä¸¤éƒ¨åˆ†å­˜å‚¨ã€‚ä¸€éƒ¨åˆ†è¡¨ç¤ºå€¼ï¼Œå¦ä¸€éƒ¨åˆ†ç”¨äºå¯¹å€¼è¿›è¡Œæ”¾å¤§æˆ–ç¼©å°ã€‚ä¸‹é¢æ‰“ä¸ªæ¯”æ–¹ã€‚å¯¹äºæ•°å­—34.1245å’Œ34124.5ï¼Œå®ƒä»¬é™¤äº†å°æ•°ç‚¹çš„ä½ç½®ä¸åŒå¤–ï¼Œå…¶ä»–éƒ½æ˜¯ç›¸åŒçš„ã€‚å¯ä»¥æŠŠç¬¬ä¸€ä¸ªæ•°è¡¨ç¤ºä¸º0.341245ï¼ˆåŸºå‡†å€¼ï¼‰å’Œ100ï¼ˆç¼©æ”¾å› å­ï¼‰ï¼Œè€Œå°†ç¬¬äºŒä¸ªæ•°è¡¨ç¤ºä¸º0.341245ï¼ˆåŸºå‡†å€¼ç›¸åŒï¼‰å’Œ10000ï¼ˆç¼©æ”¾å› å­æ›´å¤§ï¼‰ã€‚ç¼©æ”¾å› å­çš„ä½œç”¨æ˜¯ç§»åŠ¨å°æ•°ç‚¹çš„ä½ç½®ï¼Œæœ¯è¯­æµ®ç‚¹å› æ­¤è€Œå¾—åã€‚C++å†…éƒ¨è¡¨ç¤ºæµ®ç‚¹æ•°çš„æ–¹æ³•ä¸æ­¤ç›¸åŒï¼Œåªä¸è¿‡å®ƒåŸºäºçš„æ˜¯äºŒè¿›åˆ¶æ•°ï¼Œå› æ­¤ç¼©æ”¾å› å­æ˜¯2çš„å¹‚ï¼Œä¸æ˜¯10çš„å¹‚ã€‚å¹¸è¿çš„æ˜¯ï¼Œåˆå­¦è®¡ç®—çš„ç¨‹åºå‘˜ä¸å¿…è¯¦ç»†äº†è§£å†…éƒ¨è¡¨ç¤ºï¼ˆå½“ä½ å­¦è¿‡è®¡ç»„ä¹‹åå°±ä¼šæœ‰è¯¦ç»†çš„è®¤è¯†ï¼‰ã€‚é‡è¦çš„æ˜¯ï¼Œæµ®ç‚¹æ•°èƒ½å¤Ÿè¡¨ç¤ºå°æ•°å€¼ã€éå¸¸å¤§å’Œéå¸¸å°çš„å€¼ï¼Œå®ƒä»¬çš„å†…éƒ¨è¡¨ç¤ºæ–¹æ³•ä¸æ•´æ•°æœ‰å¤©å£¤ä¹‹åˆ«ã€‚ äºŒ.æµ®ç‚¹æ•°çš„ä¹¦å†™â€‹ åœ¨c++ä¸­æµ®ç‚¹æ•°åˆ†ä¸¤ç§å†™æ³•ï¼š æ ‡å‡†å°æ•°ç‚¹çš„å†™æ³•ï¼ˆæˆ‘ä»¬å¸¸è§çš„å°æ•°å†™æ³•ï¼‰ 12343.14100.4599.11.0 Eè¡¨ç¤ºæ³•ï¼ˆç±»ä¼¼äºæˆ‘ä»¬å¸¸è§çš„ç§‘å­¦è®¡æ•°æ³•ï¼‰ 1233.14e3//è¡¨ç¤º3.14*10^33.14e+3//è¡¨ç¤º3.14*10^39.11e-31//è¡¨ç¤º9.11*10^(-31)ç”µå­è´¨é‡ï¼Œå•ä½åƒå…‹ ä¸‰.æµ®ç‚¹æ•°çš„åˆ†ç±»â€‹ å’ŒANSI Cä¸€æ ·ï¼ŒC++ä¹Ÿæœ‰3ç§æµ®ç‚¹ç±»å‹ï¼šfloatã€doubleå’Œlong doubleã€‚è¿™äº›ç±»å‹æ˜¯æŒ‰å®ƒä»¬å¯ä»¥è¡¨ç¤ºçš„æœ‰æ•ˆæ•°ä½å’Œå…è®¸çš„æŒ‡æ•°æœ€å°èŒƒå›´æ¥æè¿°çš„ã€‚æœ‰æ•ˆä½ï¼ˆsignificant figureï¼‰æ˜¯æ•°å­—ä¸­æœ‰æ„ä¹‰çš„ä½ã€‚ä¾‹å¦‚ï¼Œç ç©†æœ—ç›å³°çš„é«˜åº¦æ˜¯8,849ç±³ï¼Œè¯¥æ•°å­—ä½¿ç”¨äº†4ä¸ªæœ‰æ•ˆä½ï¼ŒæŒ‡å‡ºäº†æœ€æ¥è¿‘çš„é«˜åº¦æ•°ã€‚ç„¶è€Œï¼Œå°†ç ç©†æœ—ç›å³°çš„é«˜åº¦å†™æˆçº¦8800ç±³æ—¶ï¼Œæœ‰æ•ˆä½æ•°ä¸º2ä½ï¼Œå› ä¸ºç»“æœç»è¿‡å››èˆäº”å…¥ç²¾ç¡®åˆ°äº†ç™¾ä½ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå…¶ä½™çš„2ä½åªä¸è¿‡æ˜¯å ä½ç¬¦è€Œå·²ã€‚æœ‰æ•ˆä½æ•°ä¸ä¾èµ–äºå°æ•°ç‚¹çš„ä½ç½®ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥å°†é«˜åº¦å†™æˆ8.849ç±³ã€‚è¿™æ ·ä»æœ‰4ä¸ªæœ‰æ•ˆä½ï¼Œå› ä¸ºè¿™ä¸ªå€¼ç²¾ç¡®åˆ°äº†ç¬¬4ä½ã€‚ â€‹ äº‹å®ä¸Šï¼ŒCå’ŒC++å¯¹äºæœ‰æ•ˆä½æ•°çš„è¦æ±‚æ˜¯ï¼Œfloatè‡³å°‘32ä½ï¼Œdoubleè‡³å°‘48ä½ï¼Œä¸”ä¸å°‘äºfloatï¼Œlong doubleè‡³å°‘å’Œdoubleä¸€æ ·å¤šã€‚è¿™ä¸‰ç§ç±»å‹çš„æœ‰æ•ˆä½æ•°å¯ä»¥ä¸€æ ·å¤šã€‚ç„¶è€Œï¼Œé€šå¸¸ï¼Œfloatä¸º32ä½ï¼Œdoubleä¸º64ä½ï¼Œlong doubleä¸º80ã€96æˆ–128ä½ã€‚å¦å¤–ï¼Œè¿™3ç§ç±»å‹çš„æŒ‡æ•°èŒƒå›´è‡³å°‘æ˜¯âˆ’37åˆ°37ã€‚å¯ä»¥ä»å¤´æ–‡ä»¶cfloatæˆ–float.hä¸­æ‰¾åˆ°ç³»ç»Ÿçš„é™åˆ¶ã€‚ä»¥ä¸‹æ˜¯float.hçš„éƒ¨åˆ†ä»£ç ï¼Œå…³é”®ä½ç½®æ ‡æœ‰ä¸­æ–‡æ³¨ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180//// float.h//// Copyright (c) Microsoft Corporation. All rights reserved.//// Implementation-defined values commonly used by sophisticated numerical// (floating point) programs.// Define the floating point precision used.å®šä¹‰ä½¿ç”¨çš„æµ®ç‚¹ç²¾åº¦/*FLT_EVAL_METHOD ç”¨æ¥æŒ‡æ˜åœ¨è¡¨è¾¾å¼æ±‚å€¼ï¼ˆå°¤å…¶æ˜¯æ•°å­¦è¿ç®—ï¼‰è¿‡ç¨‹ä¸­æ˜¯å¦éœ€è¦æå‡æµ®ç‚¹æ•°çš„ç±»å‹ï¼Œå¯èƒ½çš„å–å€¼æœ‰ï¼š -1ï¼šæœªçŸ¥çš„ï¼Œä¸ç¡®å®šçš„ã€‚ 0ï¼šä¸æå‡ç±»å‹ï¼Œä½¿ç”¨å½“å‰çš„ç±»å‹ã€‚ 1ï¼šå°†æµ®ç‚¹æ•°æå‡åˆ° double ç±»å‹ï¼Œå¤§äºç­‰äº double ç±»å‹çš„ä¿æŒä¸å˜ï¼›ä¹Ÿå°±æ˜¯è¯´ï¼Œå°† float ç±»å‹æå‡ä¸º double ç±»å‹ï¼Œdouble å’Œ long double ç±»å‹ä¸å˜ã€‚ 2ï¼šå°†æµ®ç‚¹æ•°æå‡åˆ° long doubleï¼›ä¹Ÿå°±æ˜¯è¯´ï¼Œå°† floatã€double æå‡åˆ° long double ç±»å‹ï¼Œlong double ç±»å‹ä¿æŒä¸å˜ã€‚ ã€æ³¨ã€‘FLT_EVAL_METHOD å¯¹æ‰€æœ‰æµ®ç‚¹æ•°ç±»å‹ï¼ˆfloatã€double å’Œ long doubleï¼‰éƒ½æœ‰æ•ˆï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ‰€æœ‰æµ®ç‚¹æ•°ç±»å‹éƒ½å¿…é¡»é‡‡ç”¨ç›¸åŒçš„ç±»å‹æå‡ã€‚æå‡ç±»å‹èƒ½å¤Ÿæé«˜æµ®ç‚¹æ•°çš„ç²¾åº¦ï¼Œè®©è¡¨è¾¾å¼çš„ç»“æœæ›´åŠ ç²¾ç¡®ã€‚*/#ifdef _M_FP_FAST #define FLT_EVAL_METHOD -1#else #ifdef _M_IX86 #if _M_IX86_FP &gt;= 2 #define FLT_EVAL_METHOD 0 #else #define FLT_EVAL_METHOD 2 #endif #else #define FLT_EVAL_METHOD 0 #endif#endif//-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+//// Constants å®šä¹‰äº†å„ç§ç±»å‹çš„æ•°æ®çš„ç²¾åº¦ï¼Œå³å°æ•°ç‚¹çš„ä½æ•°////-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ //DBLå¼€å¤´çš„æ˜¯doubleç±»å‹çš„#define DBL_DECIMAL_DIG 17 // # of decimal digits of rounding precision /* ä» float/double/long double è½¬æ¢åˆ°è‡³å°‘æœ‰ FLT_DECIMAL_DIG/DBL_DECIMAL_DIG/LDBL_DECIMAL_DIG ä½æ•°å­—çš„åè¿›åˆ¶ï¼Œå†è½¬æ¢å›åŸç±»å‹ä¸ºæ’ç­‰è½¬æ¢ï¼šè¿™æ˜¯åºåˆ—åŒ–/ååºåˆ—åŒ–æµ®ç‚¹å€¼æ‰€è¦æ±‚çš„åè¿›åˆ¶ç²¾åº¦ã€‚åˆ†åˆ«å®šä¹‰ä¸ºè‡³å°‘ 6ã€10 å’Œ 10ï¼Œå¯¹äº IEEE float ä¸º 9ï¼Œå¯¹äº IEEE double ä¸º 17ã€‚ */#define DBL_DIG 15 // # è½¬æ¢æˆåè¿›åˆ¶å½¢å¼åï¼Œå°æ•°ç‚¹åç²¾ç¡®æ•°å­—ï¼ˆèƒ½å¤Ÿä¿è¯ç²¾åº¦çš„æ•°å­—ï¼‰çš„ä½æ•°ã€‚#define DBL_EPSILON 2.2204460492503131e-016 // smallest such that 1.0+DBL_EPSILON != 1.0 1å’Œå¤§äº1çš„æœ€å°æµ®ç‚¹æ•°çš„å·®å€¼ï¼Œå¯ä»¥è¡¨ç¤ºæœ€å°çš„æœ‰æ•ˆæ•°å­—#define DBL_HAS_SUBNORM 1 //æŒ‡æ˜ç±»å‹æ˜¯å¦æ”¯æŒéæ­£è§„æ•°å€¼ /* -1: ä¸ºä¸ç¡®å®šï¼Œ 0: ä¸ºä¸æ”¯æŒï¼Œ 1: ä¸ºæ”¯æŒã€‚ */#define DBL_MANT_DIG 53 // # of bits in mantissa // åŸºæ•°ï¼ˆè¿›åˆ¶ï¼‰ä¸º FLT_RADIX æ—¶ï¼Œå°¾æ•° mantissa çš„æœ€å¤§é•¿åº¦ï¼ˆæœ€å¤§ä½æ•°ï¼‰ï¼Œä¹Ÿå¯ä»¥è¯´æ˜¯æµ®ç‚¹æ•°çš„ç²¾åº¦ã€‚æ³¨æ„ï¼Œè¿™é‡Œæ‰€è¯´çš„é•¿åº¦åŒ…å«äº†æ•´æ•°éƒ¨åˆ†å’Œå°æ•°éƒ¨åˆ†ã€‚#define DBL_MAX 1.7976931348623158e+308 // max value åŸºæ•°ï¼ˆè¿›åˆ¶ï¼‰ä¸º FLT_RADIX æ—¶ï¼Œè§„æ ¼åŒ–æµ®ç‚¹æ•°çš„æŒ‡æ•°ï¼ˆä¹Ÿå³ exponentï¼‰çš„æœ€å¤§å€¼ï¼ˆä¸ºæ­£æ•°ï¼‰ã€‚#define DBL_MAX_10_EXP 308 // max decimal exponent è½¬æ¢ä¸º10è¿›åˆ¶åï¼Œè§„æ ¼åŒ–æµ®ç‚¹æ•°çš„çš„æŒ‡æ•°çš„æœ€å¤§å€¼#define DBL_MAX_EXP 1024 // max binary exponent doubleæŒ‡æ•°æœ€å¤§äºŒè¿›åˆ¶#define DBL_MIN 2.2250738585072014e-308 // å®šä¹‰äº†åŒç²¾åº¦æµ®ç‚¹æ•°çš„æœ€å°å€¼#define DBL_MIN_10_EXP (-307) // è½¬æ¢æˆåè¿›åˆ¶å½¢å¼åï¼Œè§„æ ¼åŒ–æµ®ç‚¹æ•°çš„æŒ‡æ•°çš„æœ€å°å€¼ï¼ˆä¸ºè´Ÿæ•°ï¼‰ã€‚#define DBL_MIN_EXP (-1021) // åŸºæ•°ï¼ˆè¿›åˆ¶ï¼‰ä¸º FLT_RADIX(æ­¤æ—¶ä¸º2)æ—¶ï¼Œè§„æ ¼åŒ–æµ®ç‚¹æ•°çš„æŒ‡æ•°(ä¹Ÿå³exponent)çš„æœ€å°å€¼(ä¸ºè´Ÿæ•°)#define _DBL_RADIX 2 // exponent radix æŒ‡æ•°çš„è¿›åˆ¶#define DBL_TRUE_MIN 4.9406564584124654e-324 // min positive value åŒç²¾åº¦æµ®ç‚¹æ•°çš„æœ€å°å€¼ //FLTå¼€å¤´çš„æ˜¯floatç±»å‹çš„ï¼Œå„ç§å˜é‡çš„å«ä¹‰åŒdouble#define FLT_DECIMAL_DIG 9 // # of decimal digits of rounding precision#define FLT_DIG 6 // # of decimal digits of precision#define FLT_EPSILON 1.192092896e-07F // smallest such that 1.0+FLT_EPSILON != 1.0#define FLT_HAS_SUBNORM 1 // type does support subnormal numbers#define FLT_GUARD 0#define FLT_MANT_DIG 24 // # of bits in mantissa#define FLT_MAX 3.402823466e+38F // max value#define FLT_MAX_10_EXP 38 // max decimal exponent#define FLT_MAX_EXP 128 // max binary exponent#define FLT_MIN 1.175494351e-38F // min normalized positive value#define FLT_MIN_10_EXP (-37) // min decimal exponent#define FLT_MIN_EXP (-125) // min binary exponent#define FLT_NORMALIZE 0#define FLT_RADIX 2 // å®šä¹‰äº†æµ®ç‚¹æ•°çš„è¿›åˆ¶ï¼Œå¯¹æ‰€æœ‰çš„æµ®ç‚¹æ•°éƒ½æœ‰æ•ˆï¼Œæ‰€æœ‰çš„æµ®ç‚¹æ•°éƒ½å¿…é¡»é‡‡ç”¨2è¿›åˆ¶#define FLT_TRUE_MIN 1.401298464e-45F // min positive value //å¼€å¤´çš„æ˜¯double longç±»å‹çš„ï¼Œå„ç§å˜é‡çš„å«ä¹‰åŒdouble#define LDBL_DIG DBL_DIG // # of decimal digits of precision#define LDBL_EPSILON DBL_EPSILON // smallest such that 1.0+LDBL_EPSILON != 1.0#define LDBL_HAS_SUBNORM DBL_HAS_SUBNORM // type does support subnormal numbers#define LDBL_MANT_DIG DBL_MANT_DIG // # of bits in mantissa#define LDBL_MAX DBL_MAX // max value#define LDBL_MAX_10_EXP DBL_MAX_10_EXP // max decimal exponent#define LDBL_MAX_EXP DBL_MAX_EXP // max binary exponent#define LDBL_MIN DBL_MIN // min normalized positive value#define LDBL_MIN_10_EXP DBL_MIN_10_EXP // min decimal exponent#define LDBL_MIN_EXP DBL_MIN_EXP // min binary exponent#define _LDBL_RADIX _DBL_RADIX // exponent radix#define LDBL_TRUE_MIN DBL_TRUE_MIN // min positive value#define DECIMAL_DIG DBL_DECIMAL_DIG//å®šä¹‰äº†æµ®ç‚¹æ•°çš„èˆå…¥æ–¹å¼/*ç”±ä¸‹åˆ—ä»£ç å¯çŸ¥ï¼Œæ¯ç§æµ®ç‚¹æ•°èˆå…¥æ–¹å¼æ˜¯å¿…é¡»ç›¸åŒçš„ï¼Œå‡æ˜¯ç”±__fpe_flt_rounds()å‡½æ•°ç¡®å®šçš„ï¼Œä¸åŒçš„è¿”å›å€¼ï¼Œä»£è¡¨çš„å«ä¹‰å¦‚ä¸‹-1ã€ä¸ç¡®å®šï¼šå³èˆå…¥æ–¹å¼ä¸ç¡®å®š1ã€å°±è¿‘èˆå…¥ï¼š å³åè¿›åˆ¶ä¸‹çš„å››èˆäº”å…¥ã€‚ä½†æ˜¯ä¹Ÿä¼šå‡ºç°ä»¥ä¸‹å‡ ç§æƒ…å†µï¼š å¤šä½™æ•°å­—æ˜¯1001ï¼Œå®ƒå¤§äº0.5ï¼Œæ•…æœ€ä½ä½è¿›1ã€‚ å¤šä½™æ•°å­—æ˜¯0111ï¼Œå®ƒå°äº0.5ï¼Œåˆ™ç›´æ¥èˆæ‰å¤šä½™æ•°å­—ã€‚ å¤šä½™æ•°å­—æ˜¯1000ï¼Œæ­£å¥½æ˜¯ç­‰äº0.5çš„ç‰¹æ®Šæƒ…å†µï¼›é‚£ä¹ˆæ­¤æ—¶æœ€ä½ä½ä¸º0åˆ™èˆæ‰å¤šä½™ä½ï¼Œæœ€ä½ä½ä¸º1åˆ™è¿›ä½1ã€‚ æ³¨æ„è¿™é‡Œè¯´æ˜çš„æ•°ä½éƒ½æ˜¯æŒ‡äºŒè¿›åˆ¶æ•°ã€‚å› ä¸ºè¿™æ˜¯å°¾æ•°ï¼Œæ‰€ä»¥åœ¨è®¡ç®—è¿™äº›äºŒè¿›åˆ¶å’Œ0.5çš„å…³ç³»çš„æ—¶å€™ï¼Œä¹Ÿå³è½¬ä¸º10è¿›åˆ¶çš„æ—¶å€™ï¼Œæˆ‘ä»¬ç”¨æ¯ä¸€ä½çš„æƒé‡ä¹˜ä»¥2^(-i)ç„¶åæ±‚å’Œå³å¯ã€‚2ã€æœ0èˆå…¥ï¼šå³æœæ•°è½´é›¶ç‚¹æ–¹å‘èˆå…¥ï¼Œæ‰€ä»¥æˆ‘ä»¬ç›´æ¥æˆªå°¾å³å¯ã€‚3ã€æœæ­£æ— ç©·èˆå…¥ï¼šå¯¹æ­£æ•°è€Œè¨€ï¼Œå¤šä½™ä½å…¨ä¸º0åˆ™ç›´æ¥æˆªå°¾ï¼Œä¸å…¨ä¸º0åˆ™å‘æœ€ä½æœ‰æ•ˆä½è¿›1ï¼›è´Ÿæ•°çš„è¯ä¸ç®¡å¤šä½™ä½æ˜¯å¤šå°‘ç›´æ¥æˆªå°¾å³å¯ã€‚4ã€æœè´Ÿæ— ç©·èˆå…¥ï¼šå¯¹è´Ÿæ•°è€Œè¨€ï¼Œå¤šä½™ä½å…¨ä¸º0åˆ™ç›´æ¥æˆªå°¾ï¼Œä¸å…¨ä¸º0åˆ™å‘æœ€ä½æœ‰æ•ˆä½è¿›1ï¼›æ­£æ•°çš„è¯ä¸ç®¡å¤šä½™ä½æ˜¯å¤šå°‘ç›´æ¥æˆªå°¾å³å¯ã€‚*/#define FLT_ROUNDS (__fpe_flt_rounds())#define _DBL_ROUNDS FLT_ROUNDS#define _LDBL_ROUNDS _DBL_ROUNDS//-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+//// IEEE Recommended Functions IEEE(ç”µæ°”ç”µå­å·¥ç¨‹å¸ˆå­¦ä¼š) æ¨èçš„ä¸€äº›æµ®ç‚¹å‹çš„å¸¸ç”¨æ–¹æ³•////-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+/*copysign()å‡½æ•°æ˜¯cmathæ ‡å¤´çš„åº“å‡½æ•°ï¼Œç”¨äºè·å–å¸¦æœ‰ç¬¬äºŒä¸ªå‚æ•°çš„ç¬¦å·çš„ç¬¬ä¸€ä¸ªå‚æ•°çš„å€¼ï¼Œå®ƒæ¥å—ä¸¤ä¸ªå‚æ•°( xï¼Œy )å¹¶ä»¥yçš„ç¬¦å·è¿”å›xçš„å¤§å°ã€‚*/_Check_return_ _ACRTIMP double __cdecl _copysign(_In_ double _Number, _In_ double _Sign);//è¿”å›ä¸€ä¸ªä¸ _X ç¬¦å·ç›¸åæ•°å€¼ç›¸åŒçš„æ•°ï¼ˆæ­£å˜ä¸ºè´Ÿï¼Œè´Ÿå˜ä¸ºæ­£ï¼‰ï¼›_Check_return_ _ACRTIMP double __cdecl _chgsign(_In_ double _X);//è¾“å‡ºxä¹˜ä»¥2çš„yæ¬¡å¹‚çš„ç»“æœï¼›_Check_return_ _ACRTIMP double __cdecl _scalb(_In_ double _X, _In_ long _Y);// æ±‚è¾“å…¥æ•°æ˜¯2çš„å¤šå°‘æ¬¡å¹‚ï¼Œè¿”å›å€¼å¯¹ç¡®åˆ‡ç»“æœå‘0å–æ•´ï¼›_Check_return_ _ACRTIMP double __cdecl _logb(_In_ double _X);// è¾“å‡ºxå¯¹yæ–¹å‘åœ¨doubleç²¾åº¦ä¸Šçš„ä¸‹ä¸€ä¸ªå€¼ï¼›_Check_return_ _ACRTIMP double __cdecl _nextafter(_In_ double _X, _In_ double _Y);//æ£€æŸ¥è¾“å…¥æ˜¯å¦æœ‰æ•ˆï¼Œè‹¥ä¸º INT æˆ– NaN åˆ™è¿”å›0ï¼Œæœ‰æ•ˆæ•°å€¼è¿”å›1ï¼›_Check_return_ _ACRTIMP int __cdecl _finite(_In_ double _X);//è¿”å›è¾“å…¥æ˜¯å¦ä¸º NaNã€‚_Check_return_ _ACRTIMP int __cdecl _isnan(_In_ double _X); /* è¿”å›ä¸€ä¸ªæµ®ç‚¹æ•°çš„åˆ†ç±»ï¼Œå…·ä½“å¦‚ä¸‹ï¼š _FPCLASS_SNAN ä¿¡å· NaN _FPCLASS_QNAN å®‰é™çš„å— _FPCLASS_NINF è´Ÿæ— ç©·å¤§ ( -INF) _FPCLASS_NN è´Ÿå½’ä¸€åŒ–éé›¶ _FPCLASS_ND è´Ÿéè§„èŒƒåŒ– _FPCLASS_NZ è´Ÿé›¶ (-0) _FPCLASS_PZ æ­£ 0 (+0) _FPCLASS_PD æ­£åè§„æ ¼åŒ– _FPCLASS_PN æ­£å½’ä¸€åŒ–éé›¶ _FPCLASS_PINF æ­£æ— ç©·å¤§ ( +INF) */_Check_return_ _ACRTIMP int __cdecl _fpclass(_In_ double _X);#ifdef _M_X64 _Check_return_ _ACRTIMP float __cdecl _scalbf(_In_ float _X, _In_ long _Y);#endif_CRT_END_C_HEADER_UCRT_RESTORE_CLANG_WARNINGS#pragma warning(pop) // _UCRT_DISABLED_WARNINGS#endif // _INC_FLOAT å››.æµ®ç‚¹æ•°çš„â€œå››èˆäº”å…¥â€â€‹ åœ¨æµ®ç‚¹æ•°çš„èˆå…¥é—®é¢˜ä¸Šï¼ŒIEEE æµ®ç‚¹æ ¼å¼å®šä¹‰äº† 4 ç§ä¸åŒçš„èˆå…¥æ–¹å¼ï¼Œå¦‚ä¸‹è¡¨æ‰€ç¤ºã€‚å…¶ä¸­ï¼Œé»˜è®¤çš„èˆå…¥æ–¹æ³•æ˜¯å‘å¶æ•°èˆå…¥ï¼Œè€Œå…¶ä»–ä¸‰ç§å¯ç”¨äºè®¡ç®—ä¸Šç•Œå’Œä¸‹ç•Œã€‚ ä¸‹è¡¨æ˜¯ 4 ç§èˆå…¥æ–¹å¼çš„åº”ç”¨ä¸¾ä¾‹ã€‚è¿™é‡Œéœ€è¦ç‰¹åˆ«è¯´æ˜çš„æ˜¯ï¼Œå‘å¶æ•°èˆå…¥ï¼ˆå‘æœ€æ¥è¿‘çš„å€¼èˆå…¥ï¼‰æ–¹å¼ä¼šè¯•å›¾æ‰¾åˆ°ä¸€ä¸ªæœ€æ¥è¿‘çš„åŒ¹é…å€¼ã€‚å› æ­¤ï¼Œå®ƒå°† 1.4 èˆå…¥æˆ 1ï¼Œå°† 1.6 èˆå…¥æˆ 2ï¼Œè€Œå°† 1.5 å’Œ 2.5 éƒ½èˆå…¥æˆ 2ã€‚ â€‹ æˆ–è®¸çœ‹äº†ä¸Šé¢çš„å†…å®¹ä½ ä¼šé—®ï¼šä¸ºä»€ä¹ˆè¦é‡‡ç”¨å‘å¶æ•°èˆå…¥è¿™æ ·çš„èˆå…¥ç­–ç•¥ï¼Œè€Œä¸ç›´æ¥ä½¿ç”¨æˆ‘ä»¬å·²ç»ä¹ æƒ¯çš„â€œå››èˆäº”å…¥â€å‘¢ï¼Ÿ â€‹ å…¶åŸå› æˆ‘ä»¬å¯ä»¥è¿™æ ·æ¥ç†è§£ï¼šåœ¨è¿›è¡Œèˆå…¥çš„æ—¶å€™ï¼Œæœ€åä¸€ä½æ•°å­—ä» 1 åˆ° 9ï¼Œèˆå»çš„æœ‰ 1ã€2ã€3ã€4ï¼›å®ƒæ­£å¥½å¯ä»¥å’Œè¿›ä½çš„ 9ã€8ã€7ã€6 ç›¸å¯¹åº”ï¼Œè€Œ 5 å´è¢«å•ç‹¬ç•™ä¸‹ã€‚å¦‚æœæˆ‘ä»¬é‡‡ç”¨å››èˆäº”å…¥æ¯æ¬¡éƒ½å°† 5 è¿›ä½çš„è¯ï¼Œåœ¨è¿›è¡Œä¸€äº›å¤§é‡æ•°æ®çš„ç»Ÿè®¡æ—¶ï¼Œå°±ä¼šç´¯ç§¯æ¯”è¾ƒå¤§çš„åå·®ã€‚è€Œå¦‚æœé‡‡ç”¨å‘å¶æ•°èˆå…¥çš„ç­–ç•¥ï¼Œåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œ5 èˆå»è¿˜æ˜¯è¿›ä½æ¦‚ç‡æ˜¯å·®ä¸å¤šçš„ï¼Œç»Ÿè®¡æ—¶äº§ç”Ÿçš„åå·®ä¹Ÿå°±ç›¸åº”è¦å°ä¸€äº›ã€‚ â€‹ åŒæ ·ï¼Œé’ˆå¯¹æµ®ç‚¹æ•°æ®ï¼Œå‘å¶æ•°èˆå…¥æ–¹å¼åªéœ€è¦ç®€å•åœ°è€ƒè™‘æœ€ä½æœ‰æ•ˆæ•°å­—æ˜¯å¥‡æ•°è¿˜æ˜¯å¶æ•°å³å¯ã€‚ä¾‹å¦‚ï¼Œå‡è®¾æˆ‘ä»¬æƒ³å°†åè¿›åˆ¶æ•°èˆå…¥åˆ°æœ€æ¥è¿‘çš„ç™¾åˆ†ä½ã€‚ä¸ç®¡ç”¨å“ªç§èˆå…¥æ–¹å¼ï¼Œæˆ‘ä»¬éƒ½å°†æŠŠ 1.2349999 èˆå…¥åˆ° 1.23ï¼Œè€Œå°† 1.2350001 èˆå…¥åˆ° 1.24ï¼Œå› ä¸ºå®ƒä»¬ä¸æ˜¯åœ¨ 1.23 å’Œ 1.24 çš„æ­£ä¸­é—´ã€‚å¦ä¸€æ–¹é¢æˆ‘ä»¬å°†æŠŠä¸¤ä¸ªæ•° 1.2350000 å’Œ 1.2450000 éƒ½èˆå…¥åˆ° 1.24ï¼Œå› ä¸º 4 æ˜¯å¶æ•°ã€‚ äº”.æµ®ç‚¹æ•°æ ‡å‡†IEEE7541.IEEEæµ®ç‚¹æ•°æ ‡å‡†ç®€ä»‹â€‹ IEEE äº 1987 å¹´æ¨å‡ºäº†ä¸åº•æ•°æ— å…³çš„äºŒè¿›åˆ¶æµ®ç‚¹è¿ç®—æ ‡å‡† IEEE 854ï¼Œå¹¶äºåŒå¹´è¢«ç¾å›½å¼•ç”¨ä¸º ANSI æ ‡å‡†ã€‚1989 å¹´ï¼Œå›½é™…æ ‡å‡†ç»„ç»‡ IEC æ‰¹å‡† IEEE 754&#x2F;854 ä¸ºå›½é™…æ ‡å‡† IEC 559ï¼š1989ã€‚åæ¥ç»ä¿®è®¢åï¼Œæ ‡å‡†å·æ”¹ä¸º IEC 60559ã€‚ç°åœ¨ï¼Œå‡ ä¹æ‰€æœ‰çš„æµ®ç‚¹å¤„ç†å™¨å®Œå…¨æˆ–åŸºæœ¬æ”¯æŒ IEC 60559ã€‚åŒæ—¶ï¼ŒC99 çš„æµ®ç‚¹è¿ç®—ä¹Ÿæ”¯æŒ IEC 60559ã€‚ â€‹ IEEE æµ®ç‚¹æ•°æ ‡å‡†æ˜¯ä»é€»è¾‘ä¸Šç”¨ä¸‰å…ƒç»„{Sï¼ŒEï¼ŒM}æ¥è¡¨ç¤ºä¸€ä¸ªæ•° V çš„ï¼Œå³ V &#x3D;ï¼ˆ-1)^S * M * 2^Eï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š ç¬¦å·ä½Sï¼ˆsignï¼‰:S &#x3D; 0: è¡¨ç¤ºè¯¥æ•°ä¸ºæ­£æ•°ï¼ŒS &#x3D; 1:è¡¨ç¤ºè¯¥æ•°ä¸ºè´Ÿæ•° æŒ‡æ•°ä½Eï¼ˆExponentï¼‰:åœ¨è®¡ç®—æœºä¸­ç”¨ç§»ç è¡¨ç¤ºï¼Œè¡¨ç¤º2çš„å¤šå°‘æ¬¡å¹‚ æœ‰æ•ˆä½Mï¼ˆSignificandï¼‰ï¼šåœ¨è®¡ç®—æœºä¸­ç”¨è¡¥ç è¡¨ç¤ºï¼Œè¡¨ç¤ºäºŒè¿›åˆ¶å°æ•°ï¼Œä¹Ÿç§°å°¾æ•° 2.IEEE754æ ‡å‡†ä¸‹çš„æµ®ç‚¹æ•°çš„æ ¼å¼ è¡¥ï¼šåŸç ï¼Œåç ï¼Œè¡¥ç ï¼Œç§»ç ï¼ˆä»¥8ä½ä¸ºä¾‹ï¼‰ äºŒè¿›åˆ¶æ•´æ•°éƒ½æ˜¯ä»¥è¡¥ç å½¢å¼å‡ºç°çš„ã€‚ æ­£æ•°çš„è¡¥ç ä¸åç ã€åŸç ä¸€è‡´ï¼Œ è´Ÿæ•°çš„è¡¥ç æ˜¯åç +1.è¿™æ ·ä½¿å‡æ³•è¿ç®—å¯ä»¥ä½¿ç”¨åŠ æ³•å™¨å®ç°ï¼Œç¬¦å·ä½ä¹Ÿå‚ä¸è¿ç®—; ç§»ç ä¸è¡¥ç å°±æ˜¯ç¬¦å·ä½å–å åè¿›åˆ¶åŸç  äºŒè¿›åˆ¶åŸç  åç  è¡¥ç  ç§»ç  -128 æ—  æ—  1000 0000 0000 0000 -127 1111 1111 1000 0000 1000 0001 0000 0001 -126 1111 1110 1000 0001 1000 0010 0000 0010 â€¦â€¦ â€¦â€¦ â€¦â€¦ â€¦â€¦ â€¦â€¦ -1 1000 0001 1111 1110 1111 1111 0111 1111 -0 1000 0000 1111 1111 æ—  æ—  +0 0000 0000 0000 0000 0000 0000 1000 0000 +1 0000 0001 0000 0001 0000 0001 1000 0001 â€¦â€¦ â€¦â€¦ â€¦â€¦ â€¦â€¦ â€¦â€¦ +126 0111 1110 0111 1110 0111 1110 1111 1110 +127 0111 1111 0111 1111 0111 1111 1111 1111 ç§»ç çš„è®¡ç®—æ–¹æ³•ï¼š â€‹ ç§»ç  &#x3D; çœŸå€¼+åç½®å€¼ åç½®å€¼çš„è®¡ç®—æ–¹æ³• åç½®å€¼ ieee754åç½®å€¼ æ™®é€šåç½®å€¼ è®¡ç®—æ–¹æ³• 2^(n-1) - 1 2^(n-1) nä»£è¡¨çš„å«ä¹‰ è¡¨ç¤ºç§»ç çš„ä½æ•° åŸç çš„ä½æ•° â€‹ åœ¨IEEE754æ ‡å‡†ä¸­ï¼Œè§„æ ¼åŒ–çš„æµ®ç‚¹æ•°çš„å°¾æ•°éƒ¨åˆ†é€šå¸¸éšè—æœ€é«˜æœ‰æ•ˆä½1 æ•°ç¬¦ é˜¶ç éƒ¨åˆ†ï¼Œä½¿ç”¨ç§»ç è¡¨ç¤ºï¼ˆé˜¶ç å…¨1æˆ–å…¨0ç‰¹æ®Šç”¨é€”ï¼‰ å°¾æ•°éƒ¨åˆ†ï¼Œç”¨åŸç è¡¨ç¤ºï¼ˆéšè—æœ€é«˜ä½ä¸º1ï¼‰ A E Mï¼ˆ1.Mï¼‰ â€‹ å„ç±»æµ®ç‚¹æ•°å„éƒ¨åˆ†å ç”¨ä½æ•°åŠæ ¼å¼ï¼š ç±»å‹ å¤§å°ï¼ˆB) æ•°ç¬¦ é˜¶ç  å°¾æ•° æ€»ä½æ•°ï¼ˆbitï¼‰ 16ä½åç½® 10ä½åç½® float 4 1 8 23 32 7FH 127 double 8 1 11 52 64 3FFH 1023 long double 10 1 15 64 80 3FFFH 16383 3.æµ®ç‚¹æ•°çš„è§„æ ¼åŒ–â€‹ å¯¹äºä¸€ä¸ªå°æ•°æ®µfracï¼Œå¯è§£é‡Šä¸ºæè¿°å°æ•°å€¼ fï¼Œå…¶ä¸­ 0â‰¤f&lt;1ï¼Œå…¶äºŒè¿›åˆ¶è¡¨ç¤ºä¸º 0.fn-1â€¦ f1f0ï¼Œä¹Ÿå°±æ˜¯äºŒè¿›åˆ¶å°æ•°ç‚¹åœ¨æœ€é«˜æœ‰æ•ˆä½çš„å·¦è¾¹ã€‚æœ‰æ•ˆæ•°å­—å®šä¹‰ä¸º M&#x3D;1+fã€‚æœ‰æ—¶å€™ï¼Œè¿™ç§æ–¹å¼ä¹Ÿå«ä½œéšå«çš„ä»¥ 1 å¼€å¤´çš„è¡¨ç¤ºæ³•ï¼Œå› ä¸ºæˆ‘ä»¬å¯ä»¥æŠŠ M çœ‹æˆä¸€ä¸ªäºŒè¿›åˆ¶è¡¨è¾¾å¼ä¸º 1.fn-1fn-2â€¦f0 çš„æ•°å­—ã€‚æ—¢ç„¶æˆ‘ä»¬æ€»æ˜¯èƒ½å¤Ÿè°ƒæ•´æŒ‡æ•° Eï¼Œä½¿å¾—æœ‰æ•ˆæ•°å­— M çš„èŒƒå›´ä¸º 1â‰¤M&lt;2ï¼ˆå‡è®¾æ²¡æœ‰æº¢å‡ºï¼‰ï¼Œé‚£ä¹ˆè¿™ç§è¡¨ç¤ºæ–¹æ³•æ˜¯ä¸€ç§è½»æ¾è·å¾—ä¸€ä¸ªé¢å¤–ç²¾åº¦ä½çš„æŠ€å·§ã€‚åŒæ—¶ï¼Œç”±äºç¬¬ä¸€ä½æ€»æ˜¯ç­‰äº 1ï¼Œå› æ­¤æˆ‘ä»¬å°±ä¸éœ€è¦æ˜¾å¼åœ°è¡¨ç¤ºå®ƒã€‚æ‹¿å•ç²¾åº¦æ•°ä¸ºä¾‹ï¼ŒæŒ‰ç…§ä¸Šé¢æ‰€ä»‹ç»çš„çŸ¥è¯†ï¼Œå®é™…ä¸Šå¯ä»¥ç”¨ 23 ä½é•¿çš„æœ‰æ•ˆæ•°å­—æ¥è¡¨è¾¾ 24 ä½çš„æœ‰æ•ˆæ•°å­—ã€‚ â€‹ æ¯”å¦‚ï¼Œå¯¹å•ç²¾åº¦æ•°è€Œè¨€ï¼ŒäºŒè¿›åˆ¶çš„ 1001.101ï¼ˆå³åè¿›åˆ¶çš„ 9.625ï¼‰å¯ä»¥è¡¨è¾¾ä¸º 1.001101Ã—2^3ï¼Œæ‰€ä»¥å®é™…ä¿å­˜åœ¨æœ‰æ•ˆæ•°å­—ä½ä¸­ï¼ˆå³å°¾æ•°éƒ¨åˆ†ï¼‰çš„å€¼ä¸ºï¼š 100110100000000000000000 å³ï¼Œå»æ‰å°æ•°ç‚¹åŠå…¶å·¦è¾¹çš„1ï¼Œå¹¶ç”¨0è¡¥é½å°¾æ•°ï¼ˆæ¶‰åŠåˆ°äº†è¡¥ç çš„ä½æ•°æ‰©å±•ï¼Œè¯¦ç»†ç»†èŠ‚è¯·æŸ¥é˜…ç›¸å…³èµ„æ–™ï¼‰ â€‹ æ ¹æ®ä¸Šè¿°è§„åˆ™ï¼Œä¸‹é¢æ˜¯å°†-9.625è½¬åŒ–ä¸ºå•ç²¾åº¦æµ®ç‚¹æ•°çš„çš„å…·ä½“è¿‡ç¨‹ï¼š 1ã€é¦–å…ˆï¼Œéœ€è¦å°† -9.625 ç”¨äºŒè¿›åˆ¶æµ®ç‚¹æ•°è¡¨è¾¾å‡ºæ¥ï¼Œç„¶åå˜æ¢ä¸ºç›¸åº”çš„æµ®ç‚¹æ•°æ ¼å¼ã€‚å³ -9.625 çš„äºŒè¿›åˆ¶ä¸º 1001.101ï¼Œç”¨è§„èŒƒçš„æµ®ç‚¹æ•°è¡¨è¾¾åº”ä¸º 1.001101Ã—2^3ã€‚ 2ã€å…¶æ¬¡ï¼Œå› ä¸º -9.625 æ˜¯è´Ÿæ•°ï¼Œæ‰€ä»¥ç¬¦å·æ®µä¸º 1ã€‚è€Œè¿™é‡Œçš„æŒ‡æ•°ä¸º 3ï¼Œæ‰€ä»¥æŒ‡æ•°æ®µä¸º 3+127&#x3D;130ï¼Œå³äºŒè¿›åˆ¶çš„ 10000010ã€‚æœ‰æ•ˆæ•°å­—çœç•¥æ‰å°æ•°ç‚¹å·¦ä¾§çš„ 1 ä¹‹åä¸º 001101ï¼Œç„¶ååœ¨å³ä¾§ç”¨é›¶è¡¥é½ã€‚å› æ­¤æ‰€å¾—çš„æœ€ç»ˆç»“æœä¸ºï¼š 3ã€æœ€åï¼Œæˆ‘ä»¬è¿˜å¯ä»¥å°†æµ®ç‚¹æ•°å½¢å¼è¡¨ç¤ºä¸ºåå…­è¿›åˆ¶çš„æ•°æ®ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š å³æœ€ç»ˆçš„åå…­è¿›åˆ¶ç»“æœä¸º 0xC11A0000ã€‚ 4.æ­ç¤ºç‰¹æ®Šå€¼â€‹ IEEE æ ‡å‡†æŒ‡å®šäº†ä»¥ä¸‹ç‰¹æ®Šå€¼ï¼šÂ±0ã€åå‘è§„æ ¼åŒ–çš„æ•°ã€Â±âˆ å’Œ NaNï¼ˆå¦‚ä¸‹è¡¨æ‰€ç¤ºï¼‰ã€‚è¿™äº›ç‰¹æ®Šå€¼éƒ½æ˜¯ä½¿ç”¨ emax+1 æˆ– emin-1 çš„æŒ‡æ•°è¿›è¡Œç¼–ç çš„ã€‚ NaNâ€‹ NaNï¼šå½“æŒ‡æ•°æ®µ exp å…¨ä¸º 1 æ—¶ï¼Œå°æ•°æ®µä¸ºéé›¶æ—¶ï¼Œç»“æœå€¼å°±è¢«ç§°ä¸ºâ€œNaNâ€ï¼ˆNot any Numberï¼‰ï¼Œå¦‚ä¸‹å›¾ æ‰€ç¤ºã€‚ â€‹ ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å°† 0&#x2F;0 æˆ–: è§†ä¸ºå¯¼è‡´è®¡ç®—ç»ˆæ­¢çš„ä¸å¯æ¢å¤é”™è¯¯ã€‚ä½†æ˜¯ï¼Œä¸€äº›ç¤ºä¾‹è¡¨æ˜åœ¨è¿™æ ·çš„æƒ…å†µä¸‹ç»§ç»­è¿›è¡Œè®¡ç®—æ˜¯æœ‰æ„ä¹‰çš„ã€‚è¿™æ—¶å€™å°±å¯ä»¥é€šè¿‡å¼•å…¥ç‰¹æ®Šå€¼ NaNï¼Œå¹¶æŒ‡å®šè¯¸å¦‚ 0&#x2F;0 æˆ– ä¹‹ç±»çš„è¡¨è¾¾å¼è®¡ç®—æ¥ç”Ÿæˆ NaN è€Œä¸æ˜¯åœæ­¢è®¡ç®—ï¼Œä»è€Œé¿å…æ­¤é—®é¢˜ã€‚ä¸‹è¡¨ä¸­åˆ—å‡ºäº†ä¸€äº›å¯ä»¥å¯¼è‡´ NaN çš„æƒ…å†µã€‚ æ— ç©·â€‹ æ— ç©·ï¼šå½“æŒ‡æ•°æ®µ eå…¨ä¸º 1ï¼Œå°æ•°æ®µå…¨ä¸º 0 æ—¶ï¼Œå¾—åˆ°çš„å€¼è¡¨ç¤ºæ— ç©·ã€‚å½“ s&#x3D;0 æ—¶æ˜¯ +âˆï¼Œæˆ–è€…å½“ s&#x3D;1 æ—¶æ˜¯ -âˆã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚ æ— ç©·ç”¨äºè¡¨è¾¾è®¡ç®—ä¸­äº§ç”Ÿçš„ä¸Šæº¢é—®é¢˜ã€‚æ¯”å¦‚ä¸¤ä¸ªæå¤§çš„æ•°ç›¸ä¹˜æ—¶ï¼Œå°½ç®¡ä¸¤ä¸ªæ“ä½œæ•°æœ¬èº«å¯ä»¥ä¿å­˜ä¸ºæµ®ç‚¹æ•°ï¼Œä½†å…¶ç»“æœå¯èƒ½å¤§åˆ°æ— æ³•ä¿å­˜ä¸ºæµ®ç‚¹æ•°ï¼Œå¿…é¡»è¿›è¡Œèˆå…¥æ“ä½œã€‚æ ¹æ®IEEEæ ‡å‡†ï¼Œæ­¤æ—¶ä¸èƒ½å°†ç»“æœèˆå…¥ä¸ºå¯ä»¥ä¿å­˜çš„æœ€å¤§æµ®ç‚¹æ•°ï¼ˆå› ä¸ºè¿™ä¸ªæ•°å¯èƒ½ä¸å®é™…çš„ç»“æœç›¸å·®å¤ªè¿œè€Œæ¯«æ— æ„ä¹‰ï¼‰ï¼Œè€Œåº”å°†å…¶èˆå…¥ä¸ºæ— ç©·ã€‚å¯¹äºç»“æœä¸ºè´Ÿæ•°çš„æƒ…å†µä¹Ÿæ˜¯å¦‚æ­¤ï¼Œåªä¸è¿‡æ­¤æ—¶ä¼šèˆå…¥ä¸ºè´Ÿæ— ç©·ï¼Œä¹Ÿå°±æ˜¯è¯´ç¬¦å·åŸŸä¸º1çš„æ— ç©·ã€‚ éæ ¼å¼åŒ–å€¼å½“æŒ‡æ•°æ®µ exp å…¨ä¸º 0 æ—¶ï¼Œæ‰€è¡¨ç¤ºçš„æ•°å°±æ˜¯éè§„æ ¼åŒ–å½¢å¼ï¼Œå¦‚å›¾ 5 æ‰€ç¤ºã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒæŒ‡æ•°å€¼ E&#x3D;1-Biasï¼Œè€Œæœ‰æ•ˆæ•°å­—çš„å€¼ M&#x3D;fï¼Œä¹Ÿå°±æ˜¯è¯´å®ƒæ˜¯å°æ•°æ®µçš„å€¼ï¼Œä¸åŒ…å«éšå«çš„å¼€å¤´çš„ 1ã€‚ éè§„æ ¼åŒ–å€¼æœ‰ä¸¤ä¸ªç”¨é€”ï¼š ç¬¬ä¸€ï¼Œå®ƒæä¾›äº†ä¸€ç§è¡¨ç¤ºæ•°å€¼ 0 çš„æ–¹æ³•ã€‚å› ä¸ºè§„æ ¼åŒ–æ•°å¿…é¡»å¾—ä½¿æœ‰æ•ˆæ•°å­— M åœ¨èŒƒå›´ 1â‰¤M&lt;2 ä¹‹ä¸­ï¼Œå³ Mâ‰¥1ï¼Œå› æ­¤å®ƒå°±ä¸èƒ½è¡¨ç¤º 0ã€‚å®é™…ä¸Šï¼Œ+0.0 çš„æµ®ç‚¹è¡¨ç¤ºçš„ä½æ¨¡å¼ä¸ºå…¨ 0ï¼ˆå³ç¬¦å·ä½æ˜¯ 0ï¼ŒæŒ‡æ•°æ®µå…¨ä¸º 0ï¼Œè€Œå°æ•°æ®µä¹Ÿå…¨ä¸º 0ï¼‰ï¼Œè¿™å°±å¾—åˆ° M&#x3D;f&#x3D;0ã€‚ä»¤äººå¥‡æ€ªçš„æ˜¯ï¼Œå½“ç¬¦å·ä½ä¸º 1ï¼Œè€Œå…¶ä»–æ®µå…¨ä¸º 0 æ—¶ï¼Œå°±ä¼šå¾—åˆ°å€¼ -0.0ã€‚æ ¹æ® IEEE çš„æµ®ç‚¹æ ¼å¼æ¥çœ‹ï¼Œå€¼ +0.0 å’Œ -0.0 åœ¨æŸäº›æ–¹é¢æ˜¯ä¸åŒçš„ã€‚ ç¬¬äºŒï¼Œå®ƒè¡¨ç¤ºé‚£äº›éå¸¸æ¥è¿‘äº 0.0 çš„æ•°ã€‚å®ƒä»¬æä¾›äº†ä¸€ç§å±æ€§ï¼Œç§°ä¸ºé€æ¸ä¸‹æº¢å‡ºã€‚å…¶ä¸­ï¼Œå¯èƒ½çš„æ•°å€¼åˆ†å¸ƒå‡åŒ€åœ°æ¥è¿‘äº 0.0ã€‚ ä¸‹é¢çš„å•ç²¾åº¦æµ®ç‚¹æ•°å°±æ˜¯ä¸€ä¸ªéæ ¼å¼åŒ–çš„ç¤ºä¾‹ã€‚ å®ƒè¢«è½¬æ¢æˆåè¿›åˆ¶è¡¨ç¤ºå¤§çº¦ç­‰äº 1.4Ã—10-45ï¼Œå®é™…ä¸Šå®ƒå°±æ˜¯å•ç²¾åº¦æµ®ç‚¹æ•°æ‰€èƒ½è¡¨è¾¾çš„æœ€å°éæ ¼å¼åŒ–æ•°ã€‚ä»¥æ­¤ç±»æ¨ï¼Œæ ¼å¼åŒ–å€¼å’Œéæ ¼å¼åŒ–å€¼æ‰€èƒ½è¡¨è¾¾çš„éè´Ÿæ•°å€¼èŒƒå›´å¦‚ä¸‹è¡¨æ‰€ç¤ºã€‚ å…­.å°å°çš„æ€»ç»“â€‹ é€šè¿‡å­¦ä¹ IEEE754æ ‡å‡†åï¼Œå†å›é¡¾float.h,ç›¸ä¿¡å¯¹ä¸€äº›å®å®šä¹‰çš„å€¼å°±æœ‰äº†æ¯”è¾ƒå¥½çš„ç†è§£äº†ï¼Œä¾‹å¦‚ 12#define FLT_DIG 6 // # of decimal digits of precision#define DBL_DIG 15 // # è½¬æ¢æˆåè¿›åˆ¶å½¢å¼åï¼Œå°æ•°ç‚¹åç²¾ç¡®æ•°å­—ï¼ˆèƒ½å¤Ÿä¿è¯ç²¾åº¦çš„æ•°å­—ï¼‰çš„ä½æ•°ã€‚ å› ä¸ºå•ç²¾åº¦æµ®ç‚¹æ•°çš„å°¾æ•°æœ‰23ä½ï¼Œ2^23 &#x3D; 8388608ï¼Œä¸€å…±ä¸ƒä½åè¿›åˆ¶æ•°ï¼Œè¿™æ„å‘³ç€è½¬åŒ–ä¸ºåè¿›åˆ¶ä¹‹åï¼Œæœ€å¤šèƒ½æœ‰7ä½æœ‰æ•ˆæ•°å­—ï¼Œä½†ç»å¯¹èƒ½ä¿è¯çš„ä¸º6ä½ï¼Œä¹Ÿå³floatçš„ç²¾åº¦ä¸º6~7ä½æœ‰æ•ˆæ•°å­—ã€‚åŒç²¾åº¦æµ®ç‚¹æ•°åŒç†ã€‚","link":"","tags":[{"name":"c++","slug":"c","permalink":"https://lyroom.github.io/tags/c/"},{"name":"float","slug":"float","permalink":"https://lyroom.github.io/tags/float/"}]},{"title":"ã€Šåƒä¸åƒå¯»ã€‹æˆ‘çš„è·¯","date":"2023-01-11T17:12:02.000Z","path":"2023/01/12/ã€Šåƒä¸åƒå¯»ã€‹æˆ‘çš„è·¯/","text":"â€‹ ä¸ç®¡å‰æ–¹çš„è·¯æœ‰å¤šè‹¦ï¼Œåªè¦èµ°çš„æ–¹å‘æ­£ç¡®ï¼Œä¸ç®¡å¤šä¹ˆå´å²–ä¸å¹³ï¼Œéƒ½æ¯”ç«™åœ¨åŸåœ°æ›´æ¥è¿‘å¹¸ç¦ã€‚ â€‹ â€”â€” å®«å´éªã€Šåƒä¸åƒå¯»ã€‹ ã€Šåƒä¸åƒå¯»ã€‹ â€‹","link":"","tags":[{"name":"æµ®ç”Ÿå…­è®°","slug":"æµ®ç”Ÿå…­è®°","permalink":"https://lyroom.github.io/tags/%E6%B5%AE%E7%94%9F%E5%85%AD%E8%AE%B0/"}]},{"title":"å…«å¤§æ’åºç®—æ³•","date":"2020-08-09T11:23:00.000Z","path":"2020/08/09/å…«å¤§æ’åºç®—æ³•/","text":"1. æ¦‚è¿°æ’åºç®—æ³•åˆ†ä¸ºå†…éƒ¨æ’åºå’Œå¤–éƒ¨æ’åº å†…éƒ¨æ’åºæŠŠæ•°æ®è®°å½•æ”¾åœ¨å†…å­˜ä¸­è¿›è¡Œæ’åº; å¤–éƒ¨æ’åºå› æ’åºçš„æ•°æ®é‡å¤§ï¼Œå†…å­˜ä¸èƒ½ä¸€æ¬¡å®¹çº³å…¨éƒ¨çš„æ’åºè®°å½•ï¼Œæ‰€ä»¥åœ¨æ’åºè¿‡ç¨‹ä¸­éœ€è¦è®¿é—®å¤–å­˜ã€‚ ç»å¸¸æåŠçš„å…«å¤§æ’åºç®—æ³•æŒ‡çš„å°±æ˜¯å†…éƒ¨æ’åºçš„å…«ç§ç®—æ³•ï¼Œåˆ†åˆ«æ˜¯å†’æ³¡æ’åºã€å¿«é€Ÿæ’åºã€ç›´æ¥æ’å…¥æ’åºã€å¸Œå°”æ’åºã€ç®€å•é€‰æ‹©æ’åºã€å †æ’åºã€å½’å¹¶æ’åºå’ŒåŸºæ•°æ’åºï¼Œå¦‚æœæŒ‰åŸç†åˆ’åˆ†ï¼Œå†’æ³¡æ’åºå’Œå¿«é€Ÿæ’åºéƒ½å±äºäº¤æ¢æ’åºï¼Œç›´æ¥æ’å…¥æ’åºå’Œå¸Œå°”æ’åºå±äºæ’å…¥æ’åºï¼Œè€Œç®€å•é€‰æ‹©æ’åºå’Œå †æ’åºå±äºé€‰æ‹©æ’åºï¼Œå¦‚ä¸Šå›¾æ‰€ç¤ºã€‚ 2. å†’æ³¡æ’åº2.1 åŸºæœ¬æ€æƒ³å†’æ³¡æ’åºï¼ˆBubble Sortï¼‰æ˜¯ä¸€ç§ç®€å•çš„æ’åºç®—æ³•ã€‚å®ƒé‡å¤è®¿é—®è¦æ’åºçš„æ•°åˆ—ï¼Œä¸€æ¬¡æ¯”è¾ƒä¸¤ä¸ªå…ƒç´ ï¼Œå¦‚æœä»–ä»¬çš„é¡ºåºé”™è¯¯å°±æŠŠä»–ä»¬äº¤æ¢è¿‡æ¥ã€‚è®¿é—®æ•°åˆ—çš„å·¥ä½œæ˜¯é‡å¤åœ°è¿›è¡Œç›´åˆ°æ²¡æœ‰å†éœ€è¦äº¤æ¢çš„æ•°æ®ï¼Œä¹Ÿå°±æ˜¯è¯´è¯¥æ•°åˆ—å·²ç»æ’åºå®Œæˆã€‚è¿™ä¸ªç®—æ³•çš„åå­—ç”±æ¥æ˜¯å› ä¸ºè¶Šå°çš„å…ƒç´ ä¼šç»ç”±äº¤æ¢æ…¢æ…¢â€œæµ®â€åˆ°æ•°åˆ—çš„é¡¶ç«¯ï¼Œåƒæ°´ä¸­çš„æ°”æ³¡ä»æ°´åº•æµ®åˆ°æ°´é¢ã€‚ 2.2 ç®—æ³•æè¿°å†’æ³¡æ’åºç®—æ³•çš„ç®—æ³•è¿‡ç¨‹å¦‚ä¸‹ï¼š â‘ . æ¯”è¾ƒç›¸é‚»çš„å…ƒç´ ã€‚å¦‚æœç¬¬ä¸€ä¸ªæ¯”ç¬¬äºŒä¸ªå¤§ï¼Œå°±äº¤æ¢ä»–ä»¬ä¸¤ä¸ªã€‚ â‘¡. å¯¹æ¯ä¸€å¯¹ç›¸é‚»å…ƒç´ ä½œåŒæ ·çš„å·¥ä½œï¼Œä»å¼€å§‹ç¬¬ä¸€å¯¹åˆ°ç»“å°¾çš„æœ€åä¸€å¯¹ã€‚è¿™æ­¥åšå®Œåï¼Œæœ€åçš„å…ƒç´ ä¼šæ˜¯æœ€å¤§çš„æ•°ã€‚ â‘¢. é’ˆå¯¹æ‰€æœ‰çš„å…ƒç´ é‡å¤ä»¥ä¸Šçš„æ­¥éª¤ï¼Œé™¤äº†æœ€åä¸€ä¸ªã€‚ â‘£. æŒç»­æ¯æ¬¡å¯¹è¶Šæ¥è¶Šå°‘çš„å…ƒç´ é‡å¤ä¸Šé¢çš„æ­¥éª¤â‘ ~â‘¢ï¼Œç›´åˆ°æ²¡æœ‰ä»»ä½•ä¸€å¯¹æ•°å­—éœ€è¦æ¯”è¾ƒã€‚ 12345678910111213141516171819//å†’æ³¡æ’åº public static int[] BubbleSort(int [] arrays)&#123; //å¤–å±‚ï¼šéœ€è¦length-1æ¬¡å¾ªç¯æ¯”è¾ƒ for (int i=0;i&lt;arrays.length-1;i++)&#123; //å†…å±‚ï¼šéœ€è¦æ¯ä¸¤ä¸ªç›¸é‚»å…ƒç´ æ¯”è¾ƒï¼Œå¦‚æœå‰ä¸€ä¸ªæ•°æ®å¤§äºç¬¬äºŒä¸ªï¼Œåˆ™äº¤æ¢ã€‚æœ€ç»ˆæ‰¾å‡ºæœ€å¤§çš„å…ƒç´  for (int j=0;j&lt;arrays.length-i-1;j++)&#123; if (arrays[j]&gt;=arrays[j+1]) swap(arrays , j, j+1); &#125; &#125; return arrays; &#125; public static void swap(int[] array, int i, int j) &#123; int temp = array[i]; array[i] = array[j]; array[j] = temp; &#125;&#125; 2.4 ç®—æ³•æ•ˆç‡å†’æ³¡æ’åºæ˜¯ç¨³å®šçš„æ’åºç®—æ³•ï¼Œæœ€å®¹æ˜“å®ç°çš„æ’åº, æœ€åçš„æƒ…å†µæ˜¯æ¯æ¬¡éƒ½éœ€è¦äº¤æ¢, å…±éœ€éå†å¹¶äº¤æ¢å°†è¿‘nÂ²&#x2F;2æ¬¡, æ—¶é—´å¤æ‚åº¦ä¸ºO(nÂ²). æœ€ä½³çš„æƒ…å†µæ˜¯å†…å¾ªç¯éå†ä¸€æ¬¡åå‘ç°æ’åºæ˜¯å¯¹çš„, å› æ­¤é€€å‡ºå¾ªç¯, æ—¶é—´å¤æ‚åº¦ä¸ºO(n). å¹³å‡æ¥è®², æ—¶é—´å¤æ‚åº¦ä¸ºO(nÂ²). ç”±äºå†’æ³¡æ’åºä¸­åªæœ‰ç¼“å­˜çš„tempå˜é‡éœ€è¦å†…å­˜ç©ºé—´, å› æ­¤ç©ºé—´å¤æ‚åº¦ä¸ºå¸¸é‡O(1)ã€‚ 2.5 äº¤æ¢æ•°å­—çš„ä¸‰ç§æ–¹æ³•æˆ‘ä»¬ä»å†’æ³¡æ’åºçš„ä»£ç ä¸­çœ‹åˆ°äº†äº¤æ¢ä¸¤ä¸ªæ•°å­—çš„æ–¹æ³• swap(int[] array, int i, int j)ï¼Œè¿™é‡Œä½¿ç”¨äº†ä¸´æ—¶å˜é‡ï¼Œè€Œäº¤æ¢æ•°å­—ä¸»è¦æœ‰ä¸‰ç§æ–¹æ³•ï¼Œä¸´æ—¶å˜é‡æ³•ã€ç®—æœ¯æ³•ã€ä½è¿ç®—æ³•ã€é¢è¯•ä¸­ç»å¸¸ä¼šé—®åˆ°ï¼Œè¿™é‡Œç®€å•è¯´ä¸€ä¸‹ï¼Œä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839//swapçš„ä¸‰ç§æ–¹æ³• //1.ä¸´æ—¶å˜é‡æ³• /** * é€šè¿‡ä¸´æ—¶å˜é‡äº¤æ¢æ•°ç»„arrayçš„iå’Œjä½ç½®çš„æ•°æ® * @param array æ•°ç»„ * @param i ä¸‹æ ‡i * @param j ä¸‹æ ‡j */ public static void swap_temp(int[] array, int i, int j) &#123; int temp = array[i]; array[i] = array[j]; array[j] = temp; &#125; //2.ä½è¿ç®—æ³• /** * é€šè¿‡ä½è¿ç®—æ³•äº¤æ¢æ•°ç»„arrayçš„iå’Œjä½ç½®çš„æ•°æ® * @param array æ•°ç»„ * @param i ä¸‹æ ‡i * @param j ä¸‹æ ‡j */ public static void swap_Operation(int[] array, int i, int j) &#123; array[i] = array[i] ^ array[j]; array[j] = array[i] ^ array[j]; //array[i]^array[j]^array[j]=array[i] array[i] = array[i] ^ array[j]; //array[i]^array[j]^array[i]=array[j] &#125; //3.Arithmetic /** * é€šè¿‡ç®—æœ¯æ³•äº¤æ¢æ•°ç»„arrayçš„iå’Œjä½ç½®çš„æ•°æ®ï¼ˆæœ‰å¯èƒ½æº¢å‡ºï¼‰ * @param array æ•°ç»„ * @param i ä¸‹æ ‡i * @param j ä¸‹æ ‡j */ public static void swap_Arithmetic(int[] array, int i, int j) &#123; array[i] = array[i] + array[i + 1]; array[i + 1] = array[i] -array[i + 1]; //array[i]^array[j]^array[j]=array[i] array[i] = array[i] -array[i + 1]; //array[i]^array[j]^array[i]=array[j] &#125;&#125; 3. å¿«é€Ÿæ’åº3.1 åŸºæœ¬æ€æƒ³å¿«é€Ÿæ’åºï¼ˆQuicksortï¼‰æ˜¯å¯¹å†’æ³¡æ’åºçš„ä¸€ç§æ”¹è¿›ï¼Œå€Ÿç”¨äº†åˆ†æ²»çš„æ€æƒ³ï¼Œç”±C. A. R. Hoareåœ¨1962å¹´æå‡ºã€‚ åŸºæœ¬æ€æƒ³ï¼šé€šè¿‡ä¸€è¶Ÿæ’åºå°†è¦æ’åºçš„æ•°æ®åˆ†å‰²æˆç‹¬ç«‹çš„ä¸¤éƒ¨åˆ†ï¼Œå…¶ä¸­ä¸€éƒ¨åˆ†çš„æ‰€æœ‰æ•°æ®éƒ½æ¯”å¦å¤–ä¸€éƒ¨åˆ†çš„æ‰€æœ‰æ•°æ®éƒ½è¦å°ï¼Œç„¶åå†æŒ‰æ­¤æ–¹æ³•å¯¹è¿™ä¸¤éƒ¨åˆ†æ•°æ®åˆ†åˆ«è¿›è¡Œå¿«é€Ÿæ’åºï¼Œæ•´ä¸ªæ’åºè¿‡ç¨‹å¯ä»¥é€’å½’è¿›è¡Œï¼Œä»¥æ­¤è¾¾åˆ°æ•´ä¸ªæ•°æ®å˜æˆæœ‰åºåºåˆ—ã€‚ 3.2 ç®—æ³•æè¿°å¿«é€Ÿæ’åºä½¿ç”¨åˆ†æ²»ç­–ç•¥æ¥æŠŠä¸€ä¸ªåºåˆ—ï¼ˆlistï¼‰åˆ†ä¸ºä¸¤ä¸ªå­åºåˆ—ï¼ˆsub-listsï¼‰ã€‚æ­¥éª¤ä¸ºï¼š â‘ . ä»æ•°åˆ—ä¸­æŒ‘å‡ºä¸€ä¸ªå…ƒç´ ï¼Œç§°ä¸ºâ€åŸºå‡†â€ï¼ˆpivotï¼‰ã€‚ â‘¡. é‡æ–°æ’åºæ•°åˆ—ï¼Œæ‰€æœ‰æ¯”åŸºå‡†å€¼å°çš„å…ƒç´ æ‘†æ”¾åœ¨åŸºå‡†å‰é¢ï¼Œæ‰€æœ‰æ¯”åŸºå‡†å€¼å¤§çš„å…ƒç´ æ‘†åœ¨åŸºå‡†åé¢ï¼ˆç›¸åŒçš„æ•°å¯ä»¥åˆ°ä»»ä¸€è¾¹ï¼‰ã€‚åœ¨è¿™ä¸ªåˆ†åŒºç»“æŸä¹‹åï¼Œè¯¥åŸºå‡†å°±å¤„äºæ•°åˆ—çš„ä¸­é—´ä½ç½®ã€‚è¿™ä¸ªç§°ä¸ºåˆ†åŒºï¼ˆpartitionï¼‰æ“ä½œã€‚ â‘¢. é€’å½’åœ°ï¼ˆrecursivelyï¼‰æŠŠå°äºåŸºå‡†å€¼å…ƒç´ çš„å­æ•°åˆ—å’Œå¤§äºåŸºå‡†å€¼å…ƒç´ çš„å­æ•°åˆ—æ’åºã€‚ é€’å½’åˆ°æœ€åº•éƒ¨æ—¶ï¼Œæ•°åˆ—çš„å¤§å°æ˜¯é›¶æˆ–ä¸€ï¼Œä¹Ÿå°±æ˜¯å·²ç»æ’åºå¥½äº†ã€‚è¿™ä¸ªç®—æ³•ä¸€å®šä¼šç»“æŸï¼Œå› ä¸ºåœ¨æ¯æ¬¡çš„è¿­ä»£ï¼ˆiterationï¼‰ä¸­ï¼Œå®ƒè‡³å°‘ä¼šæŠŠä¸€ä¸ªå…ƒç´ æ‘†åˆ°å®ƒæœ€åçš„ä½ç½®å»ã€‚ 3.3 ä»£ç å®ç°â‘ . æŒ–å‘æ³• ç”¨ä¼ªä»£ç æè¿°å¦‚ä¸‹ï¼š ï¼ˆ1ï¼‰low &#x3D; L; high &#x3D; R; å°†åŸºå‡†æ•°æŒ–å‡ºå½¢æˆç¬¬ä¸€ä¸ªå‘a[low]ã€‚ ï¼ˆ2ï¼‰highâ€“ï¼Œç”±åå‘å‰æ‰¾æ¯”å®ƒå°çš„æ•°ï¼Œæ‰¾åˆ°åæŒ–å‡ºæ­¤æ•°å¡«å‰ä¸€ä¸ªå‘a[low]ä¸­ã€‚ ï¼ˆ3ï¼‰low++ï¼Œç”±å‰å‘åæ‰¾æ¯”å®ƒå¤§çš„æ•°ï¼Œæ‰¾åˆ°åä¹ŸæŒ–å‡ºæ­¤æ•°å¡«åˆ°å‰ä¸€ä¸ªå‘a[high]ä¸­ã€‚ ï¼ˆ4ï¼‰å†é‡å¤æ‰§è¡Œâ‘¡ï¼Œâ‘¢äºŒæ­¥ï¼Œç›´åˆ°low&#x3D;&#x3D;highï¼Œå°†åŸºå‡†æ•°å¡«å…¥a[low]ä¸­ã€‚ ä¸¾ä¾‹è¯´æ˜ï¼š ä¸€ä¸ªæ— åºæ•°ç»„ï¼š[4, 3, 7, 5, 10, 9, 1, 6, 8, 2] ï¼ˆ1ï¼‰éšä¾¿å…ˆæŒ–ä¸ªå‘ï¼Œå°±åœ¨ç¬¬ä¸€ä¸ªå…ƒç´ ï¼ˆåŸºå‡†å…ƒç´ ï¼‰æŒ–å‘ï¼ŒæŒ–å‡ºæ¥çš„â€œèåœâ€ï¼ˆç¬¬ä¸€ä¸ªå…ƒç´ 4ï¼‰åœ¨â€œç¯®å­â€ï¼ˆä¸´æ—¶å˜é‡ï¼‰é‡Œå¤‡ç”¨ã€‚ æŒ–å®Œä¹‹åçš„æ•°ç»„æ˜¯è¿™æ ·ï¼š[ å‘, 3, 7, 5, 10, 9, 1, 6, 8,2] ï¼ˆ2ï¼‰æŒ–å³å‘å¡«å·¦å‘ï¼šä»å³è¾¹å¼€å§‹ï¼Œæ‰¾ä¸ªæ¯”â€œèåœâ€ï¼ˆå…ƒç´ 4ï¼‰å°çš„å…ƒç´ ï¼ŒæŒ–å‡ºæ¥ï¼Œå¡«åˆ°å‰ä¸€ä¸ªå‘é‡Œé¢ã€‚ å¡«å‘ä¹‹åï¼š[ 2, 3, 7, 5, 10, 9, 1, 6, 8,å‘] ï¼ˆ3ï¼‰æŒ–å·¦å‘å¡«å³å‘ï¼šä»å·¦è¾¹å¼€å§‹ï¼Œæ‰¾ä¸ªæ¯”â€œèåœâ€ï¼ˆå…ƒç´ 4ï¼‰å¤§çš„å…ƒç´ ï¼ŒæŒ–å‡ºæ¥ï¼Œå¡«åˆ°å³è¾¹çš„å‘é‡Œé¢ã€‚ å¡«å‘ä¹‹åï¼š[ 2, 3,å‘, 5, 10, 9, 1, 6, 8, 7] ï¼ˆ4ï¼‰æŒ–å³å‘å¡«å·¦å‘ï¼šä»å³è¾¹å¼€å§‹ï¼Œæ‰¾ä¸ªæ¯”â€œèåœâ€ï¼ˆå…ƒç´ 4ï¼‰å°çš„å…ƒç´ ï¼ŒæŒ–å‡ºæ¥ï¼Œå¡«åˆ°å‰ä¸€ä¸ªå‘é‡Œé¢ã€‚ å¡«å‘ä¹‹åï¼š[ 2, 3, 1, 5, 10, 9,å‘, 6, 8, 7] ï¼ˆ5ï¼‰æŒ–å·¦å‘å¡«å³å‘ï¼šä»å·¦è¾¹å¼€å§‹ï¼Œæ‰¾ä¸ªæ¯”â€œèåœâ€ï¼ˆå…ƒç´ 4ï¼‰å¤§çš„å…ƒç´ ï¼ŒæŒ–å‡ºæ¥ï¼Œå¡«åˆ°å³è¾¹çš„å‘é‡Œé¢ã€‚ å¡«å‘ä¹‹åï¼š[ 2, 3, 1,å‘, 10, 9, 5, 6, 8, 7] ï¼ˆ6ï¼‰æŒ–å³å‘å¡«å·¦å‘ï¼šä»å³è¾¹å¼€å§‹ï¼Œæ‰¾ä¸ªæ¯”â€œèåœâ€ï¼ˆå…ƒç´ 4ï¼‰å°çš„å…ƒç´ ï¼ŒæŒ–å‡ºæ¥ï¼Œå¡«åˆ°å‰ä¸€ä¸ªå‘é‡Œé¢ï¼Œè¿™ä¸€æ¬¡æ‰¾å‘çš„è¿‡ç¨‹ä¸­ï¼Œæ‰¾åˆ°äº†ä¸Šä¸€æ¬¡æŒ–çš„å‘äº†ï¼Œè¯´æ˜å¯ä»¥åœäº†ï¼Œç”¨ç¯®å­é‡Œçš„çš„èåœï¼ŒæŠŠè¿™ä¸ªå‘å¡«äº†å°±è¡Œäº†ï¼Œå¹¶ä¸”è¿”å›è¿™ä¸ªå‘çš„ä½ç½®ï¼Œä½œä¸ºåˆ†è€Œæ²»ä¹‹çš„ä¸­è½´çº¿ã€‚ å¡«å‘ä¹‹åï¼š[ 2, 3, 1, 4, 10, 9, 5, 6, 8, 7] 1234567891011121314151617181920212223242526272829303132333435363738/** * å¿«é€Ÿæ’åºï¼ˆæŒ–å‘æ³•é€’å½’ï¼‰ * @param arr å¾…æ’åºæ•°ç»„ * @param low å·¦è¾¹ç•Œ * @param high å³è¾¹ç•Œ */public static void sort(int arr[], int low, int high) &#123; //é€’å½’éœ€è¦ä¸€ä¸ªç»“æŸç‚¹ if (arr == null || arr.length &lt;= 0) &#123; return; &#125; if (low &gt;= high) &#123; return; &#125; int left = low; int right = high; //æŒ–å‘1ï¼šä¿å­˜åŸºå‡†çš„å€¼ int temp = arr[left]; while (left &lt; right) &#123; while (left &lt; right &amp;&amp; arr[right] &gt;= temp) &#123; right--; &#125; //å‘2ï¼šä»åå‘å‰æ‰¾åˆ°æ¯”åŸºå‡†å°çš„å…ƒç´ ï¼Œæ’å…¥åˆ°åŸºå‡†ä½ç½®å‘1ä¸­ arr[left] = arr[right]; while (left &lt; right &amp;&amp; arr[left] &lt;= temp) &#123; left ++; &#125; //å‘3ï¼šä»å‰å¾€åæ‰¾åˆ°æ¯”åŸºå‡†å¤§çš„å…ƒç´ ï¼Œæ”¾åˆ°åˆšæ‰æŒ–çš„å‘2ä¸­ arr[right] = arr[left]; &#125; //åŸºå‡†å€¼å¡«è¡¥åˆ°å‘3ä¸­ï¼Œå‡†å¤‡åˆ†æ²»é€’å½’å¿«æ’ arr[left] = temp; System.out.println(&quot;Sorting: &quot; + Arrays.toString(arr)); sort(arr, low, left-1); sort(arr, left + 1, high);&#125; â‘¡. å·¦å³æŒ‡é’ˆæ³• ç”¨ä¼ªä»£ç æè¿°å¦‚ä¸‹ï¼š ï¼ˆ1ï¼‰low &#x3D; L; high &#x3D; R; é€‰å–a[low]ä½œä¸ºå…³é”®å­—è®°å½•ä¸ºkeyã€‚ ï¼ˆ2ï¼‰highâ€“ï¼Œç”±åå‘å‰æ‰¾æ¯”å®ƒå°çš„æ•° ï¼ˆ3ï¼‰low++ï¼Œç”±å‰å‘åæ‰¾æ¯”å®ƒå¤§çš„æ•° ï¼ˆ4ï¼‰äº¤æ¢ç¬¬ï¼ˆ2ï¼‰ã€ï¼ˆ3ï¼‰æ­¥æ‰¾åˆ°çš„æ•° ï¼ˆ5ï¼‰é‡å¤ï¼ˆ2ï¼‰ã€ï¼ˆ3ï¼‰ï¼Œä¸€ç›´å¾€åæ‰¾ï¼Œç›´åˆ°leftå’Œrightç›¸é‡ï¼Œè¿™æ—¶å°†keyå’Œa[low]äº¤æ¢ä½ç½®ã€‚ ä»£ç å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041/** * å¿«é€Ÿæ’åºï¼ˆå·¦å³æŒ‡é’ˆæ³•ï¼‰ * @param arr å¾…æ’åºæ•°ç»„ * @param low å·¦è¾¹ç•Œ * @param high å³è¾¹ç•Œ */public static void sort2(int arr[], int low, int high) &#123; if (arr == null || arr.length &lt;= 0) &#123; return; &#125; if (low &gt;= high) &#123; return; &#125; int left = low; int right = high; int key = arr[left]; while (left &lt; right) &#123; while (left &lt; right &amp;&amp; arr[right] &gt;= key) &#123; right--; &#125; while (left &lt; right &amp;&amp; arr[left] &lt;= key) &#123; left++; &#125; if (left &lt; right) &#123; swap(arr, left, right); &#125; &#125; swap(arr, low, left); System.out.println(&quot;Sorting: &quot; + Arrays.toString(arr)); sort2(arr, low, left - 1); sort2(arr, left + 1, high);&#125;public static void swap(int arr[], int low, int high) &#123; int tmp = arr[low]; arr[low] = arr[high]; arr[high] = tmp;&#125; 3.4 ç®—æ³•æ•ˆç‡å¿«é€Ÿæ’åºå¹¶ä¸ç¨³å®šï¼Œå¿«é€Ÿæ’åºæ¯æ¬¡äº¤æ¢çš„å…ƒç´ éƒ½æœ‰å¯èƒ½ä¸æ˜¯ç›¸é‚»çš„, å› æ­¤å®ƒæœ‰å¯èƒ½æ‰“ç ´åŸæ¥å€¼ä¸ºç›¸åŒçš„å…ƒç´ ä¹‹é—´çš„é¡ºåºã€‚ å¹³å‡æ—¶é—´å¤æ‚åº¦ æœ€å¥½æƒ…å†µ æœ€åæƒ…å†µ ç©ºé—´å¤æ‚åº¦ O(nlogn) O(nlogn) O(n2) O(1) 4. ç›´æ¥æ’å…¥æ’åº4.1 åŸºæœ¬æ€æƒ³ç›´æ¥æ’å…¥æ’åºçš„åŸºæœ¬æ€æƒ³æ˜¯ï¼šå°†æ•°ç»„ä¸­çš„æ‰€æœ‰å…ƒç´ ä¾æ¬¡è·Ÿå‰é¢å·²ç»æ’å¥½çš„å…ƒç´ ç›¸æ¯”è¾ƒï¼Œå¦‚æœé€‰æ‹©çš„å…ƒç´ æ¯”å·²æ’åºçš„å…ƒç´ å°ï¼Œåˆ™äº¤æ¢ï¼Œç›´åˆ°å…¨éƒ¨å…ƒç´ éƒ½æ¯”è¾ƒè¿‡ä¸ºæ­¢ã€‚ 4.2 ç®—æ³•æè¿°ä¸€èˆ¬æ¥è¯´ï¼Œæ’å…¥æ’åºéƒ½é‡‡ç”¨in-placeåœ¨æ•°ç»„ä¸Šå®ç°ã€‚å…·ä½“ç®—æ³•æè¿°å¦‚ä¸‹ï¼š â‘ . ä»ç¬¬ä¸€ä¸ªå…ƒç´ å¼€å§‹ï¼Œè¯¥å…ƒç´ å¯ä»¥è®¤ä¸ºå·²ç»è¢«æ’åº â‘¡. å–å‡ºä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œåœ¨å·²ç»æ’åºçš„å…ƒç´ åºåˆ—ä¸­ä»åå‘å‰æ‰«æ â‘¢. å¦‚æœè¯¥å…ƒç´ ï¼ˆå·²æ’åºï¼‰å¤§äºæ–°å…ƒç´ ï¼Œå°†è¯¥å…ƒç´ ç§»åˆ°ä¸‹ä¸€ä½ç½® â‘£. é‡å¤æ­¥éª¤3ï¼Œç›´åˆ°æ‰¾åˆ°å·²æ’åºçš„å…ƒç´ å°äºæˆ–è€…ç­‰äºæ–°å…ƒç´ çš„ä½ç½® â‘¤. å°†æ–°å…ƒç´ æ’å…¥åˆ°è¯¥ä½ç½®å â‘¥. é‡å¤æ­¥éª¤â‘¡~â‘¤ 4.3 ä»£ç å®ç°æä¾›ä¸¤ç§å†™æ³•ï¼Œä¸€ç§æ˜¯ç§»ä½æ³•ï¼Œä¸€ç§æ˜¯äº¤æ¢æ³•ã€‚ç§»ä½æ³•æ˜¯å®Œå…¨æŒ‰ç…§ä»¥ä¸Šç®—æ³•æè¿°å®ï¼Œå†æ’å…¥è¿‡ç¨‹ä¸­å°†æœ‰åºåºåˆ—ä¸­æ¯”å¾…æ’å…¥æ•°å­—å¤§çš„æ•°æ®å‘åç§»åŠ¨ï¼Œç”±äºç§»åŠ¨æ—¶ä¼šè¦†ç›–å¾…æ’å…¥æ•°æ®ï¼Œæ‰€ä»¥éœ€è¦é¢å¤–çš„ä¸´æ—¶å˜é‡ä¿å­˜å¾…æ’å…¥æ•°æ®ï¼Œä»£ç å®ç°å¦‚ä¸‹ï¼š â‘ . ç§»ä½æ³•ï¼š 1234567891011121314 public static void sort(int[] a) &#123; if (a == null || a.length == 0) &#123; return; &#125; for (int i = 1; i &lt; a.length; i++) &#123; int j = i - 1; int temp = a[i]; // å…ˆå–å‡ºå¾…æ’å…¥æ•°æ®ä¿å­˜ï¼Œå› ä¸ºå‘åç§»ä½è¿‡ç¨‹ä¸­ä¼šæŠŠè¦†ç›–æ‰å¾…æ’å…¥æ•° while (j &gt;= 0 &amp;&amp; a[j] &gt; temp) &#123; // å¦‚æœå¾…æ˜¯æ¯”å¾…æ’å…¥æ•°æ®å¤§ï¼Œå°±åç§» a[j+1] = a[j]; j--; &#125; a[j+1] = temp; // æ‰¾åˆ°æ¯”å¾…æ’å…¥æ•°æ®å°çš„ä½ç½®ï¼Œå°†å¾…æ’å…¥æ•°æ®æ’å…¥ &#125;&#125; è€Œäº¤æ¢æ³•ä¸éœ€æ±‚é¢å¤–çš„ä¿å­˜å¾…æ’å…¥æ•°æ®ï¼Œé€šè¿‡ä¸åœçš„å‘å‰äº¤æ¢å¸¦æ’å…¥æ•°æ®ï¼Œç±»ä¼¼å†’æ³¡æ³•ï¼Œç›´åˆ°æ‰¾åˆ°æ¯”å®ƒå°çš„å€¼ï¼Œä¹Ÿå°±æ˜¯å¾…æ’å…¥æ•°æ®æ‰¾åˆ°äº†è‡ªå·±çš„ä½ç½®ã€‚â‘¡. äº¤æ¢æ³•ï¼š 12345678910111213141516public static void sort2(int[] arr) &#123; if (arr == null || arr.length == 0) &#123; return; &#125; for (int i = 1; i &lt; arr.length; i ++) &#123; int j = i - 1; while (j &gt;= 0 &amp;&amp; arr[j] &gt; arr[i]) &#123; arr[j + 1] = arr[j] + arr[j+1]; //åªè¦å¤§å°±äº¤æ¢æ“ä½œ arr[j] = arr[j + 1] - arr[j]; arr[j + 1] = arr[j + 1] - arr[j]; System.out.println(&quot;Sorting: &quot; + Arrays.toString(arr)); &#125; &#125; &#125; 4.4 ç®—æ³•æ•ˆç‡ç›´æ¥æ’å…¥æ’åºä¸æ˜¯ç¨³å®šçš„æ’åºç®—æ³•ã€‚ å¹³å‡æ—¶é—´å¤æ‚åº¦ æœ€å¥½æƒ…å†µ æœ€åæƒ…å†µ ç©ºé—´å¤æ‚åº¦ O(n2) O(n) O(n2) O(1) 5.å¸Œå°”æ’åºå¸Œå°”æ’åºï¼Œä¹Ÿç§°é€’å‡å¢é‡æ’åºç®—æ³•ï¼Œ1959å¹´Shellå‘æ˜ã€‚æ˜¯æ’å…¥æ’åºçš„ä¸€ç§é«˜é€Ÿè€Œç¨³å®šçš„æ”¹è¿›ç‰ˆæœ¬ã€‚ å¸Œå°”æ’åºæ˜¯å…ˆå°†æ•´ä¸ªå¾…æ’åºçš„è®°å½•åºåˆ—åˆ†å‰²æˆä¸ºè‹¥å¹²å­åºåˆ—åˆ†åˆ«è¿›è¡Œç›´æ¥æ’å…¥æ’åºï¼Œå¾…æ•´ä¸ªåºåˆ—ä¸­çš„è®°å½•â€œåŸºæœ¬æœ‰åºâ€æ—¶ï¼Œå†å¯¹å…¨ä½“è®°å½•è¿›è¡Œä¾æ¬¡ç›´æ¥æ’å…¥æ’åºã€‚ 5.1 åŸºæœ¬æ€æƒ³å°†å¾…æ’åºæ•°ç»„æŒ‰ç…§æ­¥é•¿gapè¿›è¡Œåˆ†ç»„ï¼Œç„¶åå°†æ¯ç»„çš„å…ƒç´ åˆ©ç”¨ç›´æ¥æ’å…¥æ’åºçš„æ–¹æ³•è¿›è¡Œæ’åºï¼›æ¯æ¬¡å†å°†gapæŠ˜åŠå‡å°ï¼Œå¾ªç¯ä¸Šè¿°æ“ä½œï¼›å½“gap&#x3D;1æ—¶ï¼Œåˆ©ç”¨ç›´æ¥æ’å…¥ï¼Œå®Œæˆæ’åºã€‚ å¯ä»¥çœ‹åˆ°æ­¥é•¿çš„é€‰æ‹©æ˜¯å¸Œå°”æ’åºçš„é‡è¦éƒ¨åˆ†ã€‚åªè¦æœ€ç»ˆæ­¥é•¿ä¸º1ä»»ä½•æ­¥é•¿åºåˆ—éƒ½å¯ä»¥å·¥ä½œã€‚ä¸€èˆ¬æ¥è¯´æœ€ç®€å•çš„æ­¥é•¿å–å€¼æ˜¯åˆæ¬¡å–æ•°ç»„é•¿åº¦çš„ä¸€åŠä¸ºå¢é‡ï¼Œä¹‹åæ¯æ¬¡å†å‡åŠï¼Œç›´åˆ°å¢é‡ä¸º1ã€‚æ›´å¥½çš„æ­¥é•¿åºåˆ—å–å€¼å¯ä»¥å‚è€ƒç»´åŸºç™¾ç§‘ã€‚ 5.2 ç®—æ³•æè¿°â‘ . é€‰æ‹©ä¸€ä¸ªå¢é‡åºåˆ—t1ï¼Œt2ï¼Œâ€¦ï¼Œtkï¼Œå…¶ä¸­ti&gt;tjï¼Œtk&#x3D;1ï¼›ï¼ˆä¸€èˆ¬åˆæ¬¡å–æ•°ç»„åŠé•¿ï¼Œä¹‹åæ¯æ¬¡å†å‡åŠï¼Œç›´åˆ°å¢é‡ä¸º1ï¼‰ â‘¡. æŒ‰å¢é‡åºåˆ—ä¸ªæ•°kï¼Œå¯¹åºåˆ—è¿›è¡Œk è¶Ÿæ’åºï¼› â‘¢. æ¯è¶Ÿæ’åºï¼Œæ ¹æ®å¯¹åº”çš„å¢é‡tiï¼Œå°†å¾…æ’åºåˆ—åˆ†å‰²æˆè‹¥å¹²é•¿åº¦ä¸ºm çš„å­åºåˆ—ï¼Œåˆ†åˆ«å¯¹å„å­è¡¨è¿›è¡Œç›´æ¥æ’å…¥æ’åºã€‚ä»…å¢é‡å› å­ä¸º1 æ—¶ï¼Œæ•´ä¸ªåºåˆ—ä½œä¸ºä¸€ä¸ªè¡¨æ¥å¤„ç†ï¼Œè¡¨é•¿åº¦å³ä¸ºæ•´ä¸ªåºåˆ—çš„é•¿åº¦ã€‚ åœ¨ä¸Šé¢è¿™å¹…å›¾ä¸­ï¼š åˆå§‹æ—¶ï¼Œæœ‰ä¸€ä¸ªå¤§å°ä¸º 10 çš„æ— åºåºåˆ—ã€‚ åœ¨ç¬¬ä¸€è¶Ÿæ’åºä¸­ï¼Œæˆ‘ä»¬ä¸å¦¨è®¾ gap1 &#x3D; N &#x2F; 2 &#x3D; 5ï¼Œå³ç›¸éš”è·ç¦»ä¸º 5 çš„å…ƒç´ ç»„æˆä¸€ç»„ï¼Œå¯ä»¥åˆ†ä¸º 5 ç»„ã€‚ æ¥ä¸‹æ¥ï¼ŒæŒ‰ç…§ç›´æ¥æ’å…¥æ’åºçš„æ–¹æ³•å¯¹æ¯ä¸ªç»„è¿›è¡Œæ’åºã€‚ åœ¨ç¬¬äºŒè¶Ÿæ’åºä¸­ï¼Œæˆ‘ä»¬æŠŠä¸Šæ¬¡çš„ gap ç¼©å°ä¸€åŠï¼Œå³ gap2 &#x3D; gap1 &#x2F; 2 &#x3D; 2 (å–æ•´æ•°)ã€‚è¿™æ ·æ¯ç›¸éš”è·ç¦»ä¸º 2 çš„å…ƒç´ ç»„æˆä¸€ç»„ï¼Œå¯ä»¥åˆ†ä¸º 2 ç»„ã€‚ æŒ‰ç…§ç›´æ¥æ’å…¥æ’åºçš„æ–¹æ³•å¯¹æ¯ä¸ªç»„è¿›è¡Œæ’åºã€‚ åœ¨ç¬¬ä¸‰è¶Ÿæ’åºä¸­ï¼Œå†æ¬¡æŠŠ gap ç¼©å°ä¸€åŠï¼Œå³gap3 &#x3D; gap2 &#x2F; 2 &#x3D; 1ã€‚ è¿™æ ·ç›¸éš”è·ç¦»ä¸º 1 çš„å…ƒç´ ç»„æˆä¸€ç»„ï¼Œå³åªæœ‰ä¸€ç»„ã€‚ æŒ‰ç…§ç›´æ¥æ’å…¥æ’åºçš„æ–¹æ³•å¯¹æ¯ä¸ªç»„è¿›è¡Œæ’åºã€‚æ­¤æ—¶ï¼Œæ’åºå·²ç»ç»“æŸã€‚ éœ€è¦æ³¨æ„ä¸€ä¸‹çš„æ˜¯ï¼Œå›¾ä¸­æœ‰ä¸¤ä¸ªç›¸ç­‰æ•°å€¼çš„å…ƒç´  5 å’Œ 5 ã€‚æˆ‘ä»¬å¯ä»¥æ¸…æ¥šçš„çœ‹åˆ°ï¼Œåœ¨æ’åºè¿‡ç¨‹ä¸­ï¼Œä¸¤ä¸ªå…ƒç´ ä½ç½®äº¤æ¢äº†ã€‚ æ‰€ä»¥ï¼Œå¸Œå°”æ’åºæ˜¯ä¸ç¨³å®šçš„ç®—æ³•ã€‚ public class ShellSort { 12345678910111213141516public static void sort(int[] arr) &#123; int gap = arr.length / 2; for (;gap &gt; 0; gap = gap/2) &#123; for (int j = 0; (j + gap) &lt; arr.length; j++) &#123; //ä¸æ–­ç¼©å°gapï¼Œç›´åˆ°1ä¸ºæ­¢ for (int k = 0; (k + gap) &lt; arr.length; k+=gap) &#123; //ä½¿ç”¨å½“å‰gapè¿›è¡Œç»„å†…æ’å…¥æ’åº if (arr[k] &gt; arr[k+gap]) &#123; //äº¤æ¢æ“ä½œ arr[k] = arr[k] + arr[k+gap]; arr[k+gap] = arr[k] - arr[k+gap]; arr[k] = arr[k] - arr[k+gap]; System.out.println(&quot; Sorting: &quot; + Arrays.toString(arr)); &#125; &#125; &#125; &#125;&#125;&#125; 5.4 ç®—æ³•æ•ˆç‡ä¸ç¨³å®šæ’åºç®—æ³•ï¼Œå¸Œå°”æ’åºç¬¬ä¸€ä¸ªçªç ´O(n2)çš„æ’åºç®—æ³•ï¼›æ˜¯ç®€å•æ’å…¥æ’åºçš„æ”¹è¿›ç‰ˆï¼›å®ƒä¸æ’å…¥æ’åºçš„ä¸åŒä¹‹å¤„åœ¨äºï¼Œå®ƒä¼šä¼˜å…ˆæ¯”è¾ƒè·ç¦»è¾ƒè¿œçš„å…ƒç´ ï¼Œç›´æ¥æ’å…¥æ’åºæ˜¯ç¨³å®šçš„ï¼›è€Œå¸Œå°”æ’åºæ˜¯ä¸ç¨³å®šçš„ï¼Œå¸Œå°”æ’åºçš„æ—¶é—´å¤æ‚åº¦å’Œæ­¥é•¿çš„é€‰æ‹©æœ‰å…³ï¼Œå¸¸ç”¨çš„æ˜¯Shellå¢é‡æ’åºï¼Œä¹Ÿå°±æ˜¯N&#x2F;2çš„åºåˆ—ï¼ŒShellå¢é‡åºåˆ—ä¸æ˜¯æœ€å¥½çš„å¢é‡åºåˆ—ï¼Œå…¶ä»–è¿˜æœ‰Hibbardå¢é‡åºåˆ—ã€Sedgewick å¢é‡åºåˆ—ç­‰ï¼Œå…·ä½“å¯ä»¥å‚è€ƒï¼Œå¸Œå°”æ’åºå¢é‡åºåˆ—ç®€ä»‹ã€‚ 6.é€‰æ‹©æ’åº6.1 åŸºæœ¬æ€æƒ³åœ¨æœªæ’åºåºåˆ—ä¸­æ‰¾åˆ°æœ€å°ï¼ˆå¤§ï¼‰å…ƒç´ ï¼Œå­˜æ”¾åˆ°æœªæ’åºåºåˆ—çš„èµ·å§‹ä½ç½®ã€‚åœ¨æ‰€æœ‰çš„å®Œå…¨ä¾é äº¤æ¢å»ç§»åŠ¨å…ƒç´ çš„æ’åºæ–¹æ³•ä¸­ï¼Œé€‰æ‹©æ’åºå±äºéå¸¸å¥½çš„ä¸€ç§ã€‚ 6.2 ç®—æ³•æè¿°â‘ . ä»å¾…æ’åºåºåˆ—ä¸­ï¼Œæ‰¾åˆ°å…³é”®å­—æœ€å°çš„å…ƒç´ ï¼› â‘¡. å¦‚æœæœ€å°å…ƒç´ ä¸æ˜¯å¾…æ’åºåºåˆ—çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œå°†å…¶å’Œç¬¬ä¸€ä¸ªå…ƒç´ äº’æ¢ï¼› â‘¢. ä»ä½™ä¸‹çš„ N - 1 ä¸ªå…ƒç´ ä¸­ï¼Œæ‰¾å‡ºå…³é”®å­—æœ€å°çš„å…ƒç´ ï¼Œé‡å¤â‘ ã€â‘¡æ­¥ï¼Œç›´åˆ°æ’åºç»“æŸã€‚ 6.3 ä»£ç å®ç°1234567891011121314151617public class SelectSort &#123; public static void sort(int[] arr) &#123; for (int i = 0; i &lt; arr.length - 1; i++) &#123; int min = i; for (int j = i+1; j &lt; arr.length; j ++) &#123; //é€‰å‡ºä¹‹åå¾…æ’åºä¸­å€¼æœ€å°çš„ä½ç½® if (arr[j] &lt; arr[min]) &#123; min = j; &#125; &#125; if (min != i) &#123; arr[min] = arr[i] + arr[min]; arr[i] = arr[min] - arr[i]; arr[min] = arr[min] - arr[i]; &#125; &#125; &#125; 6.4 ç®—æ³•æ•ˆç‡ä¸ç¨³å®šæ’åºç®—æ³•ï¼Œé€‰æ‹©æ’åºçš„ç®€å•å’Œç›´è§‚åå‰¯å…¶å®ï¼Œè¿™ä¹Ÿé€ å°±äº†å®ƒå‡ºäº†åçš„æ…¢æ€§å­ï¼Œæ— è®ºæ˜¯å“ªç§æƒ…å†µï¼Œå“ªæ€•åŸæ•°ç»„å·²æ’åºå®Œæˆï¼Œå®ƒä¹Ÿå°†èŠ±è´¹å°†è¿‘nÂ²&#x2F;2æ¬¡éå†æ¥ç¡®è®¤ä¸€éã€‚ å”¯ä¸€å€¼å¾—é«˜å…´çš„æ˜¯ï¼Œå®ƒå¹¶ä¸è€—è´¹é¢å¤–çš„å†…å­˜ç©ºé—´ã€‚ å¹³å‡æ—¶é—´å¤æ‚åº¦ æœ€å¥½æƒ…å†µ æœ€åæƒ…å†µ ç©ºé—´å¤æ‚åº¦ O(n2) O(n2) O(n2) O(1) 7.å½’å¹¶æ’åºå½’å¹¶æ’åºæ˜¯å»ºç«‹åœ¨å½’å¹¶æ“ä½œä¸Šçš„ä¸€ç§æœ‰æ•ˆçš„æ’åºç®—æ³•ï¼Œ1945å¹´ç”±çº¦ç¿°Â·å†¯Â·è¯ºä¼Šæ›¼é¦–æ¬¡æå‡ºã€‚è¯¥ç®—æ³•æ˜¯é‡‡ç”¨åˆ†æ²»æ³•ï¼ˆDivide and Conquerï¼‰çš„ä¸€ä¸ªéå¸¸å…¸å‹çš„åº”ç”¨ï¼Œä¸”å„å±‚åˆ†æ²»é€’å½’å¯ä»¥åŒæ—¶è¿›è¡Œã€‚ 7.1 åŸºæœ¬æ€æƒ³å½’å¹¶æ’åºç®—æ³•æ˜¯å°†ä¸¤ä¸ªï¼ˆæˆ–ä¸¤ä¸ªä»¥ä¸Šï¼‰æœ‰åºè¡¨åˆå¹¶æˆä¸€ä¸ªæ–°çš„æœ‰åºè¡¨ï¼Œå³æŠŠå¾…æ’åºåºåˆ—åˆ†ä¸ºè‹¥å¹²ä¸ªå­åºåˆ—ï¼Œæ¯ä¸ªå­åºåˆ—æ˜¯æœ‰åºçš„ã€‚ç„¶åå†æŠŠæœ‰åºå­åºåˆ—åˆå¹¶ä¸ºæ•´ä½“æœ‰åºåºåˆ—ã€‚ 7.2 ç®—æ³•æè¿°é‡‡ç”¨é€’å½’æ³•ï¼š â‘ . å°†åºåˆ—æ¯ç›¸é‚»ä¸¤ä¸ªæ•°å­—è¿›è¡Œå½’å¹¶æ“ä½œï¼Œå½¢æˆ floor(n&#x2F;2)ä¸ªåºåˆ—ï¼Œæ’åºåæ¯ä¸ªåºåˆ—åŒ…å«ä¸¤ä¸ªå…ƒç´ ï¼› â‘¡. å°†ä¸Šè¿°åºåˆ—å†æ¬¡å½’å¹¶ï¼Œå½¢æˆ floor(n&#x2F;4)ä¸ªåºåˆ—ï¼Œæ¯ä¸ªåºåˆ—åŒ…å«å››ä¸ªå…ƒç´ ï¼› â‘¢. é‡å¤æ­¥éª¤â‘¡ï¼Œç›´åˆ°æ‰€æœ‰å…ƒç´ æ’åºå®Œæ¯• 7.3 ä»£ç å®ç°123456789101112131415161718192021222324252627282930313233343536373839public class MergeSort &#123; public static int[] sort(int [] a) &#123; if (a.length &lt;= 1) &#123; return a; &#125; int num = a.length &gt;&gt; 1; int[] left = Arrays.copyOfRange(a, 0, num); int[] right = Arrays.copyOfRange(a, num, a.length); return mergeTwoArray(sort(left), sort(right)); &#125; public static int[] mergeTwoArray(int[] a, int[] b) &#123; int i = 0, j = 0, k = 0; int[] result = new int[a.length + b.length]; // ç”³è¯·é¢å¤–ç©ºé—´ä¿å­˜å½’å¹¶ä¹‹åæ•°æ® while (i &lt; a.length &amp;&amp; j &lt; b.length) &#123; //é€‰å–ä¸¤ä¸ªåºåˆ—ä¸­çš„è¾ƒå°å€¼æ”¾å…¥æ–°æ•°ç»„ if (a[i] &lt;= b[j]) &#123; result[k++] = a[i++]; &#125; else &#123; result[k++] = b[j++]; &#125; &#125; while (i &lt; a.length) &#123; //åºåˆ—aä¸­å¤šä½™çš„å…ƒç´ ç§»å…¥æ–°æ•°ç»„ result[k++] = a[i++]; &#125; while (j &lt; b.length) &#123;//åºåˆ—bä¸­å¤šä½™çš„å…ƒç´ ç§»å…¥æ–°æ•°ç»„ result[k++] = b[j++]; &#125; return result; &#125; public static void main(String[] args) &#123; int[] b = &#123;3, 1, 5, 4&#125;; System.out.println(Arrays.toString(sort(b))); &#125;&#125; 7.4 ç®—æ³•æ•ˆç‡ å¹³å‡æ—¶é—´å¤æ‚åº¦ æœ€å¥½æƒ…å†µ æœ€åæƒ…å†µ ç©ºé—´å¤æ‚åº¦ O(nlogn) O(nlogn) O(nlogn) O(n) ç¨³å®šæ’åºç®—æ³•ï¼Œä»æ•ˆç‡ä¸Šçœ‹ï¼Œå½’å¹¶æ’åºå¯ç®—æ˜¯æ’åºç®—æ³•ä¸­çš„â€ä½¼ä½¼è€…â€. å‡è®¾æ•°ç»„é•¿åº¦ä¸ºnï¼Œé‚£ä¹ˆæ‹†åˆ†æ•°ç»„å…±éœ€logn, åˆæ¯æ­¥éƒ½æ˜¯ä¸€ä¸ªæ™®é€šçš„åˆå¹¶å­æ•°ç»„çš„è¿‡ç¨‹ï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºO(n)ï¼Œ æ•…å…¶ç»¼åˆæ—¶é—´å¤æ‚åº¦ä¸ºO(nlogn)ã€‚å¦ä¸€æ–¹é¢ï¼Œ å½’å¹¶æ’åºå¤šæ¬¡é€’å½’è¿‡ç¨‹ä¸­æ‹†åˆ†çš„å­æ•°ç»„éœ€è¦ä¿å­˜åœ¨å†…å­˜ç©ºé—´ï¼Œ å…¶ç©ºé—´å¤æ‚åº¦ä¸ºO(n)ã€‚ å’Œé€‰æ‹©æ’åºä¸€æ ·ï¼Œå½’å¹¶æ’åºçš„æ€§èƒ½ä¸å—è¾“å…¥æ•°æ®çš„å½±å“ï¼Œä½†è¡¨ç°æ¯”é€‰æ‹©æ’åºå¥½çš„å¤šï¼Œå› ä¸ºå§‹ç»ˆéƒ½æ˜¯O(nlognï¼‰çš„æ—¶é—´å¤æ‚åº¦ã€‚ä»£ä»·æ˜¯éœ€è¦é¢å¤–çš„å†…å­˜ç©ºé—´ã€‚ 8.åŸºæ•°æ’åºåŸºæ•°æ’åºï¼ˆRadix sortï¼‰æ˜¯ä¸€ç§éæ¯”è¾ƒå‹æ•´æ•°æ’åºç®—æ³•ï¼Œå…¶åŸç†æ˜¯å°†æ•´æ•°æŒ‰ä½æ•°åˆ‡å‰²æˆä¸åŒçš„æ•°å­—ï¼Œç„¶åæŒ‰æ¯ä¸ªä½æ•°åˆ†åˆ«æ¯”è¾ƒã€‚ç”±äºæ•´æ•°ä¹Ÿå¯ä»¥è¡¨è¾¾å­—ç¬¦ä¸²ï¼ˆæ¯”å¦‚åå­—æˆ–æ—¥æœŸï¼‰å’Œç‰¹å®šæ ¼å¼çš„æµ®ç‚¹æ•°ï¼Œæ‰€ä»¥åŸºæ•°æ’åºä¹Ÿä¸æ˜¯åªèƒ½ä½¿ç”¨äºæ•´æ•°ã€‚ 8.1 åŸºæœ¬æ€æƒ³å°†æ‰€æœ‰å¾…æ¯”è¾ƒæ•°å€¼ï¼ˆæ­£æ•´æ•°ï¼‰ç»Ÿä¸€ä¸ºåŒæ ·çš„æ•°ä½é•¿åº¦ï¼Œæ•°ä½è¾ƒçŸ­çš„æ•°å‰é¢è¡¥é›¶ã€‚ç„¶åï¼Œä»æœ€ä½ä½å¼€å§‹ï¼Œä¾æ¬¡è¿›è¡Œä¸€æ¬¡æ’åºã€‚è¿™æ ·ä»æœ€ä½ä½æ’åºä¸€ç›´åˆ°æœ€é«˜ä½æ’åºå®Œæˆä»¥åï¼Œæ•°åˆ—å°±å˜æˆä¸€ä¸ªæœ‰åºåºåˆ—ã€‚ åŸºæ•°æ’åºæŒ‰ç…§ä¼˜å…ˆä»é«˜ä½æˆ–ä½ä½æ¥æ’åºæœ‰ä¸¤ç§å®ç°æ–¹æ¡ˆï¼š MSDï¼ˆMost significant digitalï¼‰ ä»æœ€å·¦ä¾§é«˜ä½å¼€å§‹è¿›è¡Œæ’åºã€‚å…ˆæŒ‰k1æ’åºåˆ†ç»„, åŒä¸€ç»„ä¸­è®°å½•, å…³é”®ç k1ç›¸ç­‰, å†å¯¹å„ç»„æŒ‰k2æ’åºåˆ†æˆå­ç»„, ä¹‹å, å¯¹åé¢çš„å…³é”®ç ç»§ç»­è¿™æ ·çš„æ’åºåˆ†ç»„, ç›´åˆ°æŒ‰æœ€æ¬¡ä½å…³é”®ç kdå¯¹å„å­ç»„æ’åºå. å†å°†å„ç»„è¿æ¥èµ·æ¥, ä¾¿å¾—åˆ°ä¸€ä¸ªæœ‰åºåºåˆ—ã€‚MSDæ–¹å¼é€‚ç”¨äºä½æ•°å¤šçš„åºåˆ—ã€‚ LSDï¼ˆLeast significant digitalï¼‰ ä»æœ€å³ä¾§ä½ä½å¼€å§‹è¿›è¡Œæ’åºã€‚å…ˆä»kdå¼€å§‹æ’åºï¼Œå†å¯¹kd-1è¿›è¡Œæ’åºï¼Œä¾æ¬¡é‡å¤ï¼Œç›´åˆ°å¯¹k1æ’åºåä¾¿å¾—åˆ°ä¸€ä¸ªæœ‰åºåºåˆ—ã€‚LSDæ–¹å¼é€‚ç”¨äºä½æ•°å°‘çš„åºåˆ—ã€‚ ä¸‹å›¾æ˜¯LSDåŸºæ•°æ’åºçš„ç¤ºæ„å›¾ï¼š 8.2 ç®—æ³•æè¿°ä»¥LSDä¸ºä¾‹ï¼Œä»æœ€ä½ä½å¼€å§‹ï¼Œå…·ä½“ç®—æ³•æè¿°å¦‚ä¸‹ï¼š â‘ . å–å¾—æ•°ç»„ä¸­çš„æœ€å¤§æ•°ï¼Œå¹¶å–å¾—ä½æ•°ï¼› â‘¡. arrä¸ºåŸå§‹æ•°ç»„ï¼Œä»æœ€ä½ä½å¼€å§‹å–æ¯ä¸ªä½ç»„æˆradixæ•°ç»„ï¼› â‘¢. å¯¹radixè¿›è¡Œè®¡æ•°æ’åºï¼ˆåˆ©ç”¨è®¡æ•°æ’åºé€‚ç”¨äºå°èŒƒå›´æ•°çš„ç‰¹ç‚¹ï¼‰ï¼› 8.3 ä»£ç å®ç°åŸºæ•°æ’åºï¼šé€šè¿‡åºåˆ—ä¸­å„ä¸ªå…ƒç´ çš„å€¼ï¼Œå¯¹æ’åºçš„Nä¸ªå…ƒç´ è¿›è¡Œè‹¥å¹²è¶Ÿçš„â€œåˆ†é…â€ä¸â€œæ”¶é›†â€æ¥å®ç°æ’åºã€‚ åˆ†é…ï¼šæˆ‘ä»¬å°†L[i]ä¸­çš„å…ƒç´ å–å‡ºï¼Œé¦–å…ˆç¡®å®šå…¶ä¸ªä½ä¸Šçš„æ•°å­—ï¼Œæ ¹æ®è¯¥æ•°å­—åˆ†é…åˆ°ä¸ä¹‹åºå·ç›¸åŒçš„æ¡¶ä¸­ æ”¶é›†ï¼šå½“åºåˆ—ä¸­æ‰€æœ‰çš„å…ƒç´ éƒ½åˆ†é…åˆ°å¯¹åº”çš„æ¡¶ä¸­ï¼Œå†æŒ‰ç…§é¡ºåºä¾æ¬¡å°†æ¡¶ä¸­çš„å…ƒç´ æ”¶é›†å½¢æˆæ–°çš„ä¸€ä¸ªå¾…æ’åºåˆ—L[]ã€‚å¯¹æ–°å½¢æˆçš„åºåˆ—L[]é‡å¤æ‰§è¡Œåˆ†é…å’Œæ”¶é›†å…ƒç´ ä¸­çš„åä½ã€ç™¾ä½â€¦ç›´åˆ°åˆ†é…å®Œè¯¥åºåˆ—ä¸­çš„æœ€é«˜ä½ï¼Œåˆ™æ’åºç»“æŸ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263import java.util.Arrays;/** * Created by zhoujunfu on 2018/9/11. * åŸºæ•°æ’åºLSD */public class RadixSort &#123; public static void main(String[] args) &#123; int[] array = &#123;10, 20, 5, 4, 100&#125;; sort(array); &#125; public static void sort(int[] a) &#123; if (a == null || a.length &lt; 0) &#123; return; &#125; int max = a[0]; for (int i = 0; i &lt;a.length; i++) &#123; if (a[i] &gt; max) &#123; max = a[i]; &#125; &#125; System.out.println(&quot;max, &quot; + max); int maxDigit = 0; while (max != 0) &#123; max = max / 10; maxDigit++; &#125; System.out.println(&quot;maxDigit, &quot; + maxDigit); int[][] buckets = new int[10][a.length]; int base = 10; //ä»ä½ä½åˆ°é«˜ä½ï¼Œå¯¹æ¯ä¸€ä½éå†ï¼Œå°†æ‰€æœ‰å…ƒç´ åˆ†é…åˆ°æ¡¶ä¸­ for (int i = 0; i &lt; maxDigit; i++) &#123; int[] bucketLen = new int[10]; //å­˜å‚¨å„ä¸ªæ¡¶ä¸­å­˜å‚¨å…ƒç´ çš„æ•°é‡ //æ”¶é›†ï¼šå°†ä¸åŒæ¡¶é‡Œæ•°æ®æŒ¨ä¸ªæå‡ºæ¥,ä¸ºä¸‹ä¸€è½®é«˜ä½æ’åºåšå‡†å¤‡,ç”±äºé è¿‘æ¡¶åº•çš„å…ƒç´ æ’åé å‰,å› æ­¤ä»æ¡¶åº•å…ˆæ for (int j = 0; j &lt; a.length; j++) &#123; int whichBucket = (a[j] % base) / (base / 10); buckets[whichBucket][bucketLen[whichBucket]] = a[j]; bucketLen[whichBucket]++; &#125; int k = 0; //æ”¶é›†ï¼šå°†ä¸åŒæ¡¶é‡Œæ•°æ®æŒ¨ä¸ªæå‡ºæ¥,ä¸ºä¸‹ä¸€è½®é«˜ä½æ’åºåšå‡†å¤‡,ç”±äºé è¿‘æ¡¶åº•çš„å…ƒç´ æ’åé å‰,å› æ­¤ä»æ¡¶åº•å…ˆæ for (int l = 0; l &lt; buckets.length; l++) &#123; for (int m =0; m &lt; bucketLen[l]; m++) &#123; a[k++] = buckets[l][m]; &#125; &#125; System.out.println(&quot;Sorting: &quot; + Arrays.toString(a)); base *= 10; &#125; &#125;&#125; 8.4 ç®—æ³•æ•ˆç‡åŸºæ•°æ’åºä¸æ”¹å˜ç›¸åŒå…ƒç´ ä¹‹é—´çš„ç›¸å¯¹é¡ºåºï¼Œå› æ­¤å®ƒæ˜¯ç¨³å®šçš„æ’åºç®—æ³•ï¼Œä»¥ä¸‹æ˜¯åŸºæ•°æ’åºç®—æ³•å¤æ‚åº¦ï¼š å¹³å‡æ—¶é—´å¤æ‚åº¦ æœ€å¥½æƒ…å†µ æœ€åæƒ…å†µ ç©ºé—´å¤æ‚åº¦ O(d*(n+r)) O(d*(n+r)) O(d*(n+r)) O(n+r) å…¶ä¸­ï¼Œd ä¸ºä½æ•°ï¼Œr ä¸ºåŸºæ•°ï¼Œn ä¸ºåŸæ•°ç»„ä¸ªæ•°ã€‚åœ¨åŸºæ•°æ’åºä¸­ï¼Œå› ä¸ºæ²¡æœ‰æ¯”è¾ƒæ“ä½œï¼Œæ‰€ä»¥åœ¨å¤æ‚ä¸Šï¼Œæœ€å¥½çš„æƒ…å†µä¸æœ€åçš„æƒ…å†µåœ¨æ—¶é—´ä¸Šæ˜¯ä¸€è‡´çš„ï¼Œå‡ä¸º O(d*(n + r))ã€‚ åŸºæ•°æ’åºæ›´é€‚åˆç”¨äºå¯¹æ—¶é—´, å­—ç¬¦ä¸²ç­‰è¿™äº›æ•´ä½“æƒå€¼æœªçŸ¥çš„æ•°æ®è¿›è¡Œæ’åºï¼Œé€‚ç”¨äºã€‚ (1)æ•°æ®èŒƒå›´è¾ƒå°ï¼Œå»ºè®®åœ¨å°äº1000 (2)æ¯ä¸ªæ•°å€¼éƒ½è¦å¤§äºç­‰äº0 åŸºæ•°æ’åº vs è®¡æ•°æ’åº vs æ¡¶æ’åº è¿™ä¸‰ç§æ’åºç®—æ³•éƒ½åˆ©ç”¨äº†æ¡¶çš„æ¦‚å¿µï¼Œä½†å¯¹æ¡¶çš„ä½¿ç”¨æ–¹æ³•ä¸Šæœ‰æ˜æ˜¾å·®å¼‚ï¼š åŸºæ•°æ’åºï¼šæ ¹æ®é”®å€¼çš„æ¯ä½æ•°å­—æ¥åˆ†é…æ¡¶ è®¡æ•°æ’åºï¼šæ¯ä¸ªæ¡¶åªå­˜å‚¨å•ä¸€é”®å€¼ æ¡¶æ’åºï¼šæ¯ä¸ªæ¡¶å­˜å‚¨ä¸€å®šèŒƒå›´çš„æ•°å€¼ è®¡æ•°æ’åºå’Œæ¡¶æ’åºåœ¨è¿™ç¯‡æ–‡ç« é‡Œå…·ä½“å°±ä¸å†™äº†ï¼Œæœ‰éœ€è¦çš„å¯ä»¥è‡ªè¡Œç™¾åº¦ã€‚ 9.å †æ’åºçœ‹å †æ’åºä¹‹å‰å…ˆä»‹ç»ä¸€ä¸‹é¢å‡ ä¸ªæ¦‚å¿µï¼š å®Œå…¨äºŒå‰æ ‘ï¼š è‹¥è®¾äºŒå‰æ ‘çš„æ·±åº¦ä¸ºhï¼Œé™¤ç¬¬ h å±‚å¤–ï¼Œå…¶å®ƒå„å±‚ (1ï½h-1) çš„ç»“ç‚¹æ•°éƒ½è¾¾åˆ°æœ€å¤§ä¸ªæ•°ï¼Œç¬¬ h å±‚æ‰€æœ‰çš„ç»“ç‚¹éƒ½è¿ç»­é›†ä¸­åœ¨æœ€å·¦è¾¹ï¼Œè¿™å°±æ˜¯å®Œå…¨äºŒå‰æ ‘ï¼Œå¾ˆå¥½ç†è§£å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚ å †ï¼š å †æ˜¯å…·æœ‰ä»¥ä¸‹æ€§è´¨çš„å®Œå…¨äºŒå‰æ ‘ï¼Œæ¯ä¸ªç»“ç‚¹çš„å€¼éƒ½å¤§äºæˆ–ç­‰äºå…¶å·¦å³å­©å­ç»“ç‚¹çš„å€¼ï¼Œç§°ä¸ºå¤§é¡¶å †ï¼›æˆ–è€…æ¯ä¸ªç»“ç‚¹çš„å€¼éƒ½å°äºæˆ–ç­‰äºå…¶å·¦å³å­©å­ç»“ç‚¹çš„å€¼ï¼Œç§°ä¸ºå°é¡¶å †ã€‚å¦‚ä¸‹å›¾ï¼š åŒæ—¶ï¼Œæˆ‘ä»¬å¯¹å †ä¸­çš„ç»“ç‚¹æŒ‰å±‚è¿›è¡Œç¼–å·ï¼Œå°†è¿™ç§é€»è¾‘ç»“æ„æ˜ å°„åˆ°æ•°ç»„ä¸­å°±æ˜¯ä¸‹é¢è¿™ä¸ªæ ·å­ï¼š è¯¥æ•°ç»„ä»é€»è¾‘ä¸Šè®²å°±æ˜¯ä¸€ä¸ªå †ç»“æ„ï¼Œæˆ‘ä»¬ç”¨ç®€å•çš„å…¬å¼æ¥æè¿°ä¸€ä¸‹å †çš„å®šä¹‰å°±æ˜¯ï¼š å¤§é¡¶å †ï¼šarr[i] &gt;&#x3D; arr[2i+1] &amp;&amp; arr[i] &gt;&#x3D; arr[2i+2] å°é¡¶å †ï¼šarr[i] &lt;&#x3D; arr[2i+1] &amp;&amp; arr[i] &lt;&#x3D; arr[2i+2] okï¼Œäº†è§£äº†è¿™äº›å®šä¹‰ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹å †æ’åºçš„åŸºæœ¬æ€æƒ³åŠåŸºæœ¬æ­¥éª¤ï¼š 9.1 åŸºæœ¬æ€æƒ³å †æ’åºçš„åŸºæœ¬æ€æƒ³æ˜¯ï¼šå°†å¾…æ’åºåºåˆ—æ„é€ æˆä¸€ä¸ªå¤§é¡¶å †ï¼Œæ­¤æ—¶ï¼Œæ•´ä¸ªåºåˆ—çš„æœ€å¤§å€¼å°±æ˜¯å †é¡¶çš„æ ¹èŠ‚ç‚¹ã€‚å°†å…¶ä¸æœ«å°¾å…ƒç´ è¿›è¡Œäº¤æ¢ï¼Œæ­¤æ—¶æœ«å°¾å°±ä¸ºæœ€å¤§å€¼ã€‚ç„¶åå°†å‰©ä½™n-1ä¸ªå…ƒç´ é‡æ–°æ„é€ æˆä¸€ä¸ªå †ï¼Œè¿™æ ·ä¼šå¾—åˆ°nä¸ªå…ƒç´ çš„æ¬¡å°å€¼ã€‚å¦‚æ­¤åå¤æ‰§è¡Œï¼Œä¾¿èƒ½å¾—åˆ°ä¸€ä¸ªæœ‰åºåºåˆ—äº†ã€‚ 9.2 ç®—æ³•æè¿°æ­¥éª¤ä¸€ æ„é€ åˆå§‹å †ã€‚å°†ç»™å®šæ— åºåºåˆ—æ„é€ æˆä¸€ä¸ªå¤§é¡¶å †ï¼ˆä¸€èˆ¬å‡åºé‡‡ç”¨å¤§é¡¶å †ï¼Œé™åºé‡‡ç”¨å°é¡¶å †)ã€‚ 1.å‡è®¾ç»™å®šæ— åºåºåˆ—ç»“æ„å¦‚ä¸‹ 2.æ­¤æ—¶æˆ‘ä»¬ä»æœ€åä¸€ä¸ªéå¶å­ç»“ç‚¹å¼€å§‹ï¼ˆå¶ç»“ç‚¹è‡ªç„¶ä¸ç”¨è°ƒæ•´ï¼Œç¬¬ä¸€ä¸ªéå¶å­ç»“ç‚¹ arr.length&#x2F;2-1&#x3D;5&#x2F;2-1&#x3D;1ï¼Œä¹Ÿå°±æ˜¯ä¸‹é¢çš„6ç»“ç‚¹ï¼‰ï¼Œä»å·¦è‡³å³ï¼Œä»ä¸‹è‡³ä¸Šè¿›è¡Œè°ƒæ•´ã€‚ 3.æ‰¾åˆ°ç¬¬äºŒä¸ªéå¶èŠ‚ç‚¹4ï¼Œç”±äº[4,9,8]ä¸­9å…ƒç´ æœ€å¤§ï¼Œ4å’Œ9äº¤æ¢ã€‚ è¿™æ—¶ï¼Œäº¤æ¢å¯¼è‡´äº†å­æ ¹[4,5,6]ç»“æ„æ··ä¹±ï¼Œç»§ç»­è°ƒæ•´ï¼Œ[4,5,6]ä¸­6æœ€å¤§ï¼Œäº¤æ¢4å’Œ6 æ­¤æ—¶ï¼Œæˆ‘ä»¬å°±å°†ä¸€ä¸ªæ— éœ€åºåˆ—æ„é€ æˆäº†ä¸€ä¸ªå¤§æ ¹å †ã€‚ æ­¥éª¤äºŒ å°†å †é¡¶å…ƒç´ ä¸æœ«å°¾å…ƒç´ è¿›è¡Œäº¤æ¢ï¼Œä½¿æœ«å°¾å…ƒç´ æœ€å¤§ã€‚ç„¶åç»§ç»­è°ƒæ•´å †ï¼Œå†å°†å †é¡¶å…ƒç´ ä¸æœ«å°¾å…ƒç´ äº¤æ¢ï¼Œå¾—åˆ°ç¬¬äºŒå¤§å…ƒç´ ã€‚å¦‚æ­¤åå¤è¿›è¡Œäº¤æ¢ã€é‡å»ºã€äº¤æ¢ã€‚ b.é‡æ–°è°ƒæ•´ç»“æ„ï¼Œä½¿å…¶ç»§ç»­æ»¡è¶³å †å®šä¹‰ c.å†å°†å †é¡¶å…ƒç´ 8ä¸æœ«å°¾å…ƒç´ 5è¿›è¡Œäº¤æ¢ï¼Œå¾—åˆ°ç¬¬äºŒå¤§å…ƒç´ 8. åç»­è¿‡ç¨‹ï¼Œç»§ç»­è¿›è¡Œè°ƒæ•´ï¼Œäº¤æ¢ï¼Œå¦‚æ­¤åå¤è¿›è¡Œï¼Œæœ€ç»ˆä½¿å¾—æ•´ä¸ªåºåˆ—æœ‰åº å†ç®€å•æ€»ç»“ä¸‹å †æ’åºçš„åŸºæœ¬æ€è·¯ï¼š a.å°†æ— éœ€åºåˆ—æ„å»ºæˆä¸€ä¸ªå †ï¼Œæ ¹æ®å‡åºé™åºéœ€æ±‚é€‰æ‹©å¤§é¡¶å †æˆ–å°é¡¶å †; b.å°†å †é¡¶å…ƒç´ ä¸æœ«å°¾å…ƒç´ äº¤æ¢ï¼Œå°†æœ€å¤§å…ƒç´ â€æ²‰â€åˆ°æ•°ç»„æœ«ç«¯; c.é‡æ–°è°ƒæ•´ç»“æ„ï¼Œä½¿å…¶æ»¡è¶³å †å®šä¹‰ï¼Œç„¶åç»§ç»­äº¤æ¢å †é¡¶å…ƒç´ ä¸å½“å‰æœ«å°¾å…ƒç´ ï¼Œåå¤æ‰§è¡Œè°ƒæ•´+äº¤æ¢æ­¥éª¤ï¼Œç›´åˆ°æ•´ä¸ªåºåˆ—æœ‰åºã€‚ 9.3 ç®—æ³•å®ç°12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758import java.util.Arrays;public class HeapSort &#123; public static void main(String []args)&#123; int []arr = &#123;4,6,8,5,9&#125;; sort(arr); System.out.println(Arrays.toString(arr)); &#125; public static void sort(int []arr)&#123; //1.æ„å»ºå¤§é¡¶å † for(int i=arr.length/2-1;i&gt;=0;i--)&#123; //ä»ç¬¬ä¸€ä¸ªéå¶å­ç»“ç‚¹ä»ä¸‹è‡³ä¸Šï¼Œä»å³è‡³å·¦è°ƒæ•´ç»“æ„ adjustHeap(arr,i,arr.length); &#125; //2.è°ƒæ•´å †ç»“æ„+äº¤æ¢å †é¡¶å…ƒç´ ä¸æœ«å°¾å…ƒç´  for(int j=arr.length-1;j&gt;0;j--)&#123; swap(arr,0,j);//å°†å †é¡¶å…ƒç´ ä¸æœ«å°¾å…ƒç´ è¿›è¡Œäº¤æ¢ adjustHeap(arr,0,j);//é‡æ–°å¯¹å †è¿›è¡Œè°ƒæ•´ &#125; &#125; /** * è°ƒæ•´å¤§é¡¶å †ï¼ˆä»…æ˜¯è°ƒæ•´è¿‡ç¨‹ï¼Œå»ºç«‹åœ¨å¤§é¡¶å †å·²æ„å»ºçš„åŸºç¡€ä¸Šï¼‰ * @param arr * @param i * @param length */ public static void adjustHeap(int []arr,int i,int length)&#123; int temp = arr[i];//å…ˆå–å‡ºå½“å‰å…ƒç´ i for(int k=i*2+1;k&lt;length;k=k*2+1)&#123;//ä»iç»“ç‚¹çš„å·¦å­ç»“ç‚¹å¼€å§‹ï¼Œä¹Ÿå°±æ˜¯2i+1å¤„å¼€å§‹ if(k+1&lt;length &amp;&amp; arr[k]&lt;arr[k+1])&#123;//å¦‚æœå·¦å­ç»“ç‚¹å°äºå³å­ç»“ç‚¹ï¼ŒkæŒ‡å‘å³å­ç»“ç‚¹ k++; &#125; if(arr[k] &gt;temp)&#123;//å¦‚æœå­èŠ‚ç‚¹å¤§äºçˆ¶èŠ‚ç‚¹ï¼Œå°†å­èŠ‚ç‚¹å€¼èµ‹ç»™çˆ¶èŠ‚ç‚¹ï¼ˆä¸ç”¨è¿›è¡Œäº¤æ¢ï¼‰ arr[i] = arr[k]; i = k; &#125;else&#123; break; &#125; &#125; arr[i] = temp;//å°†tempå€¼æ”¾åˆ°æœ€ç»ˆçš„ä½ç½® &#125; /** * äº¤æ¢å…ƒç´  * @param arr * @param a * @param b */ public static void swap(int []arr,int a ,int b)&#123; int temp=arr[a]; arr[a] = arr[b]; arr[b] = temp; &#125;&#125; 9.4 ç®—æ³•æ•ˆç‡ç”±äºå †æ’åºä¸­åˆå§‹åŒ–å †çš„è¿‡ç¨‹æ¯”è¾ƒæ¬¡æ•°è¾ƒå¤š, å› æ­¤å®ƒä¸å¤ªé€‚ç”¨äºå°åºåˆ—ã€‚åŒæ—¶ç”±äºå¤šæ¬¡ä»»æ„ä¸‹æ ‡ç›¸äº’äº¤æ¢ä½ç½®, ç›¸åŒå…ƒç´ ä¹‹é—´åŸæœ¬ç›¸å¯¹çš„é¡ºåºè¢«ç ´åäº†, å› æ­¤, å®ƒæ˜¯ä¸ç¨³å®šçš„æ’åºã€‚ â‘ . å»ºç«‹å †çš„è¿‡ç¨‹, ä»length&#x2F;2 ä¸€ç›´å¤„ç†åˆ°0, æ—¶é—´å¤æ‚åº¦ä¸ºO(n); â‘¡. è°ƒæ•´å †çš„è¿‡ç¨‹æ˜¯æ²¿ç€å †çš„çˆ¶å­èŠ‚ç‚¹è¿›è¡Œè°ƒæ•´, æ‰§è¡Œæ¬¡æ•°ä¸ºå †çš„æ·±åº¦, æ—¶é—´å¤æ‚åº¦ä¸ºO(lgn); â‘¢. å †æ’åºçš„è¿‡ç¨‹ç”±næ¬¡ç¬¬â‘¡æ­¥å®Œæˆ, æ—¶é—´å¤æ‚åº¦ä¸ºO(nlgn). å¹³å‡æ—¶é—´å¤æ‚åº¦ æœ€å¥½æƒ…å†µ æœ€åæƒ…å†µ ç©ºé—´å¤æ‚åº¦ O(nlogn) O(nlogn) O(nlogn) O(1) ä»æ—¶é—´å¤æ‚åº¦æ¥è¯´ï¼š (1). å¹³æ–¹é˜¶O(nÂ²)æ’åºï¼šå„ç±»ç®€å•æ’åºï¼šç›´æ¥æ’å…¥ã€ç›´æ¥é€‰æ‹©å’Œå†’æ³¡æ’åºï¼› (2). çº¿æ€§å¯¹æ•°é˜¶O(nlogâ‚‚n)æ’åºï¼šå¿«é€Ÿæ’åºã€å †æ’åºå’Œå½’å¹¶æ’åºï¼› (3). O(n1+Â§))æ’åºï¼ŒÂ§æ˜¯ä»‹äº0å’Œ1ä¹‹é—´çš„å¸¸æ•°ï¼šå¸Œå°”æ’åº (4). çº¿æ€§é˜¶O(n)æ’åºï¼šåŸºæ•°æ’åºï¼Œæ­¤å¤–è¿˜æœ‰æ¡¶ã€ç®±æ’åºã€‚ æ—¶é—´å¤æ‚åº¦æé™ï¼š å½“è¢«æ’åºçš„æ•°æœ‰ä¸€äº›æ€§è´¨çš„æ—¶å€™ï¼ˆæ¯”å¦‚æ˜¯æ•´æ•°ï¼Œæ¯”å¦‚æœ‰ä¸€å®šçš„èŒƒå›´ï¼‰ï¼Œæ’åºç®—æ³•çš„å¤æ‚åº¦æ˜¯å¯ä»¥å°äºO(nlgn)çš„ã€‚æ¯”å¦‚ï¼š è®¡æ•°æ’åº å¤æ‚åº¦O( k+n) è¦æ±‚ï¼šè¢«æ’åºçš„æ•°æ˜¯0~kèŒƒå›´å†…çš„æ•´æ•° åŸºæ•°æ’åº å¤æ‚åº¦O( d(k+n) ) è¦æ±‚ï¼šdä½æ•°ï¼Œæ¯ä¸ªæ•°ä½æœ‰kä¸ªå–å€¼ æ¡¶æ’åº å¤æ‚åº¦ O( n ) ï¼ˆå¹³å‡ï¼‰ è¦æ±‚ï¼šè¢«æ’åºæ•°åœ¨æŸä¸ªèŒƒå›´å†…ï¼Œå¹¶ä¸”æœä»å‡åŒ€åˆ†å¸ƒ ä½†æ˜¯ï¼Œå½“è¢«æ’åºçš„æ•°ä¸å…·æœ‰ä»»ä½•æ€§è´¨çš„æ—¶å€™ï¼Œä¸€èˆ¬ä½¿ç”¨åŸºäºæ¯”è¾ƒçš„æ’åºç®—æ³•ï¼Œè€ŒåŸºäºæ¯”è¾ƒçš„æ’åºç®—æ³•æ—¶é—´å¤æ‚åº¦çš„ä¸‹é™å¿…é¡»æ˜¯O( nlgn) ã€‚å‚è€ƒå¾ˆå¤šé«˜æ•ˆæ’åºç®—æ³•çš„ä»£ä»·æ˜¯ nlognï¼Œéš¾é“è¿™æ˜¯æ’åºç®—æ³•çš„æé™äº†å—ï¼Ÿ è¯´æ˜ å½“åŸè¡¨æœ‰åºæˆ–åŸºæœ¬æœ‰åºæ—¶ï¼Œç›´æ¥æ’å…¥æ’åºå’Œå†’æ³¡æ’åºå°†å¤§å¤§å‡å°‘æ¯”è¾ƒæ¬¡æ•°å’Œç§»åŠ¨è®°å½•çš„æ¬¡æ•°ï¼Œæ—¶é—´å¤æ‚åº¦å¯é™è‡³Oï¼ˆnï¼‰ï¼› è€Œå¿«é€Ÿæ’åºåˆ™ç›¸åï¼Œå½“åŸè¡¨åŸºæœ¬æœ‰åºæ—¶ï¼Œå°†èœ•åŒ–ä¸ºå†’æ³¡æ’åºï¼Œæ—¶é—´å¤æ‚åº¦æé«˜ä¸ºOï¼ˆn2ï¼‰ï¼› åŸè¡¨æ˜¯å¦æœ‰åºï¼Œå¯¹ç®€å•é€‰æ‹©æ’åºã€å †æ’åºã€å½’å¹¶æ’åºå’ŒåŸºæ•°æ’åºçš„æ—¶é—´å¤æ‚åº¦å½±å“ä¸å¤§ã€‚ 11.å‚è€ƒèµ„æ–™ å…«å¤§æ’åºç®—æ³•æ€»ç»“ä¸javaå®ç° å›¾è§£æ’åºç®—æ³•(ä¸‰)ä¹‹å †æ’åº","link":"","tags":[{"name":"java","slug":"java","permalink":"https://lyroom.github.io/tags/java/"},{"name":"æ’åºç®—æ³•","slug":"æ’åºç®—æ³•","permalink":"https://lyroom.github.io/tags/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/"}]},{"title":"VMware+Centosé™æ€ipé…ç½®","date":"2020-07-15T06:27:55.000Z","path":"2020/07/15/VMware-Centosé™æ€ipé…ç½®/","text":"å‰ææ˜¯ä½ çš„Centos7å®‰è£…æ—¶ï¼Œç½‘ç»œé€‚é…å™¨é€‰æ‹©çš„æ˜¯Netæ¨¡å¼ ç¬¬ä¸€æ­¥ï¼šVMwareå¼€å¯åï¼Œæˆ‘ä»¬ç‚¹å‡»å¤´éƒ¨èœå•ä¸­çš„â€œç¼–è¾‘â€ï¼Œåœ¨ä¸‹æ‹‰èœå•ä¸­ç‚¹å‡»â€œè™šæ‹Ÿç½‘ç»œç¼–è¾‘å™¨(N)â€¦â€ï¼Œç„¶åç‚¹å‡»æ›´æ”¹è®¾ç½®ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º ç¬¬äºŒæ­¥ï¼šç‚¹å‡»ä¸Šå›¾çš„â€æ›´æ”¹è®¾ç½®â€ä¹‹åï¼Œæˆ‘ä»¬ä¼šçœ‹åˆ°å¦‚ä¸‹å›¾æ‰€ç¤ºçš„ç•Œé¢ï¼Œæˆ‘ä»¬å…ˆç‚¹å‡»VMnet8é‚£ä¸€è¡Œï¼Œç„¶åæŠŠä¸‹é¢â€œä½¿ç”¨æœ¬åœ°DHCPæœåŠ¡å°†IPåœ°å€åˆ†é…ç»™è™šæ‹Ÿæœº(D)â€å‰é¢çš„å‹¾é€‰çŠ¶æ€å˜ä¸ºæœªå‹¾é€‰çŠ¶æ€ã€‚åˆå§‹çŠ¶æ€VMnet8çš„å­ç½‘IPä¸æ˜¯è¿™ä¸ªåœ°å€çš„ï¼Œæˆ‘ä»¬å‚è€ƒVMnet1çš„IPï¼Œä¹Ÿä»¥192.168å¼€å¤´ï¼Œè‡³äºç¬¬ä¸‰ä¸ªï¼Œè¿™é‡Œæˆ‘ä½¿ç”¨çš„æ˜¯98ï¼Œç¬¬å››ä¸ªåˆ™æ˜¯0ï¼ˆæ³¨æ„ï¼šä¸‹å›¾çš„é…ç½®åˆšå¼€å§‹æ˜¯æœ€å¥½æ˜¯åˆå§‹é…ç½®ï¼Œå¦‚æœä½ æ›¾ç»ä¹±é…è¿‡ï¼Œå¯èƒ½ä¼šæœ‰é—®é¢˜ï¼Œå¦‚æœæƒ³è¦æ¢å¤åˆ°åˆå§‹åŒ–é…ç½®ï¼Œåˆ™ç‚¹å‡»â€è¿˜åŸé»˜è®¤è®¾ç½®(R)â€æŒ‰é’®æ¥æ¢å¤åˆå§‹åŒ–çš„é…ç½®ï¼Œç„¶åé‡æ–°å¼€å§‹ï¼‰ï¼Œç„¶åæˆ‘ä»¬ç‚¹å‡»â€NAT è®¾ç½® æˆ‘ä»¬ç‚¹å‡»ä¸Šå›¾çš„â€œNAT è®¾ç½®(S)â€¦â€æŒ‰é’®åï¼Œä¼šå¼¹å‡ºå¦‚ä¸‹å›¾æ‰€ç¤ºçš„ç•Œé¢ï¼Œæˆ‘ä»¬æŠŠç½‘å…³IP(G)ä¿®æ”¹ä¸ºâ€192.168.98.2â€œï¼Œè¿™ä¸ªIPåœ¨åé¢çš„é…ç½®ä¸­ä¼šç”¨åˆ°ã€‚è®°ä¸‹è¿™ä¸ªIPåï¼Œç‚¹å‡»â€œç¡®å®šâ€æŒ‰é’®å…³é—­å½“å‰ç•Œé¢ï¼Œç„¶åç‚¹å‡»ä¸Šå›¾çš„â€œç¡®å®šâ€æŒ‰é’®å…³é—­çˆ¶ç•Œé¢ã€‚ ç¬¬ä¸‰æ­¥ï¼šå¯åŠ¨CentOS7è™šæ‹Ÿæœºï¼Œå¯åŠ¨åï¼Œæˆ‘ä»¬éœ€è¦ä¿®æ”¹ä¸€ä¸ªæ–‡ä»¶ï¼Œï¼ˆç®¡ç†å‘˜æ¨¡å¼ä¸‹ï¼‰è¾“å…¥ 1vim /etc/sysconfig/network-scripts/ifcfg-ens33 å›è½¦è¿›å…¥ç½‘å¡ä¿¡æ¯ç¼–è¾‘ï¼Œå¦‚ä¸‹å›¾ æœ€åè¾“å…¥ 1ystemctl restart network.service å›è½¦ï¼Œä¿å­˜ï¼Œpingä¸€ä¸‹ç™¾åº¦è¯•è¯• å¤§åŠŸå‘Šæˆï¼ï¼ï¼","link":"","tags":[{"name":"Linux","slug":"Linux","permalink":"https://lyroom.github.io/tags/Linux/"},{"name":"VMware","slug":"VMware","permalink":"https://lyroom.github.io/tags/VMware/"}]}]